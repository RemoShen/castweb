{"version":3,"file":"app.bundle.js","mappings":"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","sources":["webpack://canis-geditor/./src/assets/style/app.scss","webpack://canis-geditor/./src/assets/style/attrSort.scss","webpack://canis-geditor/./src/assets/style/dragableCanvas.scss","webpack://canis-geditor/./src/assets/style/floating-window.scss","webpack://canis-geditor/./src/assets/style/hint.scss","webpack://canis-geditor/./src/assets/style/keyframeContainer.scss","webpack://canis-geditor/./src/assets/style/keyframeTrack.scss","webpack://canis-geditor/./src/assets/style/loading.scss","webpack://canis-geditor/./src/assets/style/nav.scss","webpack://canis-geditor/./src/assets/style/player.scss","webpack://canis-geditor/./src/assets/style/resizablePanel.scss","webpack://canis-geditor/./src/assets/style/selectableTable.scss","webpack://canis-geditor/./src/assets/style/selection.scss","webpack://canis-geditor/./src/assets/style/slider.scss","webpack://canis-geditor/./src/assets/style/sortableSvgTable.scss","webpack://canis-geditor/./src/assets/style/suggestBox.scss","webpack://canis-geditor/./src/assets/style/view-window.scss","webpack://canis-geditor/./node_modules/css-loader/dist/runtime/api.js","webpack://canis-geditor/./node_modules/css-loader/dist/runtime/getUrl.js","webpack://canis-geditor/./node_modules/css-loader/dist/runtime/sourceMaps.js","webpack://canis-geditor/./src/assets/charts/GDPofRegions.svg","webpack://canis-geditor/./src/assets/charts/bostonWeather.svg","webpack://canis-geditor/./src/assets/charts/chinapm.svg","webpack://canis-geditor/./src/assets/charts/co2.svg","webpack://canis-geditor/./src/assets/charts/desserts.svg","webpack://canis-geditor/./src/assets/charts/driving.svg","webpack://canis-geditor/./src/assets/charts/education.svg","webpack://canis-geditor/./src/assets/charts/flare.svg","webpack://canis-geditor/./src/assets/charts/food_supply.svg","webpack://canis-geditor/./src/assets/charts/fruit.svg","webpack://canis-geditor/./src/assets/charts/gantt.svg","webpack://canis-geditor/./src/assets/charts/hiring.svg","webpack://canis-geditor/./src/assets/charts/mushrooms.svg","webpack://canis-geditor/./src/assets/charts/nightingale.svg","webpack://canis-geditor/./src/assets/charts/os.svg","webpack://canis-geditor/./src/assets/charts/polio_black.svg","webpack://canis-geditor/./src/assets/charts/purchases.svg","webpack://canis-geditor/./src/assets/charts/tScore.svg","webpack://canis-geditor/./src/assets/charts/usPopulation.svg","webpack://canis-geditor/./src/assets/charts/weather.svg","webpack://canis-geditor/./src/assets/charts/worldPopulation.svg","webpack://canis-geditor/./src/assets/img/examples/GDPofRegions.png","webpack://canis-geditor/./src/assets/img/examples/bostonWeather.png","webpack://canis-geditor/./src/assets/img/examples/chinapm.png","webpack://canis-geditor/./src/assets/img/examples/co2.png","webpack://canis-geditor/./src/assets/img/examples/dessert.png","webpack://canis-geditor/./src/assets/img/examples/driving.png","webpack://canis-geditor/./src/assets/img/examples/education.png","webpack://canis-geditor/./src/assets/img/examples/flare.png","webpack://canis-geditor/./src/assets/img/examples/food_supply.png","webpack://canis-geditor/./src/assets/img/examples/fruitsale.png","webpack://canis-geditor/./src/assets/img/examples/gantt.png","webpack://canis-geditor/./src/assets/img/examples/hiring.png","webpack://canis-geditor/./src/assets/img/examples/mushroom.png","webpack://canis-geditor/./src/assets/img/examples/nightingale.png","webpack://canis-geditor/./src/assets/img/examples/os.png","webpack://canis-geditor/./src/assets/img/examples/polio.png","webpack://canis-geditor/./src/assets/img/examples/purchases.png","webpack://canis-geditor/./src/assets/img/examples/tscore.png","webpack://canis-geditor/./src/assets/img/examples/usPopulation.png","webpack://canis-geditor/./src/assets/img/examples/weather.png","webpack://canis-geditor/./src/assets/img/examples/worldPopulation.png","webpack://canis-geditor/./src/assets/img/logo.png","webpack://canis-geditor/./node_modules/jsmovin/bin/easing.js","webpack://canis-geditor/./node_modules/jsmovin/bin/helper.js","webpack://canis-geditor/./node_modules/jsmovin/bin/jsmovin.js","webpack://canis-geditor/./node_modules/jsmovin/bin/layer.js","webpack://canis-geditor/./node_modules/jsmovin/bin/path.js","webpack://canis-geditor/./node_modules/jsmovin/bin/render.js","webpack://canis-geditor/./node_modules/lottie-web/build/player/lottie.js","webpack://canis-geditor/./node_modules/robust-orientation/orientation.js","webpack://canis-geditor/./node_modules/robust-point-in-polygon/robust-pnp.js","webpack://canis-geditor/./node_modules/robust-scale/robust-scale.js","webpack://canis-geditor/./node_modules/robust-subtract/robust-diff.js","webpack://canis-geditor/./node_modules/robust-sum/robust-sum.js","webpack://canis-geditor/./src/assets/style/app.scss?9c7b","webpack://canis-geditor/./src/assets/style/attrSort.scss?10fb","webpack://canis-geditor/./src/assets/style/dragableCanvas.scss?43fe","webpack://canis-geditor/./src/assets/style/floating-window.scss?be48","webpack://canis-geditor/./src/assets/style/hint.scss?2d66","webpack://canis-geditor/./src/assets/style/keyframeContainer.scss?6515","webpack://canis-geditor/./src/assets/style/keyframeTrack.scss?6736","webpack://canis-geditor/./src/assets/style/loading.scss?8e49","webpack://canis-geditor/./src/assets/style/nav.scss?f8bb","webpack://canis-geditor/./src/assets/style/player.scss?eaff","webpack://canis-geditor/./src/assets/style/resizablePanel.scss?6e00","webpack://canis-geditor/./src/assets/style/selectableTable.scss?8757","webpack://canis-geditor/./src/assets/style/selection.scss?10b4","webpack://canis-geditor/./src/assets/style/slider.scss?4e89","webpack://canis-geditor/./src/assets/style/sortableSvgTable.scss?c92b","webpack://canis-geditor/./src/assets/style/suggestBox.scss?7413","webpack://canis-geditor/./src/assets/style/view-window.scss?587e","webpack://canis-geditor/./node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js","webpack://canis-geditor/./node_modules/style-loader/dist/runtime/insertBySelector.js","webpack://canis-geditor/./node_modules/style-loader/dist/runtime/insertStyleElement.js","webpack://canis-geditor/./node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js","webpack://canis-geditor/./node_modules/style-loader/dist/runtime/styleDomAPI.js","webpack://canis-geditor/./node_modules/style-loader/dist/runtime/styleTagTransform.js","webpack://canis-geditor/./node_modules/svg-path-parser/index.js","webpack://canis-geditor/./node_modules/svg-path-parser/parser.js","webpack://canis-geditor/./src/app.ts","webpack://canis-geditor/./src/app/addPanel.ts","webpack://canis-geditor/./src/app/animationTree.ts","webpack://canis-geditor/./src/app/chartManager.ts","webpack://canis-geditor/./src/app/core/canisGenerator.ts","webpack://canis-geditor/./src/app/kfTrack.ts","webpack://canis-geditor/./src/app/kfTree.ts","webpack://canis-geditor/./src/app/markSelector.ts","webpack://canis-geditor/./src/app/markTableManager.ts","webpack://canis-geditor/./src/app/polygon.ts","webpack://canis-geditor/./src/app/sortUtil.ts","webpack://canis-geditor/./src/app/suggestPanel.ts","webpack://canis-geditor/./src/app_backup/action.ts","webpack://canis-geditor/./src/app_backup/core/canisGenerator.ts","webpack://canis-geditor/./src/app_backup/core/suggest.ts","webpack://canis-geditor/./src/app_backup/core/util.ts","webpack://canis-geditor/./src/app_backup/reducer.ts","webpack://canis-geditor/./src/app_backup/renderer.ts","webpack://canis-geditor/./src/app_backup/state.ts","webpack://canis-geditor/./src/components/floatingWindow.ts","webpack://canis-geditor/./src/components/kfContainer.ts","webpack://canis-geditor/./src/components/nav.ts","webpack://canis-geditor/./src/components/player.ts","webpack://canis-geditor/./src/components/resizablePanel.ts","webpack://canis-geditor/./src/components/viewWindow.ts","webpack://canis-geditor/./src/components/widgets/attrSort.ts","webpack://canis-geditor/./src/components/widgets/dragableCanvas.ts","webpack://canis-geditor/./src/components/widgets/hint.ts","webpack://canis-geditor/./src/components/widgets/intelliRefLine.ts","webpack://canis-geditor/./src/components/widgets/kfGroup.ts","webpack://canis-geditor/./src/components/widgets/kfItem.ts","webpack://canis-geditor/./src/components/widgets/kfOmit.ts","webpack://canis-geditor/./src/components/widgets/kfTimingIllus.ts","webpack://canis-geditor/./src/components/widgets/kfTrack.ts","webpack://canis-geditor/./src/components/widgets/loading.ts","webpack://canis-geditor/./src/components/widgets/plusBtn.ts","webpack://canis-geditor/./src/components/widgets/selectableTable.ts","webpack://canis-geditor/./src/components/widgets/slider.ts","webpack://canis-geditor/./src/components/widgets/sortableSvgTable.ts","webpack://canis-geditor/./src/components/widgets/suggestBox.ts","webpack://canis-geditor/./src/util/lasso.ts","webpack://canis-geditor/./src/util/rectangular.ts","webpack://canis-geditor/./src/util/tool.ts","webpack://canis-geditor/./node_modules/two-product/two-product.js","webpack://canis-geditor/./node_modules/two-sum/two-sum.js","webpack://canis-geditor/./node_modules/uuid/lib/bytesToUuid.js","webpack://canis-geditor/./node_modules/uuid/lib/rng-browser.js","webpack://canis-geditor/./node_modules/uuid/v4.js","webpack://canis-geditor/./src/canis/ActionSpec.js","webpack://canis-geditor/./src/canis/GroupingSpec.js","webpack://canis-geditor/./src/canis/TimingSpec.js","webpack://canis-geditor/./src/canis/FacetSpec.js","webpack://canis-geditor/./src/canis/ChartSpec.js","webpack://canis-geditor/./src/canis/AnimationSpec.js","webpack://canis-geditor/./src/canis/CanisSpec.js","webpack://canis-geditor/./src/canis/moduleIdx.js","webpack://canis-geditor/./src/canis/util/GlobalVar.js","webpack://canis-geditor/./src/canis/util/Util.js","webpack://canis-geditor/webpack/bootstrap","webpack://canis-geditor/webpack/runtime/amd options","webpack://canis-geditor/webpack/runtime/compat get default export","webpack://canis-geditor/webpack/runtime/define property getters","webpack://canis-geditor/webpack/runtime/global","webpack://canis-geditor/webpack/runtime/hasOwnProperty shorthand","webpack://canis-geditor/webpack/runtime/make namespace object","webpack://canis-geditor/webpack/runtime/publicPath","webpack://canis-geditor/webpack/runtime/jsonp chunk loading","webpack://canis-geditor/webpack/runtime/nonce","webpack://canis-geditor/webpack/startup"],"sourcesContent":["// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/getUrl.js\";\nvar ___CSS_LOADER_URL_IMPORT_0___ = new URL(\"../font/geforce.woff2\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_1___ = new URL(\"../font/geforce.woff\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_2___ = new URL(\"../font/geforce.ttf\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_3___ = new URL(\"../font/geforce.otf\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_4___ = new URL(\"../font/UbuntuMono-Regular.ttf\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_5___ = new URL(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAGb2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDE5LTA1LTI0VDE1OjEyOjQ5KzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE5LTA1LTI0VDE1OjEyOjQ5KzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOS0wNS0yNFQxNToxMjo0OSswODowMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDphNGM2ZTdmZi04YWM0LTEwNDgtYjlkNS1iYTM5NzZiODhkNTkiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpiYWQ0YWU3YS00MmFkLTI2NGYtYjc1Yi0yMjU1ZTdhYWFkOWEiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo5NWUxMjJlNy1lMGVjLWQ2NDktYWQwZC04ZjA4ZGM2MDAwNDQiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo5NWUxMjJlNy1lMGVjLWQ2NDktYWQwZC04ZjA4ZGM2MDAwNDQiIHN0RXZ0OndoZW49IjIwMTktMDUtMjRUMTU6MTI6NDkrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YTRjNmU3ZmYtOGFjNC0xMDQ4LWI5ZDUtYmEzOTc2Yjg4ZDU5IiBzdEV2dDp3aGVuPSIyMDE5LTA1LTI0VDE1OjEyOjQ5KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDxyZGY6QmFnPiA8cmRmOmxpPmFkb2JlOmRvY2lkOnBob3Rvc2hvcDowMTMzOWYxNC1mZDEwLWE3NGQtYmY3ZC0yMTYyOWUxMzEzMDE8L3JkZjpsaT4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz456hG0AAADFUlEQVRIie2VzU8TQRiHf7Pbz4UQxRZaIgEhSAUaSCkEwoVE0gtqCDERvOHVA948cOI/wMTYGxc8ES9VKgcx4QAajZUEjFkbq3wGJfQDdlnC7rKvB2ixUqAc9OSTTLKZSeaZ+b377jIiwt+E+6u7/wuBKf3Q3R04snI8eJ7D5OSUV1XVuwB+lJdffrmysnoDQGl5+eWnxcUXPn3+/AUWixnt7a1IJFLY3t5GXZ0HoVD4uGBubj4zyfMmEBkdqqrOBAIBLC8vQxTFkYaGBrhcLkxNTT1cWVl9BeCKpmnfUqmtexzH1hhjx69ARCAicBwHjuPA85nUosPDw0RE+0REwWCQDjGGhoaoq6uLQqEQ9fX1EYCfgmCvaGz04s6d3syeRHQkcLtdcLtdKCtzoaTEAQCJ2dk3dALG4SAi0hnjCAABeNbW5jfnFAiCHYJgh81mQ2FhAQCsTUyETxJksbi4uB+JRKi5uZkAjPwuyOShKLtQlF04nQ4IggAA2sGhzqaiooLz+XwYGBgAgJacb1GaVCrVKkmyH8BFWZbzEqTZ2NgAgMRpgseSJN/3+/2w2+3wer0GztEr6+vrALCZNZnOijF22+l0UiwW+7OI+bLf0dFBJpNpKGeRATwfHHyQ3vzcqKpqmEwmAtCZs8gAopHIh7zz/pNwOMx0XZerqipnckZUXV3pAKD09/cTHTbXOTB6enoIwJjbXZq70Xp7b6KpyXsVwGpnZyfpup53VIqiGGazmUpLndevXavNEmQikiQZNTXV0ba2lrrp6en52tpatrm5mVcjjI09ZZqm/dA0/XUymcpaywh4nocs76CqqnK7uzvQGIvFXng8Hra0tHSWhILBIAA8cTguwWIx5xbs7CiQJBnR6Fckk1uor/fcisfj78fHxxkOWvqkgbW1VTDG3sbjCUiSlCXINFos9h1EBvb2VOi6DqvVCp7n9dHRUSwsLDDDMI4dPf15TiaTsNmsF4qKCqGqWm6B1WoFY0BBQQEYY7BYLCCiR6IofhRF8bSIGM/zus/X+K6oqBB7e2r2Iv3/6Z/BL5oAtNSvyPOCAAAAAElFTkSuQmCC\", import.meta.url);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n___CSS_LOADER_EXPORT___.push([module.id, \"@import url(https://fonts.googleapis.com/css?family=Roboto:100,300,400&display=swap);\"]);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\nvar ___CSS_LOADER_URL_REPLACEMENT_1___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_1___);\nvar ___CSS_LOADER_URL_REPLACEMENT_2___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_2___);\nvar ___CSS_LOADER_URL_REPLACEMENT_3___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_3___);\nvar ___CSS_LOADER_URL_REPLACEMENT_4___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_4___);\nvar ___CSS_LOADER_URL_REPLACEMENT_5___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_5___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \"::-webkit-scrollbar{width:6px;margin-right:2px}::-webkit-scrollbar:horizontal{height:8px;margin-bottom:2px}::-webkit-scrollbar-track{border-radius:8px}::-webkit-scrollbar-track-piece{background-color:#cdcdcd;border-radius:8px}::-webkit-scrollbar-thumb{width:4px;border-radius:3px;background:var(--gray3);margin-right:3px}@font-face{font-family:\\\"geforce\\\";src:url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \") format(\\\"woff2\\\"),url(\" + ___CSS_LOADER_URL_REPLACEMENT_1___ + \") format(\\\"woff\\\"),url(\" + ___CSS_LOADER_URL_REPLACEMENT_2___ + \") format(\\\"truetype\\\"),url(\" + ___CSS_LOADER_URL_REPLACEMENT_3___ + \") format(\\\"opentype\\\")}@font-face{font-family:\\\"mono\\\";src:url(\" + ___CSS_LOADER_URL_REPLACEMENT_4___ + \") format(\\\"truetype\\\")}:root{--nav-content-height: 20px;--widget-font-size: 11pt;--title-height: 26px;--geforce-font: \\\"geforce\\\";--mono-font: \\\"mono\\\";--gray1: #ffffff;--gray2: #f7f7f7;--gray3: #f2f2f2;--gray4: #ededed;--gray5: #e6e6e6;--gray6: #e2e2e2;--gray7: #dadada;--gray8: #d2d2d2;--gray9: #c2c2c2;--gray10: #a5a5a5;--gray11: #a3a3a3;--gray12: #939393;--gray13: #676767;--gray14: #484848;--gray15: #383838;--gray16: #000000;--highlight-blue: #2196f3;--highlight-orange: #ff9246;--selected-bg: #cbeaff}.zero-margin-padding,.outer-wrapper,html,body{margin:0;padding:0}.cover-size,.outer-wrapper,html,body{width:100%;height:100%}*{-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none}html,body{background:var(--gray3);font-family:\\\"Lato\\\",\\\"Lucida Grande\\\",\\\"Segoe UI\\\",sans-serif}.outer-wrapper{display:flex;flex-direction:column;width:100vw;height:100vh}.inner-wrapper{flex:1;height:500px !important}.footer{width:100%;height:22px;color:var(--gray1);background:var(--highlight-blue)}.ease-transform{transition:transform .1s cubic-bezier(0.445, 0.05, 0.55, 0.95)}.ease-fade{transition:opacity .1s cubic-bezier(0.445, 0.05, 0.55, 0.95)}.ease-fill{transition:fill .1s cubic-bezier(0.445, 0.05, 0.55, 0.95)}.drop-shadow-ele{filter:url(#hoverShadow)}.draggable-component{cursor:move}.grabbing-ele{cursor:url(\" + ___CSS_LOADER_URL_REPLACEMENT_5___ + \"),auto}.clickable-component{cursor:pointer}.stretchable-component{cursor:ew-resize}.fadein-ele{opacity:0}.fadein-ele:hover{opacity:1}.show-ele{opacity:1}.hide-ele{opacity:0}.no-display-ele{display:none}.wait{cursor:wait}.monospace-font{font-family:var(--mono-font)}.small-font{font-size:9pt}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/assets/style/scroller.scss\",\"webpack://./src/assets/style/app.scss\"],\"names\":[],\"mappings\":\"AAAA,oBACC,SAAA,CACA,gBAAA,CAGD,+BACC,UAAA,CACA,iBAAA,CAGD,0BACC,iBAAA,CAGD,gCACC,wBAAA,CACA,iBAAA,CAGD,0BACC,SAAA,CACA,iBAAA,CAEA,uBAAA,CACA,gBAAA,CCrBD,WACI,qBAAA,CAEA,wOAAA,CAMJ,WACI,kBAAA,CAEA,8DAAA,CAGJ,MACI,0BAAA,CACA,wBAAA,CACA,oBAAA,CACA,yBAAA,CACA,mBAAA,CACA,gBAAA,CACA,gBAAA,CACA,gBAAA,CACA,gBAAA,CACA,gBAAA,CACA,gBAAA,CACA,gBAAA,CACA,gBAAA,CACA,gBAAA,CACA,iBAAA,CACA,iBAAA,CACA,iBAAA,CACA,iBAAA,CACA,iBAAA,CACA,iBAAA,CACA,iBAAA,CACA,yBAAA,CACA,2BAAA,CACA,sBAAA,CAGJ,8CACI,QAAA,CACA,SAAA,CAGJ,qCACI,UAAA,CACA,WAAA,CAGJ,EACI,wBAAA,CACA,qBAAA,CACA,oBAAA,CACA,gBAAA,CAGJ,UAII,uBAAA,CACA,wDAAA,CAIJ,eAGI,YAAA,CACA,qBAAA,CACA,WAAA,CACA,YAAA,CAGJ,eACI,MAAA,CACA,uBAAA,CAGJ,QACI,UAAA,CACA,WAAA,CACA,kBAAA,CACA,gCAAA,CAGJ,gBACI,8DAAA,CAGJ,WACI,4DAAA,CAGJ,WACI,yDAAA,CAGJ,iBACI,wBAAA,CAGJ,qBACI,WAAA,CAGJ,cACI,mDAAA,CAGJ,qBACI,cAAA,CAGJ,uBACI,gBAAA,CAGJ,YACI,SAAA,CAGJ,kBACI,SAAA,CAGJ,UACI,SAAA,CAGJ,UACI,SAAA,CAGJ,gBACI,YAAA,CAGJ,MACI,WAAA,CAGJ,gBACI,4BAAA,CAGJ,YACI,aAAA\",\"sourcesContent\":[\"::-webkit-scrollbar {\\r\\n\\twidth: 6px;\\r\\n\\tmargin-right: 2px;\\r\\n}\\r\\n\\r\\n::-webkit-scrollbar:horizontal {\\r\\n\\theight: 8px;\\r\\n\\tmargin-bottom: 2px;\\r\\n}\\r\\n\\r\\n::-webkit-scrollbar-track {\\r\\n\\tborder-radius: 8px;\\r\\n}\\r\\n\\r\\n::-webkit-scrollbar-track-piece {\\r\\n\\tbackground-color: #cdcdcd;\\r\\n\\tborder-radius: 8px;\\r\\n}\\r\\n\\r\\n::-webkit-scrollbar-thumb {\\r\\n\\twidth: 4px;\\r\\n\\tborder-radius: 3px;\\r\\n\\t// background: #8f8f8f;\\r\\n\\tbackground: var(--gray3);\\r\\n\\tmargin-right: 3px;\\r\\n\\t// box-shadow: 0 0 4px rgba(0, 0, 0, 0.2);\\r\\n}\\r\\n\",\"@import \\\"./scroller.scss\\\";\\r\\n@import url(\\\"https://fonts.googleapis.com/css?family=Roboto:100,300,400&display=swap\\\");\\r\\n\\r\\n@font-face {\\r\\n    font-family: \\\"geforce\\\";\\r\\n\\r\\n    src: url(\\\"../font/geforce.woff2\\\") format(\\\"woff2\\\"),\\r\\n        url(\\\"../font/geforce.woff\\\") format(\\\"woff\\\"),\\r\\n        url(\\\"../font/geforce.ttf\\\") format(\\\"truetype\\\"),\\r\\n        url(\\\"../font/geforce.otf\\\") format(\\\"opentype\\\");\\r\\n}\\r\\n\\r\\n@font-face {\\r\\n    font-family: \\\"mono\\\";\\r\\n    \\r\\n    src: url(\\\"../font/UbuntuMono-Regular.ttf\\\") format(\\\"truetype\\\");\\r\\n}\\r\\n\\r\\n:root {\\r\\n    --nav-content-height: 20px;\\r\\n    --widget-font-size: 11pt;\\r\\n    --title-height: 26px;\\r\\n    --geforce-font: \\\"geforce\\\";\\r\\n    --mono-font: \\\"mono\\\";\\r\\n    --gray1: #ffffff;\\r\\n    --gray2: #f7f7f7;\\r\\n    --gray3: #f2f2f2;\\r\\n    --gray4: #ededed;\\r\\n    --gray5: #e6e6e6;\\r\\n    --gray6: #e2e2e2;\\r\\n    --gray7: #dadada;\\r\\n    --gray8: #d2d2d2;\\r\\n    --gray9: #c2c2c2;\\r\\n    --gray10: #a5a5a5;\\r\\n    --gray11: #a3a3a3;\\r\\n    --gray12: #939393;\\r\\n    --gray13: #676767;\\r\\n    --gray14: #484848;\\r\\n    --gray15: #383838;\\r\\n    --gray16: #000000;\\r\\n    --highlight-blue: #2196f3;\\r\\n    --highlight-orange: #ff9246;\\r\\n    --selected-bg: #cbeaff;\\r\\n}\\r\\n\\r\\n.zero-margin-padding {\\r\\n    margin: 0;\\r\\n    padding: 0;\\r\\n}\\r\\n\\r\\n.cover-size {\\r\\n    width: 100%;\\r\\n    height: 100%;\\r\\n}\\r\\n\\r\\n* {\\r\\n    -webkit-user-select: none;\\r\\n    -moz-user-select: none;\\r\\n    -ms-user-select: none;\\r\\n    user-select: none;\\r\\n}\\r\\n\\r\\nhtml,\\r\\nbody {\\r\\n    @extend .zero-margin-padding;\\r\\n    @extend .cover-size;\\r\\n    background: var(--gray3);\\r\\n    font-family: \\\"Lato\\\", \\\"Lucida Grande\\\", \\\"Segoe UI\\\", sans-serif;\\r\\n    // overflow: auto;\\r\\n}\\r\\n\\r\\n.outer-wrapper {\\r\\n    @extend .zero-margin-padding;\\r\\n    @extend .cover-size;\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n    width: 100vw;\\r\\n    height: 100vh;\\r\\n}\\r\\n\\r\\n.inner-wrapper {\\r\\n    flex: 1;\\r\\n    height: 500px !important;\\r\\n}\\r\\n\\r\\n.footer {\\r\\n    width: 100%;\\r\\n    height: 22px;\\r\\n    color: var(--gray1);\\r\\n    background: var(--highlight-blue);\\r\\n}\\r\\n\\r\\n.ease-transform {\\r\\n    transition: transform 0.1s cubic-bezier(0.445, 0.05, 0.55, 0.95);\\r\\n}\\r\\n\\r\\n.ease-fade {\\r\\n    transition: opacity 0.1s cubic-bezier(0.445, 0.05, 0.55, 0.95);\\r\\n}\\r\\n\\r\\n.ease-fill {\\r\\n    transition: fill 0.1s cubic-bezier(0.445, 0.05, 0.55, 0.95);\\r\\n}\\r\\n\\r\\n.drop-shadow-ele {\\r\\n    filter: url(#hoverShadow);\\r\\n}\\r\\n\\r\\n.draggable-component {\\r\\n    cursor: move;\\r\\n}\\r\\n\\r\\n.grabbing-ele {\\r\\n    cursor: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAGb2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDE5LTA1LTI0VDE1OjEyOjQ5KzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE5LTA1LTI0VDE1OjEyOjQ5KzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOS0wNS0yNFQxNToxMjo0OSswODowMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDphNGM2ZTdmZi04YWM0LTEwNDgtYjlkNS1iYTM5NzZiODhkNTkiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpiYWQ0YWU3YS00MmFkLTI2NGYtYjc1Yi0yMjU1ZTdhYWFkOWEiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo5NWUxMjJlNy1lMGVjLWQ2NDktYWQwZC04ZjA4ZGM2MDAwNDQiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo5NWUxMjJlNy1lMGVjLWQ2NDktYWQwZC04ZjA4ZGM2MDAwNDQiIHN0RXZ0OndoZW49IjIwMTktMDUtMjRUMTU6MTI6NDkrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YTRjNmU3ZmYtOGFjNC0xMDQ4LWI5ZDUtYmEzOTc2Yjg4ZDU5IiBzdEV2dDp3aGVuPSIyMDE5LTA1LTI0VDE1OjEyOjQ5KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDxyZGY6QmFnPiA8cmRmOmxpPmFkb2JlOmRvY2lkOnBob3Rvc2hvcDowMTMzOWYxNC1mZDEwLWE3NGQtYmY3ZC0yMTYyOWUxMzEzMDE8L3JkZjpsaT4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz456hG0AAADFUlEQVRIie2VzU8TQRiHf7Pbz4UQxRZaIgEhSAUaSCkEwoVE0gtqCDERvOHVA948cOI/wMTYGxc8ES9VKgcx4QAajZUEjFkbq3wGJfQDdlnC7rKvB2ixUqAc9OSTTLKZSeaZ+b377jIiwt+E+6u7/wuBKf3Q3R04snI8eJ7D5OSUV1XVuwB+lJdffrmysnoDQGl5+eWnxcUXPn3+/AUWixnt7a1IJFLY3t5GXZ0HoVD4uGBubj4zyfMmEBkdqqrOBAIBLC8vQxTFkYaGBrhcLkxNTT1cWVl9BeCKpmnfUqmtexzH1hhjx69ARCAicBwHjuPA85nUosPDw0RE+0REwWCQDjGGhoaoq6uLQqEQ9fX1EYCfgmCvaGz04s6d3syeRHQkcLtdcLtdKCtzoaTEAQCJ2dk3dALG4SAi0hnjCAABeNbW5jfnFAiCHYJgh81mQ2FhAQCsTUyETxJksbi4uB+JRKi5uZkAjPwuyOShKLtQlF04nQ4IggAA2sGhzqaiooLz+XwYGBgAgJacb1GaVCrVKkmyH8BFWZbzEqTZ2NgAgMRpgseSJN/3+/2w2+3wer0GztEr6+vrALCZNZnOijF22+l0UiwW+7OI+bLf0dFBJpNpKGeRATwfHHyQ3vzcqKpqmEwmAtCZs8gAopHIh7zz/pNwOMx0XZerqipnckZUXV3pAKD09/cTHTbXOTB6enoIwJjbXZq70Xp7b6KpyXsVwGpnZyfpup53VIqiGGazmUpLndevXavNEmQikiQZNTXV0ba2lrrp6en52tpatrm5mVcjjI09ZZqm/dA0/XUymcpaywh4nocs76CqqnK7uzvQGIvFXng8Hra0tHSWhILBIAA8cTguwWIx5xbs7CiQJBnR6Fckk1uor/fcisfj78fHxxkOWvqkgbW1VTDG3sbjCUiSlCXINFos9h1EBvb2VOi6DqvVCp7n9dHRUSwsLDDDMI4dPf15TiaTsNmsF4qKCqGqWm6B1WoFY0BBQQEYY7BYLCCiR6IofhRF8bSIGM/zus/X+K6oqBB7e2r2Iv3/6Z/BL5oAtNSvyPOCAAAAAElFTkSuQmCC\\\"), auto;\\r\\n}\\r\\n\\r\\n.clickable-component {\\r\\n    cursor: pointer;\\r\\n}\\r\\n\\r\\n.stretchable-component {\\r\\n    cursor: ew-resize;\\r\\n}\\r\\n\\r\\n.fadein-ele {\\r\\n    opacity: 0;\\r\\n}\\r\\n\\r\\n.fadein-ele:hover {\\r\\n    opacity: 1;\\r\\n}\\r\\n\\r\\n.show-ele {\\r\\n    opacity: 1;\\r\\n}\\r\\n\\r\\n.hide-ele {\\r\\n    opacity: 0;\\r\\n}\\r\\n\\r\\n.no-display-ele {\\r\\n    display: none;\\r\\n}\\r\\n\\r\\n.wait {\\r\\n    cursor: wait;\\r\\n}\\r\\n\\r\\n.monospace-font {\\r\\n    font-family: var(--mono-font);\\r\\n}\\r\\n\\r\\n.small-font {\\r\\n    font-size: 9pt;\\r\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/getUrl.js\";\nvar ___CSS_LOADER_URL_IMPORT_0___ = new URL(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciICAgICB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDEwMCAxMjUiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDEwMCAxMDAiIHhtbDpzcGFjZT0icHJlc2VydmUiPiAgICA8cGF0aCBkPSJNNDcuNDQ5LDY2LjE4Mkw0Ny40NDksNjYuMTgyYy0wLjY2MywwLTEuMjk5LTAuMjY0LTEuNzY4LTAuNzMybC0yNy4zNi0yNy4zNjNjLTAuOTc3LTAuOTc3LTAuOTc3LTIuNTYsMC0zLjUzNSAgYzAuOTc3LTAuOTc3LDIuNTU5LTAuOTc3LDMuNTM1LDBsMjUuNTkzLDI1LjU5NmwyNS41OTUtMjUuNTk0YzAuOTc3LTAuOTc3LDIuNTU5LTAuOTc3LDMuNTM1LDBzMC45NzcsMi41NTksMCwzLjUzNUw0OS4yMTcsNjUuNDQ5ICBDNDguNzQ4LDY1LjkxOCw0OC4xMTIsNjYuMTgyLDQ3LjQ0OSw2Ni4xODJ6Ii8+PC9zdmc+\", import.meta.url);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".attr-sort{display:block;width:100%;height:24px;line-height:24px;text-align:center;border-radius:2px;background:var(--gray3);color:var(--gray13);margin:6px 0;box-shadow:0 0 5px rgba(0,0,0,.1);transition:all .2s cubic-bezier(0.445, 0.05, 0.55, 0.95)}.attr-sort select{float:left;box-sizing:border-box;padding:0 6px;border:none;outline:none;width:100%;height:24px;line-height:24px;background:none;appearance:none;-webkit-appearance:none;-moz-appearance:none;color:var(--gray13)}.attr-sort select option{color:var(--gray13);width:calc(100% + 14px)}.attr-sort select:hover{cursor:pointer}.attr-sort:after{content:\\\"\\\";width:14px;height:14px;margin:5px 0 0 -14px;background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \");background-repeat:no-repeat;background-size:100% auto;position:absolute;pointer-events:none}.attr-sort:hover{box-shadow:0 3px 5px rgba(0,0,0,.3);cursor:pointer}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/assets/style/attrSort.scss\"],\"names\":[],\"mappings\":\"AAAA,WACI,aAAA,CACH,UAAA,CACA,WAAA,CACA,gBAAA,CACA,iBAAA,CACA,iBAAA,CACA,uBAAA,CACA,mBAAA,CACA,YAAA,CACA,iCAAA,CACA,wDAAA,CACA,kBACO,UAAA,CACN,qBAAA,CACA,aAAA,CACA,WAAA,CACM,YAAA,CACA,UAAA,CACN,WAAA,CACA,gBAAA,CACA,eAAA,CACA,eAAA,CACA,uBAAA,CACM,oBAAA,CACA,mBAAA,CACN,yBACU,mBAAA,CACA,uBAAA,CAEJ,wBACI,cAAA,CAGX,iBACC,UAAA,CACA,UAAA,CACM,WAAA,CACA,oBAAA,CACN,wDAAA,CACA,2BAAA,CACA,yBAAA,CACA,iBAAA,CACA,mBAAA,CAED,iBACO,mCAAA,CACA,cAAA\",\"sourcesContent\":[\".attr-sort {\\r\\n    display: block;\\r\\n\\twidth: 100%;\\r\\n\\theight: 24px;\\r\\n\\tline-height: 24px;\\r\\n\\ttext-align: center;\\r\\n\\tborder-radius: 2px;\\r\\n\\tbackground: var(--gray3);\\r\\n\\tcolor: var(--gray13);\\r\\n\\tmargin: 6px 0;\\r\\n\\tbox-shadow: 0 0 5px rgba(0, 0, 0, 0.1);\\r\\n\\ttransition: all 0.2s cubic-bezier(0.445, 0.05, 0.55, 0.95);\\r\\n\\tselect {\\r\\n        float: left;\\r\\n\\t\\tbox-sizing: border-box;\\r\\n\\t\\tpadding: 0 6px;\\r\\n\\t\\tborder: none;\\r\\n        outline: none;\\r\\n        width: 100%;\\r\\n\\t\\theight: 24px;\\r\\n\\t\\tline-height: 24px;\\r\\n\\t\\tbackground: none;\\r\\n\\t\\tappearance: none;\\r\\n\\t\\t-webkit-appearance: none;\\r\\n        -moz-appearance: none;\\r\\n        color: var(--gray13);\\r\\n\\t\\toption {\\r\\n            color: var(--gray13);\\r\\n            width: calc(100% + 14px);\\r\\n        }\\r\\n        &:hover{\\r\\n            cursor: pointer;\\r\\n        }\\r\\n\\t}\\r\\n\\t&:after {\\r\\n\\t\\tcontent: \\\"\\\";\\r\\n\\t\\twidth: 14px;\\r\\n        height: 14px;\\r\\n        margin: 5px 0 0 -14px;\\r\\n\\t\\tbackground-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciICAgICB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDEwMCAxMjUiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDEwMCAxMDAiIHhtbDpzcGFjZT0icHJlc2VydmUiPiAgICA8cGF0aCBkPSJNNDcuNDQ5LDY2LjE4Mkw0Ny40NDksNjYuMTgyYy0wLjY2MywwLTEuMjk5LTAuMjY0LTEuNzY4LTAuNzMybC0yNy4zNi0yNy4zNjNjLTAuOTc3LTAuOTc3LTAuOTc3LTIuNTYsMC0zLjUzNSAgYzAuOTc3LTAuOTc3LDIuNTU5LTAuOTc3LDMuNTM1LDBsMjUuNTkzLDI1LjU5NmwyNS41OTUtMjUuNTk0YzAuOTc3LTAuOTc3LDIuNTU5LTAuOTc3LDMuNTM1LDBzMC45NzcsMi41NTksMCwzLjUzNUw0OS4yMTcsNjUuNDQ5ICBDNDguNzQ4LDY1LjkxOCw0OC4xMTIsNjYuMTgyLDQ3LjQ0OSw2Ni4xODJ6Ii8+PC9zdmc+);\\r\\n\\t\\tbackground-repeat: no-repeat;\\r\\n\\t\\tbackground-size: 100% auto;\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\tpointer-events: none;\\r\\n\\t}\\r\\n\\t&:hover {\\r\\n        box-shadow: 0 3px 5px rgba(0, 0, 0, 0.3);\\r\\n        cursor: pointer;\\r\\n\\t}\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/getUrl.js\";\nvar ___CSS_LOADER_URL_IMPORT_0___ = new URL(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAGb2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDE5LTA1LTI0VDE1OjEyOjQ5KzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE5LTA1LTI0VDE1OjEyOjQ5KzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOS0wNS0yNFQxNToxMjo0OSswODowMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDphNGM2ZTdmZi04YWM0LTEwNDgtYjlkNS1iYTM5NzZiODhkNTkiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpiYWQ0YWU3YS00MmFkLTI2NGYtYjc1Yi0yMjU1ZTdhYWFkOWEiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo5NWUxMjJlNy1lMGVjLWQ2NDktYWQwZC04ZjA4ZGM2MDAwNDQiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo5NWUxMjJlNy1lMGVjLWQ2NDktYWQwZC04ZjA4ZGM2MDAwNDQiIHN0RXZ0OndoZW49IjIwMTktMDUtMjRUMTU6MTI6NDkrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YTRjNmU3ZmYtOGFjNC0xMDQ4LWI5ZDUtYmEzOTc2Yjg4ZDU5IiBzdEV2dDp3aGVuPSIyMDE5LTA1LTI0VDE1OjEyOjQ5KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDxyZGY6QmFnPiA8cmRmOmxpPmFkb2JlOmRvY2lkOnBob3Rvc2hvcDowMTMzOWYxNC1mZDEwLWE3NGQtYmY3ZC0yMTYyOWUxMzEzMDE8L3JkZjpsaT4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz456hG0AAADFUlEQVRIie2VzU8TQRiHf7Pbz4UQxRZaIgEhSAUaSCkEwoVE0gtqCDERvOHVA948cOI/wMTYGxc8ES9VKgcx4QAajZUEjFkbq3wGJfQDdlnC7rKvB2ixUqAc9OSTTLKZSeaZ+b377jIiwt+E+6u7/wuBKf3Q3R04snI8eJ7D5OSUV1XVuwB+lJdffrmysnoDQGl5+eWnxcUXPn3+/AUWixnt7a1IJFLY3t5GXZ0HoVD4uGBubj4zyfMmEBkdqqrOBAIBLC8vQxTFkYaGBrhcLkxNTT1cWVl9BeCKpmnfUqmtexzH1hhjx69ARCAicBwHjuPA85nUosPDw0RE+0REwWCQDjGGhoaoq6uLQqEQ9fX1EYCfgmCvaGz04s6d3syeRHQkcLtdcLtdKCtzoaTEAQCJ2dk3dALG4SAi0hnjCAABeNbW5jfnFAiCHYJgh81mQ2FhAQCsTUyETxJksbi4uB+JRKi5uZkAjPwuyOShKLtQlF04nQ4IggAA2sGhzqaiooLz+XwYGBgAgJacb1GaVCrVKkmyH8BFWZbzEqTZ2NgAgMRpgseSJN/3+/2w2+3wer0GztEr6+vrALCZNZnOijF22+l0UiwW+7OI+bLf0dFBJpNpKGeRATwfHHyQ3vzcqKpqmEwmAtCZs8gAopHIh7zz/pNwOMx0XZerqipnckZUXV3pAKD09/cTHTbXOTB6enoIwJjbXZq70Xp7b6KpyXsVwGpnZyfpup53VIqiGGazmUpLndevXavNEmQikiQZNTXV0ba2lrrp6en52tpatrm5mVcjjI09ZZqm/dA0/XUymcpaywh4nocs76CqqnK7uzvQGIvFXng8Hra0tHSWhILBIAA8cTguwWIx5xbs7CiQJBnR6Fckk1uor/fcisfj78fHxxkOWvqkgbW1VTDG3sbjCUiSlCXINFos9h1EBvb2VOi6DqvVCp7n9dHRUSwsLDDDMI4dPf15TiaTsNmsF4qKCqGqWm6B1WoFY0BBQQEYY7BYLCCiR6IofhRF8bSIGM/zus/X+K6oqBB7e2r2Iv3/6Z/BL5oAtNSvyPOCAAAAAElFTkSuQmCC\", import.meta.url);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".drag-drop-canvas{position:absolute;left:0;top:0;z-index:999999;opacity:.5;box-shadow:0px 2px 3px rgba(0,0,0,.2)}.grab-selection{cursor:url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \")}.chart-when-dragging{opacity:.3}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/assets/style/dragableCanvas.scss\"],\"names\":[],\"mappings\":\"AAAA,kBACI,iBAAA,CACA,MAAA,CACA,KAAA,CACA,cAAA,CACA,UAAA,CACA,qCAAA,CAGJ,gBACI,8CAAA,CAGJ,qBACI,UAAA\",\"sourcesContent\":[\".drag-drop-canvas {\\r\\n    position: absolute;\\r\\n    left: 0;\\r\\n    top: 0;\\r\\n    z-index: 999999;\\r\\n    opacity: 0.5;\\r\\n    box-shadow: 0px 2px 3px rgba(0, 0, 0, 0.2);\\r\\n}\\r\\n\\r\\n.grab-selection {\\r\\n    cursor: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAGb2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDE5LTA1LTI0VDE1OjEyOjQ5KzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE5LTA1LTI0VDE1OjEyOjQ5KzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOS0wNS0yNFQxNToxMjo0OSswODowMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDphNGM2ZTdmZi04YWM0LTEwNDgtYjlkNS1iYTM5NzZiODhkNTkiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpiYWQ0YWU3YS00MmFkLTI2NGYtYjc1Yi0yMjU1ZTdhYWFkOWEiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo5NWUxMjJlNy1lMGVjLWQ2NDktYWQwZC04ZjA4ZGM2MDAwNDQiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo5NWUxMjJlNy1lMGVjLWQ2NDktYWQwZC04ZjA4ZGM2MDAwNDQiIHN0RXZ0OndoZW49IjIwMTktMDUtMjRUMTU6MTI6NDkrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YTRjNmU3ZmYtOGFjNC0xMDQ4LWI5ZDUtYmEzOTc2Yjg4ZDU5IiBzdEV2dDp3aGVuPSIyMDE5LTA1LTI0VDE1OjEyOjQ5KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDxyZGY6QmFnPiA8cmRmOmxpPmFkb2JlOmRvY2lkOnBob3Rvc2hvcDowMTMzOWYxNC1mZDEwLWE3NGQtYmY3ZC0yMTYyOWUxMzEzMDE8L3JkZjpsaT4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz456hG0AAADFUlEQVRIie2VzU8TQRiHf7Pbz4UQxRZaIgEhSAUaSCkEwoVE0gtqCDERvOHVA948cOI/wMTYGxc8ES9VKgcx4QAajZUEjFkbq3wGJfQDdlnC7rKvB2ixUqAc9OSTTLKZSeaZ+b377jIiwt+E+6u7/wuBKf3Q3R04snI8eJ7D5OSUV1XVuwB+lJdffrmysnoDQGl5+eWnxcUXPn3+/AUWixnt7a1IJFLY3t5GXZ0HoVD4uGBubj4zyfMmEBkdqqrOBAIBLC8vQxTFkYaGBrhcLkxNTT1cWVl9BeCKpmnfUqmtexzH1hhjx69ARCAicBwHjuPA85nUosPDw0RE+0REwWCQDjGGhoaoq6uLQqEQ9fX1EYCfgmCvaGz04s6d3syeRHQkcLtdcLtdKCtzoaTEAQCJ2dk3dALG4SAi0hnjCAABeNbW5jfnFAiCHYJgh81mQ2FhAQCsTUyETxJksbi4uB+JRKi5uZkAjPwuyOShKLtQlF04nQ4IggAA2sGhzqaiooLz+XwYGBgAgJacb1GaVCrVKkmyH8BFWZbzEqTZ2NgAgMRpgseSJN/3+/2w2+3wer0GztEr6+vrALCZNZnOijF22+l0UiwW+7OI+bLf0dFBJpNpKGeRATwfHHyQ3vzcqKpqmEwmAtCZs8gAopHIh7zz/pNwOMx0XZerqipnckZUXV3pAKD09/cTHTbXOTB6enoIwJjbXZq70Xp7b6KpyXsVwGpnZyfpup53VIqiGGazmUpLndevXavNEmQikiQZNTXV0ba2lrrp6en52tpatrm5mVcjjI09ZZqm/dA0/XUymcpaywh4nocs76CqqnK7uzvQGIvFXng8Hra0tHSWhILBIAA8cTguwWIx5xbs7CiQJBnR6Fckk1uor/fcisfj78fHxxkOWvqkgbW1VTDG3sbjCUiSlCXINFos9h1EBvb2VOi6DqvVCp7n9dHRUSwsLDDDMI4dPf15TiaTsNmsF4qKCqGqWm6B1WoFY0BBQQEYY7BYLCCiR6IofhRF8bSIGM/zus/X+K6oqBB7e2r2Iv3/6Z/BL5oAtNSvyPOCAAAAAElFTkSuQmCC\\\");\\r\\n}\\r\\n\\r\\n.chart-when-dragging {\\r\\n    opacity: 0.3;\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/getUrl.js\";\nvar ___CSS_LOADER_URL_IMPORT_0___ = new URL(\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuWbvuWxgl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDM1LjAxIDI0LjE3IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzNS4wMSAyNC4xNzsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxsaW5lIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwNDAwMDA7c3Ryb2tlLW1pdGVybGltaXQ6MTA7IiB4MT0iMTMuNjIiIHkxPSI4LjE2IiB4Mj0iMjEuMSIgeTI9IjE1LjgzIi8+PGxpbmUgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzA0MDAwMDtzdHJva2UtbWl0ZXJsaW1pdDoxMDsiIHgxPSIxMy41MiIgeTE9IjE1LjczIiB4Mj0iMjEuMiIgeTI9IjguMjYiLz48L3N2Zz4=\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_1___ = new URL(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNTEyIDY0MCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTEyIDUxMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPiAgICA8Zz4gICAgICAgIDxwYXRoIGQ9Ik0xODEsMTgwLjNsNTgtNTh2MjAzLjhjMCw5LjQsNy42LDE3LDE3LDE3czE3LTcuNiwxNy0xN1YxMjIuM2w1OCw1OGMzLjMsMy4zLDcuNyw1LDEyLDUgICBjNC40LDAsOC43LTEuNywxMi01YzYuNi02LjYsNi42LTE3LjQsMC0yNGwtODctODdjLTMuMi0zLjItNy41LTUtMTItNWMtNC41LDAtOC44LDEuOC0xMiw1bC04Nyw4N2MtNi42LDYuNi02LjYsMTcuNCwwLDI0ICAgQzE2My42LDE4Ni45LDE3NC40LDE4Ni45LDE4MSwxODAuM3oiIC8+ICAgICAgICA8cGF0aCBkPSJNNDcuNyw0NDhoNDE2LjdjOS40LDAsMTYuNy03LjgsMTYuNy0xNy4yVjI5Ny45YzAtOS40LTcuNi0xNy0xNy0xN3MtMTcsNy42LTE3LDE3VjQxNEg2NVYyOTcuOSAgIGMwLTkuNC03LjYtMTctMTctMTdzLTE3LDcuNi0xNywxN3YxMzIuOUMzMSw0NDAuMiwzOC4zLDQ0OCw0Ny43LDQ0OHoiIC8+ICAgIDwvZz48L3N2Zz4=\", import.meta.url);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\nvar ___CSS_LOADER_URL_REPLACEMENT_1___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_1___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".floating-container{position:absolute;top:0px;left:0px;width:100%;height:100%;z-index:999999999}.floating-bg{position:absolute;width:100%;height:100%;background:rgba(220,220,220,.5);backdrop-filter:blur(8px)}.f-window{position:absolute;width:860px;height:780px;background:var(--gray3);box-shadow:0 0 15px rgba(0,0,0,.3);z-index:99999;margin-left:calc(50vw - 430px);margin-top:calc(50vh - 390px);display:flex;flex-direction:column}.title-wrapper{width:100%;height:24px;display:flex}.title-content{flex:1;text-transform:capitalize;text-align:center;line-height:24px;font-weight:bold;color:var(--gray15)}.title-btn{width:35px;background:var(--gray3);transition:background .1s cubic-bezier(0.445, 0.05, 0.55, 0.95)}.title-btn .btn-icon{display:inline-block;width:100%;height:100%;background-repeat:no-repeat;background-size:100%;filter:background .1s cubic-bezier(0.445, 0.05, 0.55, 0.95)}.title-btn .close-icon{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \")}.title-btn:hover{cursor:pointer;background:#d91e25}.title-btn:hover .btn-icon{filter:invert(90%)}.content-wrapper{box-sizing:border-box;width:100%;flex:1;padding:30px;overflow-y:auto}.example-list{width:100%;display:inline-block}.example-list h3{color:var(--gray15);text-transform:capitalize;font-weight:normal;margin:20px 0 16px 0}.click-to-open-area-container{width:100%;display:flex}.click-to-open-area-subcontainer{flex:1;display:inline-block}.click-to-open-area-subcontainer:first-child{margin-right:12px}.click-to-open-area{width:100%;box-sizing:border-box;height:100px;background:var(--gray3);border:1.6px dashed var(--gray8);cursor:pointer;color:var(--gray13);text-align:center;line-height:76px;transition:all .16s cubic-bezier(0.445, 0.05, 0.55, 0.95)}.click-to-open-area .upload-icon{width:20px;height:20px;background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_1___ + \");background-size:100% auto;margin:-22px auto;filter:invert(50%)}.click-to-open-area:hover{background:var(--gray1);color:var(--gray15);border-color:var(--gray1);box-shadow:0 3px 6px rgba(0,0,0,.2)}.click-to-open-area:hover .upload-icon{filter:invert(30%)}.drag-over-area{color:var(--gray1);border-color:var(--highlight-orange);background:var(--highlight-orange)}.drag-over-area .upload-icon{filter:invert(100%)}.list-item-container{float:left;width:100%}.example-list-item{float:left;width:191px;margin-left:10px;margin-bottom:10px;height:auto}.example-list-item:first-child{margin-left:0}.example-list-item div{display:table-cell;width:100%;height:172px;background:var(--gray1);vertical-align:middle;border-radius:4px;padding:4px;transition:all .16s cubic-bezier(0.445, 0.05, 0.55, 0.95)}.example-list-item div img{width:100%;max-height:164px}.example-list-item div:hover{cursor:pointer;box-shadow:0 3px 6px rgba(0,0,0,.2)}.example-list-item div:active{filter:brightness(0.8);cursor:pointer}.example-list-item p{font-size:10pt;text-align:center;line-height:10pt;margin:4px;color:var(--gray15)}.floating-window-sep{border-top:1px solid var(--gray6);border-left:none;margin:26px 0 36px}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/assets/style/floating-window.scss\"],\"names\":[],\"mappings\":\"AAAA,oBACI,iBAAA,CACA,OAAA,CACA,QAAA,CACA,UAAA,CACA,WAAA,CACA,iBAAA,CAGJ,aACI,iBAAA,CACA,UAAA,CACA,WAAA,CACA,+BAAA,CACA,yBAAA,CAGJ,UACI,iBAAA,CACA,WAAA,CACA,YAAA,CACA,uBAAA,CACA,kCAAA,CAEA,aAAA,CACA,8BAAA,CACA,6BAAA,CACA,YAAA,CACA,qBAAA,CAGJ,eACI,UAAA,CACA,WAAA,CACA,YAAA,CAEJ,eACI,MAAA,CACA,yBAAA,CACA,iBAAA,CACA,gBAAA,CACA,gBAAA,CACA,mBAAA,CAEJ,WACI,UAAA,CACA,uBAAA,CACA,+DAAA,CACA,qBACI,oBAAA,CACA,UAAA,CACA,WAAA,CACA,2BAAA,CACA,oBAAA,CACA,2DAAA,CAEJ,uBACI,wDAAA,CAGJ,iBACI,cAAA,CACA,kBAAA,CACA,2BACI,kBAAA,CAIZ,iBACI,qBAAA,CACA,UAAA,CACA,MAAA,CACA,YAAA,CACA,eAAA,CAGJ,cACI,UAAA,CACA,oBAAA,CACA,iBACI,mBAAA,CACA,yBAAA,CACA,kBAAA,CACA,oBAAA,CAIR,8BACI,UAAA,CACA,YAAA,CAGJ,iCACI,MAAA,CACA,oBAAA,CACA,6CACI,iBAAA,CAIR,oBAEI,UAAA,CACA,qBAAA,CACA,YAAA,CACA,uBAAA,CACA,gCAAA,CACA,cAAA,CACA,mBAAA,CACA,iBAAA,CACA,gBAAA,CACA,yDAAA,CACA,iCACI,UAAA,CACA,WAAA,CACA,wDAAA,CACA,yBAAA,CACA,iBAAA,CACA,kBAAA,CAEJ,0BACI,uBAAA,CACA,mBAAA,CACA,yBAAA,CACA,mCAAA,CACA,uCACI,kBAAA,CAKZ,gBACI,kBAAA,CACA,oCAAA,CAIA,kCAAA,CAHA,6BACI,mBAAA,CAKR,qBACI,UAAA,CACA,UAAA,CAGJ,mBACI,UAAA,CACA,WAAA,CACA,gBAAA,CACA,kBAAA,CAIA,WAAA,CAHA,+BACI,aAAA,CAGJ,uBACI,kBAAA,CACA,UAAA,CACA,YAAA,CAEA,uBAAA,CACA,qBAAA,CACA,iBAAA,CACA,WAAA,CACA,yDAAA,CACA,2BACI,UAAA,CACA,gBAAA,CAEJ,6BAEI,cAAA,CACA,mCAAA,CAEJ,8BACI,sBAAA,CACA,cAAA,CAGR,qBACI,cAAA,CACA,iBAAA,CACA,gBAAA,CACA,UAAA,CACA,mBAAA,CAIR,qBACI,iCAAA,CACA,gBAAA,CACA,kBAAA\",\"sourcesContent\":[\".floating-container {\\r\\n    position: absolute;\\r\\n    top: 0px;\\r\\n    left: 0px;\\r\\n    width: 100%;\\r\\n    height: 100%;\\r\\n    z-index: 999999999;\\r\\n}\\r\\n\\r\\n.floating-bg {\\r\\n    position: absolute;\\r\\n    width: 100%;\\r\\n    height: 100%;\\r\\n    background: rgba(220, 220, 220, 0.5);\\r\\n    backdrop-filter: blur(8px);\\r\\n}\\r\\n\\r\\n.f-window {\\r\\n    position: absolute;\\r\\n    width: 860px;\\r\\n    height: 780px;\\r\\n    background: var(--gray3);\\r\\n    box-shadow: 0 0 15px rgba(0, 0, 0, 0.3);\\r\\n    // border: 1px solid #222;\\r\\n    z-index: 99999;\\r\\n    margin-left: calc(50vw - 430px);\\r\\n    margin-top: calc(50vh - 390px);\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n}\\r\\n\\r\\n.title-wrapper {\\r\\n    width: 100%;\\r\\n    height: 24px;\\r\\n    display: flex;\\r\\n}\\r\\n.title-content {\\r\\n    flex: 1;\\r\\n    text-transform: capitalize;\\r\\n    text-align: center;\\r\\n    line-height: 24px;\\r\\n    font-weight: bold;\\r\\n    color: var(--gray15);\\r\\n}\\r\\n.title-btn {\\r\\n    width: 35px;\\r\\n    background: var(--gray3);\\r\\n    transition: background 0.1s cubic-bezier(0.445, 0.05, 0.55, 0.95);\\r\\n    .btn-icon {\\r\\n        display: inline-block;\\r\\n        width: 100%;\\r\\n        height: 100%;\\r\\n        background-repeat: no-repeat;\\r\\n        background-size: 100%;\\r\\n        filter: background 0.1s cubic-bezier(0.445, 0.05, 0.55, 0.95);\\r\\n    }\\r\\n    .close-icon {\\r\\n        background-image: url(\\\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuWbvuWxgl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDM1LjAxIDI0LjE3IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAzNS4wMSAyNC4xNzsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxsaW5lIHN0eWxlPSJmaWxsOm5vbmU7c3Ryb2tlOiMwNDAwMDA7c3Ryb2tlLW1pdGVybGltaXQ6MTA7IiB4MT0iMTMuNjIiIHkxPSI4LjE2IiB4Mj0iMjEuMSIgeTI9IjE1LjgzIi8+PGxpbmUgc3R5bGU9ImZpbGw6bm9uZTtzdHJva2U6IzA0MDAwMDtzdHJva2UtbWl0ZXJsaW1pdDoxMDsiIHgxPSIxMy41MiIgeTE9IjE1LjczIiB4Mj0iMjEuMiIgeTI9IjguMjYiLz48L3N2Zz4=\\\");\\r\\n    }\\r\\n\\r\\n    &:hover {\\r\\n        cursor: pointer;\\r\\n        background: #d91e25;\\r\\n        .btn-icon {\\r\\n            filter: invert(90%);\\r\\n        }\\r\\n    }\\r\\n}\\r\\n.content-wrapper {\\r\\n    box-sizing: border-box;\\r\\n    width: 100%;\\r\\n    flex: 1;\\r\\n    padding: 30px;\\r\\n    overflow-y: auto;\\r\\n}\\r\\n\\r\\n.example-list {\\r\\n    width: 100%;\\r\\n    display: inline-block;\\r\\n    h3 {\\r\\n        color: var(--gray15);\\r\\n        text-transform: capitalize;\\r\\n        font-weight: normal;\\r\\n        margin: 20px 0 16px 0;\\r\\n    }\\r\\n}\\r\\n\\r\\n.click-to-open-area-container {\\r\\n    width: 100%;\\r\\n    display: flex;\\r\\n}\\r\\n\\r\\n.click-to-open-area-subcontainer {\\r\\n    flex: 1;\\r\\n    display: inline-block;\\r\\n    &:first-child {\\r\\n        margin-right: 12px;\\r\\n    }\\r\\n}\\r\\n\\r\\n.click-to-open-area {\\r\\n    // flex: 1;\\r\\n    width: 100%;\\r\\n    box-sizing: border-box;\\r\\n    height: 100px;\\r\\n    background: var(--gray3);\\r\\n    border: 1.6px dashed var(--gray8);\\r\\n    cursor: pointer;\\r\\n    color: var(--gray13);\\r\\n    text-align: center;\\r\\n    line-height: 76px;\\r\\n    transition: all 0.16s cubic-bezier(0.445, 0.05, 0.55, 0.95);\\r\\n    .upload-icon {\\r\\n        width: 20px;\\r\\n        height: 20px;\\r\\n        background-image: url(\\\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgNTEyIDY0MCIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTEyIDUxMjsiIHhtbDpzcGFjZT0icHJlc2VydmUiPiAgICA8Zz4gICAgICAgIDxwYXRoIGQ9Ik0xODEsMTgwLjNsNTgtNTh2MjAzLjhjMCw5LjQsNy42LDE3LDE3LDE3czE3LTcuNiwxNy0xN1YxMjIuM2w1OCw1OGMzLjMsMy4zLDcuNyw1LDEyLDUgICBjNC40LDAsOC43LTEuNywxMi01YzYuNi02LjYsNi42LTE3LjQsMC0yNGwtODctODdjLTMuMi0zLjItNy41LTUtMTItNWMtNC41LDAtOC44LDEuOC0xMiw1bC04Nyw4N2MtNi42LDYuNi02LjYsMTcuNCwwLDI0ICAgQzE2My42LDE4Ni45LDE3NC40LDE4Ni45LDE4MSwxODAuM3oiIC8+ICAgICAgICA8cGF0aCBkPSJNNDcuNyw0NDhoNDE2LjdjOS40LDAsMTYuNy03LjgsMTYuNy0xNy4yVjI5Ny45YzAtOS40LTcuNi0xNy0xNy0xN3MtMTcsNy42LTE3LDE3VjQxNEg2NVYyOTcuOSAgIGMwLTkuNC03LjYtMTctMTctMTdzLTE3LDcuNi0xNywxN3YxMzIuOUMzMSw0NDAuMiwzOC4zLDQ0OCw0Ny43LDQ0OHoiIC8+ICAgIDwvZz48L3N2Zz4=\\\");\\r\\n        background-size: 100% auto;\\r\\n        margin: -22px auto;\\r\\n        filter: invert(50%);\\r\\n    }\\r\\n    &:hover {\\r\\n        background: var(--gray1);\\r\\n        color: var(--gray15);\\r\\n        border-color: var(--gray1);\\r\\n        box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);\\r\\n        .upload-icon {\\r\\n            filter: invert(30%);\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\n.drag-over-area {\\r\\n    color: var(--gray1);\\r\\n    border-color: var(--highlight-orange);\\r\\n    .upload-icon {\\r\\n        filter: invert(100%);\\r\\n    }\\r\\n    background: var(--highlight-orange);\\r\\n}\\r\\n\\r\\n.list-item-container {\\r\\n    float: left;\\r\\n    width: 100%;\\r\\n}\\r\\n\\r\\n.example-list-item {\\r\\n    float: left;\\r\\n    width: 191px;\\r\\n    margin-left: 10px;\\r\\n    margin-bottom: 10px;\\r\\n    &:first-child {\\r\\n        margin-left: 0;\\r\\n    }\\r\\n    height: auto;\\r\\n    div {\\r\\n        display: table-cell;\\r\\n        width: 100%;\\r\\n        height: 172px;\\r\\n        // background: var(--gray5);\\r\\n        background: var(--gray1);\\r\\n        vertical-align: middle;\\r\\n        border-radius: 4px;\\r\\n        padding: 4px;\\r\\n        transition: all 0.16s cubic-bezier(0.445, 0.05, 0.55, 0.95);\\r\\n        img {\\r\\n            width: 100%;\\r\\n            max-height: 164px;\\r\\n        }\\r\\n        &:hover {\\r\\n            // filter: brightness(0.9);\\r\\n            cursor: pointer;\\r\\n            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.2);\\r\\n        }\\r\\n        &:active {\\r\\n            filter: brightness(0.8);\\r\\n            cursor: pointer;\\r\\n        }\\r\\n    }\\r\\n    p {\\r\\n        font-size: 10pt;\\r\\n        text-align: center;\\r\\n        line-height: 10pt;\\r\\n        margin: 4px;\\r\\n        color: var(--gray15);\\r\\n    }\\r\\n}\\r\\n\\r\\n.floating-window-sep {\\r\\n    border-top: 1px solid var(--gray6);\\r\\n    border-left: none;\\r\\n    margin: 26px 0 36px;\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".hint-input{position:absolute;top:4px;box-sizing:border-box;margin:-2px 2px;width:calc(100% - 4px);height:12px;border:none;line-height:10px;background:var(--gray1);color:var(--gray15)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/assets/style/hint.scss\"],\"names\":[],\"mappings\":\"AAAA,YACI,iBAAA,CACA,OAAA,CACA,qBAAA,CACA,eAAA,CACA,sBAAA,CACA,WAAA,CACA,WAAA,CACA,gBAAA,CACA,uBAAA,CACA,mBAAA\",\"sourcesContent\":[\".hint-input {\\r\\n    position: absolute;\\r\\n    top: 4px;\\r\\n    box-sizing: border-box;\\r\\n    margin: -2px 2px;\\r\\n    width: calc(100% - 4px);\\r\\n    height: 12px;\\r\\n    border: none;\\r\\n    line-height: 10px;\\r\\n    background: var(--gray1);\\r\\n    color: var(--gray15);\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".kf-widget-container{width:100%;height:100%;overflow:hidden}.kf-tracks-container{float:left;width:100%;height:100%}.kf-slider-container,.kf-y-slider-container,.kf-x-slider-container{box-shadow:0 0 3px rgba(0,0,0,.2);transition:margin .1s cubic-bezier(0.445, 0.05, 0.55, 0.95)}.kf-x-slider-container{float:left;width:100%}.kf-y-slider-container{float:right;height:100%}.kf-slider{cursor:pointer}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/assets/style/keyframeContainer.scss\"],\"names\":[],\"mappings\":\"AAAA,qBACI,UAAA,CACA,WAAA,CACA,eAAA,CAGJ,qBACI,UAAA,CACA,UAAA,CACA,WAAA,CAOJ,mEACI,iCAAA,CACA,2DAAA,CAGJ,uBAEI,UAAA,CACA,UAAA,CAGJ,uBAEI,WAAA,CACA,WAAA,CAGJ,WACI,cAAA\",\"sourcesContent\":[\".kf-widget-container {\\r\\n    width: 100%;\\r\\n    height: 100%;\\r\\n    overflow: hidden;\\r\\n}\\r\\n\\r\\n.kf-tracks-container {\\r\\n    float: left;\\r\\n    width: 100%;\\r\\n    height: 100%;\\r\\n}\\r\\n\\r\\n.kf-tracks-inner-container{\\r\\n    // transition: transform 0.16s cubic-bezier(0.445, 0.05, 0.55, 0.95);\\r\\n}\\r\\n\\r\\n.kf-slider-container {\\r\\n    box-shadow: 0 0 3px rgba(0, 0, 0, 0.2);\\r\\n    transition: margin 0.1s cubic-bezier(0.445, 0.05, 0.55, 0.95);\\r\\n}\\r\\n\\r\\n.kf-x-slider-container {\\r\\n    @extend .kf-slider-container;\\r\\n    float: left;\\r\\n    width: 100%;\\r\\n}\\r\\n\\r\\n.kf-y-slider-container {\\r\\n    @extend .kf-slider-container;\\r\\n    float: right;\\r\\n    height: 100%;\\r\\n}\\r\\n\\r\\n.kf-slider {\\r\\n    cursor: pointer;\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".kf-item-menu{transition-timing-function:ease;transition:opacity .2s;opacity:0}.kf-item-container:hover .kf-item-menu{opacity:1}.kf-drag-bar-right{opacity:0;fill:rgba(0,0,0,0);fill:#5c7db3}.kf-drag-bar-right:hover{opacity:1;cursor:col-resize}.kf-drag-bar-left{opacity:0;fill:#ffbd89}.kf-drag-bar-left:hover{opacity:1;cursor:col-resize}.kf-length-guide-bg{fill:gray;opacity:.8;rx:3px}.kf-length-guide{fill:#fff;text-anchor:end}.kf-delay-length-guide{fill:#fff;text-anchor:start}.kf-button{fill:#a3a3a3}.kf-button:hover{fill:#ccc}.kf-label-btn-container{transition-timing-function:ease;transition:opacity .2s;opacity:0}.kf-label-container:hover .kf-label-btn-container{opacity:1}.kf-label-btn-background{x:5px;y:2px;height:16px;width:25px;rx:5px;fill:#676767}.kf-label-btn-container:hover .kf-button{fill:#ccc}.kf-order-button rect{opacity:0}.kf-order-button path,.kf-order-button text{fill:#a3a3a3}.kf-order-button:hover rect,.kf-active-order-button rect{opacity:1;fill:#ccc}.kf-order-button:hover path,.kf-order-button:hover text,.kf-active-order-button path,.kf-active-order-button text{fill:#676767}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/assets/style/keyframeTrack.scss\"],\"names\":[],\"mappings\":\"AAAA,cACI,+BAAA,CACA,sBAAA,CACA,SAAA,CAGJ,uCAEI,SAAA,CAGJ,mBACI,SAAA,CACA,kBAAA,CACA,YAAA,CAGJ,yBACI,SAAA,CACA,iBAAA,CAGJ,kBACI,SAAA,CACA,YAAA,CAIJ,wBACI,SAAA,CACA,iBAAA,CAGJ,oBACI,SAAA,CACA,UAAA,CACA,MAAA,CAGJ,iBACI,SAAA,CACA,eAAA,CAGJ,uBACI,SAAA,CACA,iBAAA,CAGJ,WACI,YAAA,CAGJ,iBACI,SAAA,CAGJ,wBACI,+BAAA,CACA,sBAAA,CACA,SAAA,CAIJ,kDAEI,SAAA,CAGJ,yBACI,KAAA,CACA,KAAA,CACA,WAAA,CACA,UAAA,CACA,MAAA,CACA,YAAA,CAGJ,yCACI,SAAA,CAIA,sBACI,SAAA,CAGJ,4CAEI,YAAA,CAKJ,yDACI,SAAA,CACA,SAAA,CAGJ,kHAEI,YAAA\",\"sourcesContent\":[\".kf-item-menu {\\n    transition-timing-function: ease;\\n    transition: opacity 0.2s;\\n    opacity: 0;\\n}\\n\\n.kf-item-container:hover .kf-item-menu {\\n    // display: inline;\\n    opacity: 1;\\n}\\n\\n.kf-drag-bar-right {\\n    opacity: 0;\\n    fill:transparent;\\n    fill: #5c7db3;\\n}\\n\\n.kf-drag-bar-right:hover {\\n    opacity: 1;\\n    cursor: col-resize;\\n}\\n\\n.kf-drag-bar-left {\\n    opacity: 0;\\n    fill:#FFBD89\\n    // fill: #b78966;\\n}\\n\\n.kf-drag-bar-left:hover {\\n    opacity: 1;\\n    cursor: col-resize;\\n}\\n\\n.kf-length-guide-bg {\\n    fill: grey;\\n    opacity: 0.8;\\n    rx: 3px;\\n}\\n\\n.kf-length-guide {\\n    fill: white;\\n    text-anchor: end;\\n}\\n\\n.kf-delay-length-guide {\\n    fill: white;\\n    text-anchor: start;\\n}\\n\\n.kf-button {\\n    fill: rgb(163, 163, 163);\\n}\\n\\n.kf-button:hover {\\n    fill: #CCC;\\n}\\n\\n.kf-label-btn-container {\\n    transition-timing-function: ease;\\n    transition: opacity 0.2s;\\n    opacity: 0;\\n    // display: none;\\n}\\n\\n.kf-label-container:hover .kf-label-btn-container {\\n    // display: inline;\\n    opacity: 1;\\n}\\n\\n.kf-label-btn-background {\\n    x: 5px;\\n    y: 2px;\\n    height: 16px;\\n    width: 25px;\\n    rx: 5px;\\n    fill: #676767;\\n}\\n\\n.kf-label-btn-container:hover .kf-button {\\n    fill: #CCC;\\n}\\n\\n.kf-order-button {\\n    rect {\\n        opacity: 0;\\n    }\\n\\n    path,\\n    text {\\n        fill: rgb(163, 163, 163);\\n    }\\n}\\n\\n.kf-order-button:hover, .kf-active-order-button {\\n    rect {\\n        opacity: 1;\\n        fill: #CCC;\\n    }\\n\\n    path,\\n    text {\\n        fill: #676767;\\n    }\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".loading-container{position:absolute;background:rgba(188,188,188,.75);z-index:999;box-sizing:border-box}.loading-wrapper{width:150px;margin:0 auto}.loading-wrapper span{float:left;color:var(--gray13)}.lds-ellipsis{clear:both;float:left;margin:16px 42px;position:relative;width:100px;height:8px}.lds-ellipsis div{float:left;width:8px;height:8px;border-radius:50%;background:var(--gray13);animation-timing-function:cubic-bezier(0, 1, 1, 0)}.lds-ellipsis div:nth-child(1){margin-left:8px;animation:lds-ellipsis1 .6s infinite}.lds-ellipsis div:nth-child(2){margin-left:-8px;animation:lds-ellipsis2 .6s infinite}.lds-ellipsis div:nth-child(3){margin-left:10px;animation:lds-ellipsis2 .6s infinite}.lds-ellipsis div:nth-child(4){margin-left:10px;animation:lds-ellipsis3 .6s infinite}@keyframes lds-ellipsis1{0%{transform:scale(0)}100%{transform:scale(1)}}@keyframes lds-ellipsis3{0%{transform:scale(1)}100%{transform:scale(0)}}@keyframes lds-ellipsis2{0%{transform:translate(0, 0)}100%{transform:translate(18px, 0)}}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/assets/style/loading.scss\"],\"names\":[],\"mappings\":\"AAAA,mBACI,iBAAA,CACA,gCAAA,CACA,WAAA,CACA,qBAAA,CAEJ,iBACI,WAAA,CACA,aAAA,CACA,sBACI,UAAA,CACA,mBAAA,CAGR,cACI,UAAA,CACA,UAAA,CACA,gBAAA,CAEA,iBAAA,CACA,WAAA,CACA,UAAA,CACA,kBACI,UAAA,CAIA,SAAA,CACA,UAAA,CACA,iBAAA,CACA,wBAAA,CACA,kDAAA,CAEJ,+BACI,eAAA,CAEA,oCAAA,CAEJ,+BACI,gBAAA,CACA,oCAAA,CAEJ,+BACI,gBAAA,CAEA,oCAAA,CAEJ,+BACI,gBAAA,CAEA,oCAAA,CAGR,yBACI,GACI,kBAAA,CAEJ,KACI,kBAAA,CAAA,CAGR,yBACI,GACI,kBAAA,CAEJ,KACI,kBAAA,CAAA,CAGR,yBACI,GACI,yBAAA,CAEJ,KACI,4BAAA,CAAA\",\"sourcesContent\":[\".loading-container {\\r\\n    position: absolute;\\r\\n    background: rgba(188, 188, 188, 0.75);\\r\\n    z-index: 999;\\r\\n    box-sizing: border-box;\\r\\n}\\r\\n.loading-wrapper {\\r\\n    width: 150px;\\r\\n    margin: 0 auto;\\r\\n    span {\\r\\n        float: left;\\r\\n        color: var(--gray13);\\r\\n    }\\r\\n}\\r\\n.lds-ellipsis {\\r\\n    clear: both;\\r\\n    float: left;\\r\\n    margin: 16px 42px;\\r\\n    // display: inline-block;\\r\\n    position: relative;\\r\\n    width: 100px;\\r\\n    height: 8px;\\r\\n    div {\\r\\n        float: left;\\r\\n        // position: absolute;\\r\\n        // top: 33px;\\r\\n        // margin-top: 33px;\\r\\n        width: 8px;\\r\\n        height: 8px;\\r\\n        border-radius: 50%;\\r\\n        background: var(--gray13);\\r\\n        animation-timing-function: cubic-bezier(0, 1, 1, 0);\\r\\n    }\\r\\n    div:nth-child(1) {\\r\\n        margin-left: 8px;\\r\\n        // left: 8px;\\r\\n        animation: lds-ellipsis1 0.6s infinite;\\r\\n    }\\r\\n    div:nth-child(2) {\\r\\n        margin-left: -8px;\\r\\n        animation: lds-ellipsis2 0.6s infinite;\\r\\n    }\\r\\n    div:nth-child(3) {\\r\\n        margin-left: 10px;\\r\\n        // margin-left: 32px;\\r\\n        animation: lds-ellipsis2 0.6s infinite;\\r\\n    }\\r\\n    div:nth-child(4) {\\r\\n        margin-left: 10px;\\r\\n        // margin-left: 56px;\\r\\n        animation: lds-ellipsis3 0.6s infinite;\\r\\n    }\\r\\n}\\r\\n@keyframes lds-ellipsis1 {\\r\\n    0% {\\r\\n        transform: scale(0);\\r\\n    }\\r\\n    100% {\\r\\n        transform: scale(1);\\r\\n    }\\r\\n}\\r\\n@keyframes lds-ellipsis3 {\\r\\n    0% {\\r\\n        transform: scale(1);\\r\\n    }\\r\\n    100% {\\r\\n        transform: scale(0);\\r\\n    }\\r\\n}\\r\\n@keyframes lds-ellipsis2 {\\r\\n    0% {\\r\\n        transform: translate(0, 0);\\r\\n    }\\r\\n    100% {\\r\\n        transform: translate(18px, 0);\\r\\n    }\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/getUrl.js\";\nvar ___CSS_LOADER_URL_IMPORT_0___ = new URL(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiI+PHRpdGxlPmljb25zPC90aXRsZT48cGF0aCBkPSJNMTgsMTJWNUg3Ljc1QS43NS43NSwwLDAsMCw3LDUuNzV2MjAuNWEuNzUuNzUsMCwwLDAsLjc1Ljc1aDE2LjVhLjc1Ljc1LDAsMCwwLC43NS0uNzVWMTJaIi8+PHBvbHlnb24gcG9pbnRzPSIxOSA1IDE5IDExIDI1IDExIDE5IDUiLz48L3N2Zz4=\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_1___ = new URL(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiI+PHRpdGxlPmljb25zPC90aXRsZT48cGF0aCBkPSJNMTAuNzEwNDUsMTMuNzVsLTUuNTM4NTgsMTJIMjEuNTkwOTNhLjc1Ljc1LDAsMCwwLC42ODEtLjQzNTdMMjcuNjA5MzgsMTMuNzVaIi8+PHBhdGggZD0iTTEwLjA3MDgsMTIuNzVIMjIuMzkwNjJWMTBhLjc1Ljc1LDAsMCwwLS43NS0uNzVoLTguMjV2LTFhMiwyLDAsMCwwLTItMmgtNWEyLDIsMCwwLDAtMiwyVjI1LjA1NzI1WiIvPjwvc3ZnPg==\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_2___ = new URL(\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0i5Zu+5bGCXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZW5hYmxlLWJhY2tncm91bmQ6bmV3ICAgIDt9DQo8L3N0eWxlPg0KPHRpdGxlPmljb25zPC90aXRsZT4NCjxwb2x5Z29uIHBvaW50cz0iMTksNSAxOSwxMSAyNSwxMSAiLz4NCjxnIGNsYXNzPSJzdDAiPg0KCTxwYXRoIGQ9Ik05LjIsMjMuMlYyM2MwLTAuNywwLTEuNywwLTMuMWMwLTEuMywwLTIuNCwwLTMuMXYtMi41aDZ2MmMwLDAsMCwwLDAsMC4xczAsMC4xLDAsMC4xYzAsMCwwLDAsMCwwLjFjMCwwLDAsMC4xLDAsMC4xDQoJCWMwLDAsMCwwLDAsMC4xYzAsMCwwLDAuMS0wLjEsMC4xczAsMC0wLjEsMGMwLDAtMC4xLDAtMC4xLDBoLTAuMWMtMC45LDAtMS43LDAtMi40LDBjMCwwLjEsMCwwLjIsMCwwLjNjMCwwLjEsMCwwLjMsMCwwLjQNCgkJYzAsMC4xLDAsMC4yLDAsMC4zaDIuNWMwLjEsMCwwLjIsMCwwLjIsMGMwLDAsMC4xLDAuMSwwLjEsMC4yYzAsMCwwLDAuMSwwLDAuMWMwLDAsMCwwLjEsMCwwLjFjMCwwLjIsMCwwLjUsMCwwLjkNCgkJYzAsMC40LDAsMC43LDAsMC45QzE1LDIwLDE1LDIwLDE1LDIwYzAsMCwwLDAtMC4xLDBjLTEuMSwwLjEtMS45LDAuMS0yLjQsMC4xaC0wLjFWMjFjMC4zLDAsMC43LDAsMS4zLDBjMC42LDAsMSwwLDEuMywwDQoJCWMwLjIsMCwwLjQsMC4xLDAuNCwwLjJ2MC41YzAsMC4yLDAsMC41LDAsMC45YzAsMC40LDAsMC43LDAsMC45YzAsMC4yLTAuMSwwLjMtMC4yLDAuM2MtMC4yLDAtMC41LDAtMC44LDBjLTAuNCwwLTAuNywwLTAuOCwwDQoJCWMtMC41LDAtMS4yLDAtMi4xLDBjLTAuOSwwLTEuNiwwLTIsMC4xbC0wLjEtMC4yQzkuMiwyMy4zLDkuMiwyMy4yLDkuMiwyMy4yeiIvPg0KCTxwYXRoIGQ9Ik0yMi44LDIyLjZjMCwwLjEtMC4zLDAuMy0wLjcsMC40Yy0wLjQsMC4xLTAuOSwwLjItMS4zLDAuM2MtMC40LDAtMC44LDAuMS0xLDAuMWMtMC4zLDAtMC41LDAtMC43LDANCgkJYy0wLjIsMC0wLjQtMC4xLTAuNy0wLjFjLTAuMy0wLjEtMC41LTAuMS0wLjgtMC4zYy0wLjMtMC4xLTAuNS0wLjMtMC43LTAuNWwtMC4yLTAuMmMtMC4xLDAtMC4xLTAuMS0wLjItMC4ybC0wLjItMC4zDQoJCWMtMC40LTAuOC0wLjYtMS43LTAuNi0yLjdjMC0xLDAuMi0xLjksMC43LTIuNmwwLjEtMC4ydi0wLjF2MGMwLjYtMC45LDEuNi0xLjQsMy4xLTEuNGMwLjIsMCwwLjQsMCwwLjcsMC4xYzAuMiwwLDAuNSwwLjEsMC44LDAuMg0KCQljMC4zLDAuMSwwLjUsMC4yLDAuOCwwLjRjMC4yLDAuMiwwLjQsMC40LDAuNiwwLjZjMC4xLDAuMSwwLjEsMC4yLDAuMiwwLjRjMCwwLjEsMC4xLDAuMywwLjEsMC41YzAsMC4yLDAuMSwwLjQsMC4xLDAuNQ0KCQljMCwwLjEtMC4xLDAuMi0wLjMsMC4ySDIyYy0wLjEsMC0wLjMsMC0wLjYsMGMtMC4zLDAtMC41LDAtMC43LDBoLTAuNmMwLDAtMC4xLTAuMS0wLjEtMC4ycy0wLjEtMC4yLTAuMS0wLjJ2MA0KCQljLTAuMS0wLjItMC4yLTAuMi0wLjQtMC4yYy0wLjEsMC0wLjMsMC0wLjQsMC4xYy0wLjEsMC4xLTAuMiwwLjItMC4yLDAuM2MtMC4xLDAuMS0wLjEsMC4yLTAuMSwwLjRjMCwwLjItMC4xLDAuMy0wLjEsMC40DQoJCWMwLDAuMSwwLDAuMywwLDAuNGMwLDAuMSwwLDAuMSwwLDAuMmMwLDAuMSwwLDAuMiwwLDAuMnYwLjVjMCwwLjEsMCwwLjMsMCwwLjRjMCwwLjEsMCwwLjIsMC4xLDAuNGMwLDAuMSwwLjEsMC4zLDAuMSwwLjMNCgkJYzAuMSwwLjEsMC4yLDAuMiwwLjMsMC4yYzAuMSwwLjEsMC4zLDAuMSwwLjQsMC4xYzAuMywwLDAuNiwwLDAuOC0wLjF2LTAuM2MwLDAsMC0wLjEsMC0wLjFjMC0wLjEsMC0wLjEsMC0wLjFjMCwwLDAsMCwwLTAuMQ0KCQljMCwwLDAtMC4xLDAtMC4xaC0wLjJjMCwwLTAuMSwwLTAuMSwwYzAsMC0wLjEsMC0wLjEsMGgtMC40TDE5LjQsMjBjMCwwLDAtMC4xLDAtMC4ydi0wLjRjMCwwLDAtMC4xLDAtMC4yYzAtMC4xLDAtMC4yLDAtMC4ydi0wLjINCgkJYzAsMCwwLDAsMC0wLjFjMCwwLDAtMC4xLDAtMC4xdjBjMC0wLjEsMC0wLjEsMC0wLjJjMCwwLDAuMS0wLjEsMC4xLTAuMWgwLjVjMCwwLDAuMSwwLDAuMiwwaDAuNWMwLjMsMCwwLjYsMCwwLjgsMGgwLjUNCgkJYzAuNSwwLDAuOCwwLjEsMC45LDAuMmMwLDAuNCwwLDEsMCwxLjhjMCwwLjgsMCwxLjQsMCwxLjhWMjIuNnoiLz4NCjwvZz4NCjxwYXRoIGQ9Ik0xOCwxMlY1SDcuOEM3LjMsNSw3LDUuMyw3LDUuN3YyMC41QzcsMjYuNyw3LjMsMjcsNy44LDI3aDE2LjVjMC40LDAsMC44LTAuMywwLjgtMC44VjEySDE4eiBNMjMuOCwxNC42djkuN3YwLjJIOC4xdi0wLjINCgl2LTkuN3YtMS4xaDE1LjdWMTQuNnoiLz4NCjwvc3ZnPg0K\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_3___ = new URL(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiI+PHRpdGxlPmljb25zPC90aXRsZT48cGF0aCBkPSJNNSw1Ljc1djIwLjVhLjc1Ljc1LDAsMCwwLC43NS43NUgyMi42ODkzNGEuNzUuNzUsMCwwLDAsLjUzMDMzLS4yMTk2N2wzLjU2MDY2LTMuNTYwNjZBLjc1Ljc1LDAsMCwwLDI3LDIyLjY4OTM0VjUuNzVBLjc1Ljc1LDAsMCwwLDI2LjI1LDVINS43NUEuNzUuNzUsMCwwLDAsNSw1Ljc1Wk0xNy4yNSwyNWgtNC41YS43NS43NSwwLDAsMS0uNzUtLjc1di0uNWEuNzUuNzUsMCwwLDAtLjc1LS43NWgtLjVhLjc1Ljc1LDAsMCwwLS43NS43NXYuNWEuNzUuNzUsMCwwLDEtLjc1Ljc1aC0uNUEuNzUuNzUsMCwwLDEsOCwyNC4yNXYtMy41QS43NS43NSwwLDAsMSw4Ljc1LDIwaDguNWEuNzUuNzUsMCwwLDEsLjc1Ljc1djMuNUEuNzUuNzUsMCwwLDEsMTcuMjUsMjVabTYtMTBIOC43NUEuNzUuNzUsMCwwLDEsOCwxNC4yNVY3Ljc1QS43NS43NSwwLDAsMSw4Ljc1LDdoMTQuNWEuNzUuNzUsMCwwLDEsLjc1Ljc1djYuNUEuNzUuNzUsMCwwLDEsMjMuMjUsMTVaIi8+PC9zdmc+\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_4___ = new URL(\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuWbvuWxgl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUxMiA0ODEuOSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTEyIDQ4MS45OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTMwMC4zLDIzMS44YzI0LjQtMjcuOSw0OC4xLTU0LjUsNzMuMi04MS44YzcuOS04LjYsMTQuMy0xMi42LDIxLTEyLjZjNi43LDAsMTIuNiw0LjEsMTkuOSwxMS42YzIzLjgsMjQuNiw1My4zLDYwLjksNzYsODIuOGMyLjcsMi44LDQuNCw1LjYsNS4yLDguM2MwLjksMi44LDAuNyw1LjUtMC4zLDcuOGMtMSwyLjMtMi43LDQuMS01LjEsNS40Yy0yLjUsMS4zLTUuOCwyLjEtOS41LDIuMWgtMjEuNGMtMS40LDU2LjktMjYuMiwxMDQuOC02My4zLDEzOS44Yy00MS43LDM5LjQtOTkuMiw2Mi40LTE1Ni44LDYzLjVjLTEsMC03LjcsMC4xLTcuOSwwYy0yOS0wLjQtNTcuOS02LjUtODQuNy0xOC45Yy0yNS0xMS42LTQ4LjEtMjguNi02Ny43LTUxLjZjLTEuNi0xLjktMS43LTQuOC0wLjEtNi44YzEuOC0yLjIsNS0yLjYsNy4xLTAuOGMyNS45LDIxLjgsNTcsMzIuNSw4OC4xLDMzLjJjMzIuNiwwLjcsNjUuNC05LjQsOTIuNS0yOS4ybDAuMi0wLjFjMTkuNC0xMy43LDM2LjEtMzIuOSw0Ny43LTU2LjJjMTAuNi0yMS4zLDE2LjktNDUuOSwxNy03Mi45aC0yMS4zYy00LjIsMC03LjYtMC43LTEwLjEtMmMtMi40LTEuMi00LTIuOS01LTVsLTAuMi0wLjVjLTAuOS0yLjMtMC45LTQuOSwwLTcuNkMyOTUuNCwyMzcuNywyOTcuNCwyMzQuOCwzMDAuMywyMzEuOCIvPjxwYXRoIGQ9Ik0yMTEuOCwyNTIuNWMtMjQuNCwyOC00OC4xLDU0LjYtNzMuMiw4MS44Yy03LjksOC42LTE0LjMsMTIuNi0yMC45LDEyLjZjLTYuNywwLTEyLjctNC4xLTE5LjktMTEuNmMtMjMuOC0yNC42LTUzLjMtNjAuOS03NS45LTgyLjhjLTIuNy0yLjgtNC41LTUuNy01LjItOC4zYy0wLjktMi44LTAuNy01LjUsMC4zLTcuOGMxLTIuMywyLjgtNC4yLDUuMi01LjRjMi41LTEuNCw1LjctMi4xLDkuNS0yLjFoMjEuNEM1NC4zLDE3MS45LDc5LjEsMTI0LDExNi4yLDg5YzQxLjgtMzkuMyw5OS4yLTYyLjMsMTU2LjktNjMuNWMwLjksMCw3LjctMC4xLDcuOSwwYzI5LDAuNCw1OCw2LjUsODQuNywxOC45YzI1LDExLjUsNDguMSwyOC42LDY3LjcsNTEuNmMxLjYsMS45LDEuNyw0LjgsMC4xLDYuOGMtMS44LDIuMi01LDIuNi03LjEsMC44Yy0yNS45LTIxLjktNTctMzIuNS04OC4xLTMzLjJjLTMyLjYtMC43LTY1LjMsOS40LTkyLjUsMjkuMmwtMC4xLDAuMWMtMTkuNCwxMy43LTM2LjEsMzMtNDcuNyw1Ni4zYy0xMC42LDIxLjItMTYuOSw0NS45LTE3LjEsNzIuOWgyMS4zYzQuMiwwLDcuNiwwLjcsMTAuMSwyYzIuNCwxLjIsNCwyLjksNSw1bDAuMiwwLjVjMC45LDIuMywwLjksNC45LDAsNy42QzIxNi42LDI0Ni42LDIxNC43LDI0OS41LDIxMS44LDI1Mi41eiIvPjwvc3ZnPg==\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_5___ = new URL(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiI+PHRpdGxlPmljb25zPC90aXRsZT48cGF0aCBkPSJNMjguODM2MzMsMjQuMzkzYy0uOTg3NDEtMy45NDk2NC0zLjk0OTY0LTYuOTExODctMTMuODIzNzQtNi45MTE4N3YzLjk0OTY0TDMuMTYzNjcsMTQuNTE4ODgsMTUuMDEyNTksNy42MDd2My45NDk2NGMxMi44MzYzMywwLDEzLjgyMzc0LDguODg2NywxMy44MjM3NCwxMi44MzYzNCIvPjwvc3ZnPg==\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_6___ = new URL(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiI+PHRpdGxlPmljb25zPC90aXRsZT48cGF0aCBkPSJNMy4xNjM2NywyNC4zOTNjLjk4NzQxLTMuOTQ5NjQsMy45NDk2NC02LjkxMTg3LDEzLjgyMzc0LTYuOTExODd2My45NDk2NGwxMS44NDg5Mi02LjkxMTg4TDE2Ljk4NzQxLDcuNjA3djMuOTQ5NjRjLTEyLjgzNjMzLDAtMTMuODIzNzQsOC44ODY3LTEzLjgyMzc0LDEyLjgzNjM0Ii8+PC9zdmc+\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_7___ = new URL(\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0i5Zu+5bGCXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8cGF0aCBkPSJNNTkuNCwzOC4zYzAtMS4yLDAtMi40LDAtMy42aC05LjJ2LTcuNGg5LjJjMC0xLjIsMC0yLjQsMC0zLjZjMi4xLDEuNCw0LjIsMi44LDYuNCw0LjJ2LTQuNmgtNy4xdi03SDQ4LjQNCgljLTAuNSwwLTAuOCwwLjMtMC44LDAuN3YyMC41YzAsMC41LDAuMywwLjgsMC44LDAuOGgxNi41YzAuNCwwLDAuOC0wLjMsMC44LTAuOHYtMy41QzYzLjYsMzUuNSw2MS41LDM2LjksNTkuNCwzOC4zeiIvPg0KPHRpdGxlPmljb25zPC90aXRsZT4NCjxwb2x5Z29uIHBvaW50cz0iNTguNiw1IDU4LjYsMTEgNjQuNiwxMSAiLz4NCjx0ZXh0IHRyYW5zZm9ybT0ibWF0cml4KDEgMCAwIDEgMzQuNTE1MiAxOC4xMDM3KSIgc3R5bGU9ImZvbnQtZmFtaWx5OidBcmlhbC1Cb2xkTVQnOyBmb250LXNpemU6OXB4OyI+ZS5nLjwvdGV4dD4NCjxwYXRoIGQ9Ik02MS40LDI3LjNjMCwyLjUsMCw1LjEsMCw3LjZjMS45LTEuMywzLjgtMi41LDUuNy0zLjhDNjUuMiwyOS44LDYzLjMsMjguNSw2MS40LDI3LjN6Ii8+DQo8cmVjdCB4PSI1Mi40IiB5PSIyOS40IiB3aWR0aD0iOS45IiBoZWlnaHQ9IjMuNCIvPg0KPGc+DQoJPHBhdGggZD0iTTI1LjUsMTcuOGgtMS44Yy0wLjUsMC0wLjksMC40LTAuOSwwLjl2NC4xYzAsMC4zLTAuMiwwLjUtMC41LDAuNUg4LjZjLTAuMywwLTAuNS0wLjItMC41LTAuNVY5LjJjMC0wLjMsMC4yLTAuNSwwLjUtMC41DQoJCWg0LjFjMC41LDAsMC45LTAuNCwwLjktMC45VjZjMC0wLjUtMC40LTAuOS0wLjktMC45SDUuNEM0LjgsNSw0LjQsNS40LDQuNCw2djIwLjFjMCwwLjUsMC40LDAuOSwwLjksMC45aDIwLjENCgkJYzAuNSwwLDAuOS0wLjQsMC45LTAuOXYtNy4zQzI2LjQsMTguMiwyNiwxNy44LDI1LjUsMTcuOHoiLz4NCgk8cGF0aCBkPSJNMjUuNSw1aC03LjNjLTAuNSwwLTAuOSwwLjQtMC45LDAuOXYxLjhjMCwwLjUsMC40LDAuOSwwLjksMC45aDAuOWMwLjQsMCwwLjYsMC41LDAuNCwwLjhsLTcuMyw3LjMNCgkJYy0wLjQsMC40LTAuNCwwLjksMCwxLjNsMS4zLDEuM2MwLjQsMC40LDAuOSwwLjQsMS4zLDBsNy4zLTcuM2MwLjMtMC4zLDAuOC0wLjEsMC44LDAuNHYwLjljMCwwLjUsMC40LDAuOSwwLjksMC45aDEuOA0KCQljMC41LDAsMC45LTAuNCwwLjktMC45VjZDMjYuNCw1LjQsMjYsNSwyNS41LDV6Ii8+DQo8L2c+DQo8L3N2Zz4NCg==\", import.meta.url);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\nvar ___CSS_LOADER_URL_REPLACEMENT_1___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_1___);\nvar ___CSS_LOADER_URL_REPLACEMENT_2___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_2___);\nvar ___CSS_LOADER_URL_REPLACEMENT_3___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_3___);\nvar ___CSS_LOADER_URL_REPLACEMENT_4___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_4___);\nvar ___CSS_LOADER_URL_REPLACEMENT_5___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_5___);\nvar ___CSS_LOADER_URL_REPLACEMENT_6___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_6___);\nvar ___CSS_LOADER_URL_REPLACEMENT_7___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_7___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".nav{width:100%;height:40px;min-width:600px;background:var(--gray13);font-size:0px;display:flex;flex-direction:row;color:var(--gray7);z-index:9999999;border-bottom:1px solid var(--gray6)}.logo-container{height:var(--nav-content-height);padding:10px 0px;display:inline-block}.logo-container img{float:left;height:26px;margin:-3px 0 0 10px;transition:filter .3s cubic-bezier(0.445, 0.05, 0.55, 0.95)}.title-text{display:block;height:var(--nav-content-height);line-height:var(--nav-content-height);padding:10px 15px;color:var(--gray10);font-family:var(--geforce-font);font-size:20px}.separator{margin:8px 0;display:inline-block;width:0px;border-left:1px solid #515151}.nav-btn{width:var(--nav-content-height);height:var(--nav-content-height);padding:6px;margin:4px 0;display:inline-block}.nav-btn:hover{background:var(--gray14);cursor:pointer}.nav-btn:active{background:var(--gray10);cursor:pointer}.nav-btn .svg-icon,.nav-btn .export-icon,.nav-btn .redo-icon,.nav-btn .revert-icon,.nav-btn .reset-icon,.nav-btn .save-icon,.nav-btn .open-eg-icon,.nav-btn .open-icon,.nav-btn .new-icon{width:100%;height:100%;display:inline-block;background-repeat:no-repeat;background-size:100%;background-position:center;filter:invert(90%)}.nav-btn .new-icon{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \")}.nav-btn .open-icon{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_1___ + \")}.nav-btn .open-eg-icon{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_2___ + \")}.nav-btn .save-icon{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_3___ + \")}.nav-btn .reset-icon{background-size:80%;background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_4___ + \")}.nav-btn .revert-icon{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_5___ + \")}.nav-btn .redo-icon{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_6___ + \")}.nav-btn .export-icon{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_7___ + \")}.active-btn{background:var(--gray14)}.sub-menu-container{position:absolute;z-index:99999999;box-shadow:0 2px 2px rgba(0,0,0,.2);width:150px;height:auto;background:var(--gray14)}.sub-menu-container ul{width:100%;height:100%;margin:0;padding:0}.sub-menu-container ul li{box-sizing:border-box;list-style:none;margin:0;padding:4px 10px;width:100%;height:30px;color:var(--gray8);font-size:12pt;line-height:20px;border-top:1px solid var(--gray15)}.sub-menu-container ul li:first-child{border-top:none}.sub-menu-container ul li:hover{cursor:pointer;background:var(--gray15)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/assets/style/nav.scss\"],\"names\":[],\"mappings\":\"AAKA,KACI,UAAA,CACA,WAAA,CACA,eAAA,CACA,wBAAA,CAGA,aAAA,CACA,YAAA,CACA,kBAAA,CACA,kBAAA,CACA,eAAA,CACA,oCAAA,CAIJ,gBACI,gCAAA,CACA,gBAAA,CACA,oBAAA,CAEA,oBACI,UAAA,CACA,WAAA,CACA,oBAAA,CACA,2DAAA,CAIR,YACI,aAAA,CACA,gCAAA,CACA,qCAAA,CACA,iBAAA,CACA,mBAAA,CAEA,+BAAA,CACA,cAAA,CAKJ,WACI,YAAA,CACA,oBAAA,CACA,SAAA,CACA,6BAAA,CAGJ,SACI,+BAAA,CACA,gCAAA,CACA,WAAA,CACA,YAAA,CACA,oBAAA,CAGA,eACI,wBAAA,CAEA,cAAA,CAGJ,gBACI,wBAAA,CACA,cAAA,CAGJ,0LACI,UAAA,CACA,WAAA,CACA,oBAAA,CACA,2BAAA,CACA,oBAAA,CACA,0BAAA,CACA,kBAAA,CAGJ,mBAEI,wDAAA,CAGJ,oBAEI,wDAAA,CAGJ,uBAEI,wDAAA,CAGJ,oBAEI,wDAAA,CAGJ,qBAEI,mBAAA,CACA,wDAAA,CAGJ,sBAEI,wDAAA,CAGJ,oBAEI,wDAAA,CAGJ,sBAEI,wDAAA,CAIR,YACI,wBAAA,CAGJ,oBACI,iBAAA,CACA,gBAAA,CACA,mCAAA,CACA,WAAA,CACA,WAAA,CACA,wBAAA,CAEA,uBACI,UAAA,CACA,WAAA,CACA,QAAA,CACA,SAAA,CAEA,0BACI,qBAAA,CACA,eAAA,CACA,QAAA,CACA,gBAAA,CACA,UAAA,CACA,WAAA,CACA,kBAAA,CACA,cAAA,CACA,gBAAA,CACA,kCAAA,CAEA,sCACI,eAAA,CAGJ,gCACI,cAAA,CACA,wBAAA\",\"sourcesContent\":[\"// @font-face {\\r\\n//     font-family: fantasy;\\r\\n//     src: url(\\\"\\\")\\r\\n// }\\r\\n\\r\\n.nav {\\r\\n    width: 100%;\\r\\n    height: 40px;\\r\\n    min-width: 600px;\\r\\n    background: var(--gray13);\\r\\n    // background: #eae9e9;\\r\\n    // background: var(--gray6);\\r\\n    font-size: 0px;\\r\\n    display: flex;\\r\\n    flex-direction: row;\\r\\n    color: var(--gray7);\\r\\n    z-index: 9999999;\\r\\n    border-bottom: 1px solid var(--gray6);\\r\\n    // box-shadow: 0 1.5px 1.5px rgba(180, 179, 179, 0.2);\\r\\n}\\r\\n\\r\\n.logo-container {\\r\\n    height: var(--nav-content-height);\\r\\n    padding: 10px 0px;\\r\\n    display: inline-block;\\r\\n\\r\\n    img {\\r\\n        float: left;\\r\\n        height: 26px;\\r\\n        margin: -3px 0 0 10px;\\r\\n        transition: filter 0.3s cubic-bezier(0.445, 0.05, 0.55, 0.95);\\r\\n    }\\r\\n}\\r\\n\\r\\n.title-text {\\r\\n    display: block;\\r\\n    height: var(--nav-content-height);\\r\\n    line-height: var(--nav-content-height);\\r\\n    padding: 10px 15px;\\r\\n    color: var(--gray10);\\r\\n    // color: #000;\\r\\n    font-family:var(--geforce-font);\\r\\n    font-size: 20px;\\r\\n    // width: 140px;\\r\\n    // vertical-align: middle;\\r\\n}\\r\\n\\r\\n.separator {\\r\\n    margin: 8px 0;\\r\\n    display: inline-block;\\r\\n    width: 0px;\\r\\n    border-left: 1px solid #515151;\\r\\n}\\r\\n\\r\\n.nav-btn {\\r\\n    width: var(--nav-content-height);\\r\\n    height: var(--nav-content-height);\\r\\n    padding: 6px;\\r\\n    margin: 4px 0;\\r\\n    display: inline-block;\\r\\n    // transition: background 0.1s cubic-bezier(0.445, 0.05, 0.55, 0.95);\\r\\n\\r\\n    &:hover {\\r\\n        background: var(--gray14);\\r\\n        // background:var(--gray8);\\r\\n        cursor: pointer;\\r\\n    }\\r\\n\\r\\n    &:active {\\r\\n        background: var(--gray10);\\r\\n        cursor: pointer;\\r\\n    }\\r\\n\\r\\n    .svg-icon {\\r\\n        width: 100%;\\r\\n        height: 100%;\\r\\n        display: inline-block;\\r\\n        background-repeat: no-repeat;\\r\\n        background-size: 100%;\\r\\n        background-position: center;\\r\\n        filter: invert(90%);\\r\\n    }\\r\\n\\r\\n    .new-icon {\\r\\n        @extend .svg-icon;\\r\\n        background-image: url(\\\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiI+PHRpdGxlPmljb25zPC90aXRsZT48cGF0aCBkPSJNMTgsMTJWNUg3Ljc1QS43NS43NSwwLDAsMCw3LDUuNzV2MjAuNWEuNzUuNzUsMCwwLDAsLjc1Ljc1aDE2LjVhLjc1Ljc1LDAsMCwwLC43NS0uNzVWMTJaIi8+PHBvbHlnb24gcG9pbnRzPSIxOSA1IDE5IDExIDI1IDExIDE5IDUiLz48L3N2Zz4=\\\");\\r\\n    }\\r\\n\\r\\n    .open-icon {\\r\\n        @extend .svg-icon;\\r\\n        background-image: url(\\\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiI+PHRpdGxlPmljb25zPC90aXRsZT48cGF0aCBkPSJNMTAuNzEwNDUsMTMuNzVsLTUuNTM4NTgsMTJIMjEuNTkwOTNhLjc1Ljc1LDAsMCwwLC42ODEtLjQzNTdMMjcuNjA5MzgsMTMuNzVaIi8+PHBhdGggZD0iTTEwLjA3MDgsMTIuNzVIMjIuMzkwNjJWMTBhLjc1Ljc1LDAsMCwwLS43NS0uNzVoLTguMjV2LTFhMiwyLDAsMCwwLTItMmgtNWEyLDIsMCwwLDAtMiwyVjI1LjA1NzI1WiIvPjwvc3ZnPg==\\\");\\r\\n    }\\r\\n\\r\\n    .open-eg-icon {\\r\\n        @extend .svg-icon;\\r\\n        background-image: url(\\\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0i5Zu+5bGCXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8c3R5bGUgdHlwZT0idGV4dC9jc3MiPg0KCS5zdDB7ZW5hYmxlLWJhY2tncm91bmQ6bmV3ICAgIDt9DQo8L3N0eWxlPg0KPHRpdGxlPmljb25zPC90aXRsZT4NCjxwb2x5Z29uIHBvaW50cz0iMTksNSAxOSwxMSAyNSwxMSAiLz4NCjxnIGNsYXNzPSJzdDAiPg0KCTxwYXRoIGQ9Ik05LjIsMjMuMlYyM2MwLTAuNywwLTEuNywwLTMuMWMwLTEuMywwLTIuNCwwLTMuMXYtMi41aDZ2MmMwLDAsMCwwLDAsMC4xczAsMC4xLDAsMC4xYzAsMCwwLDAsMCwwLjFjMCwwLDAsMC4xLDAsMC4xDQoJCWMwLDAsMCwwLDAsMC4xYzAsMCwwLDAuMS0wLjEsMC4xczAsMC0wLjEsMGMwLDAtMC4xLDAtMC4xLDBoLTAuMWMtMC45LDAtMS43LDAtMi40LDBjMCwwLjEsMCwwLjIsMCwwLjNjMCwwLjEsMCwwLjMsMCwwLjQNCgkJYzAsMC4xLDAsMC4yLDAsMC4zaDIuNWMwLjEsMCwwLjIsMCwwLjIsMGMwLDAsMC4xLDAuMSwwLjEsMC4yYzAsMCwwLDAuMSwwLDAuMWMwLDAsMCwwLjEsMCwwLjFjMCwwLjIsMCwwLjUsMCwwLjkNCgkJYzAsMC40LDAsMC43LDAsMC45QzE1LDIwLDE1LDIwLDE1LDIwYzAsMCwwLDAtMC4xLDBjLTEuMSwwLjEtMS45LDAuMS0yLjQsMC4xaC0wLjFWMjFjMC4zLDAsMC43LDAsMS4zLDBjMC42LDAsMSwwLDEuMywwDQoJCWMwLjIsMCwwLjQsMC4xLDAuNCwwLjJ2MC41YzAsMC4yLDAsMC41LDAsMC45YzAsMC40LDAsMC43LDAsMC45YzAsMC4yLTAuMSwwLjMtMC4yLDAuM2MtMC4yLDAtMC41LDAtMC44LDBjLTAuNCwwLTAuNywwLTAuOCwwDQoJCWMtMC41LDAtMS4yLDAtMi4xLDBjLTAuOSwwLTEuNiwwLTIsMC4xbC0wLjEtMC4yQzkuMiwyMy4zLDkuMiwyMy4yLDkuMiwyMy4yeiIvPg0KCTxwYXRoIGQ9Ik0yMi44LDIyLjZjMCwwLjEtMC4zLDAuMy0wLjcsMC40Yy0wLjQsMC4xLTAuOSwwLjItMS4zLDAuM2MtMC40LDAtMC44LDAuMS0xLDAuMWMtMC4zLDAtMC41LDAtMC43LDANCgkJYy0wLjIsMC0wLjQtMC4xLTAuNy0wLjFjLTAuMy0wLjEtMC41LTAuMS0wLjgtMC4zYy0wLjMtMC4xLTAuNS0wLjMtMC43LTAuNWwtMC4yLTAuMmMtMC4xLDAtMC4xLTAuMS0wLjItMC4ybC0wLjItMC4zDQoJCWMtMC40LTAuOC0wLjYtMS43LTAuNi0yLjdjMC0xLDAuMi0xLjksMC43LTIuNmwwLjEtMC4ydi0wLjF2MGMwLjYtMC45LDEuNi0xLjQsMy4xLTEuNGMwLjIsMCwwLjQsMCwwLjcsMC4xYzAuMiwwLDAuNSwwLjEsMC44LDAuMg0KCQljMC4zLDAuMSwwLjUsMC4yLDAuOCwwLjRjMC4yLDAuMiwwLjQsMC40LDAuNiwwLjZjMC4xLDAuMSwwLjEsMC4yLDAuMiwwLjRjMCwwLjEsMC4xLDAuMywwLjEsMC41YzAsMC4yLDAuMSwwLjQsMC4xLDAuNQ0KCQljMCwwLjEtMC4xLDAuMi0wLjMsMC4ySDIyYy0wLjEsMC0wLjMsMC0wLjYsMGMtMC4zLDAtMC41LDAtMC43LDBoLTAuNmMwLDAtMC4xLTAuMS0wLjEtMC4ycy0wLjEtMC4yLTAuMS0wLjJ2MA0KCQljLTAuMS0wLjItMC4yLTAuMi0wLjQtMC4yYy0wLjEsMC0wLjMsMC0wLjQsMC4xYy0wLjEsMC4xLTAuMiwwLjItMC4yLDAuM2MtMC4xLDAuMS0wLjEsMC4yLTAuMSwwLjRjMCwwLjItMC4xLDAuMy0wLjEsMC40DQoJCWMwLDAuMSwwLDAuMywwLDAuNGMwLDAuMSwwLDAuMSwwLDAuMmMwLDAuMSwwLDAuMiwwLDAuMnYwLjVjMCwwLjEsMCwwLjMsMCwwLjRjMCwwLjEsMCwwLjIsMC4xLDAuNGMwLDAuMSwwLjEsMC4zLDAuMSwwLjMNCgkJYzAuMSwwLjEsMC4yLDAuMiwwLjMsMC4yYzAuMSwwLjEsMC4zLDAuMSwwLjQsMC4xYzAuMywwLDAuNiwwLDAuOC0wLjF2LTAuM2MwLDAsMC0wLjEsMC0wLjFjMC0wLjEsMC0wLjEsMC0wLjFjMCwwLDAsMCwwLTAuMQ0KCQljMCwwLDAtMC4xLDAtMC4xaC0wLjJjMCwwLTAuMSwwLTAuMSwwYzAsMC0wLjEsMC0wLjEsMGgtMC40TDE5LjQsMjBjMCwwLDAtMC4xLDAtMC4ydi0wLjRjMCwwLDAtMC4xLDAtMC4yYzAtMC4xLDAtMC4yLDAtMC4ydi0wLjINCgkJYzAsMCwwLDAsMC0wLjFjMCwwLDAtMC4xLDAtMC4xdjBjMC0wLjEsMC0wLjEsMC0wLjJjMCwwLDAuMS0wLjEsMC4xLTAuMWgwLjVjMCwwLDAuMSwwLDAuMiwwaDAuNWMwLjMsMCwwLjYsMCwwLjgsMGgwLjUNCgkJYzAuNSwwLDAuOCwwLjEsMC45LDAuMmMwLDAuNCwwLDEsMCwxLjhjMCwwLjgsMCwxLjQsMCwxLjhWMjIuNnoiLz4NCjwvZz4NCjxwYXRoIGQ9Ik0xOCwxMlY1SDcuOEM3LjMsNSw3LDUuMyw3LDUuN3YyMC41QzcsMjYuNyw3LjMsMjcsNy44LDI3aDE2LjVjMC40LDAsMC44LTAuMywwLjgtMC44VjEySDE4eiBNMjMuOCwxNC42djkuN3YwLjJIOC4xdi0wLjINCgl2LTkuN3YtMS4xaDE1LjdWMTQuNnoiLz4NCjwvc3ZnPg0K\\\");\\r\\n    }\\r\\n\\r\\n    .save-icon {\\r\\n        @extend .svg-icon;\\r\\n        background-image: url(\\\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiI+PHRpdGxlPmljb25zPC90aXRsZT48cGF0aCBkPSJNNSw1Ljc1djIwLjVhLjc1Ljc1LDAsMCwwLC43NS43NUgyMi42ODkzNGEuNzUuNzUsMCwwLDAsLjUzMDMzLS4yMTk2N2wzLjU2MDY2LTMuNTYwNjZBLjc1Ljc1LDAsMCwwLDI3LDIyLjY4OTM0VjUuNzVBLjc1Ljc1LDAsMCwwLDI2LjI1LDVINS43NUEuNzUuNzUsMCwwLDAsNSw1Ljc1Wk0xNy4yNSwyNWgtNC41YS43NS43NSwwLDAsMS0uNzUtLjc1di0uNWEuNzUuNzUsMCwwLDAtLjc1LS43NWgtLjVhLjc1Ljc1LDAsMCwwLS43NS43NXYuNWEuNzUuNzUsMCwwLDEtLjc1Ljc1aC0uNUEuNzUuNzUsMCwwLDEsOCwyNC4yNXYtMy41QS43NS43NSwwLDAsMSw4Ljc1LDIwaDguNWEuNzUuNzUsMCwwLDEsLjc1Ljc1djMuNUEuNzUuNzUsMCwwLDEsMTcuMjUsMjVabTYtMTBIOC43NUEuNzUuNzUsMCwwLDEsOCwxNC4yNVY3Ljc1QS43NS43NSwwLDAsMSw4Ljc1LDdoMTQuNWEuNzUuNzUsMCwwLDEsLjc1Ljc1djYuNUEuNzUuNzUsMCwwLDEsMjMuMjUsMTVaIi8+PC9zdmc+\\\");\\r\\n    }\\r\\n\\r\\n    .reset-icon {\\r\\n        @extend .svg-icon;\\r\\n        background-size: 80%;\\r\\n        background-image: url(\\\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuWbvuWxgl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDUxMiA0ODEuOSIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAwIDAgNTEyIDQ4MS45OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+PHBhdGggZD0iTTMwMC4zLDIzMS44YzI0LjQtMjcuOSw0OC4xLTU0LjUsNzMuMi04MS44YzcuOS04LjYsMTQuMy0xMi42LDIxLTEyLjZjNi43LDAsMTIuNiw0LjEsMTkuOSwxMS42YzIzLjgsMjQuNiw1My4zLDYwLjksNzYsODIuOGMyLjcsMi44LDQuNCw1LjYsNS4yLDguM2MwLjksMi44LDAuNyw1LjUtMC4zLDcuOGMtMSwyLjMtMi43LDQuMS01LjEsNS40Yy0yLjUsMS4zLTUuOCwyLjEtOS41LDIuMWgtMjEuNGMtMS40LDU2LjktMjYuMiwxMDQuOC02My4zLDEzOS44Yy00MS43LDM5LjQtOTkuMiw2Mi40LTE1Ni44LDYzLjVjLTEsMC03LjcsMC4xLTcuOSwwYy0yOS0wLjQtNTcuOS02LjUtODQuNy0xOC45Yy0yNS0xMS42LTQ4LjEtMjguNi02Ny43LTUxLjZjLTEuNi0xLjktMS43LTQuOC0wLjEtNi44YzEuOC0yLjIsNS0yLjYsNy4xLTAuOGMyNS45LDIxLjgsNTcsMzIuNSw4OC4xLDMzLjJjMzIuNiwwLjcsNjUuNC05LjQsOTIuNS0yOS4ybDAuMi0wLjFjMTkuNC0xMy43LDM2LjEtMzIuOSw0Ny43LTU2LjJjMTAuNi0yMS4zLDE2LjktNDUuOSwxNy03Mi45aC0yMS4zYy00LjIsMC03LjYtMC43LTEwLjEtMmMtMi40LTEuMi00LTIuOS01LTVsLTAuMi0wLjVjLTAuOS0yLjMtMC45LTQuOSwwLTcuNkMyOTUuNCwyMzcuNywyOTcuNCwyMzQuOCwzMDAuMywyMzEuOCIvPjxwYXRoIGQ9Ik0yMTEuOCwyNTIuNWMtMjQuNCwyOC00OC4xLDU0LjYtNzMuMiw4MS44Yy03LjksOC42LTE0LjMsMTIuNi0yMC45LDEyLjZjLTYuNywwLTEyLjctNC4xLTE5LjktMTEuNmMtMjMuOC0yNC42LTUzLjMtNjAuOS03NS45LTgyLjhjLTIuNy0yLjgtNC41LTUuNy01LjItOC4zYy0wLjktMi44LTAuNy01LjUsMC4zLTcuOGMxLTIuMywyLjgtNC4yLDUuMi01LjRjMi41LTEuNCw1LjctMi4xLDkuNS0yLjFoMjEuNEM1NC4zLDE3MS45LDc5LjEsMTI0LDExNi4yLDg5YzQxLjgtMzkuMyw5OS4yLTYyLjMsMTU2LjktNjMuNWMwLjksMCw3LjctMC4xLDcuOSwwYzI5LDAuNCw1OCw2LjUsODQuNywxOC45YzI1LDExLjUsNDguMSwyOC42LDY3LjcsNTEuNmMxLjYsMS45LDEuNyw0LjgsMC4xLDYuOGMtMS44LDIuMi01LDIuNi03LjEsMC44Yy0yNS45LTIxLjktNTctMzIuNS04OC4xLTMzLjJjLTMyLjYtMC43LTY1LjMsOS40LTkyLjUsMjkuMmwtMC4xLDAuMWMtMTkuNCwxMy43LTM2LjEsMzMtNDcuNyw1Ni4zYy0xMC42LDIxLjItMTYuOSw0NS45LTE3LjEsNzIuOWgyMS4zYzQuMiwwLDcuNiwwLjcsMTAuMSwyYzIuNCwxLjIsNCwyLjksNSw1bDAuMiwwLjVjMC45LDIuMywwLjksNC45LDAsNy42QzIxNi42LDI0Ni42LDIxNC43LDI0OS41LDIxMS44LDI1Mi41eiIvPjwvc3ZnPg==\\\");\\r\\n    }\\r\\n\\r\\n    .revert-icon {\\r\\n        @extend .svg-icon;\\r\\n        background-image: url(\\\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiI+PHRpdGxlPmljb25zPC90aXRsZT48cGF0aCBkPSJNMjguODM2MzMsMjQuMzkzYy0uOTg3NDEtMy45NDk2NC0zLjk0OTY0LTYuOTExODctMTMuODIzNzQtNi45MTE4N3YzLjk0OTY0TDMuMTYzNjcsMTQuNTE4ODgsMTUuMDEyNTksNy42MDd2My45NDk2NGMxMi44MzYzMywwLDEzLjgyMzc0LDguODg2NywxMy44MjM3NCwxMi44MzYzNCIvPjwvc3ZnPg==\\\");\\r\\n    }\\r\\n\\r\\n    .redo-icon {\\r\\n        @extend .svg-icon;\\r\\n        background-image: url(\\\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiI+PHRpdGxlPmljb25zPC90aXRsZT48cGF0aCBkPSJNMy4xNjM2NywyNC4zOTNjLjk4NzQxLTMuOTQ5NjQsMy45NDk2NC02LjkxMTg3LDEzLjgyMzc0LTYuOTExODd2My45NDk2NGwxMS44NDg5Mi02LjkxMTg4TDE2Ljk4NzQxLDcuNjA3djMuOTQ5NjRjLTEyLjgzNjMzLDAtMTMuODIzNzQsOC44ODY3LTEzLjgyMzc0LDEyLjgzNjM0Ii8+PC9zdmc+\\\");\\r\\n    }\\r\\n\\r\\n    .export-icon {\\r\\n        @extend .svg-icon;\\r\\n        background-image: url(\\\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0i5Zu+5bGCXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMzIgMzIiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDMyIDMyOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8cGF0aCBkPSJNNTkuNCwzOC4zYzAtMS4yLDAtMi40LDAtMy42aC05LjJ2LTcuNGg5LjJjMC0xLjIsMC0yLjQsMC0zLjZjMi4xLDEuNCw0LjIsMi44LDYuNCw0LjJ2LTQuNmgtNy4xdi03SDQ4LjQNCgljLTAuNSwwLTAuOCwwLjMtMC44LDAuN3YyMC41YzAsMC41LDAuMywwLjgsMC44LDAuOGgxNi41YzAuNCwwLDAuOC0wLjMsMC44LTAuOHYtMy41QzYzLjYsMzUuNSw2MS41LDM2LjksNTkuNCwzOC4zeiIvPg0KPHRpdGxlPmljb25zPC90aXRsZT4NCjxwb2x5Z29uIHBvaW50cz0iNTguNiw1IDU4LjYsMTEgNjQuNiwxMSAiLz4NCjx0ZXh0IHRyYW5zZm9ybT0ibWF0cml4KDEgMCAwIDEgMzQuNTE1MiAxOC4xMDM3KSIgc3R5bGU9ImZvbnQtZmFtaWx5OidBcmlhbC1Cb2xkTVQnOyBmb250LXNpemU6OXB4OyI+ZS5nLjwvdGV4dD4NCjxwYXRoIGQ9Ik02MS40LDI3LjNjMCwyLjUsMCw1LjEsMCw3LjZjMS45LTEuMywzLjgtMi41LDUuNy0zLjhDNjUuMiwyOS44LDYzLjMsMjguNSw2MS40LDI3LjN6Ii8+DQo8cmVjdCB4PSI1Mi40IiB5PSIyOS40IiB3aWR0aD0iOS45IiBoZWlnaHQ9IjMuNCIvPg0KPGc+DQoJPHBhdGggZD0iTTI1LjUsMTcuOGgtMS44Yy0wLjUsMC0wLjksMC40LTAuOSwwLjl2NC4xYzAsMC4zLTAuMiwwLjUtMC41LDAuNUg4LjZjLTAuMywwLTAuNS0wLjItMC41LTAuNVY5LjJjMC0wLjMsMC4yLTAuNSwwLjUtMC41DQoJCWg0LjFjMC41LDAsMC45LTAuNCwwLjktMC45VjZjMC0wLjUtMC40LTAuOS0wLjktMC45SDUuNEM0LjgsNSw0LjQsNS40LDQuNCw2djIwLjFjMCwwLjUsMC40LDAuOSwwLjksMC45aDIwLjENCgkJYzAuNSwwLDAuOS0wLjQsMC45LTAuOXYtNy4zQzI2LjQsMTguMiwyNiwxNy44LDI1LjUsMTcuOHoiLz4NCgk8cGF0aCBkPSJNMjUuNSw1aC03LjNjLTAuNSwwLTAuOSwwLjQtMC45LDAuOXYxLjhjMCwwLjUsMC40LDAuOSwwLjksMC45aDAuOWMwLjQsMCwwLjYsMC41LDAuNCwwLjhsLTcuMyw3LjMNCgkJYy0wLjQsMC40LTAuNCwwLjksMCwxLjNsMS4zLDEuM2MwLjQsMC40LDAuOSwwLjQsMS4zLDBsNy4zLTcuM2MwLjMtMC4zLDAuOC0wLjEsMC44LDAuNHYwLjljMCwwLjUsMC40LDAuOSwwLjksMC45aDEuOA0KCQljMC41LDAsMC45LTAuNCwwLjktMC45VjZDMjYuNCw1LjQsMjYsNSwyNS41LDV6Ii8+DQo8L2c+DQo8L3N2Zz4NCg==\\\");\\r\\n    }\\r\\n}\\r\\n\\r\\n.active-btn {\\r\\n    background: var(--gray14);\\r\\n}\\r\\n\\r\\n.sub-menu-container {\\r\\n    position: absolute;\\r\\n    z-index: 99999999;\\r\\n    box-shadow: 0 2px 2px rgba(0, 0, 0, 0.2);\\r\\n    width: 150px;\\r\\n    height: auto;\\r\\n    background: var(--gray14);\\r\\n\\r\\n    ul {\\r\\n        width: 100%;\\r\\n        height: 100%;\\r\\n        margin: 0;\\r\\n        padding: 0;\\r\\n\\r\\n        li {\\r\\n            box-sizing: border-box;\\r\\n            list-style: none;\\r\\n            margin: 0;\\r\\n            padding: 4px 10px;\\r\\n            width: 100%;\\r\\n            height: 30px;\\r\\n            color: var(--gray8);\\r\\n            font-size: 12pt;\\r\\n            line-height: 20px;\\r\\n            border-top: 1px solid var(--gray15);\\r\\n\\r\\n            &:first-child {\\r\\n                border-top: none;\\r\\n            }\\r\\n\\r\\n            &:hover {\\r\\n                cursor: pointer;\\r\\n                background: var(--gray15)\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".play-btn-wrapper{float:left;width:22px}.play-btn-wrapper label{display:block;box-sizing:border-box;width:0;height:16px;margin:5px;border-color:rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0) var(--gray12);transition:100ms all ease;cursor:pointer;border-style:double;border-width:0 0 0 14px;outline:none}.play-btn-wrapper input[type=checkbox]{position:absolute;left:-9999px}.play-btn-wrapper input[type=checkbox]:checked+label{border-style:solid;border-width:8px 0 8px 12px}.play-btn-wrapper:hover{cursor:pointer}.play-btn-wrapper:hover label{border-color:rgba(0,0,0,0) rgba(0,0,0,0) rgba(0,0,0,0) var(--gray15)}.time-span-wrapper{float:left;width:115px;height:26px;line-height:26px;margin-left:5px}.time-span-wrapper span{font-size:10pt;line-height:16px;color:var(--gray13)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/assets/style/player.scss\"],\"names\":[],\"mappings\":\"AAAA,kBACC,UAAA,CACA,UAAA,CACA,wBACC,aAAA,CACA,qBAAA,CACA,OAAA,CACA,WAAA,CACA,UAAA,CACA,oEAAA,CACA,yBAAA,CACA,cAAA,CACA,mBAAA,CACA,uBAAA,CACA,YAAA,CAED,uCACC,iBAAA,CACA,YAAA,CACA,qDACC,kBAAA,CACA,2BAAA,CAGF,wBACO,cAAA,CACN,8BACC,oEAAA,CAKH,mBACC,UAAA,CACA,WAAA,CACA,WAAA,CACA,gBAAA,CACA,eAAA,CACA,wBACC,cAAA,CACA,gBAAA,CACA,mBAAA\",\"sourcesContent\":[\".play-btn-wrapper {\\r\\n\\tfloat: left;\\r\\n\\twidth: 22px;\\r\\n\\tlabel {\\r\\n\\t\\tdisplay: block;\\r\\n\\t\\tbox-sizing: border-box;\\r\\n\\t\\twidth: 0;\\r\\n\\t\\theight: 16px;\\r\\n\\t\\tmargin: 5px;\\r\\n\\t\\tborder-color: transparent transparent transparent var(--gray12);\\r\\n\\t\\ttransition: 100ms all ease;\\r\\n\\t\\tcursor: pointer;\\r\\n\\t\\tborder-style: double;\\r\\n\\t\\tborder-width: 0 0 0 14px; //play icon\\r\\n\\t\\toutline: none;\\r\\n\\t}\\r\\n\\tinput[type=\\\"checkbox\\\"] {\\r\\n\\t\\tposition: absolute;\\r\\n\\t\\tleft: -9999px;\\r\\n\\t\\t&:checked + label {\\r\\n\\t\\t\\tborder-style: solid;\\r\\n\\t\\t\\tborder-width: 8px 0 8px 12px; //pause icon\\r\\n\\t\\t}\\r\\n\\t}\\r\\n\\t&:hover {\\r\\n        cursor: pointer;\\r\\n\\t\\tlabel {\\r\\n\\t\\t\\tborder-color: transparent transparent transparent var(--gray15);\\r\\n\\t\\t}\\r\\n\\t}\\r\\n}\\r\\n\\r\\n.time-span-wrapper {\\r\\n\\tfloat: left;\\r\\n\\twidth: 115px;\\r\\n\\theight: 26px;\\r\\n\\tline-height: 26px;\\r\\n\\tmargin-left: 5px;\\r\\n\\tspan {\\r\\n\\t\\tfont-size: 10pt;\\r\\n\\t\\tline-height: 16px;\\r\\n\\t\\tcolor: var(--gray13);\\r\\n\\t}\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".zero-margin-padding,.panel,.panel-wrapper{margin:0;padding:0}.cover-size,.panel,.panel-wrapper{width:100%;height:100%}.flex-panel-wrapper{display:flex}.panel{background:var(--gray6);position:relative;float:left;z-index:99}.v-panel{max-height:calc(100% - 300px);min-height:300px}.v-fix-panel{height:300px}.h-panel{max-width:calc(100% - 300px);min-width:300px}.h-fix-panel{width:300px}.v-flex-panel{height:calc(100% - 300px)}.h-flex-panel{width:calc(100% - 300px)}.resizer,.non-dragable-h-resizer,.non-dragable-v-resizer,.h-resizer,.v-resizer{position:relative;float:left;z-index:999;background:rgba(0,0,0,0);transition:all .1s linear}.resize-bar{background:var(--gray11);transition:all .03s linear}.v-resizer{height:4px;margin-top:-2px;width:100%;padding:1px 0;box-sizing:border-box;cursor:ns-resize}.v-resizer .resize-bar{height:1px;width:100%}.v-resizer:hover{background:var(--highlight-blue)}.v-resizer:hover .resize-bar{background:var(--highlight-blue)}.h-resizer{width:4px;margin-left:-2px;height:100%;padding:0 1px;box-sizing:border-box;cursor:ew-resize}.h-resizer .resize-bar{width:1px;height:100%}.h-resizer:hover{background:var(--highlight-blue)}.h-resizer:hover .resize-bar{background:var(--highlight-blue)}.non-dragable-v-resizer{height:5px;margin-top:-2px;width:100%;box-sizing:border-box}.non-dragable-v-resizer .resize-bar{background:var(--gray7);height:5px;width:100%}.non-dragable-h-resizer{width:5px;margin-left:-2px;height:100%;box-sizing:border-box}.non-dragable-h-resizer .resize-bar{background:var(--gray7);width:5px;height:100%}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/assets/style/resizablePanel.scss\"],\"names\":[],\"mappings\":\"AAAA,2CACC,QAAA,CACA,SAAA,CAGD,kCACC,UAAA,CACA,WAAA,CAQD,oBACC,YAAA,CAGD,OACC,uBAAA,CAGA,iBAAA,CACA,UAAA,CACA,UAAA,CAGD,SACC,6BAAA,CACA,gBAAA,CAGD,aACC,YAAA,CAGD,SACC,4BAAA,CACA,eAAA,CAGD,aACC,WAAA,CAGD,cACC,yBAAA,CAED,cACC,wBAAA,CAGD,+EACC,iBAAA,CACA,UAAA,CACA,WAAA,CACA,wBAAA,CACA,yBAAA,CAGD,YACC,wBAAA,CACA,0BAAA,CAGD,WAEC,UAAA,CACA,eAAA,CACA,UAAA,CACA,aAAA,CACA,qBAAA,CACA,gBAAA,CACA,uBACC,UAAA,CACA,UAAA,CAED,iBACC,gCAAA,CACA,6BACC,gCAAA,CAKH,WAEC,SAAA,CACA,gBAAA,CACA,WAAA,CACA,aAAA,CACA,qBAAA,CACA,gBAAA,CACA,uBACC,SAAA,CACA,WAAA,CAED,iBACC,gCAAA,CACA,6BACC,gCAAA,CAKH,wBAEC,UAAA,CACA,eAAA,CACA,UAAA,CACA,qBAAA,CACA,oCACC,uBAAA,CACA,UAAA,CACA,UAAA,CAIF,wBAEC,SAAA,CACA,gBAAA,CACA,WAAA,CACA,qBAAA,CACA,oCACC,uBAAA,CACA,SAAA,CACA,WAAA\",\"sourcesContent\":[\".zero-margin-padding {\\r\\n\\tmargin: 0;\\r\\n\\tpadding: 0;\\r\\n}\\r\\n\\r\\n.cover-size {\\r\\n\\twidth: 100%;\\r\\n\\theight: 100%;\\r\\n}\\r\\n\\r\\n.panel-wrapper {\\r\\n\\t@extend .zero-margin-padding;\\r\\n\\t@extend .cover-size;\\r\\n}\\r\\n\\r\\n.flex-panel-wrapper {\\r\\n\\tdisplay: flex;\\r\\n}\\r\\n\\r\\n.panel {\\r\\n\\tbackground: var(--gray6);\\r\\n\\t@extend .cover-size;\\r\\n\\t@extend .zero-margin-padding;\\r\\n\\tposition: relative;\\r\\n\\tfloat: left;\\r\\n\\tz-index: 99;\\r\\n}\\r\\n\\r\\n.v-panel {\\r\\n\\tmax-height: calc(100% - 300px);\\r\\n\\tmin-height: 300px;\\r\\n}\\r\\n\\r\\n.v-fix-panel {\\r\\n\\theight: 300px;\\r\\n}\\r\\n\\r\\n.h-panel {\\r\\n\\tmax-width: calc(100% - 300px);\\r\\n\\tmin-width: 300px;\\r\\n}\\r\\n\\r\\n.h-fix-panel {\\r\\n\\twidth: 300px;\\r\\n}\\r\\n\\r\\n.v-flex-panel {\\r\\n\\theight: calc(100% - 300px);\\r\\n}\\r\\n.h-flex-panel {\\r\\n\\twidth: calc(100% - 300px);\\r\\n}\\r\\n\\r\\n.resizer {\\r\\n\\tposition: relative;\\r\\n\\tfloat: left;\\r\\n\\tz-index: 999;\\r\\n\\tbackground: rgba(0, 0, 0, 0);\\r\\n\\ttransition: all 0.1s linear;\\r\\n}\\r\\n\\r\\n.resize-bar {\\r\\n\\tbackground: var(--gray11);\\r\\n\\ttransition: all 0.03s linear;\\r\\n}\\r\\n\\r\\n.v-resizer {\\r\\n\\t@extend .resizer;\\r\\n\\theight: 4px;\\r\\n\\tmargin-top: -2px;\\r\\n\\twidth: 100%;\\r\\n\\tpadding: 1px 0;\\r\\n\\tbox-sizing: border-box;\\r\\n\\tcursor: ns-resize;\\r\\n\\t.resize-bar {\\r\\n\\t\\theight: 1px;\\r\\n\\t\\twidth: 100%;\\r\\n\\t}\\r\\n\\t&:hover {\\r\\n\\t\\tbackground: var(--highlight-blue);\\r\\n\\t\\t.resize-bar {\\r\\n\\t\\t\\tbackground: var(--highlight-blue);\\r\\n\\t\\t}\\r\\n\\t}\\r\\n}\\r\\n\\r\\n.h-resizer {\\r\\n\\t@extend .resizer;\\r\\n\\twidth: 4px;\\r\\n\\tmargin-left: -2px;\\r\\n\\theight: 100%;\\r\\n\\tpadding: 0 1px;\\r\\n\\tbox-sizing: border-box;\\r\\n\\tcursor: ew-resize;\\r\\n\\t.resize-bar {\\r\\n\\t\\twidth: 1px;\\r\\n\\t\\theight: 100%;\\r\\n\\t}\\r\\n\\t&:hover {\\r\\n\\t\\tbackground: var(--highlight-blue);\\r\\n\\t\\t.resize-bar {\\r\\n\\t\\t\\tbackground: var(--highlight-blue);\\r\\n\\t\\t}\\r\\n\\t}\\r\\n}\\r\\n\\r\\n.non-dragable-v-resizer {\\r\\n\\t@extend .resizer;\\r\\n\\theight: 5px;\\r\\n\\tmargin-top: -2px;\\r\\n\\twidth: 100%;\\r\\n\\tbox-sizing: border-box;\\r\\n\\t.resize-bar {\\r\\n\\t\\tbackground: var(--gray7);\\r\\n\\t\\theight: 5px;\\r\\n\\t\\twidth: 100%;\\r\\n\\t}\\r\\n}\\r\\n\\r\\n.non-dragable-h-resizer {\\r\\n\\t@extend .resizer;\\r\\n\\twidth: 5px;\\r\\n\\tmargin-left: -2px;\\r\\n\\theight: 100%;\\r\\n\\tbox-sizing: border-box;\\r\\n\\t.resize-bar {\\r\\n\\t\\tbackground: var(--gray7);\\r\\n\\t\\twidth: 5px;\\r\\n\\t\\theight: 100%;\\r\\n\\t}\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/getUrl.js\";\nvar ___CSS_LOADER_URL_IMPORT_0___ = new URL(\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuWbvuWxgl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDIwMCAyMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj48Zz48cG9seWdvbiBwb2ludHM9IjU4LjM5LDEwIDE0LjMzLDU5Ljg3IDEwMi40Niw1OS44NyAiLz48L2c+PGc+PHJlY3QgeD0iNDQuNiIgeT0iNTkuODciIHdpZHRoPSIyNy41OSIgaGVpZ2h0PSIxMjQuMTMiLz48L2c+PGc+PHBvbHlnb24gcG9pbnRzPSI1OC4zOSwxMCAxNC4zMyw1OS44NyAxMDIuNDYsNTkuODcgIi8+PC9nPjxnPjxyZWN0IHg9IjQ0LjYiIHk9IjU5Ljg3IiB3aWR0aD0iMjcuNTkiIGhlaWdodD0iMTI0LjEzIi8+PC9nPjxnPjxyZWN0IHg9Ijg1Ljk4IiB5PSI3NS43OCIgd2lkdGg9IjEwNy4xNiIgaGVpZ2h0PSIyNy41OSIvPjwvZz48Zz48cmVjdCB4PSI4NS45OCIgeT0iMTE2LjEiIHdpZHRoPSI4OC4wMiIgaGVpZ2h0PSIyNy41OSIvPjwvZz48Zz48cmVjdCB4PSI4NS45OCIgeT0iMTU2LjQxIiB3aWR0aD0iNjguMDIiIGhlaWdodD0iMjcuNTkiLz48L2c+PC9zdmc+\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_1___ = new URL(\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuWbvuWxgl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDIwMCAyMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj48Zz48cG9seWdvbiBwb2ludHM9IjU4LjM5LDE4NCAxNC4zMywxMzQuMTMgMTAyLjQ2LDEzNC4xMyAiLz48L2c+PGc+PHJlY3QgeD0iNDQuNiIgeT0iMTAiIHdpZHRoPSIyNy41OSIgaGVpZ2h0PSIxMjQuMTMiLz48L2c+PGc+PHJlY3QgeD0iODUuOTgiIHk9IjkuNzgiIHdpZHRoPSIxMDcuMTYiIGhlaWdodD0iMjcuNTkiLz48L2c+PGc+PHJlY3QgeD0iODUuOTgiIHk9IjUwLjEiIHdpZHRoPSI4OC4wMiIgaGVpZ2h0PSIyNy41OSIvPjwvZz48Zz48cmVjdCB4PSI4NS45OCIgeT0iOTAuNDEiIHdpZHRoPSI2OC4wMiIgaGVpZ2h0PSIyNy41OSIvPjwvZz48L3N2Zz4=\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_2___ = new URL(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAF9WlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDE5LTA2LTI4VDE1OjMwOjAyKzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOS0wNy0wN1QxMToyOTo1MiswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOS0wNy0wN1QxMToyOTo1MiswODowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjEiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJEb3QgR2FpbiAxNSUiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NTViYjUzY2YtZDEwNy02NTRiLWI1MWEtNTNmOGUzNDNlNGFiIiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6MTdmYzA0M2YtMTM0Mi1kOTRlLThlM2UtMDMyZGFmODQ4N2M1IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6OTE3N2ZjNmEtMmVmMi02YzRiLTk0YTEtYmQxOWExMjQwMDVhIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo5MTc3ZmM2YS0yZWYyLTZjNGItOTRhMS1iZDE5YTEyNDAwNWEiIHN0RXZ0OndoZW49IjIwMTktMDYtMjhUMTU6MzA6MDIrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NTViYjUzY2YtZDEwNy02NTRiLWI1MWEtNTNmOGUzNDNlNGFiIiBzdEV2dDp3aGVuPSIyMDE5LTA3LTA3VDExOjI5OjUyKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+hb4CkQAAAJNJREFUKJF9kEsKwkAQRN+EIIh4xWz9bHIad5FAVrpQ3HoPr2IwIJSL+aA9Y7qhFzOPqupGCA60mFJoP25M7OeAE2Jk9x84I8ST7TwgXtYIA4gxIUHAAt9GKil4ZBMBmyH2myYC9U+gnjsVsOBRCtmxNPmTxRVxZJUtmIALA+vCBRBO2TuA84CDqvgfryDMFpkIfAAHK3Aw2pG+VwAAAABJRU5ErkJggg==\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_3___ = new URL(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAG5GlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDE5LTA1LTI5VDExOjI0OjUyKzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOS0wNS0yOVQxMTozMDozOCswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOS0wNS0yOVQxMTozMDozOCswODowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpiOTBkMjk0ZS0xYzFlLWViNDYtYTJiZS0yODBkMmQxMjQzYmQiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo1MzA1MTViZi01ZDBkLTAzNGYtYTU2NC1mYzZkMmRkNGZlYTIiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpiZDMyZGQwYS04MTJmLWUzNGEtOWIwNC0xODcyNzZmOGUwODgiPiA8cGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8cmRmOkJhZz4gPHJkZjpsaT5hZG9iZTpkb2NpZDpwaG90b3Nob3A6MDEzMzlmMTQtZmQxMC1hNzRkLWJmN2QtMjE2MjllMTMxMzAxPC9yZGY6bGk+IDxyZGY6bGk+YWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmJhZDRhZTdhLTQyYWQtMjY0Zi1iNzViLTIyNTVlN2FhYWQ5YTwvcmRmOmxpPiA8L3JkZjpCYWc+IDwvcGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmJkMzJkZDBhLTgxMmYtZTM0YS05YjA0LTE4NzI3NmY4ZTA4OCIgc3RFdnQ6d2hlbj0iMjAxOS0wNS0yOVQxMToyNDo1MiswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpiOTBkMjk0ZS0xYzFlLWViNDYtYTJiZS0yODBkMmQxMjQzYmQiIHN0RXZ0OndoZW49IjIwMTktMDUtMjlUMTE6MzA6MzgrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4N9//7AAADOUlEQVRIidWWz0srVxTHvydRsTFkCAMpBIygIC4UGwKCEhdGUBe6KKYL/wQLgqQ7N7Vd1ScuXBX/ANeKu2gUBAdR0UWUYUBCNplIDERNDcyQH99utDxeM/Ps4i36hbO4cw/fz+XOOfdeIYlvKc83df8aQER8IjItIlNv4x9EZEdETkTkp7dvXhFx9iHZNgD4fD4fp6enOTU1RQA/BoNB7uzs8OTkhP39/QQw6/V66fF4CMDT1scFMDw8PMxMJsPDw0P6/X6qqsqrqyvWajX29fVxdnaWW1tbTCQSBJBo5+O2RSIiCAaDGBwcRG9vL0hCURS0Wi3Yto25uTnMz89DVVUAUP/rPyiVSiWYpolAIIBIJIJWqwWfz4dqtQpFUTAyMgLbtpHP5wHAFJF1Efn+o4BKpVJBqVRCIBDA0NAQRAR+vx+1Wg2RSAThcBjZbBa5XA4TExPa+vr6rwBSHwKQbDQajd9M04TX60UsFoOiKOju7sbLywsGBgYQDAaRzWYRCoWwsbGBVCoFAMuuABEJiUiPiAiAQqFQQLPZRCwWQyKRQEdHB0hicnIStm3j4eEBCwsLiMfjODg4AICDL1f6eeUkQ6EQe3p6KCIEkEwmkyyXy7Rtm7e3tyTJx8dHWpbF09NTplIpZjIZ3t3dMR6PE0DcsUwBHB8fH3N1dZWqqhLAzMzMDHVdZztpmsbz83M+PT1xe3ubnZ2dBNDpBtB1XadlWVxZWSGA36PRKM/OztoC6vU66/U6NU3j2NgYAYy5NhqAlfHxcebzeZbLZS4vL3NxcdER8K7NzU12dXURQNdXOxnA2traGqvVKguFAnVd5/Pzs6O5aZpcWloigKUvvZwA4XA4zOvra9dVvyudTnN0dJQARtsB/lWmJIvFYvHPi4sLWJbl1Cb/yDAM5HI5AMi1m3dqtN3d3V0YhuFq3mg0YBgGXl9ffyb5+mEASU3TtM2joyPYtu0IKBaLuL+/B4B7pxy3s2hvb28Pl5eXjgk3NzcwTRMATKecDqcJkuci8sv+/v5WNBpFq9VCs9kEAIgIPB4P0um06/6/G7ldOt8B+ATgLwAvACpv8fQ2/gNtav/zEP7fXxV/A/5C86W2KDx7AAAAAElFTkSuQmCC\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_4___ = new URL(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAGb2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDE5LTA1LTI0VDE1OjEyOjQ5KzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE5LTA1LTI0VDE1OjEyOjQ5KzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOS0wNS0yNFQxNToxMjo0OSswODowMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDphNGM2ZTdmZi04YWM0LTEwNDgtYjlkNS1iYTM5NzZiODhkNTkiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpiYWQ0YWU3YS00MmFkLTI2NGYtYjc1Yi0yMjU1ZTdhYWFkOWEiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo5NWUxMjJlNy1lMGVjLWQ2NDktYWQwZC04ZjA4ZGM2MDAwNDQiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo5NWUxMjJlNy1lMGVjLWQ2NDktYWQwZC04ZjA4ZGM2MDAwNDQiIHN0RXZ0OndoZW49IjIwMTktMDUtMjRUMTU6MTI6NDkrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YTRjNmU3ZmYtOGFjNC0xMDQ4LWI5ZDUtYmEzOTc2Yjg4ZDU5IiBzdEV2dDp3aGVuPSIyMDE5LTA1LTI0VDE1OjEyOjQ5KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDxyZGY6QmFnPiA8cmRmOmxpPmFkb2JlOmRvY2lkOnBob3Rvc2hvcDowMTMzOWYxNC1mZDEwLWE3NGQtYmY3ZC0yMTYyOWUxMzEzMDE8L3JkZjpsaT4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz456hG0AAADFUlEQVRIie2VzU8TQRiHf7Pbz4UQxRZaIgEhSAUaSCkEwoVE0gtqCDERvOHVA948cOI/wMTYGxc8ES9VKgcx4QAajZUEjFkbq3wGJfQDdlnC7rKvB2ixUqAc9OSTTLKZSeaZ+b377jIiwt+E+6u7/wuBKf3Q3R04snI8eJ7D5OSUV1XVuwB+lJdffrmysnoDQGl5+eWnxcUXPn3+/AUWixnt7a1IJFLY3t5GXZ0HoVD4uGBubj4zyfMmEBkdqqrOBAIBLC8vQxTFkYaGBrhcLkxNTT1cWVl9BeCKpmnfUqmtexzH1hhjx69ARCAicBwHjuPA85nUosPDw0RE+0REwWCQDjGGhoaoq6uLQqEQ9fX1EYCfgmCvaGz04s6d3syeRHQkcLtdcLtdKCtzoaTEAQCJ2dk3dALG4SAi0hnjCAABeNbW5jfnFAiCHYJgh81mQ2FhAQCsTUyETxJksbi4uB+JRKi5uZkAjPwuyOShKLtQlF04nQ4IggAA2sGhzqaiooLz+XwYGBgAgJacb1GaVCrVKkmyH8BFWZbzEqTZ2NgAgMRpgseSJN/3+/2w2+3wer0GztEr6+vrALCZNZnOijF22+l0UiwW+7OI+bLf0dFBJpNpKGeRATwfHHyQ3vzcqKpqmEwmAtCZs8gAopHIh7zz/pNwOMx0XZerqipnckZUXV3pAKD09/cTHTbXOTB6enoIwJjbXZq70Xp7b6KpyXsVwGpnZyfpup53VIqiGGazmUpLndevXavNEmQikiQZNTXV0ba2lrrp6en52tpatrm5mVcjjI09ZZqm/dA0/XUymcpaywh4nocs76CqqnK7uzvQGIvFXng8Hra0tHSWhILBIAA8cTguwWIx5xbs7CiQJBnR6Fckk1uor/fcisfj78fHxxkOWvqkgbW1VTDG3sbjCUiSlCXINFos9h1EBvb2VOi6DqvVCp7n9dHRUSwsLDDDMI4dPf15TiaTsNmsF4qKCqGqWm6B1WoFY0BBQQEYY7BYLCCiR6IofhRF8bSIGM/zus/X+K6oqBB7e2r2Iv3/6Z/BL5oAtNSvyPOCAAAAAElFTkSuQmCC\", import.meta.url);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\nvar ___CSS_LOADER_URL_REPLACEMENT_1___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_1___);\nvar ___CSS_LOADER_URL_REPLACEMENT_2___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_2___);\nvar ___CSS_LOADER_URL_REPLACEMENT_3___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_3___);\nvar ___CSS_LOADER_URL_REPLACEMENT_4___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_4___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".selectable-table{min-width:100%;font-size:10pt;text-align:left;border-collapse:collapse}.selectable-table tr th,.selectable-table tr td{box-sizing:border-box;padding:2px;border-bottom:1px solid var(--gray5);overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.selectable-table tr th{font-weight:normal;background:var(--gray13);color:var(--gray1);border-right:1px solid var(--gray12)}.selectable-table tr th:hover{background:var(--gray14);cursor:pointer}.selectable-table tr th .th-container{width:100%;display:flex}.selectable-table tr th p{float:left;margin:2px 0}.selectable-table tr th .non-activate-p{width:calc(100% + 20px)}.selectable-table tr th .sort-btn{float:left;width:0;height:14px;background-color:none;background-repeat:no-repeat;background-size:70% auto;background-position:center;filter:invert(90%)}.selectable-table tr th .activate-sort-btn{width:14px;padding:3px}.selectable-table tr th .asscending-icon{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \")}.selectable-table tr th .descending-icon{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_1___ + \")}.selectable-table tr .non-activate-th{padding-right:22px}.selectable-table tr td{color:var(--gray13)}.selectable-table tr td:hover{cursor:url(\" + ___CSS_LOADER_URL_REPLACEMENT_2___ + \"),auto}.selectable-table tr:hover td{color:var(--gray16)}.selected-td{background:var(--selected-bg) !important}.selected-td:hover{cursor:url(\" + ___CSS_LOADER_URL_REPLACEMENT_3___ + \"),auto !important}.ghost-div{position:absolute;width:70px;height:20px;font-size:10pt;line-height:20px;padding:5px 10px;text-align:center;z-index:999;border-radius:3px;color:var(--gray15);border:1px solid var(--gray12);background:var(--gray3);box-shadow:0 4px 6px rgba(0,0,0,.2)}.dragging-ghost-div{cursor:url(\" + ___CSS_LOADER_URL_REPLACEMENT_4___ + \"),auto !important}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/assets/style/selectableTable.scss\"],\"names\":[],\"mappings\":\"AAAA,kBACI,cAAA,CACA,cAAA,CACA,eAAA,CACA,wBAAA,CAII,gDACI,qBAAA,CACA,WAAA,CACA,oCAAA,CACA,eAAA,CACA,sBAAA,CACA,kBAAA,CAIJ,wBACI,kBAAA,CACA,wBAAA,CACA,kBAAA,CAOA,oCAAA,CALA,8BACI,wBAAA,CACA,cAAA,CAKJ,sCACI,UAAA,CACA,YAAA,CAGJ,0BACI,UAAA,CACA,YAAA,CAIJ,wCACI,uBAAA,CAGJ,kCACI,UAAA,CACA,OAAA,CACA,WAAA,CACA,qBAAA,CACA,2BAAA,CACA,wBAAA,CACA,0BAAA,CACA,kBAAA,CAGJ,2CACI,UAAA,CACA,WAAA,CAGJ,yCACI,wDAAA,CAGJ,yCACI,wDAAA,CAIR,sCACI,kBAAA,CAGJ,wBAEI,mBAAA,CAEA,8BACI,mDAAA,CAMJ,8BACI,mBAAA,CAOhB,aACI,wCAAA,CAEA,mBACI,8DAAA,CAMR,WACI,iBAAA,CACA,UAAA,CACA,WAAA,CACA,cAAA,CACA,gBAAA,CACA,gBAAA,CACA,iBAAA,CACA,WAAA,CACA,iBAAA,CACA,mBAAA,CACA,8BAAA,CACA,uBAAA,CACA,mCAAA,CAGJ,oBACI,8DAAA\",\"sourcesContent\":[\".selectable-table {\\r\\n    min-width: 100%;\\r\\n    font-size: 10pt;\\r\\n    text-align: left;\\r\\n    border-collapse: collapse;\\r\\n\\r\\n    tr {\\r\\n\\r\\n        th,td {\\r\\n            box-sizing: border-box;\\r\\n            padding: 2px;\\r\\n            border-bottom: 1px solid var(--gray5);\\r\\n            overflow: hidden;\\r\\n            text-overflow: ellipsis;\\r\\n            white-space: nowrap;\\r\\n            // max-width: 70px;\\r\\n        }\\r\\n\\r\\n        th {\\r\\n            font-weight: normal;\\r\\n            background: var(--gray13);\\r\\n            color: var(--gray1);\\r\\n\\r\\n            &:hover {\\r\\n                background: var(--gray14);\\r\\n                cursor: pointer;\\r\\n            }\\r\\n\\r\\n            border-right: 1px solid var(--gray12);\\r\\n\\r\\n            .th-container {\\r\\n                width: 100%;\\r\\n                display: flex;\\r\\n            }\\r\\n\\r\\n            p {\\r\\n                float: left;\\r\\n                margin: 2px 0;\\r\\n                // text-align: center;\\r\\n            }\\r\\n\\r\\n            .non-activate-p {\\r\\n                width: calc(100% + 20px);\\r\\n            }\\r\\n\\r\\n            .sort-btn {\\r\\n                float: left;\\r\\n                width: 0;\\r\\n                height: 14px;\\r\\n                background-color: none;\\r\\n                background-repeat: no-repeat;\\r\\n                background-size: 70% auto;\\r\\n                background-position: center;\\r\\n                filter: invert(90%);\\r\\n            }\\r\\n\\r\\n            .activate-sort-btn {\\r\\n                width: 14px;\\r\\n                padding: 3px;\\r\\n            }\\r\\n\\r\\n            .asscending-icon {\\r\\n                background-image: url(\\\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuWbvuWxgl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDIwMCAyMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj48Zz48cG9seWdvbiBwb2ludHM9IjU4LjM5LDEwIDE0LjMzLDU5Ljg3IDEwMi40Niw1OS44NyAiLz48L2c+PGc+PHJlY3QgeD0iNDQuNiIgeT0iNTkuODciIHdpZHRoPSIyNy41OSIgaGVpZ2h0PSIxMjQuMTMiLz48L2c+PGc+PHBvbHlnb24gcG9pbnRzPSI1OC4zOSwxMCAxNC4zMyw1OS44NyAxMDIuNDYsNTkuODcgIi8+PC9nPjxnPjxyZWN0IHg9IjQ0LjYiIHk9IjU5Ljg3IiB3aWR0aD0iMjcuNTkiIGhlaWdodD0iMTI0LjEzIi8+PC9nPjxnPjxyZWN0IHg9Ijg1Ljk4IiB5PSI3NS43OCIgd2lkdGg9IjEwNy4xNiIgaGVpZ2h0PSIyNy41OSIvPjwvZz48Zz48cmVjdCB4PSI4NS45OCIgeT0iMTE2LjEiIHdpZHRoPSI4OC4wMiIgaGVpZ2h0PSIyNy41OSIvPjwvZz48Zz48cmVjdCB4PSI4NS45OCIgeT0iMTU2LjQxIiB3aWR0aD0iNjguMDIiIGhlaWdodD0iMjcuNTkiLz48L2c+PC9zdmc+\\\");\\r\\n            }\\r\\n\\r\\n            .descending-icon {\\r\\n                background-image: url(\\\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuWbvuWxgl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDIwMCAyMDAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDIwMCAyMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj48Zz48cG9seWdvbiBwb2ludHM9IjU4LjM5LDE4NCAxNC4zMywxMzQuMTMgMTAyLjQ2LDEzNC4xMyAiLz48L2c+PGc+PHJlY3QgeD0iNDQuNiIgeT0iMTAiIHdpZHRoPSIyNy41OSIgaGVpZ2h0PSIxMjQuMTMiLz48L2c+PGc+PHJlY3QgeD0iODUuOTgiIHk9IjkuNzgiIHdpZHRoPSIxMDcuMTYiIGhlaWdodD0iMjcuNTkiLz48L2c+PGc+PHJlY3QgeD0iODUuOTgiIHk9IjUwLjEiIHdpZHRoPSI4OC4wMiIgaGVpZ2h0PSIyNy41OSIvPjwvZz48Zz48cmVjdCB4PSI4NS45OCIgeT0iOTAuNDEiIHdpZHRoPSI2OC4wMiIgaGVpZ2h0PSIyNy41OSIvPjwvZz48L3N2Zz4=\\\");\\r\\n            }\\r\\n        }\\r\\n\\r\\n        .non-activate-th {\\r\\n            padding-right: 22px;\\r\\n        }\\r\\n\\r\\n        td {\\r\\n            // background: var(--gray3);\\r\\n            color: var(--gray13);\\r\\n\\r\\n            &:hover {\\r\\n                cursor: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAF9WlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDE5LTA2LTI4VDE1OjMwOjAyKzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOS0wNy0wN1QxMToyOTo1MiswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOS0wNy0wN1QxMToyOTo1MiswODowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjEiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJEb3QgR2FpbiAxNSUiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6NTViYjUzY2YtZDEwNy02NTRiLWI1MWEtNTNmOGUzNDNlNGFiIiB4bXBNTTpEb2N1bWVudElEPSJhZG9iZTpkb2NpZDpwaG90b3Nob3A6MTdmYzA0M2YtMTM0Mi1kOTRlLThlM2UtMDMyZGFmODQ4N2M1IiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6OTE3N2ZjNmEtMmVmMi02YzRiLTk0YTEtYmQxOWExMjQwMDVhIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo5MTc3ZmM2YS0yZWYyLTZjNGItOTRhMS1iZDE5YTEyNDAwNWEiIHN0RXZ0OndoZW49IjIwMTktMDYtMjhUMTU6MzA6MDIrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NTViYjUzY2YtZDEwNy02NTRiLWI1MWEtNTNmOGUzNDNlNGFiIiBzdEV2dDp3aGVuPSIyMDE5LTA3LTA3VDExOjI5OjUyKzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+hb4CkQAAAJNJREFUKJF9kEsKwkAQRN+EIIh4xWz9bHIad5FAVrpQ3HoPr2IwIJSL+aA9Y7qhFzOPqupGCA60mFJoP25M7OeAE2Jk9x84I8ST7TwgXtYIA4gxIUHAAt9GKil4ZBMBmyH2myYC9U+gnjsVsOBRCtmxNPmTxRVxZJUtmIALA+vCBRBO2TuA84CDqvgfryDMFpkIfAAHK3Aw2pG+VwAAAABJRU5ErkJggg==\\\"),\\r\\n                    auto;\\r\\n            }\\r\\n        }\\r\\n\\r\\n        &:hover {\\r\\n            td {\\r\\n                color: var(--gray16);\\r\\n                // background: none;\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\n.selected-td {\\r\\n    background: var(--selected-bg) !important;\\r\\n\\r\\n    &:hover {\\r\\n        cursor: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAG5GlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDE5LTA1LTI5VDExOjI0OjUyKzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOS0wNS0yOVQxMTozMDozOCswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOS0wNS0yOVQxMTozMDozOCswODowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpiOTBkMjk0ZS0xYzFlLWViNDYtYTJiZS0yODBkMmQxMjQzYmQiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo1MzA1MTViZi01ZDBkLTAzNGYtYTU2NC1mYzZkMmRkNGZlYTIiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpiZDMyZGQwYS04MTJmLWUzNGEtOWIwNC0xODcyNzZmOGUwODgiPiA8cGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8cmRmOkJhZz4gPHJkZjpsaT5hZG9iZTpkb2NpZDpwaG90b3Nob3A6MDEzMzlmMTQtZmQxMC1hNzRkLWJmN2QtMjE2MjllMTMxMzAxPC9yZGY6bGk+IDxyZGY6bGk+YWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmJhZDRhZTdhLTQyYWQtMjY0Zi1iNzViLTIyNTVlN2FhYWQ5YTwvcmRmOmxpPiA8L3JkZjpCYWc+IDwvcGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmJkMzJkZDBhLTgxMmYtZTM0YS05YjA0LTE4NzI3NmY4ZTA4OCIgc3RFdnQ6d2hlbj0iMjAxOS0wNS0yOVQxMToyNDo1MiswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpiOTBkMjk0ZS0xYzFlLWViNDYtYTJiZS0yODBkMmQxMjQzYmQiIHN0RXZ0OndoZW49IjIwMTktMDUtMjlUMTE6MzA6MzgrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4N9//7AAADOUlEQVRIidWWz0srVxTHvydRsTFkCAMpBIygIC4UGwKCEhdGUBe6KKYL/wQLgqQ7N7Vd1ScuXBX/ANeKu2gUBAdR0UWUYUBCNplIDERNDcyQH99utDxeM/Ps4i36hbO4cw/fz+XOOfdeIYlvKc83df8aQER8IjItIlNv4x9EZEdETkTkp7dvXhFx9iHZNgD4fD4fp6enOTU1RQA/BoNB7uzs8OTkhP39/QQw6/V66fF4CMDT1scFMDw8PMxMJsPDw0P6/X6qqsqrqyvWajX29fVxdnaWW1tbTCQSBJBo5+O2RSIiCAaDGBwcRG9vL0hCURS0Wi3Yto25uTnMz89DVVUAUP/rPyiVSiWYpolAIIBIJIJWqwWfz4dqtQpFUTAyMgLbtpHP5wHAFJF1Efn+o4BKpVJBqVRCIBDA0NAQRAR+vx+1Wg2RSAThcBjZbBa5XA4TExPa+vr6rwBSHwKQbDQajd9M04TX60UsFoOiKOju7sbLywsGBgYQDAaRzWYRCoWwsbGBVCoFAMuuABEJiUiPiAiAQqFQQLPZRCwWQyKRQEdHB0hicnIStm3j4eEBCwsLiMfjODg4AICDL1f6eeUkQ6EQe3p6KCIEkEwmkyyXy7Rtm7e3tyTJx8dHWpbF09NTplIpZjIZ3t3dMR6PE0DcsUwBHB8fH3N1dZWqqhLAzMzMDHVdZztpmsbz83M+PT1xe3ubnZ2dBNDpBtB1XadlWVxZWSGA36PRKM/OztoC6vU66/U6NU3j2NgYAYy5NhqAlfHxcebzeZbLZS4vL3NxcdER8K7NzU12dXURQNdXOxnA2traGqvVKguFAnVd5/Pzs6O5aZpcWloigKUvvZwA4XA4zOvra9dVvyudTnN0dJQARtsB/lWmJIvFYvHPi4sLWJbl1Cb/yDAM5HI5AMi1m3dqtN3d3V0YhuFq3mg0YBgGXl9ffyb5+mEASU3TtM2joyPYtu0IKBaLuL+/B4B7pxy3s2hvb28Pl5eXjgk3NzcwTRMATKecDqcJkuci8sv+/v5WNBpFq9VCs9kEAIgIPB4P0um06/6/G7ldOt8B+ATgLwAvACpv8fQ2/gNtav/zEP7fXxV/A/5C86W2KDx7AAAAAElFTkSuQmCC\\\"),\\r\\n            auto !important;\\r\\n        // cursor: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAGb2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDE5LTA1LTI0VDE1OjEyOjQ5KzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE5LTA1LTI0VDE1OjEyOjQ5KzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOS0wNS0yNFQxNToxMjo0OSswODowMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDphNGM2ZTdmZi04YWM0LTEwNDgtYjlkNS1iYTM5NzZiODhkNTkiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpiYWQ0YWU3YS00MmFkLTI2NGYtYjc1Yi0yMjU1ZTdhYWFkOWEiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo5NWUxMjJlNy1lMGVjLWQ2NDktYWQwZC04ZjA4ZGM2MDAwNDQiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo5NWUxMjJlNy1lMGVjLWQ2NDktYWQwZC04ZjA4ZGM2MDAwNDQiIHN0RXZ0OndoZW49IjIwMTktMDUtMjRUMTU6MTI6NDkrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YTRjNmU3ZmYtOGFjNC0xMDQ4LWI5ZDUtYmEzOTc2Yjg4ZDU5IiBzdEV2dDp3aGVuPSIyMDE5LTA1LTI0VDE1OjEyOjQ5KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDxyZGY6QmFnPiA8cmRmOmxpPmFkb2JlOmRvY2lkOnBob3Rvc2hvcDowMTMzOWYxNC1mZDEwLWE3NGQtYmY3ZC0yMTYyOWUxMzEzMDE8L3JkZjpsaT4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz456hG0AAADFUlEQVRIie2VzU8TQRiHf7Pbz4UQxRZaIgEhSAUaSCkEwoVE0gtqCDERvOHVA948cOI/wMTYGxc8ES9VKgcx4QAajZUEjFkbq3wGJfQDdlnC7rKvB2ixUqAc9OSTTLKZSeaZ+b377jIiwt+E+6u7/wuBKf3Q3R04snI8eJ7D5OSUV1XVuwB+lJdffrmysnoDQGl5+eWnxcUXPn3+/AUWixnt7a1IJFLY3t5GXZ0HoVD4uGBubj4zyfMmEBkdqqrOBAIBLC8vQxTFkYaGBrhcLkxNTT1cWVl9BeCKpmnfUqmtexzH1hhjx69ARCAicBwHjuPA85nUosPDw0RE+0REwWCQDjGGhoaoq6uLQqEQ9fX1EYCfgmCvaGz04s6d3syeRHQkcLtdcLtdKCtzoaTEAQCJ2dk3dALG4SAi0hnjCAABeNbW5jfnFAiCHYJgh81mQ2FhAQCsTUyETxJksbi4uB+JRKi5uZkAjPwuyOShKLtQlF04nQ4IggAA2sGhzqaiooLz+XwYGBgAgJacb1GaVCrVKkmyH8BFWZbzEqTZ2NgAgMRpgseSJN/3+/2w2+3wer0GztEr6+vrALCZNZnOijF22+l0UiwW+7OI+bLf0dFBJpNpKGeRATwfHHyQ3vzcqKpqmEwmAtCZs8gAopHIh7zz/pNwOMx0XZerqipnckZUXV3pAKD09/cTHTbXOTB6enoIwJjbXZq70Xp7b6KpyXsVwGpnZyfpup53VIqiGGazmUpLndevXavNEmQikiQZNTXV0ba2lrrp6en52tpatrm5mVcjjI09ZZqm/dA0/XUymcpaywh4nocs76CqqnK7uzvQGIvFXng8Hra0tHSWhILBIAA8cTguwWIx5xbs7CiQJBnR6Fckk1uor/fcisfj78fHxxkOWvqkgbW1VTDG3sbjCUiSlCXINFos9h1EBvb2VOi6DqvVCp7n9dHRUSwsLDDDMI4dPf15TiaTsNmsF4qKCqGqWm6B1WoFY0BBQQEYY7BYLCCiR6IofhRF8bSIGM/zus/X+K6oqBB7e2r2Iv3/6Z/BL5oAtNSvyPOCAAAAAElFTkSuQmCC\\\"), auto ! important;\\r\\n    }\\r\\n}\\r\\n\\r\\n.ghost-div {\\r\\n    position: absolute;\\r\\n    width: 70px;\\r\\n    height: 20px;\\r\\n    font-size: 10pt;\\r\\n    line-height: 20px;\\r\\n    padding: 5px 10px;\\r\\n    text-align: center;\\r\\n    z-index: 999;\\r\\n    border-radius: 3px;\\r\\n    color: var(--gray15);\\r\\n    border: 1px solid var(--gray12);\\r\\n    background: var(--gray3);\\r\\n    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);\\r\\n}\\r\\n\\r\\n.dragging-ghost-div {\\r\\n    cursor: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAGb2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDE5LTA1LTI0VDE1OjEyOjQ5KzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE5LTA1LTI0VDE1OjEyOjQ5KzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOS0wNS0yNFQxNToxMjo0OSswODowMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDphNGM2ZTdmZi04YWM0LTEwNDgtYjlkNS1iYTM5NzZiODhkNTkiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpiYWQ0YWU3YS00MmFkLTI2NGYtYjc1Yi0yMjU1ZTdhYWFkOWEiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo5NWUxMjJlNy1lMGVjLWQ2NDktYWQwZC04ZjA4ZGM2MDAwNDQiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo5NWUxMjJlNy1lMGVjLWQ2NDktYWQwZC04ZjA4ZGM2MDAwNDQiIHN0RXZ0OndoZW49IjIwMTktMDUtMjRUMTU6MTI6NDkrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YTRjNmU3ZmYtOGFjNC0xMDQ4LWI5ZDUtYmEzOTc2Yjg4ZDU5IiBzdEV2dDp3aGVuPSIyMDE5LTA1LTI0VDE1OjEyOjQ5KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDxyZGY6QmFnPiA8cmRmOmxpPmFkb2JlOmRvY2lkOnBob3Rvc2hvcDowMTMzOWYxNC1mZDEwLWE3NGQtYmY3ZC0yMTYyOWUxMzEzMDE8L3JkZjpsaT4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz456hG0AAADFUlEQVRIie2VzU8TQRiHf7Pbz4UQxRZaIgEhSAUaSCkEwoVE0gtqCDERvOHVA948cOI/wMTYGxc8ES9VKgcx4QAajZUEjFkbq3wGJfQDdlnC7rKvB2ixUqAc9OSTTLKZSeaZ+b377jIiwt+E+6u7/wuBKf3Q3R04snI8eJ7D5OSUV1XVuwB+lJdffrmysnoDQGl5+eWnxcUXPn3+/AUWixnt7a1IJFLY3t5GXZ0HoVD4uGBubj4zyfMmEBkdqqrOBAIBLC8vQxTFkYaGBrhcLkxNTT1cWVl9BeCKpmnfUqmtexzH1hhjx69ARCAicBwHjuPA85nUosPDw0RE+0REwWCQDjGGhoaoq6uLQqEQ9fX1EYCfgmCvaGz04s6d3syeRHQkcLtdcLtdKCtzoaTEAQCJ2dk3dALG4SAi0hnjCAABeNbW5jfnFAiCHYJgh81mQ2FhAQCsTUyETxJksbi4uB+JRKi5uZkAjPwuyOShKLtQlF04nQ4IggAA2sGhzqaiooLz+XwYGBgAgJacb1GaVCrVKkmyH8BFWZbzEqTZ2NgAgMRpgseSJN/3+/2w2+3wer0GztEr6+vrALCZNZnOijF22+l0UiwW+7OI+bLf0dFBJpNpKGeRATwfHHyQ3vzcqKpqmEwmAtCZs8gAopHIh7zz/pNwOMx0XZerqipnckZUXV3pAKD09/cTHTbXOTB6enoIwJjbXZq70Xp7b6KpyXsVwGpnZyfpup53VIqiGGazmUpLndevXavNEmQikiQZNTXV0ba2lrrp6en52tpatrm5mVcjjI09ZZqm/dA0/XUymcpaywh4nocs76CqqnK7uzvQGIvFXng8Hra0tHSWhILBIAA8cTguwWIx5xbs7CiQJBnR6Fckk1uor/fcisfj78fHxxkOWvqkgbW1VTDG3sbjCUiSlCXINFos9h1EBvb2VOi6DqvVCp7n9dHRUSwsLDDDMI4dPf15TiaTsNmsF4qKCqGqWm6B1WoFY0BBQQEYY7BYLCCiR6IofhRF8bSIGM/zus/X+K6oqBB7e2r2Iv3/6Z/BL5oAtNSvyPOCAAAAAElFTkSuQmCC\\\"),\\r\\n        auto !important;\\r\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".selection-rect{stroke:skyblue;fill:skyblue;fill-opacity:.2}.highlight{stroke:#1a73e8;stroke-width:3}.highlight-text{stroke:#1a73e8;stroke-width:2}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/assets/style/selection.scss\"],\"names\":[],\"mappings\":\"AAAA,gBACI,cAAA,CACA,YAAA,CACA,eAAA,CAEJ,WACI,cAAA,CACA,cAAA,CAEJ,gBACI,cAAA,CACA,cAAA\",\"sourcesContent\":[\".selection-rect {\\n    stroke: skyblue;\\n    fill: skyblue;\\n    fill-opacity: 0.2;\\n}\\n.highlight {\\n    stroke: #1a73e8;\\n    stroke-width: 3;\\n  }\\n.highlight-text {\\n    stroke: #1a73e8;\\n    stroke-width: 2;\\n}\\n\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".slider-container{float:left}.slider-container .track-passed{stroke:var(--gray12);transition:all .1s cubic-bezier(0.445, 0.05, 0.55, 0.95)}.slider-container .slider{fill:var(--gray12);stroke:var(--gray15);stroke-width:0;transition:fill .1s cubic-bezier(0.445, 0.05, 0.55, 0.95),stroke-width .1s cubic-bezier(0.445, 0.05, 0.55, 0.95)}.slider-container .hidden-slider{opacity:0}.slider-container:hover .track-passed{stroke:var(--gray15)}.slider-container:hover .slider{fill:var(--gray15);stroke-width:2}.slider-container:hover .slider:hover{cursor:pointer}.slider-container:hover .hidden-slider{opacity:1}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/assets/style/slider.scss\"],\"names\":[],\"mappings\":\"AAAA,kBACC,UAAA,CACA,gCACC,oBAAA,CACA,wDAAA,CAED,0BACC,kBAAA,CACA,oBAAA,CAEA,cAAA,CACA,gHAAA,CAGD,iCACC,SAAA,CAGA,sCACC,oBAAA,CAED,gCACC,kBAAA,CACA,cAAA,CACA,sCACC,cAAA,CAGF,uCACC,SAAA\",\"sourcesContent\":[\".slider-container {\\r\\n\\tfloat: left;\\r\\n\\t.track-passed {\\r\\n\\t\\tstroke: var(--gray12);\\r\\n\\t\\ttransition: all 0.1s cubic-bezier(0.445, 0.05, 0.55, 0.95);\\r\\n\\t}\\r\\n\\t.slider {\\r\\n\\t\\tfill: var(--gray12);\\r\\n\\t\\tstroke: var(--gray15);\\r\\n\\t\\t// stroke: var(--highlight-blue);\\r\\n\\t\\tstroke-width: 0;\\r\\n\\t\\ttransition: fill 0.1s cubic-bezier(0.445, 0.05, 0.55, 0.95),\\r\\n\\t\\t\\tstroke-width 0.1s cubic-bezier(0.445, 0.05, 0.55, 0.95);\\r\\n\\t}\\r\\n\\t.hidden-slider {\\r\\n\\t\\topacity: 0;\\r\\n\\t}\\r\\n\\t&:hover {\\r\\n\\t\\t.track-passed {\\r\\n\\t\\t\\tstroke: var(--gray15);\\r\\n\\t\\t}\\r\\n\\t\\t.slider {\\r\\n\\t\\t\\tfill: var(--gray15);\\r\\n\\t\\t\\tstroke-width: 2;\\r\\n\\t\\t\\t&:hover {\\r\\n\\t\\t\\t\\tcursor: pointer;\\r\\n\\t\\t\\t}\\r\\n\\t\\t}\\r\\n\\t\\t.hidden-slider {\\r\\n\\t\\t\\topacity: 1;\\r\\n\\t\\t}\\r\\n\\t}\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/getUrl.js\";\nvar ___CSS_LOADER_URL_IMPORT_0___ = new URL(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAG5GlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDE5LTA1LTI5VDExOjI0OjUyKzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOS0wNS0yOVQxMTozMDozOCswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOS0wNS0yOVQxMTozMDozOCswODowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpiOTBkMjk0ZS0xYzFlLWViNDYtYTJiZS0yODBkMmQxMjQzYmQiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo1MzA1MTViZi01ZDBkLTAzNGYtYTU2NC1mYzZkMmRkNGZlYTIiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpiZDMyZGQwYS04MTJmLWUzNGEtOWIwNC0xODcyNzZmOGUwODgiPiA8cGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8cmRmOkJhZz4gPHJkZjpsaT5hZG9iZTpkb2NpZDpwaG90b3Nob3A6MDEzMzlmMTQtZmQxMC1hNzRkLWJmN2QtMjE2MjllMTMxMzAxPC9yZGY6bGk+IDxyZGY6bGk+YWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmJhZDRhZTdhLTQyYWQtMjY0Zi1iNzViLTIyNTVlN2FhYWQ5YTwvcmRmOmxpPiA8L3JkZjpCYWc+IDwvcGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmJkMzJkZDBhLTgxMmYtZTM0YS05YjA0LTE4NzI3NmY4ZTA4OCIgc3RFdnQ6d2hlbj0iMjAxOS0wNS0yOVQxMToyNDo1MiswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpiOTBkMjk0ZS0xYzFlLWViNDYtYTJiZS0yODBkMmQxMjQzYmQiIHN0RXZ0OndoZW49IjIwMTktMDUtMjlUMTE6MzA6MzgrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4N9//7AAADOUlEQVRIidWWz0srVxTHvydRsTFkCAMpBIygIC4UGwKCEhdGUBe6KKYL/wQLgqQ7N7Vd1ScuXBX/ANeKu2gUBAdR0UWUYUBCNplIDERNDcyQH99utDxeM/Ps4i36hbO4cw/fz+XOOfdeIYlvKc83df8aQER8IjItIlNv4x9EZEdETkTkp7dvXhFx9iHZNgD4fD4fp6enOTU1RQA/BoNB7uzs8OTkhP39/QQw6/V66fF4CMDT1scFMDw8PMxMJsPDw0P6/X6qqsqrqyvWajX29fVxdnaWW1tbTCQSBJBo5+O2RSIiCAaDGBwcRG9vL0hCURS0Wi3Yto25uTnMz89DVVUAUP/rPyiVSiWYpolAIIBIJIJWqwWfz4dqtQpFUTAyMgLbtpHP5wHAFJF1Efn+o4BKpVJBqVRCIBDA0NAQRAR+vx+1Wg2RSAThcBjZbBa5XA4TExPa+vr6rwBSHwKQbDQajd9M04TX60UsFoOiKOju7sbLywsGBgYQDAaRzWYRCoWwsbGBVCoFAMuuABEJiUiPiAiAQqFQQLPZRCwWQyKRQEdHB0hicnIStm3j4eEBCwsLiMfjODg4AICDL1f6eeUkQ6EQe3p6KCIEkEwmkyyXy7Rtm7e3tyTJx8dHWpbF09NTplIpZjIZ3t3dMR6PE0DcsUwBHB8fH3N1dZWqqhLAzMzMDHVdZztpmsbz83M+PT1xe3ubnZ2dBNDpBtB1XadlWVxZWSGA36PRKM/OztoC6vU66/U6NU3j2NgYAYy5NhqAlfHxcebzeZbLZS4vL3NxcdER8K7NzU12dXURQNdXOxnA2traGqvVKguFAnVd5/Pzs6O5aZpcWloigKUvvZwA4XA4zOvra9dVvyudTnN0dJQARtsB/lWmJIvFYvHPi4sLWJbl1Cb/yDAM5HI5AMi1m3dqtN3d3V0YhuFq3mg0YBgGXl9ffyb5+mEASU3TtM2joyPYtu0IKBaLuL+/B4B7pxy3s2hvb28Pl5eXjgk3NzcwTRMATKecDqcJkuci8sv+/v5WNBpFq9VCs9kEAIgIPB4P0um06/6/G7ldOt8B+ATgLwAvACpv8fQ2/gNtav/zEP7fXxV/A/5C86W2KDx7AAAAAElFTkSuQmCC\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_1___ = new URL(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAGb2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDE5LTA1LTI0VDE1OjEyOjQ5KzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE5LTA1LTI0VDE1OjEyOjQ5KzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOS0wNS0yNFQxNToxMjo0OSswODowMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDphNGM2ZTdmZi04YWM0LTEwNDgtYjlkNS1iYTM5NzZiODhkNTkiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpiYWQ0YWU3YS00MmFkLTI2NGYtYjc1Yi0yMjU1ZTdhYWFkOWEiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo5NWUxMjJlNy1lMGVjLWQ2NDktYWQwZC04ZjA4ZGM2MDAwNDQiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo5NWUxMjJlNy1lMGVjLWQ2NDktYWQwZC04ZjA4ZGM2MDAwNDQiIHN0RXZ0OndoZW49IjIwMTktMDUtMjRUMTU6MTI6NDkrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YTRjNmU3ZmYtOGFjNC0xMDQ4LWI5ZDUtYmEzOTc2Yjg4ZDU5IiBzdEV2dDp3aGVuPSIyMDE5LTA1LTI0VDE1OjEyOjQ5KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDxyZGY6QmFnPiA8cmRmOmxpPmFkb2JlOmRvY2lkOnBob3Rvc2hvcDowMTMzOWYxNC1mZDEwLWE3NGQtYmY3ZC0yMTYyOWUxMzEzMDE8L3JkZjpsaT4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz456hG0AAADFUlEQVRIie2VzU8TQRiHf7Pbz4UQxRZaIgEhSAUaSCkEwoVE0gtqCDERvOHVA948cOI/wMTYGxc8ES9VKgcx4QAajZUEjFkbq3wGJfQDdlnC7rKvB2ixUqAc9OSTTLKZSeaZ+b377jIiwt+E+6u7/wuBKf3Q3R04snI8eJ7D5OSUV1XVuwB+lJdffrmysnoDQGl5+eWnxcUXPn3+/AUWixnt7a1IJFLY3t5GXZ0HoVD4uGBubj4zyfMmEBkdqqrOBAIBLC8vQxTFkYaGBrhcLkxNTT1cWVl9BeCKpmnfUqmtexzH1hhjx69ARCAicBwHjuPA85nUosPDw0RE+0REwWCQDjGGhoaoq6uLQqEQ9fX1EYCfgmCvaGz04s6d3syeRHQkcLtdcLtdKCtzoaTEAQCJ2dk3dALG4SAi0hnjCAABeNbW5jfnFAiCHYJgh81mQ2FhAQCsTUyETxJksbi4uB+JRKi5uZkAjPwuyOShKLtQlF04nQ4IggAA2sGhzqaiooLz+XwYGBgAgJacb1GaVCrVKkmyH8BFWZbzEqTZ2NgAgMRpgseSJN/3+/2w2+3wer0GztEr6+vrALCZNZnOijF22+l0UiwW+7OI+bLf0dFBJpNpKGeRATwfHHyQ3vzcqKpqmEwmAtCZs8gAopHIh7zz/pNwOMx0XZerqipnckZUXV3pAKD09/cTHTbXOTB6enoIwJjbXZq70Xp7b6KpyXsVwGpnZyfpup53VIqiGGazmUpLndevXavNEmQikiQZNTXV0ba2lrrp6en52tpatrm5mVcjjI09ZZqm/dA0/XUymcpaywh4nocs76CqqnK7uzvQGIvFXng8Hra0tHSWhILBIAA8cTguwWIx5xbs7CiQJBnR6Fckk1uor/fcisfj78fHxxkOWvqkgbW1VTDG3sbjCUiSlCXINFos9h1EBvb2VOi6DqvVCp7n9dHRUSwsLDDDMI4dPf15TiaTsNmsF4qKCqGqWm6B1WoFY0BBQQEYY7BYLCCiR6IofhRF8bSIGM/zus/X+K6oqBB7e2r2Iv3/6Z/BL5oAtNSvyPOCAAAAAElFTkSuQmCC\", import.meta.url);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\nvar ___CSS_LOADER_URL_REPLACEMENT_1___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_1___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".svg-table-cell-container{cursor:url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \"),auto}.svg-table-cell-container rect{fill:var(--gray3);stroke:var(--gray5);stroke-width:1}.svg-table-cell-container text{font-size:10pt;fill:var(--gray15)}.svg-table-cell-container:hover rect{fill:var(--gray5)}.being-selected rect{fill:var(--highlight-blue)}.being-dragging{cursor:url(\" + ___CSS_LOADER_URL_REPLACEMENT_1___ + \"),auto}.being-dragging rect{fill:var(--gray7)}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/assets/style/sortableSvgTable.scss\"],\"names\":[],\"mappings\":\"AAAA,0BACI,mDAAA,CAEA,+BACI,iBAAA,CACA,mBAAA,CACA,cAAA,CAEJ,+BACI,cAAA,CACA,kBAAA,CAGA,qCACI,iBAAA,CAMR,qBACI,0BAAA,CAIR,gBACI,mDAAA,CAEA,qBACI,iBAAA\",\"sourcesContent\":[\".svg-table-cell-container {\\r\\n    cursor: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAG5GlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDE5LTA1LTI5VDExOjI0OjUyKzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOS0wNS0yOVQxMTozMDozOCswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOS0wNS0yOVQxMTozMDozOCswODowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpiOTBkMjk0ZS0xYzFlLWViNDYtYTJiZS0yODBkMmQxMjQzYmQiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo1MzA1MTViZi01ZDBkLTAzNGYtYTU2NC1mYzZkMmRkNGZlYTIiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpiZDMyZGQwYS04MTJmLWUzNGEtOWIwNC0xODcyNzZmOGUwODgiPiA8cGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8cmRmOkJhZz4gPHJkZjpsaT5hZG9iZTpkb2NpZDpwaG90b3Nob3A6MDEzMzlmMTQtZmQxMC1hNzRkLWJmN2QtMjE2MjllMTMxMzAxPC9yZGY6bGk+IDxyZGY6bGk+YWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmJhZDRhZTdhLTQyYWQtMjY0Zi1iNzViLTIyNTVlN2FhYWQ5YTwvcmRmOmxpPiA8L3JkZjpCYWc+IDwvcGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmJkMzJkZDBhLTgxMmYtZTM0YS05YjA0LTE4NzI3NmY4ZTA4OCIgc3RFdnQ6d2hlbj0iMjAxOS0wNS0yOVQxMToyNDo1MiswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpiOTBkMjk0ZS0xYzFlLWViNDYtYTJiZS0yODBkMmQxMjQzYmQiIHN0RXZ0OndoZW49IjIwMTktMDUtMjlUMTE6MzA6MzgrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4N9//7AAADOUlEQVRIidWWz0srVxTHvydRsTFkCAMpBIygIC4UGwKCEhdGUBe6KKYL/wQLgqQ7N7Vd1ScuXBX/ANeKu2gUBAdR0UWUYUBCNplIDERNDcyQH99utDxeM/Ps4i36hbO4cw/fz+XOOfdeIYlvKc83df8aQER8IjItIlNv4x9EZEdETkTkp7dvXhFx9iHZNgD4fD4fp6enOTU1RQA/BoNB7uzs8OTkhP39/QQw6/V66fF4CMDT1scFMDw8PMxMJsPDw0P6/X6qqsqrqyvWajX29fVxdnaWW1tbTCQSBJBo5+O2RSIiCAaDGBwcRG9vL0hCURS0Wi3Yto25uTnMz89DVVUAUP/rPyiVSiWYpolAIIBIJIJWqwWfz4dqtQpFUTAyMgLbtpHP5wHAFJF1Efn+o4BKpVJBqVRCIBDA0NAQRAR+vx+1Wg2RSAThcBjZbBa5XA4TExPa+vr6rwBSHwKQbDQajd9M04TX60UsFoOiKOju7sbLywsGBgYQDAaRzWYRCoWwsbGBVCoFAMuuABEJiUiPiAiAQqFQQLPZRCwWQyKRQEdHB0hicnIStm3j4eEBCwsLiMfjODg4AICDL1f6eeUkQ6EQe3p6KCIEkEwmkyyXy7Rtm7e3tyTJx8dHWpbF09NTplIpZjIZ3t3dMR6PE0DcsUwBHB8fH3N1dZWqqhLAzMzMDHVdZztpmsbz83M+PT1xe3ubnZ2dBNDpBtB1XadlWVxZWSGA36PRKM/OztoC6vU66/U6NU3j2NgYAYy5NhqAlfHxcebzeZbLZS4vL3NxcdER8K7NzU12dXURQNdXOxnA2traGqvVKguFAnVd5/Pzs6O5aZpcWloigKUvvZwA4XA4zOvra9dVvyudTnN0dJQARtsB/lWmJIvFYvHPi4sLWJbl1Cb/yDAM5HI5AMi1m3dqtN3d3V0YhuFq3mg0YBgGXl9ffyb5+mEASU3TtM2joyPYtu0IKBaLuL+/B4B7pxy3s2hvb28Pl5eXjgk3NzcwTRMATKecDqcJkuci8sv+/v5WNBpFq9VCs9kEAIgIPB4P0um06/6/G7ldOt8B+ATgLwAvACpv8fQ2/gNtav/zEP7fXxV/A/5C86W2KDx7AAAAAElFTkSuQmCC\\\"),\\r\\n        auto;\\r\\n    rect {\\r\\n        fill: var(--gray3);\\r\\n        stroke: var(--gray5);\\r\\n        stroke-width: 1;\\r\\n    }\\r\\n    text {\\r\\n        font-size: 10pt;\\r\\n        fill: var(--gray15);\\r\\n    }\\r\\n    &:hover {\\r\\n        rect {\\r\\n            fill: var(--gray5);\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\n.being-selected {\\r\\n    rect {\\r\\n        fill: var(--highlight-blue);\\r\\n    }\\r\\n}\\r\\n\\r\\n.being-dragging {\\r\\n    cursor: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAGb2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDE5LTA1LTI0VDE1OjEyOjQ5KzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE5LTA1LTI0VDE1OjEyOjQ5KzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOS0wNS0yNFQxNToxMjo0OSswODowMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDphNGM2ZTdmZi04YWM0LTEwNDgtYjlkNS1iYTM5NzZiODhkNTkiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpiYWQ0YWU3YS00MmFkLTI2NGYtYjc1Yi0yMjU1ZTdhYWFkOWEiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo5NWUxMjJlNy1lMGVjLWQ2NDktYWQwZC04ZjA4ZGM2MDAwNDQiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo5NWUxMjJlNy1lMGVjLWQ2NDktYWQwZC04ZjA4ZGM2MDAwNDQiIHN0RXZ0OndoZW49IjIwMTktMDUtMjRUMTU6MTI6NDkrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YTRjNmU3ZmYtOGFjNC0xMDQ4LWI5ZDUtYmEzOTc2Yjg4ZDU5IiBzdEV2dDp3aGVuPSIyMDE5LTA1LTI0VDE1OjEyOjQ5KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDxyZGY6QmFnPiA8cmRmOmxpPmFkb2JlOmRvY2lkOnBob3Rvc2hvcDowMTMzOWYxNC1mZDEwLWE3NGQtYmY3ZC0yMTYyOWUxMzEzMDE8L3JkZjpsaT4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz456hG0AAADFUlEQVRIie2VzU8TQRiHf7Pbz4UQxRZaIgEhSAUaSCkEwoVE0gtqCDERvOHVA948cOI/wMTYGxc8ES9VKgcx4QAajZUEjFkbq3wGJfQDdlnC7rKvB2ixUqAc9OSTTLKZSeaZ+b377jIiwt+E+6u7/wuBKf3Q3R04snI8eJ7D5OSUV1XVuwB+lJdffrmysnoDQGl5+eWnxcUXPn3+/AUWixnt7a1IJFLY3t5GXZ0HoVD4uGBubj4zyfMmEBkdqqrOBAIBLC8vQxTFkYaGBrhcLkxNTT1cWVl9BeCKpmnfUqmtexzH1hhjx69ARCAicBwHjuPA85nUosPDw0RE+0REwWCQDjGGhoaoq6uLQqEQ9fX1EYCfgmCvaGz04s6d3syeRHQkcLtdcLtdKCtzoaTEAQCJ2dk3dALG4SAi0hnjCAABeNbW5jfnFAiCHYJgh81mQ2FhAQCsTUyETxJksbi4uB+JRKi5uZkAjPwuyOShKLtQlF04nQ4IggAA2sGhzqaiooLz+XwYGBgAgJacb1GaVCrVKkmyH8BFWZbzEqTZ2NgAgMRpgseSJN/3+/2w2+3wer0GztEr6+vrALCZNZnOijF22+l0UiwW+7OI+bLf0dFBJpNpKGeRATwfHHyQ3vzcqKpqmEwmAtCZs8gAopHIh7zz/pNwOMx0XZerqipnckZUXV3pAKD09/cTHTbXOTB6enoIwJjbXZq70Xp7b6KpyXsVwGpnZyfpup53VIqiGGazmUpLndevXavNEmQikiQZNTXV0ba2lrrp6en52tpatrm5mVcjjI09ZZqm/dA0/XUymcpaywh4nocs76CqqnK7uzvQGIvFXng8Hra0tHSWhILBIAA8cTguwWIx5xbs7CiQJBnR6Fckk1uor/fcisfj78fHxxkOWvqkgbW1VTDG3sbjCUiSlCXINFos9h1EBvb2VOi6DqvVCp7n9dHRUSwsLDDDMI4dPf15TiaTsNmsF4qKCqGqWm6B1WoFY0BBQQEYY7BYLCCiR6IofhRF8bSIGM/zus/X+K6oqBB7e2r2Iv3/6Z/BL5oAtNSvyPOCAAAAAElFTkSuQmCC\\\"),\\r\\n        auto;\\r\\n    rect {\\r\\n        fill: var(--gray7);\\r\\n    }\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".normal-btn{fill:#e5e5e5}.normal-btn:hover{fill:#494949}.highlight-btn{fill:#494949}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/assets/style/suggestBox.scss\"],\"names\":[],\"mappings\":\"AAAA,YACI,YAAA,CACA,kBACI,YAAA,CAIR,eACI,YAAA\",\"sourcesContent\":[\".normal-btn {\\r\\n    fill: #e5e5e5;\\r\\n    &:hover {\\r\\n        fill: #494949;\\r\\n    }\\r\\n}\\r\\n\\r\\n.highlight-btn {\\r\\n    fill: #494949;\\r\\n}\\r\\n\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","// Imports\nimport ___CSS_LOADER_API_SOURCEMAP_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/sourceMaps.js\";\nimport ___CSS_LOADER_API_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/api.js\";\nimport ___CSS_LOADER_GET_URL_IMPORT___ from \"../../../node_modules/css-loader/dist/runtime/getUrl.js\";\nvar ___CSS_LOADER_URL_IMPORT_0___ = new URL(\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuWbvuWxgl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDI2MCAyNjAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDI2MCAyNjA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGUgdHlwZT0idGV4dC9jc3MiPi5zdDB7ZmlsbDpub25lO3N0cm9rZTojRkZGRkZGO3N0cm9rZS13aWR0aDoxMDtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxMDt9LnN0MXtmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjg7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6MTA7fS5zdDJ7ZmlsbDojRkZGRkZGO30uc3Qze3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxNjtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6MTA7fTwvc3R5bGU+PHBhdGggZD0iTS0xODUuNiw2MC4zYy0xMi0zNy41LTc2LjgtNTAuMy0xNDQuNy0yOC41Uy00NDMuNSwxMDEuNS00MzEuNSwxMzljMTIsMzcuNSw3Ni44LDUwLjMsMTQ0LjcsMjguNUMtMjE4LjksMTQ1LjgtMTczLjYsOTcuOC0xODUuNiw2MC4zeiBNLTI5MC43LDE1NC4xYy01Ny40LDE4LjQtMTExLjUsOS4zLTEyMS0yMC4yYy05LjQtMjkuNSwyOS40LTY4LjMsODYuOC04Ni43YzU3LjQtMTguNCwxMTEuNS05LjMsMTIxLDIwLjJDLTE5NC41LDk2LjktMjMzLjQsMTM1LjctMjkwLjcsMTU0LjF6Ii8+PGltYWdlIHN0eWxlPSJvdmVyZmxvdzp2aXNpYmxlOyIgd2lkdGg9IjE4MiIgaGVpZ2h0PSIxNzUiIHhsaW5rOmhyZWY9IkE5NDdDNkJGLmpwZyIgIHRyYW5zZm9ybT0ibWF0cml4KDAuNzQ5OSAwIDAgMC43NDk5IDI3OS42NzIxIDY5LjQ2NTcpIj48L2ltYWdlPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0tMzc2LjQsMTg5LjFjMC45LTAuNSwyLjItMSwzLjctMS4zYzguMS0xLjcsMTguMiwzLjEsMjIuOSwxMS41YzMuNCw2LDUuNCwxNi4zLTAuNywyMy40Yy00LjYsNS4yLTExLjIsNS45LTEzLDYiLz48cGF0aCBjbGFzcz0ic3QxIiBkPSJNLTM3Ni40LDE4OS4xYzAuOS0wLjUsMi4yLTEsMy43LTEuM2M4LjEtMS43LDE4LjIsMy4xLDIyLjksMTEuNWMzLjQsNiw1LjQsMTYuMy0wLjcsMjMuNGMtNC42LDUuMi0xMS4yLDUuOS0xMyw2Ii8+PGc+PHBvbHlnb24gcG9pbnRzPSItMTMzLjYsMy43IC00OS44LDg4IC05Ni4xLDgzIC0xMjMuMiwxMjAuNSAiLz48cGF0aCBjbGFzcz0ic3QyIiBkPSJNLTEzMyw1YzI3LjMsMjcuNCw1NC41LDU0LjgsODEuOCw4Mi4zYy0xNS0xLjYtMzAuMS0zLjItNDUuMS00LjljLTguOCwxMi4yLTE3LjcsMjQuNS0yNi41LDM2LjdDLTEyNi4yLDgxLjEtMTI5LjYsNDMuMS0xMzMsNSBNLTEzNC4yLDIuNGwwLjIsMi44bDEwLjIsMTE0LjFsMC4yLDIuN2wxLjYtMi4ybDEzLjMtMTguNGwxMi45LTE3LjlsMTUuNSwxLjdsMjksMy4xbDIuOCwwLjNsLTItMmwtMC45LTAuOWwtODEtODEuNEwtMTM0LjIsMi40TC0xMzQuMiwyLjR6Ii8+PC9nPjxnPjxwYXRoIGQ9Ik0tNTkuOCwxOTkuN2MtMTYuOSwwLTMwLjYtMTEuMy0zMC42LTI1LjNzMTMuNy0yNS4zLDMwLjYtMjUuM3MzMC42LDExLjMsMzAuNiwyNS4zUy00Mi45LDE5OS43LTU5LjgsMTk5Ljd6IE0tNTkuOCwxNTMuOWMtMTMuOCwwLTI1LDkuMi0yNSwyMC41YzAsMTEuMywxMS4yLDIwLjUsMjUsMjAuNXMyNS05LjIsMjUtMjAuNUMtMzQuOCwxNjMuMS00NiwxNTMuOS01OS44LDE1My45eiIvPjxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik0tNTkuOCwxNDkuNmMxNi42LDAsMzAuMSwxMS4xLDMwLjEsMjQuOGMwLDEzLjctMTMuNSwyNC44LTMwLjEsMjQuOFMtOTAsMTg4LjEtOTAsMTc0LjRDLTkwLDE2MC43LTc2LjUsMTQ5LjYtNTkuOCwxNDkuNiBNLTU5LjgsMTk1LjRjMTQuMSwwLDI1LjUtOS40LDI1LjUtMjFzLTExLjQtMjEtMjUuNS0yMXMtMjUuNSw5LjQtMjUuNSwyMVMtNzMuOSwxOTUuNC01OS44LDE5NS40IE0tNTkuOCwxNDguNmMtMTcuMiwwLTMxLjEsMTEuNi0zMS4xLDI1LjhzMTQsMjUuOCwzMS4xLDI1LjhzMzEuMS0xMS42LDMxLjEtMjUuOFMtNDIuNywxNDguNi01OS44LDE0OC42TC01OS44LDE0OC42eiBNLTU5LjgsMTk0LjRjLTEzLjUsMC0yNC41LTktMjQuNS0yMGMwLTExLDExLTIwLDI0LjUtMjBzMjQuNSw5LDI0LjUsMjBDLTM1LjMsMTg1LjQtNDYuMywxOTQuNC01OS44LDE5NC40TC01OS44LDE5NC40eiIvPjwvZz48Zz48cGF0aCBkPSJNLTM2Ny4yLDIwMS4yYy0yMS42LDAtMzkuMy0xNC42LTM5LjMtMzIuNXMxNy42LTMyLjUsMzkuMy0zMi41czM5LjMsMTQuNiwzOS4zLDMyLjVTLTM0NS42LDIwMS4yLTM2Ny4yLDIwMS4yeiBNLTM2Ny4yLDE0Ny42Yy0xNC4yLDAtMjUuNyw5LjUtMjUuNywyMS4yczExLjUsMjEuMiwyNS43LDIxLjJzMjUuNy05LjUsMjUuNy0yMS4yUy0zNTMsMTQ3LjYtMzY3LjIsMTQ3LjZ6Ii8+PHBhdGggY2xhc3M9InN0MiIgZD0iTS0zNjcuMiwxMzYuOGMyMS40LDAsMzguOCwxNC4zLDM4LjgsMzJzLTE3LjMsMzItMzguOCwzMnMtMzguOC0xNC4zLTM4LjgtMzJTLTM4OC42LDEzNi44LTM2Ny4yLDEzNi44IE0tMzY3LjIsMTkwLjRjMTQuNSwwLDI2LjItOS43LDI2LjItMjEuN3MtMTEuOC0yMS43LTI2LjItMjEuN3MtMjYuMiw5LjctMjYuMiwyMS43Uy0zODEuNywxOTAuNC0zNjcuMiwxOTAuNCBNLTM2Ny4yLDEzNS44Yy0yMS45LDAtMzkuOCwxNC44LTM5LjgsMzNzMTcuOCwzMywzOS44LDMzYzIxLjksMCwzOS44LTE0LjgsMzkuOC0zM1MtMzQ1LjMsMTM1LjgtMzY3LjIsMTM1LjhMLTM2Ny4yLDEzNS44eiBNLTM2Ny4yLDE4OS40Yy0xMy45LDAtMjUuMi05LjMtMjUuMi0yMC43czExLjMtMjAuNywyNS4yLTIwLjdzMjUuMiw5LjMsMjUuMiwyMC43Uy0zNTMuMywxODkuNC0zNjcuMiwxODkuNEwtMzY3LjIsMTg5LjR6Ii8+PC9nPjxnPjxwYXRoIGQ9Ik02MzYsMzQuNWgtMjZ2MTRoMjZWMzQuNUw2MzYsMzQuNXogTTU5NCwzNC41aC0yNnYxNGgyNlYzNC41TDU5NCwzNC41eiBNNTUyLDM0LjVoLTI2djE0aDI2VjM0LjVMNTUyLDM0LjV6IE01MTAsMzQuNWgtMjZ2MTRoMjZWMzQuNUw1MTAsMzQuNXogTTQ2OCwzNC41aC0xOHYxNGgxOFYzNC41TDQ2OCwzNC41eiBNNDY0LDU4LjVoLTE0djI2aDE0VjU4LjVMNDY0LDU4LjV6IE00NjQsMTAwLjVoLTE0djI2aDE0VjEwMC41TDQ2NCwxMDAuNXogTTQ2NCwxNDIuNWgtMTR2MjZoMTRWMTQyLjVMNDY0LDE0Mi41eiBNNDY0LDE4NC41aC0xNHYyNmgxNFYxODQuNUw0NjQsMTg0LjV6IE00NjYuOSwyMjEuNkg0NTB2NC45bDAsMHYtNC45djQuOWwwLDB2OS4xaDE0bDAsMGwwLDBsMCwwbDAsMGMxLjcsMCwyLjksMCwyLjksMFYyMjEuNkw0NjYuOSwyMjEuNnogTTUwOC45LDIyMS42aC0yNnYxNGgyNlYyMjEuNkw1MDguOSwyMjEuNnogTTU1MC45LDIyMS42aC0yNnYxNGgyNlYyMjEuNkw1NTAuOSwyMjEuNnogTTU5Mi45LDIyMS42aC0yNnYxNGgyNlYyMjEuNkw1OTIuOSwyMjEuNnogTTYzNC45LDIyMS42aC0yNnYxNGgyNlYyMjEuNkw2MzQuOSwyMjEuNnogTTY3Ni45LDIyMS42aC0yNnYxNGgyNlYyMjEuNkw2NzYuOSwyMjEuNnogTTY3OCwxOTQuOGgtMTR2MjZoMTRWMTk0LjhMNjc4LDE5NC44eiBNNjc4LDE1Mi44aC0xNHYyNmgxNFYxNTIuOEw2NzgsMTUyLjh6IE02NzgsMTEwLjhoLTE0djI2aDE0VjExMC44TDY3OCwxMTAuOHogTTY3OCw2OC44aC0xNHYyNmgxNFY2OC44TDY3OCw2OC44eiBNNjc4LDM0LjVoLTI2djE0aDEydjQuMmgxNFYzNC41TDY3OCwzNC41eiIvPjwvZz48aW1hZ2Ugc3R5bGU9Im92ZXJmbG93OnZpc2libGU7IiB3aWR0aD0iMzEyIiBoZWlnaHQ9IjM4NiIgeGxpbms6aHJlZj0iQTk0N0M2QkQuanBnIiAgdHJhbnNmb3JtPSJtYXRyaXgoMC41NzM3IDAgMCAwLjU3MzcgLTM2MS40ODk3IDUxLjM1NjkpIj48L2ltYWdlPjxwYXRoIGNsYXNzPSJzdDMiIGQ9Ik04My45LDQzTDgzLjksNDNjMCwwLDAuMSwzNy4xLDAuNSwxNDEuNGMxMS40LTkuMiwyMi44LTE4LjQsMzQuMy0yNy41YzEwLjcsMTkuNCwyMS4zLDM4LjcsMzIsNTguMWM2LjktNC4zLDEzLjgtOC42LDIwLjctMTIuOWMtMTAuMS0xOC43LTIwLjMtMzcuMy0zMC40LTU2YzE3LjEtMi45LDM0LjEtNS43LDUxLjItOC42QzE1NiwxMDYuMSwxMjAsNzQuNSw4My45LDQzeiIvPjwvc3ZnPg==\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_1___ = new URL(\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuWbvuWxgl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDI2MCAyNjAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDI2MCAyNjA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGUgdHlwZT0idGV4dC9jc3MiPi5zdDB7ZmlsbDpub25lO3N0cm9rZTojRkZGRkZGO3N0cm9rZS13aWR0aDoxMDtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxMDt9LnN0MXtmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjg7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6MTA7fS5zdDJ7ZmlsbDojRkZGRkZGO308L3N0eWxlPjxwYXRoIGQ9Ik0yNTQuOCw2MC4zYy0xMi0zNy41LTc2LjgtNTAuMy0xNDQuNy0yOC41Uy0zLjEsMTAxLjUsOC45LDEzOWMxMiwzNy41LDc2LjgsNTAuMywxNDQuNywyOC41QzIyMS41LDE0NS44LDI2Ni44LDk3LjgsMjU0LjgsNjAuM3ogTTE0OS43LDE1NC4xYy01Ny40LDE4LjQtMTExLjUsOS4zLTEyMS0yMC4yYy05LjQtMjkuNSwyOS40LTY4LjMsODYuOC04Ni43YzU3LjQtMTguNCwxMTEuNS05LjMsMTIxLDIwLjJDMjQ1LjksOTYuOSwyMDcuMSwxMzUuNywxNDkuNywxNTQuMXoiLz48aW1hZ2Ugc3R5bGU9Im92ZXJmbG93OnZpc2libGU7IiB3aWR0aD0iMTgyIiBoZWlnaHQ9IjE3NSIgeGxpbms6aHJlZj0iRkJFRDYwNzIuanBnIiAgdHJhbnNmb3JtPSJtYXRyaXgoMC43NDk5IDAgMCAwLjc0OTkgMjc5LjY3MjEgNjkuNDY1NykiPjwvaW1hZ2U+PHBhdGggY2xhc3M9InN0MCIgZD0iTTY0LDE4OS4xYzAuOS0wLjUsMi4yLTEsMy43LTEuM2M4LjEtMS43LDE4LjIsMy4xLDIyLjksMTEuNWMzLjQsNiw1LjQsMTYuMy0wLjcsMjMuNGMtNC42LDUuMi0xMS4yLDUuOS0xMyw2Ii8+PHBhdGggY2xhc3M9InN0MSIgZD0iTTY0LDE4OS4xYzAuOS0wLjUsMi4yLTEsMy43LTEuM2M4LjEtMS43LDE4LjIsMy4xLDIyLjksMTEuNWMzLjQsNiw1LjQsMTYuMy0wLjcsMjMuNGMtNC42LDUuMi0xMS4yLDUuOS0xMyw2Ii8+PGc+PHBvbHlnb24gcG9pbnRzPSItMTMzLjYsMy43IC00OS44LDg4IC05Ni4xLDgzIC0xMjMuMiwxMjAuNSAiLz48cGF0aCBjbGFzcz0ic3QyIiBkPSJNLTEzMyw1YzI3LjMsMjcuNCw1NC41LDU0LjgsODEuOCw4Mi4zYy0xNS0xLjYtMzAuMS0zLjItNDUuMS00LjljLTguOCwxMi4yLTE3LjcsMjQuNS0yNi41LDM2LjdDLTEyNi4yLDgxLjEtMTI5LjYsNDMuMS0xMzMsNSBNLTEzNC4yLDIuNGwwLjIsMi44bDEwLjIsMTE0LjFsMC4yLDIuN2wxLjYtMi4ybDEzLjMtMTguNGwxMi45LTE3LjlsMTUuNSwxLjdsMjksMy4xbDIuOCwwLjNsLTItMmwtMC45LTAuOWwtODEtODEuNEwtMTM0LjIsMi40TC0xMzQuMiwyLjR6Ii8+PC9nPjxnPjxwYXRoIGQ9Ik0tNTkuOCwxOTkuN2MtMTYuOSwwLTMwLjYtMTEuMy0zMC42LTI1LjNzMTMuNy0yNS4zLDMwLjYtMjUuM3MzMC42LDExLjMsMzAuNiwyNS4zUy00Mi45LDE5OS43LTU5LjgsMTk5Ljd6IE0tNTkuOCwxNTMuOWMtMTMuOCwwLTI1LDkuMi0yNSwyMC41YzAsMTEuMywxMS4yLDIwLjUsMjUsMjAuNXMyNS05LjIsMjUtMjAuNUMtMzQuOCwxNjMuMS00NiwxNTMuOS01OS44LDE1My45eiIvPjxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik0tNTkuOCwxNDkuNmMxNi42LDAsMzAuMSwxMS4xLDMwLjEsMjQuOGMwLDEzLjctMTMuNSwyNC44LTMwLjEsMjQuOFMtOTAsMTg4LjEtOTAsMTc0LjRDLTkwLDE2MC43LTc2LjUsMTQ5LjYtNTkuOCwxNDkuNiBNLTU5LjgsMTk1LjRjMTQuMSwwLDI1LjUtOS40LDI1LjUtMjFzLTExLjQtMjEtMjUuNS0yMXMtMjUuNSw5LjQtMjUuNSwyMVMtNzMuOSwxOTUuNC01OS44LDE5NS40IE0tNTkuOCwxNDguNmMtMTcuMiwwLTMxLjEsMTEuNi0zMS4xLDI1LjhzMTQsMjUuOCwzMS4xLDI1LjhzMzEuMS0xMS42LDMxLjEtMjUuOFMtNDIuNywxNDguNi01OS44LDE0OC42TC01OS44LDE0OC42eiBNLTU5LjgsMTk0LjRjLTEzLjUsMC0yNC41LTktMjQuNS0yMGMwLTExLDExLTIwLDI0LjUtMjBzMjQuNSw5LDI0LjUsMjBDLTM1LjMsMTg1LjQtNDYuMywxOTQuNC01OS44LDE5NC40TC01OS44LDE5NC40eiIvPjwvZz48Zz48cGF0aCBkPSJNNzMuMywyMDEuMmMtMjEuNiwwLTM5LjMtMTQuNi0zOS4zLTMyLjVzMTcuNi0zMi41LDM5LjMtMzIuNXMzOS4zLDE0LjYsMzkuMywzMi41Uzk0LjksMjAxLjIsNzMuMywyMDEuMnogTTczLjMsMTQ3LjZjLTE0LjIsMC0yNS43LDkuNS0yNS43LDIxLjJzMTEuNSwyMS4yLDI1LjcsMjEuMlM5OSwxODAuNCw5OSwxNjguN1M4Ny40LDE0Ny42LDczLjMsMTQ3LjZ6Ii8+PHBhdGggY2xhc3M9InN0MiIgZD0iTTczLjMsMTM2LjhjMjEuNCwwLDM4LjgsMTQuMywzOC44LDMycy0xNy4zLDMyLTM4LjgsMzJzLTM4LjgtMTQuMy0zOC44LTMyUzUxLjgsMTM2LjgsNzMuMywxMzYuOCBNNzMuMywxOTAuNGMxNC41LDAsMjYuMi05LjcsMjYuMi0yMS43cy0xMS44LTIxLjctMjYuMi0yMS43UzQ3LDE1Ni44LDQ3LDE2OC43UzU4LjgsMTkwLjQsNzMuMywxOTAuNCBNNzMuMywxMzUuOGMtMjEuOSwwLTM5LjgsMTQuOC0zOS44LDMzczE3LjgsMzMsMzkuOCwzM3MzOS44LTE0LjgsMzkuOC0zM1M5NS4yLDEzNS44LDczLjMsMTM1LjhMNzMuMywxMzUuOHogTTczLjMsMTg5LjRjLTEzLjksMC0yNS4yLTkuMy0yNS4yLTIwLjdzMTEuMy0yMC43LDI1LjItMjAuN3MyNS4yLDkuMywyNS4yLDIwLjdTODcuMiwxODkuNCw3My4zLDE4OS40TDczLjMsMTg5LjR6Ii8+PC9nPjwvc3ZnPg==\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_2___ = new URL(\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuWbvuWxgl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDk4IDkzLjQiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDk4IDkzLjQ7IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjcuOSwyNy42SDEyYy0xLjEsMC0yLTAuOS0yLTJWOS43YzAtMS4xLDAuOS0yLDItMmgxNS45YzEuMSwwLDIsMC45LDIsMnYxNS45QzI5LjksMjYuNywyOSwyNy42LDI3LjksMjcuNnoiLz48cGF0aCBkPSJNODYsMjcuNkg3MGMtMS4xLDAtMi0wLjktMi0yVjkuN2MwLTEuMSwwLjktMiwyLTJIODZjMS4xLDAsMiwwLjksMiwydjE1LjlDODgsMjYuNyw4Ny4xLDI3LjYsODYsMjcuNnoiLz48cGF0aCBkPSJNMjcuOSw4NS43SDEyYy0xLjEsMC0yLTAuOS0yLTJWNjcuOGMwLTEuMSwwLjktMiwyLTJoMTUuOWMxLjEsMCwyLDAuOSwyLDJ2MTUuOUMyOS45LDg0LjgsMjksODUuNywyNy45LDg1Ljd6Ii8+PHBhdGggZD0iTTg2LDg1LjdINzBjLTEuMSwwLTItMC45LTItMlY2Ny44YzAtMS4xLDAuOS0yLDItMkg4NmMxLjEsMCwyLDAuOSwyLDJ2MTUuOUM4OCw4NC44LDg3LjEsODUuNyw4Niw4NS43eiIvPjxyZWN0IHg9IjE2LjYiIHk9IjIwLjEiIHdpZHRoPSI2LjciIGhlaWdodD0iNTEiLz48cmVjdCB4PSI0NS42IiB5PSItNy44IiB0cmFuc2Zvcm09Im1hdHJpeCg2LjEyMzIzNGUtMTcgLTEgMSA2LjEyMzIzNGUtMTcgMzEuMjUzIDY2LjcwMTgpIiB3aWR0aD0iNi43IiBoZWlnaHQ9IjUxIi8+PHJlY3QgeD0iNDUuNiIgeT0iNTAuMiIgdHJhbnNmb3JtPSJtYXRyaXgoNi4xMjMyMzRlLTE3IC0xIDEgNi4xMjMyMzRlLTE3IC0yNi43NDcgMTI0LjcwMTgpIiB3aWR0aD0iNi43IiBoZWlnaHQ9IjUxIi8+PHJlY3QgeD0iNzQuNiIgeT0iMjAuMSIgd2lkdGg9IjYuNyIgaGVpZ2h0PSI1MSIvPjxnPjxwYXRoIGQ9Ik00OSwyN2MtNy4zLDAtMTMuMyw2LTEzLjMsMTMuM2MwLDEuNSwwLjIsMywwLjcsNC40YzAuMSwwLjIsMC4xLDAuMywwLjIsMC41YzAsMCwwLDAuMSwwLDAuMWMwLjMsMC44LDAuOSwxLjcsMS41LDIuNmMwLjIsMC4zLDAuNCwwLjUsMC41LDAuOGMwLjQsMC42LDAuOCwxLjQsMS4yLDIuMWMwLjQsMC45LDAuNiwyLjMsMC43LDRjMC4xLDEuMiwxLjEsMi4yLDIuMywyLjJoMTIuM2MxLjIsMCwyLjItMSwyLjMtMi4yYzAuMS0xLjYsMC4zLTMuMSwwLjctNGMwLjMtMC43LDAuOC0xLjUsMS4yLTIuMWMwLjItMC4zLDAuNC0wLjYsMC41LTAuOGMwLjYtMC45LDEuMi0xLjgsMS41LTIuNmMwLDAsMC0wLjEsMC0wLjFjMC4xLTAuMiwwLjEtMC4zLDAuMi0wLjVjMC41LTEuNCwwLjctMi45LDAuNy00LjRDNjIuMywzMi45LDU2LjMsMjcsNDksMjd6Ii8+PHBhdGggZD0iTTU2LjEsNTljLTQuNywwLTkuNCwwLTE0LjIsMGMtMC4zLDAtMC42LDAuMS0wLjgsMC40cy0wLjIsMC41LTAuMiwwLjhjMS4yLDQuMSw0LjMsNi4zLDgsNi4zYzMuNywwLDYuOC0yLjIsOC02LjNjMC4xLTAuMywwLTAuNi0wLjItMC44QzU2LjcsNTkuMSw1Ni40LDU5LDU2LjEsNTl6Ii8+PC9nPjwvc3ZnPg==\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_3___ = new URL(\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuWbvuWxgl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDk4IDkzLjQiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDk4IDkzLjQ7IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjcuOSwyNy42SDEyYy0xLjEsMC0yLTAuOS0yLTJWOS43YzAtMS4xLDAuOS0yLDItMmgxNS45YzEuMSwwLDIsMC45LDIsMnYxNS45QzI5LjksMjYuNywyOSwyNy42LDI3LjksMjcuNnoiLz48cGF0aCBkPSJNODYsMjcuNkg3MGMtMS4xLDAtMi0wLjktMi0yVjkuN2MwLTEuMSwwLjktMiwyLTJIODZjMS4xLDAsMiwwLjksMiwydjE1LjlDODgsMjYuNyw4Ny4xLDI3LjYsODYsMjcuNnoiLz48cGF0aCBkPSJNMjcuOSw4NS43SDEyYy0xLjEsMC0yLTAuOS0yLTJWNjcuOGMwLTEuMSwwLjktMiwyLTJoMTUuOWMxLjEsMCwyLDAuOSwyLDJ2MTUuOUMyOS45LDg0LjgsMjksODUuNywyNy45LDg1Ljd6Ii8+PHBhdGggZD0iTTg2LDg1LjdINzBjLTEuMSwwLTItMC45LTItMlY2Ny44YzAtMS4xLDAuOS0yLDItMkg4NmMxLjEsMCwyLDAuOSwyLDJ2MTUuOUM4OCw4NC44LDg3LjEsODUuNyw4Niw4NS43eiIvPjxyZWN0IHg9IjE2LjYiIHk9IjIwLjEiIHdpZHRoPSI2LjciIGhlaWdodD0iNTEiLz48cmVjdCB4PSI0NS42IiB5PSItNy44IiB0cmFuc2Zvcm09Im1hdHJpeCg2LjEyMzIzNGUtMTcgLTEgMSA2LjEyMzIzNGUtMTcgMzEuMjUzIDY2LjcwMTgpIiB3aWR0aD0iNi43IiBoZWlnaHQ9IjUxIi8+PHJlY3QgeD0iNDUuNiIgeT0iNTAuMiIgdHJhbnNmb3JtPSJtYXRyaXgoNi4xMjMyMzRlLTE3IC0xIDEgNi4xMjMyMzRlLTE3IC0yNi43NDcgMTI0LjcwMTgpIiB3aWR0aD0iNi43IiBoZWlnaHQ9IjUxIi8+PHJlY3QgeD0iNzQuNiIgeT0iMjAuMSIgd2lkdGg9IjYuNyIgaGVpZ2h0PSI1MSIvPjwvc3ZnPg==\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_4___ = new URL(\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0i5Zu+5bGCXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMjAgMjAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDIwIDIwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8Zz4NCgk8cGF0aCBkPSJNMTMuMzgsMmgtNXYyaDVWMkwxMy4zOCwyeiBNNy4zOCwySDAuNjN2MmwwLDBjMCwxLjEsMCwyLjI1LDAsMi4yNWgyVjRoNC43NVYyTDcuMzgsMnogTTIuNjMsNy4yNWgtMnY1aDJWNy4yNUwyLjYzLDcuMjV6DQoJCSBNMi42MywxMy4yNWgtMlYxN2gybDAsMGwwLDBsMCwwVjEzLjI1TDIuNjMsMTMuMjV6IE03Ljg4LDE1aC01djJoNVYxNUw3Ljg4LDE1eiBNMTMuODgsMTVoLTV2Mmg1VjE1TDEzLjg4LDE1eiBNMTkuMzgsMTAuNWgtMlYxNQ0KCQloLTIuNXYyaDQuNVYxMC41TDE5LjM4LDEwLjV6IE0xOS4zOCw0LjVoLTJ2NWgyVjQuNUwxOS4zOCw0LjV6IE0xOS4zOCwyaC01djJoNVYyTDE5LjM4LDJ6Ii8+DQo8L2c+DQo8L3N2Zz4NCg==\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_5___ = new URL(\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuWbvuWxgl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDIwIDIwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAyMCAyMDsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxwYXRoIGQ9Ik0xOC42LDJIMS41QzEsMiwwLjcsMi40LDAuNywyLjh2MTMuNmMwLDAuNCwwLjQsMC44LDAuOCwwLjhoMTcuMWMwLjQsMCwwLjgtMC40LDAuOC0wLjhWMi44QzE5LjQsMi40LDE5LDIsMTguNiwyeiBNNi41LDE2LjRIMS40di00LjloNS4xVjE2LjR6IE02LjUsMTAuN0gxLjRWNS44aDUuMVYxMC43eiBNMTIuNiwxNi40SDcuNXYtNC45aDUuMVYxNi40eiBNMTIuNiwxMC43SDcuNVY1LjhoNS4xVjEwLjd6IE0xOC43LDE2LjRoLTUuMXYtNC45aDUuMVYxNi40eiBNMTguNywxMC43aC01LjFWNS44aDUuMVYxMC43eiIvPjwvc3ZnPg==\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_6___ = new URL(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiI+PHRpdGxlPmljb25zPC90aXRsZT48cGF0aCBkPSJNMjguODM2MzMsMjQuMzkzYy0uOTg3NDEtMy45NDk2NC0zLjk0OTY0LTYuOTExODctMTMuODIzNzQtNi45MTE4N3YzLjk0OTY0TDMuMTYzNjcsMTQuNTE4ODgsMTUuMDEyNTksNy42MDd2My45NDk2NGMxMi44MzYzMywwLDEzLjgyMzc0LDguODg2NywxMy44MjM3NCwxMi44MzYzNCIvPjwvc3ZnPg==\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_7___ = new URL(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiI+PHRpdGxlPmljb25zPC90aXRsZT48cGF0aCBkPSJNMy4xNjM2NywyNC4zOTNjLjk4NzQxLTMuOTQ5NjQsMy45NDk2NC02LjkxMTg3LDEzLjgyMzc0LTYuOTExODd2My45NDk2NGwxMS44NDg5Mi02LjkxMTg4TDE2Ljk4NzQxLDcuNjA3djMuOTQ5NjRjLTEyLjgzNjMzLDAtMTMuODIzNzQsOC44ODY3LTEzLjgyMzc0LDEyLjgzNjM0Ii8+PC9zdmc+\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_8___ = new URL(\"data:image/svg+xml;base64,PHN2ZyB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iICAgICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiAgICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIiAgICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgICAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIgICAgIHhtbG5zOmlua3NjYXBlPSJodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy9uYW1lc3BhY2VzL2lua3NjYXBlIiB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMTAwIDEyNSI+ICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAsLTk1Mi4zNjIxOCkiPiAgICAgICAgPHBhdGggc3R5bGU9ImZvbnQtc2l6ZTptZWRpdW07Zm9udC1zdHlsZTpub3JtYWw7Zm9udC12YXJpYW50Om5vcm1hbDtmb250LXdlaWdodDpub3JtYWw7Zm9udC1zdHJldGNoOm5vcm1hbDt0ZXh0LWluZGVudDowO3RleHQtYWxpZ246c3RhcnQ7dGV4dC1kZWNvcmF0aW9uOm5vbmU7bGluZS1oZWlnaHQ6bm9ybWFsO2xldHRlci1zcGFjaW5nOm5vcm1hbDt3b3JkLXNwYWNpbmc6bm9ybWFsO3RleHQtdHJhbnNmb3JtOm5vbmU7ZGlyZWN0aW9uOmx0cjtibG9jay1wcm9ncmVzc2lvbjp0Yjt3cml0aW5nLW1vZGU6bHItdGI7dGV4dC1hbmNob3I6c3RhcnQ7YmFzZWxpbmUtc2hpZnQ6YmFzZWxpbmU7b3BhY2l0eToxO2NvbG9yOiMwMDAwMDA7ZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDo0O21hcmtlcjpub25lO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGU7Zm9udC1mYW1pbHk6U2FuczstaW5rc2NhcGUtZm9udC1zcGVjaWZpY2F0aW9uOlNhbnMiIGQ9Ik0gNDAgNiBDIDIxLjI0NjAxMiA2IDYgMjEuMjQ2MDIgNiA0MCBDIDYgNTguNzUzOSAyMS4yNDYwMDEgNzQgNDAgNzQgQyA0OC42NzA1MjggNzQgNTYuNTgyODU4IDcwLjc2MzkxIDYyLjU5Mzc1IDY1LjQwNjI1IEwgOTAuNTkzNzUgOTMuNDA2MjUgQSAyLjAwMDIgMi4wMDAyIDAgMSAwIDkzLjQwNjI1IDkwLjU2MjUgTCA2NS40MDYyNSA2Mi41NjI1IEMgNzAuNzM5MTMxIDU2LjU1NzMxNiA3NCA0OC42NDc5OTEgNzQgNDAgQyA3NCAyMS4yNDYwMiA1OC43NTM5ODggNiA0MCA2IHogTSA0MCAxMCBDIDU2LjU5MjIzMiAxMCA3MCAyMy40MDc3OCA3MCA0MCBDIDcwIDU2LjU5MjIgNTYuNTkyMjIxIDcwIDQwIDcwIEMgMjMuNDA3Nzc5IDcwIDEwIDU2LjU5MjIgMTAgNDAgQyAxMCAyMy40MDc3OCAyMy40MDc3NjggMTAgNDAgMTAgeiAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAsOTUyLjM2MjE4KSIvPiAgICA8L2c+PC9zdmc+\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_9___ = new URL(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciICAgICB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDEwMCAxMjUiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDEwMCAxMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4gICAgPHBhdGggZD0iTTgyLDQ2djhIMTh2LThIODJ6Ii8+PC9zdmc+\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_10___ = new URL(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciICAgICB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDEwMCAxMjUiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDEwMCAxMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4gICAgPHBhdGggZD0iTTgyLDU0SDU0djI4aC04VjU0SDE4di04aDI4VjE4aDh2MjhoMjhWNTR6Ii8+PC9zdmc+\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_11___ = new URL(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAG5GlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDE5LTA1LTI5VDExOjI0OjUyKzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOS0wNS0yOVQxMTozMDozOCswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOS0wNS0yOVQxMTozMDozOCswODowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpiOTBkMjk0ZS0xYzFlLWViNDYtYTJiZS0yODBkMmQxMjQzYmQiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo1MzA1MTViZi01ZDBkLTAzNGYtYTU2NC1mYzZkMmRkNGZlYTIiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpiZDMyZGQwYS04MTJmLWUzNGEtOWIwNC0xODcyNzZmOGUwODgiPiA8cGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8cmRmOkJhZz4gPHJkZjpsaT5hZG9iZTpkb2NpZDpwaG90b3Nob3A6MDEzMzlmMTQtZmQxMC1hNzRkLWJmN2QtMjE2MjllMTMxMzAxPC9yZGY6bGk+IDxyZGY6bGk+YWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmJhZDRhZTdhLTQyYWQtMjY0Zi1iNzViLTIyNTVlN2FhYWQ5YTwvcmRmOmxpPiA8L3JkZjpCYWc+IDwvcGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmJkMzJkZDBhLTgxMmYtZTM0YS05YjA0LTE4NzI3NmY4ZTA4OCIgc3RFdnQ6d2hlbj0iMjAxOS0wNS0yOVQxMToyNDo1MiswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpiOTBkMjk0ZS0xYzFlLWViNDYtYTJiZS0yODBkMmQxMjQzYmQiIHN0RXZ0OndoZW49IjIwMTktMDUtMjlUMTE6MzA6MzgrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4N9//7AAADOUlEQVRIidWWz0srVxTHvydRsTFkCAMpBIygIC4UGwKCEhdGUBe6KKYL/wQLgqQ7N7Vd1ScuXBX/ANeKu2gUBAdR0UWUYUBCNplIDERNDcyQH99utDxeM/Ps4i36hbO4cw/fz+XOOfdeIYlvKc83df8aQER8IjItIlNv4x9EZEdETkTkp7dvXhFx9iHZNgD4fD4fp6enOTU1RQA/BoNB7uzs8OTkhP39/QQw6/V66fF4CMDT1scFMDw8PMxMJsPDw0P6/X6qqsqrqyvWajX29fVxdnaWW1tbTCQSBJBo5+O2RSIiCAaDGBwcRG9vL0hCURS0Wi3Yto25uTnMz89DVVUAUP/rPyiVSiWYpolAIIBIJIJWqwWfz4dqtQpFUTAyMgLbtpHP5wHAFJF1Efn+o4BKpVJBqVRCIBDA0NAQRAR+vx+1Wg2RSAThcBjZbBa5XA4TExPa+vr6rwBSHwKQbDQajd9M04TX60UsFoOiKOju7sbLywsGBgYQDAaRzWYRCoWwsbGBVCoFAMuuABEJiUiPiAiAQqFQQLPZRCwWQyKRQEdHB0hicnIStm3j4eEBCwsLiMfjODg4AICDL1f6eeUkQ6EQe3p6KCIEkEwmkyyXy7Rtm7e3tyTJx8dHWpbF09NTplIpZjIZ3t3dMR6PE0DcsUwBHB8fH3N1dZWqqhLAzMzMDHVdZztpmsbz83M+PT1xe3ubnZ2dBNDpBtB1XadlWVxZWSGA36PRKM/OztoC6vU66/U6NU3j2NgYAYy5NhqAlfHxcebzeZbLZS4vL3NxcdER8K7NzU12dXURQNdXOxnA2traGqvVKguFAnVd5/Pzs6O5aZpcWloigKUvvZwA4XA4zOvra9dVvyudTnN0dJQARtsB/lWmJIvFYvHPi4sLWJbl1Cb/yDAM5HI5AMi1m3dqtN3d3V0YhuFq3mg0YBgGXl9ffyb5+mEASU3TtM2joyPYtu0IKBaLuL+/B4B7pxy3s2hvb28Pl5eXjgk3NzcwTRMATKecDqcJkuci8sv+/v5WNBpFq9VCs9kEAIgIPB4P0um06/6/G7ldOt8B+ATgLwAvACpv8fQ2/gNtav/zEP7fXxV/A/5C86W2KDx7AAAAAElFTkSuQmCC\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_12___ = new URL(\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciICAgICB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDEwMCAxMjUiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDEwMCAxMDAiIHhtbDpzcGFjZT0icHJlc2VydmUiPiAgICA8cGF0aCBkPSJNNDcuNDQ5LDY2LjE4Mkw0Ny40NDksNjYuMTgyYy0wLjY2MywwLTEuMjk5LTAuMjY0LTEuNzY4LTAuNzMybC0yNy4zNi0yNy4zNjNjLTAuOTc3LTAuOTc3LTAuOTc3LTIuNTYsMC0zLjUzNSAgYzAuOTc3LTAuOTc3LDIuNTU5LTAuOTc3LDMuNTM1LDBsMjUuNTkzLDI1LjU5NmwyNS41OTUtMjUuNTk0YzAuOTc3LTAuOTc3LDIuNTU5LTAuOTc3LDMuNTM1LDBzMC45NzcsMi41NTksMCwzLjUzNUw0OS4yMTcsNjUuNDQ5ICBDNDguNzQ4LDY1LjkxOCw0OC4xMTIsNjYuMTgyLDQ3LjQ0OSw2Ni4xODJ6Ii8+PC9zdmc+\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_13___ = new URL(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAZCAYAAAA8CX6UAAAACXBIWXMAAC4jAAAuIwF4pT92AAABD0lEQVQ4jaXVgW2EMAwFUBvdAIxwI4QNYAJWSDfpBh0hMAEjpBsAG7BBs8GvjJITd0dok1iyCBF6MRAMAfgEUFNpALAA5lKs8kdFRALesyWpaJ5nSAL4AaCyK3LOUdd1tCxL7StLxsKtFWPV8aQEq14ncrE3KBc7hSJYmwUFrGkaGoYhYDp6sewjay1keJXGGPg4x/4L/YmlQJdYKhTDbrFnp7Wmvu9pXdfH3LZte47jSEopSRGJmYfTipRSYcXZt5nQamKh3yqSlay1Mvxm5u7ibUvLuR8nHhXVdR3aSXKje9qQ0zRJRY6IPpjZZUHGGGrb/SvomHlJQfbwD/J61yZCX9nIATJFiIfK/2tE9Av3xG0kg5Y0DQAAAABJRU5ErkJggg==\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_14___ = new URL(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAC4jAAAuIwF4pT92AAAGymlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDE5LTA1LTEzVDE2OjE0OjI0KzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE5LTA1LTEzVDE2OjE2OjM1KzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOS0wNS0xM1QxNjoxNjozNSswODowMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3ZTliYjliNi1iN2JjLTBhNDUtYmZjNS02Zjg1YjgzZWIzYjciIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo0ZTg2ZDFkZS01YmZkLWY5NGEtYmI1NS1kYmU0NTlhMTk5OGQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpiODAwMzVhYS1mMjYwLTMyNGQtYjk3OS00ZmExYWQyYWY2ODAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmI4MDAzNWFhLWYyNjAtMzI0ZC1iOTc5LTRmYTFhZDJhZjY4MCIgc3RFdnQ6d2hlbj0iMjAxOS0wNS0xM1QxNjoxNDoyNCswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo3M2U0NzllMi1mZTY3LWIyNGQtYjI4Zi00Mzg1NGFlNzNhNDgiIHN0RXZ0OndoZW49IjIwMTktMDUtMTNUMTY6MTQ6MjQrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6N2U5YmI5YjYtYjdiYy0wYTQ1LWJmYzUtNmY4NWI4M2ViM2I3IiBzdEV2dDp3aGVuPSIyMDE5LTA1LTEzVDE2OjE2OjM1KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+XAj1tAAAAZ9JREFUSIm91U9oz3Ecx/HHb9uBZI1QLCUJv7aTi3LZRea3w25yMOK+ciA3/VxcHOXgIge0Wk5TFkXJRUS7zHGtMEXjMETU1+Hz1j6t38/P77d9vevb9/t5v949X5//30pRFMqOC7hRpsEJFFjE4TIMBvE+TApMY+taGqzHk8zgz1NfS5PrDQwKfMKR1YB74v26ib4JD6QRDuNHpu1CFVuivYDnWPoXg5d4ijd4gVn04SRGwrjAtzBdF0bb8Rln8DgH7rQ8LbMNRlLHTJjWcTDrXB67MRmc8ZXixxBqWW4Uv3AHmxsAm8XRYI3lybd4lbXHo+hAG+A8ZvAwT1yzvGMGpZ5XO4ST1vVentiI7viexOVVwGvS6EebFdzHUIfwasDP/a1oCuc7gJ8N+MVWhfuj8ANOt6jtxSXMYR6HcrHRXoYNuIq9uIkBTGCHtE7bpI0wIJ2hJel83FoJambwNbSadBkuSFP2CN/xM6BTuC3dWW3HMdzFKTzD8U4glRb6PukO6sceXGnXoLuFvoh36MIXaSHbikrZP/2uUun/w+A3oqJjgwWsALIAAAAASUVORK5CYII=\", import.meta.url);\nvar ___CSS_LOADER_URL_IMPORT_15___ = new URL(\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAGb2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDE5LTA1LTI0VDE1OjEyOjQ5KzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE5LTA1LTI0VDE1OjEyOjQ5KzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOS0wNS0yNFQxNToxMjo0OSswODowMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDphNGM2ZTdmZi04YWM0LTEwNDgtYjlkNS1iYTM5NzZiODhkNTkiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpiYWQ0YWU3YS00MmFkLTI2NGYtYjc1Yi0yMjU1ZTdhYWFkOWEiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo5NWUxMjJlNy1lMGVjLWQ2NDktYWQwZC04ZjA4ZGM2MDAwNDQiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo5NWUxMjJlNy1lMGVjLWQ2NDktYWQwZC04ZjA4ZGM2MDAwNDQiIHN0RXZ0OndoZW49IjIwMTktMDUtMjRUMTU6MTI6NDkrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YTRjNmU3ZmYtOGFjNC0xMDQ4LWI5ZDUtYmEzOTc2Yjg4ZDU5IiBzdEV2dDp3aGVuPSIyMDE5LTA1LTI0VDE1OjEyOjQ5KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDxyZGY6QmFnPiA8cmRmOmxpPmFkb2JlOmRvY2lkOnBob3Rvc2hvcDowMTMzOWYxNC1mZDEwLWE3NGQtYmY3ZC0yMTYyOWUxMzEzMDE8L3JkZjpsaT4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz456hG0AAADFUlEQVRIie2VzU8TQRiHf7Pbz4UQxRZaIgEhSAUaSCkEwoVE0gtqCDERvOHVA948cOI/wMTYGxc8ES9VKgcx4QAajZUEjFkbq3wGJfQDdlnC7rKvB2ixUqAc9OSTTLKZSeaZ+b377jIiwt+E+6u7/wuBKf3Q3R04snI8eJ7D5OSUV1XVuwB+lJdffrmysnoDQGl5+eWnxcUXPn3+/AUWixnt7a1IJFLY3t5GXZ0HoVD4uGBubj4zyfMmEBkdqqrOBAIBLC8vQxTFkYaGBrhcLkxNTT1cWVl9BeCKpmnfUqmtexzH1hhjx69ARCAicBwHjuPA85nUosPDw0RE+0REwWCQDjGGhoaoq6uLQqEQ9fX1EYCfgmCvaGz04s6d3syeRHQkcLtdcLtdKCtzoaTEAQCJ2dk3dALG4SAi0hnjCAABeNbW5jfnFAiCHYJgh81mQ2FhAQCsTUyETxJksbi4uB+JRKi5uZkAjPwuyOShKLtQlF04nQ4IggAA2sGhzqaiooLz+XwYGBgAgJacb1GaVCrVKkmyH8BFWZbzEqTZ2NgAgMRpgseSJN/3+/2w2+3wer0GztEr6+vrALCZNZnOijF22+l0UiwW+7OI+bLf0dFBJpNpKGeRATwfHHyQ3vzcqKpqmEwmAtCZs8gAopHIh7zz/pNwOMx0XZerqipnckZUXV3pAKD09/cTHTbXOTB6enoIwJjbXZq70Xp7b6KpyXsVwGpnZyfpup53VIqiGGazmUpLndevXavNEmQikiQZNTXV0ba2lrrp6en52tpatrm5mVcjjI09ZZqm/dA0/XUymcpaywh4nocs76CqqnK7uzvQGIvFXng8Hra0tHSWhILBIAA8cTguwWIx5xbs7CiQJBnR6Fckk1uor/fcisfj78fHxxkOWvqkgbW1VTDG3sbjCUiSlCXINFos9h1EBvb2VOi6DqvVCp7n9dHRUSwsLDDDMI4dPf15TiaTsNmsF4qKCqGqWm6B1WoFY0BBQQEYY7BYLCCiR6IofhRF8bSIGM/zus/X+K6oqBB7e2r2Iv3/6Z/BL5oAtNSvyPOCAAAAAElFTkSuQmCC\", import.meta.url);\nvar ___CSS_LOADER_EXPORT___ = ___CSS_LOADER_API_IMPORT___(___CSS_LOADER_API_SOURCEMAP_IMPORT___);\nvar ___CSS_LOADER_URL_REPLACEMENT_0___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_0___);\nvar ___CSS_LOADER_URL_REPLACEMENT_1___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_1___);\nvar ___CSS_LOADER_URL_REPLACEMENT_2___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_2___);\nvar ___CSS_LOADER_URL_REPLACEMENT_3___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_3___);\nvar ___CSS_LOADER_URL_REPLACEMENT_4___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_4___);\nvar ___CSS_LOADER_URL_REPLACEMENT_5___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_5___);\nvar ___CSS_LOADER_URL_REPLACEMENT_6___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_6___);\nvar ___CSS_LOADER_URL_REPLACEMENT_7___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_7___);\nvar ___CSS_LOADER_URL_REPLACEMENT_8___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_8___);\nvar ___CSS_LOADER_URL_REPLACEMENT_9___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_9___);\nvar ___CSS_LOADER_URL_REPLACEMENT_10___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_10___);\nvar ___CSS_LOADER_URL_REPLACEMENT_11___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_11___);\nvar ___CSS_LOADER_URL_REPLACEMENT_12___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_12___);\nvar ___CSS_LOADER_URL_REPLACEMENT_13___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_13___);\nvar ___CSS_LOADER_URL_REPLACEMENT_14___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_14___);\nvar ___CSS_LOADER_URL_REPLACEMENT_15___ = ___CSS_LOADER_GET_URL_IMPORT___(___CSS_LOADER_URL_IMPORT_15___);\n// Module\n___CSS_LOADER_EXPORT___.push([module.id, \".view{width:100%;height:100%;background:var(--gray5)}.view-title-container{display:flex;box-sizing:border-box;position:absolute;z-index:999999;width:100%;height:var(--title-height);padding-left:10px;font-size:11pt;font-weight:600;line-height:var(--title-height);color:var(--gray14);background:var(--gray3);box-shadow:0 0 5px rgba(0,0,0,.1)}.view-title-container .view-title-text{height:var(--title-height);line-height:var(--title-height);float:left;padding:0 20px 0 0}.keyframe-title-container{border-bottom:2px solid var(--gray7);box-shadow:none}.view-tool-container{float:left;display:flex}.view-tool-container .tool-separator{float:left;height:14px;margin:6px 2px;width:0px;border-left:1px solid var(--gray9)}.view-tool-container .tool-btn{float:left;width:18px;height:18px;padding:4px;margin:0 2px}.view-tool-container .tool-btn .svg-icon{width:100%;height:100%;display:inline-block;background-repeat:no-repeat;background-size:94%;filter:invert(70%)}.view-tool-container .tool-btn .no-hover-icon{filter:invert(30%)}.view-tool-container .tool-btn:hover .svg-icon{filter:invert(30%);cursor:pointer}.view-tool-container .tool-btn:active{background:#bcbcbc;cursor:pointer}.view-tool-container .tool-btn[disabled]{pointer-events:none}.view-tool-container .selected-tool{filter:invert(0%) !important}.view-tool-container .narrow-tool-btn{padding:4px 0}.view-tool-container .arrow-icon{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_0___ + \")}.view-tool-container .lasso-icon{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_1___ + \")}.view-tool-container .selection-suggestion-icon{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_2___ + \")}.view-tool-container .selection-non-suggestion-icon{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_3___ + \")}.view-tool-container .rect-icon{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_4___ + \")}.view-tool-container .table-icon{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_5___ + \")}.view-tool-container .revert-icon{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_6___ + \")}.view-tool-container .redo-icon{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_7___ + \")}.view-tool-container .zoom-icon{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_8___ + \")}.view-tool-container .zoom-out-icon{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_9___ + \")}.view-tool-container .zoom-in-icon{background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_10___ + \")}.non-framed-mark{opacity:.3}.highlight-selection-frame{cursor:url(\" + ___CSS_LOADER_URL_REPLACEMENT_11___ + \"),auto}.widget{float:left;width:98%;margin:0 1%;height:var(--title-height)}.checkbox-container{display:inline-block;position:relative;padding-left:20px;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:10pt;line-height:16px;font-weight:normal;color:var(--gray13)}.checkbox-container input{position:absolute;opacity:0;width:0;height:0;cursor:pointer}.checkbox-container .checkmark{position:absolute;top:0;left:0;height:14px;width:14px;background-color:var(--gray1)}.checkbox-container .checkmark:after{content:\\\"\\\";position:absolute;display:none;left:4px;top:0px;width:4px;height:8px;border:solid #fff;border-width:0 2px 2px 0;-webkit-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg)}.checkbox-container:hover input~.checkmark{background-color:#ccc}.checkbox-container input:checked~.checkmark{background-color:var(--highlight-blue)}.checkbox-container input:checked~.checkmark:after{display:block}.view-content,.kf-view-content,.data-view-content,.chart-view-content,.video-view-content{--view-content-margin-v: 5px;float:left;width:calc(100% - 12px);height:calc(100% - 8px);margin:calc(var(--title-height) + 4px + var(--view-content-margin-v)) 6px 0}.data-view-content,.chart-view-content,.video-view-content{background:var(--gray1);height:calc(100% - 35px - 26px)}.data-view-content svg,.chart-view-content svg,.video-view-content svg{float:left;width:100%;height:100%}.data-view-content{background:var(--gray3);display:flex;flex-direction:column}.attr-wrapper{margin-top:6px;box-sizing:border-box;padding:0px 10px;width:100%;display:flex}.attr-wrapper div{clear:both;float:left}.attr-wrapper div:first-child{flex:3}.attr-wrapper div:last-child{flex:2;transition:all .2s cubic-bezier(0.445, 0.05, 0.55, 0.95)}.attr-wrapper div div{width:100%}.non-sortable-attr-wrapper>div:last-child{flex:0;width:0;opacity:0}.non-sortable-attr-wrapper #attrBtnContainer span{width:100%}.data-column-title{float:left;text-transform:capitalize;font-size:10pt;display:block;box-sizing:border-box;padding:0 4px;width:100%;height:26px;line-height:26px;background:var(--gray7);color:var(--gray14)}.data-table-wrapper{box-sizing:border-box;flex:1;display:flex;flex-direction:column;overflow:auto}.data-table-wrapper .data-table-title{box-sizing:border-box;padding:0 4px;height:26px;line-height:26px;background:var(--gray7)}.data-table-wrapper .data-table-title .data-table-title-text{float:left;text-transform:capitalize;color:var(--gray14);font-size:10pt}.data-table-wrapper .data-table-title .drop-down{float:right;width:14px;height:14px;margin:6px;background-color:none;background-image:url(\" + ___CSS_LOADER_URL_REPLACEMENT_12___ + \");background-repeat:no-repeat;background-size:100% auto;transform:rotate(180deg);filter:invert(50%)}.data-table-wrapper .data-table-title .drop-down:hover{filter:invert(0%);cursor:pointer}.data-table-wrapper .data-table-title .left-up-icon{transform:rotate(0deg)}.data-table-wrapper .data-table-container{width:100%;flex:1;overflow:auto;transition:all .2s cubic-bezier(0.445, 0.05, 0.55, 0.95)}.data-table-wrapper .hidden-data-table{flex:none;height:0px;overflow:hidden}.kf-view-content{--kf-view-content-margin: 4px;box-sizing:border-box;width:100%;height:calc(100% - var(--title-height) - var(--kf-view-content-margin));padding:0;display:flex;flex-direction:column;margin-top:calc(var(--title-height) + var(--kf-view-content-margin));margin-left:0}.kf-panel{--kf-panel-margin: 4px;width:calc(100% - var(--kf-panel-margin)*2);height:100%;margin-left:var(--kf-panel-margin);overflow-x:auto;overflow-y:hidden}.kf-title{width:100px}.single-select{cursor:url(\" + ___CSS_LOADER_URL_REPLACEMENT_13___ + \"),auto}.lasso-select{cursor:url(\" + ___CSS_LOADER_URL_REPLACEMENT_14___ + \"),auto}.grab-chart{cursor:move}.grab-selection{cursor:url(\" + ___CSS_LOADER_URL_REPLACEMENT_15___ + \"),auto}.multi-charts-cover{width:100%;height:100%;background:var(--gray1)}.multi-charts-cover .row-chart-container{width:100%;height:33.33%}.multi-charts-cover .row-chart-container .chart-item-container{float:left;width:33.33%;height:100%;box-sizing:border-box;border:3px solid var(--gray5);padding:6px}.multi-charts-cover .row-chart-container .chart-item-container svg{height:100%}.multi-charts-cover .row-chart-container .chart-item-container p{margin-top:25%;text-align:center;font-size:11pt;font-weight:600;color:var(--gray14)}.confirm-button{padding:4px 8px;margin:2px;cursor:pointer;position:absolute;bottom:30px;right:12px;background-color:#f2f2f2;font-weight:600;border-radius:5px;border:solid 2px #dadada}.confirm-button:hover{background-color:#676767;color:#e6e6e6}\", \"\",{\"version\":3,\"sources\":[\"webpack://./src/assets/style/view-window.scss\"],\"names\":[],\"mappings\":\"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\",\"sourcesContent\":[\".view {\\r\\n    width: 100%;\\r\\n    height: 100%;\\r\\n    background: var(--gray5);\\r\\n}\\r\\n\\r\\n.view-title-container {\\r\\n    display: flex;\\r\\n    box-sizing: border-box;\\r\\n    position: absolute;\\r\\n    z-index: 999999;\\r\\n    width: 100%;\\r\\n    height: var(--title-height);\\r\\n    padding-left: 10px;\\r\\n    font-size: 11pt;\\r\\n    font-weight: 600;\\r\\n    line-height: var(--title-height);\\r\\n    color: var(--gray14);\\r\\n    background: var(--gray3);\\r\\n    box-shadow: 0 0 5px rgba(0, 0, 0, 0.1);\\r\\n\\r\\n    .view-title-text {\\r\\n        height: var(--title-height);\\r\\n        line-height: var(--title-height);\\r\\n        float: left;\\r\\n        padding: 0 20px 0 0;\\r\\n    }\\r\\n}\\r\\n\\r\\n.keyframe-title-container {\\r\\n    border-bottom: 2px solid var(--gray7);\\r\\n    box-shadow: none;\\r\\n}\\r\\n\\r\\n.view-tool-container {\\r\\n    float: left;\\r\\n    display: flex;\\r\\n\\r\\n    .tool-separator {\\r\\n        float: left;\\r\\n        height: 14px;\\r\\n        margin: 6px 2px;\\r\\n        width: 0px;\\r\\n        border-left: 1px solid var(--gray9);\\r\\n    }\\r\\n\\r\\n    .tool-btn {\\r\\n        float: left;\\r\\n        width: 18px;\\r\\n        height: 18px;\\r\\n        padding: 4px;\\r\\n        margin: 0 2px;\\r\\n\\r\\n        .svg-icon {\\r\\n            width: 100%;\\r\\n            height: 100%;\\r\\n            display: inline-block;\\r\\n            background-repeat: no-repeat;\\r\\n            background-size: 94%;\\r\\n            filter: invert(70%);\\r\\n        }\\r\\n\\r\\n        .no-hover-icon {\\r\\n            filter: invert(30%);\\r\\n        }\\r\\n\\r\\n        &:hover .svg-icon {\\r\\n            filter: invert(30%);\\r\\n            cursor: pointer;\\r\\n        }\\r\\n\\r\\n        &:active {\\r\\n            background: #bcbcbc;\\r\\n            cursor: pointer;\\r\\n        }\\r\\n\\r\\n        &[disabled] {\\r\\n            pointer-events: none;\\r\\n        }\\r\\n    }\\r\\n\\r\\n    .selected-tool {\\r\\n        filter: invert(0%) !important;\\r\\n    }\\r\\n\\r\\n    .narrow-tool-btn {\\r\\n        padding: 4px 0;\\r\\n    }\\r\\n\\r\\n    .arrow-icon {\\r\\n        background-image: url(\\\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuWbvuWxgl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDI2MCAyNjAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDI2MCAyNjA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGUgdHlwZT0idGV4dC9jc3MiPi5zdDB7ZmlsbDpub25lO3N0cm9rZTojRkZGRkZGO3N0cm9rZS13aWR0aDoxMDtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxMDt9LnN0MXtmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjg7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6MTA7fS5zdDJ7ZmlsbDojRkZGRkZGO30uc3Qze3N0cm9rZTojMDAwMDAwO3N0cm9rZS13aWR0aDoxNjtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbGluZWpvaW46cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6MTA7fTwvc3R5bGU+PHBhdGggZD0iTS0xODUuNiw2MC4zYy0xMi0zNy41LTc2LjgtNTAuMy0xNDQuNy0yOC41Uy00NDMuNSwxMDEuNS00MzEuNSwxMzljMTIsMzcuNSw3Ni44LDUwLjMsMTQ0LjcsMjguNUMtMjE4LjksMTQ1LjgtMTczLjYsOTcuOC0xODUuNiw2MC4zeiBNLTI5MC43LDE1NC4xYy01Ny40LDE4LjQtMTExLjUsOS4zLTEyMS0yMC4yYy05LjQtMjkuNSwyOS40LTY4LjMsODYuOC04Ni43YzU3LjQtMTguNCwxMTEuNS05LjMsMTIxLDIwLjJDLTE5NC41LDk2LjktMjMzLjQsMTM1LjctMjkwLjcsMTU0LjF6Ii8+PGltYWdlIHN0eWxlPSJvdmVyZmxvdzp2aXNpYmxlOyIgd2lkdGg9IjE4MiIgaGVpZ2h0PSIxNzUiIHhsaW5rOmhyZWY9IkE5NDdDNkJGLmpwZyIgIHRyYW5zZm9ybT0ibWF0cml4KDAuNzQ5OSAwIDAgMC43NDk5IDI3OS42NzIxIDY5LjQ2NTcpIj48L2ltYWdlPjxwYXRoIGNsYXNzPSJzdDAiIGQ9Ik0tMzc2LjQsMTg5LjFjMC45LTAuNSwyLjItMSwzLjctMS4zYzguMS0xLjcsMTguMiwzLjEsMjIuOSwxMS41YzMuNCw2LDUuNCwxNi4zLTAuNywyMy40Yy00LjYsNS4yLTExLjIsNS45LTEzLDYiLz48cGF0aCBjbGFzcz0ic3QxIiBkPSJNLTM3Ni40LDE4OS4xYzAuOS0wLjUsMi4yLTEsMy43LTEuM2M4LjEtMS43LDE4LjIsMy4xLDIyLjksMTEuNWMzLjQsNiw1LjQsMTYuMy0wLjcsMjMuNGMtNC42LDUuMi0xMS4yLDUuOS0xMyw2Ii8+PGc+PHBvbHlnb24gcG9pbnRzPSItMTMzLjYsMy43IC00OS44LDg4IC05Ni4xLDgzIC0xMjMuMiwxMjAuNSAiLz48cGF0aCBjbGFzcz0ic3QyIiBkPSJNLTEzMyw1YzI3LjMsMjcuNCw1NC41LDU0LjgsODEuOCw4Mi4zYy0xNS0xLjYtMzAuMS0zLjItNDUuMS00LjljLTguOCwxMi4yLTE3LjcsMjQuNS0yNi41LDM2LjdDLTEyNi4yLDgxLjEtMTI5LjYsNDMuMS0xMzMsNSBNLTEzNC4yLDIuNGwwLjIsMi44bDEwLjIsMTE0LjFsMC4yLDIuN2wxLjYtMi4ybDEzLjMtMTguNGwxMi45LTE3LjlsMTUuNSwxLjdsMjksMy4xbDIuOCwwLjNsLTItMmwtMC45LTAuOWwtODEtODEuNEwtMTM0LjIsMi40TC0xMzQuMiwyLjR6Ii8+PC9nPjxnPjxwYXRoIGQ9Ik0tNTkuOCwxOTkuN2MtMTYuOSwwLTMwLjYtMTEuMy0zMC42LTI1LjNzMTMuNy0yNS4zLDMwLjYtMjUuM3MzMC42LDExLjMsMzAuNiwyNS4zUy00Mi45LDE5OS43LTU5LjgsMTk5Ljd6IE0tNTkuOCwxNTMuOWMtMTMuOCwwLTI1LDkuMi0yNSwyMC41YzAsMTEuMywxMS4yLDIwLjUsMjUsMjAuNXMyNS05LjIsMjUtMjAuNUMtMzQuOCwxNjMuMS00NiwxNTMuOS01OS44LDE1My45eiIvPjxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik0tNTkuOCwxNDkuNmMxNi42LDAsMzAuMSwxMS4xLDMwLjEsMjQuOGMwLDEzLjctMTMuNSwyNC44LTMwLjEsMjQuOFMtOTAsMTg4LjEtOTAsMTc0LjRDLTkwLDE2MC43LTc2LjUsMTQ5LjYtNTkuOCwxNDkuNiBNLTU5LjgsMTk1LjRjMTQuMSwwLDI1LjUtOS40LDI1LjUtMjFzLTExLjQtMjEtMjUuNS0yMXMtMjUuNSw5LjQtMjUuNSwyMVMtNzMuOSwxOTUuNC01OS44LDE5NS40IE0tNTkuOCwxNDguNmMtMTcuMiwwLTMxLjEsMTEuNi0zMS4xLDI1LjhzMTQsMjUuOCwzMS4xLDI1LjhzMzEuMS0xMS42LDMxLjEtMjUuOFMtNDIuNywxNDguNi01OS44LDE0OC42TC01OS44LDE0OC42eiBNLTU5LjgsMTk0LjRjLTEzLjUsMC0yNC41LTktMjQuNS0yMGMwLTExLDExLTIwLDI0LjUtMjBzMjQuNSw5LDI0LjUsMjBDLTM1LjMsMTg1LjQtNDYuMywxOTQuNC01OS44LDE5NC40TC01OS44LDE5NC40eiIvPjwvZz48Zz48cGF0aCBkPSJNLTM2Ny4yLDIwMS4yYy0yMS42LDAtMzkuMy0xNC42LTM5LjMtMzIuNXMxNy42LTMyLjUsMzkuMy0zMi41czM5LjMsMTQuNiwzOS4zLDMyLjVTLTM0NS42LDIwMS4yLTM2Ny4yLDIwMS4yeiBNLTM2Ny4yLDE0Ny42Yy0xNC4yLDAtMjUuNyw5LjUtMjUuNywyMS4yczExLjUsMjEuMiwyNS43LDIxLjJzMjUuNy05LjUsMjUuNy0yMS4yUy0zNTMsMTQ3LjYtMzY3LjIsMTQ3LjZ6Ii8+PHBhdGggY2xhc3M9InN0MiIgZD0iTS0zNjcuMiwxMzYuOGMyMS40LDAsMzguOCwxNC4zLDM4LjgsMzJzLTE3LjMsMzItMzguOCwzMnMtMzguOC0xNC4zLTM4LjgtMzJTLTM4OC42LDEzNi44LTM2Ny4yLDEzNi44IE0tMzY3LjIsMTkwLjRjMTQuNSwwLDI2LjItOS43LDI2LjItMjEuN3MtMTEuOC0yMS43LTI2LjItMjEuN3MtMjYuMiw5LjctMjYuMiwyMS43Uy0zODEuNywxOTAuNC0zNjcuMiwxOTAuNCBNLTM2Ny4yLDEzNS44Yy0yMS45LDAtMzkuOCwxNC44LTM5LjgsMzNzMTcuOCwzMywzOS44LDMzYzIxLjksMCwzOS44LTE0LjgsMzkuOC0zM1MtMzQ1LjMsMTM1LjgtMzY3LjIsMTM1LjhMLTM2Ny4yLDEzNS44eiBNLTM2Ny4yLDE4OS40Yy0xMy45LDAtMjUuMi05LjMtMjUuMi0yMC43czExLjMtMjAuNywyNS4yLTIwLjdzMjUuMiw5LjMsMjUuMiwyMC43Uy0zNTMuMywxODkuNC0zNjcuMiwxODkuNEwtMzY3LjIsMTg5LjR6Ii8+PC9nPjxnPjxwYXRoIGQ9Ik02MzYsMzQuNWgtMjZ2MTRoMjZWMzQuNUw2MzYsMzQuNXogTTU5NCwzNC41aC0yNnYxNGgyNlYzNC41TDU5NCwzNC41eiBNNTUyLDM0LjVoLTI2djE0aDI2VjM0LjVMNTUyLDM0LjV6IE01MTAsMzQuNWgtMjZ2MTRoMjZWMzQuNUw1MTAsMzQuNXogTTQ2OCwzNC41aC0xOHYxNGgxOFYzNC41TDQ2OCwzNC41eiBNNDY0LDU4LjVoLTE0djI2aDE0VjU4LjVMNDY0LDU4LjV6IE00NjQsMTAwLjVoLTE0djI2aDE0VjEwMC41TDQ2NCwxMDAuNXogTTQ2NCwxNDIuNWgtMTR2MjZoMTRWMTQyLjVMNDY0LDE0Mi41eiBNNDY0LDE4NC41aC0xNHYyNmgxNFYxODQuNUw0NjQsMTg0LjV6IE00NjYuOSwyMjEuNkg0NTB2NC45bDAsMHYtNC45djQuOWwwLDB2OS4xaDE0bDAsMGwwLDBsMCwwbDAsMGMxLjcsMCwyLjksMCwyLjksMFYyMjEuNkw0NjYuOSwyMjEuNnogTTUwOC45LDIyMS42aC0yNnYxNGgyNlYyMjEuNkw1MDguOSwyMjEuNnogTTU1MC45LDIyMS42aC0yNnYxNGgyNlYyMjEuNkw1NTAuOSwyMjEuNnogTTU5Mi45LDIyMS42aC0yNnYxNGgyNlYyMjEuNkw1OTIuOSwyMjEuNnogTTYzNC45LDIyMS42aC0yNnYxNGgyNlYyMjEuNkw2MzQuOSwyMjEuNnogTTY3Ni45LDIyMS42aC0yNnYxNGgyNlYyMjEuNkw2NzYuOSwyMjEuNnogTTY3OCwxOTQuOGgtMTR2MjZoMTRWMTk0LjhMNjc4LDE5NC44eiBNNjc4LDE1Mi44aC0xNHYyNmgxNFYxNTIuOEw2NzgsMTUyLjh6IE02NzgsMTEwLjhoLTE0djI2aDE0VjExMC44TDY3OCwxMTAuOHogTTY3OCw2OC44aC0xNHYyNmgxNFY2OC44TDY3OCw2OC44eiBNNjc4LDM0LjVoLTI2djE0aDEydjQuMmgxNFYzNC41TDY3OCwzNC41eiIvPjwvZz48aW1hZ2Ugc3R5bGU9Im92ZXJmbG93OnZpc2libGU7IiB3aWR0aD0iMzEyIiBoZWlnaHQ9IjM4NiIgeGxpbms6aHJlZj0iQTk0N0M2QkQuanBnIiAgdHJhbnNmb3JtPSJtYXRyaXgoMC41NzM3IDAgMCAwLjU3MzcgLTM2MS40ODk3IDUxLjM1NjkpIj48L2ltYWdlPjxwYXRoIGNsYXNzPSJzdDMiIGQ9Ik04My45LDQzTDgzLjksNDNjMCwwLDAuMSwzNy4xLDAuNSwxNDEuNGMxMS40LTkuMiwyMi44LTE4LjQsMzQuMy0yNy41YzEwLjcsMTkuNCwyMS4zLDM4LjcsMzIsNTguMWM2LjktNC4zLDEzLjgtOC42LDIwLjctMTIuOWMtMTAuMS0xOC43LTIwLjMtMzcuMy0zMC40LTU2YzE3LjEtMi45LDM0LjEtNS43LDUxLjItOC42QzE1NiwxMDYuMSwxMjAsNzQuNSw4My45LDQzeiIvPjwvc3ZnPg==\\\");\\r\\n    }\\r\\n\\r\\n    .lasso-icon {\\r\\n        background-image: url(\\\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuWbvuWxgl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDI2MCAyNjAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDI2MCAyNjA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj48c3R5bGUgdHlwZT0idGV4dC9jc3MiPi5zdDB7ZmlsbDpub25lO3N0cm9rZTojRkZGRkZGO3N0cm9rZS13aWR0aDoxMDtzdHJva2UtbGluZWNhcDpyb3VuZDtzdHJva2UtbWl0ZXJsaW1pdDoxMDt9LnN0MXtmaWxsOm5vbmU7c3Ryb2tlOiMwMDAwMDA7c3Ryb2tlLXdpZHRoOjg7c3Ryb2tlLWxpbmVjYXA6cm91bmQ7c3Ryb2tlLW1pdGVybGltaXQ6MTA7fS5zdDJ7ZmlsbDojRkZGRkZGO308L3N0eWxlPjxwYXRoIGQ9Ik0yNTQuOCw2MC4zYy0xMi0zNy41LTc2LjgtNTAuMy0xNDQuNy0yOC41Uy0zLjEsMTAxLjUsOC45LDEzOWMxMiwzNy41LDc2LjgsNTAuMywxNDQuNywyOC41QzIyMS41LDE0NS44LDI2Ni44LDk3LjgsMjU0LjgsNjAuM3ogTTE0OS43LDE1NC4xYy01Ny40LDE4LjQtMTExLjUsOS4zLTEyMS0yMC4yYy05LjQtMjkuNSwyOS40LTY4LjMsODYuOC04Ni43YzU3LjQtMTguNCwxMTEuNS05LjMsMTIxLDIwLjJDMjQ1LjksOTYuOSwyMDcuMSwxMzUuNywxNDkuNywxNTQuMXoiLz48aW1hZ2Ugc3R5bGU9Im92ZXJmbG93OnZpc2libGU7IiB3aWR0aD0iMTgyIiBoZWlnaHQ9IjE3NSIgeGxpbms6aHJlZj0iRkJFRDYwNzIuanBnIiAgdHJhbnNmb3JtPSJtYXRyaXgoMC43NDk5IDAgMCAwLjc0OTkgMjc5LjY3MjEgNjkuNDY1NykiPjwvaW1hZ2U+PHBhdGggY2xhc3M9InN0MCIgZD0iTTY0LDE4OS4xYzAuOS0wLjUsMi4yLTEsMy43LTEuM2M4LjEtMS43LDE4LjIsMy4xLDIyLjksMTEuNWMzLjQsNiw1LjQsMTYuMy0wLjcsMjMuNGMtNC42LDUuMi0xMS4yLDUuOS0xMyw2Ii8+PHBhdGggY2xhc3M9InN0MSIgZD0iTTY0LDE4OS4xYzAuOS0wLjUsMi4yLTEsMy43LTEuM2M4LjEtMS43LDE4LjIsMy4xLDIyLjksMTEuNWMzLjQsNiw1LjQsMTYuMy0wLjcsMjMuNGMtNC42LDUuMi0xMS4yLDUuOS0xMyw2Ii8+PGc+PHBvbHlnb24gcG9pbnRzPSItMTMzLjYsMy43IC00OS44LDg4IC05Ni4xLDgzIC0xMjMuMiwxMjAuNSAiLz48cGF0aCBjbGFzcz0ic3QyIiBkPSJNLTEzMyw1YzI3LjMsMjcuNCw1NC41LDU0LjgsODEuOCw4Mi4zYy0xNS0xLjYtMzAuMS0zLjItNDUuMS00LjljLTguOCwxMi4yLTE3LjcsMjQuNS0yNi41LDM2LjdDLTEyNi4yLDgxLjEtMTI5LjYsNDMuMS0xMzMsNSBNLTEzNC4yLDIuNGwwLjIsMi44bDEwLjIsMTE0LjFsMC4yLDIuN2wxLjYtMi4ybDEzLjMtMTguNGwxMi45LTE3LjlsMTUuNSwxLjdsMjksMy4xbDIuOCwwLjNsLTItMmwtMC45LTAuOWwtODEtODEuNEwtMTM0LjIsMi40TC0xMzQuMiwyLjR6Ii8+PC9nPjxnPjxwYXRoIGQ9Ik0tNTkuOCwxOTkuN2MtMTYuOSwwLTMwLjYtMTEuMy0zMC42LTI1LjNzMTMuNy0yNS4zLDMwLjYtMjUuM3MzMC42LDExLjMsMzAuNiwyNS4zUy00Mi45LDE5OS43LTU5LjgsMTk5Ljd6IE0tNTkuOCwxNTMuOWMtMTMuOCwwLTI1LDkuMi0yNSwyMC41YzAsMTEuMywxMS4yLDIwLjUsMjUsMjAuNXMyNS05LjIsMjUtMjAuNUMtMzQuOCwxNjMuMS00NiwxNTMuOS01OS44LDE1My45eiIvPjxwYXRoIGNsYXNzPSJzdDIiIGQ9Ik0tNTkuOCwxNDkuNmMxNi42LDAsMzAuMSwxMS4xLDMwLjEsMjQuOGMwLDEzLjctMTMuNSwyNC44LTMwLjEsMjQuOFMtOTAsMTg4LjEtOTAsMTc0LjRDLTkwLDE2MC43LTc2LjUsMTQ5LjYtNTkuOCwxNDkuNiBNLTU5LjgsMTk1LjRjMTQuMSwwLDI1LjUtOS40LDI1LjUtMjFzLTExLjQtMjEtMjUuNS0yMXMtMjUuNSw5LjQtMjUuNSwyMVMtNzMuOSwxOTUuNC01OS44LDE5NS40IE0tNTkuOCwxNDguNmMtMTcuMiwwLTMxLjEsMTEuNi0zMS4xLDI1LjhzMTQsMjUuOCwzMS4xLDI1LjhzMzEuMS0xMS42LDMxLjEtMjUuOFMtNDIuNywxNDguNi01OS44LDE0OC42TC01OS44LDE0OC42eiBNLTU5LjgsMTk0LjRjLTEzLjUsMC0yNC41LTktMjQuNS0yMGMwLTExLDExLTIwLDI0LjUtMjBzMjQuNSw5LDI0LjUsMjBDLTM1LjMsMTg1LjQtNDYuMywxOTQuNC01OS44LDE5NC40TC01OS44LDE5NC40eiIvPjwvZz48Zz48cGF0aCBkPSJNNzMuMywyMDEuMmMtMjEuNiwwLTM5LjMtMTQuNi0zOS4zLTMyLjVzMTcuNi0zMi41LDM5LjMtMzIuNXMzOS4zLDE0LjYsMzkuMywzMi41Uzk0LjksMjAxLjIsNzMuMywyMDEuMnogTTczLjMsMTQ3LjZjLTE0LjIsMC0yNS43LDkuNS0yNS43LDIxLjJzMTEuNSwyMS4yLDI1LjcsMjEuMlM5OSwxODAuNCw5OSwxNjguN1M4Ny40LDE0Ny42LDczLjMsMTQ3LjZ6Ii8+PHBhdGggY2xhc3M9InN0MiIgZD0iTTczLjMsMTM2LjhjMjEuNCwwLDM4LjgsMTQuMywzOC44LDMycy0xNy4zLDMyLTM4LjgsMzJzLTM4LjgtMTQuMy0zOC44LTMyUzUxLjgsMTM2LjgsNzMuMywxMzYuOCBNNzMuMywxOTAuNGMxNC41LDAsMjYuMi05LjcsMjYuMi0yMS43cy0xMS44LTIxLjctMjYuMi0yMS43UzQ3LDE1Ni44LDQ3LDE2OC43UzU4LjgsMTkwLjQsNzMuMywxOTAuNCBNNzMuMywxMzUuOGMtMjEuOSwwLTM5LjgsMTQuOC0zOS44LDMzczE3LjgsMzMsMzkuOCwzM3MzOS44LTE0LjgsMzkuOC0zM1M5NS4yLDEzNS44LDczLjMsMTM1LjhMNzMuMywxMzUuOHogTTczLjMsMTg5LjRjLTEzLjksMC0yNS4yLTkuMy0yNS4yLTIwLjdzMTEuMy0yMC43LDI1LjItMjAuN3MyNS4yLDkuMywyNS4yLDIwLjdTODcuMiwxODkuNCw3My4zLDE4OS40TDczLjMsMTg5LjR6Ii8+PC9nPjwvc3ZnPg==\\\");\\r\\n    }\\r\\n\\r\\n    .selection-suggestion-icon {\\r\\n        background-image: url(\\\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuWbvuWxgl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDk4IDkzLjQiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDk4IDkzLjQ7IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjcuOSwyNy42SDEyYy0xLjEsMC0yLTAuOS0yLTJWOS43YzAtMS4xLDAuOS0yLDItMmgxNS45YzEuMSwwLDIsMC45LDIsMnYxNS45QzI5LjksMjYuNywyOSwyNy42LDI3LjksMjcuNnoiLz48cGF0aCBkPSJNODYsMjcuNkg3MGMtMS4xLDAtMi0wLjktMi0yVjkuN2MwLTEuMSwwLjktMiwyLTJIODZjMS4xLDAsMiwwLjksMiwydjE1LjlDODgsMjYuNyw4Ny4xLDI3LjYsODYsMjcuNnoiLz48cGF0aCBkPSJNMjcuOSw4NS43SDEyYy0xLjEsMC0yLTAuOS0yLTJWNjcuOGMwLTEuMSwwLjktMiwyLTJoMTUuOWMxLjEsMCwyLDAuOSwyLDJ2MTUuOUMyOS45LDg0LjgsMjksODUuNywyNy45LDg1Ljd6Ii8+PHBhdGggZD0iTTg2LDg1LjdINzBjLTEuMSwwLTItMC45LTItMlY2Ny44YzAtMS4xLDAuOS0yLDItMkg4NmMxLjEsMCwyLDAuOSwyLDJ2MTUuOUM4OCw4NC44LDg3LjEsODUuNyw4Niw4NS43eiIvPjxyZWN0IHg9IjE2LjYiIHk9IjIwLjEiIHdpZHRoPSI2LjciIGhlaWdodD0iNTEiLz48cmVjdCB4PSI0NS42IiB5PSItNy44IiB0cmFuc2Zvcm09Im1hdHJpeCg2LjEyMzIzNGUtMTcgLTEgMSA2LjEyMzIzNGUtMTcgMzEuMjUzIDY2LjcwMTgpIiB3aWR0aD0iNi43IiBoZWlnaHQ9IjUxIi8+PHJlY3QgeD0iNDUuNiIgeT0iNTAuMiIgdHJhbnNmb3JtPSJtYXRyaXgoNi4xMjMyMzRlLTE3IC0xIDEgNi4xMjMyMzRlLTE3IC0yNi43NDcgMTI0LjcwMTgpIiB3aWR0aD0iNi43IiBoZWlnaHQ9IjUxIi8+PHJlY3QgeD0iNzQuNiIgeT0iMjAuMSIgd2lkdGg9IjYuNyIgaGVpZ2h0PSI1MSIvPjxnPjxwYXRoIGQ9Ik00OSwyN2MtNy4zLDAtMTMuMyw2LTEzLjMsMTMuM2MwLDEuNSwwLjIsMywwLjcsNC40YzAuMSwwLjIsMC4xLDAuMywwLjIsMC41YzAsMCwwLDAuMSwwLDAuMWMwLjMsMC44LDAuOSwxLjcsMS41LDIuNmMwLjIsMC4zLDAuNCwwLjUsMC41LDAuOGMwLjQsMC42LDAuOCwxLjQsMS4yLDIuMWMwLjQsMC45LDAuNiwyLjMsMC43LDRjMC4xLDEuMiwxLjEsMi4yLDIuMywyLjJoMTIuM2MxLjIsMCwyLjItMSwyLjMtMi4yYzAuMS0xLjYsMC4zLTMuMSwwLjctNGMwLjMtMC43LDAuOC0xLjUsMS4yLTIuMWMwLjItMC4zLDAuNC0wLjYsMC41LTAuOGMwLjYtMC45LDEuMi0xLjgsMS41LTIuNmMwLDAsMC0wLjEsMC0wLjFjMC4xLTAuMiwwLjEtMC4zLDAuMi0wLjVjMC41LTEuNCwwLjctMi45LDAuNy00LjRDNjIuMywzMi45LDU2LjMsMjcsNDksMjd6Ii8+PHBhdGggZD0iTTU2LjEsNTljLTQuNywwLTkuNCwwLTE0LjIsMGMtMC4zLDAtMC42LDAuMS0wLjgsMC40cy0wLjIsMC41LTAuMiwwLjhjMS4yLDQuMSw0LjMsNi4zLDgsNi4zYzMuNywwLDYuOC0yLjIsOC02LjNjMC4xLTAuMywwLTAuNi0wLjItMC44QzU2LjcsNTkuMSw1Ni40LDU5LDU2LjEsNTl6Ii8+PC9nPjwvc3ZnPg==\\\");\\r\\n    }\\r\\n\\r\\n    .selection-non-suggestion-icon {\\r\\n        background-image: url(\\\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuWbvuWxgl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDk4IDkzLjQiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDk4IDkzLjQ7IiB4bWw6c3BhY2U9InByZXNlcnZlIj48cGF0aCBkPSJNMjcuOSwyNy42SDEyYy0xLjEsMC0yLTAuOS0yLTJWOS43YzAtMS4xLDAuOS0yLDItMmgxNS45YzEuMSwwLDIsMC45LDIsMnYxNS45QzI5LjksMjYuNywyOSwyNy42LDI3LjksMjcuNnoiLz48cGF0aCBkPSJNODYsMjcuNkg3MGMtMS4xLDAtMi0wLjktMi0yVjkuN2MwLTEuMSwwLjktMiwyLTJIODZjMS4xLDAsMiwwLjksMiwydjE1LjlDODgsMjYuNyw4Ny4xLDI3LjYsODYsMjcuNnoiLz48cGF0aCBkPSJNMjcuOSw4NS43SDEyYy0xLjEsMC0yLTAuOS0yLTJWNjcuOGMwLTEuMSwwLjktMiwyLTJoMTUuOWMxLjEsMCwyLDAuOSwyLDJ2MTUuOUMyOS45LDg0LjgsMjksODUuNywyNy45LDg1Ljd6Ii8+PHBhdGggZD0iTTg2LDg1LjdINzBjLTEuMSwwLTItMC45LTItMlY2Ny44YzAtMS4xLDAuOS0yLDItMkg4NmMxLjEsMCwyLDAuOSwyLDJ2MTUuOUM4OCw4NC44LDg3LjEsODUuNyw4Niw4NS43eiIvPjxyZWN0IHg9IjE2LjYiIHk9IjIwLjEiIHdpZHRoPSI2LjciIGhlaWdodD0iNTEiLz48cmVjdCB4PSI0NS42IiB5PSItNy44IiB0cmFuc2Zvcm09Im1hdHJpeCg2LjEyMzIzNGUtMTcgLTEgMSA2LjEyMzIzNGUtMTcgMzEuMjUzIDY2LjcwMTgpIiB3aWR0aD0iNi43IiBoZWlnaHQ9IjUxIi8+PHJlY3QgeD0iNDUuNiIgeT0iNTAuMiIgdHJhbnNmb3JtPSJtYXRyaXgoNi4xMjMyMzRlLTE3IC0xIDEgNi4xMjMyMzRlLTE3IC0yNi43NDcgMTI0LjcwMTgpIiB3aWR0aD0iNi43IiBoZWlnaHQ9IjUxIi8+PHJlY3QgeD0iNzQuNiIgeT0iMjAuMSIgd2lkdGg9IjYuNyIgaGVpZ2h0PSI1MSIvPjwvc3ZnPg==\\\");\\r\\n    }\\r\\n\\r\\n    .rect-icon {\\r\\n        background-image: url(\\\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4NCjwhLS0gR2VuZXJhdG9yOiBBZG9iZSBJbGx1c3RyYXRvciAyMy4wLjAsIFNWRyBFeHBvcnQgUGx1Zy1JbiAuIFNWRyBWZXJzaW9uOiA2LjAwIEJ1aWxkIDApICAtLT4NCjxzdmcgdmVyc2lvbj0iMS4xIiBpZD0i5Zu+5bGCXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4Ig0KCSB2aWV3Qm94PSIwIDAgMjAgMjAiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDIwIDIwOyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+DQo8Zz4NCgk8cGF0aCBkPSJNMTMuMzgsMmgtNXYyaDVWMkwxMy4zOCwyeiBNNy4zOCwySDAuNjN2MmwwLDBjMCwxLjEsMCwyLjI1LDAsMi4yNWgyVjRoNC43NVYyTDcuMzgsMnogTTIuNjMsNy4yNWgtMnY1aDJWNy4yNUwyLjYzLDcuMjV6DQoJCSBNMi42MywxMy4yNWgtMlYxN2gybDAsMGwwLDBsMCwwVjEzLjI1TDIuNjMsMTMuMjV6IE03Ljg4LDE1aC01djJoNVYxNUw3Ljg4LDE1eiBNMTMuODgsMTVoLTV2Mmg1VjE1TDEzLjg4LDE1eiBNMTkuMzgsMTAuNWgtMlYxNQ0KCQloLTIuNXYyaDQuNVYxMC41TDE5LjM4LDEwLjV6IE0xOS4zOCw0LjVoLTJ2NWgyVjQuNUwxOS4zOCw0LjV6IE0xOS4zOCwyaC01djJoNVYyTDE5LjM4LDJ6Ii8+DQo8L2c+DQo8L3N2Zz4NCg==\\\");\\r\\n    }\\r\\n\\r\\n    .table-icon {\\r\\n        background-image: url(\\\"data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz48c3ZnIHZlcnNpb249IjEuMSIgaWQ9IuWbvuWxgl8xIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOnhsaW5rPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5L3hsaW5rIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDIwIDIwIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAyMCAyMDsiIHhtbDpzcGFjZT0icHJlc2VydmUiPjxwYXRoIGQ9Ik0xOC42LDJIMS41QzEsMiwwLjcsMi40LDAuNywyLjh2MTMuNmMwLDAuNCwwLjQsMC44LDAuOCwwLjhoMTcuMWMwLjQsMCwwLjgtMC40LDAuOC0wLjhWMi44QzE5LjQsMi40LDE5LDIsMTguNiwyeiBNNi41LDE2LjRIMS40di00LjloNS4xVjE2LjR6IE02LjUsMTAuN0gxLjRWNS44aDUuMVYxMC43eiBNMTIuNiwxNi40SDcuNXYtNC45aDUuMVYxNi40eiBNMTIuNiwxMC43SDcuNVY1LjhoNS4xVjEwLjd6IE0xOC43LDE2LjRoLTUuMXYtNC45aDUuMVYxNi40eiBNMTguNywxMC43aC01LjFWNS44aDUuMVYxMC43eiIvPjwvc3ZnPg==\\\");\\r\\n    }\\r\\n\\r\\n    .revert-icon {\\r\\n        background-image: url(\\\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiI+PHRpdGxlPmljb25zPC90aXRsZT48cGF0aCBkPSJNMjguODM2MzMsMjQuMzkzYy0uOTg3NDEtMy45NDk2NC0zLjk0OTY0LTYuOTExODctMTMuODIzNzQtNi45MTE4N3YzLjk0OTY0TDMuMTYzNjcsMTQuNTE4ODgsMTUuMDEyNTksNy42MDd2My45NDk2NGMxMi44MzYzMywwLDEzLjgyMzc0LDguODg2NywxMy44MjM3NCwxMi44MzYzNCIvPjwvc3ZnPg==\\\");\\r\\n    }\\r\\n\\r\\n    .redo-icon {\\r\\n        background-image: url(\\\"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAzMiAzMiI+PHRpdGxlPmljb25zPC90aXRsZT48cGF0aCBkPSJNMy4xNjM2NywyNC4zOTNjLjk4NzQxLTMuOTQ5NjQsMy45NDk2NC02LjkxMTg3LDEzLjgyMzc0LTYuOTExODd2My45NDk2NGwxMS44NDg5Mi02LjkxMTg4TDE2Ljk4NzQxLDcuNjA3djMuOTQ5NjRjLTEyLjgzNjMzLDAtMTMuODIzNzQsOC44ODY3LTEzLjgyMzc0LDEyLjgzNjM0Ii8+PC9zdmc+\\\");\\r\\n    }\\r\\n\\r\\n    .zoom-icon {\\r\\n        background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iICAgICB4bWxuczpjYz0iaHR0cDovL2NyZWF0aXZlY29tbW9ucy5vcmcvbnMjIiAgICAgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIiAgICAgeG1sbnM6c3ZnPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgICAgIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgICAgIHhtbG5zOnNvZGlwb2RpPSJodHRwOi8vc29kaXBvZGkuc291cmNlZm9yZ2UubmV0L0RURC9zb2RpcG9kaS0wLmR0ZCIgICAgIHhtbG5zOmlua3NjYXBlPSJodHRwOi8vd3d3Lmlua3NjYXBlLm9yZy9uYW1lc3BhY2VzL2lua3NjYXBlIiB2ZXJzaW9uPSIxLjEiIHg9IjBweCIgeT0iMHB4IiB2aWV3Qm94PSIwIDAgMTAwIDEyNSI+ICAgIDxnIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAsLTk1Mi4zNjIxOCkiPiAgICAgICAgPHBhdGggc3R5bGU9ImZvbnQtc2l6ZTptZWRpdW07Zm9udC1zdHlsZTpub3JtYWw7Zm9udC12YXJpYW50Om5vcm1hbDtmb250LXdlaWdodDpub3JtYWw7Zm9udC1zdHJldGNoOm5vcm1hbDt0ZXh0LWluZGVudDowO3RleHQtYWxpZ246c3RhcnQ7dGV4dC1kZWNvcmF0aW9uOm5vbmU7bGluZS1oZWlnaHQ6bm9ybWFsO2xldHRlci1zcGFjaW5nOm5vcm1hbDt3b3JkLXNwYWNpbmc6bm9ybWFsO3RleHQtdHJhbnNmb3JtOm5vbmU7ZGlyZWN0aW9uOmx0cjtibG9jay1wcm9ncmVzc2lvbjp0Yjt3cml0aW5nLW1vZGU6bHItdGI7dGV4dC1hbmNob3I6c3RhcnQ7YmFzZWxpbmUtc2hpZnQ6YmFzZWxpbmU7b3BhY2l0eToxO2NvbG9yOiMwMDAwMDA7ZmlsbDojMDAwMDAwO2ZpbGwtb3BhY2l0eToxO3N0cm9rZTpub25lO3N0cm9rZS13aWR0aDo0O21hcmtlcjpub25lO3Zpc2liaWxpdHk6dmlzaWJsZTtkaXNwbGF5OmlubGluZTtvdmVyZmxvdzp2aXNpYmxlO2VuYWJsZS1iYWNrZ3JvdW5kOmFjY3VtdWxhdGU7Zm9udC1mYW1pbHk6U2FuczstaW5rc2NhcGUtZm9udC1zcGVjaWZpY2F0aW9uOlNhbnMiIGQ9Ik0gNDAgNiBDIDIxLjI0NjAxMiA2IDYgMjEuMjQ2MDIgNiA0MCBDIDYgNTguNzUzOSAyMS4yNDYwMDEgNzQgNDAgNzQgQyA0OC42NzA1MjggNzQgNTYuNTgyODU4IDcwLjc2MzkxIDYyLjU5Mzc1IDY1LjQwNjI1IEwgOTAuNTkzNzUgOTMuNDA2MjUgQSAyLjAwMDIgMi4wMDAyIDAgMSAwIDkzLjQwNjI1IDkwLjU2MjUgTCA2NS40MDYyNSA2Mi41NjI1IEMgNzAuNzM5MTMxIDU2LjU1NzMxNiA3NCA0OC42NDc5OTEgNzQgNDAgQyA3NCAyMS4yNDYwMiA1OC43NTM5ODggNiA0MCA2IHogTSA0MCAxMCBDIDU2LjU5MjIzMiAxMCA3MCAyMy40MDc3OCA3MCA0MCBDIDcwIDU2LjU5MjIgNTYuNTkyMjIxIDcwIDQwIDcwIEMgMjMuNDA3Nzc5IDcwIDEwIDU2LjU5MjIgMTAgNDAgQyAxMCAyMy40MDc3OCAyMy40MDc3NjggMTAgNDAgMTAgeiAiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDAsOTUyLjM2MjE4KSIvPiAgICA8L2c+PC9zdmc+);\\r\\n    }\\r\\n\\r\\n    .zoom-out-icon {\\r\\n        background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciICAgICB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDEwMCAxMjUiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDEwMCAxMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4gICAgPHBhdGggZD0iTTgyLDQ2djhIMTh2LThIODJ6Ii8+PC9zdmc+);\\r\\n    }\\r\\n\\r\\n    .zoom-in-icon {\\r\\n        background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciICAgICB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDEwMCAxMjUiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDEwMCAxMDA7IiB4bWw6c3BhY2U9InByZXNlcnZlIj4gICAgPHBhdGggZD0iTTgyLDU0SDU0djI4aC04VjU0SDE4di04aDI4VjE4aDh2MjhoMjhWNTR6Ii8+PC9zdmc+);\\r\\n    }\\r\\n}\\r\\n\\r\\n.non-framed-mark {\\r\\n    opacity: 0.3;\\r\\n}\\r\\n\\r\\n.highlight-selection-frame {\\r\\n    cursor: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAG5GlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDE5LTA1LTI5VDExOjI0OjUyKzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOS0wNS0yOVQxMTozMDozOCswODowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxOS0wNS0yOVQxMTozMDozOCswODowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpiOTBkMjk0ZS0xYzFlLWViNDYtYTJiZS0yODBkMmQxMjQzYmQiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo1MzA1MTViZi01ZDBkLTAzNGYtYTU2NC1mYzZkMmRkNGZlYTIiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpiZDMyZGQwYS04MTJmLWUzNGEtOWIwNC0xODcyNzZmOGUwODgiPiA8cGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8cmRmOkJhZz4gPHJkZjpsaT5hZG9iZTpkb2NpZDpwaG90b3Nob3A6MDEzMzlmMTQtZmQxMC1hNzRkLWJmN2QtMjE2MjllMTMxMzAxPC9yZGY6bGk+IDxyZGY6bGk+YWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmJhZDRhZTdhLTQyYWQtMjY0Zi1iNzViLTIyNTVlN2FhYWQ5YTwvcmRmOmxpPiA8L3JkZjpCYWc+IDwvcGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmJkMzJkZDBhLTgxMmYtZTM0YS05YjA0LTE4NzI3NmY4ZTA4OCIgc3RFdnQ6d2hlbj0iMjAxOS0wNS0yOVQxMToyNDo1MiswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpiOTBkMjk0ZS0xYzFlLWViNDYtYTJiZS0yODBkMmQxMjQzYmQiIHN0RXZ0OndoZW49IjIwMTktMDUtMjlUMTE6MzA6MzgrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz4N9//7AAADOUlEQVRIidWWz0srVxTHvydRsTFkCAMpBIygIC4UGwKCEhdGUBe6KKYL/wQLgqQ7N7Vd1ScuXBX/ANeKu2gUBAdR0UWUYUBCNplIDERNDcyQH99utDxeM/Ps4i36hbO4cw/fz+XOOfdeIYlvKc83df8aQER8IjItIlNv4x9EZEdETkTkp7dvXhFx9iHZNgD4fD4fp6enOTU1RQA/BoNB7uzs8OTkhP39/QQw6/V66fF4CMDT1scFMDw8PMxMJsPDw0P6/X6qqsqrqyvWajX29fVxdnaWW1tbTCQSBJBo5+O2RSIiCAaDGBwcRG9vL0hCURS0Wi3Yto25uTnMz89DVVUAUP/rPyiVSiWYpolAIIBIJIJWqwWfz4dqtQpFUTAyMgLbtpHP5wHAFJF1Efn+o4BKpVJBqVRCIBDA0NAQRAR+vx+1Wg2RSAThcBjZbBa5XA4TExPa+vr6rwBSHwKQbDQajd9M04TX60UsFoOiKOju7sbLywsGBgYQDAaRzWYRCoWwsbGBVCoFAMuuABEJiUiPiAiAQqFQQLPZRCwWQyKRQEdHB0hicnIStm3j4eEBCwsLiMfjODg4AICDL1f6eeUkQ6EQe3p6KCIEkEwmkyyXy7Rtm7e3tyTJx8dHWpbF09NTplIpZjIZ3t3dMR6PE0DcsUwBHB8fH3N1dZWqqhLAzMzMDHVdZztpmsbz83M+PT1xe3ubnZ2dBNDpBtB1XadlWVxZWSGA36PRKM/OztoC6vU66/U6NU3j2NgYAYy5NhqAlfHxcebzeZbLZS4vL3NxcdER8K7NzU12dXURQNdXOxnA2traGqvVKguFAnVd5/Pzs6O5aZpcWloigKUvvZwA4XA4zOvra9dVvyudTnN0dJQARtsB/lWmJIvFYvHPi4sLWJbl1Cb/yDAM5HI5AMi1m3dqtN3d3V0YhuFq3mg0YBgGXl9ffyb5+mEASU3TtM2joyPYtu0IKBaLuL+/B4B7pxy3s2hvb28Pl5eXjgk3NzcwTRMATKecDqcJkuci8sv+/v5WNBpFq9VCs9kEAIgIPB4P0um06/6/G7ldOt8B+ATgLwAvACpv8fQ2/gNtav/zEP7fXxV/A/5C86W2KDx7AAAAAElFTkSuQmCC\\\"),\\r\\n        auto;\\r\\n}\\r\\n\\r\\n.widget {\\r\\n    float: left;\\r\\n    width: 98%;\\r\\n    margin: 0 1%;\\r\\n    height: var(--title-height);\\r\\n}\\r\\n\\r\\n.checkbox-container {\\r\\n    display: inline-block;\\r\\n    position: relative;\\r\\n    padding-left: 20px;\\r\\n    cursor: pointer;\\r\\n    -webkit-user-select: none;\\r\\n    -moz-user-select: none;\\r\\n    -ms-user-select: none;\\r\\n    user-select: none;\\r\\n    font-size: 10pt;\\r\\n    line-height: 16px;\\r\\n    font-weight: normal;\\r\\n    color: var(--gray13);\\r\\n\\r\\n    input {\\r\\n        position: absolute;\\r\\n        opacity: 0;\\r\\n        width: 0;\\r\\n        height: 0;\\r\\n        cursor: pointer;\\r\\n    }\\r\\n\\r\\n    .checkmark {\\r\\n        position: absolute;\\r\\n        top: 0;\\r\\n        left: 0;\\r\\n        height: 14px;\\r\\n        width: 14px;\\r\\n        background-color: var(--gray1);\\r\\n\\r\\n        &:after {\\r\\n            content: \\\"\\\";\\r\\n            position: absolute;\\r\\n            display: none;\\r\\n            left: 4px;\\r\\n            top: 0px;\\r\\n            width: 4px;\\r\\n            height: 8px;\\r\\n            border: solid white;\\r\\n            border-width: 0 2px 2px 0;\\r\\n            -webkit-transform: rotate(45deg);\\r\\n            -ms-transform: rotate(45deg);\\r\\n            transform: rotate(45deg);\\r\\n        }\\r\\n    }\\r\\n\\r\\n    &:hover input~.checkmark {\\r\\n        background-color: #ccc;\\r\\n    }\\r\\n\\r\\n    input:checked~.checkmark {\\r\\n        background-color: var(--highlight-blue);\\r\\n    }\\r\\n\\r\\n    input:checked~.checkmark:after {\\r\\n        display: block;\\r\\n    }\\r\\n}\\r\\n\\r\\n/* view content */\\r\\n.view-content {\\r\\n    --view-content-margin-v: 5px;\\r\\n    float: left;\\r\\n    width: calc(100% - 12px);\\r\\n    height: calc(100% - 8px);\\r\\n    margin: calc(var(--title-height) + 4px + var(--view-content-margin-v)) 6px 0;\\r\\n    // width: 100%;\\r\\n    // height: 100%;\\r\\n    // margin: 0;\\r\\n}\\r\\n\\r\\n.data-view-content,\\r\\n.chart-view-content,\\r\\n.video-view-content {\\r\\n    @extend .view-content;\\r\\n    background: var(--gray1);\\r\\n    height: calc(100% - 35px - 26px);\\r\\n\\r\\n    svg {\\r\\n        float: left;\\r\\n        width: 100%;\\r\\n        height: 100%;\\r\\n    }\\r\\n}\\r\\n\\r\\n.data-view-content {\\r\\n    background: var(--gray3);\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n}\\r\\n\\r\\n.attr-wrapper {\\r\\n    margin-top: 6px;\\r\\n    box-sizing: border-box;\\r\\n    padding: 0px 10px;\\r\\n    width: 100%;\\r\\n    display: flex;\\r\\n\\r\\n    & div {\\r\\n        clear: both;\\r\\n        float: left;\\r\\n\\r\\n        &:first-child {\\r\\n            flex: 3;\\r\\n        }\\r\\n\\r\\n        &:last-child {\\r\\n            flex: 2;\\r\\n            transition: all 0.2s cubic-bezier(0.445, 0.05, 0.55, 0.95);\\r\\n        }\\r\\n\\r\\n        div {\\r\\n            width: 100%;\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\n.non-sortable-attr-wrapper {\\r\\n    &>div {\\r\\n        &:last-child {\\r\\n            flex: 0;\\r\\n            width: 0;\\r\\n            opacity: 0;\\r\\n        }\\r\\n    }\\r\\n\\r\\n    #attrBtnContainer span {\\r\\n        width: 100%;\\r\\n    }\\r\\n}\\r\\n\\r\\n.data-column-title {\\r\\n    float: left;\\r\\n    text-transform: capitalize;\\r\\n    font-size: 10pt;\\r\\n    display: block;\\r\\n    box-sizing: border-box;\\r\\n    padding: 0 4px;\\r\\n    width: 100%;\\r\\n    height: 26px;\\r\\n    line-height: 26px;\\r\\n    background: var(--gray7);\\r\\n    color: var(--gray14);\\r\\n}\\r\\n\\r\\n.data-table-wrapper {\\r\\n    box-sizing: border-box;\\r\\n    // padding: 0px 10px;\\r\\n    // margin-top: 10px;\\r\\n    flex: 1;\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n    overflow: auto;\\r\\n\\r\\n    .data-table-title {\\r\\n        box-sizing: border-box;\\r\\n        padding: 0 4px;\\r\\n        height: 26px;\\r\\n        line-height: 26px;\\r\\n        background: var(--gray7);\\r\\n\\r\\n        .data-table-title-text {\\r\\n            float: left;\\r\\n            text-transform: capitalize;\\r\\n            color: var(--gray14);\\r\\n            font-size: 10pt;\\r\\n        }\\r\\n\\r\\n        .drop-down {\\r\\n            float: right;\\r\\n            width: 14px;\\r\\n            height: 14px;\\r\\n            margin: 6px;\\r\\n            background-color: none;\\r\\n            background-image: url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciICAgICB4bWxuczp4bGluaz0iaHR0cDovL3d3dy53My5vcmcvMTk5OS94bGluayIgdmVyc2lvbj0iMS4xIiB4PSIwcHgiIHk9IjBweCIgdmlld0JveD0iMCAwIDEwMCAxMjUiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDEwMCAxMDAiIHhtbDpzcGFjZT0icHJlc2VydmUiPiAgICA8cGF0aCBkPSJNNDcuNDQ5LDY2LjE4Mkw0Ny40NDksNjYuMTgyYy0wLjY2MywwLTEuMjk5LTAuMjY0LTEuNzY4LTAuNzMybC0yNy4zNi0yNy4zNjNjLTAuOTc3LTAuOTc3LTAuOTc3LTIuNTYsMC0zLjUzNSAgYzAuOTc3LTAuOTc3LDIuNTU5LTAuOTc3LDMuNTM1LDBsMjUuNTkzLDI1LjU5NmwyNS41OTUtMjUuNTk0YzAuOTc3LTAuOTc3LDIuNTU5LTAuOTc3LDMuNTM1LDBzMC45NzcsMi41NTksMCwzLjUzNUw0OS4yMTcsNjUuNDQ5ICBDNDguNzQ4LDY1LjkxOCw0OC4xMTIsNjYuMTgyLDQ3LjQ0OSw2Ni4xODJ6Ii8+PC9zdmc+);\\r\\n            background-repeat: no-repeat;\\r\\n            background-size: 100% auto;\\r\\n            transform: rotate(180deg);\\r\\n            filter: invert(50%);\\r\\n\\r\\n            &:hover {\\r\\n                filter: invert(0%);\\r\\n                cursor: pointer;\\r\\n            }\\r\\n        }\\r\\n\\r\\n        .left-up-icon {\\r\\n            transform: rotate(0deg);\\r\\n        }\\r\\n    }\\r\\n\\r\\n    .data-table-container {\\r\\n        width: 100%;\\r\\n        flex: 1;\\r\\n        overflow: auto;\\r\\n        // margin-top: 6px;\\r\\n        transition: all 0.2s cubic-bezier(0.445, 0.05, 0.55, 0.95);\\r\\n    }\\r\\n\\r\\n    .hidden-data-table {\\r\\n        flex: none;\\r\\n        height: 0px;\\r\\n        overflow: hidden;\\r\\n    }\\r\\n}\\r\\n\\r\\n.kf-view-content {\\r\\n    @extend .view-content;\\r\\n    --kf-view-content-margin: 4px;\\r\\n    box-sizing: border-box;\\r\\n    width: 100%;\\r\\n    height: calc(100% - var(--title-height) - var(--kf-view-content-margin));\\r\\n    padding: 0;\\r\\n    display: flex;\\r\\n    flex-direction: column;\\r\\n    margin-top: calc(var(--title-height) + var(--kf-view-content-margin));\\r\\n    margin-left: 0;\\r\\n}\\r\\n\\r\\n.kf-panel {\\r\\n    --kf-panel-margin: 4px;\\r\\n    width: calc(100% - var(--kf-panel-margin) * 2);\\r\\n    height: 100%;\\r\\n    margin-left: var(--kf-panel-margin);\\r\\n    overflow-x: auto;\\r\\n    overflow-y: hidden;\\r\\n}\\r\\n\\r\\n.kf-title {\\r\\n    width: 100px;\\r\\n}\\r\\n\\r\\n.single-select {\\r\\n    // cursor: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAQAAAC1+jfqAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAAAmJLR0QAAKqNIzIAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAAHdElNRQfjBQ0LMh59pBLSAAAAXUlEQVQoz4XRyw2AQAhF0buwWwvxgxttwD5sxWJwYTSTYebBioQTIHkAcDAj68TZMiDJCwT5gGMZ6JASOGsGGqQGgUTgLBlwRoChOmZcf3/HDY3/S2CggAxrZ+qNHtmgUBreRHxSAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE5LTA1LTEzVDA5OjUwOjMwKzAyOjAwlrKGxgAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxOS0wNS0xM1QwOTo1MDozMCswMjowMOfvPnoAAAAZdEVYdFNvZnR3YXJlAHd3dy5pbmtzY2FwZS5vcmeb7jwaAAAAAElFTkSuQmCC\\\"),\\r\\n    cursor: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAAZCAYAAAA8CX6UAAAACXBIWXMAAC4jAAAuIwF4pT92AAABD0lEQVQ4jaXVgW2EMAwFUBvdAIxwI4QNYAJWSDfpBh0hMAEjpBsAG7BBs8GvjJITd0dok1iyCBF6MRAMAfgEUFNpALAA5lKs8kdFRALesyWpaJ5nSAL4AaCyK3LOUdd1tCxL7StLxsKtFWPV8aQEq14ncrE3KBc7hSJYmwUFrGkaGoYhYDp6sewjay1keJXGGPg4x/4L/YmlQJdYKhTDbrFnp7Wmvu9pXdfH3LZte47jSEopSRGJmYfTipRSYcXZt5nQamKh3yqSlay1Mvxm5u7ibUvLuR8nHhXVdR3aSXKje9qQ0zRJRY6IPpjZZUHGGGrb/SvomHlJQfbwD/J61yZCX9nIATJFiIfK/2tE9Av3xG0kg5Y0DQAAAABJRU5ErkJggg==\\\"),\\r\\n        auto;\\r\\n}\\r\\n\\r\\n.lasso-select {\\r\\n    cursor: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAC4jAAAuIwF4pT92AAAGymlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDE5LTA1LTEzVDE2OjE0OjI0KzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE5LTA1LTEzVDE2OjE2OjM1KzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOS0wNS0xM1QxNjoxNjozNSswODowMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo3ZTliYjliNi1iN2JjLTBhNDUtYmZjNS02Zjg1YjgzZWIzYjciIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo0ZTg2ZDFkZS01YmZkLWY5NGEtYmI1NS1kYmU0NTlhMTk5OGQiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpiODAwMzVhYS1mMjYwLTMyNGQtYjk3OS00ZmExYWQyYWY2ODAiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOmI4MDAzNWFhLWYyNjAtMzI0ZC1iOTc5LTRmYTFhZDJhZjY4MCIgc3RFdnQ6d2hlbj0iMjAxOS0wNS0xM1QxNjoxNDoyNCswODowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTkgKFdpbmRvd3MpIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo3M2U0NzllMi1mZTY3LWIyNGQtYjI4Zi00Mzg1NGFlNzNhNDgiIHN0RXZ0OndoZW49IjIwMTktMDUtMTNUMTY6MTQ6MjQrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6N2U5YmI5YjYtYjdiYy0wYTQ1LWJmYzUtNmY4NWI4M2ViM2I3IiBzdEV2dDp3aGVuPSIyMDE5LTA1LTEzVDE2OjE2OjM1KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+XAj1tAAAAZ9JREFUSIm91U9oz3Ecx/HHb9uBZI1QLCUJv7aTi3LZRea3w25yMOK+ciA3/VxcHOXgIge0Wk5TFkXJRUS7zHGtMEXjMETU1+Hz1j6t38/P77d9vevb9/t5v949X5//30pRFMqOC7hRpsEJFFjE4TIMBvE+TApMY+taGqzHk8zgz1NfS5PrDQwKfMKR1YB74v26ib4JD6QRDuNHpu1CFVuivYDnWPoXg5d4ijd4gVn04SRGwrjAtzBdF0bb8Rln8DgH7rQ8LbMNRlLHTJjWcTDrXB67MRmc8ZXixxBqWW4Uv3AHmxsAm8XRYI3lybd4lbXHo+hAG+A8ZvAwT1yzvGMGpZ5XO4ST1vVentiI7viexOVVwGvS6EebFdzHUIfwasDP/a1oCuc7gJ8N+MVWhfuj8ANOt6jtxSXMYR6HcrHRXoYNuIq9uIkBTGCHtE7bpI0wIJ2hJel83FoJambwNbSadBkuSFP2CN/xM6BTuC3dWW3HMdzFKTzD8U4glRb6PukO6sceXGnXoLuFvoh36MIXaSHbikrZP/2uUun/w+A3oqJjgwWsALIAAAAASUVORK5CYII=\\\"),\\r\\n        auto;\\r\\n}\\r\\n\\r\\n.grab-chart {\\r\\n    cursor: move;\\r\\n}\\r\\n\\r\\n.grab-selection {\\r\\n    cursor: url(\\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAGb2lUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDE5LTA1LTI0VDE1OjEyOjQ5KzA4OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDE5LTA1LTI0VDE1OjEyOjQ5KzA4OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxOS0wNS0yNFQxNToxMjo0OSswODowMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDphNGM2ZTdmZi04YWM0LTEwNDgtYjlkNS1iYTM5NzZiODhkNTkiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDpiYWQ0YWU3YS00MmFkLTI2NGYtYjc1Yi0yMjU1ZTdhYWFkOWEiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo5NWUxMjJlNy1lMGVjLWQ2NDktYWQwZC04ZjA4ZGM2MDAwNDQiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIj4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo5NWUxMjJlNy1lMGVjLWQ2NDktYWQwZC04ZjA4ZGM2MDAwNDQiIHN0RXZ0OndoZW49IjIwMTktMDUtMjRUMTU6MTI6NDkrMDg6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDQyAyMDE5IChXaW5kb3dzKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6YTRjNmU3ZmYtOGFjNC0xMDQ4LWI5ZDUtYmEzOTc2Yjg4ZDU5IiBzdEV2dDp3aGVuPSIyMDE5LTA1LTI0VDE1OjEyOjQ5KzA4OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDxyZGY6QmFnPiA8cmRmOmxpPmFkb2JlOmRvY2lkOnBob3Rvc2hvcDowMTMzOWYxNC1mZDEwLWE3NGQtYmY3ZC0yMTYyOWUxMzEzMDE8L3JkZjpsaT4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz456hG0AAADFUlEQVRIie2VzU8TQRiHf7Pbz4UQxRZaIgEhSAUaSCkEwoVE0gtqCDERvOHVA948cOI/wMTYGxc8ES9VKgcx4QAajZUEjFkbq3wGJfQDdlnC7rKvB2ixUqAc9OSTTLKZSeaZ+b377jIiwt+E+6u7/wuBKf3Q3R04snI8eJ7D5OSUV1XVuwB+lJdffrmysnoDQGl5+eWnxcUXPn3+/AUWixnt7a1IJFLY3t5GXZ0HoVD4uGBubj4zyfMmEBkdqqrOBAIBLC8vQxTFkYaGBrhcLkxNTT1cWVl9BeCKpmnfUqmtexzH1hhjx69ARCAicBwHjuPA85nUosPDw0RE+0REwWCQDjGGhoaoq6uLQqEQ9fX1EYCfgmCvaGz04s6d3syeRHQkcLtdcLtdKCtzoaTEAQCJ2dk3dALG4SAi0hnjCAABeNbW5jfnFAiCHYJgh81mQ2FhAQCsTUyETxJksbi4uB+JRKi5uZkAjPwuyOShKLtQlF04nQ4IggAA2sGhzqaiooLz+XwYGBgAgJacb1GaVCrVKkmyH8BFWZbzEqTZ2NgAgMRpgseSJN/3+/2w2+3wer0GztEr6+vrALCZNZnOijF22+l0UiwW+7OI+bLf0dFBJpNpKGeRATwfHHyQ3vzcqKpqmEwmAtCZs8gAopHIh7zz/pNwOMx0XZerqipnckZUXV3pAKD09/cTHTbXOTB6enoIwJjbXZq70Xp7b6KpyXsVwGpnZyfpup53VIqiGGazmUpLndevXavNEmQikiQZNTXV0ba2lrrp6en52tpatrm5mVcjjI09ZZqm/dA0/XUymcpaywh4nocs76CqqnK7uzvQGIvFXng8Hra0tHSWhILBIAA8cTguwWIx5xbs7CiQJBnR6Fckk1uor/fcisfj78fHxxkOWvqkgbW1VTDG3sbjCUiSlCXINFos9h1EBvb2VOi6DqvVCp7n9dHRUSwsLDDDMI4dPf15TiaTsNmsF4qKCqGqWm6B1WoFY0BBQQEYY7BYLCCiR6IofhRF8bSIGM/zus/X+K6oqBB7e2r2Iv3/6Z/BL5oAtNSvyPOCAAAAAElFTkSuQmCC\\\"),\\r\\n        auto;\\r\\n}\\r\\n\\r\\n.multi-charts-cover {\\r\\n    width: 100%;\\r\\n    height: 100%;\\r\\n    background: var(--gray1);\\r\\n\\r\\n    .row-chart-container {\\r\\n        width: 100%;\\r\\n        height: 33.33%;\\r\\n\\r\\n        .chart-item-container {\\r\\n            float: left;\\r\\n            width: 33.33%;\\r\\n            height: 100%;\\r\\n            box-sizing: border-box;\\r\\n            border: 3px solid var(--gray5);\\r\\n            padding: 6px;\\r\\n\\r\\n            svg {\\r\\n                height: 100%;\\r\\n            }\\r\\n\\r\\n            p {\\r\\n                margin-top: 25%;\\r\\n                text-align: center;\\r\\n                font-size: 11pt;\\r\\n                font-weight: 600;\\r\\n                color: var(--gray14);\\r\\n            }\\r\\n        }\\r\\n    }\\r\\n}\\r\\n\\r\\n.confirm-button {\\r\\n    padding: 4px 8px;\\r\\n    margin: 2px;\\r\\n    cursor: pointer;\\r\\n    position: absolute;\\r\\n    bottom: 30px;\\r\\n    right: 12px;\\r\\n    background-color: #f2f2f2;\\r\\n    font-weight: 600;\\r\\n    border-radius: 5px;\\r\\n    border: solid 2px #dadada\\r\\n}\\r\\n\\r\\n.confirm-button:hover {\\r\\n    background-color: #676767;\\r\\n    color: #e6e6e6\\r\\n}\"],\"sourceRoot\":\"\"}]);\n// Exports\nexport default ___CSS_LOADER_EXPORT___;\n","\"use strict\";\n\n/*\n  MIT License http://www.opensource.org/licenses/mit-license.php\n  Author Tobias Koppers @sokra\n*/\nmodule.exports = function (cssWithMappingToString) {\n  var list = [];\n\n  // return the list of modules as css string\n  list.toString = function toString() {\n    return this.map(function (item) {\n      var content = \"\";\n      var needLayer = typeof item[5] !== \"undefined\";\n      if (item[4]) {\n        content += \"@supports (\".concat(item[4], \") {\");\n      }\n      if (item[2]) {\n        content += \"@media \".concat(item[2], \" {\");\n      }\n      if (needLayer) {\n        content += \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\");\n      }\n      content += cssWithMappingToString(item);\n      if (needLayer) {\n        content += \"}\";\n      }\n      if (item[2]) {\n        content += \"}\";\n      }\n      if (item[4]) {\n        content += \"}\";\n      }\n      return content;\n    }).join(\"\");\n  };\n\n  // import a list of modules into the list\n  list.i = function i(modules, media, dedupe, supports, layer) {\n    if (typeof modules === \"string\") {\n      modules = [[null, modules, undefined]];\n    }\n    var alreadyImportedModules = {};\n    if (dedupe) {\n      for (var k = 0; k < this.length; k++) {\n        var id = this[k][0];\n        if (id != null) {\n          alreadyImportedModules[id] = true;\n        }\n      }\n    }\n    for (var _k = 0; _k < modules.length; _k++) {\n      var item = [].concat(modules[_k]);\n      if (dedupe && alreadyImportedModules[item[0]]) {\n        continue;\n      }\n      if (typeof layer !== \"undefined\") {\n        if (typeof item[5] === \"undefined\") {\n          item[5] = layer;\n        } else {\n          item[1] = \"@layer\".concat(item[5].length > 0 ? \" \".concat(item[5]) : \"\", \" {\").concat(item[1], \"}\");\n          item[5] = layer;\n        }\n      }\n      if (media) {\n        if (!item[2]) {\n          item[2] = media;\n        } else {\n          item[1] = \"@media \".concat(item[2], \" {\").concat(item[1], \"}\");\n          item[2] = media;\n        }\n      }\n      if (supports) {\n        if (!item[4]) {\n          item[4] = \"\".concat(supports);\n        } else {\n          item[1] = \"@supports (\".concat(item[4], \") {\").concat(item[1], \"}\");\n          item[4] = supports;\n        }\n      }\n      list.push(item);\n    }\n  };\n  return list;\n};","\"use strict\";\n\nmodule.exports = function (url, options) {\n  if (!options) {\n    options = {};\n  }\n  if (!url) {\n    return url;\n  }\n  url = String(url.__esModule ? url.default : url);\n\n  // If url is already wrapped in quotes, remove them\n  if (/^['\"].*['\"]$/.test(url)) {\n    url = url.slice(1, -1);\n  }\n  if (options.hash) {\n    url += options.hash;\n  }\n\n  // Should url be wrapped?\n  // See https://drafts.csswg.org/css-values-3/#urls\n  if (/[\"'() \\t\\n]|(%20)/.test(url) || options.needQuotes) {\n    return \"\\\"\".concat(url.replace(/\"/g, '\\\\\"').replace(/\\n/g, \"\\\\n\"), \"\\\"\");\n  }\n  return url;\n};","\"use strict\";\n\nmodule.exports = function (item) {\n  var content = item[1];\n  var cssMapping = item[3];\n  if (!cssMapping) {\n    return content;\n  }\n  if (typeof btoa === \"function\") {\n    var base64 = btoa(unescape(encodeURIComponent(JSON.stringify(cssMapping))));\n    var data = \"sourceMappingURL=data:application/json;charset=utf-8;base64,\".concat(base64);\n    var sourceMapping = \"/*# \".concat(data, \" */\");\n    return [content].concat([sourceMapping]).join(\"\\n\");\n  }\n  return [content].join(\"\\n\");\n};","export default __webpack_public_path__ + \"7ae788e31d95ca26c0b52ebd21ae4b63.svg\";","export default __webpack_public_path__ + \"43034240a2903a0c1ce7646e1c4adcaa.svg\";","export default __webpack_public_path__ + \"cc89cdc13bb52c6ae70f76ea80c87c0d.svg\";","export default __webpack_public_path__ + \"b1adb664a45c1d06439c2d711f884a43.svg\";","export default __webpack_public_path__ + \"c1ca8d46f5b0b5ade7b0cdf6c2f630b6.svg\";","export default __webpack_public_path__ + \"35d87ab1d49030cc73b0a7f08781e762.svg\";","export default __webpack_public_path__ + \"21504b39438890dda42d0d0eacc6870b.svg\";","export default __webpack_public_path__ + \"173b58964399fd2816c3706fb7a5948f.svg\";","export default __webpack_public_path__ + \"6cc9fd57e4002800bcefa7f2fb342c33.svg\";","export default __webpack_public_path__ + \"0b86dd7bedacfb86f39497315533a1a1.svg\";","export default __webpack_public_path__ + \"1ed1d8ca977d03fb5f054fd6e617c735.svg\";","export default __webpack_public_path__ + \"6cb052991ea3322a44a872301ac7d871.svg\";","export default __webpack_public_path__ + \"0965a2ed442e8b9cdb18c1827fd8e666.svg\";","export default __webpack_public_path__ + \"956bb4202adee74f2ccb8874ed085d01.svg\";","export default __webpack_public_path__ + \"8789e829e5793e13bdc79b1050046a0e.svg\";","export default __webpack_public_path__ + \"a9b6ffb97a04deda93f5c7b17cd63664.svg\";","export default __webpack_public_path__ + \"fdde2f2d10580c897d014230cddadf1c.svg\";","export default __webpack_public_path__ + \"aa48e9e431256c5fa1c2dbc8757c9fb7.svg\";","export default __webpack_public_path__ + \"867e8fe4e53dc2bb5eb08ef9a77e225b.svg\";","export default __webpack_public_path__ + \"8215bf1e9fdb68b411d334c077c09498.svg\";","export default __webpack_public_path__ + \"5bf5123399a8d9361ac04dcf1390750b.svg\";","export default __webpack_public_path__ + \"876383e106b23943445ecf78777de24e.png\";","export default __webpack_public_path__ + \"91528b6bf23f915e889d527a6fcab40d.png\";","export default __webpack_public_path__ + \"adf6da0902a9d2a8074aed2d3be496a9.png\";","export default __webpack_public_path__ + \"02fc3bf4a5b43db4f8177ed0650e143b.png\";","export default __webpack_public_path__ + \"25ba14744c1ca6a69e9a528a8f2d73d4.png\";","export default __webpack_public_path__ + \"38fbd1b5d3bc8bfd14844c907f1f65d1.png\";","export default __webpack_public_path__ + \"51bac1298816ccf91fb40e1e5add3406.png\";","export default __webpack_public_path__ + \"8dbacb68edacffc8f9173271b59f36ec.png\";","export default __webpack_public_path__ + \"414d14d20d5f13e03f39decb18a9f7d7.png\";","export default __webpack_public_path__ + \"f02b9fa11f448e87ef005e0d06256327.png\";","export default __webpack_public_path__ + \"93271b8834153d62b8f3c94a582713a5.png\";","export default __webpack_public_path__ + \"f81c54528ca1e6a4269dfb53b531d362.png\";","export default __webpack_public_path__ + \"f048ec7486cab56fe276e3123237c224.png\";","export default __webpack_public_path__ + \"e22b479c3073c4c7783669e560fe1d76.png\";","export default __webpack_public_path__ + \"1b3657181168675d079917325919d832.png\";","export default __webpack_public_path__ + \"b76b66c3b1eb5d190628896ddb498523.png\";","export default __webpack_public_path__ + \"46260f0b31141abb76ad6ce32514681c.png\";","export default __webpack_public_path__ + \"a7b2c81c12cfe733f0b91a5546f90698.png\";","export default __webpack_public_path__ + \"95f13a670cc2ae0319541bcd9bd6d4a3.png\";","export default __webpack_public_path__ + \"5ca470a4bd67bc108edd83dd573e6c43.png\";","export default __webpack_public_path__ + \"3ab3b7c74e4331115d038dbd0ddf3a89.png\";","export default __webpack_public_path__ + \"718e41bd8dbd7cbd3fe1c5a3d03ad77b.png\";","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.EasingFactory = void 0;\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\n// parameters extracted from https://easings.net/\nvar EasingFactory =\n/*#__PURE__*/\nfunction () {\n  function EasingFactory() {\n    _classCallCheck(this, EasingFactory);\n  }\n\n  _createClass(EasingFactory, null, [{\n    key: \"linear\",\n    value: function linear() {\n      return [[[1], [1]], [[0], [0]]];\n    }\n  }, {\n    key: \"easeInSine\",\n    value: function easeInSine() {\n      return [[[0.47], [0]], [[0.745], [0.715]]];\n    }\n  }, {\n    key: \"easeOutSine\",\n    value: function easeOutSine() {\n      return [[[0.39], [0.575]], [[0.565], [1]]];\n    }\n  }, {\n    key: \"easeInOutSine\",\n    value: function easeInOutSine() {\n      return [[[0.445], [0.05]], [[0.55], [0.95]]];\n    }\n  }, {\n    key: \"easeInQuad\",\n    value: function easeInQuad() {\n      return [[[0.55], [0.085]], [[0.68], [0.53]]];\n    }\n  }, {\n    key: \"easeOutQuad\",\n    value: function easeOutQuad() {\n      return [[[0.25], [0.46]], [[0.45], [0.94]]];\n    }\n  }, {\n    key: \"easeInOutQuad\",\n    value: function easeInOutQuad() {\n      return [[[0.455], [0.03]], [[0.515], [0.955]]];\n    }\n  }, {\n    key: \"easeInCubic\",\n    value: function easeInCubic() {\n      return [[[0.55], [0.055]], [[0.675], [0.19]]];\n    }\n  }, {\n    key: \"easeOutCubic\",\n    value: function easeOutCubic() {\n      return [[[0.215], [0.61]], [[0.355], [1]]];\n    }\n  }, {\n    key: \"easeInOutCubic\",\n    value: function easeInOutCubic() {\n      return [[[0.645], [0.045]], [[0.355], [1]]];\n    }\n  }, {\n    key: \"easeInQuart\",\n    value: function easeInQuart() {\n      return [[[0.895], [0.03]], [[0.685], [0.22]]];\n    }\n  }, {\n    key: \"easeOutQuart\",\n    value: function easeOutQuart() {\n      return [[[0.165], [0.84]], [[0.44], [1]]];\n    }\n  }, {\n    key: \"easeInOutQuart\",\n    value: function easeInOutQuart() {\n      return [[[0.77], [0]], [[0.175], [1]]];\n    }\n  }, {\n    key: \"easeInQuint\",\n    value: function easeInQuint() {\n      return [[[0.755], [0.05]], [[0.855], [0.06]]];\n    }\n  }, {\n    key: \"easeOutQuint\",\n    value: function easeOutQuint() {\n      return [[[0.23], [1]], [[0.32], [1]]];\n    }\n  }, {\n    key: \"easeInOutQuint\",\n    value: function easeInOutQuint() {\n      return [[[0.86], [0]], [[0.07], [1]]];\n    }\n  }, {\n    key: \"easeInExpo\",\n    value: function easeInExpo() {\n      return [[[0.95], [0.05]], [[0.795], [0.035]]];\n    }\n  }, {\n    key: \"easeOutExpo\",\n    value: function easeOutExpo() {\n      return [[[0.19], [1]], [[0.22], [1]]];\n    }\n  }, {\n    key: \"easeInOutExpo\",\n    value: function easeInOutExpo() {\n      return [[[1], [0]], [[0], [1]]];\n    }\n  }, {\n    key: \"easeInCirc\",\n    value: function easeInCirc() {\n      return [[[0.6], [0.04]], [[0.98], [0.335]]];\n    }\n  }, {\n    key: \"easeOutCirc\",\n    value: function easeOutCirc() {\n      return [[[0.075], [0.82]], [[0.165], [1]]];\n    }\n  }, {\n    key: \"easeInOutCirc\",\n    value: function easeInOutCirc() {\n      return [[[0.785], [0.135]], [[0.15], [0.86]]];\n    }\n  }, {\n    key: \"easeInBack\",\n    value: function easeInBack() {\n      return [[[0.6], [-0.28]], [[0.735], [0.045]]];\n    }\n  }, {\n    key: \"easeOutBack\",\n    value: function easeOutBack() {\n      return [[[0.175], [0.885]], [[0.32], [1.275]]];\n    }\n  }, {\n    key: \"easeInOutBack\",\n    value: function easeInOutBack() {\n      return [[[0.68], [-0.55]], [[0.265], [1.55]]];\n    }\n  }]);\n\n  return EasingFactory;\n}();\n\nexports.EasingFactory = EasingFactory;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9lYXNpbmcudHMiXSwibmFtZXMiOlsiRWFzaW5nRmFjdG9yeSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7OztBQUFBO0lBSWFBLGE7Ozs7Ozs7Ozs2QkFDdUI7QUFDNUIsYUFBTyxDQUFDLENBQUMsQ0FBQyxDQUFELENBQUQsRUFBTSxDQUFDLENBQUQsQ0FBTixDQUFELEVBQWEsQ0FBQyxDQUFDLENBQUQsQ0FBRCxFQUFNLENBQUMsQ0FBRCxDQUFOLENBQWIsQ0FBUDtBQUNIOzs7aUNBRW1DO0FBQ2hDLGFBQU8sQ0FBQyxDQUFDLENBQUMsSUFBRCxDQUFELEVBQVMsQ0FBQyxDQUFELENBQVQsQ0FBRCxFQUFnQixDQUFDLENBQUMsS0FBRCxDQUFELEVBQVUsQ0FBQyxLQUFELENBQVYsQ0FBaEIsQ0FBUDtBQUNIOzs7a0NBRW9DO0FBQ2pDLGFBQU8sQ0FBQyxDQUFDLENBQUMsSUFBRCxDQUFELEVBQVMsQ0FBQyxLQUFELENBQVQsQ0FBRCxFQUFvQixDQUFDLENBQUMsS0FBRCxDQUFELEVBQVUsQ0FBQyxDQUFELENBQVYsQ0FBcEIsQ0FBUDtBQUNIOzs7b0NBRXNDO0FBQ25DLGFBQU8sQ0FBQyxDQUFDLENBQUMsS0FBRCxDQUFELEVBQVUsQ0FBQyxJQUFELENBQVYsQ0FBRCxFQUFvQixDQUFDLENBQUMsSUFBRCxDQUFELEVBQVMsQ0FBQyxJQUFELENBQVQsQ0FBcEIsQ0FBUDtBQUNIOzs7aUNBRW1DO0FBQ2hDLGFBQU8sQ0FBQyxDQUFDLENBQUMsSUFBRCxDQUFELEVBQVMsQ0FBQyxLQUFELENBQVQsQ0FBRCxFQUFvQixDQUFDLENBQUMsSUFBRCxDQUFELEVBQVMsQ0FBQyxJQUFELENBQVQsQ0FBcEIsQ0FBUDtBQUNIOzs7a0NBRW9DO0FBQ2pDLGFBQU8sQ0FBQyxDQUFDLENBQUMsSUFBRCxDQUFELEVBQVMsQ0FBQyxJQUFELENBQVQsQ0FBRCxFQUFtQixDQUFDLENBQUMsSUFBRCxDQUFELEVBQVMsQ0FBQyxJQUFELENBQVQsQ0FBbkIsQ0FBUDtBQUNIOzs7b0NBRXNDO0FBQ25DLGFBQU8sQ0FBQyxDQUFDLENBQUMsS0FBRCxDQUFELEVBQVUsQ0FBQyxJQUFELENBQVYsQ0FBRCxFQUFvQixDQUFDLENBQUMsS0FBRCxDQUFELEVBQVUsQ0FBQyxLQUFELENBQVYsQ0FBcEIsQ0FBUDtBQUNIOzs7a0NBRW9DO0FBQ2pDLGFBQU8sQ0FBQyxDQUFDLENBQUMsSUFBRCxDQUFELEVBQVMsQ0FBQyxLQUFELENBQVQsQ0FBRCxFQUFvQixDQUFDLENBQUMsS0FBRCxDQUFELEVBQVUsQ0FBQyxJQUFELENBQVYsQ0FBcEIsQ0FBUDtBQUNIOzs7bUNBRXFDO0FBQ2xDLGFBQU8sQ0FBQyxDQUFDLENBQUMsS0FBRCxDQUFELEVBQVUsQ0FBQyxJQUFELENBQVYsQ0FBRCxFQUFvQixDQUFDLENBQUMsS0FBRCxDQUFELEVBQVUsQ0FBQyxDQUFELENBQVYsQ0FBcEIsQ0FBUDtBQUNIOzs7cUNBRXVDO0FBQ3BDLGFBQU8sQ0FBQyxDQUFDLENBQUMsS0FBRCxDQUFELEVBQVUsQ0FBQyxLQUFELENBQVYsQ0FBRCxFQUFxQixDQUFDLENBQUMsS0FBRCxDQUFELEVBQVUsQ0FBQyxDQUFELENBQVYsQ0FBckIsQ0FBUDtBQUNIOzs7a0NBRW9DO0FBQ2pDLGFBQU8sQ0FBQyxDQUFDLENBQUMsS0FBRCxDQUFELEVBQVUsQ0FBQyxJQUFELENBQVYsQ0FBRCxFQUFvQixDQUFDLENBQUMsS0FBRCxDQUFELEVBQVUsQ0FBQyxJQUFELENBQVYsQ0FBcEIsQ0FBUDtBQUNIOzs7bUNBRXFDO0FBQ2xDLGFBQU8sQ0FBQyxDQUFDLENBQUMsS0FBRCxDQUFELEVBQVUsQ0FBQyxJQUFELENBQVYsQ0FBRCxFQUFvQixDQUFDLENBQUMsSUFBRCxDQUFELEVBQVMsQ0FBQyxDQUFELENBQVQsQ0FBcEIsQ0FBUDtBQUNIOzs7cUNBRXVDO0FBQ3BDLGFBQU8sQ0FBQyxDQUFDLENBQUMsSUFBRCxDQUFELEVBQVMsQ0FBQyxDQUFELENBQVQsQ0FBRCxFQUFnQixDQUFDLENBQUMsS0FBRCxDQUFELEVBQVUsQ0FBQyxDQUFELENBQVYsQ0FBaEIsQ0FBUDtBQUNIOzs7a0NBRW9DO0FBQ2pDLGFBQU8sQ0FBQyxDQUFDLENBQUMsS0FBRCxDQUFELEVBQVUsQ0FBQyxJQUFELENBQVYsQ0FBRCxFQUFvQixDQUFDLENBQUMsS0FBRCxDQUFELEVBQVUsQ0FBQyxJQUFELENBQVYsQ0FBcEIsQ0FBUDtBQUNIOzs7bUNBRXFDO0FBQ2xDLGFBQU8sQ0FBQyxDQUFDLENBQUMsSUFBRCxDQUFELEVBQVMsQ0FBQyxDQUFELENBQVQsQ0FBRCxFQUFnQixDQUFDLENBQUMsSUFBRCxDQUFELEVBQVMsQ0FBQyxDQUFELENBQVQsQ0FBaEIsQ0FBUDtBQUNIOzs7cUNBRXVDO0FBQ3BDLGFBQU8sQ0FBQyxDQUFDLENBQUMsSUFBRCxDQUFELEVBQVMsQ0FBQyxDQUFELENBQVQsQ0FBRCxFQUFnQixDQUFDLENBQUMsSUFBRCxDQUFELEVBQVMsQ0FBQyxDQUFELENBQVQsQ0FBaEIsQ0FBUDtBQUNIOzs7aUNBRW1DO0FBQ2hDLGFBQU8sQ0FBQyxDQUFDLENBQUMsSUFBRCxDQUFELEVBQVMsQ0FBQyxJQUFELENBQVQsQ0FBRCxFQUFtQixDQUFDLENBQUMsS0FBRCxDQUFELEVBQVUsQ0FBQyxLQUFELENBQVYsQ0FBbkIsQ0FBUDtBQUNIOzs7a0NBRW9DO0FBQ2pDLGFBQU8sQ0FBQyxDQUFDLENBQUMsSUFBRCxDQUFELEVBQVMsQ0FBQyxDQUFELENBQVQsQ0FBRCxFQUFnQixDQUFDLENBQUMsSUFBRCxDQUFELEVBQVMsQ0FBQyxDQUFELENBQVQsQ0FBaEIsQ0FBUDtBQUNIOzs7b0NBRXNDO0FBQ25DLGFBQU8sQ0FBQyxDQUFDLENBQUMsQ0FBRCxDQUFELEVBQU0sQ0FBQyxDQUFELENBQU4sQ0FBRCxFQUFhLENBQUMsQ0FBQyxDQUFELENBQUQsRUFBTSxDQUFDLENBQUQsQ0FBTixDQUFiLENBQVA7QUFDSDs7O2lDQUVtQztBQUNoQyxhQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUQsQ0FBRCxFQUFRLENBQUMsSUFBRCxDQUFSLENBQUQsRUFBa0IsQ0FBQyxDQUFDLElBQUQsQ0FBRCxFQUFTLENBQUMsS0FBRCxDQUFULENBQWxCLENBQVA7QUFDSDs7O2tDQUVvQztBQUNqQyxhQUFPLENBQUMsQ0FBQyxDQUFDLEtBQUQsQ0FBRCxFQUFVLENBQUMsSUFBRCxDQUFWLENBQUQsRUFBb0IsQ0FBQyxDQUFDLEtBQUQsQ0FBRCxFQUFVLENBQUMsQ0FBRCxDQUFWLENBQXBCLENBQVA7QUFDSDs7O29DQUVzQztBQUNuQyxhQUFPLENBQUMsQ0FBQyxDQUFDLEtBQUQsQ0FBRCxFQUFVLENBQUMsS0FBRCxDQUFWLENBQUQsRUFBcUIsQ0FBQyxDQUFDLElBQUQsQ0FBRCxFQUFTLENBQUMsSUFBRCxDQUFULENBQXJCLENBQVA7QUFDSDs7O2lDQUVtQztBQUNoQyxhQUFPLENBQUMsQ0FBQyxDQUFDLEdBQUQsQ0FBRCxFQUFRLENBQUMsQ0FBQyxJQUFGLENBQVIsQ0FBRCxFQUFtQixDQUFDLENBQUMsS0FBRCxDQUFELEVBQVUsQ0FBQyxLQUFELENBQVYsQ0FBbkIsQ0FBUDtBQUNIOzs7a0NBRW9DO0FBQ2pDLGFBQU8sQ0FBQyxDQUFDLENBQUMsS0FBRCxDQUFELEVBQVUsQ0FBQyxLQUFELENBQVYsQ0FBRCxFQUFxQixDQUFDLENBQUMsSUFBRCxDQUFELEVBQVMsQ0FBQyxLQUFELENBQVQsQ0FBckIsQ0FBUDtBQUNIOzs7b0NBRXNDO0FBQ25DLGFBQU8sQ0FBQyxDQUFDLENBQUMsSUFBRCxDQUFELEVBQVMsQ0FBQyxDQUFDLElBQUYsQ0FBVCxDQUFELEVBQW9CLENBQUMsQ0FBQyxLQUFELENBQUQsRUFBVSxDQUFDLElBQUQsQ0FBVixDQUFwQixDQUFQO0FBQ0giLCJzb3VyY2VzQ29udGVudCI6WyIvLyBwYXJhbWV0ZXJzIGV4dHJhY3RlZCBmcm9tIGh0dHBzOi8vZWFzaW5ncy5uZXQvXG5cbmV4cG9ydCB0eXBlIEVhc2luZ0Z1bmN0aW9uID0gbnVtYmVyW11bXVtdXG5cbmV4cG9ydCBjbGFzcyBFYXNpbmdGYWN0b3J5IHtcbiAgICBzdGF0aWMgbGluZWFyKCk6IEVhc2luZ0Z1bmN0aW9uIHtcbiAgICAgICAgcmV0dXJuIFtbWzFdLCBbMV1dLCBbWzBdLCBbMF1dXVxuICAgIH1cblxuICAgIHN0YXRpYyBlYXNlSW5TaW5lKCk6IEVhc2luZ0Z1bmN0aW9uIHtcbiAgICAgICAgcmV0dXJuIFtbWzAuNDddLCBbMF1dLCBbWzAuNzQ1XSwgWzAuNzE1XV1dXG4gICAgfVxuXG4gICAgc3RhdGljIGVhc2VPdXRTaW5lKCk6IEVhc2luZ0Z1bmN0aW9uIHtcbiAgICAgICAgcmV0dXJuIFtbWzAuMzldLCBbMC41NzVdXSwgW1swLjU2NV0sIFsxXV1dXG4gICAgfVxuXG4gICAgc3RhdGljIGVhc2VJbk91dFNpbmUoKTogRWFzaW5nRnVuY3Rpb24ge1xuICAgICAgICByZXR1cm4gW1tbMC40NDVdLCBbMC4wNV1dLCBbWzAuNTVdLCBbMC45NV1dXVxuICAgIH1cblxuICAgIHN0YXRpYyBlYXNlSW5RdWFkKCk6IEVhc2luZ0Z1bmN0aW9uIHtcbiAgICAgICAgcmV0dXJuIFtbWzAuNTVdLCBbMC4wODVdXSwgW1swLjY4XSwgWzAuNTNdXV1cbiAgICB9XG5cbiAgICBzdGF0aWMgZWFzZU91dFF1YWQoKTogRWFzaW5nRnVuY3Rpb24ge1xuICAgICAgICByZXR1cm4gW1tbMC4yNV0sIFswLjQ2XV0sIFtbMC40NV0sIFswLjk0XV1dXG4gICAgfVxuXG4gICAgc3RhdGljIGVhc2VJbk91dFF1YWQoKTogRWFzaW5nRnVuY3Rpb24ge1xuICAgICAgICByZXR1cm4gW1tbMC40NTVdLCBbMC4wM11dLCBbWzAuNTE1XSwgWzAuOTU1XV1dXG4gICAgfVxuXG4gICAgc3RhdGljIGVhc2VJbkN1YmljKCk6IEVhc2luZ0Z1bmN0aW9uIHtcbiAgICAgICAgcmV0dXJuIFtbWzAuNTVdLCBbMC4wNTVdXSwgW1swLjY3NV0sIFswLjE5XV1dXG4gICAgfVxuXG4gICAgc3RhdGljIGVhc2VPdXRDdWJpYygpOiBFYXNpbmdGdW5jdGlvbiB7XG4gICAgICAgIHJldHVybiBbW1swLjIxNV0sIFswLjYxXV0sIFtbMC4zNTVdLCBbMV1dXVxuICAgIH1cblxuICAgIHN0YXRpYyBlYXNlSW5PdXRDdWJpYygpOiBFYXNpbmdGdW5jdGlvbiB7XG4gICAgICAgIHJldHVybiBbW1swLjY0NV0sIFswLjA0NV1dLCBbWzAuMzU1XSwgWzFdXV1cbiAgICB9XG5cbiAgICBzdGF0aWMgZWFzZUluUXVhcnQoKTogRWFzaW5nRnVuY3Rpb24ge1xuICAgICAgICByZXR1cm4gW1tbMC44OTVdLCBbMC4wM11dLCBbWzAuNjg1XSwgWzAuMjJdXV1cbiAgICB9XG5cbiAgICBzdGF0aWMgZWFzZU91dFF1YXJ0KCk6IEVhc2luZ0Z1bmN0aW9uIHtcbiAgICAgICAgcmV0dXJuIFtbWzAuMTY1XSwgWzAuODRdXSwgW1swLjQ0XSwgWzFdXV1cbiAgICB9XG5cbiAgICBzdGF0aWMgZWFzZUluT3V0UXVhcnQoKTogRWFzaW5nRnVuY3Rpb24ge1xuICAgICAgICByZXR1cm4gW1tbMC43N10sIFswXV0sIFtbMC4xNzVdLCBbMV1dXVxuICAgIH1cblxuICAgIHN0YXRpYyBlYXNlSW5RdWludCgpOiBFYXNpbmdGdW5jdGlvbiB7XG4gICAgICAgIHJldHVybiBbW1swLjc1NV0sIFswLjA1XV0sIFtbMC44NTVdLCBbMC4wNl1dXVxuICAgIH1cblxuICAgIHN0YXRpYyBlYXNlT3V0UXVpbnQoKTogRWFzaW5nRnVuY3Rpb24ge1xuICAgICAgICByZXR1cm4gW1tbMC4yM10sIFsxXV0sIFtbMC4zMl0sIFsxXV1dXG4gICAgfVxuXG4gICAgc3RhdGljIGVhc2VJbk91dFF1aW50KCk6IEVhc2luZ0Z1bmN0aW9uIHtcbiAgICAgICAgcmV0dXJuIFtbWzAuODZdLCBbMF1dLCBbWzAuMDddLCBbMV1dXVxuICAgIH1cblxuICAgIHN0YXRpYyBlYXNlSW5FeHBvKCk6IEVhc2luZ0Z1bmN0aW9uIHtcbiAgICAgICAgcmV0dXJuIFtbWzAuOTVdLCBbMC4wNV1dLCBbWzAuNzk1XSwgWzAuMDM1XV1dXG4gICAgfVxuXG4gICAgc3RhdGljIGVhc2VPdXRFeHBvKCk6IEVhc2luZ0Z1bmN0aW9uIHtcbiAgICAgICAgcmV0dXJuIFtbWzAuMTldLCBbMV1dLCBbWzAuMjJdLCBbMV1dXVxuICAgIH1cblxuICAgIHN0YXRpYyBlYXNlSW5PdXRFeHBvKCk6IEVhc2luZ0Z1bmN0aW9uIHtcbiAgICAgICAgcmV0dXJuIFtbWzFdLCBbMF1dLCBbWzBdLCBbMV1dXVxuICAgIH1cblxuICAgIHN0YXRpYyBlYXNlSW5DaXJjKCk6IEVhc2luZ0Z1bmN0aW9uIHtcbiAgICAgICAgcmV0dXJuIFtbWzAuNl0sIFswLjA0XV0sIFtbMC45OF0sIFswLjMzNV1dXVxuICAgIH1cblxuICAgIHN0YXRpYyBlYXNlT3V0Q2lyYygpOiBFYXNpbmdGdW5jdGlvbiB7XG4gICAgICAgIHJldHVybiBbW1swLjA3NV0sIFswLjgyXV0sIFtbMC4xNjVdLCBbMV1dXVxuICAgIH1cblxuICAgIHN0YXRpYyBlYXNlSW5PdXRDaXJjKCk6IEVhc2luZ0Z1bmN0aW9uIHtcbiAgICAgICAgcmV0dXJuIFtbWzAuNzg1XSwgWzAuMTM1XV0sIFtbMC4xNV0sIFswLjg2XV1dXG4gICAgfVxuXG4gICAgc3RhdGljIGVhc2VJbkJhY2soKTogRWFzaW5nRnVuY3Rpb24ge1xuICAgICAgICByZXR1cm4gW1tbMC42XSwgWy0wLjI4XV0sIFtbMC43MzVdLCBbMC4wNDVdXV1cbiAgICB9XG5cbiAgICBzdGF0aWMgZWFzZU91dEJhY2soKTogRWFzaW5nRnVuY3Rpb24ge1xuICAgICAgICByZXR1cm4gW1tbMC4xNzVdLCBbMC44ODVdXSwgW1swLjMyXSwgWzEuMjc1XV1dXG4gICAgfVxuXG4gICAgc3RhdGljIGVhc2VJbk91dEJhY2soKTogRWFzaW5nRnVuY3Rpb24ge1xuICAgICAgICByZXR1cm4gW1tbMC42OF0sIFstMC41NV1dLCBbWzAuMjY1XSwgWzEuNTVdXV1cbiAgICB9XG59Il19","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.calculateBaseTransform = calculateBaseTransform;\nexports.getBoundingBox = getBoundingBox;\nexports.getLeafNodes = getLeafNodes;\nexports.getBaselineHeight = getBaselineHeight;\nexports.encodeLineCap = encodeLineCap;\nexports.encodeLineJoin = encodeLineJoin;\nexports.encodeTextAnchor = encodeTextAnchor;\nexports.greatestCommonDivisor = greatestCommonDivisor;\nexports.leastCommonMultiple = leastCommonMultiple;\n\nfunction calculateBaseTransform(dom, root) {\n  // https://github.com/dagrejs/dagre-d3/issues/202\n  return root.getScreenCTM().inverse().multiply(dom.getScreenCTM());\n}\n\nfunction getBoundingBox(dom) {\n  var svgRoot = dom;\n\n  while (true) {\n    if (svgRoot.parentElement instanceof SVGGraphicsElement) {\n      svgRoot = svgRoot.parentElement;\n    } else {\n      break;\n    }\n  }\n\n  var baseBox = calculateBaseTransform(dom, svgRoot);\n  var refBBox = dom.getBBox();\n  var coordinate = [baseBox.e + refBBox.x, baseBox.f + refBBox.y, refBBox.width + 1, refBBox.height + 1];\n  return coordinate;\n}\n\nfunction getLeafNodes(master) {\n  // https://stackoverflow.com/questions/22289391/how-to-create-an-array-of-leaf-nodes-of-an-html-dom-using-javascript\n  var nodes = Array.prototype.slice.call(master.getElementsByTagName(\"*\"), 0);\n  var leafNodes = nodes.filter(function (elem) {\n    if (elem.hasChildNodes()) {\n      // see if any of the child nodes are elements\n      for (var i = 0; i < elem.childNodes.length; i++) {\n        if (elem.childNodes[i].nodeType == 1) {\n          // there is a child element, so return false to not include\n          // this parent element\n          return false;\n        }\n      }\n    }\n\n    return true;\n  });\n  return leafNodes;\n}\n\nfunction getBaselineHeight(dom) {\n  var canvas = document.createElement('canvas');\n  var ctx = canvas.getContext('2d');\n  var computedStyle = getComputedStyle(dom);\n  var fontSettings = computedStyle.font;\n  ctx.font = fontSettings;\n  var textMetrix = ctx.measureText('ypfgj');\n  return textMetrix.actualBoundingBoxDescent || 0;\n}\n\nfunction encodeLineCap(type) {\n  switch (type) {\n    case 'square':\n      return 3;\n\n    case 'butt':\n      return 1;\n\n    default:\n      return 2;\n  }\n}\n\nfunction encodeLineJoin(type) {\n  switch (type) {\n    case 'miter':\n      return 1;\n\n    case 'bevel':\n      return 3;\n\n    default:\n      return 2;\n  }\n}\n\nfunction encodeTextAnchor(type) {\n  switch (type) {\n    case 'middle':\n      return 2;\n\n    case 'end':\n      return 1;\n\n    default:\n      return 0;\n  }\n}\n\nfunction greatestCommonDivisor(x, y) {\n  x = Math.abs(x);\n  y = Math.abs(y);\n\n  while (y) {\n    var t = y;\n    y = x % y;\n    x = t;\n  }\n\n  return x;\n}\n\nfunction leastCommonMultiple(x, y) {\n  return !x || !y ? 0 : Math.abs(x * y / greatestCommonDivisor(x, y));\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9oZWxwZXIudHMiXSwibmFtZXMiOlsiY2FsY3VsYXRlQmFzZVRyYW5zZm9ybSIsImRvbSIsInJvb3QiLCJnZXRTY3JlZW5DVE0iLCJpbnZlcnNlIiwibXVsdGlwbHkiLCJnZXRCb3VuZGluZ0JveCIsInN2Z1Jvb3QiLCJwYXJlbnRFbGVtZW50IiwiU1ZHR3JhcGhpY3NFbGVtZW50IiwiYmFzZUJveCIsInJlZkJCb3giLCJnZXRCQm94IiwiY29vcmRpbmF0ZSIsImUiLCJ4IiwiZiIsInkiLCJ3aWR0aCIsImhlaWdodCIsImdldExlYWZOb2RlcyIsIm1hc3RlciIsIm5vZGVzIiwiQXJyYXkiLCJwcm90b3R5cGUiLCJzbGljZSIsImNhbGwiLCJnZXRFbGVtZW50c0J5VGFnTmFtZSIsImxlYWZOb2RlcyIsImZpbHRlciIsImVsZW0iLCJoYXNDaGlsZE5vZGVzIiwiaSIsImNoaWxkTm9kZXMiLCJsZW5ndGgiLCJub2RlVHlwZSIsImdldEJhc2VsaW5lSGVpZ2h0IiwiY2FudmFzIiwiZG9jdW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiY3R4IiwiZ2V0Q29udGV4dCIsImNvbXB1dGVkU3R5bGUiLCJnZXRDb21wdXRlZFN0eWxlIiwiZm9udFNldHRpbmdzIiwiZm9udCIsInRleHRNZXRyaXgiLCJtZWFzdXJlVGV4dCIsImFjdHVhbEJvdW5kaW5nQm94RGVzY2VudCIsImVuY29kZUxpbmVDYXAiLCJ0eXBlIiwiZW5jb2RlTGluZUpvaW4iLCJlbmNvZGVUZXh0QW5jaG9yIiwiZ3JlYXRlc3RDb21tb25EaXZpc29yIiwiTWF0aCIsImFicyIsInQiLCJsZWFzdENvbW1vbk11bHRpcGxlIl0sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBTyxTQUFTQSxzQkFBVCxDQUFnQ0MsR0FBaEMsRUFBeURDLElBQXpELEVBQW1GO0FBQ3RGO0FBRUEsU0FBT0EsSUFBSSxDQUFDQyxZQUFMLEdBQXFCQyxPQUFyQixHQUErQkMsUUFBL0IsQ0FBd0NKLEdBQUcsQ0FBQ0Us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Q0ksU0FBSyxRQUFMO0FBQ0ksYUFBTyxDQUFQOztBQUNKLFNBQUssS0FBTDtBQUNJLGFBQU8sQ0FBUDs7QUFDSjtBQUNJLGFBQU8sQ0FBUDtBQU5SO0FBUUg7O0FBRU0sU0FBU0cscUJBQVQsQ0FBK0J0QyxDQUEvQixFQUEwQ0UsQ0FBMUMsRUFBNkQ7QUFDaEVGLEVBQUFBLENBQUMsR0FBR3VDLElBQUksQ0FBQ0MsR0FBTCxDQUFTeEMsQ0FBVCxDQUFKO0FBQ0FFLEVBQUFBLENBQUMsR0FBR3FDLElBQUksQ0FBQ0MsR0FBTCxDQUFTdEMsQ0FBVCxDQUFKOztBQUNBLFNBQU9BLENBQVAsRUFBVTtBQUNOLFFBQUl1QyxDQUFDLEdBQUd2QyxDQUFSO0FBQ0FBLElBQUFBLENBQUMsR0FBR0YsQ0FBQyxHQUFHRSxDQUFSO0FBQ0FGLElBQUFBLENBQUMsR0FBR3lDLENBQUo7QUFDSDs7QUFDRCxTQUFPekMsQ0FBUDtBQUNIOztBQUVNLFNBQVMwQyxtQkFBVCxDQUE2QjFDLENBQTdCLEVBQXdDRSxDQUF4QyxFQUEyRDtBQUM5RCxTQUFRLENBQUNGLENBQUQsSUFBTSxDQUFDRSxDQUFSLEdBQWEsQ0FBYixHQUFpQnFDLElBQUksQ0FBQ0MsR0FBTCxDQUFVeEMsQ0FBQyxHQUFHRSxDQUFMLEdBQVVvQyxxQkFBcUIsQ0FBQ3RDLENBQUQsRUFBSUUsQ0FBSixDQUF4QyxDQUF4QjtBQUNIIiwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGZ1bmN0aW9uIGNhbGN1bGF0ZUJhc2VUcmFuc2Zvcm0oZG9tOiBTVkdHcmFwaGljc0VsZW1lbnQsIHJvb3Q6IFNWR0dyYXBoaWNzRWxlbWVudCkge1xuICAgIC8vIGh0dHBzOi8vZ2l0aHViLmNvbS9kYWdyZWpzL2RhZ3JlLWQzL2lzc3Vlcy8yMDJcblxuICAgIHJldHVybiByb290LmdldFNjcmVlbkNUTSgpIS5pbnZlcnNlKCkubXVsdGlwbHkoZG9tLmdldFNjcmVlbkNUTSgpISlcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldEJvdW5kaW5nQm94KGRvbTogU1ZHR3JhcGhpY3NFbGVtZW50KSB7XG4gICAgbGV0IHN2Z1Jvb3Q6IFNWR0dyYXBoaWNzRWxlbWVudCA9IGRvbVxuICAgIHdoaWxlICh0cnVlKSB7XG4gICAgICAgIGlmIChzdmdSb290LnBhcmVudEVsZW1lbnQgaW5zdGFuY2VvZiBTVkdHcmFwaGljc0VsZW1lbnQpIHtcbiAgICAgICAgICAgIHN2Z1Jvb3QgPSBzdmdSb290LnBhcmVudEVsZW1lbnRcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICB9XG4gICAgY29uc3QgYmFzZUJveCA9IGNhbGN1bGF0ZUJhc2VUcmFuc2Zvcm0oZG9tLCBzdmdSb290KVxuICAgIGNvbnN0IHJlZkJCb3ggPSBkb20uZ2V0QkJveCgpXG4gICAgY29uc3QgY29vcmRpbmF0ZTogW251bWJlciwgbnVtYmVyLCBudW1iZXIsIG51bWJlcl0gPSBbYmFzZUJveC5lICsgcmVmQkJveC54LCBiYXNlQm94LmYgKyByZWZCQm94LnksIHJlZkJCb3gud2lkdGggKyAxLCByZWZCQm94LmhlaWdodCArIDFdXG4gICAgcmV0dXJuIGNvb3JkaW5hdGVcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldExlYWZOb2RlcyhtYXN0ZXI6IFNWR0dyYXBoaWNzRWxlbWVudCk6IFNWR0dyYXBoaWNzRWxlbWVudFtdIHtcbiAgICAvLyBodHRwczovL3N0YWNrb3ZlcmZsb3cuY29tL3F1ZXN0aW9ucy8yMjI4OTM5MS9ob3ctdG8tY3JlYXRlLWFuLWFycmF5LW9mLWxlYWYtbm9kZXMtb2YtYW4taHRtbC1kb20tdXNpbmctamF2YXNjcmlwdFxuXG4gICAgdmFyIG5vZGVzID0gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwobWFzdGVyLmdldEVsZW1lbnRzQnlUYWdOYW1lKFwiKlwiKSwgMCk7XG4gICAgdmFyIGxlYWZOb2RlcyA9IG5vZGVzLmZpbHRlcihmdW5jdGlvbiAoZWxlbSkge1xuICAgICAgICBpZiAoZWxlbS5oYXNDaGlsZE5vZGVzKCkpIHtcbiAgICAgICAgICAgIC8vIHNlZSBpZiBhbnkgb2YgdGhlIGNoaWxkIG5vZGVzIGFyZSBlbGVtZW50c1xuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlbGVtLmNoaWxkTm9kZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBpZiAoZWxlbS5jaGlsZE5vZGVzW2ldLm5vZGVUeXBlID09IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhlcmUgaXMgYSBjaGlsZCBlbGVtZW50LCBzbyByZXR1cm4gZmFsc2UgdG8gbm90IGluY2x1ZGVcbiAgICAgICAgICAgICAgICAgICAgLy8gdGhpcyBwYXJlbnQgZWxlbWVudFxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH0pO1xuICAgIHJldHVybiBsZWFmTm9kZXM7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRCYXNlbGluZUhlaWdodChkb206IFNWR1RleHRFbGVtZW50KSB7XG4gICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJylcbiAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKSFcbiAgICBjb25zdCBjb21wdXRlZFN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShkb20pXG4gICAgY29uc3QgZm9udFNldHRpbmdzID0gY29tcHV0ZWRTdHlsZS5mb250XG5cbiAgICBjdHguZm9udCA9IGZvbnRTZXR0aW5nc1xuICAgIGNvbnN0IHRleHRNZXRyaXggPSBjdHgubWVhc3VyZVRleHQoJ3lwZmdq4paIJylcbiAgICByZXR1cm4gdGV4dE1ldHJpeC5hY3R1YWxCb3VuZGluZ0JveERlc2NlbnQgfHwgMFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZW5jb2RlTGluZUNhcCh0eXBlPzogc3RyaW5nIHwgbnVsbCk6IG51bWJlciB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgJ3NxdWFyZSc6XG4gICAgICAgICAgICByZXR1cm4gM1xuICAgICAgICBjYXNlICdidXR0JzpcbiAgICAgICAgICAgIHJldHVybiAxXG4gICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICByZXR1cm4gMlxuICAgIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGVuY29kZUxpbmVKb2luKHR5cGU/OiBzdHJpbmcgfCBudWxsKTogbnVtYmVyIHtcbiAgICBzd2l0Y2ggKHR5cGUpIHtcbiAgICAgICAgY2FzZSAnbWl0ZXInOlxuICAgICAgICAgICAgcmV0dXJuIDFcbiAgICAgICAgY2FzZSAnYmV2ZWwnOlxuICAgICAgICAgICAgcmV0dXJuIDNcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAyXG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZW5jb2RlVGV4dEFuY2hvcih0eXBlPzogc3RyaW5nIHwgbnVsbCk6IG51bWJlciB7XG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgJ21pZGRsZSc6XG4gICAgICAgICAgICByZXR1cm4gMlxuICAgICAgICBjYXNlICdlbmQnOlxuICAgICAgICAgICAgcmV0dXJuIDFcbiAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgIHJldHVybiAwXG4gICAgfVxufVxuXG5leHBvcnQgZnVuY3Rpb24gZ3JlYXRlc3RDb21tb25EaXZpc29yKHg6IG51bWJlciwgeTogbnVtYmVyKTogbnVtYmVyIHtcbiAgICB4ID0gTWF0aC5hYnMoeCk7XG4gICAgeSA9IE1hdGguYWJzKHkpO1xuICAgIHdoaWxlICh5KSB7XG4gICAgICAgIHZhciB0ID0geTtcbiAgICAgICAgeSA9IHggJSB5O1xuICAgICAgICB4ID0gdDtcbiAgICB9XG4gICAgcmV0dXJuIHg7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBsZWFzdENvbW1vbk11bHRpcGxlKHg6IG51bWJlciwgeTogbnVtYmVyKTogbnVtYmVyIHtcbiAgICByZXR1cm4gKCF4IHx8ICF5KSA/IDAgOiBNYXRoLmFicygoeCAqIHkpIC8gZ3JlYXRlc3RDb21tb25EaXZpc29yKHgsIHkpKTtcbn0iXX0=","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nObject.defineProperty(exports, \"LayerFactory\", {\n  enumerable: true,\n  get: function get() {\n    return _layer.LayerFactory;\n  }\n});\nObject.defineProperty(exports, \"EasingFactory\", {\n  enumerable: true,\n  get: function get() {\n    return _easing.EasingFactory;\n  }\n});\nObject.defineProperty(exports, \"PathMaker\", {\n  enumerable: true,\n  get: function get() {\n    return _path.PathMaker;\n  }\n});\nexports.MaskType = exports[\"default\"] = void 0;\n\nvar _layer = require(\"./layer\");\n\nvar _v = _interopRequireDefault(require(\"uuid/v4\"));\n\nvar _easing = require(\"./easing\");\n\nvar _path = require(\"./path\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar JSMovin =\n/*#__PURE__*/\nfunction () {\n  /**\n   * @param fps number of frames per second\n   * @param width width of viewport (px)\n   * @param height height of viewport (px)\n   */\n  function JSMovin() {\n    var fps = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 30;\n    var width = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 800;\n    var height = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 600;\n\n    _classCallCheck(this, JSMovin);\n\n    _defineProperty(this, \"root\", void 0);\n\n    this.root = {\n      fr: fps,\n      w: width,\n      h: height,\n      ddd: 0,\n      layers: [],\n      assets: [],\n      fonts: {\n        list: []\n      },\n      ip: 0,\n      op: 0\n    };\n  }\n  /**\n   * @param fps number of frames per second\n   */\n\n\n  _createClass(JSMovin, [{\n    key: \"setFrameRate\",\n    value: function setFrameRate(fps) {\n      this.root.fr = fps;\n    }\n    /**\n     * @param width width of viewport (px)\n     * @param height height of viewport (px)\n     */\n\n  }, {\n    key: \"setViewport\",\n    value: function setViewport(width, height) {\n      this.root.w = width;\n      this.root.h = height;\n    }\n    /**\n     * add a simple graphical layer\n     * @param domLayerOrAssetId a SVG element DOM or JSMovinLayer or asset ID needs to be inserted\n     */\n\n  }, {\n    key: \"addLayer\",\n    value: function addLayer(domLayerOrAssetId) {\n      var layer;\n\n      if (domLayerOrAssetId instanceof SVGGraphicsElement) {\n        layer = _layer.LayerFactory.hierarchy(domLayerOrAssetId, this.root.assets, this.root.fonts);\n      } else if (typeof domLayerOrAssetId === 'string') {\n        layer = _layer.LayerFactory.ref(domLayerOrAssetId);\n      } else {\n        layer = domLayerOrAssetId;\n      }\n\n      this.root.layers.splice(0, 0, layer.root);\n      return layer;\n    }\n    /**\n     * @param maskOrDom a SVG element DOM or JSMovinLayer to be the mask\n     * @param layerRefOrIndex a JSMovinLayer or index of layer to be the masked layer\n     * @param maskType which type of mask to use, use `MaskType.*` to specify\n     */\n\n  }, {\n    key: \"addMask\",\n    value: function addMask(maskOrDom, layerRefOrIndex) {\n      var maskType = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : MaskType.Alpha;\n      var layerRef;\n      var layerIndex;\n\n      if (layerRefOrIndex instanceof _layer.JSMovinLayer) {\n        layerRef = layerRefOrIndex;\n        layerIndex = this.root.layers.indexOf(layerRef.root);\n        layerRef.root.tt = maskType;\n      } else {\n        layerIndex = layerRefOrIndex;\n        this.root.layers[layerIndex].tt = maskType;\n      }\n\n      if (layerIndex < 0) {\n        throw new Error('Given layer is not a member of this JSMovin.');\n      }\n\n      var maskLayer;\n\n      if (maskOrDom instanceof SVGGraphicsElement) {\n        maskLayer = _layer.LayerFactory.hierarchy(maskOrDom, this.root.assets, this.root.fonts);\n      } else {\n        maskLayer = maskOrDom;\n      }\n\n      this.root.layers.splice(layerIndex, 0, maskLayer.root);\n      return maskLayer;\n    }\n    /**\n     * @param layerRefs a set of layers to be packed as an asset\n     */\n\n  }, {\n    key: \"makeAsset\",\n    value: function makeAsset(layerRefs) {\n      var _this = this;\n\n      layerRefs.forEach(function (layer, innerIndex) {\n        if (layer.root.tt == 1) {\n          var layerIndex = _this.root.layers.indexOf(layer.root);\n\n          if (layerIndex > 0) {\n            var mask = _this.root.layers[layerIndex - 1];\n\n            if (innerIndex == 0 || layerRefs[innerIndex - 1].root != mask) {\n              layerRefs.splice(innerIndex, 0, new _layer.JSMovinLayer(mask));\n            }\n          }\n        }\n      });\n      layerRefs = layerRefs.map(function (layer, innerIndex) {\n        return {\n          layer: layer,\n          innerIndex: innerIndex\n        };\n      }).sort(function (a, b) {\n        var aIndex = _this.root.layers.indexOf(a.layer.root);\n\n        var bIndex = _this.root.layers.indexOf(b.layer.root);\n\n        return aIndex - bIndex || a.innerIndex - b.innerIndex;\n      }).map(function (layerWrapper) {\n        return layerWrapper.layer;\n      });\n      layerRefs.forEach(function (layer) {\n        var layerIndex = _this.root.layers.indexOf(layer.root);\n\n        if (layerIndex > 0) {\n          _this.root.layers.splice(layerIndex, 1);\n        }\n\n        layer.root.op = 9e9;\n      });\n      var refId = (0, _v[\"default\"])();\n      this.root.assets.push({\n        id: refId,\n        layers: layerRefs.map(function (layerRef) {\n          return layerRef.root;\n        })\n      });\n      return refId;\n    }\n    /**\n     * @param layerRefOrIndex a JSMovinLayer or index of layer to remove\n     */\n\n  }, {\n    key: \"removeLayer\",\n    value: function removeLayer(layerRefOrIndex) {\n      var layerRef;\n      var layerIndex;\n\n      if (layerRefOrIndex instanceof _layer.JSMovinLayer) {\n        layerRef = layerRefOrIndex;\n        layerIndex = this.root.layers.indexOf(layerRef.root);\n      } else {\n        layerIndex = layerRefOrIndex;\n      }\n\n      this.root.layers.splice(layerIndex, 1);\n    }\n    /**\n     * @param layerRefOrIndex a JSMovinLayer or index of mask or masked layer to remove\n     */\n\n  }, {\n    key: \"removeMask\",\n    value: function removeMask(layerRefOrIndex) {\n      var layerRef;\n      var layerIndex;\n\n      if (layerRefOrIndex instanceof _layer.JSMovinLayer) {\n        layerRef = layerRefOrIndex;\n        layerIndex = this.root.layers.indexOf(layerRef.root);\n      } else {\n        layerIndex = layerRefOrIndex;\n        layerRef = new _layer.JSMovinLayer(this.root.layers[layerIndex]);\n      }\n\n      if (layerRef.root.tt) {\n        layerRef.root.tt = 0;\n        this.root.layers.splice(layerIndex - 1, 1);\n      } else if (this.root.layers[layerIndex + 1].tt) {\n        this.root.layers[layerIndex + 1].tt = 0;\n        this.root.layers.splice(layerIndex, 1);\n      } else {\n        throw new Error('The input layer is not a mask or a masked layer.');\n      }\n    }\n    /**\n     * clear all layers\n     */\n\n  }, {\n    key: \"clearLayers\",\n    value: function clearLayers() {\n      this.root.layers = [];\n    }\n    /**\n     * make all layers end at same time\n     */\n\n  }, {\n    key: \"uniform\",\n    value: function uniform() {\n      var maxTime = this.root.layers.reduce(function (p, v) {\n        return p < v.op ? v.op : p;\n      }, 0);\n      this.root.op = maxTime;\n      this.root.layers.forEach(function (layer) {\n        return layer.op = maxTime;\n      });\n    }\n    /**\n     * export Lottie as JavaScript Object \n     */\n\n  }, {\n    key: \"toObject\",\n    value: function toObject() {\n      this.uniform();\n      return JSON.parse(this.toJSON());\n    }\n    /**\n     * export Lottie as JSON text\n     */\n\n  }, {\n    key: \"toJSON\",\n    value: function toJSON() {\n      this.uniform();\n      return JSON.stringify(this.root);\n    }\n  }]);\n\n  return JSMovin;\n}();\n\nexports[\"default\"] = JSMovin;\nvar MaskType;\nexports.MaskType = MaskType;\n\n(function (MaskType) {\n  MaskType[MaskType[\"Alpha\"] = 1] = \"Alpha\";\n  MaskType[MaskType[\"InvertAlpha\"] = 2] = \"InvertAlpha\";\n  MaskType[MaskType[\"Luma\"] = 3] = \"Luma\";\n  MaskType[MaskType[\"InvertLuma\"] = 4] = \"InvertLuma\";\n})(MaskType || (exports.MaskType = MaskType = {}));\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9qc21vdmluLnRzIl0sIm5hbWVzIjpbIkpTTW92aW4iLCJmcHMiLCJ3aWR0aCIsImhlaWdodCIsInJvb3QiLCJmciIsInciLCJoIiwiZGRkIiwibGF5ZXJzIiwiYXNzZXRzIiwiZm9udHMiLCJsaXN0IiwiaXAiLCJvcCIsImRvbUxheWVyT3JBc3NldElkIiwibGF5ZXIiLCJTVkdHcmFwaGljc0VsZW1lbnQiLCJMYXllckZhY3RvcnkiLCJoaWVyYXJjaHkiLCJyZWYiLCJzcGxpY2UiLCJtYXNrT3JEb20iLCJsYXllclJlZk9ySW5kZXgiLCJtYXNrVHlwZSIsIk1hc2tUeXBlIiwiQWxwaGEiLCJsYXllclJlZiIsImxheWVySW5kZXgiLCJKU01vdmluTGF5ZXIiLCJpbmRleE9mIiwidHQiLCJFcnJvciIsIm1hc2tMYXllciIsImxheWVyUmVmcyIsImZvckVhY2giLCJpbm5lckluZGV4IiwibWFzayIsIm1hcCIsInNvcnQiLCJhIiwiYiIsImFJbmRleCIsImJJbmRleCIsImxheWVyV3JhcHBlciIsInJlZklkIiwicHVzaCIsImlkIiwibWF4VGltZSIsInJlZHVjZSIsInAiLCJ2IiwidW5pZm9ybSIsIkpTT04iLCJwYXJzZSIsInRvSlNPTiIsInN0cmluZ2lmeSJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUNBOztBQUNBOztBQTBNQTs7QUFDQTs7Ozs7Ozs7Ozs7O0lBek1xQkEsTzs7O0FBR2pCOzs7OztBQUtBLHFCQUF5RTtBQUFBLFFBQTdEQyxHQUE2RCx1RUFBL0MsRUFBK0M7QUFBQSxRQUEzQ0MsS0FBMkMsdUVBQTNCLEdBQTJCO0FBQUEsUUFBdEJDLE1BQXNCLHVFQUFMLEdBQUs7O0FBQUE7O0FBQUE7O0FBQ3JFLFNBQUtDLElBQUwsR0FBWTtBQUNSQyxNQUFBQSxFQUFFLEVBQUVKLEdBREk7QUFFUkssTUFBQUEsQ0FBQyxFQUFFSixLQUZLO0FBR1JLLE1BQUFBLENBQUMsRUFBRUosTUFISztBQUlSSyxNQUFBQSxH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SUksS0FBSixDQUFVLGtEQUFWLENBQU47QUFDSDtBQUNKO0FBRUQ7Ozs7OztrQ0FHYztBQUNWLFdBQUs1QixJQUFMLENBQVVLLE1BQVYsR0FBbUIsRUFBbkI7QUFDSDtBQUVEOzs7Ozs7OEJBR1U7QUFDTixVQUFJdUMsT0FBTyxHQUFHLEtBQUs1QyxJQUFMLENBQVVLLE1BQVYsQ0FBa0J3QyxNQUFsQixDQUF5QixVQUFDQyxDQUFELEVBQUlDLENBQUo7QUFBQSxlQUFVRCxDQUFDLEdBQUdDLENBQUMsQ0FBQ3JDLEVBQU4sR0FBWXFDLENBQUMsQ0FBQ3JDLEVBQWQsR0FBb0JvQyxDQUE5QjtBQUFBLE9BQXpCLEVBQTBELENBQTFELENBQWQ7QUFDQSxXQUFLOUMsSUFBTCxDQUFVVSxFQUFWLEdBQWVrQyxPQUFmO0FBQ0EsV0FBSzVDLElBQUwsQ0FBVUssTUFBVixDQUFrQjBCLE9BQWxCLENBQTBCLFVBQUFuQixLQUFLO0FBQUEsZUFBSUEsS0FBSyxDQUFDRixFQUFOLEdBQVdrQyxPQUFmO0FBQUEsT0FBL0I7QUFDSDtBQUVEOzs7Ozs7K0JBR1c7QUFDUCxXQUFLSSxPQUFMO0FBQ0EsYUFBT0MsSUFBSSxDQUFDQyxLQUFMLENBQVcsS0FBS0MsTUFBTCxFQUFYLENBQVA7QUFDSDtBQUVEOzs7Ozs7NkJBR1M7QUFDTCxXQUFLSCxPQUFMO0FBQ0EsYUFBT0MsSUFBSSxDQUFDRyxTQUFMLENBQWUsS0FBS3BELElBQXBCLENBQVA7QUFDSDs7Ozs7OztJQU1PcUIsUTs7O1dBQUFBLFE7QUFBQUEsRUFBQUEsUSxDQUFBQSxRO0FBQUFBLEVBQUFBLFEsQ0FBQUEsUTtBQUFBQSxFQUFBQSxRLENBQUFBLFE7QUFBQUEsRUFBQUEsUSxDQUFBQSxRO0dBQUFBLFEsd0JBQUFBLFEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBbmltYXRpb24sIFNoYXBlTGF5ZXIsIFJlZmVyZW5jZUlEIH0gZnJvbSBcIi4vYW5pbWF0aW9uXCI7XG5pbXBvcnQgeyBKU01vdmluTGF5ZXIsIExheWVyRmFjdG9yeSB9IGZyb20gJy4vbGF5ZXInXG5pbXBvcnQgdXVpZCBmcm9tICd1dWlkL3Y0JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSlNNb3ZpbiB7XG4gICAgcHJpdmF0ZSByb290OiBBbmltYXRpb247XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gZnBzIG51bWJlciBvZiBmcmFtZXMgcGVyIHNlY29uZFxuICAgICAqIEBwYXJhbSB3aWR0aCB3aWR0aCBvZiB2aWV3cG9ydCAocHgpXG4gICAgICogQHBhcmFtIGhlaWdodCBoZWlnaHQgb2Ygdmlld3BvcnQgKHB4KVxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKGZwczogbnVtYmVyID0gMzAsIHdpZHRoOiBudW1iZXIgPSA4MDAsIGhlaWdodDogbnVtYmVyID0gNjAwKSB7XG4gICAgICAgIHRoaXMucm9vdCA9IHtcbiAgICAgICAgICAgIGZyOiBmcHMsXG4gICAgICAgICAgICB3OiB3aWR0aCxcbiAgICAgICAgICAgIGg6IGhlaWdodCxcbiAgICAgICAgICAgIGRkZDogMCxcbiAgICAgICAgICAgIGxheWVyczogW10sXG4gICAgICAgICAgICBhc3NldHM6IFtdLFxuICAgICAgICAgICAgZm9udHM6IHtcbiAgICAgICAgICAgICAgICBsaXN0OiBbXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGlwOiAwLFxuICAgICAgICAgICAgb3A6IDBcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBmcHMgbnVtYmVyIG9mIGZyYW1lcyBwZXIgc2Vjb25kXG4gICAgICovXG4gICAgc2V0RnJhbWVSYXRlKGZwczogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMucm9vdC5mciA9IGZwc1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSB3aWR0aCB3aWR0aCBvZiB2aWV3cG9ydCAocHgpXG4gICAgICogQHBhcmFtIGhlaWdodCBoZWlnaHQgb2Ygdmlld3BvcnQgKHB4KVxuICAgICAqL1xuICAgIHNldFZpZXdwb3J0KHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMucm9vdC53ID0gd2lkdGhcbiAgICAgICAgdGhpcy5yb290LmggPSBoZWlnaHRcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBhZGQgYSBzaW1wbGUgZ3JhcGhpY2FsIGxheWVyXG4gICAgICogQHBhcmFtIGRvbUxheWVyT3JBc3NldElkIGEgU1ZHIGVsZW1lbnQgRE9NIG9yIEpTTW92aW5MYXllciBvciBhc3NldCBJRCBuZWVkcyB0byBiZSBpbnNlcnRlZFxuICAgICAqL1xuICAgIGFkZExheWVyKGRvbUxheWVyT3JBc3NldElkOiBTVkdHcmFwaGljc0VsZW1lbnQgfCBKU01vdmluTGF5ZXIgfCBSZWZlcmVuY2VJRCk6IEpTTW92aW5MYXllciB7XG4gICAgICAgIGxldCBsYXllcjogSlNNb3ZpbkxheWVyO1xuICAgICAgICBpZiAoZG9tTGF5ZXJPckFzc2V0SWQgaW5zdGFuY2VvZiBTVkdHcmFwaGljc0VsZW1lbnQpIHtcbiAgICAgICAgICAgIGxheWVyID0gTGF5ZXJGYWN0b3J5LmhpZXJhcmNoeShkb21MYXllck9yQXNzZXRJZCwgdGhpcy5yb290LmFzc2V0cyEsIHRoaXMucm9vdC5mb250cyEpXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIChkb21MYXllck9yQXNzZXRJZCkgPT09ICdzdHJpbmcnKSB7XG4gICAgICAgICAgICBsYXllciA9IExheWVyRmFjdG9yeS5yZWYoZG9tTGF5ZXJPckFzc2V0SWQpXG4gICAgICAgIH1cbiAgICAgICAgZWxzZSB7XG4gICAgICAgICAgICBsYXllciA9IGRvbUxheWVyT3JBc3NldElkXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yb290LmxheWVycyEuc3BsaWNlKDAsIDAsIGxheWVyLnJvb3QpXG4gICAgICAgIHJldHVybiBsYXllclxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIEBwYXJhbSBtYXNrT3JEb20gYSBTVkcgZWxlbWVudCBET00gb3IgSlNNb3ZpbkxheWVyIHRvIGJlIHRoZSBtYXNrXG4gICAgICogQHBhcmFtIGxheWVyUmVmT3JJbmRleCBhIEpTTW92aW5MYXllciBvciBpbmRleCBvZiBsYXllciB0byBiZSB0aGUgbWFza2VkIGxheWVyXG4gICAgICogQHBhcmFtIG1hc2tUeXBlIHdoaWNoIHR5cGUgb2YgbWFzayB0byB1c2UsIHVzZSBgTWFza1R5cGUuKmAgdG8gc3BlY2lmeVxuICAgICAqL1xuICAgIGFkZE1hc2sobWFza09yRG9tOiBKU01vdmluTGF5ZXIgfCBTVkdHcmFwaGljc0VsZW1lbnQsIGxheWVyUmVmT3JJbmRleDogbnVtYmVyIHwgSlNNb3ZpbkxheWVyLCBtYXNrVHlwZTogTWFza1R5cGUgPSBNYXNrVHlwZS5BbHBoYSkge1xuICAgICAgICBsZXQgbGF5ZXJSZWY6IEpTTW92aW5MYXllclxuICAgICAgICBsZXQgbGF5ZXJJbmRleDogbnVtYmVyXG4gICAgICAgIGlmIChsYXllclJlZk9ySW5kZXggaW5zdGFuY2VvZiBKU01vdmluTGF5ZXIpIHtcbiAgICAgICAgICAgIGxheWVyUmVmID0gbGF5ZXJSZWZPckluZGV4XG4gICAgICAgICAgICBsYXllckluZGV4ID0gdGhpcy5yb290LmxheWVycyEuaW5kZXhPZihsYXllclJlZi5yb290KVxuICAgICAgICAgICAgbGF5ZXJSZWYucm9vdC50dCA9IG1hc2tUeXBlXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsYXllckluZGV4ID0gbGF5ZXJSZWZPckluZGV4XG4gICAgICAgICAgICB0aGlzLnJvb3QubGF5ZXJzIVtsYXllckluZGV4XS50dCA9IG1hc2tUeXBlXG4gICAgICAgIH1cbiAgICAgICAgaWYgKGxheWVySW5kZXggPCAwKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0dpdmVuIGxheWVyIGlzIG5vdCBhIG1lbWJlciBvZiB0aGlzIEpTTW92aW4uJylcbiAgICAgICAgfVxuICAgICAgICBsZXQgbWFza0xheWVyOiBKU01vdmluTGF5ZXJcbiAgICAgICAgaWYgKG1hc2tPckRvbSBpbnN0YW5jZW9mIFNWR0dyYXBoaWNzRWxlbWVudCkge1xuICAgICAgICAgICAgbWFza0xheWVyID0gTGF5ZXJGYWN0b3J5LmhpZXJhcmNoeShtYXNrT3JEb20sIHRoaXMucm9vdC5hc3NldHMhLCB0aGlzLnJvb3QuZm9udHMhKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgbWFza0xheWVyID0gbWFza09yRG9tXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yb290LmxheWVycyEuc3BsaWNlKGxheWVySW5kZXgsIDAsIG1hc2tMYXllci5yb290KVxuICAgICAgICByZXR1cm4gbWFza0xheWVyXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIGxheWVyUmVmcyBhIHNldCBvZiBsYXllcnMgdG8gYmUgcGFja2VkIGFzIGFuIGFzc2V0XG4gICAgICovXG4gICAgbWFrZUFzc2V0KGxheWVyUmVmczogSlNNb3ZpbkxheWVyW10pOiBSZWZlcmVuY2VJRCB7XG4gICAgICAgIGxheWVyUmVmcy5mb3JFYWNoKChsYXllciwgaW5uZXJJbmRleCkgPT4ge1xuICAgICAgICAgICAgaWYgKGxheWVyLnJvb3QudHQgPT0gMSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGxheWVySW5kZXggPSB0aGlzLnJvb3QubGF5ZXJzIS5pbmRleE9mKGxheWVyLnJvb3QpXG4gICAgICAgICAgICAgICAgaWYgKGxheWVySW5kZXggPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG1hc2sgPSB0aGlzLnJvb3QubGF5ZXJzIVtsYXllckluZGV4IC0gMV1cbiAgICAgICAgICAgICAgICAgICAgaWYgKGlubmVySW5kZXggPT0gMCB8fCBsYXllclJlZnNbaW5uZXJJbmRleCAtIDFdLnJvb3QgIT0gbWFzaykge1xuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXJSZWZzLnNwbGljZShpbm5lckluZGV4LCAwLCBuZXcgSlNNb3ZpbkxheWVyKG1hc2sgYXMgU2hhcGVMYXllcikpXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgICAgIGxheWVyUmVmcyA9IGxheWVyUmVmcy5tYXAoKGxheWVyLCBpbm5lckluZGV4KSA9PiB7XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGxheWVyLFxuICAgICAgICAgICAgICAgIGlubmVySW5kZXhcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSkuc29ydCgoYSwgYikgPT4ge1xuICAgICAgICAgICAgY29uc3QgYUluZGV4ID0gdGhpcy5yb290LmxheWVycyEuaW5kZXhPZihhLmxheWVyLnJvb3QpXG4gICAgICAgICAgICBjb25zdCBiSW5kZXggPSB0aGlzLnJvb3QubGF5ZXJzIS5pbmRleE9mKGIubGF5ZXIucm9vdClcbiAgICAgICAgICAgIHJldHVybiAoYUluZGV4IC0gYkluZGV4KSB8fCAoYS5pbm5lckluZGV4IC0gYi5pbm5lckluZGV4KVxuICAgICAgICB9KS5tYXAobGF5ZXJXcmFwcGVyID0+IGxheWVyV3JhcHBlci5sYXllcilcbiAgICAgICAgbGF5ZXJSZWZzLmZvckVhY2gobGF5ZXIgPT4ge1xuICAgICAgICAgICAgY29uc3QgbGF5ZXJJbmRleCA9IHRoaXMucm9vdC5sYXllcnMhLmluZGV4T2YobGF5ZXIucm9vdClcbiAgICAgICAgICAgIGlmIChsYXllckluZGV4ID4gMCkge1xuICAgICAgICAgICAgICAgIHRoaXMucm9vdC5sYXllcnMhLnNwbGljZShsYXllckluZGV4LCAxKVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgbGF5ZXIucm9vdC5vcCA9IDllOVxuICAgICAgICB9KVxuICAgICAgICBjb25zdCByZWZJZCA9IHV1aWQoKVxuICAgICAgICB0aGlzLnJvb3QuYXNzZXRzIS5wdXNoKHtcbiAgICAgICAgICAgIGlkOiByZWZJZCxcbiAgICAgICAgICAgIGxheWVyczogbGF5ZXJSZWZzLm1hcChsYXllclJlZiA9PiBsYXllclJlZi5yb290KVxuICAgICAgICB9KVxuICAgICAgICByZXR1cm4gcmVmSWRcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBAcGFyYW0gbGF5ZXJSZWZPckluZGV4IGEgSlNNb3ZpbkxheWVyIG9yIGluZGV4IG9mIGxheWVyIHRvIHJlbW92ZVxuICAgICAqL1xuICAgIHJlbW92ZUxheWVyKGxheWVyUmVmT3JJbmRleDogbnVtYmVyIHwgSlNNb3ZpbkxheWVyKSB7XG4gICAgICAgIGxldCBsYXllclJlZjogSlNNb3ZpbkxheWVyXG4gICAgICAgIGxldCBsYXllckluZGV4OiBudW1iZXJcbiAgICAgICAgaWYgKGxheWVyUmVmT3JJbmRleCBpbnN0YW5jZW9mIEpTTW92aW5MYXllcikge1xuICAgICAgICAgICAgbGF5ZXJSZWYgPSBsYXllclJlZk9ySW5kZXhcbiAgICAgICAgICAgIGxheWVySW5kZXggPSB0aGlzLnJvb3QubGF5ZXJzIS5pbmRleE9mKGxheWVyUmVmLnJvb3QpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsYXllckluZGV4ID0gbGF5ZXJSZWZPckluZGV4XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5yb290LmxheWVycyEuc3BsaWNlKGxheWVySW5kZXgsIDEpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogQHBhcmFtIGxheWVyUmVmT3JJbmRleCBhIEpTTW92aW5MYXllciBvciBpbmRleCBvZiBtYXNrIG9yIG1hc2tlZCBsYXllciB0byByZW1vdmVcbiAgICAgKi9cbiAgICByZW1vdmVNYXNrKGxheWVyUmVmT3JJbmRleDogbnVtYmVyIHwgSlNNb3ZpbkxheWVyKSB7XG4gICAgICAgIGxldCBsYXllclJlZjogSlNNb3ZpbkxheWVyXG4gICAgICAgIGxldCBsYXllckluZGV4OiBudW1iZXJcbiAgICAgICAgaWYgKGxheWVyUmVmT3JJbmRleCBpbnN0YW5jZW9mIEpTTW92aW5MYXllcikge1xuICAgICAgICAgICAgbGF5ZXJSZWYgPSBsYXllclJlZk9ySW5kZXhcbiAgICAgICAgICAgIGxheWVySW5kZXggPSB0aGlzLnJvb3QubGF5ZXJzIS5pbmRleE9mKGxheWVyUmVmLnJvb3QpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsYXllckluZGV4ID0gbGF5ZXJSZWZPckluZGV4XG4gICAgICAgICAgICBsYXllclJlZiA9IG5ldyBKU01vdmluTGF5ZXIodGhpcy5yb290LmxheWVycyFbbGF5ZXJJbmRleF0gYXMgU2hhcGVMYXllcilcbiAgICAgICAgfVxuICAgICAgICBpZiAobGF5ZXJSZWYucm9vdC50dCkge1xuICAgICAgICAgICAgbGF5ZXJSZWYucm9vdC50dCA9IDBcbiAgICAgICAgICAgIHRoaXMucm9vdC5sYXllcnMhLnNwbGljZShsYXllckluZGV4IC0gMSwgMSlcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLnJvb3QubGF5ZXJzIVtsYXllckluZGV4ICsgMV0udHQpIHtcbiAgICAgICAgICAgIHRoaXMucm9vdC5sYXllcnMhW2xheWVySW5kZXggKyAxXS50dCA9IDBcbiAgICAgICAgICAgIHRoaXMucm9vdC5sYXllcnMhLnNwbGljZShsYXllckluZGV4LCAxKVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdUaGUgaW5wdXQgbGF5ZXIgaXMgbm90IGEgbWFzayBvciBhIG1hc2tlZCBsYXllci4nKVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogY2xlYXIgYWxsIGxheWVyc1xuICAgICAqL1xuICAgIGNsZWFyTGF5ZXJzKCkge1xuICAgICAgICB0aGlzLnJvb3QubGF5ZXJzID0gW11cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBtYWtlIGFsbCBsYXllcnMgZW5kIGF0IHNhbWUgdGltZVxuICAgICAqL1xuICAgIHVuaWZvcm0oKSB7XG4gICAgICAgIGxldCBtYXhUaW1lID0gdGhpcy5yb290LmxheWVycyEucmVkdWNlKChwLCB2KSA9PiBwIDwgdi5vcCEgPyB2Lm9wISA6IHAsIDApXG4gICAgICAgIHRoaXMucm9vdC5vcCA9IG1heFRpbWVcbiAgICAgICAgdGhpcy5yb290LmxheWVycyEuZm9yRWFjaChsYXllciA9PiBsYXllci5vcCA9IG1heFRpbWUpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogZXhwb3J0IExvdHRpZSBhcyBKYXZhU2NyaXB0IE9iamVjdCBcbiAgICAgKi9cbiAgICB0b09iamVjdCgpIHtcbiAgICAgICAgdGhpcy51bmlmb3JtKClcbiAgICAgICAgcmV0dXJuIEpTT04ucGFyc2UodGhpcy50b0pTT04oKSlcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBleHBvcnQgTG90dGllIGFzIEpTT04gdGV4dFxuICAgICAqL1xuICAgIHRvSlNPTigpIHtcbiAgICAgICAgdGhpcy51bmlmb3JtKClcbiAgICAgICAgcmV0dXJuIEpTT04uc3RyaW5naWZ5KHRoaXMucm9vdClcbiAgICB9XG59XG5cbmV4cG9ydCB7IExheWVyRmFjdG9yeSB9IGZyb20gJy4vbGF5ZXInXG5leHBvcnQgeyBFYXNpbmdGYWN0b3J5IH0gZnJvbSAnLi9lYXNpbmcnXG5leHBvcnQgeyBQYXRoTWFrZXIgfSBmcm9tICcuL3BhdGgnXG5leHBvcnQgZW51bSBNYXNrVHlwZSB7XG4gICAgQWxwaGEgPSAxLFxuICAgIEludmVydEFscGhhID0gMixcbiAgICBMdW1hID0gMyxcbiAgICBJbnZlcnRMdW1hID0gNFxufSJdfQ==","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.LayerFactory = exports.JSMovinLayer = void 0;\n\nvar _easing = require(\"./easing\");\n\nvar _render = require(\"./render\");\n\nvar _helper = require(\"./helper\");\n\nvar _v = _interopRequireDefault(require(\"uuid/v4\"));\n\nvar _path = require(\"./path\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar JSMovinLayer =\n/*#__PURE__*/\nfunction () {\n  _createClass(JSMovinLayer, [{\n    key: \"getDefaultProperty\",\n    value: function getDefaultProperty(key) {\n      switch (key) {\n        case 'a':\n        case 'p':\n          return JSON.parse(JSON.stringify(key == 'a' ? this.anchor : this.position));\n\n        case 's':\n          return [100, 100, 100];\n\n        case 'o':\n          return 100;\n\n        case 'r':\n          return 0;\n\n        case 'tm':\n          return {\n            s: {\n              k: 0\n            },\n            e: {\n              k: 100\n            },\n            o: {\n              k: 0\n            }\n          };\n\n        default:\n          return 0;\n      }\n    }\n  }, {\n    key: \"convertToStaticProperty\",\n    value: function convertToStaticProperty(transform, key) {\n      if (!transform[key]) {\n        transform[key] = {\n          a: 0,\n          k: this.getDefaultProperty(key)\n        };\n      }\n\n      if (transform[key].a == 1) {\n        var staticValue = transform[key].k[0].s;\n        transform[key] = {\n          a: 0,\n          k: staticValue\n        };\n      }\n    }\n  }, {\n    key: \"convertToAnimatableProperty\",\n    value: function convertToAnimatableProperty(transform, key) {\n      if (!transform[key] || !transform[key].a) {\n        if (key == 'a') {\n          this.anchor = transform[key] ? transform[key].k : [0, 0, 0];\n        }\n\n        if (key == 'p') {\n          this.position = transform[key] ? transform[key].k : [0, 0, 0];\n        }\n\n        transform[key] = {\n          a: 1,\n          k: []\n        };\n      }\n    }\n  }, {\n    key: \"addKeyframe\",\n    value: function addKeyframe(transform, key) {\n      var idx = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : -1;\n      var time = arguments.length > 3 ? arguments[3] : undefined;\n      var value = arguments.length > 4 ? arguments[4] : undefined;\n      var easing = arguments.length > 5 ? arguments[5] : undefined;\n      var wrap = arguments.length > 6 && arguments[6] !== undefined ? arguments[6] : true;\n      var existKeyframe = transform[key].k.filter(function (x) {\n        return x.t == time;\n      });\n      var readyToSet;\n\n      if (existKeyframe.length) {\n        readyToSet = existKeyframe[0];\n      } else {\n        readyToSet = {\n          t: time,\n          s: this.getDefaultProperty(key)\n        };\n        var previousKeyframeCount = transform[key].k.reduce(function (p, x) {\n          return x.t < time ? p + 1 : p;\n        }, 0);\n        transform[key].k.splice(previousKeyframeCount, 0, readyToSet);\n      }\n\n      if (easing) {\n        readyToSet.o = {\n          x: easing[0][0],\n          y: easing[0][1]\n        };\n        readyToSet.i = {\n          x: easing[1][0],\n          y: easing[1][1]\n        };\n      }\n\n      if (idx >= 0) {\n        readyToSet.s[idx] = value;\n      } else {\n        readyToSet.s = wrap && !(value instanceof Array) ? [value] : value;\n      }\n    }\n  }, {\n    key: \"findPropertyConfig\",\n    value: function findPropertyConfig(key) {\n      return this.root.shapes[0].it.find(function (shape) {\n        return shape.ty == key;\n      });\n    }\n  }, {\n    key: \"findOrInsertPropertyConfig\",\n    value: function findOrInsertPropertyConfig(key) {\n      var find = this.findPropertyConfig(key);\n      if (find) return find;\n      var hasTransform = this.findPropertyConfig('tr');\n\n      var config = _objectSpread({\n        ty: key\n      }, this.getDefaultProperty(key));\n\n      if (hasTransform) {\n        var groupShapes = this.root.shapes[0].it;\n        groupShapes.splice(groupShapes.length - 1, 0, config);\n      } else {\n        this.root.shapes[0].it.push(config);\n      }\n\n      return config;\n    }\n  }, {\n    key: \"commonPropertyMapping\",\n    value: function commonPropertyMapping(key) {\n      var base, k, index;\n\n      switch (key) {\n        case 'scaleX':\n          base = this.root.ks;\n          k = 's';\n          index = 0;\n          break;\n\n        case 'scaleY':\n          base = this.root.ks;\n          k = 's';\n          index = 1;\n          break;\n\n        case 'anchorX':\n          base = this.root.ks;\n          k = 'a';\n          index = 0;\n          break;\n\n        case 'anchorY':\n          base = this.root.ks;\n          k = 'a';\n          index = 1;\n          break;\n\n        case 'x':\n          base = this.root.ks;\n          k = 'p';\n          index = 0;\n          break;\n\n        case 'y':\n          base = this.root.ks;\n          k = 'p';\n          index = 1;\n          break;\n\n        case 'rotate':\n          base = this.root.ks;\n          k = 'r';\n          index = -1;\n          break;\n\n        case 'opacity':\n          base = this.root.ks;\n          k = 'o';\n          index = -1;\n          break;\n\n        case 'trimStart':\n          base = this.findOrInsertPropertyConfig('tm');\n          k = 's';\n          index = -1;\n          break;\n\n        case 'trimEnd':\n          base = this.findOrInsertPropertyConfig('tm');\n          k = 'e';\n          index = -1;\n          break;\n\n        case 'trimOffset':\n          base = this.findOrInsertPropertyConfig('tm');\n          k = 'o';\n          index = -1;\n          break;\n\n        case 'fillColor':\n          base = this.findPropertyConfig('fl');\n          k = 'c';\n          index = -1;\n          break;\n\n        case 'strokeColor':\n          base = this.findPropertyConfig('st');\n          k = 'c';\n          index = -1;\n          break;\n\n        case 'strokeWidth':\n          base = this.findPropertyConfig('st');\n          k = 'w';\n          index = -1;\n          break;\n\n        case 'shape':\n          base = this.findPropertyConfig('sh');\n          k = 'ks';\n          index = -1;\n          break;\n\n        case 'fillOpacity':\n          base = this.findPropertyConfig('fl');\n          k = 'o';\n          index = -1;\n          break;\n\n        case 'strokeOpacity':\n          base = this.findPropertyConfig('st');\n          k = 'o';\n          index = -1;\n          break;\n      }\n\n      return [base, k, index];\n    }\n  }, {\n    key: \"updateTimeRange\",\n    value: function updateTimeRange() {\n      this.root.op = Math.max.apply(Math, _toConsumableArray(Object.values(this.timeRange)).concat([1]));\n    }\n  }]);\n\n  function JSMovinLayer(ref) {\n    _classCallCheck(this, JSMovinLayer);\n\n    _defineProperty(this, \"root\", void 0);\n\n    _defineProperty(this, \"anchor\", void 0);\n\n    _defineProperty(this, \"position\", void 0);\n\n    _defineProperty(this, \"timeRange\", {});\n\n    this.root = ref;\n    this.anchor = [0, 0, 0];\n    this.position = [0, 0, 0];\n  }\n  /**\n   * \n   * @param key the name of property to be set\n   * @param value the value to be set\n   */\n\n\n  _createClass(JSMovinLayer, [{\n    key: \"setStaticProperty\",\n    value: function setStaticProperty(key, value) {\n      this.timeRange[key] = 1;\n      this.updateTimeRange();\n\n      if (value instanceof _path.PathMaker) {\n        value.uniform();\n        value = value.path;\n      }\n\n      var base, k, index;\n\n      var _this$commonPropertyM = this.commonPropertyMapping(key);\n\n      var _this$commonPropertyM2 = _slicedToArray(_this$commonPropertyM, 3);\n\n      base = _this$commonPropertyM2[0];\n      k = _this$commonPropertyM2[1];\n      index = _this$commonPropertyM2[2];\n\n      if (!k || index === undefined) {\n        switch (key) {\n          case 'text':\n            if (this.root.ty == 5) {\n              var doc = this.root.t.d;\n              doc.k = [doc.k[0]];\n              doc.k[0].t = 0;\n              doc.k[0].s.t = value;\n            }\n\n            break;\n\n          default:\n            console.error(key, value);\n            throw new Error('Not a valid key.');\n        }\n      }\n\n      if (base && k && index !== undefined) {\n        this.convertToStaticProperty(base, k);\n        if (index >= 0) base[k].k[index] = value;else base[k].k = value;\n      }\n    }\n    /**\n     * \n     * @param key the name of property to be set\n     * @param startFrame frame number to start the animation\n     * @param endFrame frame number to end the animation\n     * @param startValue value to be set in start of animation\n     * @param endValue value to be set in end of animation\n     * @param easing easing function, default is linear\n     */\n\n  }, {\n    key: \"setAnimatableProperty\",\n    value: function setAnimatableProperty(key, startFrame, endFrame, startValue, endValue, easing) {\n      if (endFrame <= startFrame) {\n        throw new Error('End frame should be larger than start frame.');\n      }\n\n      this.timeRange[key] = Math.max(this.timeRange[key] || 0, endFrame + 1);\n      this.updateTimeRange();\n\n      if (!easing) {\n        easing = _easing.EasingFactory.linear();\n      }\n\n      if (startValue instanceof _path.PathMaker || endValue instanceof _path.PathMaker) {\n        [startValue, endValue].forEach(function (v) {\n          return v instanceof _path.PathMaker && v.uniform();\n        });\n\n        if (startValue instanceof _path.PathMaker && endValue instanceof _path.PathMaker) {\n          var startLineCount = startValue.path.v.length - 1;\n          var endLineCount = endValue.path.v.length - 1;\n\n          if (!(startLineCount <= 0 && endLineCount <= 0)) {\n            if (Math.min(startLineCount, endLineCount) <= 0 && Math.max(startLineCount, endLineCount) > 0) {\n              var needCopy = startLineCount <= 0 ? startValue : endValue;\n              var needLength = Math.max(startLineCount, endLineCount);\n              ['i', 'o', 'v'].forEach(function (key) {\n                needCopy.path[key] = Array(needLength).fill(needCopy.path[key].length ? needCopy.path[key][0] : [0, 0]);\n              });\n            } else {\n              var commonMultiple = (0, _helper.leastCommonMultiple)(startLineCount, endLineCount);\n              startValue.upsample(Math.round(commonMultiple / startLineCount));\n              endValue.upsample(Math.round(commonMultiple / endLineCount));\n            }\n          }\n        }\n\n        var _map = [startValue, endValue].map(function (v) {\n          return v instanceof _path.PathMaker ? v.path : v;\n        });\n\n        var _map2 = _slicedToArray(_map, 2);\n\n        startValue = _map2[0];\n        endValue = _map2[1];\n      }\n\n      var base,\n          k,\n          index,\n          wrap = true;\n\n      var _this$commonPropertyM3 = this.commonPropertyMapping(key);\n\n      var _this$commonPropertyM4 = _slicedToArray(_this$commonPropertyM3, 3);\n\n      base = _this$commonPropertyM4[0];\n      k = _this$commonPropertyM4[1];\n      index = _this$commonPropertyM4[2];\n\n      if (!k || index === undefined) {\n        switch (key) {\n          case 'text':\n            if (this.root.ty == 5) {\n              base = this.root.t;\n              var textProp = base.d.k[0].s;\n              var tmpStartValue = JSON.parse(JSON.stringify(textProp));\n              var tmpEndValue = JSON.parse(JSON.stringify(textProp));\n              tmpStartValue.t = startValue;\n              tmpEndValue.t = endValue;\n              startValue = tmpStartValue;\n              endValue = tmpEndValue;\n              k = 'd';\n              index = -1;\n              wrap = false;\n            }\n\n            break;\n\n          default:\n            console.error(key, startFrame, endFrame, startValue, endValue, easing);\n            throw new Error('Not a valid key.');\n        }\n      }\n\n      if (base && k && index !== undefined) {\n        this.convertToAnimatableProperty(base, k);\n        this.addKeyframe(base, k, index, startFrame, startValue, easing, wrap);\n        this.addKeyframe(base, k, index, endFrame, endValue, _easing.EasingFactory.linear(), wrap);\n      }\n    }\n  }]);\n\n  return JSMovinLayer;\n}();\n\nexports.JSMovinLayer = JSMovinLayer;\n\nvar LayerFactory =\n/*#__PURE__*/\nfunction () {\n  function LayerFactory() {\n    _classCallCheck(this, LayerFactory);\n  }\n\n  _createClass(LayerFactory, null, [{\n    key: \"generateTransform\",\n    value: function generateTransform(coordinate) {\n      return {\n        o: {\n          a: 0,\n          k: 100\n        },\n        r: {\n          a: 0,\n          k: 0\n        },\n        p: {\n          a: 0,\n          k: [coordinate[0], coordinate[1], 0]\n        },\n        a: {\n          a: 0,\n          k: [0, 0, 0]\n        },\n        s: {\n          a: 0,\n          k: [100, 100, 100]\n        }\n      };\n    }\n    /**\n     * create the bounding box of svg element\n     * @param dom svg element needs to calculate the bounding box\n     */\n\n  }, {\n    key: \"boundingBox\",\n    value: function boundingBox(dom) {\n      var boundingBox = (0, _helper.getBoundingBox)(dom).map(function (v, i) {\n        return i < 2 ? v - 1 : v + 1;\n      });\n      return this.rect.apply(this, _toConsumableArray(boundingBox));\n    }\n    /**\n     * create the same shape of svg path\n     * @param dom svg path element represent the shape\n     */\n\n  }, {\n    key: \"shape\",\n    value: function shape(dom) {\n      var coordinate = (0, _helper.getBoundingBox)(dom);\n      var layer = {\n        ty: 4,\n        ddd: 0,\n        sr: 1,\n        ao: 0,\n        ks: this.generateTransform(coordinate),\n        ip: 0,\n        op: 1,\n        st: 0,\n        bm: 0,\n        shapes: (0, _render.render)(dom)\n      };\n      return new JSMovinLayer(layer);\n    }\n    /**\n     * create a rectangle\n     * @param left left of rect\n     * @param top top of rect\n     * @param width width of rect\n     * @param height height of rect\n     */\n\n  }, {\n    key: \"rect\",\n    value: function rect(left, top, width, height) {\n      var layer = {\n        ty: 4,\n        ddd: 0,\n        sr: 1,\n        ao: 0,\n        ks: this.generateTransform([left, top, width, height]),\n        ip: 0,\n        op: 1,\n        st: 0,\n        bm: 0,\n        shapes: [(0, _render.renderPlainGlyph)('rect', [width, height])]\n      };\n      return new JSMovinLayer(layer);\n    }\n    /**\n     * create a ellipse\n     * @param cx x center of ellipse\n     * @param cy y center of ellipse\n     * @param rx x radius of ellipse\n     * @param ry y radius of ellipse\n     */\n\n  }, {\n    key: \"ellipse\",\n    value: function ellipse(cx, cy, rx, ry) {\n      var layer = {\n        ty: 4,\n        ddd: 0,\n        sr: 1,\n        ao: 0,\n        ks: this.generateTransform([cx - rx, cy - ry, 2 * rx, 2 * ry]),\n        ip: 0,\n        op: 1,\n        st: 0,\n        bm: 0,\n        shapes: [(0, _render.renderPlainGlyph)('ellipse', [rx, ry])]\n      };\n      return new JSMovinLayer(layer);\n    }\n    /**\n     * make a layer by asset ID\n     * @param id asset reference ID\n     */\n\n  }, {\n    key: \"ref\",\n    value: function ref(id) {\n      var layer = new JSMovinLayer({\n        ty: 0,\n        ddd: 0,\n        sr: 1,\n        ao: 0,\n        ks: this.generateTransform([0, 0, 0, 0]),\n        ip: 0,\n        op: 1,\n        st: 0,\n        bm: 0,\n        w: 9e9,\n        h: 9e9,\n        refId: id\n      });\n      return layer;\n    }\n    /**\n     * make a complex layer by an arbitrary svg element\n     * @param dom svg element need to be parsed\n     * @param assetList a list contains image/layer asset\n     * @param fontList a list contains font asset\n     */\n\n  }, {\n    key: \"hierarchy\",\n    value: function hierarchy(dom, assetList, fontList) {\n      var _this = this;\n\n      var coordinate = (0, _helper.getBoundingBox)(dom);\n      var domType;\n\n      if (dom instanceof SVGTextElement) {\n        domType = 5;\n      } else if (dom instanceof SVGImageElement) {\n        domType = 2;\n      } else if (dom instanceof SVGGElement) {\n        domType = 0;\n      } else {\n        domType = 4;\n      }\n\n      var layer = {\n        ty: domType,\n        ddd: 0,\n        sr: 1,\n        ao: 0,\n        ks: this.generateTransform(domType == 0 ? [0, 0, 0, 0] : coordinate),\n        ip: 0,\n        op: 1,\n        st: 0,\n        bm: 0\n      };\n\n      switch (domType) {\n        case 0:\n          var domLeaves = (0, _helper.getLeafNodes)(dom);\n\n          if (domLeaves.filter(function (dom) {\n            return dom instanceof SVGTextElement || dom instanceof SVGImageElement;\n          }).length) {\n            var precompLayer = layer;\n            var preCompAsset = [];\n            var preCompRefId = (0, _v[\"default\"])();\n            domLeaves.forEach(function (d) {\n              if (d instanceof SVGGraphicsElement && !(d instanceof SVGGElement)) {\n                preCompAsset.unshift(_this.hierarchy(d, assetList, fontList));\n              }\n            });\n            preCompAsset.forEach(function (layer) {\n              layer.root.op = 9e9;\n            });\n            precompLayer.w = coordinate[0] + coordinate[2] + 1;\n            precompLayer.h = coordinate[1] + coordinate[3] + 1;\n            precompLayer.refId = preCompRefId;\n            assetList.push({\n              id: preCompRefId,\n              layers: preCompAsset.map(function (layer) {\n                return layer.root;\n              })\n            });\n          } else {\n            var _shapeLayer = layer;\n            _shapeLayer.ty = 4;\n            _shapeLayer.ks = this.generateTransform(coordinate);\n            _shapeLayer.shapes = (0, _render.render)(dom);\n          }\n\n          break;\n\n        case 2:\n          var imageLayer = layer;\n\n          var _renderImage = (0, _render.renderImage)(dom, assetList),\n              _renderImage2 = _slicedToArray(_renderImage, 2),\n              imageRefId = _renderImage2[0],\n              imageAsset = _renderImage2[1];\n\n          imageLayer.refId = imageRefId;\n          if (!assetList.filter(function (a) {\n            return a.id == imageRefId;\n          }).length) assetList.push(imageAsset);\n          break;\n\n        case 4:\n          var shapeLayer = layer;\n          shapeLayer.shapes = (0, _render.render)(dom);\n          break;\n\n        case 5:\n          var textLayer = layer; // move textLayer's position to text-anchor-related\n\n          var baseLineHeight = (0, _helper.getBaselineHeight)(dom);\n          var textAnchor = (0, _helper.encodeTextAnchor)(getComputedStyle(dom).textAnchor);\n          var textAnchorWeight = [0, 1, 0.5][textAnchor];\n          textLayer.ks.p.k = [coordinate[0] + coordinate[2] * textAnchorWeight, coordinate[1] + coordinate[3] - baseLineHeight, 0];\n          textLayer.ks.o.k = ~~(parseFloat(getComputedStyle(dom).fillOpacity || '1') * 100);\n\n          var _renderText = (0, _render.renderText)(dom, fontList),\n              _renderText2 = _slicedToArray(_renderText, 2),\n              textData = _renderText2[0],\n              font = _renderText2[1];\n\n          textLayer.t = textData;\n          if (!fontList.list.filter(function (f) {\n            return f.fName == font.fName;\n          }).length) fontList.list.push(font);\n          break;\n      }\n\n      var movinLayer = new JSMovinLayer(layer);\n      return movinLayer;\n    }\n  }]);\n\n  return LayerFactory;\n}();\n\nexports.LayerFactory = LayerFactory;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9sYXllci50cyJdLCJuYW1lcyI6WyJKU01vdmluTGF5ZXIiLCJrZXkiLCJKU09OIiwicGFyc2UiLCJzdHJpbmdpZnkiLCJhbmNob3IiLCJwb3NpdGlvbiIsInMiLCJrIiwiZSIsIm8iLCJ0cmFuc2Zvcm0iLCJhIiwiZ2V0RGVmYXVsdFByb3BlcnR5Iiwic3RhdGljVmFsdWUiLCJpZHgiLCJ0aW1lIiwidmFsdWUiLCJlYXNpbmciLCJ3cmFwIiwiZXhpc3RLZXlmcmFtZSIsImZpbHRlciIsIngiLCJ0IiwicmVhZHlUb1NldCIsImxlbmd0aCIsInByZXZpb3VzS2V5ZnJhbWVDb3VudCIsInJlZHVjZSIsInAiLCJzcGxpY2UiLCJ5IiwiaSIsIkFycmF5Iiwicm9vdCIsInNoYXBlcyIsIml0IiwiZmluZCIsInNoYXBlIiwidHkiLCJmaW5kUHJvcGVydHlDb25maWciLCJoYXNUcmFuc2Zvcm0iLCJjb25maWciLCJncm91cFNoYXBlcyIsInB1c2giLCJiYXNlIiwiaW5kZXgiLCJrcyIsImZpbmRPckluc2VydFByb3BlcnR5Q29uZmlnIiwib3AiLCJNYXRoIiwibWF4IiwiT2JqZWN0IiwidmFsdWVzIiwidGltZVJhbmdlIiwicmVmIiwidXBkYXRlVGltZVJhbmdlIiwiUGF0aE1ha2VyIiwidW5pZm9ybSIsInBhdGgiLCJjb21tb25Qcm9wZXJ0eU1hcHBpbmciLCJ1bmRlZmluZWQiLCJkb2MiLCJkIiwiY29uc29sZSIsImVycm9yIiwiRXJyb3IiLCJjb252ZXJ0VG9TdGF0aWNQcm9wZXJ0eSIsInN0YXJ0RnJhbWUiLCJlbmRGcmFtZSIsInN0YXJ0VmFsdWUiLCJlbmRWYWx1ZSIsIkVhc2luZ0ZhY3RvcnkiLCJsaW5lYXIiLCJmb3JFYWNoIiwidiIsInN0YXJ0TGluZUNvdW50IiwiZW5kTGluZUNvdW50IiwibWluIiwibmVlZENvcHkiLCJuZWVkTGVuZ3RoIiwiZmlsbCIsImNvbW1vbk11bHRpcGxlIiwidXBzYW1wbGUiLCJyb3VuZCIsIm1hcCIsInRleHRQcm9wIiwidG1wU3RhcnRWYWx1ZSIsInRtcEVuZFZhbHVlIiwiY29udmVydFRvQW5pbWF0YWJsZVByb3BlcnR5IiwiYWRkS2V5ZnJhbWUiLCJMYXllckZhY3RvcnkiLCJjb29yZGluYXRlIiwiciIsImRvbSIsImJvdW5kaW5nQm94IiwicmVjdCIsImxheWVyIiwiZGRkIiwic3IiLCJhbyIsImdlbmVyYXRlVHJhbnNmb3JtIiwiaXAiLCJzdCIsImJtIiwibGVmdCIsInRvcCIsIndpZHRoIiwiaGVpZ2h0IiwiY3giLCJjeSIsInJ4IiwicnkiLCJpZCIsInciLCJoIiwicmVmSWQiLCJhc3NldExpc3QiLCJmb250TGlzdCIsImRvbVR5cGUiLCJTVkdUZXh0RWxlbWVudCIsIlNWR0ltYWdlRWxlbWVudCIsIlNWR0dFbGVtZW50IiwiZG9tTGVhdmVzIiwicHJlY29tcExheWVyIiwicHJlQ29tcEFzc2V0IiwicHJlQ29tcFJlZklkIiwiU1ZHR3JhcGhpY3NFbGVtZW50IiwidW5zaGlmdCIsImhpZXJhcmNoeSIsImxheWVycyIsInNoYXBlTGF5ZXIiLCJpbWFnZUxheWVyIiwiaW1hZ2VSZWZJZCIsImltYWdlQXNzZXQiLCJ0ZXh0TGF5ZXIiLCJiYXNlTGluZUhlaWdodCIsInRleHRBbmNob3IiLCJnZXRDb21wdXRlZFN0eWxlIiwidGV4dEFuY2hvcldlaWdodCIsInBhcnNlRmxvYXQiLCJmaWxsT3BhY2l0eSIsInRleHREYXRhIiwiZm9udCIsImxpc3QiLCJmIiwiZk5hbWUiLCJtb3ZpbkxheWVyIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBQ0E7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0lBSWFBLFk7Ozs7O3VDQUtrQkMsRyxFQUFhO0FBQ3BDLGNBQVFBLEdBQVI7QUFDSSxhQUFLLEdBQUw7QUFDQSxhQUFLLEdBQUw7QUFDSSxpQkFBT0MsSUFBSSxDQUFDQyxLQUFMLENBQVdELElBQUksQ0FBQ0UsU0FBTCxDQUFlSCxHQUFHLElBQUksR0FBUCxHQUFhLEtB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YUFBT2tELFVBQVA7QUFDSCIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFNoYXBlTGF5ZXIsIFRleHRMYXllciwgSW1hZ2VMYXllciwgVHJhbnNmb3JtLCBBc3NldHMsIEZvbnRzLCBHcm91cFNoYXBlLCBQcmVDb21wTGF5ZXIsIFJlZmVyZW5jZUlEIH0gZnJvbSAnLi9hbmltYXRpb24nXG5pbXBvcnQgeyBFYXNpbmdGdW5jdGlvbiwgRWFzaW5nRmFjdG9yeSB9IGZyb20gJy4vZWFzaW5nJ1xuaW1wb3J0IHsgcmVuZGVyVGV4dCwgcmVuZGVyLCByZW5kZXJJbWFnZSwgcmVuZGVyUGxhaW5HbHlwaCB9IGZyb20gJy4vcmVuZGVyJztcbmltcG9ydCB7IGdldEJvdW5kaW5nQm94LCBnZXRMZWFmTm9kZXMsIGdldEJhc2VsaW5lSGVpZ2h0LCBlbmNvZGVUZXh0QW5jaG9yLCBsZWFzdENvbW1vbk11bHRpcGxlIH0gZnJvbSAnLi9oZWxwZXInXG5pbXBvcnQgdXVpZCBmcm9tICd1dWlkL3Y0JztcbmltcG9ydCB7IFBhdGhNYWtlciB9IGZyb20gJy4vcGF0aCc7XG5cbnR5cGUgU2V0YWJsZUtleXMgPSBcInNjYWxlWFwiIHwgXCJzY2FsZVlcIiB8IFwiYW5jaG9yWFwiIHwgXCJhbmNob3JZXCIgfCBcInhcIiB8IFwieVwiIHwgXCJyb3RhdGVcIiB8IFwib3BhY2l0eVwiIHwgJ3NoYXBlJyB8ICdmaWxsQ29sb3InIHwgJ3RyaW1TdGFydCcgfCAndHJpbUVuZCcgfCAndHJpbU9mZnNldCcgfCAnc3Ryb2tlQ29sb3InIHwgJ3N0cm9rZVdpZHRoJyB8ICd0ZXh0JyB8ICdmaWxsT3BhY2l0eScgfCAnc3Ryb2tlT3BhY2l0eSdcblxuZXhwb3J0IGNsYXNzIEpTTW92aW5MYXllciB7XG4gICAgcHVibGljIHJlYWRvbmx5IHJvb3Q6IFNoYXBlTGF5ZXIgfCBUZXh0TGF5ZXIgfCBJbWFnZUxheWVyIHwgUHJlQ29tcExheWVyO1xuICAgIHByaXZhdGUgYW5jaG9yOiBudW1iZXJbXVxuICAgIHByaXZhdGUgcG9zaXRpb246IG51bWJlcltdXG4gICAgcHJpdmF0ZSB0aW1lUmFuZ2U6IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0gPSB7fVxuICAgIHByaXZhdGUgZ2V0RGVmYXVsdFByb3BlcnR5KGtleTogc3RyaW5nKSB7XG4gICAgICAgIHN3aXRjaCAoa2V5KSB7XG4gICAgICAgICAgICBjYXNlICdhJzpcbiAgICAgICAgICAgIGNhc2UgJ3AnOlxuICAgICAgICAgICAgICAgIHJldHVybiBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KGtleSA9PSAnYScgPyB0aGlzLmFuY2hvciA6IHRoaXMucG9zaXRpb24pKVxuICAgICAgICAgICAgY2FzZSAncyc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIFsxMDAsIDEwMCwgMTAwXVxuICAgICAgICAgICAgY2FzZSAnbyc6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDEwMFxuICAgICAgICAgICAgY2FzZSAncic6XG4gICAgICAgICAgICAgICAgcmV0dXJuIDBcbiAgICAgICAgICAgIGNhc2UgJ3RtJzpcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgICAgICBzOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBrOiAwXG4gICAgICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgICAgIGU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGs6IDEwMFxuICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICBvOiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBrOiAwXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgIHJldHVybiAwXG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJpdmF0ZSBjb252ZXJ0VG9TdGF0aWNQcm9wZXJ0eSh0cmFuc2Zvcm06IGFueSwga2V5OiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKCF0cmFuc2Zvcm1ba2V5XSkge1xuICAgICAgICAgICAgdHJhbnNmb3JtW2tleV0gPSB7XG4gICAgICAgICAgICAgICAgYTogMCxcbiAgICAgICAgICAgICAgICBrOiB0aGlzLmdldERlZmF1bHRQcm9wZXJ0eShrZXkpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHRyYW5zZm9ybVtrZXldLmEgPT0gMSkge1xuICAgICAgICAgICAgY29uc3Qgc3RhdGljVmFsdWUgPSB0cmFuc2Zvcm1ba2V5XS5rWzBdLnNcbiAgICAgICAgICAgIHRyYW5zZm9ybVtrZXldID0ge1xuICAgICAgICAgICAgICAgIGE6IDAsXG4gICAgICAgICAgICAgICAgazogc3RhdGljVmFsdWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICBwcml2YXRlIGNvbnZlcnRUb0FuaW1hdGFibGVQcm9wZXJ0eSh0cmFuc2Zvcm06IGFueSwga2V5OiBzdHJpbmcpIHtcbiAgICAgICAgaWYgKCF0cmFuc2Zvcm1ba2V5XSB8fCAhdHJhbnNmb3JtW2tleV0uYSkge1xuICAgICAgICAgICAgaWYgKGtleSA9PSAnYScpIHtcbiAgICAgICAgICAgICAgICB0aGlzLmFuY2hvciA9IHRyYW5zZm9ybVtrZXldID8gdHJhbnNmb3JtW2tleV0uayA6IFswLCAwLCAwXVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKGtleSA9PSAncCcpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBvc2l0aW9uID0gdHJhbnNmb3JtW2tleV0gPyB0cmFuc2Zvcm1ba2V5XS5rIDogWzAsIDAsIDBdXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0cmFuc2Zvcm1ba2V5XSA9IHtcbiAgICAgICAgICAgICAgICBhOiAxLFxuICAgICAgICAgICAgICAgIGs6IFtdXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJpdmF0ZSBhZGRLZXlmcmFtZSh0cmFuc2Zvcm06IGFueSwga2V5OiBzdHJpbmcsIGlkeDogbnVtYmVyID0gLTEsIHRpbWU6IG51bWJlciwgdmFsdWU6IEFycmF5PGFueT4sIGVhc2luZz86IEVhc2luZ0Z1bmN0aW9uLCB3cmFwOiBib29sZWFuID0gdHJ1ZSkge1xuICAgICAgICBjb25zdCBleGlzdEtleWZyYW1lID0gdHJhbnNmb3JtW2tleV0uay5maWx0ZXIoKHg6IGFueSkgPT4geC50ID09IHRpbWUpIGFzIGFueVtdXG4gICAgICAgIGxldCByZWFkeVRvU2V0O1xuICAgICAgICBpZiAoZXhpc3RLZXlmcmFtZS5sZW5ndGgpIHtcbiAgICAgICAgICAgIHJlYWR5VG9TZXQgPSBleGlzdEtleWZyYW1lWzBdXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZWFkeVRvU2V0ID0ge1xuICAgICAgICAgICAgICAgIHQ6IHRpbWUsXG4gICAgICAgICAgICAgICAgczogdGhpcy5nZXREZWZhdWx0UHJvcGVydHkoa2V5KVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgY29uc3QgcHJldmlvdXNLZXlmcmFtZUNvdW50ID0gdHJhbnNmb3JtW2tleV0uay5yZWR1Y2UoKHA6IG51bWJlciwgeDogYW55KSA9PiB4LnQgPCB0aW1lID8gcCArIDEgOiBwLCAwKVxuICAgICAgICAgICAgdHJhbnNmb3JtW2tleV0uay5zcGxpY2UocHJldmlvdXNLZXlmcmFtZUNvdW50LCAwLCByZWFkeVRvU2V0KVxuICAgICAgICB9XG4gICAgICAgIGlmIChlYXNpbmcpIHtcbiAgICAgICAgICAgIHJlYWR5VG9TZXQubyA9IHtcbiAgICAgICAgICAgICAgICB4OiBlYXNpbmdbMF1bMF0sXG4gICAgICAgICAgICAgICAgeTogZWFzaW5nWzBdWzFdXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZWFkeVRvU2V0LmkgPSB7XG4gICAgICAgICAgICAgICAgeDogZWFzaW5nWzFdWzBdLFxuICAgICAgICAgICAgICAgIHk6IGVhc2luZ1sxXVsxXVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChpZHggPj0gMCkge1xuICAgICAgICAgICAgcmVhZHlUb1NldC5zW2lkeF0gPSB2YWx1ZVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVhZHlUb1NldC5zID0gd3JhcCAmJiAhKHZhbHVlIGluc3RhbmNlb2YgQXJyYXkpID8gW3ZhbHVlXSA6IHZhbHVlXG4gICAgICAgIH1cbiAgICB9XG4gICAgcHJpdmF0ZSBmaW5kUHJvcGVydHlDb25maWcoa2V5OiBzdHJpbmcpIHtcbiAgICAgICAgcmV0dXJuICgodGhpcy5yb290IGFzIFNoYXBlTGF5ZXIpLnNoYXBlcyFbMF0gYXMgR3JvdXBTaGFwZSkuaXQhLmZpbmQoc2hhcGUgPT5cbiAgICAgICAgICAgIHNoYXBlLnR5ID09IGtleVxuICAgICAgICApXG4gICAgfVxuICAgIHByaXZhdGUgZmluZE9ySW5zZXJ0UHJvcGVydHlDb25maWcoa2V5OiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgZmluZCA9IHRoaXMuZmluZFByb3BlcnR5Q29uZmlnKGtleSlcbiAgICAgICAgaWYgKGZpbmQpIHJldHVybiBmaW5kXG4gICAgICAgIGNvbnN0IGhhc1RyYW5zZm9ybSA9IHRoaXMuZmluZFByb3BlcnR5Q29uZmlnKCd0cicpXG4gICAgICAgIGNvbnN0IGNvbmZpZyA9IHtcbiAgICAgICAgICAgIHR5OiBrZXksXG4gICAgICAgICAgICAuLi50aGlzLmdldERlZmF1bHRQcm9wZXJ0eShrZXkpIGFzIG9iamVjdFxuICAgICAgICB9XG4gICAgICAgIGlmIChoYXNUcmFuc2Zvcm0pIHtcbiAgICAgICAgICAgIGNvbnN0IGdyb3VwU2hhcGVzID0gKCh0aGlzLnJvb3QgYXMgU2hhcGVMYXllcikuc2hhcGVzIVswXSBhcyBHcm91cFNoYXBlKS5pdCFcbiAgICAgICAgICAgIGdyb3VwU2hhcGVzLnNwbGljZShncm91cFNoYXBlcy5sZW5ndGggLSAxLCAwLCBjb25maWcpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAoKHRoaXMucm9vdCBhcyBTaGFwZUxheWVyKS5zaGFwZXMhWzBdIGFzIEdyb3VwU2hhcGUpLml0IS5wdXNoKGNvbmZpZylcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gY29uZmlnXG4gICAgfVxuICAgIHByaXZhdGUgY29tbW9uUHJvcGVydHlNYXBwaW5nKGtleTogU2V0YWJsZUtleXMpOiBbYW55LCBzdHJpbmcgfCB1bmRlZmluZWQsIG51bWJlciB8IHVuZGVmaW5lZF0ge1xuICAgICAgICBsZXQgYmFzZTogYW55LCBrOiBzdHJpbmcgfCB1bmRlZmluZWQsIGluZGV4OiBudW1iZXIgfCB1bmRlZmluZWRcbiAgICAgICAgc3dpdGNoIChrZXkpIHtcbiAgICAgICAgICAgIGNhc2UgJ3NjYWxlWCc6XG4gICAgICAgICAgICAgICAgYmFzZSA9IHRoaXMucm9vdC5rc1xuICAgICAgICAgICAgICAgIGsgPSAncydcbiAgICAgICAgICAgICAgICBpbmRleCA9IDBcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAnc2NhbGVZJzpcbiAgICAgICAgICAgICAgICBiYXNlID0gdGhpcy5yb290LmtzXG4gICAgICAgICAgICAgICAgayA9ICdzJ1xuICAgICAgICAgICAgICAgIGluZGV4ID0gMVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlICdhbmNob3JYJzpcbiAgICAgICAgICAgICAgICBiYXNlID0gdGhpcy5yb290LmtzXG4gICAgICAgICAgICAgICAgayA9ICdhJ1xuICAgICAgICAgICAgICAgIGluZGV4ID0gMFxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlICdhbmNob3JZJzpcbiAgICAgICAgICAgICAgICBiYXNlID0gdGhpcy5yb290LmtzXG4gICAgICAgICAgICAgICAgayA9ICdhJ1xuICAgICAgICAgICAgICAgIGluZGV4ID0gMVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlICd4JzpcbiAgICAgICAgICAgICAgICBiYXNlID0gdGhpcy5yb290LmtzXG4gICAgICAgICAgICAgICAgayA9ICdwJ1xuICAgICAgICAgICAgICAgIGluZGV4ID0gMFxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlICd5JzpcbiAgICAgICAgICAgICAgICBiYXNlID0gdGhpcy5yb290LmtzXG4gICAgICAgICAgICAgICAgayA9ICdwJ1xuICAgICAgICAgICAgICAgIGluZGV4ID0gMVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlICdyb3RhdGUnOlxuICAgICAgICAgICAgICAgIGJhc2UgPSB0aGlzLnJvb3Qua3NcbiAgICAgICAgICAgICAgICBrID0gJ3InXG4gICAgICAgICAgICAgICAgaW5kZXggPSAtMVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlICdvcGFjaXR5JzpcbiAgICAgICAgICAgICAgICBiYXNlID0gdGhpcy5yb290LmtzXG4gICAgICAgICAgICAgICAgayA9ICdvJ1xuICAgICAgICAgICAgICAgIGluZGV4ID0gLTFcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAndHJpbVN0YXJ0JzpcbiAgICAgICAgICAgICAgICBiYXNlID0gdGhpcy5maW5kT3JJbnNlcnRQcm9wZXJ0eUNvbmZpZygndG0nKVxuICAgICAgICAgICAgICAgIGsgPSAncydcbiAgICAgICAgICAgICAgICBpbmRleCA9IC0xXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgJ3RyaW1FbmQnOlxuICAgICAgICAgICAgICAgIGJhc2UgPSB0aGlzLmZpbmRPckluc2VydFByb3BlcnR5Q29uZmlnKCd0bScpXG4gICAgICAgICAgICAgICAgayA9ICdlJ1xuICAgICAgICAgICAgICAgIGluZGV4ID0gLTFcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAndHJpbU9mZnNldCc6XG4gICAgICAgICAgICAgICAgYmFzZSA9IHRoaXMuZmluZE9ySW5zZXJ0UHJvcGVydHlDb25maWcoJ3RtJylcbiAgICAgICAgICAgICAgICBrID0gJ28nXG4gICAgICAgICAgICAgICAgaW5kZXggPSAtMVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlICdmaWxsQ29sb3InOlxuICAgICAgICAgICAgICAgIGJhc2UgPSB0aGlzLmZpbmRQcm9wZXJ0eUNvbmZpZygnZmwnKVxuICAgICAgICAgICAgICAgIGsgPSAnYydcbiAgICAgICAgICAgICAgICBpbmRleCA9IC0xXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgJ3N0cm9rZUNvbG9yJzpcbiAgICAgICAgICAgICAgICBiYXNlID0gdGhpcy5maW5kUHJvcGVydHlDb25maWcoJ3N0JylcbiAgICAgICAgICAgICAgICBrID0gJ2MnXG4gICAgICAgICAgICAgICAgaW5kZXggPSAtMVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlICdzdHJva2VXaWR0aCc6XG4gICAgICAgICAgICAgICAgYmFzZSA9IHRoaXMuZmluZFByb3BlcnR5Q29uZmlnKCdzdCcpXG4gICAgICAgICAgICAgICAgayA9ICd3J1xuICAgICAgICAgICAgICAgIGluZGV4ID0gLTFcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAnc2hhcGUnOlxuICAgICAgICAgICAgICAgIGJhc2UgPSB0aGlzLmZpbmRQcm9wZXJ0eUNvbmZpZygnc2gnKVxuICAgICAgICAgICAgICAgIGsgPSAna3MnXG4gICAgICAgICAgICAgICAgaW5kZXggPSAtMVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICBjYXNlICdmaWxsT3BhY2l0eSc6XG4gICAgICAgICAgICAgICAgYmFzZSA9IHRoaXMuZmluZFByb3BlcnR5Q29uZmlnKCdmbCcpXG4gICAgICAgICAgICAgICAgayA9ICdvJ1xuICAgICAgICAgICAgICAgIGluZGV4ID0gLTFcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAnc3Ryb2tlT3BhY2l0eSc6XG4gICAgICAgICAgICAgICAgYmFzZSA9IHRoaXMuZmluZFByb3BlcnR5Q29uZmlnKCdzdCcpXG4gICAgICAgICAgICAgICAgayA9ICdvJ1xuICAgICAgICAgICAgICAgIGluZGV4ID0gLTFcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiBbYmFzZSwgaywgaW5kZXhdXG4gICAgfVxuICAgIHByaXZhdGUgdXBkYXRlVGltZVJhbmdlKCkge1xuICAgICAgICB0aGlzLnJvb3Qub3AgPSBNYXRoLm1heCguLi5PYmplY3QudmFsdWVzKHRoaXMudGltZVJhbmdlKSwgMSlcbiAgICB9XG5cbiAgICBjb25zdHJ1Y3RvcihyZWY6IFNoYXBlTGF5ZXIgfCBUZXh0TGF5ZXIgfCBJbWFnZUxheWVyIHwgUHJlQ29tcExheWVyKSB7XG4gICAgICAgIHRoaXMucm9vdCA9IHJlZlxuICAgICAgICB0aGlzLmFuY2hvciA9IFswLCAwLCAwXVxuICAgICAgICB0aGlzLnBvc2l0aW9uID0gWzAsIDAsIDBdXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogXG4gICAgICogQHBhcmFtIGtleSB0aGUgbmFtZSBvZiBwcm9wZXJ0eSB0byBiZSBzZXRcbiAgICAgKiBAcGFyYW0gdmFsdWUgdGhlIHZhbHVlIHRvIGJlIHNldFxuICAgICAqL1xuICAgIHNldFN0YXRpY1Byb3BlcnR5KGtleTogU2V0YWJsZUtleXMsIHZhbHVlOiBhbnkpIHtcbiAgICAgICAgdGhpcy50aW1lUmFuZ2Vba2V5XSA9IDFcbiAgICAgICAgdGhpcy51cGRhdGVUaW1lUmFuZ2UoKVxuICAgICAgICBpZiAodmFsdWUgaW5zdGFuY2VvZiBQYXRoTWFrZXIpIHtcbiAgICAgICAgICAgIHZhbHVlLnVuaWZvcm0oKVxuICAgICAgICAgICAgdmFsdWUgPSB2YWx1ZS5wYXRoXG4gICAgICAgIH1cbiAgICAgICAgbGV0IGJhc2U6IGFueSwgazogc3RyaW5nIHwgdW5kZWZpbmVkLCBpbmRleDogbnVtYmVyIHwgdW5kZWZpbmVkXG4gICAgICAgIFtiYXNlLCBrLCBpbmRleF0gPSB0aGlzLmNvbW1vblByb3BlcnR5TWFwcGluZyhrZXkpXG4gICAgICAgIGlmICghayB8fCBpbmRleCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ3RleHQnOlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yb290LnR5ID09IDUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGRvYyA9IHRoaXMucm9vdC50IS5kIVxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmsgPSBbZG9jLmshWzBdXVxuICAgICAgICAgICAgICAgICAgICAgICAgZG9jLmtbMF0udCA9IDBcbiAgICAgICAgICAgICAgICAgICAgICAgIGRvYy5rWzBdLnMhLnQgPSB2YWx1ZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgZGVmYXVsdDpcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihrZXksIHZhbHVlKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vdCBhIHZhbGlkIGtleS4nKVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIGlmIChiYXNlICYmIGsgJiYgaW5kZXggIT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5jb252ZXJ0VG9TdGF0aWNQcm9wZXJ0eShiYXNlLCBrKVxuICAgICAgICAgICAgaWYgKGluZGV4ID49IDApXG4gICAgICAgICAgICAgICAgYmFzZVtrXS5rW2luZGV4XSA9IHZhbHVlXG4gICAgICAgICAgICBlbHNlXG4gICAgICAgICAgICAgICAgYmFzZVtrXS5rID0gdmFsdWVcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIFxuICAgICAqIEBwYXJhbSBrZXkgdGhlIG5hbWUgb2YgcHJvcGVydHkgdG8gYmUgc2V0XG4gICAgICogQHBhcmFtIHN0YXJ0RnJhbWUgZnJhbWUgbnVtYmVyIHRvIHN0YXJ0IHRoZSBhbmltYXRpb25cbiAgICAgKiBAcGFyYW0gZW5kRnJhbWUgZnJhbWUgbnVtYmVyIHRvIGVuZCB0aGUgYW5pbWF0aW9uXG4gICAgICogQHBhcmFtIHN0YXJ0VmFsdWUgdmFsdWUgdG8gYmUgc2V0IGluIHN0YXJ0IG9mIGFuaW1hdGlvblxuICAgICAqIEBwYXJhbSBlbmRWYWx1ZSB2YWx1ZSB0byBiZSBzZXQgaW4gZW5kIG9mIGFuaW1hdGlvblxuICAgICAqIEBwYXJhbSBlYXNpbmcgZWFzaW5nIGZ1bmN0aW9uLCBkZWZhdWx0IGlzIGxpbmVhclxuICAgICAqL1xuICAgIHNldEFuaW1hdGFibGVQcm9wZXJ0eShrZXk6IFNldGFibGVLZXlzLCBzdGFydEZyYW1lOiBudW1iZXIsIGVuZEZyYW1lOiBudW1iZXIsIHN0YXJ0VmFsdWU6IGFueSwgZW5kVmFsdWU6IGFueSwgZWFzaW5nPzogRWFzaW5nRnVuY3Rpb24pIHtcbiAgICAgICAgaWYgKGVuZEZyYW1lIDw9IHN0YXJ0RnJhbWUpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRW5kIGZyYW1lIHNob3VsZCBiZSBsYXJnZXIgdGhhbiBzdGFydCBmcmFtZS4nKVxuICAgICAgICB9XG4gICAgICAgIHRoaXMudGltZVJhbmdlW2tleV0gPSBNYXRoLm1heCh0aGlzLnRpbWVSYW5nZVtrZXldIHx8IDAsIGVuZEZyYW1lICsgMSlcbiAgICAgICAgdGhpcy51cGRhdGVUaW1lUmFuZ2UoKVxuICAgICAgICBpZiAoIWVhc2luZykge1xuICAgICAgICAgICAgZWFzaW5nID0gRWFzaW5nRmFjdG9yeS5saW5lYXIoKVxuICAgICAgICB9XG4gICAgICAgIGlmIChzdGFydFZhbHVlIGluc3RhbmNlb2YgUGF0aE1ha2VyIHx8IGVuZFZhbHVlIGluc3RhbmNlb2YgUGF0aE1ha2VyKSB7XG4gICAgICAgICAgICBbc3RhcnRWYWx1ZSwgZW5kVmFsdWVdLmZvckVhY2godiA9PiB2IGluc3RhbmNlb2YgUGF0aE1ha2VyICYmIHYudW5pZm9ybSgpKVxuICAgICAgICAgICAgaWYgKHN0YXJ0VmFsdWUgaW5zdGFuY2VvZiBQYXRoTWFrZXIgJiYgZW5kVmFsdWUgaW5zdGFuY2VvZiBQYXRoTWFrZXIpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGFydExpbmVDb3VudCA9IHN0YXJ0VmFsdWUucGF0aC52IS5sZW5ndGggLSAxXG4gICAgICAgICAgICAgICAgY29uc3QgZW5kTGluZUNvdW50ID0gZW5kVmFsdWUucGF0aC52IS5sZW5ndGggLSAxXG4gICAgICAgICAgICAgICAgaWYgKCEoc3RhcnRMaW5lQ291bnQgPD0gMCAmJiBlbmRMaW5lQ291bnQgPD0gMCkpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKE1hdGgubWluKHN0YXJ0TGluZUNvdW50LCBlbmRMaW5lQ291bnQpIDw9IDAgJiYgTWF0aC5tYXgoc3RhcnRMaW5lQ291bnQsIGVuZExpbmVDb3VudCkgPiAwKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmVlZENvcHkgPSBzdGFydExpbmVDb3VudCA8PSAwID8gc3RhcnRWYWx1ZSA6IGVuZFZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgbmVlZExlbmd0aCA9IE1hdGgubWF4KHN0YXJ0TGluZUNvdW50LCBlbmRMaW5lQ291bnQpO1xuICAgICAgICAgICAgICAgICAgICAgICAgWydpJywgJ28nLCAndiddLmZvckVhY2goa2V5ID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBuZWVkQ29weS5wYXRoW2tleV0gPSBBcnJheShuZWVkTGVuZ3RoKS5maWxsKG5lZWRDb3B5LnBhdGhba2V5XS5sZW5ndGggPyBuZWVkQ29weS5wYXRoW2tleV1bMF0gOiBbMCwgMF0pXG4gICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgY29tbW9uTXVsdGlwbGUgPSBsZWFzdENvbW1vbk11bHRpcGxlKHN0YXJ0TGluZUNvdW50LCBlbmRMaW5lQ291bnQpXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydFZhbHVlLnVwc2FtcGxlKE1hdGgucm91bmQoY29tbW9uTXVsdGlwbGUgLyBzdGFydExpbmVDb3VudCkpXG4gICAgICAgICAgICAgICAgICAgICAgICBlbmRWYWx1ZS51cHNhbXBsZShNYXRoLnJvdW5kKGNvbW1vbk11bHRpcGxlIC8gZW5kTGluZUNvdW50KSlcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIFtzdGFydFZhbHVlLCBlbmRWYWx1ZV0gPSBbc3RhcnRWYWx1ZSwgZW5kVmFsdWVdLm1hcCh2ID0+IHYgaW5zdGFuY2VvZiBQYXRoTWFrZXIgPyB2LnBhdGggOiB2KVxuICAgICAgICB9XG4gICAgICAgIGxldCBiYXNlOiBhbnksIGs6IHN0cmluZyB8IHVuZGVmaW5lZCwgaW5kZXg6IG51bWJlciB8IHVuZGVmaW5lZCwgd3JhcCA9IHRydWU7XG4gICAgICAgIFtiYXNlLCBrLCBpbmRleF0gPSB0aGlzLmNvbW1vblByb3BlcnR5TWFwcGluZyhrZXkpXG4gICAgICAgIGlmICghayB8fCBpbmRleCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICBzd2l0Y2ggKGtleSkge1xuICAgICAgICAgICAgICAgIGNhc2UgJ3RleHQnOlxuICAgICAgICAgICAgICAgICAgICBpZiAodGhpcy5yb290LnR5ID09IDUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGJhc2UgPSB0aGlzLnJvb3QudFxuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRleHRQcm9wID0gYmFzZS5kLmtbMF0uc1xuICAgICAgICAgICAgICAgICAgICAgICAgbGV0IHRtcFN0YXJ0VmFsdWUgPSBKU09OLnBhcnNlKEpTT04uc3RyaW5naWZ5KHRleHRQcm9wKSlcbiAgICAgICAgICAgICAgICAgICAgICAgIGxldCB0bXBFbmRWYWx1ZSA9IEpTT04ucGFyc2UoSlNPTi5zdHJpbmdpZnkodGV4dFByb3ApKVxuICAgICAgICAgICAgICAgICAgICAgICAgdG1wU3RhcnRWYWx1ZS50ID0gc3RhcnRWYWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgdG1wRW5kVmFsdWUudCA9IGVuZFZhbHVlXG4gICAgICAgICAgICAgICAgICAgICAgICBzdGFydFZhbHVlID0gdG1wU3RhcnRWYWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgZW5kVmFsdWUgPSB0bXBFbmRWYWx1ZVxuICAgICAgICAgICAgICAgICAgICAgICAgayA9ICdkJ1xuICAgICAgICAgICAgICAgICAgICAgICAgaW5kZXggPSAtMVxuICAgICAgICAgICAgICAgICAgICAgICAgd3JhcCA9IGZhbHNlXG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGtleSwgc3RhcnRGcmFtZSwgZW5kRnJhbWUsIHN0YXJ0VmFsdWUsIGVuZFZhbHVlLCBlYXNpbmcpXG4gICAgICAgICAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignTm90IGEgdmFsaWQga2V5LicpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGJhc2UgJiYgayAmJiBpbmRleCAhPT0gdW5kZWZpbmVkKSB7XG4gICAgICAgICAgICB0aGlzLmNvbnZlcnRUb0FuaW1hdGFibGVQcm9wZXJ0eShiYXNlLCBrKVxuICAgICAgICAgICAgdGhpcy5hZGRLZXlmcmFtZShiYXNlLCBrLCBpbmRleCwgc3RhcnRGcmFtZSwgc3RhcnRWYWx1ZSwgZWFzaW5nLCB3cmFwKVxuICAgICAgICAgICAgdGhpcy5hZGRLZXlmcmFtZShiYXNlLCBrLCBpbmRleCwgZW5kRnJhbWUsIGVuZFZhbHVlLCBFYXNpbmdGYWN0b3J5LmxpbmVhcigpLCB3cmFwKVxuICAgICAgICB9XG4gICAgfVxufVxuXG5leHBvcnQgY2xhc3MgTGF5ZXJGYWN0b3J5IHtcbiAgICBwcml2YXRlIHN0YXRpYyBnZW5lcmF0ZVRyYW5zZm9ybShjb29yZGluYXRlOiBudW1iZXJbXSk6IFRyYW5zZm9ybSB7XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBvOiB7XG4gICAgICAgICAgICAgICAgYTogMCxcbiAgICAgICAgICAgICAgICBrOiAxMDBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICByOiB7XG4gICAgICAgICAgICAgICAgYTogMCxcbiAgICAgICAgICAgICAgICBrOiAwXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgcDoge1xuICAgICAgICAgICAgICAgIGE6IDAsXG4gICAgICAgICAgICAgICAgazogW1xuICAgICAgICAgICAgICAgICAgICBjb29yZGluYXRlWzBdLFxuICAgICAgICAgICAgICAgICAgICBjb29yZGluYXRlWzFdLFxuICAgICAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICAgICAgXVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGE6IHtcbiAgICAgICAgICAgICAgICBhOiAwLFxuICAgICAgICAgICAgICAgIGs6IFtcbiAgICAgICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAgICAgMCxcbiAgICAgICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzOiB7XG4gICAgICAgICAgICAgICAgYTogMCxcbiAgICAgICAgICAgICAgICBrOiBbXG4gICAgICAgICAgICAgICAgICAgIDEwMCxcbiAgICAgICAgICAgICAgICAgICAgMTAwLFxuICAgICAgICAgICAgICAgICAgICAxMDBcbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiBjcmVhdGUgdGhlIGJvdW5kaW5nIGJveCBvZiBzdmcgZWxlbWVudFxuICAgICAqIEBwYXJhbSBkb20gc3ZnIGVsZW1lbnQgbmVlZHMgdG8gY2FsY3VsYXRlIHRoZSBib3VuZGluZyBib3hcbiAgICAgKi9cbiAgICBzdGF0aWMgYm91bmRpbmdCb3goZG9tOiBTVkdHcmFwaGljc0VsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgYm91bmRpbmdCb3ggPSBnZXRCb3VuZGluZ0JveChkb20pLm1hcCgodiwgaSkgPT4gaSA8IDIgPyB2IC0gMSA6IHYgKyAxKSBhcyBbbnVtYmVyLCBudW1iZXIsIG51bWJlciwgbnVtYmVyXVxuICAgICAgICByZXR1cm4gdGhpcy5yZWN0KC4uLmJvdW5kaW5nQm94KVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGNyZWF0ZSB0aGUgc2FtZSBzaGFwZSBvZiBzdmcgcGF0aFxuICAgICAqIEBwYXJhbSBkb20gc3ZnIHBhdGggZWxlbWVudCByZXByZXNlbnQgdGhlIHNoYXBlXG4gICAgICovXG4gICAgc3RhdGljIHNoYXBlKGRvbTogU1ZHUGF0aEVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgY29vcmRpbmF0ZSA9IGdldEJvdW5kaW5nQm94KGRvbSlcbiAgICAgICAgY29uc3QgbGF5ZXI6IFNoYXBlTGF5ZXIgPSB7XG4gICAgICAgICAgICB0eTogNCxcbiAgICAgICAgICAgIGRkZDogMCxcbiAgICAgICAgICAgIHNyOiAxLFxuICAgICAgICAgICAgYW86IDAsXG4gICAgICAgICAgICBrczogdGhpcy5nZW5lcmF0ZVRyYW5zZm9ybShjb29yZGluYXRlKSxcbiAgICAgICAgICAgIGlwOiAwLFxuICAgICAgICAgICAgb3A6IDEsXG4gICAgICAgICAgICBzdDogMCxcbiAgICAgICAgICAgIGJtOiAwLFxuICAgICAgICAgICAgc2hhcGVzOiByZW5kZXIoZG9tKVxuXG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIG5ldyBKU01vdmluTGF5ZXIobGF5ZXIpXG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogY3JlYXRlIGEgcmVjdGFuZ2xlXG4gICAgICogQHBhcmFtIGxlZnQgbGVmdCBvZiByZWN0XG4gICAgICogQHBhcmFtIHRvcCB0b3Agb2YgcmVjdFxuICAgICAqIEBwYXJhbSB3aWR0aCB3aWR0aCBvZiByZWN0XG4gICAgICogQHBhcmFtIGhlaWdodCBoZWlnaHQgb2YgcmVjdFxuICAgICAqL1xuICAgIHN0YXRpYyByZWN0KGxlZnQ6IG51bWJlciwgdG9wOiBudW1iZXIsIHdpZHRoOiBudW1iZXIsIGhlaWdodDogbnVtYmVyKSB7XG4gICAgICAgIGNvbnN0IGxheWVyOiBTaGFwZUxheWVyID0ge1xuICAgICAgICAgICAgdHk6IDQsXG4gICAgICAgICAgICBkZGQ6IDAsXG4gICAgICAgICAgICBzcjogMSxcbiAgICAgICAgICAgIGFvOiAwLFxuICAgICAgICAgICAga3M6IHRoaXMuZ2VuZXJhdGVUcmFuc2Zvcm0oW2xlZnQsIHRvcCwgd2lkdGgsIGhlaWdodF0pLFxuICAgICAgICAgICAgaXA6IDAsXG4gICAgICAgICAgICBvcDogMSxcbiAgICAgICAgICAgIHN0OiAwLFxuICAgICAgICAgICAgYm06IDAsXG4gICAgICAgICAgICBzaGFwZXM6IFtcbiAgICAgICAgICAgICAgICByZW5kZXJQbGFpbkdseXBoKCdyZWN0JywgW3dpZHRoLCBoZWlnaHRdKVxuICAgICAgICAgICAgXVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgSlNNb3ZpbkxheWVyKGxheWVyKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIGNyZWF0ZSBhIGVsbGlwc2VcbiAgICAgKiBAcGFyYW0gY3ggeCBjZW50ZXIgb2YgZWxsaXBzZVxuICAgICAqIEBwYXJhbSBjeSB5IGNlbnRlciBvZiBlbGxpcHNlXG4gICAgICogQHBhcmFtIHJ4IHggcmFkaXVzIG9mIGVsbGlwc2VcbiAgICAgKiBAcGFyYW0gcnkgeSByYWRpdXMgb2YgZWxsaXBzZVxuICAgICAqL1xuICAgIHN0YXRpYyBlbGxpcHNlKGN4OiBudW1iZXIsIGN5OiBudW1iZXIsIHJ4OiBudW1iZXIsIHJ5OiBudW1iZXIpIHtcbiAgICAgICAgY29uc3QgbGF5ZXI6IFNoYXBlTGF5ZXIgPSB7XG4gICAgICAgICAgICB0eTogNCxcbiAgICAgICAgICAgIGRkZDogMCxcbiAgICAgICAgICAgIHNyOiAxLFxuICAgICAgICAgICAgYW86IDAsXG4gICAgICAgICAgICBrczogdGhpcy5nZW5lcmF0ZVRyYW5zZm9ybShbY3ggLSByeCwgY3kgLSByeSwgMiAqIHJ4LCAyICogcnldKSxcbiAgICAgICAgICAgIGlwOiAwLFxuICAgICAgICAgICAgb3A6IDEsXG4gICAgICAgICAgICBzdDogMCxcbiAgICAgICAgICAgIGJtOiAwLFxuICAgICAgICAgICAgc2hhcGVzOiBbXG4gICAgICAgICAgICAgICAgcmVuZGVyUGxhaW5HbHlwaCgnZWxsaXBzZScsIFtyeCwgcnldKVxuICAgICAgICAgICAgXVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiBuZXcgSlNNb3ZpbkxheWVyKGxheWVyKVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIG1ha2UgYSBsYXllciBieSBhc3NldCBJRFxuICAgICAqIEBwYXJhbSBpZCBhc3NldCByZWZlcmVuY2UgSURcbiAgICAgKi9cbiAgICBzdGF0aWMgcmVmKGlkOiBSZWZlcmVuY2VJRCkge1xuICAgICAgICBjb25zdCBsYXllciA9IG5ldyBKU01vdmluTGF5ZXIoe1xuICAgICAgICAgICAgdHk6IDAsXG4gICAgICAgICAgICBkZGQ6IDAsXG4gICAgICAgICAgICBzcjogMSxcbiAgICAgICAgICAgIGFvOiAwLFxuICAgICAgICAgICAga3M6IHRoaXMuZ2VuZXJhdGVUcmFuc2Zvcm0oWzAsIDAsIDAsIDBdKSxcbiAgICAgICAgICAgIGlwOiAwLFxuICAgICAgICAgICAgb3A6IDEsXG4gICAgICAgICAgICBzdDogMCxcbiAgICAgICAgICAgIGJtOiAwLFxuICAgICAgICAgICAgdzogOWU5LFxuICAgICAgICAgICAgaDogOWU5LFxuICAgICAgICAgICAgcmVmSWQ6IGlkXG4gICAgICAgIH0pXG4gICAgICAgIHJldHVybiBsYXllclxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIG1ha2UgYSBjb21wbGV4IGxheWVyIGJ5IGFuIGFyYml0cmFyeSBzdmcgZWxlbWVudFxuICAgICAqIEBwYXJhbSBkb20gc3ZnIGVsZW1lbnQgbmVlZCB0byBiZSBwYXJzZWRcbiAgICAgKiBAcGFyYW0gYXNzZXRMaXN0IGEgbGlzdCBjb250YWlucyBpbWFnZS9sYXllciBhc3NldFxuICAgICAqIEBwYXJhbSBmb250TGlzdCBhIGxpc3QgY29udGFpbnMgZm9udCBhc3NldFxuICAgICAqL1xuICAgIHN0YXRpYyBoaWVyYXJjaHkoZG9tOiBTVkdHcmFwaGljc0VsZW1lbnQsIGFzc2V0TGlzdDogQXNzZXRzLCBmb250TGlzdDogRm9udHMpIHtcbiAgICAgICAgY29uc3QgY29vcmRpbmF0ZSA9IGdldEJvdW5kaW5nQm94KGRvbSlcbiAgICAgICAgbGV0IGRvbVR5cGU6IDIgfCA0IHwgNSB8IDA7XG4gICAgICAgIGlmIChkb20gaW5zdGFuY2VvZiBTVkdUZXh0RWxlbWVudCkge1xuICAgICAgICAgICAgZG9tVHlwZSA9IDVcbiAgICAgICAgfSBlbHNlIGlmIChkb20gaW5zdGFuY2VvZiBTVkdJbWFnZUVsZW1lbnQpIHtcbiAgICAgICAgICAgIGRvbVR5cGUgPSAyXG4gICAgICAgIH0gZWxzZSBpZiAoZG9tIGluc3RhbmNlb2YgU1ZHR0VsZW1lbnQpIHtcbiAgICAgICAgICAgIGRvbVR5cGUgPSAwXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBkb21UeXBlID0gNFxuICAgICAgICB9XG4gICAgICAgIGNvbnN0IGxheWVyOiBTaGFwZUxheWVyIHwgSW1hZ2VMYXllciB8IFRleHRMYXllciB8IFByZUNvbXBMYXllciA9IHtcbiAgICAgICAgICAgIHR5OiBkb21UeXBlLFxuICAgICAgICAgICAgZGRkOiAwLFxuICAgICAgICAgICAgc3I6IDEsXG4gICAgICAgICAgICBhbzogMCxcbiAgICAgICAgICAgIGtzOiB0aGlzLmdlbmVyYXRlVHJhbnNmb3JtKGRvbVR5cGUgPT0gMCA/IFswLCAwLCAwLCAwXSA6IGNvb3JkaW5hdGUpLFxuICAgICAgICAgICAgaXA6IDAsXG4gICAgICAgICAgICBvcDogMSxcbiAgICAgICAgICAgIHN0OiAwLFxuICAgICAgICAgICAgYm06IDBcbiAgICAgICAgfVxuICAgICAgICBzd2l0Y2ggKGRvbVR5cGUpIHtcbiAgICAgICAgICAgIGNhc2UgMDpcbiAgICAgICAgICAgICAgICBjb25zdCBkb21MZWF2ZXMgPSBnZXRMZWFmTm9kZXMoZG9tKVxuICAgICAgICAgICAgICAgIGlmIChkb21MZWF2ZXMuZmlsdGVyKGRvbSA9PiBkb20gaW5zdGFuY2VvZiBTVkdUZXh0RWxlbWVudCB8fCBkb20gaW5zdGFuY2VvZiBTVkdJbWFnZUVsZW1lbnQpLmxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICBjb25zdCBwcmVjb21wTGF5ZXIgPSBsYXllciBhcyBQcmVDb21wTGF5ZXJcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcHJlQ29tcEFzc2V0OiBKU01vdmluTGF5ZXJbXSA9IFtdXG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IHByZUNvbXBSZWZJZCA9IHV1aWQoKVxuICAgICAgICAgICAgICAgICAgICBkb21MZWF2ZXMuZm9yRWFjaChkID0+IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkIGluc3RhbmNlb2YgU1ZHR3JhcGhpY3NFbGVtZW50ICYmICEoZCBpbnN0YW5jZW9mIFNWR0dFbGVtZW50KSkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHByZUNvbXBBc3NldC51bnNoaWZ0KHRoaXMuaGllcmFyY2h5KGQsIGFzc2V0TGlzdCwgZm9udExpc3QpKVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICBwcmVDb21wQXNzZXQuZm9yRWFjaChsYXllciA9PiB7XG4gICAgICAgICAgICAgICAgICAgICAgICBsYXllci5yb290Lm9wID0gOWU5XG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgICAgIHByZWNvbXBMYXllci53ID0gY29vcmRpbmF0ZVswXSArIGNvb3JkaW5hdGVbMl0gKyAxXG4gICAgICAgICAgICAgICAgICAgIHByZWNvbXBMYXllci5oID0gY29vcmRpbmF0ZVsxXSArIGNvb3JkaW5hdGVbM10gKyAxXG4gICAgICAgICAgICAgICAgICAgIHByZWNvbXBMYXllci5yZWZJZCA9IHByZUNvbXBSZWZJZFxuICAgICAgICAgICAgICAgICAgICBhc3NldExpc3QucHVzaCh7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogcHJlQ29tcFJlZklkLFxuICAgICAgICAgICAgICAgICAgICAgICAgbGF5ZXJzOiBwcmVDb21wQXNzZXQubWFwKGxheWVyID0+IGxheWVyLnJvb3QpXG4gICAgICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc2hhcGVMYXllciA9IGxheWVyIGFzIFNoYXBlTGF5ZXJcbiAgICAgICAgICAgICAgICAgICAgc2hhcGVMYXllci50eSA9IDRcbiAgICAgICAgICAgICAgICAgICAgc2hhcGVMYXllci5rcyA9IHRoaXMuZ2VuZXJhdGVUcmFuc2Zvcm0oY29vcmRpbmF0ZSlcbiAgICAgICAgICAgICAgICAgICAgc2hhcGVMYXllci5zaGFwZXMgPSByZW5kZXIoZG9tKVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSAyOlxuICAgICAgICAgICAgICAgIGNvbnN0IGltYWdlTGF5ZXIgPSBsYXllciBhcyBJbWFnZUxheWVyXG4gICAgICAgICAgICAgICAgY29uc3QgW2ltYWdlUmVmSWQsIGltYWdlQXNzZXRdID0gcmVuZGVySW1hZ2UoZG9tIGFzIFNWR0ltYWdlRWxlbWVudCwgYXNzZXRMaXN0KVxuICAgICAgICAgICAgICAgIGltYWdlTGF5ZXIucmVmSWQgPSBpbWFnZVJlZklkXG4gICAgICAgICAgICAgICAgaWYgKCFhc3NldExpc3QuZmlsdGVyKGEgPT4gYS5pZCA9PSBpbWFnZVJlZklkKS5sZW5ndGgpXG4gICAgICAgICAgICAgICAgICAgIGFzc2V0TGlzdC5wdXNoKGltYWdlQXNzZXQpXG4gICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgIGNhc2UgNDpcbiAgICAgICAgICAgICAgICBjb25zdCBzaGFwZUxheWVyID0gbGF5ZXIgYXMgU2hhcGVMYXllclxuICAgICAgICAgICAgICAgIHNoYXBlTGF5ZXIuc2hhcGVzID0gcmVuZGVyKGRvbSlcbiAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgY2FzZSA1OlxuICAgICAgICAgICAgICAgIGNvbnN0IHRleHRMYXllciA9IGxheWVyIGFzIFRleHRMYXllclxuXG4gICAgICAgICAgICAgICAgLy8gbW92ZSB0ZXh0TGF5ZXIncyBwb3NpdGlvbiB0byB0ZXh0LWFuY2hvci1yZWxhdGVkXG4gICAgICAgICAgICAgICAgY29uc3QgYmFzZUxpbmVIZWlnaHQgPSBnZXRCYXNlbGluZUhlaWdodChkb20gYXMgU1ZHVGV4dEVsZW1lbnQpXG4gICAgICAgICAgICAgICAgY29uc3QgdGV4dEFuY2hvciA9IGVuY29kZVRleHRBbmNob3IoZ2V0Q29tcHV0ZWRTdHlsZShkb20pLnRleHRBbmNob3IpXG4gICAgICAgICAgICAgICAgY29uc3QgdGV4dEFuY2hvcldlaWdodCA9IFswLCAxLCAwLjVdW3RleHRBbmNob3JdXG4gICAgICAgICAgICAgICAgdGV4dExheWVyLmtzIS5wIS5rID0gW2Nvb3JkaW5hdGVbMF0gKyBjb29yZGluYXRlWzJdICogdGV4dEFuY2hvcldlaWdodCwgY29vcmRpbmF0ZVsxXSArIGNvb3JkaW5hdGVbM10gLSBiYXNlTGluZUhlaWdodCwgMF1cbiAgICAgICAgICAgICAgICB0ZXh0TGF5ZXIua3MhLm8hLmsgPSB+fihwYXJzZUZsb2F0KGdldENvbXB1dGVkU3R5bGUoZG9tKS5maWxsT3BhY2l0eSB8fCAnMScpICogMTAwKVxuXG4gICAgICAgICAgICAgICAgY29uc3QgW3RleHREYXRhLCBmb250XSA9IHJlbmRlclRleHQoZG9tIGFzIFNWR1RleHRFbGVtZW50LCBmb250TGlzdClcbiAgICAgICAgICAgICAgICB0ZXh0TGF5ZXIudCA9IHRleHREYXRhXG4gICAgICAgICAgICAgICAgaWYgKCFmb250TGlzdC5saXN0IS5maWx0ZXIoZiA9PiBmLmZOYW1lID09IGZvbnQuZk5hbWUpLmxlbmd0aClcbiAgICAgICAgICAgICAgICAgICAgZm9udExpc3QubGlzdCEucHVzaChmb250KVxuICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgIH1cbiAgICAgICAgY29uc3QgbW92aW5MYXllciA9IG5ldyBKU01vdmluTGF5ZXIobGF5ZXIpXG4gICAgICAgIHJldHVybiBtb3ZpbkxheWVyXG4gICAgfVxufSJdfQ==","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.PathMaker = void 0;\n\nvar _svgPathParser = require(\"svg-path-parser\");\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nvar PathMaker =\n/*#__PURE__*/\nfunction () {\n  // for discontinuous paths\n  function PathMaker(pathData) {\n    _classCallCheck(this, PathMaker);\n\n    _defineProperty(this, \"path\", {\n      c: false,\n      i: [],\n      o: [],\n      v: []\n    });\n\n    _defineProperty(this, \"currentX\", 0);\n\n    _defineProperty(this, \"currentY\", 0);\n\n    _defineProperty(this, \"nextCVX\", 0);\n    \n    _defineProperty(this, \"nextCVY\", 0);\n\n    _defineProperty(this, \"lastBezier\", 0);\n\n    _defineProperty(this, \"offsetX\", Infinity);\n\n    _defineProperty(this, \"offsetY\", Infinity);\n\n    _defineProperty(this, \"pathReady\", false);\n\n    _defineProperty(this, \"pathStart\", [0, 0]);\n\n    _defineProperty(this, \"pathChain\", []);\n\n    if (pathData) {\n      this.parse(pathData);\n    }\n  }\n\n  _createClass(PathMaker, [{\n    key: \"updateXY\",\n    value: function updateXY(x, y) {\n      this.currentX = x;\n      this.currentY = y;\n      this.offsetX = Math.min(this.offsetX, x);\n      this.offsetY = Math.min(this.offsetY, y);\n    }\n  }, {\n    key: \"calculateBezierMinMax\",\n    value: function calculateBezierMinMax(p0, p1, p2, p3) {\n      var a = 3 * (p3 - 3 * p2 + 3 * p1 - p0);\n      var b = 6 * (p2 - 2 * p1 + p0);\n      var c = 3 * (p1 - p0);\n      var min = Infinity,\n          max = -Infinity;\n\n      if (b * b - 4 * a * c >= 0) {\n        var sqrt = Math.sqrt(b * b - 4 * a * c);\n        var roots = [1, -1].map(function (multi) {\n          return (multi * sqrt - b) / 2 / a;\n        });\n        roots.forEach(function (root) {\n          if (root > 0 && root < 1) {\n            var value = Math.pow(1 - root, 3) * p0 + 3 * Math.pow(1 - root, 2) * root * p1 + 3 * (1 - root) * root * root * p2 + Math.pow(root, 3) * p3;\n            min = Math.min(min, value);\n            max = Math.max(max, value);\n          }\n        });\n      }\n\n      min = Math.min(min, p0, p3);\n      max = Math.max(max, p0, p3);\n      return [min, max];\n    }\n  }, {\n    key: \"calculateHighlyOrder\",\n    value: function calculateHighlyOrder(arr, ratio) {\n      var result = [];\n      arr.forEach(function (v, i, a) {\n        if (i >= a.length - 1) return;\n        result.push(v * (1 - ratio) + a[i + 1] * ratio);\n      });\n      return result;\n    }\n  }, {\n    key: \"calculateBezierSplit\",\n    value: function calculateBezierSplit(ratio) {\n      for (var _len = arguments.length, order0 = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        order0[_key - 1] = arguments[_key];\n      }\n\n      var order1 = this.calculateHighlyOrder(order0, ratio);\n      var order2 = this.calculateHighlyOrder(order1, ratio);\n      var order3 = this.calculateHighlyOrder(order2, ratio);\n      return [order1[0], order2[0], order3[0], order2[1], order1[2], order0[3]];\n    }\n  }, {\n    key: \"moveTo\",\n    value: function moveTo(x, y) {\n      if (!this.pathReady) {\n        this.path.c = false;\n        this.path.i = [[0, 0]];\n        this.path.o = [];\n        this.path.v = [[x, y]];\n        this.currentX = x;\n        this.currentY = y;\n        this.offsetX = x;\n        this.offsetY = y;\n        this.pathReady = true;\n      } else {\n        this.lineTo.apply(this, _toConsumableArray(this.pathStart));\n        this.lineTo(x, y);\n        this.pathChain.push(this.pathStart);\n      }\n\n      this.pathStart = [x, y];\n    }\n  }, {\n    key: \"moveToRelative\",\n    value: function moveToRelative(x, y) {\n      this.moveTo(this.currentX + x, this.currentY + y);\n    }\n  }, {\n    key: \"lineTo\",\n    value: function lineTo(x, y) {\n      this.path.i.push([0, 0]);\n      this.path.o.push([0, 0]);\n      this.path.v.push([x, y]);\n      this.updateXY(x, y);\n    }\n  }, {\n    key: \"lineToRelative\",\n    value: function lineToRelative(x, y) {\n      this.lineTo(this.currentX + x, this.currentY + y);\n    }\n  }, {\n    key: \"horizontalTo\",\n    value: function horizontalTo(x) {\n      this.lineTo(x, this.currentY);\n    }\n  }, {\n    key: \"horizontalToRelative\",\n    value: function horizontalToRelative(x) {\n      this.horizontalTo(this.currentX + x);\n    }\n  }, {\n    key: \"verticalTo\",\n    value: function verticalTo(y) {\n      this.lineTo(this.currentX, y);\n    }\n  }, {\n    key: \"verticalToRelative\",\n    value: function verticalToRelative(y) {\n      this.verticalTo(this.currentY + y);\n    }\n  }, {\n    key: \"cubicBezierCurveTo\",\n    value: function cubicBezierCurveTo(c1x, c1y, c2x, c2y, x, y) {\n      this.path.i.push([c2x - x, c2y - y]);\n      this.path.o.push([c1x - this.currentX, c1y - this.currentY]);\n      this.path.v.push([x, y]);\n      this.offsetX = Math.min.apply(Math, [this.offsetX].concat(_toConsumableArray(this.calculateBezierMinMax(this.currentX, c1x, c2x, x))));\n      this.offsetY = Math.min.apply(Math, [this.offsetY].concat(_toConsumableArray(this.calculateBezierMinMax(this.currentY, c1y, c2y, y))));\n      this.updateXY(x, y);\n      this.lastbezier = 3;\n      this.nextCVX = x * 2 - c2x;\n      this.nextCVY = x * 2 - c2y;\n    }\n  }, {\n    key: \"cubicBezierCurveToRelative\",\n    value: function cubicBezierCurveToRelative(c1x, c1y, c2x, c2y, x, y) {\n      this.cubicBezierCurveTo(this.currentX + c1x, this.currentY + c1y, this.currentX + c2x, this.currentY + c2y, this.currentX + x, this.currentY + y);\n    }\n  }, {\n    key: \"quadraticBezierCurveTo\",\n    value: function quadraticBezierCurveTo(cx, cy, x, y) {\n      this.path.i.push([cx - x, cy - y]);\n      this.path.o.push([cx - this.currentX, cy - this.currentY]);\n      this.path.v.push([x, y]);\n      this.offsetX = Math.min.apply(Math, [this.offsetX].concat(_toConsumableArray(this.calculateBezierMinMax(this.currentX, cx, cx, x))));\n      this.offsetY = Math.min.apply(Math, [this.offsetY].concat(_toConsumableArray(this.calculateBezierMinMax(this.currentY, cy, cy, y))));\n      this.updateXY(x, y);\n      this.lastbezier = 2;\n      this.nextCVX = x * 2 -cx;\n      this.nextCVY = y * 2 -cy;\n    }\n  }, {\n    key: \"quadraticBezierCurveToRelative\",\n    value: function quadraticBezierCurveToRelative(cx, cy, x, y) {\n      this.quadraticBezierCurveTo(this.currentX + cx, this.currentY + cy, this.currentX + x, this.currentY + y);\n    }\n  }, {\n    key: \"arcTo\",\n    value: function arcTo(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, x, y) {\n      var cSeries = PathMaker.a2c(this.currentX, this.currentY, rx, ry, xAxisRotation, largeArcFlag, sweepFlag, x, y);\n\n      while (cSeries.length >= 6) {\n        var iovList = cSeries.splice(0, 6);\n        this.path.i.push([iovList[2] - iovList[4], iovList[3] - iovList[5]]);\n        this.path.o.push([iovList[0] - this.currentX, iovList[1] - this.currentY]);\n        this.path.v.push([iovList[4], iovList[5]]);\n        this.offsetX = Math.min.apply(Math, [this.offsetX].concat(_toConsumableArray(this.calculateBezierMinMax(this.currentX, iovList[0], iovList[2], iovList[4]))));\n        this.offsetY = Math.min.apply(Math, [this.offsetY].concat(_toConsumableArray(this.calculateBezierMinMax(this.currentY, iovList[1], iovList[3], iovList[5]))));\n        this.updateXY(iovList[4], iovList[5]);\n      }\n    }\n  }, {\n    key: \"arcToRelative\",\n    value: function arcToRelative(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, x, y) {\n      this.arcTo(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, this.currentX + x, this.currentY + y);\n    }\n  }, {\n    key: \"closePath\",\n    value: function closePath() {\n      this.path.c = true;\n    }\n  }, {\n    key: \"uniform\",\n    value: function uniform() {\n      var _this = this;\n\n      if (this.pathChain.length && !(this.currentX == this.pathStart[0] && this.currentY == this.pathStart[1])) {\n        this.lineTo.apply(this, _toConsumableArray(this.pathStart));\n      }\n\n      while (this.pathChain.length) {\n        var pathRef = this.pathChain.pop();\n        this.lineTo.apply(this, _toConsumableArray(pathRef));\n      }\n\n      while (this.path.o.length < this.path.i.length) {\n        this.path.o.push([0, 0]);\n      }\n\n      this.path.v.forEach(function (value) {\n        value[0] -= _this.offsetX;\n        value[1] -= _this.offsetY;\n      });\n      this.offsetX = 0;\n      this.offsetY = 0;\n    }\n  }, {\n    key: \"parse\",\n    value: function parse(pathData) {\n      var _this2 = this;\n\n      var pathDataSeries = (0, _svgPathParser.parseSVG)(pathData);\n      var pathDataWithType;\n      pathDataSeries.forEach(function (pathDataItem) {\n        _this2.lastbezier = 0;\n        switch (pathDataItem.code) {\n          case 'M':\n            pathDataWithType = pathDataItem;\n\n            _this2.moveTo(pathDataWithType.x, pathDataWithType.y);\n\n            break;\n\n          case 'm':\n            pathDataWithType = pathDataItem;\n\n            _this2.moveToRelative(pathDataWithType.x, pathDataWithType.y);\n\n          case 'L':\n            pathDataWithType = pathDataItem;\n\n            _this2.lineTo(pathDataWithType.x, pathDataWithType.y);\n\n            break;\n\n          case 'l':\n            pathDataWithType = pathDataItem;\n\n            _this2.lineToRelative(pathDataWithType.x, pathDataWithType.y);\n\n            break;\n\n          case 'H':\n            pathDataWithType = pathDataItem;\n\n            _this2.horizontalTo(pathDataWithType.x);\n\n            break;\n\n          case 'h':\n            pathDataWithType = pathDataItem;\n\n            _this2.horizontalToRelative(pathDataWithType.x);\n\n            break;\n\n          case 'V':\n            pathDataWithType = pathDataItem;\n\n            _this2.verticalTo(pathDataWithType.y);\n\n            break;\n\n          case 'v':\n            pathDataWithType = pathDataItem;\n\n            _this2.verticalToRelative(pathDataWithType.y);\n\n            break;\n\n          case 'C':\n            pathDataWithType = pathDataItem;\n\n            _this2.cubicBezierCurveTo(pathDataWithType.x1, pathDataWithType.y1, pathDataWithType.x2, pathDataWithType.y2, pathDataWithType.x, pathDataWithType.y);\n\n            break;\n\n          case 'c':\n            pathDataWithType = pathDataItem;\n\n            _this2.cubicBezierCurveToRelative(pathDataWithType.x1, pathDataWithType.y1, pathDataWithType.x2, pathDataWithType.y2, pathDataWithType.x, pathDataWithType.y);\n\n            break;\n\n          case 'S':\n            pathDataWithType = pathDataItem\n\n            if(_this2.lastbezier !== 3){\n              _this2.nextCVX = _this2.currentX;\n              _this2.nextCVY = _this2.currentY;\n            }\n\n            _this2.cubicBezierCurveTo(_this2.nextCVX, _this2.nextCVY, pathDataWithType.x2, pathDataWithType.y2, pathDataWithType.x, pathDataWithType.y);\n\n            break;\n\n          case 's':\n            pathDataWithType = pathDataItem\n\n            if(_this2.lastbezier !== 3){\n              _this2.nextCVX = _this2.currentX;\n              _this2.nextCVY = _this2.currentY;\n            }\n\n            _this2.cubicBezierCurveToRelative(_this2.nextCVX - _this2.currentX, _this2.nextCVY - _this2.currentY, pathDataWithType.x2, pathDataWithType.y2, pathDataWithType.x, pathDataWithType.y);\n\n            break;\n          \n          case 'Q':\n            pathDataWithType = pathDataItem;\n\n            _this2.quadraticBezierCurveTo(pathDataWithType.x1, pathDataWithType.y1, pathDataWithType.x, pathDataWithType.y);\n\n            break;\n\n          case 'q':\n            pathDataWithType = pathDataItem;\n\n            _this2.quadraticBezierCurveToRelative(pathDataWithType.x1, pathDataWithType.y1, pathDataWithType.x, pathDataWithType.y);\n\n            break;\n\n          case 'T':\n            pathDataWithType = pathDataItem;\n\n            if(_this2.lastbezier !== 2){\n              _this2.nextCVX = _this2.currentX;\n              _this2.nextCVY = _this2.currentY;\n            }\n\n            _this2.quadraticBezierCurveToRelative(_this2.nextCVX, _this2.nextCVY, pathDataWithType.x, pathDataWithType.y);\n\n            break;\n\n          case 't':\n            pathDataWithType = pathDataItem;\n\n            if(_this2.lastbezier !== 2){\n              _this2.nextCVX = _this2.currentX;\n              _this2.nextCVY = _this2.currentY;\n            }\n\n            _this2.quadraticBezierCurveToRelative(_this2.nextCVX - _this2.currentX, _this2.nextCVY - _this2.currentY, pathDataWithType.x, pathDataWithType.y);\n\n            break;\n\n          case 'A':\n            pathDataWithType = pathDataItem;\n\n            _this2.arcTo(pathDataWithType.rx, pathDataWithType.ry, pathDataWithType.xAxisRotation, ~~pathDataWithType.largeArc, ~~pathDataWithType.sweep, pathDataWithType.x, pathDataWithType.y);\n\n            break;\n\n          case 'a':\n            pathDataWithType = pathDataItem;\n\n            _this2.arcToRelative(pathDataWithType.rx, pathDataWithType.ry, pathDataWithType.xAxisRotation, ~~pathDataWithType.largeArc, ~~pathDataWithType.sweep, pathDataWithType.x, pathDataWithType.y);\n\n            break;\n\n          case 'Z':\n          case 'z':\n            _this2.closePath();\n\n            break;\n\n          default:\n            console.error(pathDataItem);\n            throw new Error('No implementation found for this path command.');\n        }\n      });\n    }\n  }, {\n    key: \"upsample\",\n    value: function upsample(ratio) {\n      var _this3 = this;\n\n      // use De Casteljau's algorithm to do the upsampling\n      // Reference: https://en.wikipedia.org/wiki/De_Casteljau%27s_algorithm\n      if (!Number.isInteger(ratio)) {\n        throw new Error('The upsampling ratio should be an integer.');\n      }\n\n      this.uniform();\n      if (ratio <= 1) return;\n      var copyPath = {\n        c: this.path.c,\n        i: [],\n        o: [],\n        v: []\n      };\n      this.path.v.forEach(function (v, i, a) {\n        if (i <= 0) {\n          copyPath.v.push(v);\n          copyPath.i.push(_this3.path.i[i]);\n          return;\n        }\n\n        var oArray = _this3.path.o;\n        var iArray = _this3.path.i;\n        var xArray = [a[i - 1][0], oArray[i - 1][0] + a[i - 1][0], iArray[i][0] + v[0], v[0]];\n        var yArray = [a[i - 1][1], oArray[i - 1][1] + a[i - 1][1], iArray[i][1] + v[1], v[1]];\n\n        for (var index = 1; index < ratio; index++) {\n          var stepRatio = 1 / (ratio - index + 1);\n\n          var xSplitArray = _this3.calculateBezierSplit.apply(_this3, [stepRatio].concat(_toConsumableArray(xArray)));\n\n          var ySplitArray = _this3.calculateBezierSplit.apply(_this3, [stepRatio].concat(_toConsumableArray(yArray)));\n\n          var _p0x = xArray[0],\n              _p1x = xSplitArray.shift() - _p0x,\n              _p3x = xSplitArray[1],\n              _p2x = xSplitArray.shift() - _p3x,\n              _p0y = yArray[0],\n              _p1y = ySplitArray.shift() - _p0y,\n              _p3y = ySplitArray[1],\n              _p2y = ySplitArray.shift() - _p3y;\n\n          copyPath.o.push([_p1x, _p1y]);\n          copyPath.i.push([_p2x, _p2y]);\n          copyPath.v.push([_p3x, _p3y]);\n          xArray = xSplitArray;\n          yArray = ySplitArray;\n        }\n\n        var p0x = xArray.shift(),\n            p1x = xArray.shift() - p0x,\n            p3x = xArray[1],\n            p2x = xArray.shift() - p3x,\n            p0y = yArray.shift(),\n            p1y = yArray.shift() - p0y,\n            p3y = yArray[1],\n            p2y = yArray.shift() - p3y;\n        copyPath.o.push([p1x, p1y]);\n        copyPath.i.push([p2x, p2y]);\n        copyPath.v.push([p3x, p3y]);\n      });\n      this.path = copyPath;\n      this.uniform();\n    }\n  }], [{\n    key: \"a2c\",\n    value: function a2c(x1, y1, rx, ry, angle, large_arc_flag, sweep_flag, x2, y2, recursive) {\n      // for more information of where this Math came from visit:\n      // http://www.w3.org/TR/SVG11/implnote.html#ArcImplementationNotes\n      var _120 = Math.PI * 120 / 180,\n          rad = Math.PI / 180 * (+angle || 0),\n          res = [],\n          xy,\n          rotate = function rotate(x, y, rad) {\n        var X = x * Math.cos(rad) - y * Math.sin(rad),\n            Y = x * Math.sin(rad) + y * Math.cos(rad);\n        return {\n          x: X,\n          y: Y\n        };\n      };\n\n      if (!rx || !ry) {\n        return [x1, y1, x2, y2, x2, y2];\n      }\n\n      if (!recursive) {\n        xy = rotate(x1, y1, -rad);\n        x1 = xy.x;\n        y1 = xy.y;\n        xy = rotate(x2, y2, -rad);\n        x2 = xy.x;\n        y2 = xy.y;\n        var cos = Math.cos(Math.PI / 180 * angle),\n            sin = Math.sin(Math.PI / 180 * angle),\n            x = (x1 - x2) / 2,\n            y = (y1 - y2) / 2;\n        var h = x * x / (rx * rx) + y * y / (ry * ry);\n\n        if (h > 1) {\n          h = Math.sqrt(h);\n          rx = h * rx;\n          ry = h * ry;\n        }\n\n        var rx2 = rx * rx,\n            ry2 = ry * ry,\n            k = (large_arc_flag == sweep_flag ? -1 : 1) * Math.sqrt(Math.abs((rx2 * ry2 - rx2 * y * y - ry2 * x * x) / (rx2 * y * y + ry2 * x * x))),\n            cx = k * rx * y / ry + (x1 + x2) / 2,\n            cy = k * -ry * x / rx + (y1 + y2) / 2,\n            f1 = Math.asin((y1 - cy) / ry),\n            f2 = Math.asin((y2 - cy) / ry);\n        f1 = x1 < cx ? Math.PI - f1 : f1;\n        f2 = x2 < cx ? Math.PI - f2 : f2;\n        f1 < 0 && (f1 = Math.PI * 2 + f1);\n        f2 < 0 && (f2 = Math.PI * 2 + f2);\n\n        if (sweep_flag && f1 > f2) {\n          f1 = f1 - Math.PI * 2;\n        }\n\n        if (!sweep_flag && f2 > f1) {\n          f2 = f2 - Math.PI * 2;\n        }\n      } else {\n        f1 = recursive[0];\n        f2 = recursive[1];\n        cx = recursive[2];\n        cy = recursive[3];\n      }\n\n      var df = f2 - f1;\n\n      if (Math.abs(df) > _120) {\n        var f2old = f2,\n            x2old = x2,\n            y2old = y2;\n        f2 = f1 + _120 * (sweep_flag && f2 > f1 ? 1 : -1);\n        x2 = cx + rx * Math.cos(f2);\n        y2 = cy + ry * Math.sin(f2);\n        res = this.a2c(x2, y2, rx, ry, angle, 0, sweep_flag, x2old, y2old, [f2, f2old, cx, cy]);\n      }\n\n      df = f2 - f1;\n      var c1 = Math.cos(f1),\n          s1 = Math.sin(f1),\n          c2 = Math.cos(f2),\n          s2 = Math.sin(f2),\n          t = Math.tan(df / 4),\n          hx = 4 / 3 * rx * t,\n          hy = 4 / 3 * ry * t,\n          m1 = [x1, y1],\n          m2 = [x1 + hx * s1, y1 - hy * c1],\n          m3 = [x2 + hx * s2, y2 - hy * c2],\n          m4 = [x2, y2];\n      m2[0] = 2 * m1[0] - m2[0];\n      m2[1] = 2 * m1[1] - m2[1];\n\n      if (recursive) {\n        return [m2, m3, m4].concat(res);\n      } else {\n        res = [m2, m3, m4].concat(res).join().split(\",\").map(function (x) {\n          return parseFloat(x);\n        });\n        var newres = [];\n\n        for (var i = 0, ii = res.length; i < ii; i++) {\n          newres[i] = i % 2 ? rotate(res[i - 1], res[i], rad).y : rotate(res[i], res[i + 1], rad).x;\n        }\n\n        return newres;\n      }\n    }\n  }]);\n\n  return PathMaker;\n}();\n\nexports.PathMaker = PathMaker;\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9wYXRoLnRzIl0sIm5hbWVzIjpbIlBhdGhNYWtlciIsInBhdGhEYXRhIiwiYyIsImkiLCJvIiwidiIsIkluZmluaXR5IiwicGFyc2UiLCJ4IiwieSIsImN1cnJlbnRYIiwiY3VycmVudFkiLCJvZmZzZXRYIiwiTWF0aCIsIm1pbiIsIm9mZnNldFkiLCJwMCIsInAxIiwicDIiLCJwMyIsImEiLCJiIiwibWF4Iiwic3FydCIsInJvb3RzIiwibWFwIiwibXVsdGkiLCJmb3JFYWNoIiwicm9vdCIsInZhbHVlIiwicG93IiwiYXJyIiwicmF0aW8iLCJyZXN1bHQiLCJsZW5ndGgiLCJwdXNoIiwib3JkZXIwIiwib3JkZXIxIiwiY2FsY3VsYXRlSGlnaGx5T3JkZXIiLCJvcmRlcjIiLCJvcmRlcjMiLCJwYXRoUmVhZHkiLCJwYXRoIiwibGluZVRvIiwicGF0aFN0YXJ0IiwicGF0aENoYWluIiwibW92ZVRvIiwidXBkYXRlWFkiLCJob3Jpem9udGFsVG8iLCJ2ZXJ0aWNhbFRvIiwiYzF4IiwiYzF5IiwiYzJ4IiwiYzJ5IiwiY2FsY3VsYXRlQmV6aWVyTWluTWF4IiwiY3ViaWNCZXppZXJDdXJ2ZVRvIiwiY3giLCJjeSIsInF1YWRyYXRpY0JlemllckN1cnZlVG8iLCJyeCIsInJ5IiwieEF4aXNSb3RhdGlvbiIsImxhcmdlQXJjRmxhZyIsInN3ZWVwRmxhZyIsImNTZXJpZXMiLCJhMmMiLCJpb3ZMaXN0Iiwic3BsaWNlIiwiYXJjVG8iLCJwYXRoUmVmIiwicG9wIiwicGF0aERhdGFTZXJpZXMiLCJwYXRoRGF0YVdpdGhUeXBlIiwicGF0aERhdGFJdGVtIiwiY29kZSIsIm1vdmVUb1JlbGF0aXZlIiwibGluZVRvUmVsYXRpdmUiLCJob3Jpem9udGFsVG9SZWxhdGl2ZSIsInZlcnRpY2FsVG9SZWxhdGl2ZSIsIngxIiwieTEiLCJ4MiIsInkyIiwiY3ViaWNCZXppZXJDdXJ2ZVRvUmVsYXRpdmUiLCJxdWFkcmF0aWNCZXppZXJDdXJ2ZVRvUmVsYXRpdmUiLCJsYXJnZUFyYyIsInN3ZWVwIiwiYXJjVG9SZWxhdGl2ZSIsImNsb3NlUGF0aCIsImNvbnNvbGUiLCJlcnJvciIsIkVycm9yIiwiTnVtYmVyIiwiaXNJbnRlZ2VyIiwidW5pZm9ybSIsImNvcHlQYXRoIiwib0FycmF5IiwiaUFycmF5IiwieEFycmF5IiwieUFycmF5IiwiaW5kZXgiLCJzdGVwUmF0aW8iLCJ4U3BsaXRBcnJheSIsImNhbGN1bGF0ZUJlemllclNwbGl0IiwieVNwbGl0QXJyYXkiLCJwMHgiLCJwMXgiLCJzaGlmdCIsInAzeCIsInAyeCIsInAweSIsInAxeSIsInAzeSIsInAyeSIsImFuZ2xlIiwibGFyZ2VfYXJjX2ZsYWciLCJzd2VlcF9mbGFnIiwicmVjdXJzaXZlIiwiXzEyMCIsIlBJIiwicmFkIiwicmVzIiwieHkiLCJyb3RhdGUiLCJYIiwiY29zIiwic2luIiwiWSIsImgiLCJyeDIiLCJyeTIiLCJrIiwiYWJzIiwiZjEiLCJhc2luIiwiZjIiLCJkZiIsImYyb2xkIiwieDJvbGQiLCJ5Mm9sZCIsImMxIiwiczEiLCJjMiIsInMyIiwidCIsInRhbiIsImh4IiwiaHkiLCJtMSIsIm0yIiwibTMiLCJtNCIsImNvbmNhdCIsImpvaW4iLCJzcGxpdCIsInBhcnNlRmxvYXQiLCJuZXdyZXMiLCJpaSJdLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUNBOzs7Ozs7Ozs7Ozs7Ozs7Ozs7SUFFYUEsUzs7O0FBYVQ7QUFLQSxxQkFBWUMsUUFBWixFQUErQjtBQUFBOztBQUFBLGtDQWpCUjtBQUNuQkMsTUFBQUEsQ0FBQyxFQUFFLEtBRGdCO0FBRW5CQyxNQUFBQSxDQUFDLEVBQUUsRUFGZ0I7QUFHbkJDLE1BQUFBLENBQUMsRUFBRSxFQUhnQjtBQUluQkMsTUFBQUEsQ0FBQyxFQUFFO0FBSmdCLEtBaUJROztBQUFBLHNDQVZKLENBVUk7O0FBQUEsc0NBVEosQ0FTSTs7QUFBQSxxQ0FSTEMsUUFRSzs7QUFBQSxxQ0FQTEEsUUFPSzs7QUFBQSx1Q0FKWCxLQUlXOztBQUFBLHVDQUhPLENBQUMsQ0FBRCxFQUFJ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akIsQ0FBQztBQUFBLGlCQUFJbUosVUFBVSxDQUFDbkosQ0FBRCxDQUFkO0FBQUEsU0FBaEQsQ0FBTjtBQUNBLFlBQUlvSixNQUFNLEdBQUcsRUFBYjs7QUFDQSxhQUFLLElBQUl6SixDQUFDLEdBQUcsQ0FBUixFQUFXMEosRUFBRSxHQUFHcEMsR0FBRyxDQUFDdkYsTUFBekIsRUFBaUMvQixDQUFDLEdBQUcwSixFQUFyQyxFQUF5QzFKLENBQUMsRUFBMUMsRUFBOEM7QUFDMUN5SixVQUFBQSxNQUFNLENBQUN6SixDQUFELENBQU4sR0FBWUEsQ0FBQyxHQUFHLENBQUosR0FBUXdILE1BQU0sQ0FBQ0YsR0FBRyxDQUFDdEgsQ0FBQyxHQUFHLENBQUwsQ0FBSixFQUFhc0gsR0FBRyxDQUFDdEgsQ0FBRCxDQUFoQixFQUFxQnFILEdBQXJCLENBQU4sQ0FBZ0MvRyxDQUF4QyxHQUE0Q2tILE1BQU0sQ0FBQ0YsR0FBRyxDQUFDdEgsQ0FBRCxDQUFKLEVBQVNzSCxHQUFHLENBQUN0SCxDQUFDLEdBQUcsQ0FBTCxDQUFaLEVBQXFCcUgsR0FBckIsQ0FBTixDQUFnQ2hILENBQXhGO0FBQ0g7O0FBQ0QsZUFBT29KLE1BQVA7QUFDSDtBQUNKIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGF0aERlZiB9IGZyb20gJy4vYW5pbWF0aW9uJ1xuaW1wb3J0IHsgcGFyc2VTVkcsIE1vdmVUb0NvbW1hbmQsIExpbmVUb0NvbW1hbmQsIEhvcml6b250YWxMaW5lVG9Db21tYW5kLCBWZXJ0aWNhbExpbmVUb0NvbW1hbmQsIEN1cnZlVG9Db21tYW5kLCBRdWFkcmF0aWNDdXJ2ZVRvQ29tbWFuZCwgRWxsaXB0aWNhbEFyY0NvbW1hbmQgfSBmcm9tICdzdmctcGF0aC1wYXJzZXInO1xuXG5leHBvcnQgY2xhc3MgUGF0aE1ha2VyIHtcbiAgICBwdWJsaWMgcGF0aDogUGF0aERlZiA9IHtcbiAgICAgICAgYzogZmFsc2UsXG4gICAgICAgIGk6IFtdLFxuICAgICAgICBvOiBbXSxcbiAgICAgICAgdjogW11cbiAgICB9O1xuXG4gICAgcHJpdmF0ZSBjdXJyZW50WDogbnVtYmVyID0gMDtcbiAgICBwcml2YXRlIGN1cnJlbnRZOiBudW1iZXIgPSAwO1xuICAgIHByaXZhdGUgb2Zmc2V0WDogbnVtYmVyID0gSW5maW5pdHk7XG4gICAgcHJpdmF0ZSBvZmZzZXRZOiBudW1iZXIgPSBJbmZpbml0eTtcblxuICAgIC8vIGZvciBkaXNjb250aW51b3VzIHBhdGhzXG4gICAgcHJpdmF0ZSBwYXRoUmVhZHkgPSBmYWxzZVxuICAgIHByaXZhdGUgcGF0aFN0YXJ0OiBbbnVtYmVyLCBudW1iZXJdID0gWzAsIDBdXG4gICAgcHJpdmF0ZSBwYXRoQ2hhaW46IFtudW1iZXIsIG51bWJlcl1bXSA9IFtdXG5cbiAgICBjb25zdHJ1Y3RvcihwYXRoRGF0YT86IHN0cmluZykge1xuICAgICAgICBpZiAocGF0aERhdGEpIHtcbiAgICAgICAgICAgIHRoaXMucGFyc2UocGF0aERhdGEpXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBwcml2YXRlIHVwZGF0ZVhZKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMuY3VycmVudFggPSB4XG4gICAgICAgIHRoaXMuY3VycmVudFkgPSB5XG4gICAgICAgIHRoaXMub2Zmc2V0WCA9IE1hdGgubWluKHRoaXMub2Zmc2V0WCwgeClcbiAgICAgICAgdGhpcy5vZmZzZXRZID0gTWF0aC5taW4odGhpcy5vZmZzZXRZLCB5KVxuICAgIH1cblxuICAgIHByaXZhdGUgY2FsY3VsYXRlQmV6aWVyTWluTWF4KHAwOiBudW1iZXIsIHAxOiBudW1iZXIsIHAyOiBudW1iZXIsIHAzOiBudW1iZXIpOiBbbnVtYmVyLCBudW1iZXJdIHtcbiAgICAgICAgY29uc3QgYSA9IDMgKiAocDMgLSAzICogcDIgKyAzICogcDEgLSBwMClcbiAgICAgICAgY29uc3QgYiA9IDYgKiAocDIgLSAyICogcDEgKyBwMClcbiAgICAgICAgY29uc3QgYyA9IDMgKiAocDEgLSBwMClcbiAgICAgICAgbGV0IG1pbiA9IEluZmluaXR5LCBtYXggPSAtSW5maW5pdHlcbiAgICAgICAgaWYgKGIgKiBiIC0gNCAqIGEgKiBjID49IDApIHtcbiAgICAgICAgICAgIGNvbnN0IHNxcnQgPSBNYXRoLnNxcnQoYiAqIGIgLSA0ICogYSAqIGMpXG4gICAgICAgICAgICBjb25zdCByb290cyA9IFsxLCAtMV0ubWFwKG11bHRpID0+IChtdWx0aSAqIHNxcnQgLSBiKSAvIDIgLyBhKVxuICAgICAgICAgICAgcm9vdHMuZm9yRWFjaChyb290ID0+IHtcbiAgICAgICAgICAgICAgICBpZiAocm9vdCA+IDAgJiYgcm9vdCA8IDEpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgdmFsdWUgPSBNYXRoLnBvdygxIC0gcm9vdCwgMykgKiBwMCArIDMgKiBNYXRoLnBvdygxIC0gcm9vdCwgMikgKiByb290ICogcDEgKyAzICogKDEgLSByb290KSAqIHJvb3QgKiByb290ICogcDIgKyBNYXRoLnBvdyhyb290LCAzKSAqIHAzXG4gICAgICAgICAgICAgICAgICAgIG1pbiA9IE1hdGgubWluKG1pbiwgdmFsdWUpXG4gICAgICAgICAgICAgICAgICAgIG1heCA9IE1hdGgubWF4KG1heCwgdmFsdWUpXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSlcbiAgICAgICAgfVxuICAgICAgICBtaW4gPSBNYXRoLm1pbihtaW4sIHAwLCBwMylcbiAgICAgICAgbWF4ID0gTWF0aC5tYXgobWF4LCBwMCwgcDMpXG4gICAgICAgIHJldHVybiBbbWluLCBtYXhdXG4gICAgfVxuXG4gICAgcHJpdmF0ZSBjYWxjdWxhdGVIaWdobHlPcmRlcihhcnI6IG51bWJlcltdLCByYXRpbzogbnVtYmVyKTogbnVtYmVyW10ge1xuICAgICAgICBsZXQgcmVzdWx0OiBudW1iZXJbXSA9IFtdXG4gICAgICAgIGFyci5mb3JFYWNoKCh2LCBpLCBhKSA9PiB7XG4gICAgICAgICAgICBpZiAoaSA+PSBhLmxlbmd0aCAtIDEpIHJldHVyblxuICAgICAgICAgICAgcmVzdWx0LnB1c2godiAqICgxIC0gcmF0aW8pICsgYVtpICsgMV0gKiByYXRpbylcbiAgICAgICAgfSlcbiAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIH1cblxuICAgIHByaXZhdGUgY2FsY3VsYXRlQmV6aWVyU3BsaXQocmF0aW86IG51bWJlciwgLi4ub3JkZXIwOiBudW1iZXJbXSk6IG51bWJlcltdIHtcbiAgICAgICAgbGV0IG9yZGVyMSA9IHRoaXMuY2FsY3VsYXRlSGlnaGx5T3JkZXIob3JkZXIwLCByYXRpbylcbiAgICAgICAgbGV0IG9yZGVyMiA9IHRoaXMuY2FsY3VsYXRlSGlnaGx5T3JkZXIob3JkZXIxLCByYXRpbylcbiAgICAgICAgbGV0IG9yZGVyMyA9IHRoaXMuY2FsY3VsYXRlSGlnaGx5T3JkZXIob3JkZXIyLCByYXRpbylcbiAgICAgICAgcmV0dXJuIFtvcmRlcjFbMF0sIG9yZGVyMlswXSwgb3JkZXIzWzBdLCBvcmRlcjJbMV0sIG9yZGVyMVsyXSwgb3JkZXIwWzNdXVxuICAgIH1cblxuICAgIHB1YmxpYyBtb3ZlVG8oeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcbiAgICAgICAgaWYgKCF0aGlzLnBhdGhSZWFkeSkge1xuICAgICAgICAgICAgdGhpcy5wYXRoLmMgPSBmYWxzZVxuICAgICAgICAgICAgdGhpcy5wYXRoLmkgPSBbWzAsIDBdXVxuICAgICAgICAgICAgdGhpcy5wYXRoLm8gPSBbXVxuICAgICAgICAgICAgdGhpcy5wYXRoLnYgPSBbW3gsIHldXVxuICAgICAgICAgICAgdGhpcy5jdXJyZW50WCA9IHhcbiAgICAgICAgICAgIHRoaXMuY3VycmVudFkgPSB5XG4gICAgICAgICAgICB0aGlzLm9mZnNldFggPSB4XG4gICAgICAgICAgICB0aGlzLm9mZnNldFkgPSB5XG4gICAgICAgICAgICB0aGlzLnBhdGhSZWFkeSA9IHRydWVcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMubGluZVRvKC4uLnRoaXMucGF0aFN0YXJ0KVxuICAgICAgICAgICAgdGhpcy5saW5lVG8oeCwgeSlcbiAgICAgICAgICAgIHRoaXMucGF0aENoYWluLnB1c2godGhpcy5wYXRoU3RhcnQpXG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wYXRoU3RhcnQgPSBbeCwgeV1cbiAgICB9XG4gICAgcHVibGljIG1vdmVUb1JlbGF0aXZlKHg6IG51bWJlciwgeTogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMubW92ZVRvKHRoaXMuY3VycmVudFggKyB4LCB0aGlzLmN1cnJlbnRZICsgeSlcbiAgICB9XG4gICAgcHVibGljIGxpbmVUbyh4OiBudW1iZXIsIHk6IG51bWJlcikge1xuICAgICAgICB0aGlzLnBhdGguaSEucHVzaChbMCwgMF0pXG4gICAgICAgIHRoaXMucGF0aC5vIS5wdXNoKFswLCAwXSlcbiAgICAgICAgdGhpcy5wYXRoLnYhLnB1c2goW3gsIHldKVxuICAgICAgICB0aGlzLnVwZGF0ZVhZKHgsIHkpXG4gICAgfVxuICAgIHB1YmxpYyBsaW5lVG9SZWxhdGl2ZSh4OiBudW1iZXIsIHk6IG51bWJlcikge1xuICAgICAgICB0aGlzLmxpbmVUbyh0aGlzLmN1cnJlbnRYICsgeCwgdGhpcy5jdXJyZW50WSArIHkpXG4gICAgfVxuICAgIHB1YmxpYyBob3Jpem9udGFsVG8oeDogbnVtYmVyKSB7XG4gICAgICAgIHRoaXMubGluZVRvKHgsIHRoaXMuY3VycmVudFkpXG4gICAgfVxuICAgIHB1YmxpYyBob3Jpem9udGFsVG9SZWxhdGl2ZSh4OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5ob3Jpem9udGFsVG8odGhpcy5jdXJyZW50WCArIHgpXG4gICAgfVxuICAgIHB1YmxpYyB2ZXJ0aWNhbFRvKHk6IG51bWJlcikge1xuICAgICAgICB0aGlzLmxpbmVUbyh0aGlzLmN1cnJlbnRYLCB5KVxuICAgIH1cbiAgICBwdWJsaWMgdmVydGljYWxUb1JlbGF0aXZlKHk6IG51bWJlcikge1xuICAgICAgICB0aGlzLnZlcnRpY2FsVG8odGhpcy5jdXJyZW50WSArIHkpXG4gICAgfVxuICAgIHB1YmxpYyBjdWJpY0JlemllckN1cnZlVG8oXG4gICAgICAgIGMxeDogbnVtYmVyLFxuICAgICAgICBjMXk6IG51bWJlcixcbiAgICAgICAgYzJ4OiBudW1iZXIsXG4gICAgICAgIGMyeTogbnVtYmVyLFxuICAgICAgICB4OiBudW1iZXIsXG4gICAgICAgIHk6IG51bWJlclxuICAgICkge1xuICAgICAgICB0aGlzLnBhdGguaSEucHVzaChbYzJ4IC0geCwgYzJ5IC0geV0pXG4gICAgICAgIHRoaXMucGF0aC5vIS5wdXNoKFtjMXggLSB0aGlzLmN1cnJlbnRYLCBjMXkgLSB0aGlzLmN1cnJlbnRZXSlcbiAgICAgICAgdGhpcy5wYXRoLnYhLnB1c2goW3gsIHldKVxuICAgICAgICB0aGlzLm9mZnNldFggPSBNYXRoLm1pbih0aGlzLm9mZnNldFgsIC4uLnRoaXMuY2FsY3VsYXRlQmV6aWVyTWluTWF4KHRoaXMuY3VycmVudFgsIGMxeCwgYzJ4LCB4KSlcbiAgICAgICAgdGhpcy5vZmZzZXRZID0gTWF0aC5taW4odGhpcy5vZmZzZXRZLCAuLi50aGlzLmNhbGN1bGF0ZUJlemllck1pbk1heCh0aGlzLmN1cnJlbnRZLCBjMXksIGMyeSwgeSkpXG4gICAgICAgIHRoaXMudXBkYXRlWFkoeCwgeSlcbiAgICB9XG4gICAgcHVibGljIGN1YmljQmV6aWVyQ3VydmVUb1JlbGF0aXZlKFxuICAgICAgICBjMXg6IG51bWJlcixcbiAgICAgICAgYzF5OiBudW1iZXIsXG4gICAgICAgIGMyeDogbnVtYmVyLFxuICAgICAgICBjMnk6IG51bWJlcixcbiAgICAgICAgeDogbnVtYmVyLFxuICAgICAgICB5OiBudW1iZXJcbiAgICApIHtcbiAgICAgICAgdGhpcy5jdWJpY0JlemllckN1cnZlVG8odGhpcy5jdXJyZW50WCArIGMxeCwgdGhpcy5jdXJyZW50WSArIGMxeSwgdGhpcy5jdXJyZW50WCArIGMyeCwgdGhpcy5jdXJyZW50WSArIGMyeSwgdGhpcy5jdXJyZW50WCArIHgsIHRoaXMuY3VycmVudFkgKyB5KVxuICAgIH1cbiAgICBwdWJsaWMgcXVhZHJhdGljQmV6aWVyQ3VydmVUbyhjeDogbnVtYmVyLCBjeTogbnVtYmVyLCB4OiBudW1iZXIsIHk6IG51bWJlcikge1xuICAgICAgICB0aGlzLnBhdGguaSEucHVzaChbY3ggLSB4LCBjeSAtIHldKVxuICAgICAgICB0aGlzLnBhdGgubyEucHVzaChbY3ggLSB0aGlzLmN1cnJlbnRYLCBjeSAtIHRoaXMuY3VycmVudFldKVxuICAgICAgICB0aGlzLnBhdGgudiEucHVzaChbeCwgeV0pXG4gICAgICAgIHRoaXMub2Zmc2V0WCA9IE1hdGgubWluKHRoaXMub2Zmc2V0WCwgLi4udGhpcy5jYWxjdWxhdGVCZXppZXJNaW5NYXgodGhpcy5jdXJyZW50WCwgY3gsIGN4LCB4KSlcbiAgICAgICAgdGhpcy5vZmZzZXRZID0gTWF0aC5taW4odGhpcy5vZmZzZXRZLCAuLi50aGlzLmNhbGN1bGF0ZUJlemllck1pbk1heCh0aGlzLmN1cnJlbnRZLCBjeSwgY3ksIHkpKVxuICAgICAgICB0aGlzLnVwZGF0ZVhZKHgsIHkpXG4gICAgfVxuICAgIHB1YmxpYyBxdWFkcmF0aWNCZXppZXJDdXJ2ZVRvUmVsYXRpdmUoY3g6IG51bWJlciwgY3k6IG51bWJlciwgeDogbnVtYmVyLCB5OiBudW1iZXIpIHtcbiAgICAgICAgdGhpcy5xdWFkcmF0aWNCZXppZXJDdXJ2ZVRvKHRoaXMuY3VycmVudFggKyBjeCwgdGhpcy5jdXJyZW50WSArIGN5LCB0aGlzLmN1cnJlbnRYICsgeCwgdGhpcy5jdXJyZW50WSArIHkpXG4gICAgfVxuICAgIHB1YmxpYyBhcmNUbyhcbiAgICAgICAgcng6IG51bWJlcixcbiAgICAgICAgcnk6IG51bWJlcixcbiAgICAgICAgeEF4aXNSb3RhdGlvbjogbnVtYmVyLFxuICAgICAgICBsYXJnZUFyY0ZsYWc6IG51bWJlcixcbiAgICAgICAgc3dlZXBGbGFnOiBudW1iZXIsXG4gICAgICAgIHg6IG51bWJlcixcbiAgICAgICAgeTogbnVtYmVyXG4gICAgKSB7XG4gICAgICAgIGNvbnN0IGNTZXJpZXMgPSBQYXRoTWFrZXIuYTJjKHRoaXMuY3VycmVudFgsIHRoaXMuY3VycmVudFksIHJ4LCByeSwgeEF4aXNSb3RhdGlvbiwgbGFyZ2VBcmNGbGFnLCBzd2VlcEZsYWcsIHgsIHkpIGFzIG51bWJlcltdXG4gICAgICAgIHdoaWxlIChjU2VyaWVzLmxlbmd0aCA+PSA2KSB7XG4gICAgICAgICAgICBjb25zdCBpb3ZMaXN0ID0gY1Nlcmllcy5zcGxpY2UoMCwgNilcbiAgICAgICAgICAgIHRoaXMucGF0aC5pIS5wdXNoKFtpb3ZMaXN0WzJdIC0gaW92TGlzdFs0XSwgaW92TGlzdFszXSAtIGlvdkxpc3RbNV1dKVxuICAgICAgICAgICAgdGhpcy5wYXRoLm8hLnB1c2goW2lvdkxpc3RbMF0gLSB0aGlzLmN1cnJlbnRYLCBpb3ZMaXN0WzFdIC0gdGhpcy5jdXJyZW50WV0pXG4gICAgICAgICAgICB0aGlzLnBhdGgudiEucHVzaChbaW92TGlzdFs0XSwgaW92TGlzdFs1XV0pXG4gICAgICAgICAgICB0aGlzLm9mZnNldFggPSBNYXRoLm1pbih0aGlzLm9mZnNldFgsIC4uLnRoaXMuY2FsY3VsYXRlQmV6aWVyTWluTWF4KHRoaXMuY3VycmVudFgsIGlvdkxpc3RbMF0sIGlvdkxpc3RbMl0sIGlvdkxpc3RbNF0pKVxuICAgICAgICAgICAgdGhpcy5vZmZzZXRZID0gTWF0aC5taW4odGhpcy5vZmZzZXRZLCAuLi50aGlzLmNhbGN1bGF0ZUJlemllck1pbk1heCh0aGlzLmN1cnJlbnRZLCBpb3ZMaXN0WzFdLCBpb3ZMaXN0WzNdLCBpb3ZMaXN0WzVdKSlcbiAgICAgICAgICAgIHRoaXMudXBkYXRlWFkoaW92TGlzdFs0XSwgaW92TGlzdFs1XSlcbiAgICAgICAgfVxuICAgIH1cbiAgICBwdWJsaWMgYXJjVG9SZWxhdGl2ZShcbiAgICAgICAgcng6IG51bWJlcixcbiAgICAgICAgcnk6IG51bWJlcixcbiAgICAgICAgeEF4aXNSb3RhdGlvbjogbnVtYmVyLFxuICAgICAgICBsYXJnZUFyY0ZsYWc6IG51bWJlcixcbiAgICAgICAgc3dlZXBGbGFnOiBudW1iZXIsXG4gICAgICAgIHg6IG51bWJlcixcbiAgICAgICAgeTogbnVtYmVyXG4gICAgKSB7XG4gICAgICAgIHRoaXMuYXJjVG8ocngsIHJ5LCB4QXhpc1JvdGF0aW9uLCBsYXJnZUFyY0ZsYWcsIHN3ZWVwRmxhZywgdGhpcy5jdXJyZW50WCArIHgsIHRoaXMuY3VycmVudFkgKyB5KVxuICAgIH1cblxuICAgIHByaXZhdGUgc3RhdGljIGEyYyh4MTogbnVtYmVyLCB5MTogbnVtYmVyLCByeDogbnVtYmVyLCByeTogbnVtYmVyLCBhbmdsZTogbnVtYmVyLCBsYXJnZV9hcmNfZmxhZzogbnVtYmVyLCBzd2VlcF9mbGFnOiBudW1iZXIsIHgyOiBudW1iZXIsIHkyOiBudW1iZXIsIHJlY3Vyc2l2ZT86IG51bWJlcltdKTogbnVtYmVyW10gfCBudW1iZXJbXVtdIHtcbiAgICAgICAgLy8gZm9yIG1vcmUgaW5mb3JtYXRpb24gb2Ygd2hlcmUgdGhpcyBNYXRoIGNhbWUgZnJvbSB2aXNpdDpcbiAgICAgICAgLy8gaHR0cDovL3d3dy53My5vcmcvVFIvU1ZHMTEvaW1wbG5vdGUuaHRtbCNBcmNJbXBsZW1lbnRhdGlvbk5vdGVzXG4gICAgICAgIHZhciBfMTIwID0gTWF0aC5QSSAqIDEyMCAvIDE4MCxcbiAgICAgICAgICAgIHJhZCA9IE1hdGguUEkgLyAxODAgKiAoK2FuZ2xlIHx8IDApLFxuICAgICAgICAgICAgcmVzOiBudW1iZXJbXSA9IFtdLFxuICAgICAgICAgICAgeHksXG4gICAgICAgICAgICByb3RhdGUgPSAoeDogbnVtYmVyLCB5OiBudW1iZXIsIHJhZDogbnVtYmVyKSA9PiB7XG4gICAgICAgICAgICAgICAgdmFyIFggPSB4ICogTWF0aC5jb3MocmFkKSAtIHkgKiBNYXRoLnNpbihyYWQpLFxuICAgICAgICAgICAgICAgICAgICBZID0geCAqIE1hdGguc2luKHJhZCkgKyB5ICogTWF0aC5jb3MocmFkKTtcbiAgICAgICAgICAgICAgICByZXR1cm4geyB4OiBYLCB5OiBZIH07XG4gICAgICAgICAgICB9O1xuICAgICAgICBpZiAoIXJ4IHx8ICFyeSkge1xuICAgICAgICAgICAgcmV0dXJuIFt4MSwgeTEsIHgyLCB5MiwgeDIsIHkyXTtcbiAgICAgICAgfVxuICAgICAgICBpZiAoIXJlY3Vyc2l2ZSkge1xuICAgICAgICAgICAgeHkgPSByb3RhdGUoeDEsIHkxLCAtcmFkKTtcbiAgICAgICAgICAgIHgxID0geHkueDtcbiAgICAgICAgICAgIHkxID0geHkueTtcbiAgICAgICAgICAgIHh5ID0gcm90YXRlKHgyLCB5MiwgLXJhZCk7XG4gICAgICAgICAgICB4MiA9IHh5Lng7XG4gICAgICAgICAgICB5MiA9IHh5Lnk7XG4gICAgICAgICAgICB2YXIgY29zID0gTWF0aC5jb3MoTWF0aC5QSSAvIDE4MCAqIGFuZ2xlKSxcbiAgICAgICAgICAgICAgICBzaW4gPSBNYXRoLnNpbihNYXRoLlBJIC8gMTgwICogYW5nbGUpLFxuICAgICAgICAgICAgICAgIHggPSAoeDEgLSB4MikgLyAyLFxuICAgICAgICAgICAgICAgIHkgPSAoeTEgLSB5MikgLyAyO1xuICAgICAgICAgICAgdmFyIGggPSB4ICogeCAvIChyeCAqIHJ4KSArIHkgKiB5IC8gKHJ5ICogcnkpO1xuICAgICAgICAgICAgaWYgKGggPiAxKSB7XG4gICAgICAgICAgICAgICAgaCA9IE1hdGguc3FydChoKTtcbiAgICAgICAgICAgICAgICByeCA9IGggKiByeDtcbiAgICAgICAgICAgICAgICByeSA9IGggKiByeTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHZhciByeDIgPSByeCAqIHJ4LFxuICAgICAgICAgICAgICAgIHJ5MiA9IHJ5ICogcnksXG4gICAgICAgICAgICAgICAgayA9IChsYXJnZV9hcmNfZmxhZyA9PSBzd2VlcF9mbGFnID8gLTEgOiAxKSAqXG4gICAgICAgICAgICAgICAgICAgIE1hdGguc3FydChNYXRoLmFicygocngyICogcnkyIC0gcngyICogeSAqIHkgLSByeTIgKiB4ICogeCkgLyAocngyICogeSAqIHkgKyByeTIgKiB4ICogeCkpKSxcbiAgICAgICAgICAgICAgICBjeCA9IGsgKiByeCAqIHkgLyByeSArICh4MSArIHgyKSAvIDIsXG4gICAgICAgICAgICAgICAgY3kgPSBrICogLXJ5ICogeCAvIHJ4ICsgKHkxICsgeTIpIC8gMixcbiAgICAgICAgICAgICAgICBmMSA9IE1hdGguYXNpbigoeTEgLSBjeSkgLyByeSksXG4gICAgICAgICAgICAgICAgZjIgPSBNYXRoLmFzaW4oKHkyIC0gY3kpIC8gcnkpO1xuXG4gICAgICAgICAgICBmMSA9IHgxIDwgY3ggPyBNYXRoLlBJIC0gZjEgOiBmMTtcbiAgICAgICAgICAgIGYyID0geDIgPCBjeCA/IE1hdGguUEkgLSBmMiA6IGYyO1xuICAgICAgICAgICAgZjEgPCAwICYmIChmMSA9IE1hdGguUEkgKiAyICsgZjEpO1xuICAgICAgICAgICAgZjIgPCAwICYmIChmMiA9IE1hdGguUEkgKiAyICsgZjIpO1xuICAgICAgICAgICAgaWYgKHN3ZWVwX2ZsYWcgJiYgZjEgPiBmMikge1xuICAgICAgICAgICAgICAgIGYxID0gZjEgLSBNYXRoLlBJICogMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmICghc3dlZXBfZmxhZyAmJiBmMiA+IGYxKSB7XG4gICAgICAgICAgICAgICAgZjIgPSBmMiAtIE1hdGguUEkgKiAyO1xuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgZjEgPSByZWN1cnNpdmVbMF07XG4gICAgICAgICAgICBmMiA9IHJlY3Vyc2l2ZVsxXTtcbiAgICAgICAgICAgIGN4ID0gcmVjdXJzaXZlWzJdO1xuICAgICAgICAgICAgY3kgPSByZWN1cnNpdmVbM107XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRmID0gZjIgLSBmMTtcbiAgICAgICAgaWYgKE1hdGguYWJzKGRmKSA+IF8xMjApIHtcbiAgICAgICAgICAgIHZhciBmMm9sZCA9IGYyLFxuICAgICAgICAgICAgICAgIHgyb2xkID0geDIsXG4gICAgICAgICAgICAgICAgeTJvbGQgPSB5MjtcbiAgICAgICAgICAgIGYyID0gZjEgKyBfMTIwICogKHN3ZWVwX2ZsYWcgJiYgZjIgPiBmMSA/IDEgOiAtMSk7XG4gICAgICAgICAgICB4MiA9IGN4ICsgcnggKiBNYXRoLmNvcyhmMik7XG4gICAgICAgICAgICB5MiA9IGN5ICsgcnkgKiBNYXRoLnNpbihmMik7XG4gICAgICAgICAgICByZXMgPSB0aGlzLmEyYyh4MiwgeTIsIHJ4LCByeSwgYW5nbGUsIDAsIHN3ZWVwX2ZsYWcsIHgyb2xkLCB5Mm9sZCwgW2YyLCBmMm9sZCwgY3gsIGN5XSkgYXMgbnVtYmVyW107XG4gICAgICAgIH1cbiAgICAgICAgZGYgPSBmMiAtIGYxO1xuICAgICAgICB2YXIgYzEgPSBNYXRoLmNvcyhmMSksXG4gICAgICAgICAgICBzMSA9IE1hdGguc2luKGYxKSxcbiAgICAgICAgICAgIGMyID0gTWF0aC5jb3MoZjIpLFxuICAgICAgICAgICAgczIgPSBNYXRoLnNpbihmMiksXG4gICAgICAgICAgICB0ID0gTWF0aC50YW4oZGYgLyA0KSxcbiAgICAgICAgICAgIGh4ID0gNCAvIDMgKiByeCAqIHQsXG4gICAgICAgICAgICBoeSA9IDQgLyAzICogcnkgKiB0LFxuICAgICAgICAgICAgbTEgPSBbeDEsIHkxXSxcbiAgICAgICAgICAgIG0yID0gW3gxICsgaHggKiBzMSwgeTEgLSBoeSAqIGMxXSxcbiAgICAgICAgICAgIG0zID0gW3gyICsgaHggKiBzMiwgeTIgLSBoeSAqIGMyXSxcbiAgICAgICAgICAgIG00ID0gW3gyLCB5Ml07XG4gICAgICAgIG0yWzBdID0gMiAqIG0xWzBdIC0gbTJbMF07XG4gICAgICAgIG0yWzFdID0gMiAqIG0xWzFdIC0gbTJbMV07XG4gICAgICAgIGlmIChyZWN1cnNpdmUpIHtcbiAgICAgICAgICAgIHJldHVybiBbbTIsIG0zLCBtNF0uY29uY2F0KHJlcyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXMgPSBbbTIsIG0zLCBtNF0uY29uY2F0KHJlcykuam9pbigpLnNwbGl0KFwiLFwiKS5tYXAoeCA9PiBwYXJzZUZsb2F0KHgpKTtcbiAgICAgICAgICAgIHZhciBuZXdyZXMgPSBbXTtcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBpaSA9IHJlcy5sZW5ndGg7IGkgPCBpaTsgaSsrKSB7XG4gICAgICAgICAgICAgICAgbmV3cmVzW2ldID0gaSAlIDIgPyByb3RhdGUocmVzW2kgLSAxXSwgcmVzW2ldLCByYWQpLnkgOiByb3RhdGUocmVzW2ldLCByZXNbaSArIDFdLCByYWQpLng7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gbmV3cmVzO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgcHVibGljIGNsb3NlUGF0aCgpIHtcbiAgICAgICAgdGhpcy5wYXRoLmMgPSB0cnVlXG4gICAgfVxuXG4gICAgcHVibGljIHVuaWZvcm0oKSB7XG4gICAgICAgIGlmICh0aGlzLnBhdGhDaGFpbi5sZW5ndGggJiYgISh0aGlzLmN1cnJlbnRYID09IHRoaXMucGF0aFN0YXJ0WzBdICYmIHRoaXMuY3VycmVudFkgPT0gdGhpcy5wYXRoU3RhcnRbMV0pKSB7XG4gICAgICAgICAgICB0aGlzLmxpbmVUbyguLi50aGlzLnBhdGhTdGFydClcbiAgICAgICAgfVxuICAgICAgICB3aGlsZSAodGhpcy5wYXRoQ2hhaW4ubGVuZ3RoKSB7XG4gICAgICAgICAgICBjb25zdCBwYXRoUmVmID0gdGhpcy5wYXRoQ2hhaW4ucG9wKCkhXG4gICAgICAgICAgICB0aGlzLmxpbmVUbyguLi5wYXRoUmVmKVxuICAgICAgICB9XG4gICAgICAgIHdoaWxlICh0aGlzLnBhdGgubyEubGVuZ3RoIDwgdGhpcy5wYXRoLmkhLmxlbmd0aClcbiAgICAgICAgICAgIHRoaXMucGF0aC5vIS5wdXNoKFswLCAwXSlcbiAgICAgICAgdGhpcy5wYXRoLnYhLmZvckVhY2godmFsdWUgPT4ge1xuICAgICAgICAgICAgdmFsdWVbMF0gLT0gdGhpcy5vZmZzZXRYXG4gICAgICAgICAgICB2YWx1ZVsxXSAtPSB0aGlzLm9mZnNldFlcbiAgICAgICAgfSlcbiAgICAgICAgdGhpcy5vZmZzZXRYID0gMFxuICAgICAgICB0aGlzLm9mZnNldFkgPSAwXG4gICAgfVxuXG4gICAgcHVibGljIHBhcnNlKHBhdGhEYXRhOiBzdHJpbmcpIHtcbiAgICAgICAgY29uc3QgcGF0aERhdGFTZXJpZXMgPSBwYXJzZVNWRyhwYXRoRGF0YSlcbiAgICAgICAgbGV0IHBhdGhEYXRhV2l0aFR5cGU7XG4gICAgICAgIHBhdGhEYXRhU2VyaWVzLmZvckVhY2gocGF0aERhdGFJdGVtID0+IHtcbiAgICAgICAgICAgIHN3aXRjaCAocGF0aERhdGFJdGVtLmNvZGUpIHtcbiAgICAgICAgICAgICAgICBjYXNlICdNJzpcbiAgICAgICAgICAgICAgICAgICAgcGF0aERhdGFXaXRoVHlwZSA9IHBhdGhEYXRhSXRlbSBhcyBNb3ZlVG9Db21tYW5kXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubW92ZVRvKHBhdGhEYXRhV2l0aFR5cGUueCwgcGF0aERhdGFXaXRoVHlwZS55KVxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGNhc2UgJ20nOlxuICAgICAgICAgICAgICAgICAgICBwYXRoRGF0YVdpdGhUeXBlID0gcGF0aERhdGFJdGVtIGFzIE1vdmVUb0NvbW1hbmRcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5tb3ZlVG9SZWxhdGl2ZShwYXRoRGF0YVdpdGhUeXBlLngsIHBhdGhEYXRhV2l0aFR5cGUueSlcbiAgICAgICAgICAgICAgICBjYXNlICdMJzpcbiAgICAgICAgICAgICAgICAgICAgcGF0aERhdGFXaXRoVHlwZSA9IHBhdGhEYXRhSXRlbSBhcyBMaW5lVG9Db21tYW5kXG4gICAgICAgICAgICAgICAgICAgIHRoaXMubGluZVRvKHBhdGhEYXRhV2l0aFR5cGUueCwgcGF0aERhdGFXaXRoVHlwZS55KVxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGNhc2UgJ2wnOlxuICAgICAgICAgICAgICAgICAgICBwYXRoRGF0YVdpdGhUeXBlID0gcGF0aERhdGFJdGVtIGFzIExpbmVUb0NvbW1hbmRcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5saW5lVG9SZWxhdGl2ZShwYXRoRGF0YVdpdGhUeXBlLngsIHBhdGhEYXRhV2l0aFR5cGUueSlcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlICdIJzpcbiAgICAgICAgICAgICAgICAgICAgcGF0aERhdGFXaXRoVHlwZSA9IHBhdGhEYXRhSXRlbSBhcyBIb3Jpem9udGFsTGluZVRvQ29tbWFuZFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmhvcml6b250YWxUbyhwYXRoRGF0YVdpdGhUeXBlLngpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgY2FzZSAnaCc6XG4gICAgICAgICAgICAgICAgICAgIHBhdGhEYXRhV2l0aFR5cGUgPSBwYXRoRGF0YUl0ZW0gYXMgSG9yaXpvbnRhbExpbmVUb0NvbW1hbmRcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ob3Jpem9udGFsVG9SZWxhdGl2ZShwYXRoRGF0YVdpdGhUeXBlLngpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgY2FzZSAnVic6XG4gICAgICAgICAgICAgICAgICAgIHBhdGhEYXRhV2l0aFR5cGUgPSBwYXRoRGF0YUl0ZW0gYXMgVmVydGljYWxMaW5lVG9Db21tYW5kXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmVydGljYWxUbyhwYXRoRGF0YVdpdGhUeXBlLnkpXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgY2FzZSAndic6XG4gICAgICAgICAgICAgICAgICAgIHBhdGhEYXRhV2l0aFR5cGUgPSBwYXRoRGF0YUl0ZW0gYXMgVmVydGljYWxMaW5lVG9Db21tYW5kXG4gICAgICAgICAgICAgICAgICAgIHRoaXMudmVydGljYWxUb1JlbGF0aXZlKHBhdGhEYXRhV2l0aFR5cGUueSlcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlICdDJzpcbiAgICAgICAgICAgICAgICAgICAgcGF0aERhdGFXaXRoVHlwZSA9IHBhdGhEYXRhSXRlbSBhcyBDdXJ2ZVRvQ29tbWFuZFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1YmljQmV6aWVyQ3VydmVUbyhwYXRoRGF0YVdpdGhUeXBlLngxLCBwYXRoRGF0YVdpdGhUeXBlLnkxLCBwYXRoRGF0YVdpdGhUeXBlLngyLCBwYXRoRGF0YVdpdGhUeXBlLnkyLCBwYXRoRGF0YVdpdGhUeXBlLngsIHBhdGhEYXRhV2l0aFR5cGUueSlcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlICdjJzpcbiAgICAgICAgICAgICAgICAgICAgcGF0aERhdGFXaXRoVHlwZSA9IHBhdGhEYXRhSXRlbSBhcyBDdXJ2ZVRvQ29tbWFuZFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmN1YmljQmV6aWVyQ3VydmVUb1JlbGF0aXZlKHBhdGhEYXRhV2l0aFR5cGUueDEsIHBhdGhEYXRhV2l0aFR5cGUueTEsIHBhdGhEYXRhV2l0aFR5cGUueDIsIHBhdGhEYXRhV2l0aFR5cGUueTIsIHBhdGhEYXRhV2l0aFR5cGUueCwgcGF0aERhdGFXaXRoVHlwZS55KVxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGNhc2UgJ1EnOlxuICAgICAgICAgICAgICAgICAgICBwYXRoRGF0YVdpdGhUeXBlID0gcGF0aERhdGFJdGVtIGFzIFF1YWRyYXRpY0N1cnZlVG9Db21tYW5kXG4gICAgICAgICAgICAgICAgICAgIHRoaXMucXVhZHJhdGljQmV6aWVyQ3VydmVUbyhwYXRoRGF0YVdpdGhUeXBlLngxLCBwYXRoRGF0YVdpdGhUeXBlLnkxLCBwYXRoRGF0YVdpdGhUeXBlLngsIHBhdGhEYXRhV2l0aFR5cGUueSlcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlICdxJzpcbiAgICAgICAgICAgICAgICAgICAgcGF0aERhdGFXaXRoVHlwZSA9IHBhdGhEYXRhSXRlbSBhcyBRdWFkcmF0aWNDdXJ2ZVRvQ29tbWFuZFxuICAgICAgICAgICAgICAgICAgICB0aGlzLnF1YWRyYXRpY0JlemllckN1cnZlVG9SZWxhdGl2ZShwYXRoRGF0YVdpdGhUeXBlLngxLCBwYXRoRGF0YVdpdGhUeXBlLnkxLCBwYXRoRGF0YVdpdGhUeXBlLngsIHBhdGhEYXRhV2l0aFR5cGUueSlcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlICdBJzpcbiAgICAgICAgICAgICAgICAgICAgcGF0aERhdGFXaXRoVHlwZSA9IHBhdGhEYXRhSXRlbSBhcyBFbGxpcHRpY2FsQXJjQ29tbWFuZFxuICAgICAgICAgICAgICAgICAgICB0aGlzLmFyY1RvKHBhdGhEYXRhV2l0aFR5cGUucngsIHBhdGhEYXRhV2l0aFR5cGUucnksIHBhdGhEYXRhV2l0aFR5cGUueEF4aXNSb3RhdGlvbiwgfn5wYXRoRGF0YVdpdGhUeXBlLmxhcmdlQXJjLCB+fnBhdGhEYXRhV2l0aFR5cGUuc3dlZXAsIHBhdGhEYXRhV2l0aFR5cGUueCwgcGF0aERhdGFXaXRoVHlwZS55KVxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGNhc2UgJ2EnOlxuICAgICAgICAgICAgICAgICAgICBwYXRoRGF0YVdpdGhUeXBlID0gcGF0aERhdGFJdGVtIGFzIEVsbGlwdGljYWxBcmNDb21tYW5kXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuYXJjVG9SZWxhdGl2ZShwYXRoRGF0YVdpdGhUeXBlLnJ4LCBwYXRoRGF0YVdpdGhUeXBlLnJ5LCBwYXRoRGF0YVdpdGhUeXBlLnhBeGlzUm90YXRpb24sIH5+cGF0aERhdGFXaXRoVHlwZS5sYXJnZUFyYywgfn5wYXRoRGF0YVdpdGhUeXBlLnN3ZWVwLCBwYXRoRGF0YVdpdGhUeXBlLngsIHBhdGhEYXRhV2l0aFR5cGUueSlcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICBjYXNlICdaJzpcbiAgICAgICAgICAgICAgICBjYXNlICd6JzpcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5jbG9zZVBhdGgoKVxuICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgIGRlZmF1bHQ6XG4gICAgICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IocGF0aERhdGFJdGVtKVxuICAgICAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGltcGxlbWVudGF0aW9uIGZvdW5kIGZvciB0aGlzIHBhdGggY29tbWFuZC4nKVxuICAgICAgICAgICAgfVxuICAgICAgICB9KVxuICAgIH1cblxuICAgIHB1YmxpYyB1cHNhbXBsZShyYXRpbzogbnVtYmVyKSB7XG4gICAgICAgIC8vIHVzZSBEZSBDYXN0ZWxqYXUncyBhbGdvcml0aG0gdG8gZG8gdGhlIHVwc2FtcGxpbmdcbiAgICAgICAgLy8gUmVmZXJlbmNlOiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9EZV9DYXN0ZWxqYXUlMjdzX2FsZ29yaXRobVxuXG4gICAgICAgIGlmICghTnVtYmVyLmlzSW50ZWdlcihyYXRpbykpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignVGhlIHVwc2FtcGxpbmcgcmF0aW8gc2hvdWxkIGJlIGFuIGludGVnZXIuJylcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnVuaWZvcm0oKVxuICAgICAgICBpZiAocmF0aW8gPD0gMSkgcmV0dXJuXG4gICAgICAgIGNvbnN0IGNvcHlQYXRoOiBQYXRoRGVmID0ge1xuICAgICAgICAgICAgYzogdGhpcy5wYXRoLmMsXG4gICAgICAgICAgICBpOiBbXSxcbiAgICAgICAgICAgIG86IFtdLFxuICAgICAgICAgICAgdjogW11cbiAgICAgICAgfVxuICAgICAgICB0aGlzLnBhdGgudiEuZm9yRWFjaCgodiwgaSwgYSkgPT4ge1xuICAgICAgICAgICAgaWYgKGkgPD0gMCkge1xuICAgICAgICAgICAgICAgIGNvcHlQYXRoLnYhLnB1c2godilcbiAgICAgICAgICAgICAgICBjb3B5UGF0aC5pIS5wdXNoKHRoaXMucGF0aC5pIVtpXSlcbiAgICAgICAgICAgICAgICByZXR1cm5cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGNvbnN0IG9BcnJheSA9IHRoaXMucGF0aC5vIVxuICAgICAgICAgICAgY29uc3QgaUFycmF5ID0gdGhpcy5wYXRoLmkhXG4gICAgICAgICAgICBsZXQgeEFycmF5ID0gW2FbaSAtIDFdWzBdLCBvQXJyYXlbaSAtIDFdWzBdICsgYVtpIC0gMV1bMF0sIGlBcnJheVtpXVswXSArIHZbMF0sIHZbMF1dXG4gICAgICAgICAgICBsZXQgeUFycmF5ID0gW2FbaSAtIDFdWzFdLCBvQXJyYXlbaSAtIDFdWzFdICsgYVtpIC0gMV1bMV0sIGlBcnJheVtpXVsxXSArIHZbMV0sIHZbMV1dXG4gICAgICAgICAgICBmb3IgKGxldCBpbmRleCA9IDE7IGluZGV4IDwgcmF0aW87IGluZGV4KyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBzdGVwUmF0aW8gPSAxIC8gKHJhdGlvIC0gaW5kZXggKyAxKVxuICAgICAgICAgICAgICAgIGNvbnN0IHhTcGxpdEFycmF5ID0gdGhpcy5jYWxjdWxhdGVCZXppZXJTcGxpdChzdGVwUmF0aW8sIC4uLnhBcnJheSlcbiAgICAgICAgICAgICAgICBjb25zdCB5U3BsaXRBcnJheSA9IHRoaXMuY2FsY3VsYXRlQmV6aWVyU3BsaXQoc3RlcFJhdGlvLCAuLi55QXJyYXkpXG4gICAgICAgICAgICAgICAgY29uc3QgcDB4ID0geEFycmF5WzBdLCBwMXggPSB4U3BsaXRBcnJheS5zaGlmdCgpISAtIHAweCwgcDN4ID0geFNwbGl0QXJyYXlbMV0sIHAyeCA9IHhTcGxpdEFycmF5LnNoaWZ0KCkhIC0gcDN4LFxuICAgICAgICAgICAgICAgICAgICBwMHkgPSB5QXJyYXlbMF0sIHAxeSA9IHlTcGxpdEFycmF5LnNoaWZ0KCkhIC0gcDB5LCBwM3kgPSB5U3BsaXRBcnJheVsxXSwgcDJ5ID0geVNwbGl0QXJyYXkuc2hpZnQoKSEgLSBwM3lcbiAgICAgICAgICAgICAgICBjb3B5UGF0aC5vIS5wdXNoKFtwMXgsIHAxeV0pXG4gICAgICAgICAgICAgICAgY29weVBhdGguaSEucHVzaChbcDJ4LCBwMnldKVxuICAgICAgICAgICAgICAgIGNvcHlQYXRoLnYhLnB1c2goW3AzeCwgcDN5XSlcbiAgICAgICAgICAgICAgICB4QXJyYXkgPSB4U3BsaXRBcnJheVxuICAgICAgICAgICAgICAgIHlBcnJheSA9IHlTcGxpdEFycmF5XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBwMHggPSB4QXJyYXkuc2hpZnQoKSEsIHAxeCA9IHhBcnJheS5zaGlmdCgpISAtIHAweCwgcDN4ID0geEFycmF5WzFdLCBwMnggPSB4QXJyYXkuc2hpZnQoKSEgLSBwM3gsXG4gICAgICAgICAgICAgICAgcDB5ID0geUFycmF5LnNoaWZ0KCkhLCBwMXkgPSB5QXJyYXkuc2hpZnQoKSEgLSBwMHksIHAzeSA9IHlBcnJheVsxXSwgcDJ5ID0geUFycmF5LnNoaWZ0KCkhIC0gcDN5XG4gICAgICAgICAgICBjb3B5UGF0aC5vIS5wdXNoKFtwMXgsIHAxeV0pXG4gICAgICAgICAgICBjb3B5UGF0aC5pIS5wdXNoKFtwMngsIHAyeV0pXG4gICAgICAgICAgICBjb3B5UGF0aC52IS5wdXNoKFtwM3gsIHAzeV0pXG4gICAgICAgIH0pXG4gICAgICAgIHRoaXMucGF0aCA9IGNvcHlQYXRoXG4gICAgICAgIHRoaXMudW5pZm9ybSgpXG4gICAgfVxuXG59Il19","\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.render = render;\nexports.renderPlainGlyph = renderPlainGlyph;\nexports.renderText = renderText;\nexports.renderImage = renderImage;\n\nvar _path = require(\"./path\");\n\nvar _v = _interopRequireDefault(require(\"uuid/v4\"));\n\nvar _helper = require(\"./helper\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { \"default\": obj }; }\n\nfunction _slicedToArray(arr, i) { return _arrayWithHoles(arr) || _iterableToArrayLimit(arr, i) || _nonIterableRest(); }\n\nfunction _nonIterableRest() { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); }\n\nfunction _iterableToArrayLimit(arr, i) { if (!(Symbol.iterator in Object(arr) || Object.prototype.toString.call(arr) === \"[object Arguments]\")) { return; } var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"] != null) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; }\n\nfunction _arrayWithHoles(arr) { if (Array.isArray(arr)) return arr; }\n\nfunction render(dom, baseDom) {\n  if (dom instanceof SVGTextElement || dom instanceof SVGImageElement) {\n    return [];\n  } else if (dom instanceof SVGGElement) {\n    return renderGroup(dom, baseDom);\n  } else {\n    return renderGlyph(dom, baseDom);\n  }\n}\n\nfunction addVisualEncodings(items, styles, dom, baseDom) {\n  if (styles.stroke && styles.stroke !== 'none') {\n    items.push({\n      ty: 'st',\n      c: {\n        k: styles.stroke.split('(')[1].split(')')[0].split(',').slice(0, 3).map(function (raw) {\n          return parseInt(raw) / 255;\n        }).concat(1)\n      },\n      o: {\n        k: parseFloat(styles.strokeOpacity || '1') * 100\n      },\n      w: {\n        k: parseFloat(styles.strokeWidth || '1')\n      },\n      lc: (0, _helper.encodeLineCap)(styles.strokeLinecap),\n      lj: (0, _helper.encodeLineJoin)(styles.strokeLinejoin)\n    });\n  }\n\n  if (styles.fill && styles.fill !== 'none') {\n    items.push({\n      ty: 'fl',\n      c: {\n        k: styles.fill.split('(')[1].split(')')[0].split(',').slice(0, 3).map(function (raw) {\n          return parseInt(raw) / 255;\n        }).concat(1)\n      },\n      o: {\n        k: parseFloat(styles.fillOpacity || '1') * 100\n      }\n    });\n  }\n\n  var posX = 0,\n      posY = 0,\n      opacity = 100;\n\n  if (dom && baseDom) {\n    var baseTransform = (0, _helper.calculateBaseTransform)(dom, baseDom);\n    var baseBBox = baseDom.getBBox();\n    var refBBox = dom.getBBox();\n    posX = baseTransform.e + refBBox.x - baseBBox.x;\n    posY = baseTransform.f + refBBox.y - baseBBox.y;\n    opacity = parseFloat(styles.opacity || '1') * 100;\n  }\n\n  items.push({\n    ty: \"tr\",\n    p: {\n      k: [posX, posY]\n    },\n    a: {\n      k: [0, 0]\n    },\n    s: {\n      k: [100, 100]\n    },\n    r: {\n      k: 0\n    },\n    o: {\n      k: opacity\n    },\n    sk: {\n      k: 0\n    },\n    sa: {\n      k: 0\n    }\n  });\n}\n\nfunction renderGlyph(dom, baseDom) {\n  var group = {\n    ty: \"gr\",\n    it: [],\n    bm: 0,\n    hd: false\n  };\n\n  var postActions = function postActions(pathMaker) {\n    pathMaker.uniform();\n    group.it.push({\n      ty: 'sh',\n      ks: {\n        k: pathMaker.path,\n        a: 0\n      },\n      nm: dom.id,\n      hd: false\n    });\n    var styles = window.getComputedStyle(dom);\n    addVisualEncodings(group.it, styles, dom, baseDom);\n  };\n\n  if (dom instanceof SVGCircleElement) {\n    var svgLength = dom.r.baseVal;\n    svgLength.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX);\n    var r = svgLength.valueInSpecifiedUnits;\n    var pathMaker = new _path.PathMaker();\n    pathMaker.moveTo(r, 0);\n    pathMaker.arcTo(r, r, 0, 1, 0, r, 2 * r);\n    pathMaker.arcTo(r, r, 0, 1, 0, r, 0);\n    pathMaker.closePath();\n    postActions(pathMaker);\n  } else if (dom instanceof SVGEllipseElement) {\n    var mapKey = ['rx', 'ry'];\n\n    var _mapKey$map = mapKey.map(function (key) {\n      var svgLength = dom[key].baseVal;\n      svgLength.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX);\n      return svgLength.valueInSpecifiedUnits;\n    }),\n        _mapKey$map2 = _slicedToArray(_mapKey$map, 2),\n        rx = _mapKey$map2[0],\n        ry = _mapKey$map2[1];\n\n    var _pathMaker = new _path.PathMaker();\n\n    _pathMaker.moveTo(rx, 0);\n\n    _pathMaker.arcTo(rx, ry, 0, 1, 0, rx, 2 * ry);\n\n    _pathMaker.arcTo(rx, ry, 0, 1, 0, rx, 0);\n\n    _pathMaker.closePath();\n\n    postActions(_pathMaker);\n  } else if (dom instanceof SVGLineElement) {\n    var _mapKey = ['x1', 'x2', 'y1', 'y2'];\n\n    var _mapKey$map3 = _mapKey.map(function (key) {\n      var svgLength = dom[key].baseVal;\n      svgLength.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX);\n      return svgLength.valueInSpecifiedUnits;\n    }),\n        _mapKey$map4 = _slicedToArray(_mapKey$map3, 4),\n        x1 = _mapKey$map4[0],\n        x2 = _mapKey$map4[1],\n        y1 = _mapKey$map4[2],\n        y2 = _mapKey$map4[3];\n\n    var offsetX = Math.min(x1, x2);\n    var offsetY = Math.min(y1, y2);\n\n    var _pathMaker2 = new _path.PathMaker();\n\n    _pathMaker2.moveTo(x1 - offsetX, y1 - offsetY);\n\n    _pathMaker2.lineTo(x2 - offsetX, y2 - offsetY);\n\n    postActions(_pathMaker2);\n  } else if (dom instanceof SVGPathElement) {\n    var pathData = dom.getAttribute('d') || '';\n\n    var _pathMaker3 = new _path.PathMaker(pathData);\n\n    postActions(_pathMaker3);\n  } else if (dom instanceof SVGPolygonElement || dom instanceof SVGPolylineElement) {\n    var points = dom.points;\n\n    if (points.length) {\n      var iterablePoints = Array.prototype.slice.call(points);\n\n      var _offsetX = iterablePoints.reduce(function (p, v) {\n        return Math.min(p, v.x);\n      }, 0);\n\n      var _offsetY = iterablePoints.reduce(function (p, v) {\n        return Math.min(p, v.y);\n      }, 0);\n\n      var _pathMaker4 = new _path.PathMaker();\n\n      _pathMaker4.moveTo(points[0].x - _offsetX, points[0].y - _offsetY);\n\n      iterablePoints.forEach(function (v, i) {\n        if (i <= 0) return;\n\n        _pathMaker4.lineTo(v.x - _offsetX, v.y - _offsetY);\n      });\n\n      if (dom instanceof SVGPolygonElement) {\n        _pathMaker4.closePath();\n      }\n\n      postActions(_pathMaker4);\n    }\n  } else if (dom instanceof SVGRectElement) {\n    var _mapKey2 = ['width', 'height'];\n\n    var _mapKey2$map = _mapKey2.map(function (key) {\n      var svgLength = dom[key].baseVal;\n      svgLength.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX);\n      return svgLength.valueInSpecifiedUnits;\n    }),\n        _mapKey2$map2 = _slicedToArray(_mapKey2$map, 2),\n        width = _mapKey2$map2[0],\n        height = _mapKey2$map2[1];\n\n    var _pathMaker5 = new _path.PathMaker();\n\n    _pathMaker5.moveTo(0, 0);\n\n    _pathMaker5.lineTo(width, 0);\n\n    _pathMaker5.lineTo(width, height);\n\n    _pathMaker5.lineTo(0, height);\n\n    _pathMaker5.closePath();\n\n    postActions(_pathMaker5);\n  } else {\n    console.error(dom);\n    throw new Error('No implementation found for svg graphics element.');\n  }\n\n  return [group];\n}\n\nfunction renderGroup(dom, baseDom) {\n  var items = [];\n  dom.childNodes.forEach(function (node) {\n    if (node instanceof SVGGraphicsElement) {\n      items = render(node, baseDom || dom).concat(items);\n    }\n  });\n  return items;\n}\n\nfunction renderPlainGlyph(type, args) {\n  var group = {\n    ty: \"gr\",\n    it: [{\n      ty: 'sh',\n      ks: {\n        k: null,\n        a: 0\n      },\n      hd: false\n    }, {\n      ty: 'st',\n      c: {\n        k: [1, 1, 1, 1]\n      },\n      w: {\n        k: 1\n      },\n      o: {\n        k: 100\n      },\n      lc: (0, _helper.encodeLineCap)('butt'),\n      lj: (0, _helper.encodeLineJoin)('miter')\n    }, {\n      ty: 'fl',\n      c: {\n        k: [1, 1, 1, 1]\n      },\n      o: {\n        k: 100\n      }\n    }, {\n      ty: 'tr',\n      p: {\n        k: [0, 0]\n      },\n      a: {\n        k: [0, 0]\n      },\n      s: {\n        k: [100, 100]\n      },\n      r: {\n        k: 0\n      },\n      o: {\n        k: 100\n      },\n      sk: {\n        k: 0\n      },\n      sa: {\n        k: 0\n      }\n    }],\n    bm: 0,\n    hd: false\n  };\n  var pathMaker = new _path.PathMaker();\n\n  switch (type) {\n    case 'rect':\n      pathMaker.moveTo(0, 0);\n      pathMaker.lineTo(args[0], 0);\n      pathMaker.lineTo(args[0], args[1]);\n      pathMaker.lineTo(0, args[1]);\n      pathMaker.closePath();\n      break;\n\n    case 'ellipse':\n      pathMaker.moveTo(args[0], 0);\n      pathMaker.arcTo(args[0], args[1], 0, 1, 0, args[0], 2 * args[1]);\n      pathMaker.arcTo(args[0], args[1], 0, 1, 0, args[0], 0);\n      pathMaker.closePath();\n  }\n\n  pathMaker.uniform();\n  group.it[0].ks.k = pathMaker.path;\n  return group;\n}\n\nfunction renderText(dom, fontList) {\n  var computedStyle = getComputedStyle(dom);\n  var fontSize = parseFloat(computedStyle.fontSize),\n      fontFamily = computedStyle.fontFamily.split(',')[0].trim(),\n      fontStyle = computedStyle.fontStyle,\n      fontWeight = computedStyle.fontWeight,\n      fontColor = (computedStyle.fill || 'rgb(0,0,0)').split('(')[1].split(')')[0].split(',').map(function (i) {\n    return parseInt(i) / 255;\n  }),\n      textAnchor = computedStyle.textAnchor;\n  var fontName = (0, _v[\"default\"])();\n\n  if (fontList) {\n    var fontExist = fontList.list.filter(function (font) {\n      return font.fFamily == fontFamily && font.fStyle == fontStyle && font.fWeight == fontWeight;\n    });\n    if (fontExist.length) fontName = fontExist[0].fName;\n  }\n\n  var textData = {\n    d: {\n      k: [{\n        t: 0,\n        s: {\n          s: fontSize,\n          f: fontName,\n          t: dom.innerHTML,\n          j: (0, _helper.encodeTextAnchor)(textAnchor),\n          tr: 0,\n          ls: 0,\n          fc: fontColor\n        }\n      }]\n    },\n    p: {},\n    m: {\n      a: {\n        k: [0, 0]\n      }\n    },\n    a: []\n  };\n  var fontDef = {\n    fFamily: fontFamily,\n    fWeight: \"\".concat(fontWeight),\n    fStyle: fontStyle,\n    fName: fontName\n  };\n  return [textData, fontDef];\n}\n\nfunction renderImage(dom, assetList) {\n  var id = (0, _v[\"default\"])();\n  var domHeightVal = dom.height.baseVal;\n  domHeightVal.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX);\n  var domWidthVal = dom.width.baseVal;\n  domWidthVal.convertToSpecifiedUnits(SVGLength.SVG_LENGTHTYPE_PX);\n  var canvas = document.createElement('canvas');\n  var ctx = canvas.getContext('2d');\n  canvas.width = domWidthVal.valueInSpecifiedUnits * 3;\n  canvas.height = domHeightVal.valueInSpecifiedUnits * 3;\n  ctx.drawImage(dom, 0, 0, canvas.width, canvas.height);\n  var dataUrl = canvas.toDataURL();\n\n  if (assetList) {\n    var assetExist = assetList.filter(function (asset) {\n      return asset.p == dataUrl;\n    });\n    if (assetExist.length) id = assetExist[0].id;\n  }\n\n  var asset = {\n    h: domHeightVal.valueInSpecifiedUnits,\n    w: domWidthVal.valueInSpecifiedUnits,\n    id: id,\n    p: dataUrl,\n    e: 1\n  };\n  return [id, asset];\n}\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL3NyYy9yZW5kZXIudHMiXSwibmFtZXMiOlsicmVuZGVyIiwiZG9tIiwiYmFzZURvbSIsIlNWR1RleHRFbGVtZW50IiwiU1ZHSW1hZ2VFbGVtZW50IiwiU1ZHR0VsZW1lbnQiLCJyZW5kZXJHcm91cCIsInJlbmRlckdseXBoIiwiYWRkVmlzdWFsRW5jb2RpbmdzIiwiaXRlbXMiLCJzdHlsZXMiLCJzdHJva2UiLCJwdXNoIiwidHkiLCJjIiwiayIsInNwbGl0Iiwic2xpY2UiLCJtYXAiLCJyYXciLCJwYXJzZUludCIsImNvbmNhdCIsIm8iLCJwYXJzZUZsb2F0Iiwic3Ryb2tlT3BhY2l0eSIsInciLCJzdHJva2VXaWR0aCIsImxjIiwic3Ryb2tlTGluZWNhcCIsImxqIiwic3Ryb2tlTGluZWpvaW4iLCJmaWxsIiwiZmlsbE9wYWNpdHkiLCJwb3NYIiwicG9zWSIsIm9wYWNpdHkiLCJiYXNlVHJhbnNmb3JtIiwiYmFzZUJCb3giLCJnZXRCQm94IiwicmVmQkJveCIsImUiLCJ4IiwiZiIsInkiLCJwIiwiYSIsInMiLCJyIiwic2siLCJzYSIsImdyb3VwIiwiaXQiLCJibSIsImhkIiwicG9zdEFjdGlvbnMiLCJwYXRoTWFrZXIiLCJ1bmlmb3JtIiwia3MiLCJwYXRoIiwibm0iLCJpZCIsIndpbmRvdyIsImdldENvbXB1dGVkU3R5bGUiLCJTVkdDaXJjbGVFbGVtZW50Iiwic3ZnTGVuZ3RoIiwiYmFzZVZhbCIsImNvbnZlcnRUb1NwZWNpZmllZFVuaXRzIiwiU1ZHTGVuZ3RoIiwiU1ZHX0xFTkdUSFRZUEVfUFgiLCJ2YWx1ZUluU3BlY2lmaWVkVW5pdHMiLCJQYXRoTWFrZXIiLCJtb3ZlVG8iLCJhcmNUbyIsImNsb3NlUGF0aCIsIlNWR0VsbGlwc2VFbGVtZW50IiwibWFwS2V5Iiwia2V5IiwicngiLCJyeSIsIlNWR0xpbmVFbGVtZW50IiwieDEiLCJ4MiIsInkxIiwieTIiLCJvZmZzZXRYIiwiTWF0aCIsIm1pbiIsIm9mZnNldFkiLCJsaW5lVG8iLCJTVkdQYXRoRWxlbWVudCIsInBhdGhEYXRhIiwiZ2V0QXR0cmlidXRlIiwiU1ZHUG9seWdvbkVsZW1lbnQiLCJTVkdQb2x5bGluZUVsZW1lbnQiLCJwb2ludHMiLCJsZW5ndGgiLCJpdGVyYWJsZVBvaW50cyIsIkFycmF5IiwicHJvdG90eXBlIiwiY2FsbCIsInJlZHVjZSIsInYiLCJmb3JFYWNoIiwiaSIsIlNWR1JlY3RFbGVtZW50Iiwid2lkdGgiLCJoZWlnaHQiLCJjb25zb2xlIiwiZXJyb3IiLCJFcnJvciIsImNoaWxkTm9kZXMiLCJub2RlIiwiU1ZHR3JhcGhpY3NFbGVtZW50IiwicmVuZGVyUGxhaW5HbHlwaCIsInR5cGUiLCJhcmdzIiwicmVuZGVyVGV4dCIsImZvbnRMaXN0IiwiY29tcHV0ZWRTdHlsZSIsImZvbnRTaXplIiwiZm9udEZhbWlseSIsInRyaW0iLCJmb250U3R5bGUiLCJmb250V2VpZ2h0IiwiZm9udENvbG9yIiwidGV4dEFuY2hvciIsImZvbnROYW1lIiwiZm9udEV4aXN0IiwibGlzdCIsImZpbHRlciIsImZvbnQiLCJmRmFtaWx5IiwiZlN0eWxlIiwiZldlaWdodCIsImZOYW1lIiwidGV4dERhdGEiLCJkIiwidCIsImlubmVySFRNTCIsImoiLCJ0ciIsImxzIiwiZmMiLCJtIiwiZm9udERlZiIsInJlbmRlckltYWdlIiwiYXNzZXRMaXN0IiwiZG9tSGVpZ2h0VmFsIiwiZG9tV2lkdGhWYWwiLCJjYW52YXMiLCJkb2N1bWVudCIsImNyZWF0ZUVsZW1lbnQiLCJjdHgiLCJnZXRDb250ZXh0IiwiZHJhd0ltYWdlIiwiZGF0YVVybCIsInRvRGF0YVVSTCIsImFzc2V0RXhpc3QiLCJhc3NldCIsImgiXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFDQTs7QUFDQTs7QUFDQTs7Ozs7Ozs7Ozs7O0FBR08sU0FBU0EsTUFBVCxDQUFnQkMsR0FBaEIsRUFBeUNDLE9BQXpDLEVBQXFGO0FBQ3hGLE1BQUlELEdBQUcsWUFBWUUsY0FBZixJQUFpQ0YsR0FBRyxZQUFZRyxlQUFwRCxFQUFxRTtBQUNq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TVcsVUFBVSxHQUFHWCxTQUFTLENBQUVqQixNQUFYLENBQWtCLFVBQUE2QixLQUFLO0FBQUEsYUFBSUEsS0FBSyxDQUFDbEgsQ0FBTixJQUFXK0csT0FBZjtBQUFBLEtBQXZCLENBQW5CO0FBQ0EsUUFBSUUsVUFBVSxDQUFDOUQsTUFBZixFQUNJbkMsRUFBRSxHQUFHaUcsVUFBVSxDQUFDLENBQUQsQ0FBVixDQUFjakcsRUFBbkI7QUFDUDs7QUFDRCxNQUFNa0csS0FBSyxHQUFHO0FBQ1ZDLElBQUFBLENBQUMsRUFBRVosWUFBWSxDQUFDOUUscUJBRE47QUFFVjVDLElBQUFBLENBQUMsRUFBRTJILFdBQVcsQ0FBQy9FLHFCQUZMO0FBR1ZULElBQUFBLEVBQUUsRUFBRkEsRUFIVTtBQUlWaEIsSUFBQUEsQ0FBQyxFQUFFK0csT0FKTztBQUtWbkgsSUFBQUEsQ0FBQyxFQUFFO0FBTE8sR0FBZDtBQU9BLFNBQU8sQ0FBQ29CLEVBQUQsRUFBS2tHLEtBQUwsQ0FBUDtBQUNIIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgR3JvdXBTaGFwZSwgVGV4dERhdGEsIFJlZmVyZW5jZUlELCBQYXRoU2hhcGUsIEZpbGxTaGFwZSwgU3Ryb2tlU2hhcGUsIFRyYW5zZm9ybVNoYXBlLCBJbWFnZUFzc2V0LCBGb250MSwgRm9udHMsIEFzc2V0cyB9IGZyb20gJy4vYW5pbWF0aW9uJ1xuaW1wb3J0IHsgUGF0aE1ha2VyIH0gZnJvbSAnLi9wYXRoJ1xuaW1wb3J0IHV1aWQgZnJvbSAndXVpZC92NCdcbmltcG9ydCB7IGNhbGN1bGF0ZUJhc2VUcmFuc2Zvcm0sIGVuY29kZUxpbmVKb2luLCBlbmNvZGVMaW5lQ2FwLCBlbmNvZGVUZXh0QW5jaG9yIH0gZnJvbSAnLi9oZWxwZXInXG5cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlcihkb206IFNWR0dyYXBoaWNzRWxlbWVudCwgYmFzZURvbT86IFNWR0dyYXBoaWNzRWxlbWVudCk6IEdyb3VwU2hhcGVbXSB7XG4gICAgaWYgKGRvbSBpbnN0YW5jZW9mIFNWR1RleHRFbGVtZW50IHx8IGRvbSBpbnN0YW5jZW9mIFNWR0ltYWdlRWxlbWVudCkge1xuICAgICAgICByZXR1cm4gW11cbiAgICB9IGVsc2UgaWYgKGRvbSBpbnN0YW5jZW9mIFNWR0dFbGVtZW50KSB7XG4gICAgICAgIHJldHVybiByZW5kZXJHcm91cChkb20sIGJhc2VEb20pXG4gICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIHJlbmRlckdseXBoKGRvbSwgYmFzZURvbSlcbiAgICB9XG59XG5cbnR5cGUgVmlzdWFsR3JvdXBJdGVtID0gUGF0aFNoYXBlIHwgRmlsbFNoYXBlIHwgU3Ryb2tlU2hhcGUgfCBUcmFuc2Zvcm1TaGFwZVxuXG5mdW5jdGlvbiBhZGRWaXN1YWxFbmNvZGluZ3MoaXRlbXM6IFZpc3VhbEdyb3VwSXRlbVtdLCBzdHlsZXM6IENTU1N0eWxlRGVjbGFyYXRpb24sIGRvbT86IFNWR0dyYXBoaWNzRWxlbWVudCwgYmFzZURvbT86IFNWR0dyYXBoaWNzRWxlbWVudCkge1xuICAgIGlmIChzdHlsZXMuc3Ryb2tlICYmIHN0eWxlcy5zdHJva2UgIT09ICdub25lJykge1xuICAgICAgICBpdGVtcy5wdXNoKHtcbiAgICAgICAgICAgIHR5OiAnc3QnLFxuICAgICAgICAgICAgYzoge1xuICAgICAgICAgICAgICAgIGs6IHN0eWxlcy5zdHJva2UhLnNwbGl0KCcoJylbMV0uc3BsaXQoJyknKVswXS5zcGxpdCgnLCcpLnNsaWNlKDAsIDMpLm1hcCgocmF3OiBzdHJpbmcpID0+IHBhcnNlSW50KHJhdykgLyAyNTUpLmNvbmNhdCgxKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG86IHtcbiAgICAgICAgICAgICAgICBrOiBwYXJzZUZsb2F0KHN0eWxlcy5zdHJva2VPcGFjaXR5IHx8ICcxJykgKiAxMDBcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB3OiB7XG4gICAgICAgICAgICAgICAgazogcGFyc2VGbG9hdChzdHlsZXMuc3Ryb2tlV2lkdGggfHwgJzEnKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIGxjOiBlbmNvZGVMaW5lQ2FwKHN0eWxlcy5zdHJva2VMaW5lY2FwKSxcbiAgICAgICAgICAgIGxqOiBlbmNvZGVMaW5lSm9pbihzdHlsZXMuc3Ryb2tlTGluZWpvaW4pXG4gICAgICAgIH0pXG4gICAgfVxuICAgIGlmIChzdHlsZXMuZmlsbCAmJiBzdHlsZXMuZmlsbCAhPT0gJ25vbmUnKSB7XG4gICAgICAgIGl0ZW1zLnB1c2goe1xuICAgICAgICAgICAgdHk6ICdmbCcsXG4gICAgICAgICAgICBjOiB7XG4gICAgICAgICAgICAgICAgazogc3R5bGVzLmZpbGwhLnNwbGl0KCcoJylbMV0uc3BsaXQoJyknKVswXS5zcGxpdCgnLCcpLnNsaWNlKDAsIDMpLm1hcCgocmF3OiBzdHJpbmcpID0+IHBhcnNlSW50KHJhdykgLyAyNTUpLmNvbmNhdCgxKVxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG86IHtcbiAgICAgICAgICAgICAgICBrOiBwYXJzZUZsb2F0KHN0eWxlcy5maWxsT3BhY2l0eSB8fCAnMScpICogMTAwXG4gICAgICAgICAgICB9XG4gICAgICAgIH0pXG4gICAgfVxuICAgIGxldCBwb3NYID0gMCwgcG9zWSA9IDAsIG9wYWNpdHkgPSAxMDBcbiAgICBpZiAoZG9tICYmIGJhc2VEb20pIHtcbiAgICAgICAgY29uc3QgYmFzZVRyYW5zZm9ybSA9IGNhbGN1bGF0ZUJhc2VUcmFuc2Zvcm0oZG9tLCBiYXNlRG9tKVxuICAgICAgICBjb25zdCBiYXNlQkJveCA9IGJhc2VEb20uZ2V0QkJveCgpXG4gICAgICAgIGNvbnN0IHJlZkJCb3ggPSBkb20uZ2V0QkJveCgpXG4gICAgICAgIHBvc1ggPSBiYXNlVHJhbnNmb3JtLmUgKyByZWZCQm94LnggLSBiYXNlQkJveC54XG4gICAgICAgIHBvc1kgPSBiYXNlVHJhbnNmb3JtLmYgKyByZWZCQm94LnkgLSBiYXNlQkJveC55XG4gICAgICAgIG9wYWNpdHkgPSBwYXJzZUZsb2F0KHN0eWxlcy5vcGFjaXR5IHx8ICcxJykgKiAxMDBcbiAgICB9XG4gICAgaXRlbXMucHVzaCh7XG4gICAgICAgIHR5OiBcInRyXCIsXG4gICAgICAgIHA6IHtcbiAgICAgICAgICAgIGs6IFtcbiAgICAgICAgICAgICAgICBwb3NYLFxuICAgICAgICAgICAgICAgIHBvc1lcbiAgICAgICAgICAgIF1cbiAgICAgICAgfSxcbiAgICAgICAgYToge1xuICAgICAgICAgICAgazogW1xuICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgXVxuICAgICAgICB9LFxuICAgICAgICBzOiB7XG4gICAgICAgICAgICBrOiBbXG4gICAgICAgICAgICAgICAgMTAwLFxuICAgICAgICAgICAgICAgIDEwMFxuICAgICAgICAgICAgXVxuICAgICAgICB9LFxuICAgICAgICByOiB7XG4gICAgICAgICAgICBrOiAwXG4gICAgICAgIH0sXG4gICAgICAgIG86IHtcbiAgICAgICAgICAgIGs6IG9wYWNpdHlcbiAgICAgICAgfSxcbiAgICAgICAgc2s6IHtcbiAgICAgICAgICAgIGs6IDBcbiAgICAgICAgfSxcbiAgICAgICAgc2E6IHtcbiAgICAgICAgICAgIGs6IDBcbiAgICAgICAgfVxuICAgIH0pXG5cbn1cblxuZnVuY3Rpb24gcmVuZGVyR2x5cGgoZG9tOiBTVkdHcmFwaGljc0VsZW1lbnQsIGJhc2VEb20/OiBTVkdHcmFwaGljc0VsZW1lbnQpOiBHcm91cFNoYXBlW10ge1xuICAgIGNvbnN0IGdyb3VwOiBHcm91cFNoYXBlID0ge1xuICAgICAgICB0eTogXCJnclwiLFxuICAgICAgICBpdDogW10sXG4gICAgICAgIGJtOiAwLFxuICAgICAgICBoZDogZmFsc2VcbiAgICB9XG4gICAgY29uc3QgcG9zdEFjdGlvbnMgPSAocGF0aE1ha2VyOiBQYXRoTWFrZXIpID0+IHtcbiAgICAgICAgcGF0aE1ha2VyLnVuaWZvcm0oKVxuICAgICAgICBncm91cC5pdCEucHVzaCh7XG4gICAgICAgICAgICB0eTogJ3NoJyxcbiAgICAgICAgICAgIGtzOiB7XG4gICAgICAgICAgICAgICAgazogcGF0aE1ha2VyLnBhdGgsXG4gICAgICAgICAgICAgICAgYTogMFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICAgIG5tOiBkb20uaWQsXG4gICAgICAgICAgICBoZDogZmFsc2VcbiAgICAgICAgfSlcbiAgICAgICAgY29uc3Qgc3R5bGVzID0gd2luZG93LmdldENvbXB1dGVkU3R5bGUoZG9tKVxuICAgICAgICBhZGRWaXN1YWxFbmNvZGluZ3MoZ3JvdXAuaXQhIGFzIFZpc3VhbEdyb3VwSXRlbVtdLCBzdHlsZXMsIGRvbSwgYmFzZURvbSlcbiAgICB9XG4gICAgaWYgKGRvbSBpbnN0YW5jZW9mIFNWR0NpcmNsZUVsZW1lbnQpIHtcbiAgICAgICAgY29uc3Qgc3ZnTGVuZ3RoID0gZG9tLnIuYmFzZVZhbFxuICAgICAgICBzdmdMZW5ndGguY29udmVydFRvU3BlY2lmaWVkVW5pdHMoU1ZHTGVuZ3RoLlNWR19MRU5HVEhUWVBFX1BYKVxuICAgICAgICBjb25zdCByID0gc3ZnTGVuZ3RoLnZhbHVlSW5TcGVjaWZpZWRVbml0c1xuICAgICAgICBjb25zdCBwYXRoTWFrZXIgPSBuZXcgUGF0aE1ha2VyKClcbiAgICAgICAgcGF0aE1ha2VyLm1vdmVUbyhyLCAwKVxuICAgICAgICBwYXRoTWFrZXIuYXJjVG8ociwgciwgMCwgMSwgMCwgciwgMiAqIHIpXG4gICAgICAgIHBhdGhNYWtlci5hcmNUbyhyLCByLCAwLCAxLCAwLCByLCAwKVxuICAgICAgICBwYXRoTWFrZXIuY2xvc2VQYXRoKClcbiAgICAgICAgcG9zdEFjdGlvbnMocGF0aE1ha2VyKVxuICAgIH0gZWxzZSBpZiAoZG9tIGluc3RhbmNlb2YgU1ZHRWxsaXBzZUVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgbWFwS2V5OiAoJ3J4JyB8ICdyeScpW10gPSBbJ3J4JywgJ3J5J11cbiAgICAgICAgY29uc3QgW3J4LCByeV0gPSBtYXBLZXkubWFwKGtleSA9PiB7XG4gICAgICAgICAgICBjb25zdCBzdmdMZW5ndGggPSBkb21ba2V5XS5iYXNlVmFsXG4gICAgICAgICAgICBzdmdMZW5ndGguY29udmVydFRvU3BlY2lmaWVkVW5pdHMoU1ZHTGVuZ3RoLlNWR19MRU5HVEhUWVBFX1BYKVxuICAgICAgICAgICAgcmV0dXJuIHN2Z0xlbmd0aC52YWx1ZUluU3BlY2lmaWVkVW5pdHNcbiAgICAgICAgfSlcbiAgICAgICAgY29uc3QgcGF0aE1ha2VyID0gbmV3IFBhdGhNYWtlcigpXG4gICAgICAgIHBhdGhNYWtlci5tb3ZlVG8ocngsIDApXG4gICAgICAgIHBhdGhNYWtlci5hcmNUbyhyeCwgcnksIDAsIDEsIDAsIHJ4LCAyICogcnkpXG4gICAgICAgIHBhdGhNYWtlci5hcmNUbyhyeCwgcnksIDAsIDEsIDAsIHJ4LCAwKVxuICAgICAgICBwYXRoTWFrZXIuY2xvc2VQYXRoKClcbiAgICAgICAgcG9zdEFjdGlvbnMocGF0aE1ha2VyKVxuICAgIH0gZWxzZSBpZiAoZG9tIGluc3RhbmNlb2YgU1ZHTGluZUVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgbWFwS2V5OiAoJ3gxJyB8ICd4MicgfCAneTEnIHwgJ3kyJylbXSA9IFsneDEnLCAneDInLCAneTEnLCAneTInXVxuICAgICAgICBjb25zdCBbeDEsIHgyLCB5MSwgeTJdID0gbWFwS2V5Lm1hcChrZXkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3ZnTGVuZ3RoID0gZG9tW2tleV0uYmFzZVZhbFxuICAgICAgICAgICAgc3ZnTGVuZ3RoLmNvbnZlcnRUb1NwZWNpZmllZFVuaXRzKFNWR0xlbmd0aC5TVkdfTEVOR1RIVFlQRV9QWClcbiAgICAgICAgICAgIHJldHVybiBzdmdMZW5ndGgudmFsdWVJblNwZWNpZmllZFVuaXRzXG4gICAgICAgIH0pXG4gICAgICAgIGNvbnN0IG9mZnNldFggPSBNYXRoLm1pbih4MSwgeDIpXG4gICAgICAgIGNvbnN0IG9mZnNldFkgPSBNYXRoLm1pbih5MSwgeTIpXG4gICAgICAgIGNvbnN0IHBhdGhNYWtlciA9IG5ldyBQYXRoTWFrZXIoKVxuICAgICAgICBwYXRoTWFrZXIubW92ZVRvKHgxIC0gb2Zmc2V0WCwgeTEgLSBvZmZzZXRZKVxuICAgICAgICBwYXRoTWFrZXIubGluZVRvKHgyIC0gb2Zmc2V0WCwgeTIgLSBvZmZzZXRZKVxuICAgICAgICBwb3N0QWN0aW9ucyhwYXRoTWFrZXIpXG4gICAgfSBlbHNlIGlmIChkb20gaW5zdGFuY2VvZiBTVkdQYXRoRWxlbWVudCkge1xuICAgICAgICBjb25zdCBwYXRoRGF0YSA9IGRvbS5nZXRBdHRyaWJ1dGUoJ2QnKSB8fCAnJ1xuICAgICAgICBjb25zdCBwYXRoTWFrZXIgPSBuZXcgUGF0aE1ha2VyKHBhdGhEYXRhKVxuICAgICAgICBwb3N0QWN0aW9ucyhwYXRoTWFrZXIpXG4gICAgfSBlbHNlIGlmIChkb20gaW5zdGFuY2VvZiBTVkdQb2x5Z29uRWxlbWVudCB8fCBkb20gaW5zdGFuY2VvZiBTVkdQb2x5bGluZUVsZW1lbnQpIHtcbiAgICAgICAgY29uc3QgcG9pbnRzID0gZG9tLnBvaW50c1xuICAgICAgICBpZiAocG9pbnRzLmxlbmd0aCkge1xuICAgICAgICAgICAgY29uc3QgaXRlcmFibGVQb2ludHM6IERPTVBvaW50W10gPSBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChwb2ludHMpXG4gICAgICAgICAgICBjb25zdCBvZmZzZXRYID0gaXRlcmFibGVQb2ludHMucmVkdWNlKChwLCB2KSA9PiBNYXRoLm1pbihwLCB2LngpLCAwKVxuICAgICAgICAgICAgY29uc3Qgb2Zmc2V0WSA9IGl0ZXJhYmxlUG9pbnRzLnJlZHVjZSgocCwgdikgPT4gTWF0aC5taW4ocCwgdi55KSwgMClcbiAgICAgICAgICAgIGNvbnN0IHBhdGhNYWtlciA9IG5ldyBQYXRoTWFrZXIoKVxuICAgICAgICAgICAgcGF0aE1ha2VyLm1vdmVUbyhwb2ludHNbMF0ueCAtIG9mZnNldFgsIHBvaW50c1swXS55IC0gb2Zmc2V0WSlcbiAgICAgICAgICAgIGl0ZXJhYmxlUG9pbnRzLmZvckVhY2goKHYsIGkpID0+IHtcbiAgICAgICAgICAgICAgICBpZiAoaSA8PSAwKSByZXR1cm5cbiAgICAgICAgICAgICAgICBwYXRoTWFrZXIubGluZVRvKHYueCAtIG9mZnNldFgsIHYueSAtIG9mZnNldFkpXG4gICAgICAgICAgICB9KVxuICAgICAgICAgICAgaWYgKGRvbSBpbnN0YW5jZW9mIFNWR1BvbHlnb25FbGVtZW50KSB7XG4gICAgICAgICAgICAgICAgcGF0aE1ha2VyLmNsb3NlUGF0aCgpXG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBwb3N0QWN0aW9ucyhwYXRoTWFrZXIpXG4gICAgICAgIH1cbiAgICB9IGVsc2UgaWYgKGRvbSBpbnN0YW5jZW9mIFNWR1JlY3RFbGVtZW50KSB7XG4gICAgICAgIGNvbnN0IG1hcEtleTogKCd3aWR0aCcgfCAnaGVpZ2h0JylbXSA9IFsnd2lkdGgnLCAnaGVpZ2h0J11cbiAgICAgICAgY29uc3QgW3dpZHRoLCBoZWlnaHRdID0gbWFwS2V5Lm1hcChrZXkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgc3ZnTGVuZ3RoID0gZG9tW2tleV0uYmFzZVZhbFxuICAgICAgICAgICAgc3ZnTGVuZ3RoLmNvbnZlcnRUb1NwZWNpZmllZFVuaXRzKFNWR0xlbmd0aC5TVkdfTEVOR1RIVFlQRV9QWClcbiAgICAgICAgICAgIHJldHVybiBzdmdMZW5ndGgudmFsdWVJblNwZWNpZmllZFVuaXRzXG4gICAgICAgIH0pXG4gICAgICAgIGNvbnN0IHBhdGhNYWtlciA9IG5ldyBQYXRoTWFrZXIoKVxuICAgICAgICBwYXRoTWFrZXIubW92ZVRvKDAsIDApXG4gICAgICAgIHBhdGhNYWtlci5saW5lVG8od2lkdGgsIDApXG4gICAgICAgIHBhdGhNYWtlci5saW5lVG8od2lkdGgsIGhlaWdodClcbiAgICAgICAgcGF0aE1ha2VyLmxpbmVUbygwLCBoZWlnaHQpXG4gICAgICAgIHBhdGhNYWtlci5jbG9zZVBhdGgoKVxuICAgICAgICBwb3N0QWN0aW9ucyhwYXRoTWFrZXIpXG4gICAgfSBlbHNlIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihkb20pXG4gICAgICAgIHRocm93IG5ldyBFcnJvcignTm8gaW1wbGVtZW50YXRpb24gZm91bmQgZm9yIHN2ZyBncmFwaGljcyBlbGVtZW50LicpXG4gICAgfVxuICAgIHJldHVybiBbZ3JvdXBdXG59XG5cbmZ1bmN0aW9uIHJlbmRlckdyb3VwKGRvbTogU1ZHR0VsZW1lbnQsIGJhc2VEb20/OiBTVkdHcmFwaGljc0VsZW1lbnQpOiBHcm91cFNoYXBlW10ge1xuICAgIGxldCBpdGVtczogR3JvdXBTaGFwZVtdID0gW11cbiAgICBkb20uY2hpbGROb2Rlcy5mb3JFYWNoKG5vZGUgPT4ge1xuICAgICAgICBpZiAobm9kZSBpbnN0YW5jZW9mIFNWR0dyYXBoaWNzRWxlbWVudCkge1xuICAgICAgICAgICAgaXRlbXMgPSByZW5kZXIobm9kZSwgYmFzZURvbSB8fCBkb20pLmNvbmNhdChpdGVtcylcbiAgICAgICAgfVxuICAgIH0pXG4gICAgcmV0dXJuIGl0ZW1zXG59XG5cbmV4cG9ydCBmdW5jdGlvbiByZW5kZXJQbGFpbkdseXBoKHR5cGU6ICdyZWN0JyB8ICdlbGxpcHNlJywgYXJnczogbnVtYmVyW10pOiBHcm91cFNoYXBlIHtcbiAgICBjb25zdCBncm91cDogR3JvdXBTaGFwZSA9IHtcbiAgICAgICAgdHk6IFwiZ3JcIixcbiAgICAgICAgaXQ6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICB0eTogJ3NoJyxcbiAgICAgICAgICAgICAgICBrczoge1xuICAgICAgICAgICAgICAgICAgICBrOiBudWxsLFxuICAgICAgICAgICAgICAgICAgICBhOiAwXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBoZDogZmFsc2VcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHk6ICdzdCcsXG4gICAgICAgICAgICAgICAgYzoge1xuICAgICAgICAgICAgICAgICAgICBrOiBbMSwgMSwgMSwgMV1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHc6IHtcbiAgICAgICAgICAgICAgICAgICAgazogMVxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbzoge1xuICAgICAgICAgICAgICAgICAgICBrOiAxMDBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIGxjOiBlbmNvZGVMaW5lQ2FwKCdidXR0JyksXG4gICAgICAgICAgICAgICAgbGo6IGVuY29kZUxpbmVKb2luKCdtaXRlcicpXG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAge1xuICAgICAgICAgICAgICAgIHR5OiAnZmwnLFxuICAgICAgICAgICAgICAgIGM6IHtcbiAgICAgICAgICAgICAgICAgICAgazogWzEsIDEsIDEsIDFdXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBvOiB7XG4gICAgICAgICAgICAgICAgICAgIGs6IDEwMFxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgICAgdHk6ICd0cicsXG4gICAgICAgICAgICAgICAgcDoge1xuICAgICAgICAgICAgICAgICAgICBrOiBbXG4gICAgICAgICAgICAgICAgICAgICAgICAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgMFxuICAgICAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgICBhOiB7XG4gICAgICAgICAgICAgICAgICAgIGs6IFtcbiAgICAgICAgICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgICAgICAgICAwXG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHM6IHtcbiAgICAgICAgICAgICAgICAgICAgazogW1xuICAgICAgICAgICAgICAgICAgICAgICAgMTAwLFxuICAgICAgICAgICAgICAgICAgICAgICAgMTAwXG4gICAgICAgICAgICAgICAgICAgIF1cbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHI6IHtcbiAgICAgICAgICAgICAgICAgICAgazogMFxuICAgICAgICAgICAgICAgIH0sXG4gICAgICAgICAgICAgICAgbzoge1xuICAgICAgICAgICAgICAgICAgICBrOiAxMDBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNrOiB7XG4gICAgICAgICAgICAgICAgICAgIGs6IDBcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHNhOiB7XG4gICAgICAgICAgICAgICAgICAgIGs6IDBcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIGJtOiAwLFxuICAgICAgICBoZDogZmFsc2VcbiAgICB9XG4gICAgY29uc3QgcGF0aE1ha2VyID0gbmV3IFBhdGhNYWtlcigpXG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICAgIGNhc2UgJ3JlY3QnOlxuICAgICAgICAgICAgcGF0aE1ha2VyLm1vdmVUbygwLCAwKVxuICAgICAgICAgICAgcGF0aE1ha2VyLmxpbmVUbyhhcmdzWzBdLCAwKVxuICAgICAgICAgICAgcGF0aE1ha2VyLmxpbmVUbyhhcmdzWzBdLCBhcmdzWzFdKVxuICAgICAgICAgICAgcGF0aE1ha2VyLmxpbmVUbygwLCBhcmdzWzFdKVxuICAgICAgICAgICAgcGF0aE1ha2VyLmNsb3NlUGF0aCgpXG4gICAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlICdlbGxpcHNlJzpcbiAgICAgICAgICAgIHBhdGhNYWtlci5tb3ZlVG8oYXJnc1swXSwgMClcbiAgICAgICAgICAgIHBhdGhNYWtlci5hcmNUbyhhcmdzWzBdLCBhcmdzWzFdLCAwLCAxLCAwLCBhcmdzWzBdLCAyICogYXJnc1sxXSlcbiAgICAgICAgICAgIHBhdGhNYWtlci5hcmNUbyhhcmdzWzBdLCBhcmdzWzFdLCAwLCAxLCAwLCBhcmdzWzBdLCAwKVxuICAgICAgICAgICAgcGF0aE1ha2VyLmNsb3NlUGF0aCgpXG4gICAgfVxuICAgIHBhdGhNYWtlci51bmlmb3JtKCk7XG4gICAgKGdyb3VwLml0IVswXSBhcyBQYXRoU2hhcGUpLmtzIS5rID0gcGF0aE1ha2VyLnBhdGhcbiAgICByZXR1cm4gZ3JvdXBcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlclRleHQoZG9tOiBTVkdUZXh0RWxlbWVudCwgZm9udExpc3Q/OiBGb250cyk6IFtUZXh0RGF0YSwgRm9udDFdIHtcbiAgICBjb25zdCBjb21wdXRlZFN0eWxlID0gZ2V0Q29tcHV0ZWRTdHlsZShkb20pXG4gICAgY29uc3QgZm9udFNpemUgPSBwYXJzZUZsb2F0KGNvbXB1dGVkU3R5bGUuZm9udFNpemUpLFxuICAgICAgICBmb250RmFtaWx5ID0gY29tcHV0ZWRTdHlsZS5mb250RmFtaWx5LnNwbGl0KCcsJylbMF0udHJpbSgpLFxuICAgICAgICBmb250U3R5bGUgPSBjb21wdXRlZFN0eWxlLmZvbnRTdHlsZSxcbiAgICAgICAgZm9udFdlaWdodCA9IGNvbXB1dGVkU3R5bGUuZm9udFdlaWdodCxcbiAgICAgICAgZm9udENvbG9yID0gKGNvbXB1dGVkU3R5bGUuZmlsbCB8fCAncmdiKDAsMCwwKScpLnNwbGl0KCcoJylbMV0uc3BsaXQoJyknKVswXS5zcGxpdCgnLCcpLm1hcChpID0+IHBhcnNlSW50KGkpIC8gMjU1KSxcbiAgICAgICAgdGV4dEFuY2hvciA9IGNvbXB1dGVkU3R5bGUudGV4dEFuY2hvclxuICAgIGxldCBmb250TmFtZSA9IHV1aWQoKVxuICAgIGlmIChmb250TGlzdCkge1xuICAgICAgICBjb25zdCBmb250RXhpc3QgPSBmb250TGlzdC5saXN0IS5maWx0ZXIoZm9udCA9PiBmb250LmZGYW1pbHkgPT0gZm9udEZhbWlseSAmJiBmb250LmZTdHlsZSA9PSBmb250U3R5bGUgJiYgZm9udC5mV2VpZ2h0ID09IGZvbnRXZWlnaHQpXG4gICAgICAgIGlmIChmb250RXhpc3QubGVuZ3RoKVxuICAgICAgICAgICAgZm9udE5hbWUgPSBmb250RXhpc3RbMF0uZk5hbWUhXG4gICAgfVxuICAgIGNvbnN0IHRleHREYXRhOiBUZXh0RGF0YSA9IHtcbiAgICAgICAgZDoge1xuICAgICAgICAgICAgazogW1xuICAgICAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgICAgICAgdDogMCxcbiAgICAgICAgICAgICAgICAgICAgczoge1xuICAgICAgICAgICAgICAgICAgICAgICAgczogZm9udFNpemUsXG4gICAgICAgICAgICAgICAgICAgICAgICBmOiBmb250TmFtZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHQ6IGRvbS5pbm5lckhUTUwsXG4gICAgICAgICAgICAgICAgICAgICAgICBqOiBlbmNvZGVUZXh0QW5jaG9yKHRleHRBbmNob3IpLFxuICAgICAgICAgICAgICAgICAgICAgICAgdHI6IDAsXG4gICAgICAgICAgICAgICAgICAgICAgICBsczogMCxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZjOiBmb250Q29sb3JcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIF1cbiAgICAgICAgfSxcbiAgICAgICAgcDoge30sXG4gICAgICAgIG06IHtcbiAgICAgICAgICAgIGE6IHtcbiAgICAgICAgICAgICAgICBrOiBbXG4gICAgICAgICAgICAgICAgICAgIDAsXG4gICAgICAgICAgICAgICAgICAgIDBcbiAgICAgICAgICAgICAgICBdXG4gICAgICAgICAgICB9XG4gICAgICAgIH0sXG4gICAgICAgIGE6IFtdXG4gICAgfVxuICAgIGNvbnN0IGZvbnREZWY6IEZvbnQxID0ge1xuICAgICAgICBmRmFtaWx5OiBmb250RmFtaWx5LFxuICAgICAgICBmV2VpZ2h0OiBgJHtmb250V2VpZ2h0fWAsXG4gICAgICAgIGZTdHlsZTogZm9udFN0eWxlLFxuICAgICAgICBmTmFtZTogZm9udE5hbWVcbiAgICB9XG4gICAgcmV0dXJuIFt0ZXh0RGF0YSwgZm9udERlZl1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHJlbmRlckltYWdlKGRvbTogU1ZHSW1hZ2VFbGVtZW50LCBhc3NldExpc3Q/OiBBc3NldHMpOiBbUmVmZXJlbmNlSUQsIEltYWdlQXNzZXRdIHtcbiAgICBsZXQgaWQgPSB1dWlkKClcbiAgICBjb25zdCBkb21IZWlnaHRWYWwgPSBkb20uaGVpZ2h0LmJhc2VWYWxcbiAgICBkb21IZWlnaHRWYWwuY29udmVydFRvU3BlY2lmaWVkVW5pdHMoU1ZHTGVuZ3RoLlNWR19MRU5HVEhUWVBFX1BYKVxuICAgIGNvbnN0IGRvbVdpZHRoVmFsID0gZG9tLndpZHRoLmJhc2VWYWxcbiAgICBkb21XaWR0aFZhbC5jb252ZXJ0VG9TcGVjaWZpZWRVbml0cyhTVkdMZW5ndGguU1ZHX0xFTkdUSFRZUEVfUFgpXG4gICAgY29uc3QgY2FudmFzID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJylcbiAgICBjb25zdCBjdHggPSBjYW52YXMuZ2V0Q29udGV4dCgnMmQnKVxuXG4gICAgY2FudmFzLndpZHRoID0gZG9tV2lkdGhWYWwudmFsdWVJblNwZWNpZmllZFVuaXRzICogM1xuICAgIGNhbnZhcy5oZWlnaHQgPSBkb21IZWlnaHRWYWwudmFsdWVJblNwZWNpZmllZFVuaXRzICogM1xuICAgIGN0eCEuZHJhd0ltYWdlKGRvbSwgMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KVxuXG4gICAgY29uc3QgZGF0YVVybCA9IGNhbnZhcy50b0RhdGFVUkwoKVxuICAgIGlmIChhc3NldExpc3QpIHtcbiAgICAgICAgY29uc3QgYXNzZXRFeGlzdCA9IGFzc2V0TGlzdCEuZmlsdGVyKGFzc2V0ID0+IGFzc2V0LnAgPT0gZGF0YVVybClcbiAgICAgICAgaWYgKGFzc2V0RXhpc3QubGVuZ3RoKVxuICAgICAgICAgICAgaWQgPSBhc3NldEV4aXN0WzBdLmlkIVxuICAgIH1cbiAgICBjb25zdCBhc3NldCA9IHtcbiAgICAgICAgaDogZG9tSGVpZ2h0VmFsLnZhbHVlSW5TcGVjaWZpZWRVbml0cyxcbiAgICAgICAgdzogZG9tV2lkdGhWYWwudmFsdWVJblNwZWNpZmllZFVuaXRzLFxuICAgICAgICBpZCxcbiAgICAgICAgcDogZGF0YVVybCxcbiAgICAgICAgZTogMVxuICAgIH1cbiAgICByZXR1cm4gW2lkLCBhc3NldF1cbn0iXX0=","(typeof navigator !== \"undefined\") && (function (global, factory) {\n  typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n  typeof define === 'function' && define.amd ? define(factory) :\n  (global = typeof globalThis !== 'undefined' ? globalThis : global || self, global.lottie = factory());\n})(this, (function () { 'use strict';\n\n  var svgNS = 'http://www.w3.org/2000/svg';\n  var locationHref = '';\n  var _useWebWorker = false;\n  var initialDefaultFrame = -999999;\n\n  var setWebWorker = function setWebWorker(flag) {\n    _useWebWorker = !!flag;\n  };\n\n  var getWebWorker = function getWebWorker() {\n    return _useWebWorker;\n  };\n\n  var setLocationHref = function setLocationHref(value) {\n    locationHref = value;\n  };\n\n  var getLocationHref = function getLocationHref() {\n    return locationHref;\n  };\n\n  function createTag(type) {\n    // return {appendChild:function(){},setAttribute:function(){},style:{}}\n    return document.createElement(type);\n  }\n\n  function extendPrototype(sources, destination) {\n    var i;\n    var len = sources.length;\n    var sourcePrototype;\n\n    for (i = 0; i < len; i += 1) {\n      sourcePrototype = sources[i].prototype;\n\n      for (var attr in sourcePrototype) {\n        if (Object.prototype.hasOwnProperty.call(sourcePrototype, attr)) destination.prototype[attr] = sourcePrototype[attr];\n      }\n    }\n  }\n\n  function getDescriptor(object, prop) {\n    return Object.getOwnPropertyDescriptor(object, prop);\n  }\n\n  function createProxyFunction(prototype) {\n    function ProxyFunction() {}\n\n    ProxyFunction.prototype = prototype;\n    return ProxyFunction;\n  }\n\n  // import Howl from '../../3rd_party/howler';\n  var audioControllerFactory = function () {\n    function AudioController(audioFactory) {\n      this.audios = [];\n      this.audioFactory = audioFactory;\n      this._volume = 1;\n      this._isMuted = false;\n    }\n\n    AudioController.prototype = {\n      addAudio: function addAudio(audio) {\n        this.audios.push(audio);\n      },\n      pause: function pause() {\n        var i;\n        var len = this.audios.length;\n\n        for (i = 0; i < len; i += 1) {\n          this.audios[i].pause();\n        }\n      },\n      resume: function resume() {\n        var i;\n        var len = this.audios.length;\n\n        for (i = 0; i < len; i += 1) {\n          this.audios[i].resume();\n        }\n      },\n      setRate: function setRate(rateValue) {\n        var i;\n        var len = this.audios.length;\n\n        for (i = 0; i < len; i += 1) {\n          this.audios[i].setRate(rateValue);\n        }\n      },\n      createAudio: function createAudio(assetPath) {\n        if (this.audioFactory) {\n          return this.audioFactory(assetPath);\n        }\n\n        if (window.Howl) {\n          return new window.Howl({\n            src: [assetPath]\n          });\n        }\n\n        return {\n          isPlaying: false,\n          play: function play() {\n            this.isPlaying = true;\n          },\n          seek: function seek() {\n            this.isPlaying = false;\n          },\n          playing: function playing() {},\n          rate: function rate() {},\n          setVolume: function setVolume() {}\n        };\n      },\n      setAudioFactory: function setAudioFactory(audioFactory) {\n        this.audioFactory = audioFactory;\n      },\n      setVolume: function setVolume(value) {\n        this._volume = value;\n\n        this._updateVolume();\n      },\n      mute: function mute() {\n        this._isMuted = true;\n\n        this._updateVolume();\n      },\n      unmute: function unmute() {\n        this._isMuted = false;\n\n        this._updateVolume();\n      },\n      getVolume: function getVolume() {\n        return this._volume;\n      },\n      _updateVolume: function _updateVolume() {\n        var i;\n        var len = this.audios.length;\n\n        for (i = 0; i < len; i += 1) {\n          this.audios[i].volume(this._volume * (this._isMuted ? 0 : 1));\n        }\n      }\n    };\n    return function () {\n      return new AudioController();\n    };\n  }();\n\n  var createTypedArray = function () {\n    function createRegularArray(type, len) {\n      var i = 0;\n      var arr = [];\n      var value;\n\n      switch (type) {\n        case 'int16':\n        case 'uint8c':\n          value = 1;\n          break;\n\n        default:\n          value = 1.1;\n          break;\n      }\n\n      for (i = 0; i < len; i += 1) {\n        arr.push(value);\n      }\n\n      return arr;\n    }\n\n    function createTypedArrayFactory(type, len) {\n      if (type === 'float32') {\n        return new Float32Array(len);\n      }\n\n      if (type === 'int16') {\n        return new Int16Array(len);\n      }\n\n      if (type === 'uint8c') {\n        return new Uint8ClampedArray(len);\n      }\n\n      return createRegularArray(type, len);\n    }\n\n    if (typeof Uint8ClampedArray === 'function' && typeof Float32Array === 'function') {\n      return createTypedArrayFactory;\n    }\n\n    return createRegularArray;\n  }();\n\n  function createSizedArray(len) {\n    return Array.apply(null, {\n      length: len\n    });\n  }\n\n  function _typeof$6(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof$6 = function _typeof(obj) { return typeof obj; }; } else { _typeof$6 = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof$6(obj); }\n  var subframeEnabled = true;\n  var expressionsPlugin = null;\n  var idPrefix$1 = '';\n  var isSafari = /^((?!chrome|android).)*safari/i.test(navigator.userAgent);\n  var _shouldRoundValues = false;\n  var bmPow = Math.pow;\n  var bmSqrt = Math.sqrt;\n  var bmFloor = Math.floor;\n  var bmMax = Math.max;\n  var bmMin = Math.min;\n  var BMMath = {};\n\n  (function () {\n    var propertyNames = ['abs', 'acos', 'acosh', 'asin', 'asinh', 'atan', 'atanh', 'atan2', 'ceil', 'cbrt', 'expm1', 'clz32', 'cos', 'cosh', 'exp', 'floor', 'fround', 'hypot', 'imul', 'log', 'log1p', 'log2', 'log10', 'max', 'min', 'pow', 'random', 'round', 'sign', 'sin', 'sinh', 'sqrt', 'tan', 'tanh', 'trunc', 'E', 'LN10', 'LN2', 'LOG10E', 'LOG2E', 'PI', 'SQRT1_2', 'SQRT2'];\n    var i;\n    var len = propertyNames.length;\n\n    for (i = 0; i < len; i += 1) {\n      BMMath[propertyNames[i]] = Math[propertyNames[i]];\n    }\n  })();\n\n  function ProjectInterface$1() {\n    return {};\n  }\n\n  BMMath.random = Math.random;\n\n  BMMath.abs = function (val) {\n    var tOfVal = _typeof$6(val);\n\n    if (tOfVal === 'object' && val.length) {\n      var absArr = createSizedArray(val.length);\n      var i;\n      var len = val.length;\n\n      for (i = 0; i < len; i += 1) {\n        absArr[i] = Math.abs(val[i]);\n      }\n\n      return absArr;\n    }\n\n    return Math.abs(val);\n  };\n\n  var defaultCurveSegments = 150;\n  var degToRads = Math.PI / 180;\n  var roundCorner = 0.5519;\n\n  function roundValues(flag) {\n    _shouldRoundValues = !!flag;\n  }\n\n  function bmRnd(value) {\n    if (_shouldRoundValues) {\n      return Math.round(value);\n    }\n\n    return value;\n  }\n\n  function styleDiv(element) {\n    element.style.position = 'absolute';\n    element.style.top = 0;\n    element.style.left = 0;\n    element.style.display = 'block';\n    element.style.transformOrigin = '0 0';\n    element.style.webkitTransformOrigin = '0 0';\n    element.style.backfaceVisibility = 'visible';\n    element.style.webkitBackfaceVisibility = 'visible';\n    element.style.transformStyle = 'preserve-3d';\n    element.style.webkitTransformStyle = 'preserve-3d';\n    element.style.mozTransformStyle = 'preserve-3d';\n  }\n\n  function BMEnterFrameEvent(type, currentTime, totalTime, frameMultiplier) {\n    this.type = type;\n    this.currentTime = currentTime;\n    this.totalTime = totalTime;\n    this.direction = frameMultiplier < 0 ? -1 : 1;\n  }\n\n  function BMCompleteEvent(type, frameMultiplier) {\n    this.type = type;\n    this.direction = frameMultiplier < 0 ? -1 : 1;\n  }\n\n  function BMCompleteLoopEvent(type, totalLoops, currentLoop, frameMultiplier) {\n    this.type = type;\n    this.currentLoop = currentLoop;\n    this.totalLoops = totalLoops;\n    this.direction = frameMultiplier < 0 ? -1 : 1;\n  }\n\n  function BMSegmentStartEvent(type, firstFrame, totalFrames) {\n    this.type = type;\n    this.firstFrame = firstFrame;\n    this.totalFrames = totalFrames;\n  }\n\n  function BMDestroyEvent(type, target) {\n    this.type = type;\n    this.target = target;\n  }\n\n  function BMRenderFrameErrorEvent(nativeError, currentTime) {\n    this.type = 'renderFrameError';\n    this.nativeError = nativeError;\n    this.currentTime = currentTime;\n  }\n\n  function BMConfigErrorEvent(nativeError) {\n    this.type = 'configError';\n    this.nativeError = nativeError;\n  }\n\n  function BMAnimationConfigErrorEvent(type, nativeError) {\n    this.type = type;\n    this.nativeError = nativeError;\n  }\n\n  var createElementID = function () {\n    var _count = 0;\n    return function createID() {\n      _count += 1;\n      return idPrefix$1 + '__lottie_element_' + _count;\n    };\n  }();\n\n  function HSVtoRGB(h, s, v) {\n    var r;\n    var g;\n    var b;\n    var i;\n    var f;\n    var p;\n    var q;\n    var t;\n    i = Math.floor(h * 6);\n    f = h * 6 - i;\n    p = v * (1 - s);\n    q = v * (1 - f * s);\n    t = v * (1 - (1 - f) * s);\n\n    switch (i % 6) {\n      case 0:\n        r = v;\n        g = t;\n        b = p;\n        break;\n\n      case 1:\n        r = q;\n        g = v;\n        b = p;\n        break;\n\n      case 2:\n        r = p;\n        g = v;\n        b = t;\n        break;\n\n      case 3:\n        r = p;\n        g = q;\n        b = v;\n        break;\n\n      case 4:\n        r = t;\n        g = p;\n        b = v;\n        break;\n\n      case 5:\n        r = v;\n        g = p;\n        b = q;\n        break;\n\n      default:\n        break;\n    }\n\n    return [r, g, b];\n  }\n\n  function RGBtoHSV(r, g, b) {\n    var max = Math.max(r, g, b);\n    var min = Math.min(r, g, b);\n    var d = max - min;\n    var h;\n    var s = max === 0 ? 0 : d / max;\n    var v = max / 255;\n\n    switch (max) {\n      case min:\n        h = 0;\n        break;\n\n      case r:\n        h = g - b + d * (g < b ? 6 : 0);\n        h /= 6 * d;\n        break;\n\n      case g:\n        h = b - r + d * 2;\n        h /= 6 * d;\n        break;\n\n      case b:\n        h = r - g + d * 4;\n        h /= 6 * d;\n        break;\n\n      default:\n        break;\n    }\n\n    return [h, s, v];\n  }\n\n  function addSaturationToRGB(color, offset) {\n    var hsv = RGBtoHSV(color[0] * 255, color[1] * 255, color[2] * 255);\n    hsv[1] += offset;\n\n    if (hsv[1] > 1) {\n      hsv[1] = 1;\n    } else if (hsv[1] <= 0) {\n      hsv[1] = 0;\n    }\n\n    return HSVtoRGB(hsv[0], hsv[1], hsv[2]);\n  }\n\n  function addBrightnessToRGB(color, offset) {\n    var hsv = RGBtoHSV(color[0] * 255, color[1] * 255, color[2] * 255);\n    hsv[2] += offset;\n\n    if (hsv[2] > 1) {\n      hsv[2] = 1;\n    } else if (hsv[2] < 0) {\n      hsv[2] = 0;\n    }\n\n    return HSVtoRGB(hsv[0], hsv[1], hsv[2]);\n  }\n\n  function addHueToRGB(color, offset) {\n    var hsv = RGBtoHSV(color[0] * 255, color[1] * 255, color[2] * 255);\n    hsv[0] += offset / 360;\n\n    if (hsv[0] > 1) {\n      hsv[0] -= 1;\n    } else if (hsv[0] < 0) {\n      hsv[0] += 1;\n    }\n\n    return HSVtoRGB(hsv[0], hsv[1], hsv[2]);\n  }\n\n  var rgbToHex = function () {\n    var colorMap = [];\n    var i;\n    var hex;\n\n    for (i = 0; i < 256; i += 1) {\n      hex = i.toString(16);\n      colorMap[i] = hex.length === 1 ? '0' + hex : hex;\n    }\n\n    return function (r, g, b) {\n      if (r < 0) {\n        r = 0;\n      }\n\n      if (g < 0) {\n        g = 0;\n      }\n\n      if (b < 0) {\n        b = 0;\n      }\n\n      return '#' + colorMap[r] + colorMap[g] + colorMap[b];\n    };\n  }();\n\n  var setSubframeEnabled = function setSubframeEnabled(flag) {\n    subframeEnabled = !!flag;\n  };\n\n  var getSubframeEnabled = function getSubframeEnabled() {\n    return subframeEnabled;\n  };\n\n  var setExpressionsPlugin = function setExpressionsPlugin(value) {\n    expressionsPlugin = value;\n  };\n\n  var getExpressionsPlugin = function getExpressionsPlugin() {\n    return expressionsPlugin;\n  };\n\n  var setDefaultCurveSegments = function setDefaultCurveSegments(value) {\n    defaultCurveSegments = value;\n  };\n\n  var getDefaultCurveSegments = function getDefaultCurveSegments() {\n    return defaultCurveSegments;\n  };\n\n  var setIdPrefix = function setIdPrefix(value) {\n    idPrefix$1 = value;\n  };\n\n  var getIdPrefix = function getIdPrefix() {\n    return idPrefix$1;\n  };\n\n  function createNS(type) {\n    // return {appendChild:function(){},setAttribute:function(){},style:{}}\n    return document.createElementNS(svgNS, type);\n  }\n\n  function _typeof$5(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof$5 = function _typeof(obj) { return typeof obj; }; } else { _typeof$5 = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof$5(obj); }\n\n  var dataManager = function () {\n    var _counterId = 1;\n    var processes = [];\n    var workerFn;\n    var workerInstance;\n    var workerProxy = {\n      onmessage: function onmessage() {},\n      postMessage: function postMessage(path) {\n        workerFn({\n          data: path\n        });\n      }\n    };\n    var _workerSelf = {\n      postMessage: function postMessage(data) {\n        workerProxy.onmessage({\n          data: data\n        });\n      }\n    };\n\n    function createWorker(fn) {\n      if (window.Worker && window.Blob && getWebWorker()) {\n        var blob = new Blob(['var _workerSelf = self; self.onmessage = ', fn.toString()], {\n          type: 'text/javascript'\n        }); // var blob = new Blob(['self.onmessage = ', fn.toString()], { type: 'text/javascript' });\n\n        var url = URL.createObjectURL(blob);\n        return new Worker(url);\n      }\n\n      workerFn = fn;\n      return workerProxy;\n    }\n\n    function setupWorker() {\n      if (!workerInstance) {\n        workerInstance = createWorker(function workerStart(e) {\n          function dataFunctionManager() {\n            function completeLayers(layers, comps) {\n              var layerData;\n              var i;\n              var len = layers.length;\n              var j;\n              var jLen;\n              var k;\n              var kLen;\n\n              for (i = 0; i < len; i += 1) {\n                layerData = layers[i];\n\n                if ('ks' in layerData && !layerData.completed) {\n                  layerData.completed = true;\n\n                  if (layerData.tt) {\n                    layers[i - 1].td = layerData.tt;\n                  }\n\n                  if (layerData.hasMask) {\n                    var maskProps = layerData.masksProperties;\n                    jLen = maskProps.length;\n\n                    for (j = 0; j < jLen; j += 1) {\n                      if (maskProps[j].pt.k.i) {\n                        convertPathsToAbsoluteValues(maskProps[j].pt.k);\n                      } else {\n                        kLen = maskProps[j].pt.k.length;\n\n                        for (k = 0; k < kLen; k += 1) {\n                          if (maskProps[j].pt.k[k].s) {\n                            convertPathsToAbsoluteValues(maskProps[j].pt.k[k].s[0]);\n                          }\n\n                          if (maskProps[j].pt.k[k].e) {\n                            convertPathsToAbsoluteValues(maskProps[j].pt.k[k].e[0]);\n                          }\n                        }\n                      }\n                    }\n                  }\n\n                  if (layerData.ty === 0) {\n                    layerData.layers = findCompLayers(layerData.refId, comps);\n                    completeLayers(layerData.layers, comps);\n                  } else if (layerData.ty === 4) {\n                    completeShapes(layerData.shapes);\n                  } else if (layerData.ty === 5) {\n                    completeText(layerData);\n                  }\n                }\n              }\n            }\n\n            function completeChars(chars, assets) {\n              if (chars) {\n                var i = 0;\n                var len = chars.length;\n\n                for (i = 0; i < len; i += 1) {\n                  if (chars[i].t === 1) {\n                    // var compData = findComp(chars[i].data.refId, assets);\n                    chars[i].data.layers = findCompLayers(chars[i].data.refId, assets); // chars[i].data.ip = 0;\n                    // chars[i].data.op = 99999;\n                    // chars[i].data.st = 0;\n                    // chars[i].data.sr = 1;\n                    // chars[i].w = compData.w;\n                    // chars[i].data.ks = {\n                    //   a: { k: [0, 0, 0], a: 0 },\n                    //   p: { k: [0, -compData.h, 0], a: 0 },\n                    //   r: { k: 0, a: 0 },\n                    //   s: { k: [100, 100], a: 0 },\n                    //   o: { k: 100, a: 0 },\n                    // };\n\n                    completeLayers(chars[i].data.layers, assets);\n                  }\n                }\n              }\n            }\n\n            function findComp(id, comps) {\n              var i = 0;\n              var len = comps.length;\n\n              while (i < len) {\n                if (comps[i].id === id) {\n                  return comps[i];\n                }\n\n                i += 1;\n              }\n\n              return null;\n            }\n\n            function findCompLayers(id, comps) {\n              var comp = findComp(id, comps);\n\n              if (comp) {\n                if (!comp.layers.__used) {\n                  comp.layers.__used = true;\n                  return comp.layers;\n                }\n\n                return JSON.parse(JSON.stringify(comp.layers));\n              }\n\n              return null;\n            }\n\n            function completeShapes(arr) {\n              var i;\n              var len = arr.length;\n              var j;\n              var jLen;\n\n              for (i = len - 1; i >= 0; i -= 1) {\n                if (arr[i].ty === 'sh') {\n                  if (arr[i].ks.k.i) {\n                    convertPathsToAbsoluteValues(arr[i].ks.k);\n                  } else {\n                    jLen = arr[i].ks.k.length;\n\n                    for (j = 0; j < jLen; j += 1) {\n                      if (arr[i].ks.k[j].s) {\n                        convertPathsToAbsoluteValues(arr[i].ks.k[j].s[0]);\n                      }\n\n                      if (arr[i].ks.k[j].e) {\n                        convertPathsToAbsoluteValues(arr[i].ks.k[j].e[0]);\n                      }\n                    }\n                  }\n                } else if (arr[i].ty === 'gr') {\n                  completeShapes(arr[i].it);\n                }\n              }\n            }\n\n            function convertPathsToAbsoluteValues(path) {\n              var i;\n              var len = path.i.length;\n\n              for (i = 0; i < len; i += 1) {\n                path.i[i][0] += path.v[i][0];\n                path.i[i][1] += path.v[i][1];\n                path.o[i][0] += path.v[i][0];\n                path.o[i][1] += path.v[i][1];\n              }\n            }\n\n            function checkVersion(minimum, animVersionString) {\n              var animVersion = animVersionString ? animVersionString.split('.') : [100, 100, 100];\n\n              if (minimum[0] > animVersion[0]) {\n                return true;\n              }\n\n              if (animVersion[0] > minimum[0]) {\n                return false;\n              }\n\n              if (minimum[1] > animVersion[1]) {\n                return true;\n              }\n\n              if (animVersion[1] > minimum[1]) {\n                return false;\n              }\n\n              if (minimum[2] > animVersion[2]) {\n                return true;\n              }\n\n              if (animVersion[2] > minimum[2]) {\n                return false;\n              }\n\n              return null;\n            }\n\n            var checkText = function () {\n              var minimumVersion = [4, 4, 14];\n\n              function updateTextLayer(textLayer) {\n                var documentData = textLayer.t.d;\n                textLayer.t.d = {\n                  k: [{\n                    s: documentData,\n                    t: 0\n                  }]\n                };\n              }\n\n              function iterateLayers(layers) {\n                var i;\n                var len = layers.length;\n\n                for (i = 0; i < len; i += 1) {\n                  if (layers[i].ty === 5) {\n                    updateTextLayer(layers[i]);\n                  }\n                }\n              }\n\n              return function (animationData) {\n                if (checkVersion(minimumVersion, animationData.v)) {\n                  iterateLayers(animationData.layers);\n\n                  if (animationData.assets) {\n                    var i;\n                    var len = animationData.assets.length;\n\n                    for (i = 0; i < len; i += 1) {\n                      if (animationData.assets[i].layers) {\n                        iterateLayers(animationData.assets[i].layers);\n                      }\n                    }\n                  }\n                }\n              };\n            }();\n\n            var checkChars = function () {\n              var minimumVersion = [4, 7, 99];\n              return function (animationData) {\n                if (animationData.chars && !checkVersion(minimumVersion, animationData.v)) {\n                  var i;\n                  var len = animationData.chars.length;\n\n                  for (i = 0; i < len; i += 1) {\n                    var charData = animationData.chars[i];\n\n                    if (charData.data && charData.data.shapes) {\n                      completeShapes(charData.data.shapes);\n                      charData.data.ip = 0;\n                      charData.data.op = 99999;\n                      charData.data.st = 0;\n                      charData.data.sr = 1;\n                      charData.data.ks = {\n                        p: {\n                          k: [0, 0],\n                          a: 0\n                        },\n                        s: {\n                          k: [100, 100],\n                          a: 0\n                        },\n                        a: {\n                          k: [0, 0],\n                          a: 0\n                        },\n                        r: {\n                          k: 0,\n                          a: 0\n                        },\n                        o: {\n                          k: 100,\n                          a: 0\n                        }\n                      };\n\n                      if (!animationData.chars[i].t) {\n                        charData.data.shapes.push({\n                          ty: 'no'\n                        });\n                        charData.data.shapes[0].it.push({\n                          p: {\n                            k: [0, 0],\n                            a: 0\n                          },\n                          s: {\n                            k: [100, 100],\n                            a: 0\n                          },\n                          a: {\n                            k: [0, 0],\n                            a: 0\n                          },\n                          r: {\n                            k: 0,\n                            a: 0\n                          },\n                          o: {\n                            k: 100,\n                            a: 0\n                          },\n                          sk: {\n                            k: 0,\n                            a: 0\n                          },\n                          sa: {\n                            k: 0,\n                            a: 0\n                          },\n                          ty: 'tr'\n                        });\n                      }\n                    }\n                  }\n                }\n              };\n            }();\n\n            var checkPathProperties = function () {\n              var minimumVersion = [5, 7, 15];\n\n              function updateTextLayer(textLayer) {\n                var pathData = textLayer.t.p;\n\n                if (typeof pathData.a === 'number') {\n                  pathData.a = {\n                    a: 0,\n                    k: pathData.a\n                  };\n                }\n\n                if (typeof pathData.p === 'number') {\n                  pathData.p = {\n                    a: 0,\n                    k: pathData.p\n                  };\n                }\n\n                if (typeof pathData.r === 'number') {\n                  pathData.r = {\n                    a: 0,\n                    k: pathData.r\n                  };\n                }\n              }\n\n              function iterateLayers(layers) {\n                var i;\n                var len = layers.length;\n\n                for (i = 0; i < len; i += 1) {\n                  if (layers[i].ty === 5) {\n                    updateTextLayer(layers[i]);\n                  }\n                }\n              }\n\n              return function (animationData) {\n                if (checkVersion(minimumVersion, animationData.v)) {\n                  iterateLayers(animationData.layers);\n\n                  if (animationData.assets) {\n                    var i;\n                    var len = animationData.assets.length;\n\n                    for (i = 0; i < len; i += 1) {\n                      if (animationData.assets[i].layers) {\n                        iterateLayers(animationData.assets[i].layers);\n                      }\n                    }\n                  }\n                }\n              };\n            }();\n\n            var checkColors = function () {\n              var minimumVersion = [4, 1, 9];\n\n              function iterateShapes(shapes) {\n                var i;\n                var len = shapes.length;\n                var j;\n                var jLen;\n\n                for (i = 0; i < len; i += 1) {\n                  if (shapes[i].ty === 'gr') {\n                    iterateShapes(shapes[i].it);\n                  } else if (shapes[i].ty === 'fl' || shapes[i].ty === 'st') {\n                    if (shapes[i].c.k && shapes[i].c.k[0].i) {\n                      jLen = shapes[i].c.k.length;\n\n                      for (j = 0; j < jLen; j += 1) {\n                        if (shapes[i].c.k[j].s) {\n                          shapes[i].c.k[j].s[0] /= 255;\n                          shapes[i].c.k[j].s[1] /= 255;\n                          shapes[i].c.k[j].s[2] /= 255;\n                          shapes[i].c.k[j].s[3] /= 255;\n                        }\n\n                        if (shapes[i].c.k[j].e) {\n                          shapes[i].c.k[j].e[0] /= 255;\n                          shapes[i].c.k[j].e[1] /= 255;\n                          shapes[i].c.k[j].e[2] /= 255;\n                          shapes[i].c.k[j].e[3] /= 255;\n                        }\n                      }\n                    } else {\n                      shapes[i].c.k[0] /= 255;\n                      shapes[i].c.k[1] /= 255;\n                      shapes[i].c.k[2] /= 255;\n                      shapes[i].c.k[3] /= 255;\n                    }\n                  }\n                }\n              }\n\n              function iterateLayers(layers) {\n                var i;\n                var len = layers.length;\n\n                for (i = 0; i < len; i += 1) {\n                  if (layers[i].ty === 4) {\n                    iterateShapes(layers[i].shapes);\n                  }\n                }\n              }\n\n              return function (animationData) {\n                if (checkVersion(minimumVersion, animationData.v)) {\n                  iterateLayers(animationData.layers);\n\n                  if (animationData.assets) {\n                    var i;\n                    var len = animationData.assets.length;\n\n                    for (i = 0; i < len; i += 1) {\n                      if (animationData.assets[i].layers) {\n                        iterateLayers(animationData.assets[i].layers);\n                      }\n                    }\n                  }\n                }\n              };\n            }();\n\n            var checkShapes = function () {\n              var minimumVersion = [4, 4, 18];\n\n              function completeClosingShapes(arr) {\n                var i;\n                var len = arr.length;\n                var j;\n                var jLen;\n\n                for (i = len - 1; i >= 0; i -= 1) {\n                  if (arr[i].ty === 'sh') {\n                    if (arr[i].ks.k.i) {\n                      arr[i].ks.k.c = arr[i].closed;\n                    } else {\n                      jLen = arr[i].ks.k.length;\n\n                      for (j = 0; j < jLen; j += 1) {\n                        if (arr[i].ks.k[j].s) {\n                          arr[i].ks.k[j].s[0].c = arr[i].closed;\n                        }\n\n                        if (arr[i].ks.k[j].e) {\n                          arr[i].ks.k[j].e[0].c = arr[i].closed;\n                        }\n                      }\n                    }\n                  } else if (arr[i].ty === 'gr') {\n                    completeClosingShapes(arr[i].it);\n                  }\n                }\n              }\n\n              function iterateLayers(layers) {\n                var layerData;\n                var i;\n                var len = layers.length;\n                var j;\n                var jLen;\n                var k;\n                var kLen;\n\n                for (i = 0; i < len; i += 1) {\n                  layerData = layers[i];\n\n                  if (layerData.hasMask) {\n                    var maskProps = layerData.masksProperties;\n                    jLen = maskProps.length;\n\n                    for (j = 0; j < jLen; j += 1) {\n                      if (maskProps[j].pt.k.i) {\n                        maskProps[j].pt.k.c = maskProps[j].cl;\n                      } else {\n                        kLen = maskProps[j].pt.k.length;\n\n                        for (k = 0; k < kLen; k += 1) {\n                          if (maskProps[j].pt.k[k].s) {\n                            maskProps[j].pt.k[k].s[0].c = maskProps[j].cl;\n                          }\n\n                          if (maskProps[j].pt.k[k].e) {\n                            maskProps[j].pt.k[k].e[0].c = maskProps[j].cl;\n                          }\n                        }\n                      }\n                    }\n                  }\n\n                  if (layerData.ty === 4) {\n                    completeClosingShapes(layerData.shapes);\n                  }\n                }\n              }\n\n              return function (animationData) {\n                if (checkVersion(minimumVersion, animationData.v)) {\n                  iterateLayers(animationData.layers);\n\n                  if (animationData.assets) {\n                    var i;\n                    var len = animationData.assets.length;\n\n                    for (i = 0; i < len; i += 1) {\n                      if (animationData.assets[i].layers) {\n                        iterateLayers(animationData.assets[i].layers);\n                      }\n                    }\n                  }\n                }\n              };\n            }();\n\n            function completeData(animationData) {\n              if (animationData.__complete) {\n                return;\n              }\n\n              checkColors(animationData);\n              checkText(animationData);\n              checkChars(animationData);\n              checkPathProperties(animationData);\n              checkShapes(animationData);\n              completeLayers(animationData.layers, animationData.assets);\n              completeChars(animationData.chars, animationData.assets);\n              animationData.__complete = true;\n            }\n\n            function completeText(data) {\n              if (data.t.a.length === 0 && !('m' in data.t.p)) {// data.singleShape = true;\n              }\n            }\n\n            var moduleOb = {};\n            moduleOb.completeData = completeData;\n            moduleOb.checkColors = checkColors;\n            moduleOb.checkChars = checkChars;\n            moduleOb.checkPathProperties = checkPathProperties;\n            moduleOb.checkShapes = checkShapes;\n            moduleOb.completeLayers = completeLayers;\n            return moduleOb;\n          }\n\n          if (!_workerSelf.dataManager) {\n            _workerSelf.dataManager = dataFunctionManager();\n          }\n\n          if (!_workerSelf.assetLoader) {\n            _workerSelf.assetLoader = function () {\n              function formatResponse(xhr) {\n                // using typeof doubles the time of execution of this method,\n                // so if available, it's better to use the header to validate the type\n                var contentTypeHeader = xhr.getResponseHeader('content-type');\n\n                if (contentTypeHeader && xhr.responseType === 'json' && contentTypeHeader.indexOf('json') !== -1) {\n                  return xhr.response;\n                }\n\n                if (xhr.response && _typeof$5(xhr.response) === 'object') {\n                  return xhr.response;\n                }\n\n                if (xhr.response && typeof xhr.response === 'string') {\n                  return JSON.parse(xhr.response);\n                }\n\n                if (xhr.responseText) {\n                  return JSON.parse(xhr.responseText);\n                }\n\n                return null;\n              }\n\n              function loadAsset(path, fullPath, callback, errorCallback) {\n                var response;\n                var xhr = new XMLHttpRequest(); // set responseType after calling open or IE will break.\n\n                try {\n                  // This crashes on Android WebView prior to KitKat\n                  xhr.responseType = 'json';\n                } catch (err) {} // eslint-disable-line no-empty\n\n\n                xhr.onreadystatechange = function () {\n                  if (xhr.readyState === 4) {\n                    if (xhr.status === 200) {\n                      response = formatResponse(xhr);\n                      callback(response);\n                    } else {\n                      try {\n                        response = formatResponse(xhr);\n                        callback(response);\n                      } catch (err) {\n                        if (errorCallback) {\n                          errorCallback(err);\n                        }\n                      }\n                    }\n                  }\n                };\n\n                try {\n                  xhr.open('GET', path, true);\n                } catch (error) {\n                  xhr.open('GET', fullPath + '/' + path, true);\n                }\n\n                xhr.send();\n              }\n\n              return {\n                load: loadAsset\n              };\n            }();\n          }\n\n          if (e.data.type === 'loadAnimation') {\n            _workerSelf.assetLoader.load(e.data.path, e.data.fullPath, function (data) {\n              _workerSelf.dataManager.completeData(data);\n\n              _workerSelf.postMessage({\n                id: e.data.id,\n                payload: data,\n                status: 'success'\n              });\n            }, function () {\n              _workerSelf.postMessage({\n                id: e.data.id,\n                status: 'error'\n              });\n            });\n          } else if (e.data.type === 'complete') {\n            var animation = e.data.animation;\n\n            _workerSelf.dataManager.completeData(animation);\n\n            _workerSelf.postMessage({\n              id: e.data.id,\n              payload: animation,\n              status: 'success'\n            });\n          } else if (e.data.type === 'loadData') {\n            _workerSelf.assetLoader.load(e.data.path, e.data.fullPath, function (data) {\n              _workerSelf.postMessage({\n                id: e.data.id,\n                payload: data,\n                status: 'success'\n              });\n            }, function () {\n              _workerSelf.postMessage({\n                id: e.data.id,\n                status: 'error'\n              });\n            });\n          }\n        });\n\n        workerInstance.onmessage = function (event) {\n          var data = event.data;\n          var id = data.id;\n          var process = processes[id];\n          processes[id] = null;\n\n          if (data.status === 'success') {\n            process.onComplete(data.payload);\n          } else if (process.onError) {\n            process.onError();\n          }\n        };\n      }\n    }\n\n    function createProcess(onComplete, onError) {\n      _counterId += 1;\n      var id = 'processId_' + _counterId;\n      processes[id] = {\n        onComplete: onComplete,\n        onError: onError\n      };\n      return id;\n    }\n\n    function loadAnimation(path, onComplete, onError) {\n      setupWorker();\n      var processId = createProcess(onComplete, onError);\n      workerInstance.postMessage({\n        type: 'loadAnimation',\n        path: path,\n        fullPath: window.location.origin + window.location.pathname,\n        id: processId\n      });\n    }\n\n    function loadData(path, onComplete, onError) {\n      setupWorker();\n      var processId = createProcess(onComplete, onError);\n      workerInstance.postMessage({\n        type: 'loadData',\n        path: path,\n        fullPath: window.location.origin + window.location.pathname,\n        id: processId\n      });\n    }\n\n    function completeAnimation(anim, onComplete, onError) {\n      setupWorker();\n      var processId = createProcess(onComplete, onError);\n      workerInstance.postMessage({\n        type: 'complete',\n        animation: anim,\n        id: processId\n      });\n    }\n\n    return {\n      loadAnimation: loadAnimation,\n      loadData: loadData,\n      completeAnimation: completeAnimation\n    };\n  }();\n\n  var ImagePreloader = function () {\n    var proxyImage = function () {\n      var canvas = createTag('canvas');\n      canvas.width = 1;\n      canvas.height = 1;\n      var ctx = canvas.getContext('2d');\n      ctx.fillStyle = 'rgba(0,0,0,0)';\n      ctx.fillRect(0, 0, 1, 1);\n      return canvas;\n    }();\n\n    function imageLoaded() {\n      this.loadedAssets += 1;\n\n      if (this.loadedAssets === this.totalImages && this.loadedFootagesCount === this.totalFootages) {\n        if (this.imagesLoadedCb) {\n          this.imagesLoadedCb(null);\n        }\n      }\n    }\n\n    function footageLoaded() {\n      this.loadedFootagesCount += 1;\n\n      if (this.loadedAssets === this.totalImages && this.loadedFootagesCount === this.totalFootages) {\n        if (this.imagesLoadedCb) {\n          this.imagesLoadedCb(null);\n        }\n      }\n    }\n\n    function getAssetsPath(assetData, assetsPath, originalPath) {\n      var path = '';\n\n      if (assetData.e) {\n        path = assetData.p;\n      } else if (assetsPath) {\n        var imagePath = assetData.p;\n\n        if (imagePath.indexOf('images/') !== -1) {\n          imagePath = imagePath.split('/')[1];\n        }\n\n        path = assetsPath + imagePath;\n      } else {\n        path = originalPath;\n        path += assetData.u ? assetData.u : '';\n        path += assetData.p;\n      }\n\n      return path;\n    }\n\n    function testImageLoaded(img) {\n      var _count = 0;\n      var intervalId = setInterval(function () {\n        var box = img.getBBox();\n\n        if (box.width || _count > 500) {\n          this._imageLoaded();\n\n          clearInterval(intervalId);\n        }\n\n        _count += 1;\n      }.bind(this), 50);\n    }\n\n    function createImageData(assetData) {\n      var path = getAssetsPath(assetData, this.assetsPath, this.path);\n      var img = createNS('image');\n\n      if (isSafari) {\n        this.testImageLoaded(img);\n      } else {\n        img.addEventListener('load', this._imageLoaded, false);\n      }\n\n      img.addEventListener('error', function () {\n        ob.img = proxyImage;\n\n        this._imageLoaded();\n      }.bind(this), false);\n      img.setAttributeNS('http://www.w3.org/1999/xlink', 'href', path);\n\n      if (this._elementHelper.append) {\n        this._elementHelper.append(img);\n      } else {\n        this._elementHelper.appendChild(img);\n      }\n\n      var ob = {\n        img: img,\n        assetData: assetData\n      };\n      return ob;\n    }\n\n    function createImgData(assetData) {\n      var path = getAssetsPath(assetData, this.assetsPath, this.path);\n      var img = createTag('img');\n      img.crossOrigin = 'anonymous';\n      img.addEventListener('load', this._imageLoaded, false);\n      img.addEventListener('error', function () {\n        ob.img = proxyImage;\n\n        this._imageLoaded();\n      }.bind(this), false);\n      img.src = path;\n      var ob = {\n        img: img,\n        assetData: assetData\n      };\n      return ob;\n    }\n\n    function createFootageData(data) {\n      var ob = {\n        assetData: data\n      };\n      var path = getAssetsPath(data, this.assetsPath, this.path);\n      dataManager.loadData(path, function (footageData) {\n        ob.img = footageData;\n\n        this._footageLoaded();\n      }.bind(this), function () {\n        ob.img = {};\n\n        this._footageLoaded();\n      }.bind(this));\n      return ob;\n    }\n\n    function loadAssets(assets, cb) {\n      this.imagesLoadedCb = cb;\n      var i;\n      var len = assets.length;\n\n      for (i = 0; i < len; i += 1) {\n        if (!assets[i].layers) {\n          if (!assets[i].t || assets[i].t === 'seq') {\n            this.totalImages += 1;\n            this.images.push(this._createImageData(assets[i]));\n          } else if (assets[i].t === 3) {\n            this.totalFootages += 1;\n            this.images.push(this.createFootageData(assets[i]));\n          }\n        }\n      }\n    }\n\n    function setPath(path) {\n      this.path = path || '';\n    }\n\n    function setAssetsPath(path) {\n      this.assetsPath = path || '';\n    }\n\n    function getAsset(assetData) {\n      var i = 0;\n      var len = this.images.length;\n\n      while (i < len) {\n        if (this.images[i].assetData === assetData) {\n          return this.images[i].img;\n        }\n\n        i += 1;\n      }\n\n      return null;\n    }\n\n    function destroy() {\n      this.imagesLoadedCb = null;\n      this.images.length = 0;\n    }\n\n    function loadedImages() {\n      return this.totalImages === this.loadedAssets;\n    }\n\n    function loadedFootages() {\n      return this.totalFootages === this.loadedFootagesCount;\n    }\n\n    function setCacheType(type, elementHelper) {\n      if (type === 'svg') {\n        this._elementHelper = elementHelper;\n        this._createImageData = this.createImageData.bind(this);\n      } else {\n        this._createImageData = this.createImgData.bind(this);\n      }\n    }\n\n    function ImagePreloaderFactory() {\n      this._imageLoaded = imageLoaded.bind(this);\n      this._footageLoaded = footageLoaded.bind(this);\n      this.testImageLoaded = testImageLoaded.bind(this);\n      this.createFootageData = createFootageData.bind(this);\n      this.assetsPath = '';\n      this.path = '';\n      this.totalImages = 0;\n      this.totalFootages = 0;\n      this.loadedAssets = 0;\n      this.loadedFootagesCount = 0;\n      this.imagesLoadedCb = null;\n      this.images = [];\n    }\n\n    ImagePreloaderFactory.prototype = {\n      loadAssets: loadAssets,\n      setAssetsPath: setAssetsPath,\n      setPath: setPath,\n      loadedImages: loadedImages,\n      loadedFootages: loadedFootages,\n      destroy: destroy,\n      getAsset: getAsset,\n      createImgData: createImgData,\n      createImageData: createImageData,\n      imageLoaded: imageLoaded,\n      footageLoaded: footageLoaded,\n      setCacheType: setCacheType\n    };\n    return ImagePreloaderFactory;\n  }();\n\n  function BaseEvent() {}\n\n  BaseEvent.prototype = {\n    triggerEvent: function triggerEvent(eventName, args) {\n      if (this._cbs[eventName]) {\n        var callbacks = this._cbs[eventName];\n\n        for (var i = 0; i < callbacks.length; i += 1) {\n          callbacks[i](args);\n        }\n      }\n    },\n    addEventListener: function addEventListener(eventName, callback) {\n      if (!this._cbs[eventName]) {\n        this._cbs[eventName] = [];\n      }\n\n      this._cbs[eventName].push(callback);\n\n      return function () {\n        this.removeEventListener(eventName, callback);\n      }.bind(this);\n    },\n    removeEventListener: function removeEventListener(eventName, callback) {\n      if (!callback) {\n        this._cbs[eventName] = null;\n      } else if (this._cbs[eventName]) {\n        var i = 0;\n        var len = this._cbs[eventName].length;\n\n        while (i < len) {\n          if (this._cbs[eventName][i] === callback) {\n            this._cbs[eventName].splice(i, 1);\n\n            i -= 1;\n            len -= 1;\n          }\n\n          i += 1;\n        }\n\n        if (!this._cbs[eventName].length) {\n          this._cbs[eventName] = null;\n        }\n      }\n    }\n  };\n\n  var markerParser = function () {\n    function parsePayloadLines(payload) {\n      var lines = payload.split('\\r\\n');\n      var keys = {};\n      var line;\n      var keysCount = 0;\n\n      for (var i = 0; i < lines.length; i += 1) {\n        line = lines[i].split(':');\n\n        if (line.length === 2) {\n          keys[line[0]] = line[1].trim();\n          keysCount += 1;\n        }\n      }\n\n      if (keysCount === 0) {\n        throw new Error();\n      }\n\n      return keys;\n    }\n\n    return function (_markers) {\n      var markers = [];\n\n      for (var i = 0; i < _markers.length; i += 1) {\n        var _marker = _markers[i];\n        var markerData = {\n          time: _marker.tm,\n          duration: _marker.dr\n        };\n\n        try {\n          markerData.payload = JSON.parse(_markers[i].cm);\n        } catch (_) {\n          try {\n            markerData.payload = parsePayloadLines(_markers[i].cm);\n          } catch (__) {\n            markerData.payload = {\n              name: _markers[i].cm\n            };\n          }\n        }\n\n        markers.push(markerData);\n      }\n\n      return markers;\n    };\n  }();\n\n  var ProjectInterface = function () {\n    function registerComposition(comp) {\n      this.compositions.push(comp);\n    }\n\n    return function () {\n      function _thisProjectFunction(name) {\n        var i = 0;\n        var len = this.compositions.length;\n\n        while (i < len) {\n          if (this.compositions[i].data && this.compositions[i].data.nm === name) {\n            if (this.compositions[i].prepareFrame && this.compositions[i].data.xt) {\n              this.compositions[i].prepareFrame(this.currentFrame);\n            }\n\n            return this.compositions[i].compInterface;\n          }\n\n          i += 1;\n        }\n\n        return null;\n      }\n\n      _thisProjectFunction.compositions = [];\n      _thisProjectFunction.currentFrame = 0;\n      _thisProjectFunction.registerComposition = registerComposition;\n      return _thisProjectFunction;\n    };\n  }();\n\n  var renderers = {};\n\n  var registerRenderer = function registerRenderer(key, value) {\n    renderers[key] = value;\n  };\n\n  function getRenderer(key) {\n    return renderers[key];\n  }\n\n  function _typeof$4(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof$4 = function _typeof(obj) { return typeof obj; }; } else { _typeof$4 = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof$4(obj); }\n\n  var AnimationItem = function AnimationItem() {\n    this._cbs = [];\n    this.name = '';\n    this.path = '';\n    this.isLoaded = false;\n    this.currentFrame = 0;\n    this.currentRawFrame = 0;\n    this.firstFrame = 0;\n    this.totalFrames = 0;\n    this.frameRate = 0;\n    this.frameMult = 0;\n    this.playSpeed = 1;\n    this.playDirection = 1;\n    this.playCount = 0;\n    this.animationData = {};\n    this.assets = [];\n    this.isPaused = true;\n    this.autoplay = false;\n    this.loop = true;\n    this.renderer = null;\n    this.animationID = createElementID();\n    this.assetsPath = '';\n    this.timeCompleted = 0;\n    this.segmentPos = 0;\n    this.isSubframeEnabled = getSubframeEnabled();\n    this.segments = [];\n    this._idle = true;\n    this._completedLoop = false;\n    this.projectInterface = ProjectInterface();\n    this.imagePreloader = new ImagePreloader();\n    this.audioController = audioControllerFactory();\n    this.markers = [];\n    this.configAnimation = this.configAnimation.bind(this);\n    this.onSetupError = this.onSetupError.bind(this);\n    this.onSegmentComplete = this.onSegmentComplete.bind(this);\n    this.drawnFrameEvent = new BMEnterFrameEvent('drawnFrame', 0, 0, 0);\n  };\n\n  extendPrototype([BaseEvent], AnimationItem);\n\n  AnimationItem.prototype.setParams = function (params) {\n    if (params.wrapper || params.container) {\n      this.wrapper = params.wrapper || params.container;\n    }\n\n    var animType = 'svg';\n\n    if (params.animType) {\n      animType = params.animType;\n    } else if (params.renderer) {\n      animType = params.renderer;\n    }\n\n    var RendererClass = getRenderer(animType);\n    this.renderer = new RendererClass(this, params.rendererSettings);\n    this.imagePreloader.setCacheType(animType, this.renderer.globalData.defs);\n    this.renderer.setProjectInterface(this.projectInterface);\n    this.animType = animType;\n\n    if (params.loop === '' || params.loop === null || params.loop === undefined || params.loop === true) {\n      this.loop = true;\n    } else if (params.loop === false) {\n      this.loop = false;\n    } else {\n      this.loop = parseInt(params.loop, 10);\n    }\n\n    this.autoplay = 'autoplay' in params ? params.autoplay : true;\n    this.name = params.name ? params.name : '';\n    this.autoloadSegments = Object.prototype.hasOwnProperty.call(params, 'autoloadSegments') ? params.autoloadSegments : true;\n    this.assetsPath = params.assetsPath;\n    this.initialSegment = params.initialSegment;\n\n    if (params.audioFactory) {\n      this.audioController.setAudioFactory(params.audioFactory);\n    }\n\n    if (params.animationData) {\n      this.setupAnimation(params.animationData);\n    } else if (params.path) {\n      if (params.path.lastIndexOf('\\\\') !== -1) {\n        this.path = params.path.substr(0, params.path.lastIndexOf('\\\\') + 1);\n      } else {\n        this.path = params.path.substr(0, params.path.lastIndexOf('/') + 1);\n      }\n\n      this.fileName = params.path.substr(params.path.lastIndexOf('/') + 1);\n      this.fileName = this.fileName.substr(0, this.fileName.lastIndexOf('.json'));\n      dataManager.loadAnimation(params.path, this.configAnimation, this.onSetupError);\n    }\n  };\n\n  AnimationItem.prototype.onSetupError = function () {\n    this.trigger('data_failed');\n  };\n\n  AnimationItem.prototype.setupAnimation = function (data) {\n    dataManager.completeAnimation(data, this.configAnimation);\n  };\n\n  AnimationItem.prototype.setData = function (wrapper, animationData) {\n    if (animationData) {\n      if (_typeof$4(animationData) !== 'object') {\n        animationData = JSON.parse(animationData);\n      }\n    }\n\n    var params = {\n      wrapper: wrapper,\n      animationData: animationData\n    };\n    var wrapperAttributes = wrapper.attributes;\n    params.path = wrapperAttributes.getNamedItem('data-animation-path') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-animation-path').value : wrapperAttributes.getNamedItem('data-bm-path') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-bm-path').value : wrapperAttributes.getNamedItem('bm-path') ? wrapperAttributes.getNamedItem('bm-path').value : '';\n    params.animType = wrapperAttributes.getNamedItem('data-anim-type') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-anim-type').value : wrapperAttributes.getNamedItem('data-bm-type') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-bm-type').value : wrapperAttributes.getNamedItem('bm-type') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('bm-type').value : wrapperAttributes.getNamedItem('data-bm-renderer') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-bm-renderer').value : wrapperAttributes.getNamedItem('bm-renderer') ? wrapperAttributes.getNamedItem('bm-renderer').value : 'canvas';\n    var loop = wrapperAttributes.getNamedItem('data-anim-loop') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-anim-loop').value : wrapperAttributes.getNamedItem('data-bm-loop') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-bm-loop').value : wrapperAttributes.getNamedItem('bm-loop') ? wrapperAttributes.getNamedItem('bm-loop').value : '';\n\n    if (loop === 'false') {\n      params.loop = false;\n    } else if (loop === 'true') {\n      params.loop = true;\n    } else if (loop !== '') {\n      params.loop = parseInt(loop, 10);\n    }\n\n    var autoplay = wrapperAttributes.getNamedItem('data-anim-autoplay') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-anim-autoplay').value : wrapperAttributes.getNamedItem('data-bm-autoplay') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-bm-autoplay').value : wrapperAttributes.getNamedItem('bm-autoplay') ? wrapperAttributes.getNamedItem('bm-autoplay').value : true;\n    params.autoplay = autoplay !== 'false';\n    params.name = wrapperAttributes.getNamedItem('data-name') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-name').value : wrapperAttributes.getNamedItem('data-bm-name') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-bm-name').value : wrapperAttributes.getNamedItem('bm-name') ? wrapperAttributes.getNamedItem('bm-name').value : '';\n    var prerender = wrapperAttributes.getNamedItem('data-anim-prerender') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-anim-prerender').value : wrapperAttributes.getNamedItem('data-bm-prerender') // eslint-disable-line no-nested-ternary\n    ? wrapperAttributes.getNamedItem('data-bm-prerender').value : wrapperAttributes.getNamedItem('bm-prerender') ? wrapperAttributes.getNamedItem('bm-prerender').value : '';\n\n    if (prerender === 'false') {\n      params.prerender = false;\n    }\n\n    this.setParams(params);\n  };\n\n  AnimationItem.prototype.includeLayers = function (data) {\n    if (data.op > this.animationData.op) {\n      this.animationData.op = data.op;\n      this.totalFrames = Math.floor(data.op - this.animationData.ip);\n    }\n\n    var layers = this.animationData.layers;\n    var i;\n    var len = layers.length;\n    var newLayers = data.layers;\n    var j;\n    var jLen = newLayers.length;\n\n    for (j = 0; j < jLen; j += 1) {\n      i = 0;\n\n      while (i < len) {\n        if (layers[i].id === newLayers[j].id) {\n          layers[i] = newLayers[j];\n          break;\n        }\n\n        i += 1;\n      }\n    }\n\n    if (data.chars || data.fonts) {\n      this.renderer.globalData.fontManager.addChars(data.chars);\n      this.renderer.globalData.fontManager.addFonts(data.fonts, this.renderer.globalData.defs);\n    }\n\n    if (data.assets) {\n      len = data.assets.length;\n\n      for (i = 0; i < len; i += 1) {\n        this.animationData.assets.push(data.assets[i]);\n      }\n    }\n\n    this.animationData.__complete = false;\n    dataManager.completeAnimation(this.animationData, this.onSegmentComplete);\n  };\n\n  AnimationItem.prototype.onSegmentComplete = function (data) {\n    this.animationData = data;\n    var expressionsPlugin = getExpressionsPlugin();\n\n    if (expressionsPlugin) {\n      expressionsPlugin.initExpressions(this);\n    }\n\n    this.loadNextSegment();\n  };\n\n  AnimationItem.prototype.loadNextSegment = function () {\n    var segments = this.animationData.segments;\n\n    if (!segments || segments.length === 0 || !this.autoloadSegments) {\n      this.trigger('data_ready');\n      this.timeCompleted = this.totalFrames;\n      return;\n    }\n\n    var segment = segments.shift();\n    this.timeCompleted = segment.time * this.frameRate;\n    var segmentPath = this.path + this.fileName + '_' + this.segmentPos + '.json';\n    this.segmentPos += 1;\n    dataManager.loadData(segmentPath, this.includeLayers.bind(this), function () {\n      this.trigger('data_failed');\n    }.bind(this));\n  };\n\n  AnimationItem.prototype.loadSegments = function () {\n    var segments = this.animationData.segments;\n\n    if (!segments) {\n      this.timeCompleted = this.totalFrames;\n    }\n\n    this.loadNextSegment();\n  };\n\n  AnimationItem.prototype.imagesLoaded = function () {\n    this.trigger('loaded_images');\n    this.checkLoaded();\n  };\n\n  AnimationItem.prototype.preloadImages = function () {\n    this.imagePreloader.setAssetsPath(this.assetsPath);\n    this.imagePreloader.setPath(this.path);\n    this.imagePreloader.loadAssets(this.animationData.assets, this.imagesLoaded.bind(this));\n  };\n\n  AnimationItem.prototype.configAnimation = function (animData) {\n    if (!this.renderer) {\n      return;\n    }\n\n    try {\n      this.animationData = animData;\n\n      if (this.initialSegment) {\n        this.totalFrames = Math.floor(this.initialSegment[1] - this.initialSegment[0]);\n        this.firstFrame = Math.round(this.initialSegment[0]);\n      } else {\n        this.totalFrames = Math.floor(this.animationData.op - this.animationData.ip);\n        this.firstFrame = Math.round(this.animationData.ip);\n      }\n\n      this.renderer.configAnimation(animData);\n\n      if (!animData.assets) {\n        animData.assets = [];\n      }\n\n      this.assets = this.animationData.assets;\n      this.frameRate = this.animationData.fr;\n      this.frameMult = this.animationData.fr / 1000;\n      this.renderer.searchExtraCompositions(animData.assets);\n      this.markers = markerParser(animData.markers || []);\n      this.trigger('config_ready');\n      this.preloadImages();\n      this.loadSegments();\n      this.updaFrameModifier();\n      this.waitForFontsLoaded();\n\n      if (this.isPaused) {\n        this.audioController.pause();\n      }\n    } catch (error) {\n      this.triggerConfigError(error);\n    }\n  };\n\n  AnimationItem.prototype.waitForFontsLoaded = function () {\n    if (!this.renderer) {\n      return;\n    }\n\n    if (this.renderer.globalData.fontManager.isLoaded) {\n      this.checkLoaded();\n    } else {\n      setTimeout(this.waitForFontsLoaded.bind(this), 20);\n    }\n  };\n\n  AnimationItem.prototype.checkLoaded = function () {\n    if (!this.isLoaded && this.renderer.globalData.fontManager.isLoaded && (this.imagePreloader.loadedImages() || this.renderer.rendererType !== 'canvas') && this.imagePreloader.loadedFootages()) {\n      this.isLoaded = true;\n      var expressionsPlugin = getExpressionsPlugin();\n\n      if (expressionsPlugin) {\n        expressionsPlugin.initExpressions(this);\n      }\n\n      this.renderer.initItems();\n      setTimeout(function () {\n        this.trigger('DOMLoaded');\n      }.bind(this), 0);\n      this.gotoFrame();\n\n      if (this.autoplay) {\n        this.play();\n      }\n    }\n  };\n\n  AnimationItem.prototype.resize = function () {\n    this.renderer.updateContainerSize();\n  };\n\n  AnimationItem.prototype.setSubframe = function (flag) {\n    this.isSubframeEnabled = !!flag;\n  };\n\n  AnimationItem.prototype.gotoFrame = function () {\n    this.currentFrame = this.isSubframeEnabled ? this.currentRawFrame : ~~this.currentRawFrame; // eslint-disable-line no-bitwise\n\n    if (this.timeCompleted !== this.totalFrames && this.currentFrame > this.timeCompleted) {\n      this.currentFrame = this.timeCompleted;\n    }\n\n    this.trigger('enterFrame');\n    this.renderFrame();\n    this.trigger('drawnFrame');\n  };\n\n  AnimationItem.prototype.renderFrame = function () {\n    if (this.isLoaded === false || !this.renderer) {\n      return;\n    }\n\n    try {\n      this.renderer.renderFrame(this.currentFrame + this.firstFrame);\n    } catch (error) {\n      this.triggerRenderFrameError(error);\n    }\n  };\n\n  AnimationItem.prototype.play = function (name) {\n    if (name && this.name !== name) {\n      return;\n    }\n\n    if (this.isPaused === true) {\n      this.isPaused = false;\n      this.trigger('_pause');\n      this.audioController.resume();\n\n      if (this._idle) {\n        this._idle = false;\n        this.trigger('_active');\n      }\n    }\n  };\n\n  AnimationItem.prototype.pause = function (name) {\n    if (name && this.name !== name) {\n      return;\n    }\n\n    if (this.isPaused === false) {\n      this.isPaused = true;\n      this.trigger('_play');\n      this._idle = true;\n      this.trigger('_idle');\n      this.audioController.pause();\n    }\n  };\n\n  AnimationItem.prototype.togglePause = function (name) {\n    if (name && this.name !== name) {\n      return;\n    }\n\n    if (this.isPaused === true) {\n      this.play();\n    } else {\n      this.pause();\n    }\n  };\n\n  AnimationItem.prototype.stop = function (name) {\n    if (name && this.name !== name) {\n      return;\n    }\n\n    this.pause();\n    this.playCount = 0;\n    this._completedLoop = false;\n    this.setCurrentRawFrameValue(0);\n  };\n\n  AnimationItem.prototype.getMarkerData = function (markerName) {\n    var marker;\n\n    for (var i = 0; i < this.markers.length; i += 1) {\n      marker = this.markers[i];\n\n      if (marker.payload && marker.payload.name === markerName) {\n        return marker;\n      }\n    }\n\n    return null;\n  };\n\n  AnimationItem.prototype.goToAndStop = function (value, isFrame, name) {\n    if (name && this.name !== name) {\n      return;\n    }\n\n    var numValue = Number(value);\n\n    if (isNaN(numValue)) {\n      var marker = this.getMarkerData(value);\n\n      if (marker) {\n        this.goToAndStop(marker.time, true);\n      }\n    } else if (isFrame) {\n      this.setCurrentRawFrameValue(value);\n    } else {\n      this.setCurrentRawFrameValue(value * this.frameModifier);\n    }\n\n    this.pause();\n  };\n\n  AnimationItem.prototype.goToAndPlay = function (value, isFrame, name) {\n    if (name && this.name !== name) {\n      return;\n    }\n\n    var numValue = Number(value);\n\n    if (isNaN(numValue)) {\n      var marker = this.getMarkerData(value);\n\n      if (marker) {\n        if (!marker.duration) {\n          this.goToAndStop(marker.time, true);\n        } else {\n          this.playSegments([marker.time, marker.time + marker.duration], true);\n        }\n      }\n    } else {\n      this.goToAndStop(numValue, isFrame, name);\n    }\n\n    this.play();\n  };\n\n  AnimationItem.prototype.advanceTime = function (value) {\n    if (this.isPaused === true || this.isLoaded === false) {\n      return;\n    }\n\n    var nextValue = this.currentRawFrame + value * this.frameModifier;\n    var _isComplete = false; // Checking if nextValue > totalFrames - 1 for addressing non looping and looping animations.\n    // If animation won't loop, it should stop at totalFrames - 1. If it will loop it should complete the last frame and then loop.\n\n    if (nextValue >= this.totalFrames - 1 && this.frameModifier > 0) {\n      if (!this.loop || this.playCount === this.loop) {\n        if (!this.checkSegments(nextValue > this.totalFrames ? nextValue % this.totalFrames : 0)) {\n          _isComplete = true;\n          nextValue = this.totalFrames - 1;\n        }\n      } else if (nextValue >= this.totalFrames) {\n        this.playCount += 1;\n\n        if (!this.checkSegments(nextValue % this.totalFrames)) {\n          this.setCurrentRawFrameValue(nextValue % this.totalFrames);\n          this._completedLoop = true;\n          this.trigger('loopComplete');\n        }\n      } else {\n        this.setCurrentRawFrameValue(nextValue);\n      }\n    } else if (nextValue < 0) {\n      if (!this.checkSegments(nextValue % this.totalFrames)) {\n        if (this.loop && !(this.playCount-- <= 0 && this.loop !== true)) {\n          // eslint-disable-line no-plusplus\n          this.setCurrentRawFrameValue(this.totalFrames + nextValue % this.totalFrames);\n\n          if (!this._completedLoop) {\n            this._completedLoop = true;\n          } else {\n            this.trigger('loopComplete');\n          }\n        } else {\n          _isComplete = true;\n          nextValue = 0;\n        }\n      }\n    } else {\n      this.setCurrentRawFrameValue(nextValue);\n    }\n\n    if (_isComplete) {\n      this.setCurrentRawFrameValue(nextValue);\n      this.pause();\n      this.trigger('complete');\n    }\n  };\n\n  AnimationItem.prototype.adjustSegment = function (arr, offset) {\n    this.playCount = 0;\n\n    if (arr[1] < arr[0]) {\n      if (this.frameModifier > 0) {\n        if (this.playSpeed < 0) {\n          this.setSpeed(-this.playSpeed);\n        } else {\n          this.setDirection(-1);\n        }\n      }\n\n      this.totalFrames = arr[0] - arr[1];\n      this.timeCompleted = this.totalFrames;\n      this.firstFrame = arr[1];\n      this.setCurrentRawFrameValue(this.totalFrames - 0.001 - offset);\n    } else if (arr[1] > arr[0]) {\n      if (this.frameModifier < 0) {\n        if (this.playSpeed < 0) {\n          this.setSpeed(-this.playSpeed);\n        } else {\n          this.setDirection(1);\n        }\n      }\n\n      this.totalFrames = arr[1] - arr[0];\n      this.timeCompleted = this.totalFrames;\n      this.firstFrame = arr[0];\n      this.setCurrentRawFrameValue(0.001 + offset);\n    }\n\n    this.trigger('segmentStart');\n  };\n\n  AnimationItem.prototype.setSegment = function (init, end) {\n    var pendingFrame = -1;\n\n    if (this.isPaused) {\n      if (this.currentRawFrame + this.firstFrame < init) {\n        pendingFrame = init;\n      } else if (this.currentRawFrame + this.firstFrame > end) {\n        pendingFrame = end - init;\n      }\n    }\n\n    this.firstFrame = init;\n    this.totalFrames = end - init;\n    this.timeCompleted = this.totalFrames;\n\n    if (pendingFrame !== -1) {\n      this.goToAndStop(pendingFrame, true);\n    }\n  };\n\n  AnimationItem.prototype.playSegments = function (arr, forceFlag) {\n    if (forceFlag) {\n      this.segments.length = 0;\n    }\n\n    if (_typeof$4(arr[0]) === 'object') {\n      var i;\n      var len = arr.length;\n\n      for (i = 0; i < len; i += 1) {\n        this.segments.push(arr[i]);\n      }\n    } else {\n      this.segments.push(arr);\n    }\n\n    if (this.segments.length && forceFlag) {\n      this.adjustSegment(this.segments.shift(), 0);\n    }\n\n    if (this.isPaused) {\n      this.play();\n    }\n  };\n\n  AnimationItem.prototype.resetSegments = function (forceFlag) {\n    this.segments.length = 0;\n    this.segments.push([this.animationData.ip, this.animationData.op]);\n\n    if (forceFlag) {\n      this.checkSegments(0);\n    }\n  };\n\n  AnimationItem.prototype.checkSegments = function (offset) {\n    if (this.segments.length) {\n      this.adjustSegment(this.segments.shift(), offset);\n      return true;\n    }\n\n    return false;\n  };\n\n  AnimationItem.prototype.destroy = function (name) {\n    if (name && this.name !== name || !this.renderer) {\n      return;\n    }\n\n    this.renderer.destroy();\n    this.imagePreloader.destroy();\n    this.trigger('destroy');\n    this._cbs = null;\n    this.onEnterFrame = null;\n    this.onLoopComplete = null;\n    this.onComplete = null;\n    this.onSegmentStart = null;\n    this.onDestroy = null;\n    this.renderer = null;\n    this.renderer = null;\n    this.imagePreloader = null;\n    this.projectInterface = null;\n  };\n\n  AnimationItem.prototype.setCurrentRawFrameValue = function (value) {\n    this.currentRawFrame = value;\n    this.gotoFrame();\n  };\n\n  AnimationItem.prototype.setSpeed = function (val) {\n    this.playSpeed = val;\n    this.updaFrameModifier();\n  };\n\n  AnimationItem.prototype.setDirection = function (val) {\n    this.playDirection = val < 0 ? -1 : 1;\n    this.updaFrameModifier();\n  };\n\n  AnimationItem.prototype.setVolume = function (val, name) {\n    if (name && this.name !== name) {\n      return;\n    }\n\n    this.audioController.setVolume(val);\n  };\n\n  AnimationItem.prototype.getVolume = function () {\n    return this.audioController.getVolume();\n  };\n\n  AnimationItem.prototype.mute = function (name) {\n    if (name && this.name !== name) {\n      return;\n    }\n\n    this.audioController.mute();\n  };\n\n  AnimationItem.prototype.unmute = function (name) {\n    if (name && this.name !== name) {\n      return;\n    }\n\n    this.audioController.unmute();\n  };\n\n  AnimationItem.prototype.updaFrameModifier = function () {\n    this.frameModifier = this.frameMult * this.playSpeed * this.playDirection;\n    this.audioController.setRate(this.playSpeed * this.playDirection);\n  };\n\n  AnimationItem.prototype.getPath = function () {\n    return this.path;\n  };\n\n  AnimationItem.prototype.getAssetsPath = function (assetData) {\n    var path = '';\n\n    if (assetData.e) {\n      path = assetData.p;\n    } else if (this.assetsPath) {\n      var imagePath = assetData.p;\n\n      if (imagePath.indexOf('images/') !== -1) {\n        imagePath = imagePath.split('/')[1];\n      }\n\n      path = this.assetsPath + imagePath;\n    } else {\n      path = this.path;\n      path += assetData.u ? assetData.u : '';\n      path += assetData.p;\n    }\n\n    return path;\n  };\n\n  AnimationItem.prototype.getAssetData = function (id) {\n    var i = 0;\n    var len = this.assets.length;\n\n    while (i < len) {\n      if (id === this.assets[i].id) {\n        return this.assets[i];\n      }\n\n      i += 1;\n    }\n\n    return null;\n  };\n\n  AnimationItem.prototype.hide = function () {\n    this.renderer.hide();\n  };\n\n  AnimationItem.prototype.show = function () {\n    this.renderer.show();\n  };\n\n  AnimationItem.prototype.getDuration = function (isFrame) {\n    return isFrame ? this.totalFrames : this.totalFrames / this.frameRate;\n  };\n\n  AnimationItem.prototype.updateDocumentData = function (path, documentData, index) {\n    try {\n      var element = this.renderer.getElementByPath(path);\n      element.updateDocumentData(documentData, index);\n    } catch (error) {// TODO: decide how to handle catch case\n    }\n  };\n\n  AnimationItem.prototype.trigger = function (name) {\n    if (this._cbs && this._cbs[name]) {\n      switch (name) {\n        case 'enterFrame':\n          this.triggerEvent(name, new BMEnterFrameEvent(name, this.currentFrame, this.totalFrames, this.frameModifier));\n          break;\n\n        case 'drawnFrame':\n          this.drawnFrameEvent.currentTime = this.currentFrame;\n          this.drawnFrameEvent.totalTime = this.totalFrames;\n          this.drawnFrameEvent.direction = this.frameModifier;\n          this.triggerEvent(name, this.drawnFrameEvent);\n          break;\n\n        case 'loopComplete':\n          this.triggerEvent(name, new BMCompleteLoopEvent(name, this.loop, this.playCount, this.frameMult));\n          break;\n\n        case 'complete':\n          this.triggerEvent(name, new BMCompleteEvent(name, this.frameMult));\n          break;\n\n        case 'segmentStart':\n          this.triggerEvent(name, new BMSegmentStartEvent(name, this.firstFrame, this.totalFrames));\n          break;\n\n        case 'destroy':\n          this.triggerEvent(name, new BMDestroyEvent(name, this));\n          break;\n\n        default:\n          this.triggerEvent(name);\n      }\n    }\n\n    if (name === 'enterFrame' && this.onEnterFrame) {\n      this.onEnterFrame.call(this, new BMEnterFrameEvent(name, this.currentFrame, this.totalFrames, this.frameMult));\n    }\n\n    if (name === 'loopComplete' && this.onLoopComplete) {\n      this.onLoopComplete.call(this, new BMCompleteLoopEvent(name, this.loop, this.playCount, this.frameMult));\n    }\n\n    if (name === 'complete' && this.onComplete) {\n      this.onComplete.call(this, new BMCompleteEvent(name, this.frameMult));\n    }\n\n    if (name === 'segmentStart' && this.onSegmentStart) {\n      this.onSegmentStart.call(this, new BMSegmentStartEvent(name, this.firstFrame, this.totalFrames));\n    }\n\n    if (name === 'destroy' && this.onDestroy) {\n      this.onDestroy.call(this, new BMDestroyEvent(name, this));\n    }\n  };\n\n  AnimationItem.prototype.triggerRenderFrameError = function (nativeError) {\n    var error = new BMRenderFrameErrorEvent(nativeError, this.currentFrame);\n    this.triggerEvent('error', error);\n\n    if (this.onError) {\n      this.onError.call(this, error);\n    }\n  };\n\n  AnimationItem.prototype.triggerConfigError = function (nativeError) {\n    var error = new BMConfigErrorEvent(nativeError, this.currentFrame);\n    this.triggerEvent('error', error);\n\n    if (this.onError) {\n      this.onError.call(this, error);\n    }\n  };\n\n  var animationManager = function () {\n    var moduleOb = {};\n    var registeredAnimations = [];\n    var initTime = 0;\n    var len = 0;\n    var playingAnimationsNum = 0;\n    var _stopped = true;\n    var _isFrozen = false;\n\n    function removeElement(ev) {\n      var i = 0;\n      var animItem = ev.target;\n\n      while (i < len) {\n        if (registeredAnimations[i].animation === animItem) {\n          registeredAnimations.splice(i, 1);\n          i -= 1;\n          len -= 1;\n\n          if (!animItem.isPaused) {\n            subtractPlayingCount();\n          }\n        }\n\n        i += 1;\n      }\n    }\n\n    function registerAnimation(element, animationData) {\n      if (!element) {\n        return null;\n      }\n\n      var i = 0;\n\n      while (i < len) {\n        if (registeredAnimations[i].elem === element && registeredAnimations[i].elem !== null) {\n          return registeredAnimations[i].animation;\n        }\n\n        i += 1;\n      }\n\n      var animItem = new AnimationItem();\n      setupAnimation(animItem, element);\n      animItem.setData(element, animationData);\n      return animItem;\n    }\n\n    function getRegisteredAnimations() {\n      var i;\n      var lenAnims = registeredAnimations.length;\n      var animations = [];\n\n      for (i = 0; i < lenAnims; i += 1) {\n        animations.push(registeredAnimations[i].animation);\n      }\n\n      return animations;\n    }\n\n    function addPlayingCount() {\n      playingAnimationsNum += 1;\n      activate();\n    }\n\n    function subtractPlayingCount() {\n      playingAnimationsNum -= 1;\n    }\n\n    function setupAnimation(animItem, element) {\n      animItem.addEventListener('destroy', removeElement);\n      animItem.addEventListener('_active', addPlayingCount);\n      animItem.addEventListener('_idle', subtractPlayingCount);\n      registeredAnimations.push({\n        elem: element,\n        animation: animItem\n      });\n      len += 1;\n    }\n\n    function loadAnimation(params) {\n      var animItem = new AnimationItem();\n      setupAnimation(animItem, null);\n      animItem.setParams(params);\n      return animItem;\n    }\n\n    function setSpeed(val, animation) {\n      var i;\n\n      for (i = 0; i < len; i += 1) {\n        registeredAnimations[i].animation.setSpeed(val, animation);\n      }\n    }\n\n    function setDirection(val, animation) {\n      var i;\n\n      for (i = 0; i < len; i += 1) {\n        registeredAnimations[i].animation.setDirection(val, animation);\n      }\n    }\n\n    function play(animation) {\n      var i;\n\n      for (i = 0; i < len; i += 1) {\n        registeredAnimations[i].animation.play(animation);\n      }\n    }\n\n    function resume(nowTime) {\n      var elapsedTime = nowTime - initTime;\n      var i;\n\n      for (i = 0; i < len; i += 1) {\n        registeredAnimations[i].animation.advanceTime(elapsedTime);\n      }\n\n      initTime = nowTime;\n\n      if (playingAnimationsNum && !_isFrozen) {\n        window.requestAnimationFrame(resume);\n      } else {\n        _stopped = true;\n      }\n    }\n\n    function first(nowTime) {\n      initTime = nowTime;\n      window.requestAnimationFrame(resume);\n    }\n\n    function pause(animation) {\n      var i;\n\n      for (i = 0; i < len; i += 1) {\n        registeredAnimations[i].animation.pause(animation);\n      }\n    }\n\n    function goToAndStop(value, isFrame, animation) {\n      var i;\n\n      for (i = 0; i < len; i += 1) {\n        registeredAnimations[i].animation.goToAndStop(value, isFrame, animation);\n      }\n    }\n\n    function stop(animation) {\n      var i;\n\n      for (i = 0; i < len; i += 1) {\n        registeredAnimations[i].animation.stop(animation);\n      }\n    }\n\n    function togglePause(animation) {\n      var i;\n\n      for (i = 0; i < len; i += 1) {\n        registeredAnimations[i].animation.togglePause(animation);\n      }\n    }\n\n    function destroy(animation) {\n      var i;\n\n      for (i = len - 1; i >= 0; i -= 1) {\n        registeredAnimations[i].animation.destroy(animation);\n      }\n    }\n\n    function searchAnimations(animationData, standalone, renderer) {\n      var animElements = [].concat([].slice.call(document.getElementsByClassName('lottie')), [].slice.call(document.getElementsByClassName('bodymovin')));\n      var i;\n      var lenAnims = animElements.length;\n\n      for (i = 0; i < lenAnims; i += 1) {\n        if (renderer) {\n          animElements[i].setAttribute('data-bm-type', renderer);\n        }\n\n        registerAnimation(animElements[i], animationData);\n      }\n\n      if (standalone && lenAnims === 0) {\n        if (!renderer) {\n          renderer = 'svg';\n        }\n\n        var body = document.getElementsByTagName('body')[0];\n        body.innerText = '';\n        var div = createTag('div');\n        div.style.width = '100%';\n        div.style.height = '100%';\n        div.setAttribute('data-bm-type', renderer);\n        body.appendChild(div);\n        registerAnimation(div, animationData);\n      }\n    }\n\n    function resize() {\n      var i;\n\n      for (i = 0; i < len; i += 1) {\n        registeredAnimations[i].animation.resize();\n      }\n    }\n\n    function activate() {\n      if (!_isFrozen && playingAnimationsNum) {\n        if (_stopped) {\n          window.requestAnimationFrame(first);\n          _stopped = false;\n        }\n      }\n    }\n\n    function freeze() {\n      _isFrozen = true;\n    }\n\n    function unfreeze() {\n      _isFrozen = false;\n      activate();\n    }\n\n    function setVolume(val, animation) {\n      var i;\n\n      for (i = 0; i < len; i += 1) {\n        registeredAnimations[i].animation.setVolume(val, animation);\n      }\n    }\n\n    function mute(animation) {\n      var i;\n\n      for (i = 0; i < len; i += 1) {\n        registeredAnimations[i].animation.mute(animation);\n      }\n    }\n\n    function unmute(animation) {\n      var i;\n\n      for (i = 0; i < len; i += 1) {\n        registeredAnimations[i].animation.unmute(animation);\n      }\n    }\n\n    moduleOb.registerAnimation = registerAnimation;\n    moduleOb.loadAnimation = loadAnimation;\n    moduleOb.setSpeed = setSpeed;\n    moduleOb.setDirection = setDirection;\n    moduleOb.play = play;\n    moduleOb.pause = pause;\n    moduleOb.stop = stop;\n    moduleOb.togglePause = togglePause;\n    moduleOb.searchAnimations = searchAnimations;\n    moduleOb.resize = resize; // moduleOb.start = start;\n\n    moduleOb.goToAndStop = goToAndStop;\n    moduleOb.destroy = destroy;\n    moduleOb.freeze = freeze;\n    moduleOb.unfreeze = unfreeze;\n    moduleOb.setVolume = setVolume;\n    moduleOb.mute = mute;\n    moduleOb.unmute = unmute;\n    moduleOb.getRegisteredAnimations = getRegisteredAnimations;\n    return moduleOb;\n  }();\n\n  /* eslint-disable */\n  var BezierFactory = function () {\n    /**\r\n       * BezierEasing - use bezier curve for transition easing function\r\n       * by Gatan Renaudeau 2014 - 2015  MIT License\r\n       *\r\n       * Credits: is based on Firefox's nsSMILKeySpline.cpp\r\n       * Usage:\r\n       * var spline = BezierEasing([ 0.25, 0.1, 0.25, 1.0 ])\r\n       * spline.get(x) => returns the easing value | x must be in [0, 1] range\r\n       *\r\n       */\n    var ob = {};\n    ob.getBezierEasing = getBezierEasing;\n    var beziers = {};\n\n    function getBezierEasing(a, b, c, d, nm) {\n      var str = nm || ('bez_' + a + '_' + b + '_' + c + '_' + d).replace(/\\./g, 'p');\n\n      if (beziers[str]) {\n        return beziers[str];\n      }\n\n      var bezEasing = new BezierEasing([a, b, c, d]);\n      beziers[str] = bezEasing;\n      return bezEasing;\n    } // These values are established by empiricism with tests (tradeoff: performance VS precision)\n\n\n    var NEWTON_ITERATIONS = 4;\n    var NEWTON_MIN_SLOPE = 0.001;\n    var SUBDIVISION_PRECISION = 0.0000001;\n    var SUBDIVISION_MAX_ITERATIONS = 10;\n    var kSplineTableSize = 11;\n    var kSampleStepSize = 1.0 / (kSplineTableSize - 1.0);\n    var float32ArraySupported = typeof Float32Array === 'function';\n\n    function A(aA1, aA2) {\n      return 1.0 - 3.0 * aA2 + 3.0 * aA1;\n    }\n\n    function B(aA1, aA2) {\n      return 3.0 * aA2 - 6.0 * aA1;\n    }\n\n    function C(aA1) {\n      return 3.0 * aA1;\n    } // Returns x(t) given t, x1, and x2, or y(t) given t, y1, and y2.\n\n\n    function calcBezier(aT, aA1, aA2) {\n      return ((A(aA1, aA2) * aT + B(aA1, aA2)) * aT + C(aA1)) * aT;\n    } // Returns dx/dt given t, x1, and x2, or dy/dt given t, y1, and y2.\n\n\n    function getSlope(aT, aA1, aA2) {\n      return 3.0 * A(aA1, aA2) * aT * aT + 2.0 * B(aA1, aA2) * aT + C(aA1);\n    }\n\n    function binarySubdivide(aX, aA, aB, mX1, mX2) {\n      var currentX,\n          currentT,\n          i = 0;\n\n      do {\n        currentT = aA + (aB - aA) / 2.0;\n        currentX = calcBezier(currentT, mX1, mX2) - aX;\n\n        if (currentX > 0.0) {\n          aB = currentT;\n        } else {\n          aA = currentT;\n        }\n      } while (Math.abs(currentX) > SUBDIVISION_PRECISION && ++i < SUBDIVISION_MAX_ITERATIONS);\n\n      return currentT;\n    }\n\n    function newtonRaphsonIterate(aX, aGuessT, mX1, mX2) {\n      for (var i = 0; i < NEWTON_ITERATIONS; ++i) {\n        var currentSlope = getSlope(aGuessT, mX1, mX2);\n        if (currentSlope === 0.0) return aGuessT;\n        var currentX = calcBezier(aGuessT, mX1, mX2) - aX;\n        aGuessT -= currentX / currentSlope;\n      }\n\n      return aGuessT;\n    }\n    /**\r\n       * points is an array of [ mX1, mY1, mX2, mY2 ]\r\n       */\n\n\n    function BezierEasing(points) {\n      this._p = points;\n      this._mSampleValues = float32ArraySupported ? new Float32Array(kSplineTableSize) : new Array(kSplineTableSize);\n      this._precomputed = false;\n      this.get = this.get.bind(this);\n    }\n\n    BezierEasing.prototype = {\n      get: function get(x) {\n        var mX1 = this._p[0],\n            mY1 = this._p[1],\n            mX2 = this._p[2],\n            mY2 = this._p[3];\n        if (!this._precomputed) this._precompute();\n        if (mX1 === mY1 && mX2 === mY2) return x; // linear\n        // Because JavaScript number are imprecise, we should guarantee the extremes are right.\n\n        if (x === 0) return 0;\n        if (x === 1) return 1;\n        return calcBezier(this._getTForX(x), mY1, mY2);\n      },\n      // Private part\n      _precompute: function _precompute() {\n        var mX1 = this._p[0],\n            mY1 = this._p[1],\n            mX2 = this._p[2],\n            mY2 = this._p[3];\n        this._precomputed = true;\n\n        if (mX1 !== mY1 || mX2 !== mY2) {\n          this._calcSampleValues();\n        }\n      },\n      _calcSampleValues: function _calcSampleValues() {\n        var mX1 = this._p[0],\n            mX2 = this._p[2];\n\n        for (var i = 0; i < kSplineTableSize; ++i) {\n          this._mSampleValues[i] = calcBezier(i * kSampleStepSize, mX1, mX2);\n        }\n      },\n\n      /**\r\n           * getTForX chose the fastest heuristic to determine the percentage value precisely from a given X projection.\r\n           */\n      _getTForX: function _getTForX(aX) {\n        var mX1 = this._p[0],\n            mX2 = this._p[2],\n            mSampleValues = this._mSampleValues;\n        var intervalStart = 0.0;\n        var currentSample = 1;\n        var lastSample = kSplineTableSize - 1;\n\n        for (; currentSample !== lastSample && mSampleValues[currentSample] <= aX; ++currentSample) {\n          intervalStart += kSampleStepSize;\n        }\n\n        --currentSample; // Interpolate to provide an initial guess for t\n\n        var dist = (aX - mSampleValues[currentSample]) / (mSampleValues[currentSample + 1] - mSampleValues[currentSample]);\n        var guessForT = intervalStart + dist * kSampleStepSize;\n        var initialSlope = getSlope(guessForT, mX1, mX2);\n\n        if (initialSlope >= NEWTON_MIN_SLOPE) {\n          return newtonRaphsonIterate(aX, guessForT, mX1, mX2);\n        }\n\n        if (initialSlope === 0.0) {\n          return guessForT;\n        }\n\n        return binarySubdivide(aX, intervalStart, intervalStart + kSampleStepSize, mX1, mX2);\n      }\n    };\n    return ob;\n  }();\n\n  var pooling = function () {\n    function _double(arr) {\n      return arr.concat(createSizedArray(arr.length));\n    }\n\n    return {\n      \"double\": _double\n    };\n  }();\n\n  var poolFactory = function () {\n    return function (initialLength, _create, _release) {\n      var _length = 0;\n      var _maxLength = initialLength;\n      var pool = createSizedArray(_maxLength);\n      var ob = {\n        newElement: newElement,\n        release: release\n      };\n\n      function newElement() {\n        var element;\n\n        if (_length) {\n          _length -= 1;\n          element = pool[_length];\n        } else {\n          element = _create();\n        }\n\n        return element;\n      }\n\n      function release(element) {\n        if (_length === _maxLength) {\n          pool = pooling[\"double\"](pool);\n          _maxLength *= 2;\n        }\n\n        if (_release) {\n          _release(element);\n        }\n\n        pool[_length] = element;\n        _length += 1;\n      }\n\n      return ob;\n    };\n  }();\n\n  var bezierLengthPool = function () {\n    function create() {\n      return {\n        addedLength: 0,\n        percents: createTypedArray('float32', getDefaultCurveSegments()),\n        lengths: createTypedArray('float32', getDefaultCurveSegments())\n      };\n    }\n\n    return poolFactory(8, create);\n  }();\n\n  var segmentsLengthPool = function () {\n    function create() {\n      return {\n        lengths: [],\n        totalLength: 0\n      };\n    }\n\n    function release(element) {\n      var i;\n      var len = element.lengths.length;\n\n      for (i = 0; i < len; i += 1) {\n        bezierLengthPool.release(element.lengths[i]);\n      }\n\n      element.lengths.length = 0;\n    }\n\n    return poolFactory(8, create, release);\n  }();\n\n  function bezFunction() {\n    var math = Math;\n\n    function pointOnLine2D(x1, y1, x2, y2, x3, y3) {\n      var det1 = x1 * y2 + y1 * x3 + x2 * y3 - x3 * y2 - y3 * x1 - x2 * y1;\n      return det1 > -0.001 && det1 < 0.001;\n    }\n\n    function pointOnLine3D(x1, y1, z1, x2, y2, z2, x3, y3, z3) {\n      if (z1 === 0 && z2 === 0 && z3 === 0) {\n        return pointOnLine2D(x1, y1, x2, y2, x3, y3);\n      }\n\n      var dist1 = math.sqrt(math.pow(x2 - x1, 2) + math.pow(y2 - y1, 2) + math.pow(z2 - z1, 2));\n      var dist2 = math.sqrt(math.pow(x3 - x1, 2) + math.pow(y3 - y1, 2) + math.pow(z3 - z1, 2));\n      var dist3 = math.sqrt(math.pow(x3 - x2, 2) + math.pow(y3 - y2, 2) + math.pow(z3 - z2, 2));\n      var diffDist;\n\n      if (dist1 > dist2) {\n        if (dist1 > dist3) {\n          diffDist = dist1 - dist2 - dist3;\n        } else {\n          diffDist = dist3 - dist2 - dist1;\n        }\n      } else if (dist3 > dist2) {\n        diffDist = dist3 - dist2 - dist1;\n      } else {\n        diffDist = dist2 - dist1 - dist3;\n      }\n\n      return diffDist > -0.0001 && diffDist < 0.0001;\n    }\n\n    var getBezierLength = function () {\n      return function (pt1, pt2, pt3, pt4) {\n        var curveSegments = getDefaultCurveSegments();\n        var k;\n        var i;\n        var len;\n        var ptCoord;\n        var perc;\n        var addedLength = 0;\n        var ptDistance;\n        var point = [];\n        var lastPoint = [];\n        var lengthData = bezierLengthPool.newElement();\n        len = pt3.length;\n\n        for (k = 0; k < curveSegments; k += 1) {\n          perc = k / (curveSegments - 1);\n          ptDistance = 0;\n\n          for (i = 0; i < len; i += 1) {\n            ptCoord = bmPow(1 - perc, 3) * pt1[i] + 3 * bmPow(1 - perc, 2) * perc * pt3[i] + 3 * (1 - perc) * bmPow(perc, 2) * pt4[i] + bmPow(perc, 3) * pt2[i];\n            point[i] = ptCoord;\n\n            if (lastPoint[i] !== null) {\n              ptDistance += bmPow(point[i] - lastPoint[i], 2);\n            }\n\n            lastPoint[i] = point[i];\n          }\n\n          if (ptDistance) {\n            ptDistance = bmSqrt(ptDistance);\n            addedLength += ptDistance;\n          }\n\n          lengthData.percents[k] = perc;\n          lengthData.lengths[k] = addedLength;\n        }\n\n        lengthData.addedLength = addedLength;\n        return lengthData;\n      };\n    }();\n\n    function getSegmentsLength(shapeData) {\n      var segmentsLength = segmentsLengthPool.newElement();\n      var closed = shapeData.c;\n      var pathV = shapeData.v;\n      var pathO = shapeData.o;\n      var pathI = shapeData.i;\n      var i;\n      var len = shapeData._length;\n      var lengths = segmentsLength.lengths;\n      var totalLength = 0;\n\n      for (i = 0; i < len - 1; i += 1) {\n        lengths[i] = getBezierLength(pathV[i], pathV[i + 1], pathO[i], pathI[i + 1]);\n        totalLength += lengths[i].addedLength;\n      }\n\n      if (closed && len) {\n        lengths[i] = getBezierLength(pathV[i], pathV[0], pathO[i], pathI[0]);\n        totalLength += lengths[i].addedLength;\n      }\n\n      segmentsLength.totalLength = totalLength;\n      return segmentsLength;\n    }\n\n    function BezierData(length) {\n      this.segmentLength = 0;\n      this.points = new Array(length);\n    }\n\n    function PointData(partial, point) {\n      this.partialLength = partial;\n      this.point = point;\n    }\n\n    var buildBezierData = function () {\n      var storedData = {};\n      return function (pt1, pt2, pt3, pt4) {\n        var bezierName = (pt1[0] + '_' + pt1[1] + '_' + pt2[0] + '_' + pt2[1] + '_' + pt3[0] + '_' + pt3[1] + '_' + pt4[0] + '_' + pt4[1]).replace(/\\./g, 'p');\n\n        if (!storedData[bezierName]) {\n          var curveSegments = getDefaultCurveSegments();\n          var k;\n          var i;\n          var len;\n          var ptCoord;\n          var perc;\n          var addedLength = 0;\n          var ptDistance;\n          var point;\n          var lastPoint = null;\n\n          if (pt1.length === 2 && (pt1[0] !== pt2[0] || pt1[1] !== pt2[1]) && pointOnLine2D(pt1[0], pt1[1], pt2[0], pt2[1], pt1[0] + pt3[0], pt1[1] + pt3[1]) && pointOnLine2D(pt1[0], pt1[1], pt2[0], pt2[1], pt2[0] + pt4[0], pt2[1] + pt4[1])) {\n            curveSegments = 2;\n          }\n\n          var bezierData = new BezierData(curveSegments);\n          len = pt3.length;\n\n          for (k = 0; k < curveSegments; k += 1) {\n            point = createSizedArray(len);\n            perc = k / (curveSegments - 1);\n            ptDistance = 0;\n\n            for (i = 0; i < len; i += 1) {\n              ptCoord = bmPow(1 - perc, 3) * pt1[i] + 3 * bmPow(1 - perc, 2) * perc * (pt1[i] + pt3[i]) + 3 * (1 - perc) * bmPow(perc, 2) * (pt2[i] + pt4[i]) + bmPow(perc, 3) * pt2[i];\n              point[i] = ptCoord;\n\n              if (lastPoint !== null) {\n                ptDistance += bmPow(point[i] - lastPoint[i], 2);\n              }\n            }\n\n            ptDistance = bmSqrt(ptDistance);\n            addedLength += ptDistance;\n            bezierData.points[k] = new PointData(ptDistance, point);\n            lastPoint = point;\n          }\n\n          bezierData.segmentLength = addedLength;\n          storedData[bezierName] = bezierData;\n        }\n\n        return storedData[bezierName];\n      };\n    }();\n\n    function getDistancePerc(perc, bezierData) {\n      var percents = bezierData.percents;\n      var lengths = bezierData.lengths;\n      var len = percents.length;\n      var initPos = bmFloor((len - 1) * perc);\n      var lengthPos = perc * bezierData.addedLength;\n      var lPerc = 0;\n\n      if (initPos === len - 1 || initPos === 0 || lengthPos === lengths[initPos]) {\n        return percents[initPos];\n      }\n\n      var dir = lengths[initPos] > lengthPos ? -1 : 1;\n      var flag = true;\n\n      while (flag) {\n        if (lengths[initPos] <= lengthPos && lengths[initPos + 1] > lengthPos) {\n          lPerc = (lengthPos - lengths[initPos]) / (lengths[initPos + 1] - lengths[initPos]);\n          flag = false;\n        } else {\n          initPos += dir;\n        }\n\n        if (initPos < 0 || initPos >= len - 1) {\n          // FIX for TypedArrays that don't store floating point values with enough accuracy\n          if (initPos === len - 1) {\n            return percents[initPos];\n          }\n\n          flag = false;\n        }\n      }\n\n      return percents[initPos] + (percents[initPos + 1] - percents[initPos]) * lPerc;\n    }\n\n    function getPointInSegment(pt1, pt2, pt3, pt4, percent, bezierData) {\n      var t1 = getDistancePerc(percent, bezierData);\n      var u1 = 1 - t1;\n      var ptX = math.round((u1 * u1 * u1 * pt1[0] + (t1 * u1 * u1 + u1 * t1 * u1 + u1 * u1 * t1) * pt3[0] + (t1 * t1 * u1 + u1 * t1 * t1 + t1 * u1 * t1) * pt4[0] + t1 * t1 * t1 * pt2[0]) * 1000) / 1000;\n      var ptY = math.round((u1 * u1 * u1 * pt1[1] + (t1 * u1 * u1 + u1 * t1 * u1 + u1 * u1 * t1) * pt3[1] + (t1 * t1 * u1 + u1 * t1 * t1 + t1 * u1 * t1) * pt4[1] + t1 * t1 * t1 * pt2[1]) * 1000) / 1000;\n      return [ptX, ptY];\n    }\n\n    var bezierSegmentPoints = createTypedArray('float32', 8);\n\n    function getNewSegment(pt1, pt2, pt3, pt4, startPerc, endPerc, bezierData) {\n      if (startPerc < 0) {\n        startPerc = 0;\n      } else if (startPerc > 1) {\n        startPerc = 1;\n      }\n\n      var t0 = getDistancePerc(startPerc, bezierData);\n      endPerc = endPerc > 1 ? 1 : endPerc;\n      var t1 = getDistancePerc(endPerc, bezierData);\n      var i;\n      var len = pt1.length;\n      var u0 = 1 - t0;\n      var u1 = 1 - t1;\n      var u0u0u0 = u0 * u0 * u0;\n      var t0u0u0_3 = t0 * u0 * u0 * 3; // eslint-disable-line camelcase\n\n      var t0t0u0_3 = t0 * t0 * u0 * 3; // eslint-disable-line camelcase\n\n      var t0t0t0 = t0 * t0 * t0; //\n\n      var u0u0u1 = u0 * u0 * u1;\n      var t0u0u1_3 = t0 * u0 * u1 + u0 * t0 * u1 + u0 * u0 * t1; // eslint-disable-line camelcase\n\n      var t0t0u1_3 = t0 * t0 * u1 + u0 * t0 * t1 + t0 * u0 * t1; // eslint-disable-line camelcase\n\n      var t0t0t1 = t0 * t0 * t1; //\n\n      var u0u1u1 = u0 * u1 * u1;\n      var t0u1u1_3 = t0 * u1 * u1 + u0 * t1 * u1 + u0 * u1 * t1; // eslint-disable-line camelcase\n\n      var t0t1u1_3 = t0 * t1 * u1 + u0 * t1 * t1 + t0 * u1 * t1; // eslint-disable-line camelcase\n\n      var t0t1t1 = t0 * t1 * t1; //\n\n      var u1u1u1 = u1 * u1 * u1;\n      var t1u1u1_3 = t1 * u1 * u1 + u1 * t1 * u1 + u1 * u1 * t1; // eslint-disable-line camelcase\n\n      var t1t1u1_3 = t1 * t1 * u1 + u1 * t1 * t1 + t1 * u1 * t1; // eslint-disable-line camelcase\n\n      var t1t1t1 = t1 * t1 * t1;\n\n      for (i = 0; i < len; i += 1) {\n        bezierSegmentPoints[i * 4] = math.round((u0u0u0 * pt1[i] + t0u0u0_3 * pt3[i] + t0t0u0_3 * pt4[i] + t0t0t0 * pt2[i]) * 1000) / 1000; // eslint-disable-line camelcase\n\n        bezierSegmentPoints[i * 4 + 1] = math.round((u0u0u1 * pt1[i] + t0u0u1_3 * pt3[i] + t0t0u1_3 * pt4[i] + t0t0t1 * pt2[i]) * 1000) / 1000; // eslint-disable-line camelcase\n\n        bezierSegmentPoints[i * 4 + 2] = math.round((u0u1u1 * pt1[i] + t0u1u1_3 * pt3[i] + t0t1u1_3 * pt4[i] + t0t1t1 * pt2[i]) * 1000) / 1000; // eslint-disable-line camelcase\n\n        bezierSegmentPoints[i * 4 + 3] = math.round((u1u1u1 * pt1[i] + t1u1u1_3 * pt3[i] + t1t1u1_3 * pt4[i] + t1t1t1 * pt2[i]) * 1000) / 1000; // eslint-disable-line camelcase\n      }\n\n      return bezierSegmentPoints;\n    }\n\n    return {\n      getSegmentsLength: getSegmentsLength,\n      getNewSegment: getNewSegment,\n      getPointInSegment: getPointInSegment,\n      buildBezierData: buildBezierData,\n      pointOnLine2D: pointOnLine2D,\n      pointOnLine3D: pointOnLine3D\n    };\n  }\n\n  var bez = bezFunction();\n\n  var PropertyFactory = function () {\n    var initFrame = initialDefaultFrame;\n    var mathAbs = Math.abs;\n\n    function interpolateValue(frameNum, caching) {\n      var offsetTime = this.offsetTime;\n      var newValue;\n\n      if (this.propType === 'multidimensional') {\n        newValue = createTypedArray('float32', this.pv.length);\n      }\n\n      var iterationIndex = caching.lastIndex;\n      var i = iterationIndex;\n      var len = this.keyframes.length - 1;\n      var flag = true;\n      var keyData;\n      var nextKeyData;\n      var keyframeMetadata;\n\n      while (flag) {\n        keyData = this.keyframes[i];\n        nextKeyData = this.keyframes[i + 1];\n\n        if (i === len - 1 && frameNum >= nextKeyData.t - offsetTime) {\n          if (keyData.h) {\n            keyData = nextKeyData;\n          }\n\n          iterationIndex = 0;\n          break;\n        }\n\n        if (nextKeyData.t - offsetTime > frameNum) {\n          iterationIndex = i;\n          break;\n        }\n\n        if (i < len - 1) {\n          i += 1;\n        } else {\n          iterationIndex = 0;\n          flag = false;\n        }\n      }\n\n      keyframeMetadata = this.keyframesMetadata[i] || {};\n      var k;\n      var kLen;\n      var perc;\n      var jLen;\n      var j;\n      var fnc;\n      var nextKeyTime = nextKeyData.t - offsetTime;\n      var keyTime = keyData.t - offsetTime;\n      var endValue;\n\n      if (keyData.to) {\n        if (!keyframeMetadata.bezierData) {\n          keyframeMetadata.bezierData = bez.buildBezierData(keyData.s, nextKeyData.s || keyData.e, keyData.to, keyData.ti);\n        }\n\n        var bezierData = keyframeMetadata.bezierData;\n\n        if (frameNum >= nextKeyTime || frameNum < keyTime) {\n          var ind = frameNum >= nextKeyTime ? bezierData.points.length - 1 : 0;\n          kLen = bezierData.points[ind].point.length;\n\n          for (k = 0; k < kLen; k += 1) {\n            newValue[k] = bezierData.points[ind].point[k];\n          } // caching._lastKeyframeIndex = -1;\n\n        } else {\n          if (keyframeMetadata.__fnct) {\n            fnc = keyframeMetadata.__fnct;\n          } else {\n            fnc = BezierFactory.getBezierEasing(keyData.o.x, keyData.o.y, keyData.i.x, keyData.i.y, keyData.n).get;\n            keyframeMetadata.__fnct = fnc;\n          }\n\n          perc = fnc((frameNum - keyTime) / (nextKeyTime - keyTime));\n          var distanceInLine = bezierData.segmentLength * perc;\n          var segmentPerc;\n          var addedLength = caching.lastFrame < frameNum && caching._lastKeyframeIndex === i ? caching._lastAddedLength : 0;\n          j = caching.lastFrame < frameNum && caching._lastKeyframeIndex === i ? caching._lastPoint : 0;\n          flag = true;\n          jLen = bezierData.points.length;\n\n          while (flag) {\n            addedLength += bezierData.points[j].partialLength;\n\n            if (distanceInLine === 0 || perc === 0 || j === bezierData.points.length - 1) {\n              kLen = bezierData.points[j].point.length;\n\n              for (k = 0; k < kLen; k += 1) {\n                newValue[k] = bezierData.points[j].point[k];\n              }\n\n              break;\n            } else if (distanceInLine >= addedLength && distanceInLine < addedLength + bezierData.points[j + 1].partialLength) {\n              segmentPerc = (distanceInLine - addedLength) / bezierData.points[j + 1].partialLength;\n              kLen = bezierData.points[j].point.length;\n\n              for (k = 0; k < kLen; k += 1) {\n                newValue[k] = bezierData.points[j].point[k] + (bezierData.points[j + 1].point[k] - bezierData.points[j].point[k]) * segmentPerc;\n              }\n\n              break;\n            }\n\n            if (j < jLen - 1) {\n              j += 1;\n            } else {\n              flag = false;\n            }\n          }\n\n          caching._lastPoint = j;\n          caching._lastAddedLength = addedLength - bezierData.points[j].partialLength;\n          caching._lastKeyframeIndex = i;\n        }\n      } else {\n        var outX;\n        var outY;\n        var inX;\n        var inY;\n        var keyValue;\n        len = keyData.s.length;\n        endValue = nextKeyData.s || keyData.e;\n\n        if (this.sh && keyData.h !== 1) {\n          if (frameNum >= nextKeyTime) {\n            newValue[0] = endValue[0];\n            newValue[1] = endValue[1];\n            newValue[2] = endValue[2];\n          } else if (frameNum <= keyTime) {\n            newValue[0] = keyData.s[0];\n            newValue[1] = keyData.s[1];\n            newValue[2] = keyData.s[2];\n          } else {\n            var quatStart = createQuaternion(keyData.s);\n            var quatEnd = createQuaternion(endValue);\n            var time = (frameNum - keyTime) / (nextKeyTime - keyTime);\n            quaternionToEuler(newValue, slerp(quatStart, quatEnd, time));\n          }\n        } else {\n          for (i = 0; i < len; i += 1) {\n            if (keyData.h !== 1) {\n              if (frameNum >= nextKeyTime) {\n                perc = 1;\n              } else if (frameNum < keyTime) {\n                perc = 0;\n              } else {\n                if (keyData.o.x.constructor === Array) {\n                  if (!keyframeMetadata.__fnct) {\n                    keyframeMetadata.__fnct = [];\n                  }\n\n                  if (!keyframeMetadata.__fnct[i]) {\n                    outX = keyData.o.x[i] === undefined ? keyData.o.x[0] : keyData.o.x[i];\n                    outY = keyData.o.y[i] === undefined ? keyData.o.y[0] : keyData.o.y[i];\n                    inX = keyData.i.x[i] === undefined ? keyData.i.x[0] : keyData.i.x[i];\n                    inY = keyData.i.y[i] === undefined ? keyData.i.y[0] : keyData.i.y[i];\n                    fnc = BezierFactory.getBezierEasing(outX, outY, inX, inY).get;\n                    keyframeMetadata.__fnct[i] = fnc;\n                  } else {\n                    fnc = keyframeMetadata.__fnct[i];\n                  }\n                } else if (!keyframeMetadata.__fnct) {\n                  outX = keyData.o.x;\n                  outY = keyData.o.y;\n                  inX = keyData.i.x;\n                  inY = keyData.i.y;\n                  fnc = BezierFactory.getBezierEasing(outX, outY, inX, inY).get;\n                  keyData.keyframeMetadata = fnc;\n                } else {\n                  fnc = keyframeMetadata.__fnct;\n                }\n\n                perc = fnc((frameNum - keyTime) / (nextKeyTime - keyTime));\n              }\n            }\n\n            endValue = nextKeyData.s || keyData.e;\n            keyValue = keyData.h === 1 ? keyData.s[i] : keyData.s[i] + (endValue[i] - keyData.s[i]) * perc;\n\n            if (this.propType === 'multidimensional') {\n              newValue[i] = keyValue;\n            } else {\n              newValue = keyValue;\n            }\n          }\n        }\n      }\n\n      caching.lastIndex = iterationIndex;\n      return newValue;\n    } // based on @Toji's https://github.com/toji/gl-matrix/\n\n\n    function slerp(a, b, t) {\n      var out = [];\n      var ax = a[0];\n      var ay = a[1];\n      var az = a[2];\n      var aw = a[3];\n      var bx = b[0];\n      var by = b[1];\n      var bz = b[2];\n      var bw = b[3];\n      var omega;\n      var cosom;\n      var sinom;\n      var scale0;\n      var scale1;\n      cosom = ax * bx + ay * by + az * bz + aw * bw;\n\n      if (cosom < 0.0) {\n        cosom = -cosom;\n        bx = -bx;\n        by = -by;\n        bz = -bz;\n        bw = -bw;\n      }\n\n      if (1.0 - cosom > 0.000001) {\n        omega = Math.acos(cosom);\n        sinom = Math.sin(omega);\n        scale0 = Math.sin((1.0 - t) * omega) / sinom;\n        scale1 = Math.sin(t * omega) / sinom;\n      } else {\n        scale0 = 1.0 - t;\n        scale1 = t;\n      }\n\n      out[0] = scale0 * ax + scale1 * bx;\n      out[1] = scale0 * ay + scale1 * by;\n      out[2] = scale0 * az + scale1 * bz;\n      out[3] = scale0 * aw + scale1 * bw;\n      return out;\n    }\n\n    function quaternionToEuler(out, quat) {\n      var qx = quat[0];\n      var qy = quat[1];\n      var qz = quat[2];\n      var qw = quat[3];\n      var heading = Math.atan2(2 * qy * qw - 2 * qx * qz, 1 - 2 * qy * qy - 2 * qz * qz);\n      var attitude = Math.asin(2 * qx * qy + 2 * qz * qw);\n      var bank = Math.atan2(2 * qx * qw - 2 * qy * qz, 1 - 2 * qx * qx - 2 * qz * qz);\n      out[0] = heading / degToRads;\n      out[1] = attitude / degToRads;\n      out[2] = bank / degToRads;\n    }\n\n    function createQuaternion(values) {\n      var heading = values[0] * degToRads;\n      var attitude = values[1] * degToRads;\n      var bank = values[2] * degToRads;\n      var c1 = Math.cos(heading / 2);\n      var c2 = Math.cos(attitude / 2);\n      var c3 = Math.cos(bank / 2);\n      var s1 = Math.sin(heading / 2);\n      var s2 = Math.sin(attitude / 2);\n      var s3 = Math.sin(bank / 2);\n      var w = c1 * c2 * c3 - s1 * s2 * s3;\n      var x = s1 * s2 * c3 + c1 * c2 * s3;\n      var y = s1 * c2 * c3 + c1 * s2 * s3;\n      var z = c1 * s2 * c3 - s1 * c2 * s3;\n      return [x, y, z, w];\n    }\n\n    function getValueAtCurrentTime() {\n      var frameNum = this.comp.renderedFrame - this.offsetTime;\n      var initTime = this.keyframes[0].t - this.offsetTime;\n      var endTime = this.keyframes[this.keyframes.length - 1].t - this.offsetTime;\n\n      if (!(frameNum === this._caching.lastFrame || this._caching.lastFrame !== initFrame && (this._caching.lastFrame >= endTime && frameNum >= endTime || this._caching.lastFrame < initTime && frameNum < initTime))) {\n        if (this._caching.lastFrame >= frameNum) {\n          this._caching._lastKeyframeIndex = -1;\n          this._caching.lastIndex = 0;\n        }\n\n        var renderResult = this.interpolateValue(frameNum, this._caching);\n        this.pv = renderResult;\n      }\n\n      this._caching.lastFrame = frameNum;\n      return this.pv;\n    }\n\n    function setVValue(val) {\n      var multipliedValue;\n\n      if (this.propType === 'unidimensional') {\n        multipliedValue = val * this.mult;\n\n        if (mathAbs(this.v - multipliedValue) > 0.00001) {\n          this.v = multipliedValue;\n          this._mdf = true;\n        }\n      } else {\n        var i = 0;\n        var len = this.v.length;\n\n        while (i < len) {\n          multipliedValue = val[i] * this.mult;\n\n          if (mathAbs(this.v[i] - multipliedValue) > 0.00001) {\n            this.v[i] = multipliedValue;\n            this._mdf = true;\n          }\n\n          i += 1;\n        }\n      }\n    }\n\n    function processEffectsSequence() {\n      if (this.elem.globalData.frameId === this.frameId || !this.effectsSequence.length) {\n        return;\n      }\n\n      if (this.lock) {\n        this.setVValue(this.pv);\n        return;\n      }\n\n      this.lock = true;\n      this._mdf = this._isFirstFrame;\n      var i;\n      var len = this.effectsSequence.length;\n      var finalValue = this.kf ? this.pv : this.data.k;\n\n      for (i = 0; i < len; i += 1) {\n        finalValue = this.effectsSequence[i](finalValue);\n      }\n\n      this.setVValue(finalValue);\n      this._isFirstFrame = false;\n      this.lock = false;\n      this.frameId = this.elem.globalData.frameId;\n    }\n\n    function addEffect(effectFunction) {\n      this.effectsSequence.push(effectFunction);\n      this.container.addDynamicProperty(this);\n    }\n\n    function ValueProperty(elem, data, mult, container) {\n      this.propType = 'unidimensional';\n      this.mult = mult || 1;\n      this.data = data;\n      this.v = mult ? data.k * mult : data.k;\n      this.pv = data.k;\n      this._mdf = false;\n      this.elem = elem;\n      this.container = container;\n      this.comp = elem.comp;\n      this.k = false;\n      this.kf = false;\n      this.vel = 0;\n      this.effectsSequence = [];\n      this._isFirstFrame = true;\n      this.getValue = processEffectsSequence;\n      this.setVValue = setVValue;\n      this.addEffect = addEffect;\n    }\n\n    function MultiDimensionalProperty(elem, data, mult, container) {\n      this.propType = 'multidimensional';\n      this.mult = mult || 1;\n      this.data = data;\n      this._mdf = false;\n      this.elem = elem;\n      this.container = container;\n      this.comp = elem.comp;\n      this.k = false;\n      this.kf = false;\n      this.frameId = -1;\n      var i;\n      var len = data.k.length;\n      this.v = createTypedArray('float32', len);\n      this.pv = createTypedArray('float32', len);\n      this.vel = createTypedArray('float32', len);\n\n      for (i = 0; i < len; i += 1) {\n        this.v[i] = data.k[i] * this.mult;\n        this.pv[i] = data.k[i];\n      }\n\n      this._isFirstFrame = true;\n      this.effectsSequence = [];\n      this.getValue = processEffectsSequence;\n      this.setVValue = setVValue;\n      this.addEffect = addEffect;\n    }\n\n    function KeyframedValueProperty(elem, data, mult, container) {\n      this.propType = 'unidimensional';\n      this.keyframes = data.k;\n      this.keyframesMetadata = [];\n      this.offsetTime = elem.data.st;\n      this.frameId = -1;\n      this._caching = {\n        lastFrame: initFrame,\n        lastIndex: 0,\n        value: 0,\n        _lastKeyframeIndex: -1\n      };\n      this.k = true;\n      this.kf = true;\n      this.data = data;\n      this.mult = mult || 1;\n      this.elem = elem;\n      this.container = container;\n      this.comp = elem.comp;\n      this.v = initFrame;\n      this.pv = initFrame;\n      this._isFirstFrame = true;\n      this.getValue = processEffectsSequence;\n      this.setVValue = setVValue;\n      this.interpolateValue = interpolateValue;\n      this.effectsSequence = [getValueAtCurrentTime.bind(this)];\n      this.addEffect = addEffect;\n    }\n\n    function KeyframedMultidimensionalProperty(elem, data, mult, container) {\n      this.propType = 'multidimensional';\n      var i;\n      var len = data.k.length;\n      var s;\n      var e;\n      var to;\n      var ti;\n\n      for (i = 0; i < len - 1; i += 1) {\n        if (data.k[i].to && data.k[i].s && data.k[i + 1] && data.k[i + 1].s) {\n          s = data.k[i].s;\n          e = data.k[i + 1].s;\n          to = data.k[i].to;\n          ti = data.k[i].ti;\n\n          if (s.length === 2 && !(s[0] === e[0] && s[1] === e[1]) && bez.pointOnLine2D(s[0], s[1], e[0], e[1], s[0] + to[0], s[1] + to[1]) && bez.pointOnLine2D(s[0], s[1], e[0], e[1], e[0] + ti[0], e[1] + ti[1]) || s.length === 3 && !(s[0] === e[0] && s[1] === e[1] && s[2] === e[2]) && bez.pointOnLine3D(s[0], s[1], s[2], e[0], e[1], e[2], s[0] + to[0], s[1] + to[1], s[2] + to[2]) && bez.pointOnLine3D(s[0], s[1], s[2], e[0], e[1], e[2], e[0] + ti[0], e[1] + ti[1], e[2] + ti[2])) {\n            data.k[i].to = null;\n            data.k[i].ti = null;\n          }\n\n          if (s[0] === e[0] && s[1] === e[1] && to[0] === 0 && to[1] === 0 && ti[0] === 0 && ti[1] === 0) {\n            if (s.length === 2 || s[2] === e[2] && to[2] === 0 && ti[2] === 0) {\n              data.k[i].to = null;\n              data.k[i].ti = null;\n            }\n          }\n        }\n      }\n\n      this.effectsSequence = [getValueAtCurrentTime.bind(this)];\n      this.data = data;\n      this.keyframes = data.k;\n      this.keyframesMetadata = [];\n      this.offsetTime = elem.data.st;\n      this.k = true;\n      this.kf = true;\n      this._isFirstFrame = true;\n      this.mult = mult || 1;\n      this.elem = elem;\n      this.container = container;\n      this.comp = elem.comp;\n      this.getValue = processEffectsSequence;\n      this.setVValue = setVValue;\n      this.interpolateValue = interpolateValue;\n      this.frameId = -1;\n      var arrLen = data.k[0].s.length;\n      this.v = createTypedArray('float32', arrLen);\n      this.pv = createTypedArray('float32', arrLen);\n\n      for (i = 0; i < arrLen; i += 1) {\n        this.v[i] = initFrame;\n        this.pv[i] = initFrame;\n      }\n\n      this._caching = {\n        lastFrame: initFrame,\n        lastIndex: 0,\n        value: createTypedArray('float32', arrLen)\n      };\n      this.addEffect = addEffect;\n    }\n\n    function getProp(elem, data, type, mult, container) {\n      var p;\n\n      if (!data.k.length) {\n        p = new ValueProperty(elem, data, mult, container);\n      } else if (typeof data.k[0] === 'number') {\n        p = new MultiDimensionalProperty(elem, data, mult, container);\n      } else {\n        switch (type) {\n          case 0:\n            p = new KeyframedValueProperty(elem, data, mult, container);\n            break;\n\n          case 1:\n            p = new KeyframedMultidimensionalProperty(elem, data, mult, container);\n            break;\n\n          default:\n            break;\n        }\n      }\n\n      if (p.effectsSequence.length) {\n        container.addDynamicProperty(p);\n      }\n\n      return p;\n    }\n\n    var ob = {\n      getProp: getProp\n    };\n    return ob;\n  }();\n\n  function DynamicPropertyContainer() {}\n\n  DynamicPropertyContainer.prototype = {\n    addDynamicProperty: function addDynamicProperty(prop) {\n      if (this.dynamicProperties.indexOf(prop) === -1) {\n        this.dynamicProperties.push(prop);\n        this.container.addDynamicProperty(this);\n        this._isAnimated = true;\n      }\n    },\n    iterateDynamicProperties: function iterateDynamicProperties() {\n      this._mdf = false;\n      var i;\n      var len = this.dynamicProperties.length;\n\n      for (i = 0; i < len; i += 1) {\n        this.dynamicProperties[i].getValue();\n\n        if (this.dynamicProperties[i]._mdf) {\n          this._mdf = true;\n        }\n      }\n    },\n    initDynamicPropertyContainer: function initDynamicPropertyContainer(container) {\n      this.container = container;\n      this.dynamicProperties = [];\n      this._mdf = false;\n      this._isAnimated = false;\n    }\n  };\n\n  var pointPool = function () {\n    function create() {\n      return createTypedArray('float32', 2);\n    }\n\n    return poolFactory(8, create);\n  }();\n\n  function ShapePath() {\n    this.c = false;\n    this._length = 0;\n    this._maxLength = 8;\n    this.v = createSizedArray(this._maxLength);\n    this.o = createSizedArray(this._maxLength);\n    this.i = createSizedArray(this._maxLength);\n  }\n\n  ShapePath.prototype.setPathData = function (closed, len) {\n    this.c = closed;\n    this.setLength(len);\n    var i = 0;\n\n    while (i < len) {\n      this.v[i] = pointPool.newElement();\n      this.o[i] = pointPool.newElement();\n      this.i[i] = pointPool.newElement();\n      i += 1;\n    }\n  };\n\n  ShapePath.prototype.setLength = function (len) {\n    while (this._maxLength < len) {\n      this.doubleArrayLength();\n    }\n\n    this._length = len;\n  };\n\n  ShapePath.prototype.doubleArrayLength = function () {\n    this.v = this.v.concat(createSizedArray(this._maxLength));\n    this.i = this.i.concat(createSizedArray(this._maxLength));\n    this.o = this.o.concat(createSizedArray(this._maxLength));\n    this._maxLength *= 2;\n  };\n\n  ShapePath.prototype.setXYAt = function (x, y, type, pos, replace) {\n    var arr;\n    this._length = Math.max(this._length, pos + 1);\n\n    if (this._length >= this._maxLength) {\n      this.doubleArrayLength();\n    }\n\n    switch (type) {\n      case 'v':\n        arr = this.v;\n        break;\n\n      case 'i':\n        arr = this.i;\n        break;\n\n      case 'o':\n        arr = this.o;\n        break;\n\n      default:\n        arr = [];\n        break;\n    }\n\n    if (!arr[pos] || arr[pos] && !replace) {\n      arr[pos] = pointPool.newElement();\n    }\n\n    arr[pos][0] = x;\n    arr[pos][1] = y;\n  };\n\n  ShapePath.prototype.setTripleAt = function (vX, vY, oX, oY, iX, iY, pos, replace) {\n    this.setXYAt(vX, vY, 'v', pos, replace);\n    this.setXYAt(oX, oY, 'o', pos, replace);\n    this.setXYAt(iX, iY, 'i', pos, replace);\n  };\n\n  ShapePath.prototype.reverse = function () {\n    var newPath = new ShapePath();\n    newPath.setPathData(this.c, this._length);\n    var vertices = this.v;\n    var outPoints = this.o;\n    var inPoints = this.i;\n    var init = 0;\n\n    if (this.c) {\n      newPath.setTripleAt(vertices[0][0], vertices[0][1], inPoints[0][0], inPoints[0][1], outPoints[0][0], outPoints[0][1], 0, false);\n      init = 1;\n    }\n\n    var cnt = this._length - 1;\n    var len = this._length;\n    var i;\n\n    for (i = init; i < len; i += 1) {\n      newPath.setTripleAt(vertices[cnt][0], vertices[cnt][1], inPoints[cnt][0], inPoints[cnt][1], outPoints[cnt][0], outPoints[cnt][1], i, false);\n      cnt -= 1;\n    }\n\n    return newPath;\n  };\n\n  var shapePool = function () {\n    function create() {\n      return new ShapePath();\n    }\n\n    function release(shapePath) {\n      var len = shapePath._length;\n      var i;\n\n      for (i = 0; i < len; i += 1) {\n        pointPool.release(shapePath.v[i]);\n        pointPool.release(shapePath.i[i]);\n        pointPool.release(shapePath.o[i]);\n        shapePath.v[i] = null;\n        shapePath.i[i] = null;\n        shapePath.o[i] = null;\n      }\n\n      shapePath._length = 0;\n      shapePath.c = false;\n    }\n\n    function clone(shape) {\n      var cloned = factory.newElement();\n      var i;\n      var len = shape._length === undefined ? shape.v.length : shape._length;\n      cloned.setLength(len);\n      cloned.c = shape.c;\n\n      for (i = 0; i < len; i += 1) {\n        cloned.setTripleAt(shape.v[i][0], shape.v[i][1], shape.o[i][0], shape.o[i][1], shape.i[i][0], shape.i[i][1], i);\n      }\n\n      return cloned;\n    }\n\n    var factory = poolFactory(4, create, release);\n    factory.clone = clone;\n    return factory;\n  }();\n\n  function ShapeCollection() {\n    this._length = 0;\n    this._maxLength = 4;\n    this.shapes = createSizedArray(this._maxLength);\n  }\n\n  ShapeCollection.prototype.addShape = function (shapeData) {\n    if (this._length === this._maxLength) {\n      this.shapes = this.shapes.concat(createSizedArray(this._maxLength));\n      this._maxLength *= 2;\n    }\n\n    this.shapes[this._length] = shapeData;\n    this._length += 1;\n  };\n\n  ShapeCollection.prototype.releaseShapes = function () {\n    var i;\n\n    for (i = 0; i < this._length; i += 1) {\n      shapePool.release(this.shapes[i]);\n    }\n\n    this._length = 0;\n  };\n\n  var shapeCollectionPool = function () {\n    var ob = {\n      newShapeCollection: newShapeCollection,\n      release: release\n    };\n    var _length = 0;\n    var _maxLength = 4;\n    var pool = createSizedArray(_maxLength);\n\n    function newShapeCollection() {\n      var shapeCollection;\n\n      if (_length) {\n        _length -= 1;\n        shapeCollection = pool[_length];\n      } else {\n        shapeCollection = new ShapeCollection();\n      }\n\n      return shapeCollection;\n    }\n\n    function release(shapeCollection) {\n      var i;\n      var len = shapeCollection._length;\n\n      for (i = 0; i < len; i += 1) {\n        shapePool.release(shapeCollection.shapes[i]);\n      }\n\n      shapeCollection._length = 0;\n\n      if (_length === _maxLength) {\n        pool = pooling[\"double\"](pool);\n        _maxLength *= 2;\n      }\n\n      pool[_length] = shapeCollection;\n      _length += 1;\n    }\n\n    return ob;\n  }();\n\n  var ShapePropertyFactory = function () {\n    var initFrame = -999999;\n\n    function interpolateShape(frameNum, previousValue, caching) {\n      var iterationIndex = caching.lastIndex;\n      var keyPropS;\n      var keyPropE;\n      var isHold;\n      var j;\n      var k;\n      var jLen;\n      var kLen;\n      var perc;\n      var vertexValue;\n      var kf = this.keyframes;\n\n      if (frameNum < kf[0].t - this.offsetTime) {\n        keyPropS = kf[0].s[0];\n        isHold = true;\n        iterationIndex = 0;\n      } else if (frameNum >= kf[kf.length - 1].t - this.offsetTime) {\n        keyPropS = kf[kf.length - 1].s ? kf[kf.length - 1].s[0] : kf[kf.length - 2].e[0];\n        /* if(kf[kf.length - 1].s){\r\n                  keyPropS = kf[kf.length - 1].s[0];\r\n              }else{\r\n                  keyPropS = kf[kf.length - 2].e[0];\r\n              } */\n\n        isHold = true;\n      } else {\n        var i = iterationIndex;\n        var len = kf.length - 1;\n        var flag = true;\n        var keyData;\n        var nextKeyData;\n        var keyframeMetadata;\n\n        while (flag) {\n          keyData = kf[i];\n          nextKeyData = kf[i + 1];\n\n          if (nextKeyData.t - this.offsetTime > frameNum) {\n            break;\n          }\n\n          if (i < len - 1) {\n            i += 1;\n          } else {\n            flag = false;\n          }\n        }\n\n        keyframeMetadata = this.keyframesMetadata[i] || {};\n        isHold = keyData.h === 1;\n        iterationIndex = i;\n\n        if (!isHold) {\n          if (frameNum >= nextKeyData.t - this.offsetTime) {\n            perc = 1;\n          } else if (frameNum < keyData.t - this.offsetTime) {\n            perc = 0;\n          } else {\n            var fnc;\n\n            if (keyframeMetadata.__fnct) {\n              fnc = keyframeMetadata.__fnct;\n            } else {\n              fnc = BezierFactory.getBezierEasing(keyData.o.x, keyData.o.y, keyData.i.x, keyData.i.y).get;\n              keyframeMetadata.__fnct = fnc;\n            }\n\n            perc = fnc((frameNum - (keyData.t - this.offsetTime)) / (nextKeyData.t - this.offsetTime - (keyData.t - this.offsetTime)));\n          }\n\n          keyPropE = nextKeyData.s ? nextKeyData.s[0] : keyData.e[0];\n        }\n\n        keyPropS = keyData.s[0];\n      }\n\n      jLen = previousValue._length;\n      kLen = keyPropS.i[0].length;\n      caching.lastIndex = iterationIndex;\n\n      for (j = 0; j < jLen; j += 1) {\n        for (k = 0; k < kLen; k += 1) {\n          vertexValue = isHold ? keyPropS.i[j][k] : keyPropS.i[j][k] + (keyPropE.i[j][k] - keyPropS.i[j][k]) * perc;\n          previousValue.i[j][k] = vertexValue;\n          vertexValue = isHold ? keyPropS.o[j][k] : keyPropS.o[j][k] + (keyPropE.o[j][k] - keyPropS.o[j][k]) * perc;\n          previousValue.o[j][k] = vertexValue;\n          vertexValue = isHold ? keyPropS.v[j][k] : keyPropS.v[j][k] + (keyPropE.v[j][k] - keyPropS.v[j][k]) * perc;\n          previousValue.v[j][k] = vertexValue;\n        }\n      }\n    }\n\n    function interpolateShapeCurrentTime() {\n      var frameNum = this.comp.renderedFrame - this.offsetTime;\n      var initTime = this.keyframes[0].t - this.offsetTime;\n      var endTime = this.keyframes[this.keyframes.length - 1].t - this.offsetTime;\n      var lastFrame = this._caching.lastFrame;\n\n      if (!(lastFrame !== initFrame && (lastFrame < initTime && frameNum < initTime || lastFrame > endTime && frameNum > endTime))) {\n        /// /\n        this._caching.lastIndex = lastFrame < frameNum ? this._caching.lastIndex : 0;\n        this.interpolateShape(frameNum, this.pv, this._caching); /// /\n      }\n\n      this._caching.lastFrame = frameNum;\n      return this.pv;\n    }\n\n    function resetShape() {\n      this.paths = this.localShapeCollection;\n    }\n\n    function shapesEqual(shape1, shape2) {\n      if (shape1._length !== shape2._length || shape1.c !== shape2.c) {\n        return false;\n      }\n\n      var i;\n      var len = shape1._length;\n\n      for (i = 0; i < len; i += 1) {\n        if (shape1.v[i][0] !== shape2.v[i][0] || shape1.v[i][1] !== shape2.v[i][1] || shape1.o[i][0] !== shape2.o[i][0] || shape1.o[i][1] !== shape2.o[i][1] || shape1.i[i][0] !== shape2.i[i][0] || shape1.i[i][1] !== shape2.i[i][1]) {\n          return false;\n        }\n      }\n\n      return true;\n    }\n\n    function setVValue(newPath) {\n      if (!shapesEqual(this.v, newPath)) {\n        this.v = shapePool.clone(newPath);\n        this.localShapeCollection.releaseShapes();\n        this.localShapeCollection.addShape(this.v);\n        this._mdf = true;\n        this.paths = this.localShapeCollection;\n      }\n    }\n\n    function processEffectsSequence() {\n      if (this.elem.globalData.frameId === this.frameId) {\n        return;\n      }\n\n      if (!this.effectsSequence.length) {\n        this._mdf = false;\n        return;\n      }\n\n      if (this.lock) {\n        this.setVValue(this.pv);\n        return;\n      }\n\n      this.lock = true;\n      this._mdf = false;\n      var finalValue;\n\n      if (this.kf) {\n        finalValue = this.pv;\n      } else if (this.data.ks) {\n        finalValue = this.data.ks.k;\n      } else {\n        finalValue = this.data.pt.k;\n      }\n\n      var i;\n      var len = this.effectsSequence.length;\n\n      for (i = 0; i < len; i += 1) {\n        finalValue = this.effectsSequence[i](finalValue);\n      }\n\n      this.setVValue(finalValue);\n      this.lock = false;\n      this.frameId = this.elem.globalData.frameId;\n    }\n\n    function ShapeProperty(elem, data, type) {\n      this.propType = 'shape';\n      this.comp = elem.comp;\n      this.container = elem;\n      this.elem = elem;\n      this.data = data;\n      this.k = false;\n      this.kf = false;\n      this._mdf = false;\n      var pathData = type === 3 ? data.pt.k : data.ks.k;\n      this.v = shapePool.clone(pathData);\n      this.pv = shapePool.clone(this.v);\n      this.localShapeCollection = shapeCollectionPool.newShapeCollection();\n      this.paths = this.localShapeCollection;\n      this.paths.addShape(this.v);\n      this.reset = resetShape;\n      this.effectsSequence = [];\n    }\n\n    function addEffect(effectFunction) {\n      this.effectsSequence.push(effectFunction);\n      this.container.addDynamicProperty(this);\n    }\n\n    ShapeProperty.prototype.interpolateShape = interpolateShape;\n    ShapeProperty.prototype.getValue = processEffectsSequence;\n    ShapeProperty.prototype.setVValue = setVValue;\n    ShapeProperty.prototype.addEffect = addEffect;\n\n    function KeyframedShapeProperty(elem, data, type) {\n      this.propType = 'shape';\n      this.comp = elem.comp;\n      this.elem = elem;\n      this.container = elem;\n      this.offsetTime = elem.data.st;\n      this.keyframes = type === 3 ? data.pt.k : data.ks.k;\n      this.keyframesMetadata = [];\n      this.k = true;\n      this.kf = true;\n      var len = this.keyframes[0].s[0].i.length;\n      this.v = shapePool.newElement();\n      this.v.setPathData(this.keyframes[0].s[0].c, len);\n      this.pv = shapePool.clone(this.v);\n      this.localShapeCollection = shapeCollectionPool.newShapeCollection();\n      this.paths = this.localShapeCollection;\n      this.paths.addShape(this.v);\n      this.lastFrame = initFrame;\n      this.reset = resetShape;\n      this._caching = {\n        lastFrame: initFrame,\n        lastIndex: 0\n      };\n      this.effectsSequence = [interpolateShapeCurrentTime.bind(this)];\n    }\n\n    KeyframedShapeProperty.prototype.getValue = processEffectsSequence;\n    KeyframedShapeProperty.prototype.interpolateShape = interpolateShape;\n    KeyframedShapeProperty.prototype.setVValue = setVValue;\n    KeyframedShapeProperty.prototype.addEffect = addEffect;\n\n    var EllShapeProperty = function () {\n      var cPoint = roundCorner;\n\n      function EllShapePropertyFactory(elem, data) {\n        this.v = shapePool.newElement();\n        this.v.setPathData(true, 4);\n        this.localShapeCollection = shapeCollectionPool.newShapeCollection();\n        this.paths = this.localShapeCollection;\n        this.localShapeCollection.addShape(this.v);\n        this.d = data.d;\n        this.elem = elem;\n        this.comp = elem.comp;\n        this.frameId = -1;\n        this.initDynamicPropertyContainer(elem);\n        this.p = PropertyFactory.getProp(elem, data.p, 1, 0, this);\n        this.s = PropertyFactory.getProp(elem, data.s, 1, 0, this);\n\n        if (this.dynamicProperties.length) {\n          this.k = true;\n        } else {\n          this.k = false;\n          this.convertEllToPath();\n        }\n      }\n\n      EllShapePropertyFactory.prototype = {\n        reset: resetShape,\n        getValue: function getValue() {\n          if (this.elem.globalData.frameId === this.frameId) {\n            return;\n          }\n\n          this.frameId = this.elem.globalData.frameId;\n          this.iterateDynamicProperties();\n\n          if (this._mdf) {\n            this.convertEllToPath();\n          }\n        },\n        convertEllToPath: function convertEllToPath() {\n          var p0 = this.p.v[0];\n          var p1 = this.p.v[1];\n          var s0 = this.s.v[0] / 2;\n          var s1 = this.s.v[1] / 2;\n\n          var _cw = this.d !== 3;\n\n          var _v = this.v;\n          _v.v[0][0] = p0;\n          _v.v[0][1] = p1 - s1;\n          _v.v[1][0] = _cw ? p0 + s0 : p0 - s0;\n          _v.v[1][1] = p1;\n          _v.v[2][0] = p0;\n          _v.v[2][1] = p1 + s1;\n          _v.v[3][0] = _cw ? p0 - s0 : p0 + s0;\n          _v.v[3][1] = p1;\n          _v.i[0][0] = _cw ? p0 - s0 * cPoint : p0 + s0 * cPoint;\n          _v.i[0][1] = p1 - s1;\n          _v.i[1][0] = _cw ? p0 + s0 : p0 - s0;\n          _v.i[1][1] = p1 - s1 * cPoint;\n          _v.i[2][0] = _cw ? p0 + s0 * cPoint : p0 - s0 * cPoint;\n          _v.i[2][1] = p1 + s1;\n          _v.i[3][0] = _cw ? p0 - s0 : p0 + s0;\n          _v.i[3][1] = p1 + s1 * cPoint;\n          _v.o[0][0] = _cw ? p0 + s0 * cPoint : p0 - s0 * cPoint;\n          _v.o[0][1] = p1 - s1;\n          _v.o[1][0] = _cw ? p0 + s0 : p0 - s0;\n          _v.o[1][1] = p1 + s1 * cPoint;\n          _v.o[2][0] = _cw ? p0 - s0 * cPoint : p0 + s0 * cPoint;\n          _v.o[2][1] = p1 + s1;\n          _v.o[3][0] = _cw ? p0 - s0 : p0 + s0;\n          _v.o[3][1] = p1 - s1 * cPoint;\n        }\n      };\n      extendPrototype([DynamicPropertyContainer], EllShapePropertyFactory);\n      return EllShapePropertyFactory;\n    }();\n\n    var StarShapeProperty = function () {\n      function StarShapePropertyFactory(elem, data) {\n        this.v = shapePool.newElement();\n        this.v.setPathData(true, 0);\n        this.elem = elem;\n        this.comp = elem.comp;\n        this.data = data;\n        this.frameId = -1;\n        this.d = data.d;\n        this.initDynamicPropertyContainer(elem);\n\n        if (data.sy === 1) {\n          this.ir = PropertyFactory.getProp(elem, data.ir, 0, 0, this);\n          this.is = PropertyFactory.getProp(elem, data.is, 0, 0.01, this);\n          this.convertToPath = this.convertStarToPath;\n        } else {\n          this.convertToPath = this.convertPolygonToPath;\n        }\n\n        this.pt = PropertyFactory.getProp(elem, data.pt, 0, 0, this);\n        this.p = PropertyFactory.getProp(elem, data.p, 1, 0, this);\n        this.r = PropertyFactory.getProp(elem, data.r, 0, degToRads, this);\n        this.or = PropertyFactory.getProp(elem, data.or, 0, 0, this);\n        this.os = PropertyFactory.getProp(elem, data.os, 0, 0.01, this);\n        this.localShapeCollection = shapeCollectionPool.newShapeCollection();\n        this.localShapeCollection.addShape(this.v);\n        this.paths = this.localShapeCollection;\n\n        if (this.dynamicProperties.length) {\n          this.k = true;\n        } else {\n          this.k = false;\n          this.convertToPath();\n        }\n      }\n\n      StarShapePropertyFactory.prototype = {\n        reset: resetShape,\n        getValue: function getValue() {\n          if (this.elem.globalData.frameId === this.frameId) {\n            return;\n          }\n\n          this.frameId = this.elem.globalData.frameId;\n          this.iterateDynamicProperties();\n\n          if (this._mdf) {\n            this.convertToPath();\n          }\n        },\n        convertStarToPath: function convertStarToPath() {\n          var numPts = Math.floor(this.pt.v) * 2;\n          var angle = Math.PI * 2 / numPts;\n          /* this.v.v.length = numPts;\r\n                  this.v.i.length = numPts;\r\n                  this.v.o.length = numPts; */\n\n          var longFlag = true;\n          var longRad = this.or.v;\n          var shortRad = this.ir.v;\n          var longRound = this.os.v;\n          var shortRound = this.is.v;\n          var longPerimSegment = 2 * Math.PI * longRad / (numPts * 2);\n          var shortPerimSegment = 2 * Math.PI * shortRad / (numPts * 2);\n          var i;\n          var rad;\n          var roundness;\n          var perimSegment;\n          var currentAng = -Math.PI / 2;\n          currentAng += this.r.v;\n          var dir = this.data.d === 3 ? -1 : 1;\n          this.v._length = 0;\n\n          for (i = 0; i < numPts; i += 1) {\n            rad = longFlag ? longRad : shortRad;\n            roundness = longFlag ? longRound : shortRound;\n            perimSegment = longFlag ? longPerimSegment : shortPerimSegment;\n            var x = rad * Math.cos(currentAng);\n            var y = rad * Math.sin(currentAng);\n            var ox = x === 0 && y === 0 ? 0 : y / Math.sqrt(x * x + y * y);\n            var oy = x === 0 && y === 0 ? 0 : -x / Math.sqrt(x * x + y * y);\n            x += +this.p.v[0];\n            y += +this.p.v[1];\n            this.v.setTripleAt(x, y, x - ox * perimSegment * roundness * dir, y - oy * perimSegment * roundness * dir, x + ox * perimSegment * roundness * dir, y + oy * perimSegment * roundness * dir, i, true);\n            /* this.v.v[i] = [x,y];\r\n                      this.v.i[i] = [x+ox*perimSegment*roundness*dir,y+oy*perimSegment*roundness*dir];\r\n                      this.v.o[i] = [x-ox*perimSegment*roundness*dir,y-oy*perimSegment*roundness*dir];\r\n                      this.v._length = numPts; */\n\n            longFlag = !longFlag;\n            currentAng += angle * dir;\n          }\n        },\n        convertPolygonToPath: function convertPolygonToPath() {\n          var numPts = Math.floor(this.pt.v);\n          var angle = Math.PI * 2 / numPts;\n          var rad = this.or.v;\n          var roundness = this.os.v;\n          var perimSegment = 2 * Math.PI * rad / (numPts * 4);\n          var i;\n          var currentAng = -Math.PI * 0.5;\n          var dir = this.data.d === 3 ? -1 : 1;\n          currentAng += this.r.v;\n          this.v._length = 0;\n\n          for (i = 0; i < numPts; i += 1) {\n            var x = rad * Math.cos(currentAng);\n            var y = rad * Math.sin(currentAng);\n            var ox = x === 0 && y === 0 ? 0 : y / Math.sqrt(x * x + y * y);\n            var oy = x === 0 && y === 0 ? 0 : -x / Math.sqrt(x * x + y * y);\n            x += +this.p.v[0];\n            y += +this.p.v[1];\n            this.v.setTripleAt(x, y, x - ox * perimSegment * roundness * dir, y - oy * perimSegment * roundness * dir, x + ox * perimSegment * roundness * dir, y + oy * perimSegment * roundness * dir, i, true);\n            currentAng += angle * dir;\n          }\n\n          this.paths.length = 0;\n          this.paths[0] = this.v;\n        }\n      };\n      extendPrototype([DynamicPropertyContainer], StarShapePropertyFactory);\n      return StarShapePropertyFactory;\n    }();\n\n    var RectShapeProperty = function () {\n      function RectShapePropertyFactory(elem, data) {\n        this.v = shapePool.newElement();\n        this.v.c = true;\n        this.localShapeCollection = shapeCollectionPool.newShapeCollection();\n        this.localShapeCollection.addShape(this.v);\n        this.paths = this.localShapeCollection;\n        this.elem = elem;\n        this.comp = elem.comp;\n        this.frameId = -1;\n        this.d = data.d;\n        this.initDynamicPropertyContainer(elem);\n        this.p = PropertyFactory.getProp(elem, data.p, 1, 0, this);\n        this.s = PropertyFactory.getProp(elem, data.s, 1, 0, this);\n        this.r = PropertyFactory.getProp(elem, data.r, 0, 0, this);\n\n        if (this.dynamicProperties.length) {\n          this.k = true;\n        } else {\n          this.k = false;\n          this.convertRectToPath();\n        }\n      }\n\n      RectShapePropertyFactory.prototype = {\n        convertRectToPath: function convertRectToPath() {\n          var p0 = this.p.v[0];\n          var p1 = this.p.v[1];\n          var v0 = this.s.v[0] / 2;\n          var v1 = this.s.v[1] / 2;\n          var round = bmMin(v0, v1, this.r.v);\n          var cPoint = round * (1 - roundCorner);\n          this.v._length = 0;\n\n          if (this.d === 2 || this.d === 1) {\n            this.v.setTripleAt(p0 + v0, p1 - v1 + round, p0 + v0, p1 - v1 + round, p0 + v0, p1 - v1 + cPoint, 0, true);\n            this.v.setTripleAt(p0 + v0, p1 + v1 - round, p0 + v0, p1 + v1 - cPoint, p0 + v0, p1 + v1 - round, 1, true);\n\n            if (round !== 0) {\n              this.v.setTripleAt(p0 + v0 - round, p1 + v1, p0 + v0 - round, p1 + v1, p0 + v0 - cPoint, p1 + v1, 2, true);\n              this.v.setTripleAt(p0 - v0 + round, p1 + v1, p0 - v0 + cPoint, p1 + v1, p0 - v0 + round, p1 + v1, 3, true);\n              this.v.setTripleAt(p0 - v0, p1 + v1 - round, p0 - v0, p1 + v1 - round, p0 - v0, p1 + v1 - cPoint, 4, true);\n              this.v.setTripleAt(p0 - v0, p1 - v1 + round, p0 - v0, p1 - v1 + cPoint, p0 - v0, p1 - v1 + round, 5, true);\n              this.v.setTripleAt(p0 - v0 + round, p1 - v1, p0 - v0 + round, p1 - v1, p0 - v0 + cPoint, p1 - v1, 6, true);\n              this.v.setTripleAt(p0 + v0 - round, p1 - v1, p0 + v0 - cPoint, p1 - v1, p0 + v0 - round, p1 - v1, 7, true);\n            } else {\n              this.v.setTripleAt(p0 - v0, p1 + v1, p0 - v0 + cPoint, p1 + v1, p0 - v0, p1 + v1, 2);\n              this.v.setTripleAt(p0 - v0, p1 - v1, p0 - v0, p1 - v1 + cPoint, p0 - v0, p1 - v1, 3);\n            }\n          } else {\n            this.v.setTripleAt(p0 + v0, p1 - v1 + round, p0 + v0, p1 - v1 + cPoint, p0 + v0, p1 - v1 + round, 0, true);\n\n            if (round !== 0) {\n              this.v.setTripleAt(p0 + v0 - round, p1 - v1, p0 + v0 - round, p1 - v1, p0 + v0 - cPoint, p1 - v1, 1, true);\n              this.v.setTripleAt(p0 - v0 + round, p1 - v1, p0 - v0 + cPoint, p1 - v1, p0 - v0 + round, p1 - v1, 2, true);\n              this.v.setTripleAt(p0 - v0, p1 - v1 + round, p0 - v0, p1 - v1 + round, p0 - v0, p1 - v1 + cPoint, 3, true);\n              this.v.setTripleAt(p0 - v0, p1 + v1 - round, p0 - v0, p1 + v1 - cPoint, p0 - v0, p1 + v1 - round, 4, true);\n              this.v.setTripleAt(p0 - v0 + round, p1 + v1, p0 - v0 + round, p1 + v1, p0 - v0 + cPoint, p1 + v1, 5, true);\n              this.v.setTripleAt(p0 + v0 - round, p1 + v1, p0 + v0 - cPoint, p1 + v1, p0 + v0 - round, p1 + v1, 6, true);\n              this.v.setTripleAt(p0 + v0, p1 + v1 - round, p0 + v0, p1 + v1 - round, p0 + v0, p1 + v1 - cPoint, 7, true);\n            } else {\n              this.v.setTripleAt(p0 - v0, p1 - v1, p0 - v0 + cPoint, p1 - v1, p0 - v0, p1 - v1, 1, true);\n              this.v.setTripleAt(p0 - v0, p1 + v1, p0 - v0, p1 + v1 - cPoint, p0 - v0, p1 + v1, 2, true);\n              this.v.setTripleAt(p0 + v0, p1 + v1, p0 + v0 - cPoint, p1 + v1, p0 + v0, p1 + v1, 3, true);\n            }\n          }\n        },\n        getValue: function getValue() {\n          if (this.elem.globalData.frameId === this.frameId) {\n            return;\n          }\n\n          this.frameId = this.elem.globalData.frameId;\n          this.iterateDynamicProperties();\n\n          if (this._mdf) {\n            this.convertRectToPath();\n          }\n        },\n        reset: resetShape\n      };\n      extendPrototype([DynamicPropertyContainer], RectShapePropertyFactory);\n      return RectShapePropertyFactory;\n    }();\n\n    function getShapeProp(elem, data, type) {\n      var prop;\n\n      if (type === 3 || type === 4) {\n        var dataProp = type === 3 ? data.pt : data.ks;\n        var keys = dataProp.k;\n\n        if (keys.length) {\n          prop = new KeyframedShapeProperty(elem, data, type);\n        } else {\n          prop = new ShapeProperty(elem, data, type);\n        }\n      } else if (type === 5) {\n        prop = new RectShapeProperty(elem, data);\n      } else if (type === 6) {\n        prop = new EllShapeProperty(elem, data);\n      } else if (type === 7) {\n        prop = new StarShapeProperty(elem, data);\n      }\n\n      if (prop.k) {\n        elem.addDynamicProperty(prop);\n      }\n\n      return prop;\n    }\n\n    function getConstructorFunction() {\n      return ShapeProperty;\n    }\n\n    function getKeyframedConstructorFunction() {\n      return KeyframedShapeProperty;\n    }\n\n    var ob = {};\n    ob.getShapeProp = getShapeProp;\n    ob.getConstructorFunction = getConstructorFunction;\n    ob.getKeyframedConstructorFunction = getKeyframedConstructorFunction;\n    return ob;\n  }();\n\n  /*!\r\n   Transformation Matrix v2.0\r\n   (c) Epistemex 2014-2015\r\n   www.epistemex.com\r\n   By Ken Fyrstenberg\r\n   Contributions by leeoniya.\r\n   License: MIT, header required.\r\n   */\n\n  /**\r\n   * 2D transformation matrix object initialized with identity matrix.\r\n   *\r\n   * The matrix can synchronize a canvas context by supplying the context\r\n   * as an argument, or later apply current absolute transform to an\r\n   * existing context.\r\n   *\r\n   * All values are handled as floating point values.\r\n   *\r\n   * @param {CanvasRenderingContext2D} [context] - Optional context to sync with Matrix\r\n   * @prop {number} a - scale x\r\n   * @prop {number} b - shear y\r\n   * @prop {number} c - shear x\r\n   * @prop {number} d - scale y\r\n   * @prop {number} e - translate x\r\n   * @prop {number} f - translate y\r\n   * @prop {CanvasRenderingContext2D|null} [context=null] - set or get current canvas context\r\n   * @constructor\r\n   */\n\n  var Matrix = function () {\n    var _cos = Math.cos;\n    var _sin = Math.sin;\n    var _tan = Math.tan;\n    var _rnd = Math.round;\n\n    function reset() {\n      this.props[0] = 1;\n      this.props[1] = 0;\n      this.props[2] = 0;\n      this.props[3] = 0;\n      this.props[4] = 0;\n      this.props[5] = 1;\n      this.props[6] = 0;\n      this.props[7] = 0;\n      this.props[8] = 0;\n      this.props[9] = 0;\n      this.props[10] = 1;\n      this.props[11] = 0;\n      this.props[12] = 0;\n      this.props[13] = 0;\n      this.props[14] = 0;\n      this.props[15] = 1;\n      return this;\n    }\n\n    function rotate(angle) {\n      if (angle === 0) {\n        return this;\n      }\n\n      var mCos = _cos(angle);\n\n      var mSin = _sin(angle);\n\n      return this._t(mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n    }\n\n    function rotateX(angle) {\n      if (angle === 0) {\n        return this;\n      }\n\n      var mCos = _cos(angle);\n\n      var mSin = _sin(angle);\n\n      return this._t(1, 0, 0, 0, 0, mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1);\n    }\n\n    function rotateY(angle) {\n      if (angle === 0) {\n        return this;\n      }\n\n      var mCos = _cos(angle);\n\n      var mSin = _sin(angle);\n\n      return this._t(mCos, 0, mSin, 0, 0, 1, 0, 0, -mSin, 0, mCos, 0, 0, 0, 0, 1);\n    }\n\n    function rotateZ(angle) {\n      if (angle === 0) {\n        return this;\n      }\n\n      var mCos = _cos(angle);\n\n      var mSin = _sin(angle);\n\n      return this._t(mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1);\n    }\n\n    function shear(sx, sy) {\n      return this._t(1, sy, sx, 1, 0, 0);\n    }\n\n    function skew(ax, ay) {\n      return this.shear(_tan(ax), _tan(ay));\n    }\n\n    function skewFromAxis(ax, angle) {\n      var mCos = _cos(angle);\n\n      var mSin = _sin(angle);\n\n      return this._t(mCos, mSin, 0, 0, -mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)._t(1, 0, 0, 0, _tan(ax), 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1)._t(mCos, -mSin, 0, 0, mSin, mCos, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); // return this._t(mCos, mSin, -mSin, mCos, 0, 0)._t(1, 0, _tan(ax), 1, 0, 0)._t(mCos, -mSin, mSin, mCos, 0, 0);\n    }\n\n    function scale(sx, sy, sz) {\n      if (!sz && sz !== 0) {\n        sz = 1;\n      }\n\n      if (sx === 1 && sy === 1 && sz === 1) {\n        return this;\n      }\n\n      return this._t(sx, 0, 0, 0, 0, sy, 0, 0, 0, 0, sz, 0, 0, 0, 0, 1);\n    }\n\n    function setTransform(a, b, c, d, e, f, g, h, i, j, k, l, m, n, o, p) {\n      this.props[0] = a;\n      this.props[1] = b;\n      this.props[2] = c;\n      this.props[3] = d;\n      this.props[4] = e;\n      this.props[5] = f;\n      this.props[6] = g;\n      this.props[7] = h;\n      this.props[8] = i;\n      this.props[9] = j;\n      this.props[10] = k;\n      this.props[11] = l;\n      this.props[12] = m;\n      this.props[13] = n;\n      this.props[14] = o;\n      this.props[15] = p;\n      return this;\n    }\n\n    function translate(tx, ty, tz) {\n      tz = tz || 0;\n\n      if (tx !== 0 || ty !== 0 || tz !== 0) {\n        return this._t(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, tx, ty, tz, 1);\n      }\n\n      return this;\n    }\n\n    function transform(a2, b2, c2, d2, e2, f2, g2, h2, i2, j2, k2, l2, m2, n2, o2, p2) {\n      var _p = this.props;\n\n      if (a2 === 1 && b2 === 0 && c2 === 0 && d2 === 0 && e2 === 0 && f2 === 1 && g2 === 0 && h2 === 0 && i2 === 0 && j2 === 0 && k2 === 1 && l2 === 0) {\n        // NOTE: commenting this condition because TurboFan deoptimizes code when present\n        // if(m2 !== 0 || n2 !== 0 || o2 !== 0){\n        _p[12] = _p[12] * a2 + _p[15] * m2;\n        _p[13] = _p[13] * f2 + _p[15] * n2;\n        _p[14] = _p[14] * k2 + _p[15] * o2;\n        _p[15] *= p2; // }\n\n        this._identityCalculated = false;\n        return this;\n      }\n\n      var a1 = _p[0];\n      var b1 = _p[1];\n      var c1 = _p[2];\n      var d1 = _p[3];\n      var e1 = _p[4];\n      var f1 = _p[5];\n      var g1 = _p[6];\n      var h1 = _p[7];\n      var i1 = _p[8];\n      var j1 = _p[9];\n      var k1 = _p[10];\n      var l1 = _p[11];\n      var m1 = _p[12];\n      var n1 = _p[13];\n      var o1 = _p[14];\n      var p1 = _p[15];\n      /* matrix order (canvas compatible):\r\n           * ace\r\n           * bdf\r\n           * 001\r\n           */\n\n      _p[0] = a1 * a2 + b1 * e2 + c1 * i2 + d1 * m2;\n      _p[1] = a1 * b2 + b1 * f2 + c1 * j2 + d1 * n2;\n      _p[2] = a1 * c2 + b1 * g2 + c1 * k2 + d1 * o2;\n      _p[3] = a1 * d2 + b1 * h2 + c1 * l2 + d1 * p2;\n      _p[4] = e1 * a2 + f1 * e2 + g1 * i2 + h1 * m2;\n      _p[5] = e1 * b2 + f1 * f2 + g1 * j2 + h1 * n2;\n      _p[6] = e1 * c2 + f1 * g2 + g1 * k2 + h1 * o2;\n      _p[7] = e1 * d2 + f1 * h2 + g1 * l2 + h1 * p2;\n      _p[8] = i1 * a2 + j1 * e2 + k1 * i2 + l1 * m2;\n      _p[9] = i1 * b2 + j1 * f2 + k1 * j2 + l1 * n2;\n      _p[10] = i1 * c2 + j1 * g2 + k1 * k2 + l1 * o2;\n      _p[11] = i1 * d2 + j1 * h2 + k1 * l2 + l1 * p2;\n      _p[12] = m1 * a2 + n1 * e2 + o1 * i2 + p1 * m2;\n      _p[13] = m1 * b2 + n1 * f2 + o1 * j2 + p1 * n2;\n      _p[14] = m1 * c2 + n1 * g2 + o1 * k2 + p1 * o2;\n      _p[15] = m1 * d2 + n1 * h2 + o1 * l2 + p1 * p2;\n      this._identityCalculated = false;\n      return this;\n    }\n\n    function isIdentity() {\n      if (!this._identityCalculated) {\n        this._identity = !(this.props[0] !== 1 || this.props[1] !== 0 || this.props[2] !== 0 || this.props[3] !== 0 || this.props[4] !== 0 || this.props[5] !== 1 || this.props[6] !== 0 || this.props[7] !== 0 || this.props[8] !== 0 || this.props[9] !== 0 || this.props[10] !== 1 || this.props[11] !== 0 || this.props[12] !== 0 || this.props[13] !== 0 || this.props[14] !== 0 || this.props[15] !== 1);\n        this._identityCalculated = true;\n      }\n\n      return this._identity;\n    }\n\n    function equals(matr) {\n      var i = 0;\n\n      while (i < 16) {\n        if (matr.props[i] !== this.props[i]) {\n          return false;\n        }\n\n        i += 1;\n      }\n\n      return true;\n    }\n\n    function clone(matr) {\n      var i;\n\n      for (i = 0; i < 16; i += 1) {\n        matr.props[i] = this.props[i];\n      }\n\n      return matr;\n    }\n\n    function cloneFromProps(props) {\n      var i;\n\n      for (i = 0; i < 16; i += 1) {\n        this.props[i] = props[i];\n      }\n    }\n\n    function applyToPoint(x, y, z) {\n      return {\n        x: x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12],\n        y: x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13],\n        z: x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14]\n      };\n      /* return {\r\n           x: x * me.a + y * me.c + me.e,\r\n           y: x * me.b + y * me.d + me.f\r\n           }; */\n    }\n\n    function applyToX(x, y, z) {\n      return x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12];\n    }\n\n    function applyToY(x, y, z) {\n      return x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13];\n    }\n\n    function applyToZ(x, y, z) {\n      return x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14];\n    }\n\n    function getInverseMatrix() {\n      var determinant = this.props[0] * this.props[5] - this.props[1] * this.props[4];\n      var a = this.props[5] / determinant;\n      var b = -this.props[1] / determinant;\n      var c = -this.props[4] / determinant;\n      var d = this.props[0] / determinant;\n      var e = (this.props[4] * this.props[13] - this.props[5] * this.props[12]) / determinant;\n      var f = -(this.props[0] * this.props[13] - this.props[1] * this.props[12]) / determinant;\n      var inverseMatrix = new Matrix();\n      inverseMatrix.props[0] = a;\n      inverseMatrix.props[1] = b;\n      inverseMatrix.props[4] = c;\n      inverseMatrix.props[5] = d;\n      inverseMatrix.props[12] = e;\n      inverseMatrix.props[13] = f;\n      return inverseMatrix;\n    }\n\n    function inversePoint(pt) {\n      var inverseMatrix = this.getInverseMatrix();\n      return inverseMatrix.applyToPointArray(pt[0], pt[1], pt[2] || 0);\n    }\n\n    function inversePoints(pts) {\n      var i;\n      var len = pts.length;\n      var retPts = [];\n\n      for (i = 0; i < len; i += 1) {\n        retPts[i] = inversePoint(pts[i]);\n      }\n\n      return retPts;\n    }\n\n    function applyToTriplePoints(pt1, pt2, pt3) {\n      var arr = createTypedArray('float32', 6);\n\n      if (this.isIdentity()) {\n        arr[0] = pt1[0];\n        arr[1] = pt1[1];\n        arr[2] = pt2[0];\n        arr[3] = pt2[1];\n        arr[4] = pt3[0];\n        arr[5] = pt3[1];\n      } else {\n        var p0 = this.props[0];\n        var p1 = this.props[1];\n        var p4 = this.props[4];\n        var p5 = this.props[5];\n        var p12 = this.props[12];\n        var p13 = this.props[13];\n        arr[0] = pt1[0] * p0 + pt1[1] * p4 + p12;\n        arr[1] = pt1[0] * p1 + pt1[1] * p5 + p13;\n        arr[2] = pt2[0] * p0 + pt2[1] * p4 + p12;\n        arr[3] = pt2[0] * p1 + pt2[1] * p5 + p13;\n        arr[4] = pt3[0] * p0 + pt3[1] * p4 + p12;\n        arr[5] = pt3[0] * p1 + pt3[1] * p5 + p13;\n      }\n\n      return arr;\n    }\n\n    function applyToPointArray(x, y, z) {\n      var arr;\n\n      if (this.isIdentity()) {\n        arr = [x, y, z];\n      } else {\n        arr = [x * this.props[0] + y * this.props[4] + z * this.props[8] + this.props[12], x * this.props[1] + y * this.props[5] + z * this.props[9] + this.props[13], x * this.props[2] + y * this.props[6] + z * this.props[10] + this.props[14]];\n      }\n\n      return arr;\n    }\n\n    function applyToPointStringified(x, y) {\n      if (this.isIdentity()) {\n        return x + ',' + y;\n      }\n\n      var _p = this.props;\n      return Math.round((x * _p[0] + y * _p[4] + _p[12]) * 100) / 100 + ',' + Math.round((x * _p[1] + y * _p[5] + _p[13]) * 100) / 100;\n    }\n\n    function toCSS() {\n      // Doesn't make much sense to add this optimization. If it is an identity matrix, it's very likely this will get called only once since it won't be keyframed.\n\n      /* if(this.isIdentity()) {\r\n              return '';\r\n          } */\n      var i = 0;\n      var props = this.props;\n      var cssValue = 'matrix3d(';\n      var v = 10000;\n\n      while (i < 16) {\n        cssValue += _rnd(props[i] * v) / v;\n        cssValue += i === 15 ? ')' : ',';\n        i += 1;\n      }\n\n      return cssValue;\n    }\n\n    function roundMatrixProperty(val) {\n      var v = 10000;\n\n      if (val < 0.000001 && val > 0 || val > -0.000001 && val < 0) {\n        return _rnd(val * v) / v;\n      }\n\n      return val;\n    }\n\n    function to2dCSS() {\n      // Doesn't make much sense to add this optimization. If it is an identity matrix, it's very likely this will get called only once since it won't be keyframed.\n\n      /* if(this.isIdentity()) {\r\n              return '';\r\n          } */\n      var props = this.props;\n\n      var _a = roundMatrixProperty(props[0]);\n\n      var _b = roundMatrixProperty(props[1]);\n\n      var _c = roundMatrixProperty(props[4]);\n\n      var _d = roundMatrixProperty(props[5]);\n\n      var _e = roundMatrixProperty(props[12]);\n\n      var _f = roundMatrixProperty(props[13]);\n\n      return 'matrix(' + _a + ',' + _b + ',' + _c + ',' + _d + ',' + _e + ',' + _f + ')';\n    }\n\n    return function () {\n      this.reset = reset;\n      this.rotate = rotate;\n      this.rotateX = rotateX;\n      this.rotateY = rotateY;\n      this.rotateZ = rotateZ;\n      this.skew = skew;\n      this.skewFromAxis = skewFromAxis;\n      this.shear = shear;\n      this.scale = scale;\n      this.setTransform = setTransform;\n      this.translate = translate;\n      this.transform = transform;\n      this.applyToPoint = applyToPoint;\n      this.applyToX = applyToX;\n      this.applyToY = applyToY;\n      this.applyToZ = applyToZ;\n      this.applyToPointArray = applyToPointArray;\n      this.applyToTriplePoints = applyToTriplePoints;\n      this.applyToPointStringified = applyToPointStringified;\n      this.toCSS = toCSS;\n      this.to2dCSS = to2dCSS;\n      this.clone = clone;\n      this.cloneFromProps = cloneFromProps;\n      this.equals = equals;\n      this.inversePoints = inversePoints;\n      this.inversePoint = inversePoint;\n      this.getInverseMatrix = getInverseMatrix;\n      this._t = this.transform;\n      this.isIdentity = isIdentity;\n      this._identity = true;\n      this._identityCalculated = false;\n      this.props = createTypedArray('float32', 16);\n      this.reset();\n    };\n  }();\n\n  function _typeof$3(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof$3 = function _typeof(obj) { return typeof obj; }; } else { _typeof$3 = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof$3(obj); }\n  var lottie = {};\n  var standalone = '__[STANDALONE]__';\n  var animationData = '__[ANIMATIONDATA]__';\n  var renderer = '';\n\n  function setLocation(href) {\n    setLocationHref(href);\n  }\n\n  function searchAnimations() {\n    if (standalone === true) {\n      animationManager.searchAnimations(animationData, standalone, renderer);\n    } else {\n      animationManager.searchAnimations();\n    }\n  }\n\n  function setSubframeRendering(flag) {\n    setSubframeEnabled(flag);\n  }\n\n  function setPrefix(prefix) {\n    setIdPrefix(prefix);\n  }\n\n  function loadAnimation(params) {\n    if (standalone === true) {\n      params.animationData = JSON.parse(animationData);\n    }\n\n    return animationManager.loadAnimation(params);\n  }\n\n  function setQuality(value) {\n    if (typeof value === 'string') {\n      switch (value) {\n        case 'high':\n          setDefaultCurveSegments(200);\n          break;\n\n        default:\n        case 'medium':\n          setDefaultCurveSegments(50);\n          break;\n\n        case 'low':\n          setDefaultCurveSegments(10);\n          break;\n      }\n    } else if (!isNaN(value) && value > 1) {\n      setDefaultCurveSegments(value);\n    }\n\n    if (getDefaultCurveSegments() >= 50) {\n      roundValues(false);\n    } else {\n      roundValues(true);\n    }\n  }\n\n  function inBrowser() {\n    return typeof navigator !== 'undefined';\n  }\n\n  function installPlugin(type, plugin) {\n    if (type === 'expressions') {\n      setExpressionsPlugin(plugin);\n    }\n  }\n\n  function getFactory(name) {\n    switch (name) {\n      case 'propertyFactory':\n        return PropertyFactory;\n\n      case 'shapePropertyFactory':\n        return ShapePropertyFactory;\n\n      case 'matrix':\n        return Matrix;\n\n      default:\n        return null;\n    }\n  }\n\n  lottie.play = animationManager.play;\n  lottie.pause = animationManager.pause;\n  lottie.setLocationHref = setLocation;\n  lottie.togglePause = animationManager.togglePause;\n  lottie.setSpeed = animationManager.setSpeed;\n  lottie.setDirection = animationManager.setDirection;\n  lottie.stop = animationManager.stop;\n  lottie.searchAnimations = searchAnimations;\n  lottie.registerAnimation = animationManager.registerAnimation;\n  lottie.loadAnimation = loadAnimation;\n  lottie.setSubframeRendering = setSubframeRendering;\n  lottie.resize = animationManager.resize; // lottie.start = start;\n\n  lottie.goToAndStop = animationManager.goToAndStop;\n  lottie.destroy = animationManager.destroy;\n  lottie.setQuality = setQuality;\n  lottie.inBrowser = inBrowser;\n  lottie.installPlugin = installPlugin;\n  lottie.freeze = animationManager.freeze;\n  lottie.unfreeze = animationManager.unfreeze;\n  lottie.setVolume = animationManager.setVolume;\n  lottie.mute = animationManager.mute;\n  lottie.unmute = animationManager.unmute;\n  lottie.getRegisteredAnimations = animationManager.getRegisteredAnimations;\n  lottie.useWebWorker = setWebWorker;\n  lottie.setIDPrefix = setPrefix;\n  lottie.__getFactory = getFactory;\n  lottie.version = '5.9.6';\n\n  function checkReady() {\n    if (document.readyState === 'complete') {\n      clearInterval(readyStateCheckInterval);\n      searchAnimations();\n    }\n  }\n\n  function getQueryVariable(variable) {\n    var vars = queryString.split('&');\n\n    for (var i = 0; i < vars.length; i += 1) {\n      var pair = vars[i].split('=');\n\n      if (decodeURIComponent(pair[0]) == variable) {\n        // eslint-disable-line eqeqeq\n        return decodeURIComponent(pair[1]);\n      }\n    }\n\n    return null;\n  }\n\n  var queryString = '';\n\n  if (standalone) {\n    var scripts = document.getElementsByTagName('script');\n    var index = scripts.length - 1;\n    var myScript = scripts[index] || {\n      src: ''\n    };\n    queryString = myScript.src ? myScript.src.replace(/^[^\\?]+\\??/, '') : ''; // eslint-disable-line no-useless-escape\n\n    renderer = getQueryVariable('renderer');\n  }\n\n  var readyStateCheckInterval = setInterval(checkReady, 100); // this adds bodymovin to the window object for backwards compatibility\n\n  try {\n    if (!((typeof exports === \"undefined\" ? \"undefined\" : _typeof$3(exports)) === 'object' && typeof module !== 'undefined') && !(typeof define === 'function' && define.amd) // eslint-disable-line no-undef\n    ) {\n      window.bodymovin = lottie;\n    }\n  } catch (err) {//\n  }\n\n  var ShapeModifiers = function () {\n    var ob = {};\n    var modifiers = {};\n    ob.registerModifier = registerModifier;\n    ob.getModifier = getModifier;\n\n    function registerModifier(nm, factory) {\n      if (!modifiers[nm]) {\n        modifiers[nm] = factory;\n      }\n    }\n\n    function getModifier(nm, elem, data) {\n      return new modifiers[nm](elem, data);\n    }\n\n    return ob;\n  }();\n\n  function ShapeModifier() {}\n\n  ShapeModifier.prototype.initModifierProperties = function () {};\n\n  ShapeModifier.prototype.addShapeToModifier = function () {};\n\n  ShapeModifier.prototype.addShape = function (data) {\n    if (!this.closed) {\n      // Adding shape to dynamic properties. It covers the case where a shape has no effects applied, to reset it's _mdf state on every tick.\n      data.sh.container.addDynamicProperty(data.sh);\n      var shapeData = {\n        shape: data.sh,\n        data: data,\n        localShapeCollection: shapeCollectionPool.newShapeCollection()\n      };\n      this.shapes.push(shapeData);\n      this.addShapeToModifier(shapeData);\n\n      if (this._isAnimated) {\n        data.setAsAnimated();\n      }\n    }\n  };\n\n  ShapeModifier.prototype.init = function (elem, data) {\n    this.shapes = [];\n    this.elem = elem;\n    this.initDynamicPropertyContainer(elem);\n    this.initModifierProperties(elem, data);\n    this.frameId = initialDefaultFrame;\n    this.closed = false;\n    this.k = false;\n\n    if (this.dynamicProperties.length) {\n      this.k = true;\n    } else {\n      this.getValue(true);\n    }\n  };\n\n  ShapeModifier.prototype.processKeys = function () {\n    if (this.elem.globalData.frameId === this.frameId) {\n      return;\n    }\n\n    this.frameId = this.elem.globalData.frameId;\n    this.iterateDynamicProperties();\n  };\n\n  extendPrototype([DynamicPropertyContainer], ShapeModifier);\n\n  function TrimModifier() {}\n\n  extendPrototype([ShapeModifier], TrimModifier);\n\n  TrimModifier.prototype.initModifierProperties = function (elem, data) {\n    this.s = PropertyFactory.getProp(elem, data.s, 0, 0.01, this);\n    this.e = PropertyFactory.getProp(elem, data.e, 0, 0.01, this);\n    this.o = PropertyFactory.getProp(elem, data.o, 0, 0, this);\n    this.sValue = 0;\n    this.eValue = 0;\n    this.getValue = this.processKeys;\n    this.m = data.m;\n    this._isAnimated = !!this.s.effectsSequence.length || !!this.e.effectsSequence.length || !!this.o.effectsSequence.length;\n  };\n\n  TrimModifier.prototype.addShapeToModifier = function (shapeData) {\n    shapeData.pathsData = [];\n  };\n\n  TrimModifier.prototype.calculateShapeEdges = function (s, e, shapeLength, addedLength, totalModifierLength) {\n    var segments = [];\n\n    if (e <= 1) {\n      segments.push({\n        s: s,\n        e: e\n      });\n    } else if (s >= 1) {\n      segments.push({\n        s: s - 1,\n        e: e - 1\n      });\n    } else {\n      segments.push({\n        s: s,\n        e: 1\n      });\n      segments.push({\n        s: 0,\n        e: e - 1\n      });\n    }\n\n    var shapeSegments = [];\n    var i;\n    var len = segments.length;\n    var segmentOb;\n\n    for (i = 0; i < len; i += 1) {\n      segmentOb = segments[i];\n\n      if (!(segmentOb.e * totalModifierLength < addedLength || segmentOb.s * totalModifierLength > addedLength + shapeLength)) {\n        var shapeS;\n        var shapeE;\n\n        if (segmentOb.s * totalModifierLength <= addedLength) {\n          shapeS = 0;\n        } else {\n          shapeS = (segmentOb.s * totalModifierLength - addedLength) / shapeLength;\n        }\n\n        if (segmentOb.e * totalModifierLength >= addedLength + shapeLength) {\n          shapeE = 1;\n        } else {\n          shapeE = (segmentOb.e * totalModifierLength - addedLength) / shapeLength;\n        }\n\n        shapeSegments.push([shapeS, shapeE]);\n      }\n    }\n\n    if (!shapeSegments.length) {\n      shapeSegments.push([0, 0]);\n    }\n\n    return shapeSegments;\n  };\n\n  TrimModifier.prototype.releasePathsData = function (pathsData) {\n    var i;\n    var len = pathsData.length;\n\n    for (i = 0; i < len; i += 1) {\n      segmentsLengthPool.release(pathsData[i]);\n    }\n\n    pathsData.length = 0;\n    return pathsData;\n  };\n\n  TrimModifier.prototype.processShapes = function (_isFirstFrame) {\n    var s;\n    var e;\n\n    if (this._mdf || _isFirstFrame) {\n      var o = this.o.v % 360 / 360;\n\n      if (o < 0) {\n        o += 1;\n      }\n\n      if (this.s.v > 1) {\n        s = 1 + o;\n      } else if (this.s.v < 0) {\n        s = 0 + o;\n      } else {\n        s = this.s.v + o;\n      }\n\n      if (this.e.v > 1) {\n        e = 1 + o;\n      } else if (this.e.v < 0) {\n        e = 0 + o;\n      } else {\n        e = this.e.v + o;\n      }\n\n      if (s > e) {\n        var _s = s;\n        s = e;\n        e = _s;\n      }\n\n      s = Math.round(s * 10000) * 0.0001;\n      e = Math.round(e * 10000) * 0.0001;\n      this.sValue = s;\n      this.eValue = e;\n    } else {\n      s = this.sValue;\n      e = this.eValue;\n    }\n\n    var shapePaths;\n    var i;\n    var len = this.shapes.length;\n    var j;\n    var jLen;\n    var pathsData;\n    var pathData;\n    var totalShapeLength;\n    var totalModifierLength = 0;\n\n    if (e === s) {\n      for (i = 0; i < len; i += 1) {\n        this.shapes[i].localShapeCollection.releaseShapes();\n        this.shapes[i].shape._mdf = true;\n        this.shapes[i].shape.paths = this.shapes[i].localShapeCollection;\n\n        if (this._mdf) {\n          this.shapes[i].pathsData.length = 0;\n        }\n      }\n    } else if (!(e === 1 && s === 0 || e === 0 && s === 1)) {\n      var segments = [];\n      var shapeData;\n      var localShapeCollection;\n\n      for (i = 0; i < len; i += 1) {\n        shapeData = this.shapes[i]; // if shape hasn't changed and trim properties haven't changed, cached previous path can be used\n\n        if (!shapeData.shape._mdf && !this._mdf && !_isFirstFrame && this.m !== 2) {\n          shapeData.shape.paths = shapeData.localShapeCollection;\n        } else {\n          shapePaths = shapeData.shape.paths;\n          jLen = shapePaths._length;\n          totalShapeLength = 0;\n\n          if (!shapeData.shape._mdf && shapeData.pathsData.length) {\n            totalShapeLength = shapeData.totalShapeLength;\n          } else {\n            pathsData = this.releasePathsData(shapeData.pathsData);\n\n            for (j = 0; j < jLen; j += 1) {\n              pathData = bez.getSegmentsLength(shapePaths.shapes[j]);\n              pathsData.push(pathData);\n              totalShapeLength += pathData.totalLength;\n            }\n\n            shapeData.totalShapeLength = totalShapeLength;\n            shapeData.pathsData = pathsData;\n          }\n\n          totalModifierLength += totalShapeLength;\n          shapeData.shape._mdf = true;\n        }\n      }\n\n      var shapeS = s;\n      var shapeE = e;\n      var addedLength = 0;\n      var edges;\n\n      for (i = len - 1; i >= 0; i -= 1) {\n        shapeData = this.shapes[i];\n\n        if (shapeData.shape._mdf) {\n          localShapeCollection = shapeData.localShapeCollection;\n          localShapeCollection.releaseShapes(); // if m === 2 means paths are trimmed individually so edges need to be found for this specific shape relative to whoel group\n\n          if (this.m === 2 && len > 1) {\n            edges = this.calculateShapeEdges(s, e, shapeData.totalShapeLength, addedLength, totalModifierLength);\n            addedLength += shapeData.totalShapeLength;\n          } else {\n            edges = [[shapeS, shapeE]];\n          }\n\n          jLen = edges.length;\n\n          for (j = 0; j < jLen; j += 1) {\n            shapeS = edges[j][0];\n            shapeE = edges[j][1];\n            segments.length = 0;\n\n            if (shapeE <= 1) {\n              segments.push({\n                s: shapeData.totalShapeLength * shapeS,\n                e: shapeData.totalShapeLength * shapeE\n              });\n            } else if (shapeS >= 1) {\n              segments.push({\n                s: shapeData.totalShapeLength * (shapeS - 1),\n                e: shapeData.totalShapeLength * (shapeE - 1)\n              });\n            } else {\n              segments.push({\n                s: shapeData.totalShapeLength * shapeS,\n                e: shapeData.totalShapeLength\n              });\n              segments.push({\n                s: 0,\n                e: shapeData.totalShapeLength * (shapeE - 1)\n              });\n            }\n\n            var newShapesData = this.addShapes(shapeData, segments[0]);\n\n            if (segments[0].s !== segments[0].e) {\n              if (segments.length > 1) {\n                var lastShapeInCollection = shapeData.shape.paths.shapes[shapeData.shape.paths._length - 1];\n\n                if (lastShapeInCollection.c) {\n                  var lastShape = newShapesData.pop();\n                  this.addPaths(newShapesData, localShapeCollection);\n                  newShapesData = this.addShapes(shapeData, segments[1], lastShape);\n                } else {\n                  this.addPaths(newShapesData, localShapeCollection);\n                  newShapesData = this.addShapes(shapeData, segments[1]);\n                }\n              }\n\n              this.addPaths(newShapesData, localShapeCollection);\n            }\n          }\n\n          shapeData.shape.paths = localShapeCollection;\n        }\n      }\n    } else if (this._mdf) {\n      for (i = 0; i < len; i += 1) {\n        // Releasign Trim Cached paths data when no trim applied in case shapes are modified inbetween.\n        // Don't remove this even if it's losing cached info.\n        this.shapes[i].pathsData.length = 0;\n        this.shapes[i].shape._mdf = true;\n      }\n    }\n  };\n\n  TrimModifier.prototype.addPaths = function (newPaths, localShapeCollection) {\n    var i;\n    var len = newPaths.length;\n\n    for (i = 0; i < len; i += 1) {\n      localShapeCollection.addShape(newPaths[i]);\n    }\n  };\n\n  TrimModifier.prototype.addSegment = function (pt1, pt2, pt3, pt4, shapePath, pos, newShape) {\n    shapePath.setXYAt(pt2[0], pt2[1], 'o', pos);\n    shapePath.setXYAt(pt3[0], pt3[1], 'i', pos + 1);\n\n    if (newShape) {\n      shapePath.setXYAt(pt1[0], pt1[1], 'v', pos);\n    }\n\n    shapePath.setXYAt(pt4[0], pt4[1], 'v', pos + 1);\n  };\n\n  TrimModifier.prototype.addSegmentFromArray = function (points, shapePath, pos, newShape) {\n    shapePath.setXYAt(points[1], points[5], 'o', pos);\n    shapePath.setXYAt(points[2], points[6], 'i', pos + 1);\n\n    if (newShape) {\n      shapePath.setXYAt(points[0], points[4], 'v', pos);\n    }\n\n    shapePath.setXYAt(points[3], points[7], 'v', pos + 1);\n  };\n\n  TrimModifier.prototype.addShapes = function (shapeData, shapeSegment, shapePath) {\n    var pathsData = shapeData.pathsData;\n    var shapePaths = shapeData.shape.paths.shapes;\n    var i;\n    var len = shapeData.shape.paths._length;\n    var j;\n    var jLen;\n    var addedLength = 0;\n    var currentLengthData;\n    var segmentCount;\n    var lengths;\n    var segment;\n    var shapes = [];\n    var initPos;\n    var newShape = true;\n\n    if (!shapePath) {\n      shapePath = shapePool.newElement();\n      segmentCount = 0;\n      initPos = 0;\n    } else {\n      segmentCount = shapePath._length;\n      initPos = shapePath._length;\n    }\n\n    shapes.push(shapePath);\n\n    for (i = 0; i < len; i += 1) {\n      lengths = pathsData[i].lengths;\n      shapePath.c = shapePaths[i].c;\n      jLen = shapePaths[i].c ? lengths.length : lengths.length + 1;\n\n      for (j = 1; j < jLen; j += 1) {\n        currentLengthData = lengths[j - 1];\n\n        if (addedLength + currentLengthData.addedLength < shapeSegment.s) {\n          addedLength += currentLengthData.addedLength;\n          shapePath.c = false;\n        } else if (addedLength > shapeSegment.e) {\n          shapePath.c = false;\n          break;\n        } else {\n          if (shapeSegment.s <= addedLength && shapeSegment.e >= addedLength + currentLengthData.addedLength) {\n            this.addSegment(shapePaths[i].v[j - 1], shapePaths[i].o[j - 1], shapePaths[i].i[j], shapePaths[i].v[j], shapePath, segmentCount, newShape);\n            newShape = false;\n          } else {\n            segment = bez.getNewSegment(shapePaths[i].v[j - 1], shapePaths[i].v[j], shapePaths[i].o[j - 1], shapePaths[i].i[j], (shapeSegment.s - addedLength) / currentLengthData.addedLength, (shapeSegment.e - addedLength) / currentLengthData.addedLength, lengths[j - 1]);\n            this.addSegmentFromArray(segment, shapePath, segmentCount, newShape); // this.addSegment(segment.pt1, segment.pt3, segment.pt4, segment.pt2, shapePath, segmentCount, newShape);\n\n            newShape = false;\n            shapePath.c = false;\n          }\n\n          addedLength += currentLengthData.addedLength;\n          segmentCount += 1;\n        }\n      }\n\n      if (shapePaths[i].c && lengths.length) {\n        currentLengthData = lengths[j - 1];\n\n        if (addedLength <= shapeSegment.e) {\n          var segmentLength = lengths[j - 1].addedLength;\n\n          if (shapeSegment.s <= addedLength && shapeSegment.e >= addedLength + segmentLength) {\n            this.addSegment(shapePaths[i].v[j - 1], shapePaths[i].o[j - 1], shapePaths[i].i[0], shapePaths[i].v[0], shapePath, segmentCount, newShape);\n            newShape = false;\n          } else {\n            segment = bez.getNewSegment(shapePaths[i].v[j - 1], shapePaths[i].v[0], shapePaths[i].o[j - 1], shapePaths[i].i[0], (shapeSegment.s - addedLength) / segmentLength, (shapeSegment.e - addedLength) / segmentLength, lengths[j - 1]);\n            this.addSegmentFromArray(segment, shapePath, segmentCount, newShape); // this.addSegment(segment.pt1, segment.pt3, segment.pt4, segment.pt2, shapePath, segmentCount, newShape);\n\n            newShape = false;\n            shapePath.c = false;\n          }\n        } else {\n          shapePath.c = false;\n        }\n\n        addedLength += currentLengthData.addedLength;\n        segmentCount += 1;\n      }\n\n      if (shapePath._length) {\n        shapePath.setXYAt(shapePath.v[initPos][0], shapePath.v[initPos][1], 'i', initPos);\n        shapePath.setXYAt(shapePath.v[shapePath._length - 1][0], shapePath.v[shapePath._length - 1][1], 'o', shapePath._length - 1);\n      }\n\n      if (addedLength > shapeSegment.e) {\n        break;\n      }\n\n      if (i < len - 1) {\n        shapePath = shapePool.newElement();\n        newShape = true;\n        shapes.push(shapePath);\n        segmentCount = 0;\n      }\n    }\n\n    return shapes;\n  };\n\n  function PuckerAndBloatModifier() {}\n\n  extendPrototype([ShapeModifier], PuckerAndBloatModifier);\n\n  PuckerAndBloatModifier.prototype.initModifierProperties = function (elem, data) {\n    this.getValue = this.processKeys;\n    this.amount = PropertyFactory.getProp(elem, data.a, 0, null, this);\n    this._isAnimated = !!this.amount.effectsSequence.length;\n  };\n\n  PuckerAndBloatModifier.prototype.processPath = function (path, amount) {\n    var percent = amount / 100;\n    var centerPoint = [0, 0];\n    var pathLength = path._length;\n    var i = 0;\n\n    for (i = 0; i < pathLength; i += 1) {\n      centerPoint[0] += path.v[i][0];\n      centerPoint[1] += path.v[i][1];\n    }\n\n    centerPoint[0] /= pathLength;\n    centerPoint[1] /= pathLength;\n    var clonedPath = shapePool.newElement();\n    clonedPath.c = path.c;\n    var vX;\n    var vY;\n    var oX;\n    var oY;\n    var iX;\n    var iY;\n\n    for (i = 0; i < pathLength; i += 1) {\n      vX = path.v[i][0] + (centerPoint[0] - path.v[i][0]) * percent;\n      vY = path.v[i][1] + (centerPoint[1] - path.v[i][1]) * percent;\n      oX = path.o[i][0] + (centerPoint[0] - path.o[i][0]) * -percent;\n      oY = path.o[i][1] + (centerPoint[1] - path.o[i][1]) * -percent;\n      iX = path.i[i][0] + (centerPoint[0] - path.i[i][0]) * -percent;\n      iY = path.i[i][1] + (centerPoint[1] - path.i[i][1]) * -percent;\n      clonedPath.setTripleAt(vX, vY, oX, oY, iX, iY, i);\n    }\n\n    return clonedPath;\n  };\n\n  PuckerAndBloatModifier.prototype.processShapes = function (_isFirstFrame) {\n    var shapePaths;\n    var i;\n    var len = this.shapes.length;\n    var j;\n    var jLen;\n    var amount = this.amount.v;\n\n    if (amount !== 0) {\n      var shapeData;\n      var localShapeCollection;\n\n      for (i = 0; i < len; i += 1) {\n        shapeData = this.shapes[i];\n        localShapeCollection = shapeData.localShapeCollection;\n\n        if (!(!shapeData.shape._mdf && !this._mdf && !_isFirstFrame)) {\n          localShapeCollection.releaseShapes();\n          shapeData.shape._mdf = true;\n          shapePaths = shapeData.shape.paths.shapes;\n          jLen = shapeData.shape.paths._length;\n\n          for (j = 0; j < jLen; j += 1) {\n            localShapeCollection.addShape(this.processPath(shapePaths[j], amount));\n          }\n        }\n\n        shapeData.shape.paths = shapeData.localShapeCollection;\n      }\n    }\n\n    if (!this.dynamicProperties.length) {\n      this._mdf = false;\n    }\n  };\n\n  var TransformPropertyFactory = function () {\n    var defaultVector = [0, 0];\n\n    function applyToMatrix(mat) {\n      var _mdf = this._mdf;\n      this.iterateDynamicProperties();\n      this._mdf = this._mdf || _mdf;\n\n      if (this.a) {\n        mat.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\n      }\n\n      if (this.s) {\n        mat.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\n      }\n\n      if (this.sk) {\n        mat.skewFromAxis(-this.sk.v, this.sa.v);\n      }\n\n      if (this.r) {\n        mat.rotate(-this.r.v);\n      } else {\n        mat.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);\n      }\n\n      if (this.data.p.s) {\n        if (this.data.p.z) {\n          mat.translate(this.px.v, this.py.v, -this.pz.v);\n        } else {\n          mat.translate(this.px.v, this.py.v, 0);\n        }\n      } else {\n        mat.translate(this.p.v[0], this.p.v[1], -this.p.v[2]);\n      }\n    }\n\n    function processKeys(forceRender) {\n      if (this.elem.globalData.frameId === this.frameId) {\n        return;\n      }\n\n      if (this._isDirty) {\n        this.precalculateMatrix();\n        this._isDirty = false;\n      }\n\n      this.iterateDynamicProperties();\n\n      if (this._mdf || forceRender) {\n        var frameRate;\n        this.v.cloneFromProps(this.pre.props);\n\n        if (this.appliedTransformations < 1) {\n          this.v.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\n        }\n\n        if (this.appliedTransformations < 2) {\n          this.v.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\n        }\n\n        if (this.sk && this.appliedTransformations < 3) {\n          this.v.skewFromAxis(-this.sk.v, this.sa.v);\n        }\n\n        if (this.r && this.appliedTransformations < 4) {\n          this.v.rotate(-this.r.v);\n        } else if (!this.r && this.appliedTransformations < 4) {\n          this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);\n        }\n\n        if (this.autoOriented) {\n          var v1;\n          var v2;\n          frameRate = this.elem.globalData.frameRate;\n\n          if (this.p && this.p.keyframes && this.p.getValueAtTime) {\n            if (this.p._caching.lastFrame + this.p.offsetTime <= this.p.keyframes[0].t) {\n              v1 = this.p.getValueAtTime((this.p.keyframes[0].t + 0.01) / frameRate, 0);\n              v2 = this.p.getValueAtTime(this.p.keyframes[0].t / frameRate, 0);\n            } else if (this.p._caching.lastFrame + this.p.offsetTime >= this.p.keyframes[this.p.keyframes.length - 1].t) {\n              v1 = this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length - 1].t / frameRate, 0);\n              v2 = this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length - 1].t - 0.05) / frameRate, 0);\n            } else {\n              v1 = this.p.pv;\n              v2 = this.p.getValueAtTime((this.p._caching.lastFrame + this.p.offsetTime - 0.01) / frameRate, this.p.offsetTime);\n            }\n          } else if (this.px && this.px.keyframes && this.py.keyframes && this.px.getValueAtTime && this.py.getValueAtTime) {\n            v1 = [];\n            v2 = [];\n            var px = this.px;\n            var py = this.py;\n\n            if (px._caching.lastFrame + px.offsetTime <= px.keyframes[0].t) {\n              v1[0] = px.getValueAtTime((px.keyframes[0].t + 0.01) / frameRate, 0);\n              v1[1] = py.getValueAtTime((py.keyframes[0].t + 0.01) / frameRate, 0);\n              v2[0] = px.getValueAtTime(px.keyframes[0].t / frameRate, 0);\n              v2[1] = py.getValueAtTime(py.keyframes[0].t / frameRate, 0);\n            } else if (px._caching.lastFrame + px.offsetTime >= px.keyframes[px.keyframes.length - 1].t) {\n              v1[0] = px.getValueAtTime(px.keyframes[px.keyframes.length - 1].t / frameRate, 0);\n              v1[1] = py.getValueAtTime(py.keyframes[py.keyframes.length - 1].t / frameRate, 0);\n              v2[0] = px.getValueAtTime((px.keyframes[px.keyframes.length - 1].t - 0.01) / frameRate, 0);\n              v2[1] = py.getValueAtTime((py.keyframes[py.keyframes.length - 1].t - 0.01) / frameRate, 0);\n            } else {\n              v1 = [px.pv, py.pv];\n              v2[0] = px.getValueAtTime((px._caching.lastFrame + px.offsetTime - 0.01) / frameRate, px.offsetTime);\n              v2[1] = py.getValueAtTime((py._caching.lastFrame + py.offsetTime - 0.01) / frameRate, py.offsetTime);\n            }\n          } else {\n            v2 = defaultVector;\n            v1 = v2;\n          }\n\n          this.v.rotate(-Math.atan2(v1[1] - v2[1], v1[0] - v2[0]));\n        }\n\n        if (this.data.p && this.data.p.s) {\n          if (this.data.p.z) {\n            this.v.translate(this.px.v, this.py.v, -this.pz.v);\n          } else {\n            this.v.translate(this.px.v, this.py.v, 0);\n          }\n        } else {\n          this.v.translate(this.p.v[0], this.p.v[1], -this.p.v[2]);\n        }\n      }\n\n      this.frameId = this.elem.globalData.frameId;\n    }\n\n    function precalculateMatrix() {\n      if (!this.a.k) {\n        this.pre.translate(-this.a.v[0], -this.a.v[1], this.a.v[2]);\n        this.appliedTransformations = 1;\n      } else {\n        return;\n      }\n\n      if (!this.s.effectsSequence.length) {\n        this.pre.scale(this.s.v[0], this.s.v[1], this.s.v[2]);\n        this.appliedTransformations = 2;\n      } else {\n        return;\n      }\n\n      if (this.sk) {\n        if (!this.sk.effectsSequence.length && !this.sa.effectsSequence.length) {\n          this.pre.skewFromAxis(-this.sk.v, this.sa.v);\n          this.appliedTransformations = 3;\n        } else {\n          return;\n        }\n      }\n\n      if (this.r) {\n        if (!this.r.effectsSequence.length) {\n          this.pre.rotate(-this.r.v);\n          this.appliedTransformations = 4;\n        }\n      } else if (!this.rz.effectsSequence.length && !this.ry.effectsSequence.length && !this.rx.effectsSequence.length && !this.or.effectsSequence.length) {\n        this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]);\n        this.appliedTransformations = 4;\n      }\n    }\n\n    function autoOrient() {//\n      // var prevP = this.getValueAtTime();\n    }\n\n    function addDynamicProperty(prop) {\n      this._addDynamicProperty(prop);\n\n      this.elem.addDynamicProperty(prop);\n      this._isDirty = true;\n    }\n\n    function TransformProperty(elem, data, container) {\n      this.elem = elem;\n      this.frameId = -1;\n      this.propType = 'transform';\n      this.data = data;\n      this.v = new Matrix(); // Precalculated matrix with non animated properties\n\n      this.pre = new Matrix();\n      this.appliedTransformations = 0;\n      this.initDynamicPropertyContainer(container || elem);\n\n      if (data.p && data.p.s) {\n        this.px = PropertyFactory.getProp(elem, data.p.x, 0, 0, this);\n        this.py = PropertyFactory.getProp(elem, data.p.y, 0, 0, this);\n\n        if (data.p.z) {\n          this.pz = PropertyFactory.getProp(elem, data.p.z, 0, 0, this);\n        }\n      } else {\n        this.p = PropertyFactory.getProp(elem, data.p || {\n          k: [0, 0, 0]\n        }, 1, 0, this);\n      }\n\n      if (data.rx) {\n        this.rx = PropertyFactory.getProp(elem, data.rx, 0, degToRads, this);\n        this.ry = PropertyFactory.getProp(elem, data.ry, 0, degToRads, this);\n        this.rz = PropertyFactory.getProp(elem, data.rz, 0, degToRads, this);\n\n        if (data.or.k[0].ti) {\n          var i;\n          var len = data.or.k.length;\n\n          for (i = 0; i < len; i += 1) {\n            data.or.k[i].to = null;\n            data.or.k[i].ti = null;\n          }\n        }\n\n        this.or = PropertyFactory.getProp(elem, data.or, 1, degToRads, this); // sh Indicates it needs to be capped between -180 and 180\n\n        this.or.sh = true;\n      } else {\n        this.r = PropertyFactory.getProp(elem, data.r || {\n          k: 0\n        }, 0, degToRads, this);\n      }\n\n      if (data.sk) {\n        this.sk = PropertyFactory.getProp(elem, data.sk, 0, degToRads, this);\n        this.sa = PropertyFactory.getProp(elem, data.sa, 0, degToRads, this);\n      }\n\n      this.a = PropertyFactory.getProp(elem, data.a || {\n        k: [0, 0, 0]\n      }, 1, 0, this);\n      this.s = PropertyFactory.getProp(elem, data.s || {\n        k: [100, 100, 100]\n      }, 1, 0.01, this); // Opacity is not part of the transform properties, that's why it won't use this.dynamicProperties. That way transforms won't get updated if opacity changes.\n\n      if (data.o) {\n        this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, elem);\n      } else {\n        this.o = {\n          _mdf: false,\n          v: 1\n        };\n      }\n\n      this._isDirty = true;\n\n      if (!this.dynamicProperties.length) {\n        this.getValue(true);\n      }\n    }\n\n    TransformProperty.prototype = {\n      applyToMatrix: applyToMatrix,\n      getValue: processKeys,\n      precalculateMatrix: precalculateMatrix,\n      autoOrient: autoOrient\n    };\n    extendPrototype([DynamicPropertyContainer], TransformProperty);\n    TransformProperty.prototype.addDynamicProperty = addDynamicProperty;\n    TransformProperty.prototype._addDynamicProperty = DynamicPropertyContainer.prototype.addDynamicProperty;\n\n    function getTransformProperty(elem, data, container) {\n      return new TransformProperty(elem, data, container);\n    }\n\n    return {\n      getTransformProperty: getTransformProperty\n    };\n  }();\n\n  function RepeaterModifier() {}\n\n  extendPrototype([ShapeModifier], RepeaterModifier);\n\n  RepeaterModifier.prototype.initModifierProperties = function (elem, data) {\n    this.getValue = this.processKeys;\n    this.c = PropertyFactory.getProp(elem, data.c, 0, null, this);\n    this.o = PropertyFactory.getProp(elem, data.o, 0, null, this);\n    this.tr = TransformPropertyFactory.getTransformProperty(elem, data.tr, this);\n    this.so = PropertyFactory.getProp(elem, data.tr.so, 0, 0.01, this);\n    this.eo = PropertyFactory.getProp(elem, data.tr.eo, 0, 0.01, this);\n    this.data = data;\n\n    if (!this.dynamicProperties.length) {\n      this.getValue(true);\n    }\n\n    this._isAnimated = !!this.dynamicProperties.length;\n    this.pMatrix = new Matrix();\n    this.rMatrix = new Matrix();\n    this.sMatrix = new Matrix();\n    this.tMatrix = new Matrix();\n    this.matrix = new Matrix();\n  };\n\n  RepeaterModifier.prototype.applyTransforms = function (pMatrix, rMatrix, sMatrix, transform, perc, inv) {\n    var dir = inv ? -1 : 1;\n    var scaleX = transform.s.v[0] + (1 - transform.s.v[0]) * (1 - perc);\n    var scaleY = transform.s.v[1] + (1 - transform.s.v[1]) * (1 - perc);\n    pMatrix.translate(transform.p.v[0] * dir * perc, transform.p.v[1] * dir * perc, transform.p.v[2]);\n    rMatrix.translate(-transform.a.v[0], -transform.a.v[1], transform.a.v[2]);\n    rMatrix.rotate(-transform.r.v * dir * perc);\n    rMatrix.translate(transform.a.v[0], transform.a.v[1], transform.a.v[2]);\n    sMatrix.translate(-transform.a.v[0], -transform.a.v[1], transform.a.v[2]);\n    sMatrix.scale(inv ? 1 / scaleX : scaleX, inv ? 1 / scaleY : scaleY);\n    sMatrix.translate(transform.a.v[0], transform.a.v[1], transform.a.v[2]);\n  };\n\n  RepeaterModifier.prototype.init = function (elem, arr, pos, elemsData) {\n    this.elem = elem;\n    this.arr = arr;\n    this.pos = pos;\n    this.elemsData = elemsData;\n    this._currentCopies = 0;\n    this._elements = [];\n    this._groups = [];\n    this.frameId = -1;\n    this.initDynamicPropertyContainer(elem);\n    this.initModifierProperties(elem, arr[pos]);\n\n    while (pos > 0) {\n      pos -= 1; // this._elements.unshift(arr.splice(pos,1)[0]);\n\n      this._elements.unshift(arr[pos]);\n    }\n\n    if (this.dynamicProperties.length) {\n      this.k = true;\n    } else {\n      this.getValue(true);\n    }\n  };\n\n  RepeaterModifier.prototype.resetElements = function (elements) {\n    var i;\n    var len = elements.length;\n\n    for (i = 0; i < len; i += 1) {\n      elements[i]._processed = false;\n\n      if (elements[i].ty === 'gr') {\n        this.resetElements(elements[i].it);\n      }\n    }\n  };\n\n  RepeaterModifier.prototype.cloneElements = function (elements) {\n    var newElements = JSON.parse(JSON.stringify(elements));\n    this.resetElements(newElements);\n    return newElements;\n  };\n\n  RepeaterModifier.prototype.changeGroupRender = function (elements, renderFlag) {\n    var i;\n    var len = elements.length;\n\n    for (i = 0; i < len; i += 1) {\n      elements[i]._render = renderFlag;\n\n      if (elements[i].ty === 'gr') {\n        this.changeGroupRender(elements[i].it, renderFlag);\n      }\n    }\n  };\n\n  RepeaterModifier.prototype.processShapes = function (_isFirstFrame) {\n    var items;\n    var itemsTransform;\n    var i;\n    var dir;\n    var cont;\n    var hasReloaded = false;\n\n    if (this._mdf || _isFirstFrame) {\n      var copies = Math.ceil(this.c.v);\n\n      if (this._groups.length < copies) {\n        while (this._groups.length < copies) {\n          var group = {\n            it: this.cloneElements(this._elements),\n            ty: 'gr'\n          };\n          group.it.push({\n            a: {\n              a: 0,\n              ix: 1,\n              k: [0, 0]\n            },\n            nm: 'Transform',\n            o: {\n              a: 0,\n              ix: 7,\n              k: 100\n            },\n            p: {\n              a: 0,\n              ix: 2,\n              k: [0, 0]\n            },\n            r: {\n              a: 1,\n              ix: 6,\n              k: [{\n                s: 0,\n                e: 0,\n                t: 0\n              }, {\n                s: 0,\n                e: 0,\n                t: 1\n              }]\n            },\n            s: {\n              a: 0,\n              ix: 3,\n              k: [100, 100]\n            },\n            sa: {\n              a: 0,\n              ix: 5,\n              k: 0\n            },\n            sk: {\n              a: 0,\n              ix: 4,\n              k: 0\n            },\n            ty: 'tr'\n          });\n          this.arr.splice(0, 0, group);\n\n          this._groups.splice(0, 0, group);\n\n          this._currentCopies += 1;\n        }\n\n        this.elem.reloadShapes();\n        hasReloaded = true;\n      }\n\n      cont = 0;\n      var renderFlag;\n\n      for (i = 0; i <= this._groups.length - 1; i += 1) {\n        renderFlag = cont < copies;\n        this._groups[i]._render = renderFlag;\n        this.changeGroupRender(this._groups[i].it, renderFlag);\n\n        if (!renderFlag) {\n          var elems = this.elemsData[i].it;\n          var transformData = elems[elems.length - 1];\n\n          if (transformData.transform.op.v !== 0) {\n            transformData.transform.op._mdf = true;\n            transformData.transform.op.v = 0;\n          } else {\n            transformData.transform.op._mdf = false;\n          }\n        }\n\n        cont += 1;\n      }\n\n      this._currentCopies = copies; /// /\n\n      var offset = this.o.v;\n      var offsetModulo = offset % 1;\n      var roundOffset = offset > 0 ? Math.floor(offset) : Math.ceil(offset);\n      var pProps = this.pMatrix.props;\n      var rProps = this.rMatrix.props;\n      var sProps = this.sMatrix.props;\n      this.pMatrix.reset();\n      this.rMatrix.reset();\n      this.sMatrix.reset();\n      this.tMatrix.reset();\n      this.matrix.reset();\n      var iteration = 0;\n\n      if (offset > 0) {\n        while (iteration < roundOffset) {\n          this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, false);\n          iteration += 1;\n        }\n\n        if (offsetModulo) {\n          this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, offsetModulo, false);\n          iteration += offsetModulo;\n        }\n      } else if (offset < 0) {\n        while (iteration > roundOffset) {\n          this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, true);\n          iteration -= 1;\n        }\n\n        if (offsetModulo) {\n          this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, -offsetModulo, true);\n          iteration -= offsetModulo;\n        }\n      }\n\n      i = this.data.m === 1 ? 0 : this._currentCopies - 1;\n      dir = this.data.m === 1 ? 1 : -1;\n      cont = this._currentCopies;\n      var j;\n      var jLen;\n\n      while (cont) {\n        items = this.elemsData[i].it;\n        itemsTransform = items[items.length - 1].transform.mProps.v.props;\n        jLen = itemsTransform.length;\n        items[items.length - 1].transform.mProps._mdf = true;\n        items[items.length - 1].transform.op._mdf = true;\n        items[items.length - 1].transform.op.v = this._currentCopies === 1 ? this.so.v : this.so.v + (this.eo.v - this.so.v) * (i / (this._currentCopies - 1));\n\n        if (iteration !== 0) {\n          if (i !== 0 && dir === 1 || i !== this._currentCopies - 1 && dir === -1) {\n            this.applyTransforms(this.pMatrix, this.rMatrix, this.sMatrix, this.tr, 1, false);\n          }\n\n          this.matrix.transform(rProps[0], rProps[1], rProps[2], rProps[3], rProps[4], rProps[5], rProps[6], rProps[7], rProps[8], rProps[9], rProps[10], rProps[11], rProps[12], rProps[13], rProps[14], rProps[15]);\n          this.matrix.transform(sProps[0], sProps[1], sProps[2], sProps[3], sProps[4], sProps[5], sProps[6], sProps[7], sProps[8], sProps[9], sProps[10], sProps[11], sProps[12], sProps[13], sProps[14], sProps[15]);\n          this.matrix.transform(pProps[0], pProps[1], pProps[2], pProps[3], pProps[4], pProps[5], pProps[6], pProps[7], pProps[8], pProps[9], pProps[10], pProps[11], pProps[12], pProps[13], pProps[14], pProps[15]);\n\n          for (j = 0; j < jLen; j += 1) {\n            itemsTransform[j] = this.matrix.props[j];\n          }\n\n          this.matrix.reset();\n        } else {\n          this.matrix.reset();\n\n          for (j = 0; j < jLen; j += 1) {\n            itemsTransform[j] = this.matrix.props[j];\n          }\n        }\n\n        iteration += 1;\n        cont -= 1;\n        i += dir;\n      }\n    } else {\n      cont = this._currentCopies;\n      i = 0;\n      dir = 1;\n\n      while (cont) {\n        items = this.elemsData[i].it;\n        itemsTransform = items[items.length - 1].transform.mProps.v.props;\n        items[items.length - 1].transform.mProps._mdf = false;\n        items[items.length - 1].transform.op._mdf = false;\n        cont -= 1;\n        i += dir;\n      }\n    }\n\n    return hasReloaded;\n  };\n\n  RepeaterModifier.prototype.addShape = function () {};\n\n  function RoundCornersModifier() {}\n\n  extendPrototype([ShapeModifier], RoundCornersModifier);\n\n  RoundCornersModifier.prototype.initModifierProperties = function (elem, data) {\n    this.getValue = this.processKeys;\n    this.rd = PropertyFactory.getProp(elem, data.r, 0, null, this);\n    this._isAnimated = !!this.rd.effectsSequence.length;\n  };\n\n  RoundCornersModifier.prototype.processPath = function (path, round) {\n    var clonedPath = shapePool.newElement();\n    clonedPath.c = path.c;\n    var i;\n    var len = path._length;\n    var currentV;\n    var currentI;\n    var currentO;\n    var closerV;\n    var distance;\n    var newPosPerc;\n    var index = 0;\n    var vX;\n    var vY;\n    var oX;\n    var oY;\n    var iX;\n    var iY;\n\n    for (i = 0; i < len; i += 1) {\n      currentV = path.v[i];\n      currentO = path.o[i];\n      currentI = path.i[i];\n\n      if (currentV[0] === currentO[0] && currentV[1] === currentO[1] && currentV[0] === currentI[0] && currentV[1] === currentI[1]) {\n        if ((i === 0 || i === len - 1) && !path.c) {\n          clonedPath.setTripleAt(currentV[0], currentV[1], currentO[0], currentO[1], currentI[0], currentI[1], index);\n          /* clonedPath.v[index] = currentV;\r\n                  clonedPath.o[index] = currentO;\r\n                  clonedPath.i[index] = currentI; */\n\n          index += 1;\n        } else {\n          if (i === 0) {\n            closerV = path.v[len - 1];\n          } else {\n            closerV = path.v[i - 1];\n          }\n\n          distance = Math.sqrt(Math.pow(currentV[0] - closerV[0], 2) + Math.pow(currentV[1] - closerV[1], 2));\n          newPosPerc = distance ? Math.min(distance / 2, round) / distance : 0;\n          iX = currentV[0] + (closerV[0] - currentV[0]) * newPosPerc;\n          vX = iX;\n          iY = currentV[1] - (currentV[1] - closerV[1]) * newPosPerc;\n          vY = iY;\n          oX = vX - (vX - currentV[0]) * roundCorner;\n          oY = vY - (vY - currentV[1]) * roundCorner;\n          clonedPath.setTripleAt(vX, vY, oX, oY, iX, iY, index);\n          index += 1;\n\n          if (i === len - 1) {\n            closerV = path.v[0];\n          } else {\n            closerV = path.v[i + 1];\n          }\n\n          distance = Math.sqrt(Math.pow(currentV[0] - closerV[0], 2) + Math.pow(currentV[1] - closerV[1], 2));\n          newPosPerc = distance ? Math.min(distance / 2, round) / distance : 0;\n          oX = currentV[0] + (closerV[0] - currentV[0]) * newPosPerc;\n          vX = oX;\n          oY = currentV[1] + (closerV[1] - currentV[1]) * newPosPerc;\n          vY = oY;\n          iX = vX - (vX - currentV[0]) * roundCorner;\n          iY = vY - (vY - currentV[1]) * roundCorner;\n          clonedPath.setTripleAt(vX, vY, oX, oY, iX, iY, index);\n          index += 1;\n        }\n      } else {\n        clonedPath.setTripleAt(path.v[i][0], path.v[i][1], path.o[i][0], path.o[i][1], path.i[i][0], path.i[i][1], index);\n        index += 1;\n      }\n    }\n\n    return clonedPath;\n  };\n\n  RoundCornersModifier.prototype.processShapes = function (_isFirstFrame) {\n    var shapePaths;\n    var i;\n    var len = this.shapes.length;\n    var j;\n    var jLen;\n    var rd = this.rd.v;\n\n    if (rd !== 0) {\n      var shapeData;\n      var localShapeCollection;\n\n      for (i = 0; i < len; i += 1) {\n        shapeData = this.shapes[i];\n        localShapeCollection = shapeData.localShapeCollection;\n\n        if (!(!shapeData.shape._mdf && !this._mdf && !_isFirstFrame)) {\n          localShapeCollection.releaseShapes();\n          shapeData.shape._mdf = true;\n          shapePaths = shapeData.shape.paths.shapes;\n          jLen = shapeData.shape.paths._length;\n\n          for (j = 0; j < jLen; j += 1) {\n            localShapeCollection.addShape(this.processPath(shapePaths[j], rd));\n          }\n        }\n\n        shapeData.shape.paths = shapeData.localShapeCollection;\n      }\n    }\n\n    if (!this.dynamicProperties.length) {\n      this._mdf = false;\n    }\n  };\n\n  function getFontProperties(fontData) {\n    var styles = fontData.fStyle ? fontData.fStyle.split(' ') : [];\n    var fWeight = 'normal';\n    var fStyle = 'normal';\n    var len = styles.length;\n    var styleName;\n\n    for (var i = 0; i < len; i += 1) {\n      styleName = styles[i].toLowerCase();\n\n      switch (styleName) {\n        case 'italic':\n          fStyle = 'italic';\n          break;\n\n        case 'bold':\n          fWeight = '700';\n          break;\n\n        case 'black':\n          fWeight = '900';\n          break;\n\n        case 'medium':\n          fWeight = '500';\n          break;\n\n        case 'regular':\n        case 'normal':\n          fWeight = '400';\n          break;\n\n        case 'light':\n        case 'thin':\n          fWeight = '200';\n          break;\n\n        default:\n          break;\n      }\n    }\n\n    return {\n      style: fStyle,\n      weight: fontData.fWeight || fWeight\n    };\n  }\n\n  var FontManager = function () {\n    var maxWaitingTime = 5000;\n    var emptyChar = {\n      w: 0,\n      size: 0,\n      shapes: [],\n      data: {\n        shapes: []\n      }\n    };\n    var combinedCharacters = []; // Hindi characters\n\n    combinedCharacters = combinedCharacters.concat([2304, 2305, 2306, 2307, 2362, 2363, 2364, 2364, 2366, 2367, 2368, 2369, 2370, 2371, 2372, 2373, 2374, 2375, 2376, 2377, 2378, 2379, 2380, 2381, 2382, 2383, 2387, 2388, 2389, 2390, 2391, 2402, 2403]);\n    var surrogateModifiers = ['d83cdffb', 'd83cdffc', 'd83cdffd', 'd83cdffe', 'd83cdfff'];\n    var zeroWidthJoiner = [65039, 8205];\n\n    function trimFontOptions(font) {\n      var familyArray = font.split(',');\n      var i;\n      var len = familyArray.length;\n      var enabledFamilies = [];\n\n      for (i = 0; i < len; i += 1) {\n        if (familyArray[i] !== 'sans-serif' && familyArray[i] !== 'monospace') {\n          enabledFamilies.push(familyArray[i]);\n        }\n      }\n\n      return enabledFamilies.join(',');\n    }\n\n    function setUpNode(font, family) {\n      var parentNode = createTag('span'); // Node is invisible to screen readers.\n\n      parentNode.setAttribute('aria-hidden', true);\n      parentNode.style.fontFamily = family;\n      var node = createTag('span'); // Characters that vary significantly among different fonts\n\n      node.innerText = 'giItT1WQy@!-/#'; // Visible - so we can measure it - but not on the screen\n\n      parentNode.style.position = 'absolute';\n      parentNode.style.left = '-10000px';\n      parentNode.style.top = '-10000px'; // Large font size makes even subtle changes obvious\n\n      parentNode.style.fontSize = '300px'; // Reset any font properties\n\n      parentNode.style.fontVariant = 'normal';\n      parentNode.style.fontStyle = 'normal';\n      parentNode.style.fontWeight = 'normal';\n      parentNode.style.letterSpacing = '0';\n      parentNode.appendChild(node);\n      document.body.appendChild(parentNode); // Remember width with no applied web font\n\n      var width = node.offsetWidth;\n      node.style.fontFamily = trimFontOptions(font) + ', ' + family;\n      return {\n        node: node,\n        w: width,\n        parent: parentNode\n      };\n    }\n\n    function checkLoadedFonts() {\n      var i;\n      var len = this.fonts.length;\n      var node;\n      var w;\n      var loadedCount = len;\n\n      for (i = 0; i < len; i += 1) {\n        if (this.fonts[i].loaded) {\n          loadedCount -= 1;\n        } else if (this.fonts[i].fOrigin === 'n' || this.fonts[i].origin === 0) {\n          this.fonts[i].loaded = true;\n        } else {\n          node = this.fonts[i].monoCase.node;\n          w = this.fonts[i].monoCase.w;\n\n          if (node.offsetWidth !== w) {\n            loadedCount -= 1;\n            this.fonts[i].loaded = true;\n          } else {\n            node = this.fonts[i].sansCase.node;\n            w = this.fonts[i].sansCase.w;\n\n            if (node.offsetWidth !== w) {\n              loadedCount -= 1;\n              this.fonts[i].loaded = true;\n            }\n          }\n\n          if (this.fonts[i].loaded) {\n            this.fonts[i].sansCase.parent.parentNode.removeChild(this.fonts[i].sansCase.parent);\n            this.fonts[i].monoCase.parent.parentNode.removeChild(this.fonts[i].monoCase.parent);\n          }\n        }\n      }\n\n      if (loadedCount !== 0 && Date.now() - this.initTime < maxWaitingTime) {\n        setTimeout(this.checkLoadedFontsBinded, 20);\n      } else {\n        setTimeout(this.setIsLoadedBinded, 10);\n      }\n    }\n\n    function createHelper(fontData, def) {\n      var engine = document.body && def ? 'svg' : 'canvas';\n      var helper;\n      var fontProps = getFontProperties(fontData);\n\n      if (engine === 'svg') {\n        var tHelper = createNS('text');\n        tHelper.style.fontSize = '100px'; // tHelper.style.fontFamily = fontData.fFamily;\n\n        tHelper.setAttribute('font-family', fontData.fFamily);\n        tHelper.setAttribute('font-style', fontProps.style);\n        tHelper.setAttribute('font-weight', fontProps.weight);\n        tHelper.textContent = '1';\n\n        if (fontData.fClass) {\n          tHelper.style.fontFamily = 'inherit';\n          tHelper.setAttribute('class', fontData.fClass);\n        } else {\n          tHelper.style.fontFamily = fontData.fFamily;\n        }\n\n        def.appendChild(tHelper);\n        helper = tHelper;\n      } else {\n        var tCanvasHelper = new OffscreenCanvas(500, 500).getContext('2d');\n        tCanvasHelper.font = fontProps.style + ' ' + fontProps.weight + ' 100px ' + fontData.fFamily;\n        helper = tCanvasHelper;\n      }\n\n      function measure(text) {\n        if (engine === 'svg') {\n          helper.textContent = text;\n          return helper.getComputedTextLength();\n        }\n\n        return helper.measureText(text).width;\n      }\n\n      return {\n        measureText: measure\n      };\n    }\n\n    function addFonts(fontData, defs) {\n      if (!fontData) {\n        this.isLoaded = true;\n        return;\n      }\n\n      if (this.chars) {\n        this.isLoaded = true;\n        this.fonts = fontData.list;\n        return;\n      }\n\n      if (!document.body) {\n        this.isLoaded = true;\n        fontData.list.forEach(function (data) {\n          data.helper = createHelper(data);\n          data.cache = {};\n        });\n        this.fonts = fontData.list;\n        return;\n      }\n\n      var fontArr = fontData.list;\n      var i;\n      var len = fontArr.length;\n      var _pendingFonts = len;\n\n      for (i = 0; i < len; i += 1) {\n        var shouldLoadFont = true;\n        var loadedSelector;\n        var j;\n        fontArr[i].loaded = false;\n        fontArr[i].monoCase = setUpNode(fontArr[i].fFamily, 'monospace');\n        fontArr[i].sansCase = setUpNode(fontArr[i].fFamily, 'sans-serif');\n\n        if (!fontArr[i].fPath) {\n          fontArr[i].loaded = true;\n          _pendingFonts -= 1;\n        } else if (fontArr[i].fOrigin === 'p' || fontArr[i].origin === 3) {\n          loadedSelector = document.querySelectorAll('style[f-forigin=\"p\"][f-family=\"' + fontArr[i].fFamily + '\"], style[f-origin=\"3\"][f-family=\"' + fontArr[i].fFamily + '\"]');\n\n          if (loadedSelector.length > 0) {\n            shouldLoadFont = false;\n          }\n\n          if (shouldLoadFont) {\n            var s = createTag('style');\n            s.setAttribute('f-forigin', fontArr[i].fOrigin);\n            s.setAttribute('f-origin', fontArr[i].origin);\n            s.setAttribute('f-family', fontArr[i].fFamily);\n            s.type = 'text/css';\n            s.innerText = '@font-face {font-family: ' + fontArr[i].fFamily + \"; font-style: normal; src: url('\" + fontArr[i].fPath + \"');}\";\n            defs.appendChild(s);\n          }\n        } else if (fontArr[i].fOrigin === 'g' || fontArr[i].origin === 1) {\n          loadedSelector = document.querySelectorAll('link[f-forigin=\"g\"], link[f-origin=\"1\"]');\n\n          for (j = 0; j < loadedSelector.length; j += 1) {\n            if (loadedSelector[j].href.indexOf(fontArr[i].fPath) !== -1) {\n              // Font is already loaded\n              shouldLoadFont = false;\n            }\n          }\n\n          if (shouldLoadFont) {\n            var l = createTag('link');\n            l.setAttribute('f-forigin', fontArr[i].fOrigin);\n            l.setAttribute('f-origin', fontArr[i].origin);\n            l.type = 'text/css';\n            l.rel = 'stylesheet';\n            l.href = fontArr[i].fPath;\n            document.body.appendChild(l);\n          }\n        } else if (fontArr[i].fOrigin === 't' || fontArr[i].origin === 2) {\n          loadedSelector = document.querySelectorAll('script[f-forigin=\"t\"], script[f-origin=\"2\"]');\n\n          for (j = 0; j < loadedSelector.length; j += 1) {\n            if (fontArr[i].fPath === loadedSelector[j].src) {\n              // Font is already loaded\n              shouldLoadFont = false;\n            }\n          }\n\n          if (shouldLoadFont) {\n            var sc = createTag('link');\n            sc.setAttribute('f-forigin', fontArr[i].fOrigin);\n            sc.setAttribute('f-origin', fontArr[i].origin);\n            sc.setAttribute('rel', 'stylesheet');\n            sc.setAttribute('href', fontArr[i].fPath);\n            defs.appendChild(sc);\n          }\n        }\n\n        fontArr[i].helper = createHelper(fontArr[i], defs);\n        fontArr[i].cache = {};\n        this.fonts.push(fontArr[i]);\n      }\n\n      if (_pendingFonts === 0) {\n        this.isLoaded = true;\n      } else {\n        // On some cases even if the font is loaded, it won't load correctly when measuring text on canvas.\n        // Adding this timeout seems to fix it\n        setTimeout(this.checkLoadedFonts.bind(this), 100);\n      }\n    }\n\n    function addChars(chars) {\n      if (!chars) {\n        return;\n      }\n\n      if (!this.chars) {\n        this.chars = [];\n      }\n\n      var i;\n      var len = chars.length;\n      var j;\n      var jLen = this.chars.length;\n      var found;\n\n      for (i = 0; i < len; i += 1) {\n        j = 0;\n        found = false;\n\n        while (j < jLen) {\n          if (this.chars[j].style === chars[i].style && this.chars[j].fFamily === chars[i].fFamily && this.chars[j].ch === chars[i].ch) {\n            found = true;\n          }\n\n          j += 1;\n        }\n\n        if (!found) {\n          this.chars.push(chars[i]);\n          jLen += 1;\n        }\n      }\n    }\n\n    function getCharData(_char, style, font) {\n      var i = 0;\n      var len = this.chars.length;\n\n      while (i < len) {\n        if (this.chars[i].ch === _char && this.chars[i].style === style && this.chars[i].fFamily === font) {\n          return this.chars[i];\n        }\n\n        i += 1;\n      }\n\n      if ((typeof _char === 'string' && _char.charCodeAt(0) !== 13 || !_char) && console && console.warn // eslint-disable-line no-console\n      && !this._warned) {\n        this._warned = true;\n        console.warn('Missing character from exported characters list: ', _char, style, font); // eslint-disable-line no-console\n      }\n\n      return emptyChar;\n    }\n\n    function measureText(_char2, fontName, size) {\n      var fontData = this.getFontByName(fontName);\n\n      var index = _char2.charCodeAt(0);\n\n      if (!fontData.cache[index + 1]) {\n        var tHelper = fontData.helper;\n\n        if (_char2 === ' ') {\n          var doubleSize = tHelper.measureText('|' + _char2 + '|');\n          var singleSize = tHelper.measureText('||');\n          fontData.cache[index + 1] = (doubleSize - singleSize) / 100;\n        } else {\n          fontData.cache[index + 1] = tHelper.measureText(_char2) / 100;\n        }\n      }\n\n      return fontData.cache[index + 1] * size;\n    }\n\n    function getFontByName(name) {\n      var i = 0;\n      var len = this.fonts.length;\n\n      while (i < len) {\n        if (this.fonts[i].fName === name) {\n          return this.fonts[i];\n        }\n\n        i += 1;\n      }\n\n      return this.fonts[0];\n    }\n\n    function isModifier(firstCharCode, secondCharCode) {\n      var sum = firstCharCode.toString(16) + secondCharCode.toString(16);\n      return surrogateModifiers.indexOf(sum) !== -1;\n    }\n\n    function isZeroWidthJoiner(firstCharCode, secondCharCode) {\n      if (!secondCharCode) {\n        return firstCharCode === zeroWidthJoiner[1];\n      }\n\n      return firstCharCode === zeroWidthJoiner[0] && secondCharCode === zeroWidthJoiner[1];\n    }\n\n    function isCombinedCharacter(_char3) {\n      return combinedCharacters.indexOf(_char3) !== -1;\n    }\n\n    function setIsLoaded() {\n      this.isLoaded = true;\n    }\n\n    var Font = function Font() {\n      this.fonts = [];\n      this.chars = null;\n      this.typekitLoaded = 0;\n      this.isLoaded = false;\n      this._warned = false;\n      this.initTime = Date.now();\n      this.setIsLoadedBinded = this.setIsLoaded.bind(this);\n      this.checkLoadedFontsBinded = this.checkLoadedFonts.bind(this);\n    };\n\n    Font.isModifier = isModifier;\n    Font.isZeroWidthJoiner = isZeroWidthJoiner;\n    Font.isCombinedCharacter = isCombinedCharacter;\n    var fontPrototype = {\n      addChars: addChars,\n      addFonts: addFonts,\n      getCharData: getCharData,\n      getFontByName: getFontByName,\n      measureText: measureText,\n      checkLoadedFonts: checkLoadedFonts,\n      setIsLoaded: setIsLoaded\n    };\n    Font.prototype = fontPrototype;\n    return Font;\n  }();\n\n  function RenderableElement() {}\n\n  RenderableElement.prototype = {\n    initRenderable: function initRenderable() {\n      // layer's visibility related to inpoint and outpoint. Rename isVisible to isInRange\n      this.isInRange = false; // layer's display state\n\n      this.hidden = false; // If layer's transparency equals 0, it can be hidden\n\n      this.isTransparent = false; // list of animated components\n\n      this.renderableComponents = [];\n    },\n    addRenderableComponent: function addRenderableComponent(component) {\n      if (this.renderableComponents.indexOf(component) === -1) {\n        this.renderableComponents.push(component);\n      }\n    },\n    removeRenderableComponent: function removeRenderableComponent(component) {\n      if (this.renderableComponents.indexOf(component) !== -1) {\n        this.renderableComponents.splice(this.renderableComponents.indexOf(component), 1);\n      }\n    },\n    prepareRenderableFrame: function prepareRenderableFrame(num) {\n      this.checkLayerLimits(num);\n    },\n    checkTransparency: function checkTransparency() {\n      if (this.finalTransform.mProp.o.v <= 0) {\n        if (!this.isTransparent && this.globalData.renderConfig.hideOnTransparent) {\n          this.isTransparent = true;\n          this.hide();\n        }\n      } else if (this.isTransparent) {\n        this.isTransparent = false;\n        this.show();\n      }\n    },\n\n    /**\r\n       * @function\r\n       * Initializes frame related properties.\r\n       *\r\n       * @param {number} num\r\n       * current frame number in Layer's time\r\n       *\r\n       */\n    checkLayerLimits: function checkLayerLimits(num) {\n      if (this.data.ip - this.data.st <= num && this.data.op - this.data.st > num) {\n        if (this.isInRange !== true) {\n          this.globalData._mdf = true;\n          this._mdf = true;\n          this.isInRange = true;\n          this.show();\n        }\n      } else if (this.isInRange !== false) {\n        this.globalData._mdf = true;\n        this.isInRange = false;\n        this.hide();\n      }\n    },\n    renderRenderable: function renderRenderable() {\n      var i;\n      var len = this.renderableComponents.length;\n\n      for (i = 0; i < len; i += 1) {\n        this.renderableComponents[i].renderFrame(this._isFirstFrame);\n      }\n      /* this.maskManager.renderFrame(this.finalTransform.mat);\r\n          this.renderableEffectsManager.renderFrame(this._isFirstFrame); */\n\n    },\n    sourceRectAtTime: function sourceRectAtTime() {\n      return {\n        top: 0,\n        left: 0,\n        width: 100,\n        height: 100\n      };\n    },\n    getLayerSize: function getLayerSize() {\n      if (this.data.ty === 5) {\n        return {\n          w: this.data.textData.width,\n          h: this.data.textData.height\n        };\n      }\n\n      return {\n        w: this.data.width,\n        h: this.data.height\n      };\n    }\n  };\n\n  var MaskManagerInterface = function () {\n    function MaskInterface(mask, data) {\n      this._mask = mask;\n      this._data = data;\n    }\n\n    Object.defineProperty(MaskInterface.prototype, 'maskPath', {\n      get: function get() {\n        if (this._mask.prop.k) {\n          this._mask.prop.getValue();\n        }\n\n        return this._mask.prop;\n      }\n    });\n    Object.defineProperty(MaskInterface.prototype, 'maskOpacity', {\n      get: function get() {\n        if (this._mask.op.k) {\n          this._mask.op.getValue();\n        }\n\n        return this._mask.op.v * 100;\n      }\n    });\n\n    var MaskManager = function MaskManager(maskManager) {\n      var _masksInterfaces = createSizedArray(maskManager.viewData.length);\n\n      var i;\n      var len = maskManager.viewData.length;\n\n      for (i = 0; i < len; i += 1) {\n        _masksInterfaces[i] = new MaskInterface(maskManager.viewData[i], maskManager.masksProperties[i]);\n      }\n\n      var maskFunction = function maskFunction(name) {\n        i = 0;\n\n        while (i < len) {\n          if (maskManager.masksProperties[i].nm === name) {\n            return _masksInterfaces[i];\n          }\n\n          i += 1;\n        }\n\n        return null;\n      };\n\n      return maskFunction;\n    };\n\n    return MaskManager;\n  }();\n\n  var ExpressionPropertyInterface = function () {\n    var defaultUnidimensionalValue = {\n      pv: 0,\n      v: 0,\n      mult: 1\n    };\n    var defaultMultidimensionalValue = {\n      pv: [0, 0, 0],\n      v: [0, 0, 0],\n      mult: 1\n    };\n\n    function completeProperty(expressionValue, property, type) {\n      Object.defineProperty(expressionValue, 'velocity', {\n        get: function get() {\n          return property.getVelocityAtTime(property.comp.currentFrame);\n        }\n      });\n      expressionValue.numKeys = property.keyframes ? property.keyframes.length : 0;\n\n      expressionValue.key = function (pos) {\n        if (!expressionValue.numKeys) {\n          return 0;\n        }\n\n        var value = '';\n\n        if ('s' in property.keyframes[pos - 1]) {\n          value = property.keyframes[pos - 1].s;\n        } else if ('e' in property.keyframes[pos - 2]) {\n          value = property.keyframes[pos - 2].e;\n        } else {\n          value = property.keyframes[pos - 2].s;\n        }\n\n        var valueProp = type === 'unidimensional' ? new Number(value) : Object.assign({}, value); // eslint-disable-line no-new-wrappers\n\n        valueProp.time = property.keyframes[pos - 1].t / property.elem.comp.globalData.frameRate;\n        valueProp.value = type === 'unidimensional' ? value[0] : value;\n        return valueProp;\n      };\n\n      expressionValue.valueAtTime = property.getValueAtTime;\n      expressionValue.speedAtTime = property.getSpeedAtTime;\n      expressionValue.velocityAtTime = property.getVelocityAtTime;\n      expressionValue.propertyGroup = property.propertyGroup;\n    }\n\n    function UnidimensionalPropertyInterface(property) {\n      if (!property || !('pv' in property)) {\n        property = defaultUnidimensionalValue;\n      }\n\n      var mult = 1 / property.mult;\n      var val = property.pv * mult;\n      var expressionValue = new Number(val); // eslint-disable-line no-new-wrappers\n\n      expressionValue.value = val;\n      completeProperty(expressionValue, property, 'unidimensional');\n      return function () {\n        if (property.k) {\n          property.getValue();\n        }\n\n        val = property.v * mult;\n\n        if (expressionValue.value !== val) {\n          expressionValue = new Number(val); // eslint-disable-line no-new-wrappers\n\n          expressionValue.value = val;\n          completeProperty(expressionValue, property, 'unidimensional');\n        }\n\n        return expressionValue;\n      };\n    }\n\n    function MultidimensionalPropertyInterface(property) {\n      if (!property || !('pv' in property)) {\n        property = defaultMultidimensionalValue;\n      }\n\n      var mult = 1 / property.mult;\n      var len = property.data && property.data.l || property.pv.length;\n      var expressionValue = createTypedArray('float32', len);\n      var arrValue = createTypedArray('float32', len);\n      expressionValue.value = arrValue;\n      completeProperty(expressionValue, property, 'multidimensional');\n      return function () {\n        if (property.k) {\n          property.getValue();\n        }\n\n        for (var i = 0; i < len; i += 1) {\n          arrValue[i] = property.v[i] * mult;\n          expressionValue[i] = arrValue[i];\n        }\n\n        return expressionValue;\n      };\n    } // TODO: try to avoid using this getter\n\n\n    function defaultGetter() {\n      return defaultUnidimensionalValue;\n    }\n\n    return function (property) {\n      if (!property) {\n        return defaultGetter;\n      }\n\n      if (property.propType === 'unidimensional') {\n        return UnidimensionalPropertyInterface(property);\n      }\n\n      return MultidimensionalPropertyInterface(property);\n    };\n  }();\n\n  var TransformExpressionInterface = function () {\n    return function (transform) {\n      function _thisFunction(name) {\n        switch (name) {\n          case 'scale':\n          case 'Scale':\n          case 'ADBE Scale':\n          case 6:\n            return _thisFunction.scale;\n\n          case 'rotation':\n          case 'Rotation':\n          case 'ADBE Rotation':\n          case 'ADBE Rotate Z':\n          case 10:\n            return _thisFunction.rotation;\n\n          case 'ADBE Rotate X':\n            return _thisFunction.xRotation;\n\n          case 'ADBE Rotate Y':\n            return _thisFunction.yRotation;\n\n          case 'position':\n          case 'Position':\n          case 'ADBE Position':\n          case 2:\n            return _thisFunction.position;\n\n          case 'ADBE Position_0':\n            return _thisFunction.xPosition;\n\n          case 'ADBE Position_1':\n            return _thisFunction.yPosition;\n\n          case 'ADBE Position_2':\n            return _thisFunction.zPosition;\n\n          case 'anchorPoint':\n          case 'AnchorPoint':\n          case 'Anchor Point':\n          case 'ADBE AnchorPoint':\n          case 1:\n            return _thisFunction.anchorPoint;\n\n          case 'opacity':\n          case 'Opacity':\n          case 11:\n            return _thisFunction.opacity;\n\n          default:\n            return null;\n        }\n      }\n\n      Object.defineProperty(_thisFunction, 'rotation', {\n        get: ExpressionPropertyInterface(transform.r || transform.rz)\n      });\n      Object.defineProperty(_thisFunction, 'zRotation', {\n        get: ExpressionPropertyInterface(transform.rz || transform.r)\n      });\n      Object.defineProperty(_thisFunction, 'xRotation', {\n        get: ExpressionPropertyInterface(transform.rx)\n      });\n      Object.defineProperty(_thisFunction, 'yRotation', {\n        get: ExpressionPropertyInterface(transform.ry)\n      });\n      Object.defineProperty(_thisFunction, 'scale', {\n        get: ExpressionPropertyInterface(transform.s)\n      });\n\n      var _px;\n\n      var _py;\n\n      var _pz;\n\n      var _transformFactory;\n\n      if (transform.p) {\n        _transformFactory = ExpressionPropertyInterface(transform.p);\n      } else {\n        _px = ExpressionPropertyInterface(transform.px);\n        _py = ExpressionPropertyInterface(transform.py);\n\n        if (transform.pz) {\n          _pz = ExpressionPropertyInterface(transform.pz);\n        }\n      }\n\n      Object.defineProperty(_thisFunction, 'position', {\n        get: function get() {\n          if (transform.p) {\n            return _transformFactory();\n          }\n\n          return [_px(), _py(), _pz ? _pz() : 0];\n        }\n      });\n      Object.defineProperty(_thisFunction, 'xPosition', {\n        get: ExpressionPropertyInterface(transform.px)\n      });\n      Object.defineProperty(_thisFunction, 'yPosition', {\n        get: ExpressionPropertyInterface(transform.py)\n      });\n      Object.defineProperty(_thisFunction, 'zPosition', {\n        get: ExpressionPropertyInterface(transform.pz)\n      });\n      Object.defineProperty(_thisFunction, 'anchorPoint', {\n        get: ExpressionPropertyInterface(transform.a)\n      });\n      Object.defineProperty(_thisFunction, 'opacity', {\n        get: ExpressionPropertyInterface(transform.o)\n      });\n      Object.defineProperty(_thisFunction, 'skew', {\n        get: ExpressionPropertyInterface(transform.sk)\n      });\n      Object.defineProperty(_thisFunction, 'skewAxis', {\n        get: ExpressionPropertyInterface(transform.sa)\n      });\n      Object.defineProperty(_thisFunction, 'orientation', {\n        get: ExpressionPropertyInterface(transform.or)\n      });\n      return _thisFunction;\n    };\n  }();\n\n  var LayerExpressionInterface = function () {\n    function getMatrix(time) {\n      var toWorldMat = new Matrix();\n\n      if (time !== undefined) {\n        var propMatrix = this._elem.finalTransform.mProp.getValueAtTime(time);\n\n        propMatrix.clone(toWorldMat);\n      } else {\n        var transformMat = this._elem.finalTransform.mProp;\n        transformMat.applyToMatrix(toWorldMat);\n      }\n\n      return toWorldMat;\n    }\n\n    function toWorldVec(arr, time) {\n      var toWorldMat = this.getMatrix(time);\n      toWorldMat.props[12] = 0;\n      toWorldMat.props[13] = 0;\n      toWorldMat.props[14] = 0;\n      return this.applyPoint(toWorldMat, arr);\n    }\n\n    function toWorld(arr, time) {\n      var toWorldMat = this.getMatrix(time);\n      return this.applyPoint(toWorldMat, arr);\n    }\n\n    function fromWorldVec(arr, time) {\n      var toWorldMat = this.getMatrix(time);\n      toWorldMat.props[12] = 0;\n      toWorldMat.props[13] = 0;\n      toWorldMat.props[14] = 0;\n      return this.invertPoint(toWorldMat, arr);\n    }\n\n    function fromWorld(arr, time) {\n      var toWorldMat = this.getMatrix(time);\n      return this.invertPoint(toWorldMat, arr);\n    }\n\n    function applyPoint(matrix, arr) {\n      if (this._elem.hierarchy && this._elem.hierarchy.length) {\n        var i;\n        var len = this._elem.hierarchy.length;\n\n        for (i = 0; i < len; i += 1) {\n          this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(matrix);\n        }\n      }\n\n      return matrix.applyToPointArray(arr[0], arr[1], arr[2] || 0);\n    }\n\n    function invertPoint(matrix, arr) {\n      if (this._elem.hierarchy && this._elem.hierarchy.length) {\n        var i;\n        var len = this._elem.hierarchy.length;\n\n        for (i = 0; i < len; i += 1) {\n          this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(matrix);\n        }\n      }\n\n      return matrix.inversePoint(arr);\n    }\n\n    function fromComp(arr) {\n      var toWorldMat = new Matrix();\n      toWorldMat.reset();\n\n      this._elem.finalTransform.mProp.applyToMatrix(toWorldMat);\n\n      if (this._elem.hierarchy && this._elem.hierarchy.length) {\n        var i;\n        var len = this._elem.hierarchy.length;\n\n        for (i = 0; i < len; i += 1) {\n          this._elem.hierarchy[i].finalTransform.mProp.applyToMatrix(toWorldMat);\n        }\n\n        return toWorldMat.inversePoint(arr);\n      }\n\n      return toWorldMat.inversePoint(arr);\n    }\n\n    function sampleImage() {\n      return [1, 1, 1, 1];\n    }\n\n    return function (elem) {\n      var transformInterface;\n\n      function _registerMaskInterface(maskManager) {\n        _thisLayerFunction.mask = new MaskManagerInterface(maskManager, elem);\n      }\n\n      function _registerEffectsInterface(effects) {\n        _thisLayerFunction.effect = effects;\n      }\n\n      function _thisLayerFunction(name) {\n        switch (name) {\n          case 'ADBE Root Vectors Group':\n          case 'Contents':\n          case 2:\n            return _thisLayerFunction.shapeInterface;\n\n          case 1:\n          case 6:\n          case 'Transform':\n          case 'transform':\n          case 'ADBE Transform Group':\n            return transformInterface;\n\n          case 4:\n          case 'ADBE Effect Parade':\n          case 'effects':\n          case 'Effects':\n            return _thisLayerFunction.effect;\n\n          case 'ADBE Text Properties':\n            return _thisLayerFunction.textInterface;\n\n          default:\n            return null;\n        }\n      }\n\n      _thisLayerFunction.getMatrix = getMatrix;\n      _thisLayerFunction.invertPoint = invertPoint;\n      _thisLayerFunction.applyPoint = applyPoint;\n      _thisLayerFunction.toWorld = toWorld;\n      _thisLayerFunction.toWorldVec = toWorldVec;\n      _thisLayerFunction.fromWorld = fromWorld;\n      _thisLayerFunction.fromWorldVec = fromWorldVec;\n      _thisLayerFunction.toComp = toWorld;\n      _thisLayerFunction.fromComp = fromComp;\n      _thisLayerFunction.sampleImage = sampleImage;\n      _thisLayerFunction.sourceRectAtTime = elem.sourceRectAtTime.bind(elem);\n      _thisLayerFunction._elem = elem;\n      transformInterface = TransformExpressionInterface(elem.finalTransform.mProp);\n      var anchorPointDescriptor = getDescriptor(transformInterface, 'anchorPoint');\n      Object.defineProperties(_thisLayerFunction, {\n        hasParent: {\n          get: function get() {\n            return elem.hierarchy.length;\n          }\n        },\n        parent: {\n          get: function get() {\n            return elem.hierarchy[0].layerInterface;\n          }\n        },\n        rotation: getDescriptor(transformInterface, 'rotation'),\n        scale: getDescriptor(transformInterface, 'scale'),\n        position: getDescriptor(transformInterface, 'position'),\n        opacity: getDescriptor(transformInterface, 'opacity'),\n        anchorPoint: anchorPointDescriptor,\n        anchor_point: anchorPointDescriptor,\n        transform: {\n          get: function get() {\n            return transformInterface;\n          }\n        },\n        active: {\n          get: function get() {\n            return elem.isInRange;\n          }\n        }\n      });\n      _thisLayerFunction.startTime = elem.data.st;\n      _thisLayerFunction.index = elem.data.ind;\n      _thisLayerFunction.source = elem.data.refId;\n      _thisLayerFunction.height = elem.data.ty === 0 ? elem.data.h : 100;\n      _thisLayerFunction.width = elem.data.ty === 0 ? elem.data.w : 100;\n      _thisLayerFunction.inPoint = elem.data.ip / elem.comp.globalData.frameRate;\n      _thisLayerFunction.outPoint = elem.data.op / elem.comp.globalData.frameRate;\n      _thisLayerFunction._name = elem.data.nm;\n      _thisLayerFunction.registerMaskInterface = _registerMaskInterface;\n      _thisLayerFunction.registerEffectsInterface = _registerEffectsInterface;\n      return _thisLayerFunction;\n    };\n  }();\n\n  var propertyGroupFactory = function () {\n    return function (interfaceFunction, parentPropertyGroup) {\n      return function (val) {\n        val = val === undefined ? 1 : val;\n\n        if (val <= 0) {\n          return interfaceFunction;\n        }\n\n        return parentPropertyGroup(val - 1);\n      };\n    };\n  }();\n\n  var PropertyInterface = function () {\n    return function (propertyName, propertyGroup) {\n      var interfaceFunction = {\n        _name: propertyName\n      };\n\n      function _propertyGroup(val) {\n        val = val === undefined ? 1 : val;\n\n        if (val <= 0) {\n          return interfaceFunction;\n        }\n\n        return propertyGroup(val - 1);\n      }\n\n      return _propertyGroup;\n    };\n  }();\n\n  var EffectsExpressionInterface = function () {\n    var ob = {\n      createEffectsInterface: createEffectsInterface\n    };\n\n    function createEffectsInterface(elem, propertyGroup) {\n      if (elem.effectsManager) {\n        var effectElements = [];\n        var effectsData = elem.data.ef;\n        var i;\n        var len = elem.effectsManager.effectElements.length;\n\n        for (i = 0; i < len; i += 1) {\n          effectElements.push(createGroupInterface(effectsData[i], elem.effectsManager.effectElements[i], propertyGroup, elem));\n        }\n\n        var effects = elem.data.ef || [];\n\n        var groupInterface = function groupInterface(name) {\n          i = 0;\n          len = effects.length;\n\n          while (i < len) {\n            if (name === effects[i].nm || name === effects[i].mn || name === effects[i].ix) {\n              return effectElements[i];\n            }\n\n            i += 1;\n          }\n\n          return null;\n        };\n\n        Object.defineProperty(groupInterface, 'numProperties', {\n          get: function get() {\n            return effects.length;\n          }\n        });\n        return groupInterface;\n      }\n\n      return null;\n    }\n\n    function createGroupInterface(data, elements, propertyGroup, elem) {\n      function groupInterface(name) {\n        var effects = data.ef;\n        var i = 0;\n        var len = effects.length;\n\n        while (i < len) {\n          if (name === effects[i].nm || name === effects[i].mn || name === effects[i].ix) {\n            if (effects[i].ty === 5) {\n              return effectElements[i];\n            }\n\n            return effectElements[i]();\n          }\n\n          i += 1;\n        }\n\n        throw new Error();\n      }\n\n      var _propertyGroup = propertyGroupFactory(groupInterface, propertyGroup);\n\n      var effectElements = [];\n      var i;\n      var len = data.ef.length;\n\n      for (i = 0; i < len; i += 1) {\n        if (data.ef[i].ty === 5) {\n          effectElements.push(createGroupInterface(data.ef[i], elements.effectElements[i], elements.effectElements[i].propertyGroup, elem));\n        } else {\n          effectElements.push(createValueInterface(elements.effectElements[i], data.ef[i].ty, elem, _propertyGroup));\n        }\n      }\n\n      if (data.mn === 'ADBE Color Control') {\n        Object.defineProperty(groupInterface, 'color', {\n          get: function get() {\n            return effectElements[0]();\n          }\n        });\n      }\n\n      Object.defineProperties(groupInterface, {\n        numProperties: {\n          get: function get() {\n            return data.np;\n          }\n        },\n        _name: {\n          value: data.nm\n        },\n        propertyGroup: {\n          value: _propertyGroup\n        }\n      });\n      groupInterface.enabled = data.en !== 0;\n      groupInterface.active = groupInterface.enabled;\n      return groupInterface;\n    }\n\n    function createValueInterface(element, type, elem, propertyGroup) {\n      var expressionProperty = ExpressionPropertyInterface(element.p);\n\n      function interfaceFunction() {\n        if (type === 10) {\n          return elem.comp.compInterface(element.p.v);\n        }\n\n        return expressionProperty();\n      }\n\n      if (element.p.setGroupProperty) {\n        element.p.setGroupProperty(PropertyInterface('', propertyGroup));\n      }\n\n      return interfaceFunction;\n    }\n\n    return ob;\n  }();\n\n  var CompExpressionInterface = function () {\n    return function (comp) {\n      function _thisLayerFunction(name) {\n        var i = 0;\n        var len = comp.layers.length;\n\n        while (i < len) {\n          if (comp.layers[i].nm === name || comp.layers[i].ind === name) {\n            return comp.elements[i].layerInterface;\n          }\n\n          i += 1;\n        }\n\n        return null; // return {active:false};\n      }\n\n      Object.defineProperty(_thisLayerFunction, '_name', {\n        value: comp.data.nm\n      });\n      _thisLayerFunction.layer = _thisLayerFunction;\n      _thisLayerFunction.pixelAspect = 1;\n      _thisLayerFunction.height = comp.data.h || comp.globalData.compSize.h;\n      _thisLayerFunction.width = comp.data.w || comp.globalData.compSize.w;\n      _thisLayerFunction.pixelAspect = 1;\n      _thisLayerFunction.frameDuration = 1 / comp.globalData.frameRate;\n      _thisLayerFunction.displayStartTime = 0;\n      _thisLayerFunction.numLayers = comp.layers.length;\n      return _thisLayerFunction;\n    };\n  }();\n\n  var ShapePathInterface = function () {\n    return function pathInterfaceFactory(shape, view, propertyGroup) {\n      var prop = view.sh;\n\n      function interfaceFunction(val) {\n        if (val === 'Shape' || val === 'shape' || val === 'Path' || val === 'path' || val === 'ADBE Vector Shape' || val === 2) {\n          return interfaceFunction.path;\n        }\n\n        return null;\n      }\n\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n\n      prop.setGroupProperty(PropertyInterface('Path', _propertyGroup));\n      Object.defineProperties(interfaceFunction, {\n        path: {\n          get: function get() {\n            if (prop.k) {\n              prop.getValue();\n            }\n\n            return prop;\n          }\n        },\n        shape: {\n          get: function get() {\n            if (prop.k) {\n              prop.getValue();\n            }\n\n            return prop;\n          }\n        },\n        _name: {\n          value: shape.nm\n        },\n        ix: {\n          value: shape.ix\n        },\n        propertyIndex: {\n          value: shape.ix\n        },\n        mn: {\n          value: shape.mn\n        },\n        propertyGroup: {\n          value: propertyGroup\n        }\n      });\n      return interfaceFunction;\n    };\n  }();\n\n  var ShapeExpressionInterface = function () {\n    function iterateElements(shapes, view, propertyGroup) {\n      var arr = [];\n      var i;\n      var len = shapes ? shapes.length : 0;\n\n      for (i = 0; i < len; i += 1) {\n        if (shapes[i].ty === 'gr') {\n          arr.push(groupInterfaceFactory(shapes[i], view[i], propertyGroup));\n        } else if (shapes[i].ty === 'fl') {\n          arr.push(fillInterfaceFactory(shapes[i], view[i], propertyGroup));\n        } else if (shapes[i].ty === 'st') {\n          arr.push(strokeInterfaceFactory(shapes[i], view[i], propertyGroup));\n        } else if (shapes[i].ty === 'tm') {\n          arr.push(trimInterfaceFactory(shapes[i], view[i], propertyGroup));\n        } else if (shapes[i].ty === 'tr') {// arr.push(transformInterfaceFactory(shapes[i],view[i],propertyGroup));\n        } else if (shapes[i].ty === 'el') {\n          arr.push(ellipseInterfaceFactory(shapes[i], view[i], propertyGroup));\n        } else if (shapes[i].ty === 'sr') {\n          arr.push(starInterfaceFactory(shapes[i], view[i], propertyGroup));\n        } else if (shapes[i].ty === 'sh') {\n          arr.push(ShapePathInterface(shapes[i], view[i], propertyGroup));\n        } else if (shapes[i].ty === 'rc') {\n          arr.push(rectInterfaceFactory(shapes[i], view[i], propertyGroup));\n        } else if (shapes[i].ty === 'rd') {\n          arr.push(roundedInterfaceFactory(shapes[i], view[i], propertyGroup));\n        } else if (shapes[i].ty === 'rp') {\n          arr.push(repeaterInterfaceFactory(shapes[i], view[i], propertyGroup));\n        } else if (shapes[i].ty === 'gf') {\n          arr.push(gradientFillInterfaceFactory(shapes[i], view[i], propertyGroup));\n        } else {\n          arr.push(defaultInterfaceFactory(shapes[i], view[i], propertyGroup));\n        }\n      }\n\n      return arr;\n    }\n\n    function contentsInterfaceFactory(shape, view, propertyGroup) {\n      var interfaces;\n\n      var interfaceFunction = function _interfaceFunction(value) {\n        var i = 0;\n        var len = interfaces.length;\n\n        while (i < len) {\n          if (interfaces[i]._name === value || interfaces[i].mn === value || interfaces[i].propertyIndex === value || interfaces[i].ix === value || interfaces[i].ind === value) {\n            return interfaces[i];\n          }\n\n          i += 1;\n        }\n\n        if (typeof value === 'number') {\n          return interfaces[value - 1];\n        }\n\n        return null;\n      };\n\n      interfaceFunction.propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n      interfaces = iterateElements(shape.it, view.it, interfaceFunction.propertyGroup);\n      interfaceFunction.numProperties = interfaces.length;\n      var transformInterface = transformInterfaceFactory(shape.it[shape.it.length - 1], view.it[view.it.length - 1], interfaceFunction.propertyGroup);\n      interfaceFunction.transform = transformInterface;\n      interfaceFunction.propertyIndex = shape.cix;\n      interfaceFunction._name = shape.nm;\n      return interfaceFunction;\n    }\n\n    function groupInterfaceFactory(shape, view, propertyGroup) {\n      var interfaceFunction = function _interfaceFunction(value) {\n        switch (value) {\n          case 'ADBE Vectors Group':\n          case 'Contents':\n          case 2:\n            return interfaceFunction.content;\n          // Not necessary for now. Keeping them here in case a new case appears\n          // case 'ADBE Vector Transform Group':\n          // case 3:\n\n          default:\n            return interfaceFunction.transform;\n        }\n      };\n\n      interfaceFunction.propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n      var content = contentsInterfaceFactory(shape, view, interfaceFunction.propertyGroup);\n      var transformInterface = transformInterfaceFactory(shape.it[shape.it.length - 1], view.it[view.it.length - 1], interfaceFunction.propertyGroup);\n      interfaceFunction.content = content;\n      interfaceFunction.transform = transformInterface;\n      Object.defineProperty(interfaceFunction, '_name', {\n        get: function get() {\n          return shape.nm;\n        }\n      }); // interfaceFunction.content = interfaceFunction;\n\n      interfaceFunction.numProperties = shape.np;\n      interfaceFunction.propertyIndex = shape.ix;\n      interfaceFunction.nm = shape.nm;\n      interfaceFunction.mn = shape.mn;\n      return interfaceFunction;\n    }\n\n    function fillInterfaceFactory(shape, view, propertyGroup) {\n      function interfaceFunction(val) {\n        if (val === 'Color' || val === 'color') {\n          return interfaceFunction.color;\n        }\n\n        if (val === 'Opacity' || val === 'opacity') {\n          return interfaceFunction.opacity;\n        }\n\n        return null;\n      }\n\n      Object.defineProperties(interfaceFunction, {\n        color: {\n          get: ExpressionPropertyInterface(view.c)\n        },\n        opacity: {\n          get: ExpressionPropertyInterface(view.o)\n        },\n        _name: {\n          value: shape.nm\n        },\n        mn: {\n          value: shape.mn\n        }\n      });\n      view.c.setGroupProperty(PropertyInterface('Color', propertyGroup));\n      view.o.setGroupProperty(PropertyInterface('Opacity', propertyGroup));\n      return interfaceFunction;\n    }\n\n    function gradientFillInterfaceFactory(shape, view, propertyGroup) {\n      function interfaceFunction(val) {\n        if (val === 'Start Point' || val === 'start point') {\n          return interfaceFunction.startPoint;\n        }\n\n        if (val === 'End Point' || val === 'end point') {\n          return interfaceFunction.endPoint;\n        }\n\n        if (val === 'Opacity' || val === 'opacity') {\n          return interfaceFunction.opacity;\n        }\n\n        return null;\n      }\n\n      Object.defineProperties(interfaceFunction, {\n        startPoint: {\n          get: ExpressionPropertyInterface(view.s)\n        },\n        endPoint: {\n          get: ExpressionPropertyInterface(view.e)\n        },\n        opacity: {\n          get: ExpressionPropertyInterface(view.o)\n        },\n        type: {\n          get: function get() {\n            return 'a';\n          }\n        },\n        _name: {\n          value: shape.nm\n        },\n        mn: {\n          value: shape.mn\n        }\n      });\n      view.s.setGroupProperty(PropertyInterface('Start Point', propertyGroup));\n      view.e.setGroupProperty(PropertyInterface('End Point', propertyGroup));\n      view.o.setGroupProperty(PropertyInterface('Opacity', propertyGroup));\n      return interfaceFunction;\n    }\n\n    function defaultInterfaceFactory() {\n      function interfaceFunction() {\n        return null;\n      }\n\n      return interfaceFunction;\n    }\n\n    function strokeInterfaceFactory(shape, view, propertyGroup) {\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n\n      var _dashPropertyGroup = propertyGroupFactory(dashOb, _propertyGroup);\n\n      function addPropertyToDashOb(i) {\n        Object.defineProperty(dashOb, shape.d[i].nm, {\n          get: ExpressionPropertyInterface(view.d.dataProps[i].p)\n        });\n      }\n\n      var i;\n      var len = shape.d ? shape.d.length : 0;\n      var dashOb = {};\n\n      for (i = 0; i < len; i += 1) {\n        addPropertyToDashOb(i);\n        view.d.dataProps[i].p.setGroupProperty(_dashPropertyGroup);\n      }\n\n      function interfaceFunction(val) {\n        if (val === 'Color' || val === 'color') {\n          return interfaceFunction.color;\n        }\n\n        if (val === 'Opacity' || val === 'opacity') {\n          return interfaceFunction.opacity;\n        }\n\n        if (val === 'Stroke Width' || val === 'stroke width') {\n          return interfaceFunction.strokeWidth;\n        }\n\n        return null;\n      }\n\n      Object.defineProperties(interfaceFunction, {\n        color: {\n          get: ExpressionPropertyInterface(view.c)\n        },\n        opacity: {\n          get: ExpressionPropertyInterface(view.o)\n        },\n        strokeWidth: {\n          get: ExpressionPropertyInterface(view.w)\n        },\n        dash: {\n          get: function get() {\n            return dashOb;\n          }\n        },\n        _name: {\n          value: shape.nm\n        },\n        mn: {\n          value: shape.mn\n        }\n      });\n      view.c.setGroupProperty(PropertyInterface('Color', _propertyGroup));\n      view.o.setGroupProperty(PropertyInterface('Opacity', _propertyGroup));\n      view.w.setGroupProperty(PropertyInterface('Stroke Width', _propertyGroup));\n      return interfaceFunction;\n    }\n\n    function trimInterfaceFactory(shape, view, propertyGroup) {\n      function interfaceFunction(val) {\n        if (val === shape.e.ix || val === 'End' || val === 'end') {\n          return interfaceFunction.end;\n        }\n\n        if (val === shape.s.ix) {\n          return interfaceFunction.start;\n        }\n\n        if (val === shape.o.ix) {\n          return interfaceFunction.offset;\n        }\n\n        return null;\n      }\n\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n\n      interfaceFunction.propertyIndex = shape.ix;\n      view.s.setGroupProperty(PropertyInterface('Start', _propertyGroup));\n      view.e.setGroupProperty(PropertyInterface('End', _propertyGroup));\n      view.o.setGroupProperty(PropertyInterface('Offset', _propertyGroup));\n      interfaceFunction.propertyIndex = shape.ix;\n      interfaceFunction.propertyGroup = propertyGroup;\n      Object.defineProperties(interfaceFunction, {\n        start: {\n          get: ExpressionPropertyInterface(view.s)\n        },\n        end: {\n          get: ExpressionPropertyInterface(view.e)\n        },\n        offset: {\n          get: ExpressionPropertyInterface(view.o)\n        },\n        _name: {\n          value: shape.nm\n        }\n      });\n      interfaceFunction.mn = shape.mn;\n      return interfaceFunction;\n    }\n\n    function transformInterfaceFactory(shape, view, propertyGroup) {\n      function interfaceFunction(value) {\n        if (shape.a.ix === value || value === 'Anchor Point') {\n          return interfaceFunction.anchorPoint;\n        }\n\n        if (shape.o.ix === value || value === 'Opacity') {\n          return interfaceFunction.opacity;\n        }\n\n        if (shape.p.ix === value || value === 'Position') {\n          return interfaceFunction.position;\n        }\n\n        if (shape.r.ix === value || value === 'Rotation' || value === 'ADBE Vector Rotation') {\n          return interfaceFunction.rotation;\n        }\n\n        if (shape.s.ix === value || value === 'Scale') {\n          return interfaceFunction.scale;\n        }\n\n        if (shape.sk && shape.sk.ix === value || value === 'Skew') {\n          return interfaceFunction.skew;\n        }\n\n        if (shape.sa && shape.sa.ix === value || value === 'Skew Axis') {\n          return interfaceFunction.skewAxis;\n        }\n\n        return null;\n      }\n\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n\n      view.transform.mProps.o.setGroupProperty(PropertyInterface('Opacity', _propertyGroup));\n      view.transform.mProps.p.setGroupProperty(PropertyInterface('Position', _propertyGroup));\n      view.transform.mProps.a.setGroupProperty(PropertyInterface('Anchor Point', _propertyGroup));\n      view.transform.mProps.s.setGroupProperty(PropertyInterface('Scale', _propertyGroup));\n      view.transform.mProps.r.setGroupProperty(PropertyInterface('Rotation', _propertyGroup));\n\n      if (view.transform.mProps.sk) {\n        view.transform.mProps.sk.setGroupProperty(PropertyInterface('Skew', _propertyGroup));\n        view.transform.mProps.sa.setGroupProperty(PropertyInterface('Skew Angle', _propertyGroup));\n      }\n\n      view.transform.op.setGroupProperty(PropertyInterface('Opacity', _propertyGroup));\n      Object.defineProperties(interfaceFunction, {\n        opacity: {\n          get: ExpressionPropertyInterface(view.transform.mProps.o)\n        },\n        position: {\n          get: ExpressionPropertyInterface(view.transform.mProps.p)\n        },\n        anchorPoint: {\n          get: ExpressionPropertyInterface(view.transform.mProps.a)\n        },\n        scale: {\n          get: ExpressionPropertyInterface(view.transform.mProps.s)\n        },\n        rotation: {\n          get: ExpressionPropertyInterface(view.transform.mProps.r)\n        },\n        skew: {\n          get: ExpressionPropertyInterface(view.transform.mProps.sk)\n        },\n        skewAxis: {\n          get: ExpressionPropertyInterface(view.transform.mProps.sa)\n        },\n        _name: {\n          value: shape.nm\n        }\n      });\n      interfaceFunction.ty = 'tr';\n      interfaceFunction.mn = shape.mn;\n      interfaceFunction.propertyGroup = propertyGroup;\n      return interfaceFunction;\n    }\n\n    function ellipseInterfaceFactory(shape, view, propertyGroup) {\n      function interfaceFunction(value) {\n        if (shape.p.ix === value) {\n          return interfaceFunction.position;\n        }\n\n        if (shape.s.ix === value) {\n          return interfaceFunction.size;\n        }\n\n        return null;\n      }\n\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n\n      interfaceFunction.propertyIndex = shape.ix;\n      var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\n      prop.s.setGroupProperty(PropertyInterface('Size', _propertyGroup));\n      prop.p.setGroupProperty(PropertyInterface('Position', _propertyGroup));\n      Object.defineProperties(interfaceFunction, {\n        size: {\n          get: ExpressionPropertyInterface(prop.s)\n        },\n        position: {\n          get: ExpressionPropertyInterface(prop.p)\n        },\n        _name: {\n          value: shape.nm\n        }\n      });\n      interfaceFunction.mn = shape.mn;\n      return interfaceFunction;\n    }\n\n    function starInterfaceFactory(shape, view, propertyGroup) {\n      function interfaceFunction(value) {\n        if (shape.p.ix === value) {\n          return interfaceFunction.position;\n        }\n\n        if (shape.r.ix === value) {\n          return interfaceFunction.rotation;\n        }\n\n        if (shape.pt.ix === value) {\n          return interfaceFunction.points;\n        }\n\n        if (shape.or.ix === value || value === 'ADBE Vector Star Outer Radius') {\n          return interfaceFunction.outerRadius;\n        }\n\n        if (shape.os.ix === value) {\n          return interfaceFunction.outerRoundness;\n        }\n\n        if (shape.ir && (shape.ir.ix === value || value === 'ADBE Vector Star Inner Radius')) {\n          return interfaceFunction.innerRadius;\n        }\n\n        if (shape.is && shape.is.ix === value) {\n          return interfaceFunction.innerRoundness;\n        }\n\n        return null;\n      }\n\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n\n      var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\n      interfaceFunction.propertyIndex = shape.ix;\n      prop.or.setGroupProperty(PropertyInterface('Outer Radius', _propertyGroup));\n      prop.os.setGroupProperty(PropertyInterface('Outer Roundness', _propertyGroup));\n      prop.pt.setGroupProperty(PropertyInterface('Points', _propertyGroup));\n      prop.p.setGroupProperty(PropertyInterface('Position', _propertyGroup));\n      prop.r.setGroupProperty(PropertyInterface('Rotation', _propertyGroup));\n\n      if (shape.ir) {\n        prop.ir.setGroupProperty(PropertyInterface('Inner Radius', _propertyGroup));\n        prop.is.setGroupProperty(PropertyInterface('Inner Roundness', _propertyGroup));\n      }\n\n      Object.defineProperties(interfaceFunction, {\n        position: {\n          get: ExpressionPropertyInterface(prop.p)\n        },\n        rotation: {\n          get: ExpressionPropertyInterface(prop.r)\n        },\n        points: {\n          get: ExpressionPropertyInterface(prop.pt)\n        },\n        outerRadius: {\n          get: ExpressionPropertyInterface(prop.or)\n        },\n        outerRoundness: {\n          get: ExpressionPropertyInterface(prop.os)\n        },\n        innerRadius: {\n          get: ExpressionPropertyInterface(prop.ir)\n        },\n        innerRoundness: {\n          get: ExpressionPropertyInterface(prop.is)\n        },\n        _name: {\n          value: shape.nm\n        }\n      });\n      interfaceFunction.mn = shape.mn;\n      return interfaceFunction;\n    }\n\n    function rectInterfaceFactory(shape, view, propertyGroup) {\n      function interfaceFunction(value) {\n        if (shape.p.ix === value) {\n          return interfaceFunction.position;\n        }\n\n        if (shape.r.ix === value) {\n          return interfaceFunction.roundness;\n        }\n\n        if (shape.s.ix === value || value === 'Size' || value === 'ADBE Vector Rect Size') {\n          return interfaceFunction.size;\n        }\n\n        return null;\n      }\n\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n\n      var prop = view.sh.ty === 'tm' ? view.sh.prop : view.sh;\n      interfaceFunction.propertyIndex = shape.ix;\n      prop.p.setGroupProperty(PropertyInterface('Position', _propertyGroup));\n      prop.s.setGroupProperty(PropertyInterface('Size', _propertyGroup));\n      prop.r.setGroupProperty(PropertyInterface('Rotation', _propertyGroup));\n      Object.defineProperties(interfaceFunction, {\n        position: {\n          get: ExpressionPropertyInterface(prop.p)\n        },\n        roundness: {\n          get: ExpressionPropertyInterface(prop.r)\n        },\n        size: {\n          get: ExpressionPropertyInterface(prop.s)\n        },\n        _name: {\n          value: shape.nm\n        }\n      });\n      interfaceFunction.mn = shape.mn;\n      return interfaceFunction;\n    }\n\n    function roundedInterfaceFactory(shape, view, propertyGroup) {\n      function interfaceFunction(value) {\n        if (shape.r.ix === value || value === 'Round Corners 1') {\n          return interfaceFunction.radius;\n        }\n\n        return null;\n      }\n\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n\n      var prop = view;\n      interfaceFunction.propertyIndex = shape.ix;\n      prop.rd.setGroupProperty(PropertyInterface('Radius', _propertyGroup));\n      Object.defineProperties(interfaceFunction, {\n        radius: {\n          get: ExpressionPropertyInterface(prop.rd)\n        },\n        _name: {\n          value: shape.nm\n        }\n      });\n      interfaceFunction.mn = shape.mn;\n      return interfaceFunction;\n    }\n\n    function repeaterInterfaceFactory(shape, view, propertyGroup) {\n      function interfaceFunction(value) {\n        if (shape.c.ix === value || value === 'Copies') {\n          return interfaceFunction.copies;\n        }\n\n        if (shape.o.ix === value || value === 'Offset') {\n          return interfaceFunction.offset;\n        }\n\n        return null;\n      }\n\n      var _propertyGroup = propertyGroupFactory(interfaceFunction, propertyGroup);\n\n      var prop = view;\n      interfaceFunction.propertyIndex = shape.ix;\n      prop.c.setGroupProperty(PropertyInterface('Copies', _propertyGroup));\n      prop.o.setGroupProperty(PropertyInterface('Offset', _propertyGroup));\n      Object.defineProperties(interfaceFunction, {\n        copies: {\n          get: ExpressionPropertyInterface(prop.c)\n        },\n        offset: {\n          get: ExpressionPropertyInterface(prop.o)\n        },\n        _name: {\n          value: shape.nm\n        }\n      });\n      interfaceFunction.mn = shape.mn;\n      return interfaceFunction;\n    }\n\n    return function (shapes, view, propertyGroup) {\n      var interfaces;\n\n      function _interfaceFunction(value) {\n        if (typeof value === 'number') {\n          value = value === undefined ? 1 : value;\n\n          if (value === 0) {\n            return propertyGroup;\n          }\n\n          return interfaces[value - 1];\n        }\n\n        var i = 0;\n        var len = interfaces.length;\n\n        while (i < len) {\n          if (interfaces[i]._name === value) {\n            return interfaces[i];\n          }\n\n          i += 1;\n        }\n\n        return null;\n      }\n\n      function parentGroupWrapper() {\n        return propertyGroup;\n      }\n\n      _interfaceFunction.propertyGroup = propertyGroupFactory(_interfaceFunction, parentGroupWrapper);\n      interfaces = iterateElements(shapes, view, _interfaceFunction.propertyGroup);\n      _interfaceFunction.numProperties = interfaces.length;\n      _interfaceFunction._name = 'Contents';\n      return _interfaceFunction;\n    };\n  }();\n\n  var TextExpressionInterface = function () {\n    return function (elem) {\n      var _prevValue;\n\n      var _sourceText;\n\n      function _thisLayerFunction(name) {\n        switch (name) {\n          case 'ADBE Text Document':\n            return _thisLayerFunction.sourceText;\n\n          default:\n            return null;\n        }\n      }\n\n      Object.defineProperty(_thisLayerFunction, 'sourceText', {\n        get: function get() {\n          elem.textProperty.getValue();\n          var stringValue = elem.textProperty.currentData.t;\n\n          if (stringValue !== _prevValue) {\n            elem.textProperty.currentData.t = _prevValue;\n            _sourceText = new String(stringValue); // eslint-disable-line no-new-wrappers\n            // If stringValue is an empty string, eval returns undefined, so it has to be returned as a String primitive\n\n            _sourceText.value = stringValue || new String(stringValue); // eslint-disable-line no-new-wrappers\n          }\n\n          return _sourceText;\n        }\n      });\n      return _thisLayerFunction;\n    };\n  }();\n\n  var getBlendMode = function () {\n    var blendModeEnums = {\n      0: 'source-over',\n      1: 'multiply',\n      2: 'screen',\n      3: 'overlay',\n      4: 'darken',\n      5: 'lighten',\n      6: 'color-dodge',\n      7: 'color-burn',\n      8: 'hard-light',\n      9: 'soft-light',\n      10: 'difference',\n      11: 'exclusion',\n      12: 'hue',\n      13: 'saturation',\n      14: 'color',\n      15: 'luminosity'\n    };\n    return function (mode) {\n      return blendModeEnums[mode] || '';\n    };\n  }();\n\n  function SliderEffect(data, elem, container) {\n    this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\n  }\n\n  function AngleEffect(data, elem, container) {\n    this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\n  }\n\n  function ColorEffect(data, elem, container) {\n    this.p = PropertyFactory.getProp(elem, data.v, 1, 0, container);\n  }\n\n  function PointEffect(data, elem, container) {\n    this.p = PropertyFactory.getProp(elem, data.v, 1, 0, container);\n  }\n\n  function LayerIndexEffect(data, elem, container) {\n    this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\n  }\n\n  function MaskIndexEffect(data, elem, container) {\n    this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\n  }\n\n  function CheckboxEffect(data, elem, container) {\n    this.p = PropertyFactory.getProp(elem, data.v, 0, 0, container);\n  }\n\n  function NoValueEffect() {\n    this.p = {};\n  }\n\n  function EffectsManager(data, element) {\n    var effects = data.ef || [];\n    this.effectElements = [];\n    var i;\n    var len = effects.length;\n    var effectItem;\n\n    for (i = 0; i < len; i += 1) {\n      effectItem = new GroupEffect(effects[i], element);\n      this.effectElements.push(effectItem);\n    }\n  }\n\n  function GroupEffect(data, element) {\n    this.init(data, element);\n  }\n\n  extendPrototype([DynamicPropertyContainer], GroupEffect);\n  GroupEffect.prototype.getValue = GroupEffect.prototype.iterateDynamicProperties;\n\n  GroupEffect.prototype.init = function (data, element) {\n    this.data = data;\n    this.effectElements = [];\n    this.initDynamicPropertyContainer(element);\n    var i;\n    var len = this.data.ef.length;\n    var eff;\n    var effects = this.data.ef;\n\n    for (i = 0; i < len; i += 1) {\n      eff = null;\n\n      switch (effects[i].ty) {\n        case 0:\n          eff = new SliderEffect(effects[i], element, this);\n          break;\n\n        case 1:\n          eff = new AngleEffect(effects[i], element, this);\n          break;\n\n        case 2:\n          eff = new ColorEffect(effects[i], element, this);\n          break;\n\n        case 3:\n          eff = new PointEffect(effects[i], element, this);\n          break;\n\n        case 4:\n        case 7:\n          eff = new CheckboxEffect(effects[i], element, this);\n          break;\n\n        case 10:\n          eff = new LayerIndexEffect(effects[i], element, this);\n          break;\n\n        case 11:\n          eff = new MaskIndexEffect(effects[i], element, this);\n          break;\n\n        case 5:\n          eff = new EffectsManager(effects[i], element, this);\n          break;\n        // case 6:\n\n        default:\n          eff = new NoValueEffect(effects[i], element, this);\n          break;\n      }\n\n      if (eff) {\n        this.effectElements.push(eff);\n      }\n    }\n  };\n\n  function BaseElement() {}\n\n  BaseElement.prototype = {\n    checkMasks: function checkMasks() {\n      if (!this.data.hasMask) {\n        return false;\n      }\n\n      var i = 0;\n      var len = this.data.masksProperties.length;\n\n      while (i < len) {\n        if (this.data.masksProperties[i].mode !== 'n' && this.data.masksProperties[i].cl !== false) {\n          return true;\n        }\n\n        i += 1;\n      }\n\n      return false;\n    },\n    initExpressions: function initExpressions() {\n      this.layerInterface = LayerExpressionInterface(this);\n\n      if (this.data.hasMask && this.maskManager) {\n        this.layerInterface.registerMaskInterface(this.maskManager);\n      }\n\n      var effectsInterface = EffectsExpressionInterface.createEffectsInterface(this, this.layerInterface);\n      this.layerInterface.registerEffectsInterface(effectsInterface);\n\n      if (this.data.ty === 0 || this.data.xt) {\n        this.compInterface = CompExpressionInterface(this);\n      } else if (this.data.ty === 4) {\n        this.layerInterface.shapeInterface = ShapeExpressionInterface(this.shapesData, this.itemsData, this.layerInterface);\n        this.layerInterface.content = this.layerInterface.shapeInterface;\n      } else if (this.data.ty === 5) {\n        this.layerInterface.textInterface = TextExpressionInterface(this);\n        this.layerInterface.text = this.layerInterface.textInterface;\n      }\n    },\n    setBlendMode: function setBlendMode() {\n      var blendModeValue = getBlendMode(this.data.bm);\n      var elem = this.baseElement || this.layerElement;\n      elem.style['mix-blend-mode'] = blendModeValue;\n    },\n    initBaseData: function initBaseData(data, globalData, comp) {\n      this.globalData = globalData;\n      this.comp = comp;\n      this.data = data;\n      this.layerId = createElementID(); // Stretch factor for old animations missing this property.\n\n      if (!this.data.sr) {\n        this.data.sr = 1;\n      } // effects manager\n\n\n      this.effectsManager = new EffectsManager(this.data, this, this.dynamicProperties);\n    },\n    getType: function getType() {\n      return this.type;\n    },\n    sourceRectAtTime: function sourceRectAtTime() {}\n  };\n\n  /**\r\n   * @file\r\n   * Handles element's layer frame update.\r\n   * Checks layer in point and out point\r\n   *\r\n   */\n  function FrameElement() {}\n\n  FrameElement.prototype = {\n    /**\r\n       * @function\r\n       * Initializes frame related properties.\r\n       *\r\n       */\n    initFrame: function initFrame() {\n      // set to true when inpoint is rendered\n      this._isFirstFrame = false; // list of animated properties\n\n      this.dynamicProperties = []; // If layer has been modified in current tick this will be true\n\n      this._mdf = false;\n    },\n\n    /**\r\n       * @function\r\n       * Calculates all dynamic values\r\n       *\r\n       * @param {number} num\r\n       * current frame number in Layer's time\r\n       * @param {boolean} isVisible\r\n       * if layers is currently in range\r\n       *\r\n       */\n    prepareProperties: function prepareProperties(num, isVisible) {\n      var i;\n      var len = this.dynamicProperties.length;\n\n      for (i = 0; i < len; i += 1) {\n        if (isVisible || this._isParent && this.dynamicProperties[i].propType === 'transform') {\n          this.dynamicProperties[i].getValue();\n\n          if (this.dynamicProperties[i]._mdf) {\n            this.globalData._mdf = true;\n            this._mdf = true;\n          }\n        }\n      }\n    },\n    addDynamicProperty: function addDynamicProperty(prop) {\n      if (this.dynamicProperties.indexOf(prop) === -1) {\n        this.dynamicProperties.push(prop);\n      }\n    }\n  };\n\n  function _typeof$2(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof$2 = function _typeof(obj) { return typeof obj; }; } else { _typeof$2 = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof$2(obj); }\n\n  var FootageInterface = function () {\n    var outlineInterfaceFactory = function outlineInterfaceFactory(elem) {\n      var currentPropertyName = '';\n      var currentProperty = elem.getFootageData();\n\n      function init() {\n        currentPropertyName = '';\n        currentProperty = elem.getFootageData();\n        return searchProperty;\n      }\n\n      function searchProperty(value) {\n        if (currentProperty[value]) {\n          currentPropertyName = value;\n          currentProperty = currentProperty[value];\n\n          if (_typeof$2(currentProperty) === 'object') {\n            return searchProperty;\n          }\n\n          return currentProperty;\n        }\n\n        var propertyNameIndex = value.indexOf(currentPropertyName);\n\n        if (propertyNameIndex !== -1) {\n          var index = parseInt(value.substr(propertyNameIndex + currentPropertyName.length), 10);\n          currentProperty = currentProperty[index];\n\n          if (_typeof$2(currentProperty) === 'object') {\n            return searchProperty;\n          }\n\n          return currentProperty;\n        }\n\n        return '';\n      }\n\n      return init;\n    };\n\n    var dataInterfaceFactory = function dataInterfaceFactory(elem) {\n      function interfaceFunction(value) {\n        if (value === 'Outline') {\n          return interfaceFunction.outlineInterface();\n        }\n\n        return null;\n      }\n\n      interfaceFunction._name = 'Outline';\n      interfaceFunction.outlineInterface = outlineInterfaceFactory(elem);\n      return interfaceFunction;\n    };\n\n    return function (elem) {\n      function _interfaceFunction(value) {\n        if (value === 'Data') {\n          return _interfaceFunction.dataInterface;\n        }\n\n        return null;\n      }\n\n      _interfaceFunction._name = 'Data';\n      _interfaceFunction.dataInterface = dataInterfaceFactory(elem);\n      return _interfaceFunction;\n    };\n  }();\n\n  function FootageElement(data, globalData, comp) {\n    this.initFrame();\n    this.initRenderable();\n    this.assetData = globalData.getAssetData(data.refId);\n    this.footageData = globalData.imageLoader.getAsset(this.assetData);\n    this.initBaseData(data, globalData, comp);\n  }\n\n  FootageElement.prototype.prepareFrame = function () {};\n\n  extendPrototype([RenderableElement, BaseElement, FrameElement], FootageElement);\n\n  FootageElement.prototype.getBaseElement = function () {\n    return null;\n  };\n\n  FootageElement.prototype.renderFrame = function () {};\n\n  FootageElement.prototype.destroy = function () {};\n\n  FootageElement.prototype.initExpressions = function () {\n    this.layerInterface = FootageInterface(this);\n  };\n\n  FootageElement.prototype.getFootageData = function () {\n    return this.footageData;\n  };\n\n  function AudioElement(data, globalData, comp) {\n    this.initFrame();\n    this.initRenderable();\n    this.assetData = globalData.getAssetData(data.refId);\n    this.initBaseData(data, globalData, comp);\n    this._isPlaying = false;\n    this._canPlay = false;\n    var assetPath = this.globalData.getAssetsPath(this.assetData);\n    this.audio = this.globalData.audioController.createAudio(assetPath);\n    this._currentTime = 0;\n    this.globalData.audioController.addAudio(this);\n    this._volumeMultiplier = 1;\n    this._volume = 1;\n    this._previousVolume = null;\n    this.tm = data.tm ? PropertyFactory.getProp(this, data.tm, 0, globalData.frameRate, this) : {\n      _placeholder: true\n    };\n    this.lv = PropertyFactory.getProp(this, data.au && data.au.lv ? data.au.lv : {\n      k: [100]\n    }, 1, 0.01, this);\n  }\n\n  AudioElement.prototype.prepareFrame = function (num) {\n    this.prepareRenderableFrame(num, true);\n    this.prepareProperties(num, true);\n\n    if (!this.tm._placeholder) {\n      var timeRemapped = this.tm.v;\n      this._currentTime = timeRemapped;\n    } else {\n      this._currentTime = num / this.data.sr;\n    }\n\n    this._volume = this.lv.v[0];\n    var totalVolume = this._volume * this._volumeMultiplier;\n\n    if (this._previousVolume !== totalVolume) {\n      this._previousVolume = totalVolume;\n      this.audio.volume(totalVolume);\n    }\n  };\n\n  extendPrototype([RenderableElement, BaseElement, FrameElement], AudioElement);\n\n  AudioElement.prototype.renderFrame = function () {\n    if (this.isInRange && this._canPlay) {\n      if (!this._isPlaying) {\n        this.audio.play();\n        this.audio.seek(this._currentTime / this.globalData.frameRate);\n        this._isPlaying = true;\n      } else if (!this.audio.playing() || Math.abs(this._currentTime / this.globalData.frameRate - this.audio.seek()) > 0.1) {\n        this.audio.seek(this._currentTime / this.globalData.frameRate);\n      }\n    }\n  };\n\n  AudioElement.prototype.show = function () {// this.audio.play()\n  };\n\n  AudioElement.prototype.hide = function () {\n    this.audio.pause();\n    this._isPlaying = false;\n  };\n\n  AudioElement.prototype.pause = function () {\n    this.audio.pause();\n    this._isPlaying = false;\n    this._canPlay = false;\n  };\n\n  AudioElement.prototype.resume = function () {\n    this._canPlay = true;\n  };\n\n  AudioElement.prototype.setRate = function (rateValue) {\n    this.audio.rate(rateValue);\n  };\n\n  AudioElement.prototype.volume = function (volumeValue) {\n    this._volumeMultiplier = volumeValue;\n    this._previousVolume = volumeValue * this._volume;\n    this.audio.volume(this._previousVolume);\n  };\n\n  AudioElement.prototype.getBaseElement = function () {\n    return null;\n  };\n\n  AudioElement.prototype.destroy = function () {};\n\n  AudioElement.prototype.sourceRectAtTime = function () {};\n\n  AudioElement.prototype.initExpressions = function () {};\n\n  function BaseRenderer() {}\n\n  BaseRenderer.prototype.checkLayers = function (num) {\n    var i;\n    var len = this.layers.length;\n    var data;\n    this.completeLayers = true;\n\n    for (i = len - 1; i >= 0; i -= 1) {\n      if (!this.elements[i]) {\n        data = this.layers[i];\n\n        if (data.ip - data.st <= num - this.layers[i].st && data.op - data.st > num - this.layers[i].st) {\n          this.buildItem(i);\n        }\n      }\n\n      this.completeLayers = this.elements[i] ? this.completeLayers : false;\n    }\n\n    this.checkPendingElements();\n  };\n\n  BaseRenderer.prototype.createItem = function (layer) {\n    switch (layer.ty) {\n      case 2:\n        return this.createImage(layer);\n\n      case 0:\n        return this.createComp(layer);\n\n      case 1:\n        return this.createSolid(layer);\n\n      case 3:\n        return this.createNull(layer);\n\n      case 4:\n        return this.createShape(layer);\n\n      case 5:\n        return this.createText(layer);\n\n      case 6:\n        return this.createAudio(layer);\n\n      case 13:\n        return this.createCamera(layer);\n\n      case 15:\n        return this.createFootage(layer);\n\n      default:\n        return this.createNull(layer);\n    }\n  };\n\n  BaseRenderer.prototype.createCamera = function () {\n    throw new Error('You\\'re using a 3d camera. Try the html renderer.');\n  };\n\n  BaseRenderer.prototype.createAudio = function (data) {\n    return new AudioElement(data, this.globalData, this);\n  };\n\n  BaseRenderer.prototype.createFootage = function (data) {\n    return new FootageElement(data, this.globalData, this);\n  };\n\n  BaseRenderer.prototype.buildAllItems = function () {\n    var i;\n    var len = this.layers.length;\n\n    for (i = 0; i < len; i += 1) {\n      this.buildItem(i);\n    }\n\n    this.checkPendingElements();\n  };\n\n  BaseRenderer.prototype.includeLayers = function (newLayers) {\n    this.completeLayers = false;\n    var i;\n    var len = newLayers.length;\n    var j;\n    var jLen = this.layers.length;\n\n    for (i = 0; i < len; i += 1) {\n      j = 0;\n\n      while (j < jLen) {\n        if (this.layers[j].id === newLayers[i].id) {\n          this.layers[j] = newLayers[i];\n          break;\n        }\n\n        j += 1;\n      }\n    }\n  };\n\n  BaseRenderer.prototype.setProjectInterface = function (pInterface) {\n    this.globalData.projectInterface = pInterface;\n  };\n\n  BaseRenderer.prototype.initItems = function () {\n    if (!this.globalData.progressiveLoad) {\n      this.buildAllItems();\n    }\n  };\n\n  BaseRenderer.prototype.buildElementParenting = function (element, parentName, hierarchy) {\n    var elements = this.elements;\n    var layers = this.layers;\n    var i = 0;\n    var len = layers.length;\n\n    while (i < len) {\n      if (layers[i].ind == parentName) {\n        // eslint-disable-line eqeqeq\n        if (!elements[i] || elements[i] === true) {\n          this.buildItem(i);\n          this.addPendingElement(element);\n        } else {\n          hierarchy.push(elements[i]);\n          elements[i].setAsParent();\n\n          if (layers[i].parent !== undefined) {\n            this.buildElementParenting(element, layers[i].parent, hierarchy);\n          } else {\n            element.setHierarchy(hierarchy);\n          }\n        }\n      }\n\n      i += 1;\n    }\n  };\n\n  BaseRenderer.prototype.addPendingElement = function (element) {\n    this.pendingElements.push(element);\n  };\n\n  BaseRenderer.prototype.searchExtraCompositions = function (assets) {\n    var i;\n    var len = assets.length;\n\n    for (i = 0; i < len; i += 1) {\n      if (assets[i].xt) {\n        var comp = this.createComp(assets[i]);\n        comp.initExpressions();\n        this.globalData.projectInterface.registerComposition(comp);\n      }\n    }\n  };\n\n  BaseRenderer.prototype.getElementByPath = function (path) {\n    var pathValue = path.shift();\n    var element;\n\n    if (typeof pathValue === 'number') {\n      element = this.elements[pathValue];\n    } else {\n      var i;\n      var len = this.elements.length;\n\n      for (i = 0; i < len; i += 1) {\n        if (this.elements[i].data.nm === pathValue) {\n          element = this.elements[i];\n          break;\n        }\n      }\n    }\n\n    if (path.length === 0) {\n      return element;\n    }\n\n    return element.getElementByPath(path);\n  };\n\n  BaseRenderer.prototype.setupGlobalData = function (animData, fontsContainer) {\n    this.globalData.fontManager = new FontManager();\n    this.globalData.fontManager.addChars(animData.chars);\n    this.globalData.fontManager.addFonts(animData.fonts, fontsContainer);\n    this.globalData.getAssetData = this.animationItem.getAssetData.bind(this.animationItem);\n    this.globalData.getAssetsPath = this.animationItem.getAssetsPath.bind(this.animationItem);\n    this.globalData.imageLoader = this.animationItem.imagePreloader;\n    this.globalData.audioController = this.animationItem.audioController;\n    this.globalData.frameId = 0;\n    this.globalData.frameRate = animData.fr;\n    this.globalData.nm = animData.nm;\n    this.globalData.compSize = {\n      w: animData.w,\n      h: animData.h\n    };\n  };\n\n  function TransformElement() {}\n\n  TransformElement.prototype = {\n    initTransform: function initTransform() {\n      this.finalTransform = {\n        mProp: this.data.ks ? TransformPropertyFactory.getTransformProperty(this, this.data.ks, this) : {\n          o: 0\n        },\n        _matMdf: false,\n        _opMdf: false,\n        mat: new Matrix()\n      };\n\n      if (this.data.ao) {\n        this.finalTransform.mProp.autoOriented = true;\n      } // TODO: check TYPE 11: Guided elements\n\n\n      if (this.data.ty !== 11) {// this.createElements();\n      }\n    },\n    renderTransform: function renderTransform() {\n      this.finalTransform._opMdf = this.finalTransform.mProp.o._mdf || this._isFirstFrame;\n      this.finalTransform._matMdf = this.finalTransform.mProp._mdf || this._isFirstFrame;\n\n      if (this.hierarchy) {\n        var mat;\n        var finalMat = this.finalTransform.mat;\n        var i = 0;\n        var len = this.hierarchy.length; // Checking if any of the transformation matrices in the hierarchy chain has changed.\n\n        if (!this.finalTransform._matMdf) {\n          while (i < len) {\n            if (this.hierarchy[i].finalTransform.mProp._mdf) {\n              this.finalTransform._matMdf = true;\n              break;\n            }\n\n            i += 1;\n          }\n        }\n\n        if (this.finalTransform._matMdf) {\n          mat = this.finalTransform.mProp.v.props;\n          finalMat.cloneFromProps(mat);\n\n          for (i = 0; i < len; i += 1) {\n            mat = this.hierarchy[i].finalTransform.mProp.v.props;\n            finalMat.transform(mat[0], mat[1], mat[2], mat[3], mat[4], mat[5], mat[6], mat[7], mat[8], mat[9], mat[10], mat[11], mat[12], mat[13], mat[14], mat[15]);\n          }\n        }\n      }\n    },\n    globalToLocal: function globalToLocal(pt) {\n      var transforms = [];\n      transforms.push(this.finalTransform);\n      var flag = true;\n      var comp = this.comp;\n\n      while (flag) {\n        if (comp.finalTransform) {\n          if (comp.data.hasMask) {\n            transforms.splice(0, 0, comp.finalTransform);\n          }\n\n          comp = comp.comp;\n        } else {\n          flag = false;\n        }\n      }\n\n      var i;\n      var len = transforms.length;\n      var ptNew;\n\n      for (i = 0; i < len; i += 1) {\n        ptNew = transforms[i].mat.applyToPointArray(0, 0, 0); // ptNew = transforms[i].mat.applyToPointArray(pt[0],pt[1],pt[2]);\n\n        pt = [pt[0] - ptNew[0], pt[1] - ptNew[1], 0];\n      }\n\n      return pt;\n    },\n    mHelper: new Matrix()\n  };\n\n  function MaskElement(data, element, globalData) {\n    this.data = data;\n    this.element = element;\n    this.globalData = globalData;\n    this.storedData = [];\n    this.masksProperties = this.data.masksProperties || [];\n    this.maskElement = null;\n    var defs = this.globalData.defs;\n    var i;\n    var len = this.masksProperties ? this.masksProperties.length : 0;\n    this.viewData = createSizedArray(len);\n    this.solidPath = '';\n    var path;\n    var properties = this.masksProperties;\n    var count = 0;\n    var currentMasks = [];\n    var j;\n    var jLen;\n    var layerId = createElementID();\n    var rect;\n    var expansor;\n    var feMorph;\n    var x;\n    var maskType = 'clipPath';\n    var maskRef = 'clip-path';\n\n    for (i = 0; i < len; i += 1) {\n      if (properties[i].mode !== 'a' && properties[i].mode !== 'n' || properties[i].inv || properties[i].o.k !== 100 || properties[i].o.x) {\n        maskType = 'mask';\n        maskRef = 'mask';\n      }\n\n      if ((properties[i].mode === 's' || properties[i].mode === 'i') && count === 0) {\n        rect = createNS('rect');\n        rect.setAttribute('fill', '#ffffff');\n        rect.setAttribute('width', this.element.comp.data.w || 0);\n        rect.setAttribute('height', this.element.comp.data.h || 0);\n        currentMasks.push(rect);\n      } else {\n        rect = null;\n      }\n\n      path = createNS('path');\n\n      if (properties[i].mode === 'n') {\n        // TODO move this to a factory or to a constructor\n        this.viewData[i] = {\n          op: PropertyFactory.getProp(this.element, properties[i].o, 0, 0.01, this.element),\n          prop: ShapePropertyFactory.getShapeProp(this.element, properties[i], 3),\n          elem: path,\n          lastPath: ''\n        };\n        defs.appendChild(path);\n      } else {\n        count += 1;\n        path.setAttribute('fill', properties[i].mode === 's' ? '#000000' : '#ffffff');\n        path.setAttribute('clip-rule', 'nonzero');\n        var filterID;\n\n        if (properties[i].x.k !== 0) {\n          maskType = 'mask';\n          maskRef = 'mask';\n          x = PropertyFactory.getProp(this.element, properties[i].x, 0, null, this.element);\n          filterID = createElementID();\n          expansor = createNS('filter');\n          expansor.setAttribute('id', filterID);\n          feMorph = createNS('feMorphology');\n          feMorph.setAttribute('operator', 'erode');\n          feMorph.setAttribute('in', 'SourceGraphic');\n          feMorph.setAttribute('radius', '0');\n          expansor.appendChild(feMorph);\n          defs.appendChild(expansor);\n          path.setAttribute('stroke', properties[i].mode === 's' ? '#000000' : '#ffffff');\n        } else {\n          feMorph = null;\n          x = null;\n        } // TODO move this to a factory or to a constructor\n\n\n        this.storedData[i] = {\n          elem: path,\n          x: x,\n          expan: feMorph,\n          lastPath: '',\n          lastOperator: '',\n          filterId: filterID,\n          lastRadius: 0\n        };\n\n        if (properties[i].mode === 'i') {\n          jLen = currentMasks.length;\n          var g = createNS('g');\n\n          for (j = 0; j < jLen; j += 1) {\n            g.appendChild(currentMasks[j]);\n          }\n\n          var mask = createNS('mask');\n          mask.setAttribute('mask-type', 'alpha');\n          mask.setAttribute('id', layerId + '_' + count);\n          mask.appendChild(path);\n          defs.appendChild(mask);\n          g.setAttribute('mask', 'url(' + getLocationHref() + '#' + layerId + '_' + count + ')');\n          currentMasks.length = 0;\n          currentMasks.push(g);\n        } else {\n          currentMasks.push(path);\n        }\n\n        if (properties[i].inv && !this.solidPath) {\n          this.solidPath = this.createLayerSolidPath();\n        } // TODO move this to a factory or to a constructor\n\n\n        this.viewData[i] = {\n          elem: path,\n          lastPath: '',\n          op: PropertyFactory.getProp(this.element, properties[i].o, 0, 0.01, this.element),\n          prop: ShapePropertyFactory.getShapeProp(this.element, properties[i], 3),\n          invRect: rect\n        };\n\n        if (!this.viewData[i].prop.k) {\n          this.drawPath(properties[i], this.viewData[i].prop.v, this.viewData[i]);\n        }\n      }\n    }\n\n    this.maskElement = createNS(maskType);\n    len = currentMasks.length;\n\n    for (i = 0; i < len; i += 1) {\n      this.maskElement.appendChild(currentMasks[i]);\n    }\n\n    if (count > 0) {\n      this.maskElement.setAttribute('id', layerId);\n      this.element.maskedElement.setAttribute(maskRef, 'url(' + getLocationHref() + '#' + layerId + ')');\n      defs.appendChild(this.maskElement);\n    }\n\n    if (this.viewData.length) {\n      this.element.addRenderableComponent(this);\n    }\n  }\n\n  MaskElement.prototype.getMaskProperty = function (pos) {\n    return this.viewData[pos].prop;\n  };\n\n  MaskElement.prototype.renderFrame = function (isFirstFrame) {\n    var finalMat = this.element.finalTransform.mat;\n    var i;\n    var len = this.masksProperties.length;\n\n    for (i = 0; i < len; i += 1) {\n      if (this.viewData[i].prop._mdf || isFirstFrame) {\n        this.drawPath(this.masksProperties[i], this.viewData[i].prop.v, this.viewData[i]);\n      }\n\n      if (this.viewData[i].op._mdf || isFirstFrame) {\n        this.viewData[i].elem.setAttribute('fill-opacity', this.viewData[i].op.v);\n      }\n\n      if (this.masksProperties[i].mode !== 'n') {\n        if (this.viewData[i].invRect && (this.element.finalTransform.mProp._mdf || isFirstFrame)) {\n          this.viewData[i].invRect.setAttribute('transform', finalMat.getInverseMatrix().to2dCSS());\n        }\n\n        if (this.storedData[i].x && (this.storedData[i].x._mdf || isFirstFrame)) {\n          var feMorph = this.storedData[i].expan;\n\n          if (this.storedData[i].x.v < 0) {\n            if (this.storedData[i].lastOperator !== 'erode') {\n              this.storedData[i].lastOperator = 'erode';\n              this.storedData[i].elem.setAttribute('filter', 'url(' + getLocationHref() + '#' + this.storedData[i].filterId + ')');\n            }\n\n            feMorph.setAttribute('radius', -this.storedData[i].x.v);\n          } else {\n            if (this.storedData[i].lastOperator !== 'dilate') {\n              this.storedData[i].lastOperator = 'dilate';\n              this.storedData[i].elem.setAttribute('filter', null);\n            }\n\n            this.storedData[i].elem.setAttribute('stroke-width', this.storedData[i].x.v * 2);\n          }\n        }\n      }\n    }\n  };\n\n  MaskElement.prototype.getMaskelement = function () {\n    return this.maskElement;\n  };\n\n  MaskElement.prototype.createLayerSolidPath = function () {\n    var path = 'M0,0 ';\n    path += ' h' + this.globalData.compSize.w;\n    path += ' v' + this.globalData.compSize.h;\n    path += ' h-' + this.globalData.compSize.w;\n    path += ' v-' + this.globalData.compSize.h + ' ';\n    return path;\n  };\n\n  MaskElement.prototype.drawPath = function (pathData, pathNodes, viewData) {\n    var pathString = ' M' + pathNodes.v[0][0] + ',' + pathNodes.v[0][1];\n    var i;\n    var len;\n    len = pathNodes._length;\n\n    for (i = 1; i < len; i += 1) {\n      // pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[i][0]+','+pathNodes.i[i][1] + \" \"+pathNodes.v[i][0]+','+pathNodes.v[i][1];\n      pathString += ' C' + pathNodes.o[i - 1][0] + ',' + pathNodes.o[i - 1][1] + ' ' + pathNodes.i[i][0] + ',' + pathNodes.i[i][1] + ' ' + pathNodes.v[i][0] + ',' + pathNodes.v[i][1];\n    } // pathString += \" C\"+pathNodes.o[i-1][0]+','+pathNodes.o[i-1][1] + \" \"+pathNodes.i[0][0]+','+pathNodes.i[0][1] + \" \"+pathNodes.v[0][0]+','+pathNodes.v[0][1];\n\n\n    if (pathNodes.c && len > 1) {\n      pathString += ' C' + pathNodes.o[i - 1][0] + ',' + pathNodes.o[i - 1][1] + ' ' + pathNodes.i[0][0] + ',' + pathNodes.i[0][1] + ' ' + pathNodes.v[0][0] + ',' + pathNodes.v[0][1];\n    } // pathNodes.__renderedString = pathString;\n\n\n    if (viewData.lastPath !== pathString) {\n      var pathShapeValue = '';\n\n      if (viewData.elem) {\n        if (pathNodes.c) {\n          pathShapeValue = pathData.inv ? this.solidPath + pathString : pathString;\n        }\n\n        viewData.elem.setAttribute('d', pathShapeValue);\n      }\n\n      viewData.lastPath = pathString;\n    }\n  };\n\n  MaskElement.prototype.destroy = function () {\n    this.element = null;\n    this.globalData = null;\n    this.maskElement = null;\n    this.data = null;\n    this.masksProperties = null;\n  };\n\n  var filtersFactory = function () {\n    var ob = {};\n    ob.createFilter = createFilter;\n    ob.createAlphaToLuminanceFilter = createAlphaToLuminanceFilter;\n\n    function createFilter(filId, skipCoordinates) {\n      var fil = createNS('filter');\n      fil.setAttribute('id', filId);\n\n      if (skipCoordinates !== true) {\n        fil.setAttribute('filterUnits', 'objectBoundingBox');\n        fil.setAttribute('x', '0%');\n        fil.setAttribute('y', '0%');\n        fil.setAttribute('width', '100%');\n        fil.setAttribute('height', '100%');\n      }\n\n      return fil;\n    }\n\n    function createAlphaToLuminanceFilter() {\n      var feColorMatrix = createNS('feColorMatrix');\n      feColorMatrix.setAttribute('type', 'matrix');\n      feColorMatrix.setAttribute('color-interpolation-filters', 'sRGB');\n      feColorMatrix.setAttribute('values', '0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1');\n      return feColorMatrix;\n    }\n\n    return ob;\n  }();\n\n  var featureSupport = function () {\n    var ob = {\n      maskType: true\n    };\n\n    if (/MSIE 10/i.test(navigator.userAgent) || /MSIE 9/i.test(navigator.userAgent) || /rv:11.0/i.test(navigator.userAgent) || /Edge\\/\\d./i.test(navigator.userAgent)) {\n      ob.maskType = false;\n    }\n\n    return ob;\n  }();\n\n  var registeredEffects = {};\n  var idPrefix = 'filter_result_';\n\n  function SVGEffects(elem) {\n    var i;\n    var source = 'SourceGraphic';\n    var len = elem.data.ef ? elem.data.ef.length : 0;\n    var filId = createElementID();\n    var fil = filtersFactory.createFilter(filId, true);\n    var count = 0;\n    this.filters = [];\n    var filterManager;\n\n    for (i = 0; i < len; i += 1) {\n      filterManager = null;\n      var type = elem.data.ef[i].ty;\n\n      if (registeredEffects[type]) {\n        var Effect = registeredEffects[type].effect;\n        filterManager = new Effect(fil, elem.effectsManager.effectElements[i], elem, idPrefix + count, source);\n        source = idPrefix + count;\n\n        if (registeredEffects[type].countsAsEffect) {\n          count += 1;\n        }\n      }\n\n      if (filterManager) {\n        this.filters.push(filterManager);\n      }\n    }\n\n    if (count) {\n      elem.globalData.defs.appendChild(fil);\n      elem.layerElement.setAttribute('filter', 'url(' + getLocationHref() + '#' + filId + ')');\n    }\n\n    if (this.filters.length) {\n      elem.addRenderableComponent(this);\n    }\n  }\n\n  SVGEffects.prototype.renderFrame = function (_isFirstFrame) {\n    var i;\n    var len = this.filters.length;\n\n    for (i = 0; i < len; i += 1) {\n      this.filters[i].renderFrame(_isFirstFrame);\n    }\n  };\n\n  function registerEffect(id, effect, countsAsEffect) {\n    registeredEffects[id] = {\n      effect: effect,\n      countsAsEffect: countsAsEffect\n    };\n  }\n\n  function SVGBaseElement() {}\n\n  SVGBaseElement.prototype = {\n    initRendererElement: function initRendererElement() {\n      this.layerElement = createNS('g');\n    },\n    createContainerElements: function createContainerElements() {\n      this.matteElement = createNS('g');\n      this.transformedElement = this.layerElement;\n      this.maskedElement = this.layerElement;\n      this._sizeChanged = false;\n      var layerElementParent = null; // If this layer acts as a mask for the following layer\n\n      var filId;\n      var fil;\n      var gg;\n\n      if (this.data.td) {\n        if (this.data.td == 3 || this.data.td == 1) {\n          // eslint-disable-line eqeqeq\n          var masker = createNS('mask');\n          masker.setAttribute('id', this.layerId);\n          masker.setAttribute('mask-type', this.data.td == 3 ? 'luminance' : 'alpha'); // eslint-disable-line eqeqeq\n\n          masker.appendChild(this.layerElement);\n          layerElementParent = masker;\n          this.globalData.defs.appendChild(masker); // This is only for IE and Edge when mask if of type alpha\n\n          if (!featureSupport.maskType && this.data.td == 1) {\n            // eslint-disable-line eqeqeq\n            masker.setAttribute('mask-type', 'luminance');\n            filId = createElementID();\n            fil = filtersFactory.createFilter(filId);\n            this.globalData.defs.appendChild(fil);\n            fil.appendChild(filtersFactory.createAlphaToLuminanceFilter());\n            gg = createNS('g');\n            gg.appendChild(this.layerElement);\n            layerElementParent = gg;\n            masker.appendChild(gg);\n            gg.setAttribute('filter', 'url(' + getLocationHref() + '#' + filId + ')');\n          }\n        } else if (this.data.td == 2) {\n          // eslint-disable-line eqeqeq\n          var maskGroup = createNS('mask');\n          maskGroup.setAttribute('id', this.layerId);\n          maskGroup.setAttribute('mask-type', 'alpha');\n          var maskGrouper = createNS('g');\n          maskGroup.appendChild(maskGrouper);\n          filId = createElementID();\n          fil = filtersFactory.createFilter(filId); /// /\n          // This solution doesn't work on Android when meta tag with viewport attribute is set\n\n          /* var feColorMatrix = createNS('feColorMatrix');\r\n                  feColorMatrix.setAttribute('type', 'matrix');\r\n                  feColorMatrix.setAttribute('color-interpolation-filters', 'sRGB');\r\n                  feColorMatrix.setAttribute('values','1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 -1 1');\r\n                  fil.appendChild(feColorMatrix); */\n          /// /\n\n          var feCTr = createNS('feComponentTransfer');\n          feCTr.setAttribute('in', 'SourceGraphic');\n          fil.appendChild(feCTr);\n          var feFunc = createNS('feFuncA');\n          feFunc.setAttribute('type', 'table');\n          feFunc.setAttribute('tableValues', '1.0 0.0');\n          feCTr.appendChild(feFunc); /// /\n\n          this.globalData.defs.appendChild(fil);\n          var alphaRect = createNS('rect');\n          alphaRect.setAttribute('width', this.comp.data.w);\n          alphaRect.setAttribute('height', this.comp.data.h);\n          alphaRect.setAttribute('x', '0');\n          alphaRect.setAttribute('y', '0');\n          alphaRect.setAttribute('fill', '#ffffff');\n          alphaRect.setAttribute('opacity', '0');\n          maskGrouper.setAttribute('filter', 'url(' + getLocationHref() + '#' + filId + ')');\n          maskGrouper.appendChild(alphaRect);\n          maskGrouper.appendChild(this.layerElement);\n          layerElementParent = maskGrouper;\n\n          if (!featureSupport.maskType) {\n            maskGroup.setAttribute('mask-type', 'luminance');\n            fil.appendChild(filtersFactory.createAlphaToLuminanceFilter());\n            gg = createNS('g');\n            maskGrouper.appendChild(alphaRect);\n            gg.appendChild(this.layerElement);\n            layerElementParent = gg;\n            maskGrouper.appendChild(gg);\n          }\n\n          this.globalData.defs.appendChild(maskGroup);\n        }\n      } else if (this.data.tt) {\n        this.matteElement.appendChild(this.layerElement);\n        layerElementParent = this.matteElement;\n        this.baseElement = this.matteElement;\n      } else {\n        this.baseElement = this.layerElement;\n      }\n\n      if (this.data.ln) {\n        this.layerElement.setAttribute('id', this.data.ln);\n      }\n\n      if (this.data.cl) {\n        this.layerElement.setAttribute('class', this.data.cl);\n      } // Clipping compositions to hide content that exceeds boundaries. If collapsed transformations is on, component should not be clipped\n\n\n      if (this.data.ty === 0 && !this.data.hd) {\n        var cp = createNS('clipPath');\n        var pt = createNS('path');\n        pt.setAttribute('d', 'M0,0 L' + this.data.w + ',0 L' + this.data.w + ',' + this.data.h + ' L0,' + this.data.h + 'z');\n        var clipId = createElementID();\n        cp.setAttribute('id', clipId);\n        cp.appendChild(pt);\n        this.globalData.defs.appendChild(cp);\n\n        if (this.checkMasks()) {\n          var cpGroup = createNS('g');\n          cpGroup.setAttribute('clip-path', 'url(' + getLocationHref() + '#' + clipId + ')');\n          cpGroup.appendChild(this.layerElement);\n          this.transformedElement = cpGroup;\n\n          if (layerElementParent) {\n            layerElementParent.appendChild(this.transformedElement);\n          } else {\n            this.baseElement = this.transformedElement;\n          }\n        } else {\n          this.layerElement.setAttribute('clip-path', 'url(' + getLocationHref() + '#' + clipId + ')');\n        }\n      }\n\n      if (this.data.bm !== 0) {\n        this.setBlendMode();\n      }\n    },\n    renderElement: function renderElement() {\n      if (this.finalTransform._matMdf) {\n        this.transformedElement.setAttribute('transform', this.finalTransform.mat.to2dCSS());\n      }\n\n      if (this.finalTransform._opMdf) {\n        this.transformedElement.setAttribute('opacity', this.finalTransform.mProp.o.v);\n      }\n    },\n    destroyBaseElement: function destroyBaseElement() {\n      this.layerElement = null;\n      this.matteElement = null;\n      this.maskManager.destroy();\n    },\n    getBaseElement: function getBaseElement() {\n      if (this.data.hd) {\n        return null;\n      }\n\n      return this.baseElement;\n    },\n    createRenderableComponents: function createRenderableComponents() {\n      this.maskManager = new MaskElement(this.data, this, this.globalData);\n      this.renderableEffectsManager = new SVGEffects(this);\n    },\n    setMatte: function setMatte(id) {\n      if (!this.matteElement) {\n        return;\n      }\n\n      this.matteElement.setAttribute('mask', 'url(' + getLocationHref() + '#' + id + ')');\n    }\n  };\n\n  /**\r\n   * @file\r\n   * Handles AE's layer parenting property.\r\n   *\r\n   */\n  function HierarchyElement() {}\n\n  HierarchyElement.prototype = {\n    /**\r\n       * @function\r\n       * Initializes hierarchy properties\r\n       *\r\n       */\n    initHierarchy: function initHierarchy() {\n      // element's parent list\n      this.hierarchy = []; // if element is parent of another layer _isParent will be true\n\n      this._isParent = false;\n      this.checkParenting();\n    },\n\n    /**\r\n       * @function\r\n       * Sets layer's hierarchy.\r\n       * @param {array} hierarch\r\n       * layer's parent list\r\n       *\r\n       */\n    setHierarchy: function setHierarchy(hierarchy) {\n      this.hierarchy = hierarchy;\n    },\n\n    /**\r\n       * @function\r\n       * Sets layer as parent.\r\n       *\r\n       */\n    setAsParent: function setAsParent() {\n      this._isParent = true;\n    },\n\n    /**\r\n       * @function\r\n       * Searches layer's parenting chain\r\n       *\r\n       */\n    checkParenting: function checkParenting() {\n      if (this.data.parent !== undefined) {\n        this.comp.buildElementParenting(this, this.data.parent, []);\n      }\n    }\n  };\n\n  function RenderableDOMElement() {}\n\n  (function () {\n    var _prototype = {\n      initElement: function initElement(data, globalData, comp) {\n        this.initFrame();\n        this.initBaseData(data, globalData, comp);\n        this.initTransform(data, globalData, comp);\n        this.initHierarchy();\n        this.initRenderable();\n        this.initRendererElement();\n        this.createContainerElements();\n        this.createRenderableComponents();\n        this.createContent();\n        this.hide();\n      },\n      hide: function hide() {\n        // console.log('HIDE', this);\n        if (!this.hidden && (!this.isInRange || this.isTransparent)) {\n          var elem = this.baseElement || this.layerElement;\n          elem.style.display = 'none';\n          this.hidden = true;\n        }\n      },\n      show: function show() {\n        // console.log('SHOW', this);\n        if (this.isInRange && !this.isTransparent) {\n          if (!this.data.hd) {\n            var elem = this.baseElement || this.layerElement;\n            elem.style.display = 'block';\n          }\n\n          this.hidden = false;\n          this._isFirstFrame = true;\n        }\n      },\n      renderFrame: function renderFrame() {\n        // If it is exported as hidden (data.hd === true) no need to render\n        // If it is not visible no need to render\n        if (this.data.hd || this.hidden) {\n          return;\n        }\n\n        this.renderTransform();\n        this.renderRenderable();\n        this.renderElement();\n        this.renderInnerContent();\n\n        if (this._isFirstFrame) {\n          this._isFirstFrame = false;\n        }\n      },\n      renderInnerContent: function renderInnerContent() {},\n      prepareFrame: function prepareFrame(num) {\n        this._mdf = false;\n        this.prepareRenderableFrame(num);\n        this.prepareProperties(num, this.isInRange);\n        this.checkTransparency();\n      },\n      destroy: function destroy() {\n        this.innerElem = null;\n        this.destroyBaseElement();\n      }\n    };\n    extendPrototype([RenderableElement, createProxyFunction(_prototype)], RenderableDOMElement);\n  })();\n\n  function IImageElement(data, globalData, comp) {\n    this.assetData = globalData.getAssetData(data.refId);\n    this.initElement(data, globalData, comp);\n    this.sourceRect = {\n      top: 0,\n      left: 0,\n      width: this.assetData.w,\n      height: this.assetData.h\n    };\n  }\n\n  extendPrototype([BaseElement, TransformElement, SVGBaseElement, HierarchyElement, FrameElement, RenderableDOMElement], IImageElement);\n\n  IImageElement.prototype.createContent = function () {\n    var assetPath = this.globalData.getAssetsPath(this.assetData);\n    this.innerElem = createNS('image');\n    this.innerElem.setAttribute('width', this.assetData.w + 'px');\n    this.innerElem.setAttribute('height', this.assetData.h + 'px');\n    this.innerElem.setAttribute('preserveAspectRatio', this.assetData.pr || this.globalData.renderConfig.imagePreserveAspectRatio);\n    this.innerElem.setAttributeNS('http://www.w3.org/1999/xlink', 'href', assetPath);\n    this.layerElement.appendChild(this.innerElem);\n  };\n\n  IImageElement.prototype.sourceRectAtTime = function () {\n    return this.sourceRect;\n  };\n\n  function ProcessedElement(element, position) {\n    this.elem = element;\n    this.pos = position;\n  }\n\n  function IShapeElement() {}\n\n  IShapeElement.prototype = {\n    addShapeToModifiers: function addShapeToModifiers(data) {\n      var i;\n      var len = this.shapeModifiers.length;\n\n      for (i = 0; i < len; i += 1) {\n        this.shapeModifiers[i].addShape(data);\n      }\n    },\n    isShapeInAnimatedModifiers: function isShapeInAnimatedModifiers(data) {\n      var i = 0;\n      var len = this.shapeModifiers.length;\n\n      while (i < len) {\n        if (this.shapeModifiers[i].isAnimatedWithShape(data)) {\n          return true;\n        }\n      }\n\n      return false;\n    },\n    renderModifiers: function renderModifiers() {\n      if (!this.shapeModifiers.length) {\n        return;\n      }\n\n      var i;\n      var len = this.shapes.length;\n\n      for (i = 0; i < len; i += 1) {\n        this.shapes[i].sh.reset();\n      }\n\n      len = this.shapeModifiers.length;\n      var shouldBreakProcess;\n\n      for (i = len - 1; i >= 0; i -= 1) {\n        shouldBreakProcess = this.shapeModifiers[i].processShapes(this._isFirstFrame); // workaround to fix cases where a repeater resets the shape so the following processes get called twice\n        // TODO: find a better solution for this\n\n        if (shouldBreakProcess) {\n          break;\n        }\n      }\n    },\n    searchProcessedElement: function searchProcessedElement(elem) {\n      var elements = this.processedElements;\n      var i = 0;\n      var len = elements.length;\n\n      while (i < len) {\n        if (elements[i].elem === elem) {\n          return elements[i].pos;\n        }\n\n        i += 1;\n      }\n\n      return 0;\n    },\n    addProcessedElement: function addProcessedElement(elem, pos) {\n      var elements = this.processedElements;\n      var i = elements.length;\n\n      while (i) {\n        i -= 1;\n\n        if (elements[i].elem === elem) {\n          elements[i].pos = pos;\n          return;\n        }\n      }\n\n      elements.push(new ProcessedElement(elem, pos));\n    },\n    prepareFrame: function prepareFrame(num) {\n      this.prepareRenderableFrame(num);\n      this.prepareProperties(num, this.isInRange);\n    }\n  };\n\n  var lineCapEnum = {\n    1: 'butt',\n    2: 'round',\n    3: 'square'\n  };\n  var lineJoinEnum = {\n    1: 'miter',\n    2: 'round',\n    3: 'bevel'\n  };\n\n  function SVGShapeData(transformers, level, shape) {\n    this.caches = [];\n    this.styles = [];\n    this.transformers = transformers;\n    this.lStr = '';\n    this.sh = shape;\n    this.lvl = level; // TODO find if there are some cases where _isAnimated can be false.\n    // For now, since shapes add up with other shapes. They have to be calculated every time.\n    // One way of finding out is checking if all styles associated to this shape depend only of this shape\n\n    this._isAnimated = !!shape.k; // TODO: commenting this for now since all shapes are animated\n\n    var i = 0;\n    var len = transformers.length;\n\n    while (i < len) {\n      if (transformers[i].mProps.dynamicProperties.length) {\n        this._isAnimated = true;\n        break;\n      }\n\n      i += 1;\n    }\n  }\n\n  SVGShapeData.prototype.setAsAnimated = function () {\n    this._isAnimated = true;\n  };\n\n  function SVGStyleData(data, level) {\n    this.data = data;\n    this.type = data.ty;\n    this.d = '';\n    this.lvl = level;\n    this._mdf = false;\n    this.closed = data.hd === true;\n    this.pElem = createNS('path');\n    this.msElem = null;\n  }\n\n  SVGStyleData.prototype.reset = function () {\n    this.d = '';\n    this._mdf = false;\n  };\n\n  function DashProperty(elem, data, renderer, container) {\n    this.elem = elem;\n    this.frameId = -1;\n    this.dataProps = createSizedArray(data.length);\n    this.renderer = renderer;\n    this.k = false;\n    this.dashStr = '';\n    this.dashArray = createTypedArray('float32', data.length ? data.length - 1 : 0);\n    this.dashoffset = createTypedArray('float32', 1);\n    this.initDynamicPropertyContainer(container);\n    var i;\n    var len = data.length || 0;\n    var prop;\n\n    for (i = 0; i < len; i += 1) {\n      prop = PropertyFactory.getProp(elem, data[i].v, 0, 0, this);\n      this.k = prop.k || this.k;\n      this.dataProps[i] = {\n        n: data[i].n,\n        p: prop\n      };\n    }\n\n    if (!this.k) {\n      this.getValue(true);\n    }\n\n    this._isAnimated = this.k;\n  }\n\n  DashProperty.prototype.getValue = function (forceRender) {\n    if (this.elem.globalData.frameId === this.frameId && !forceRender) {\n      return;\n    }\n\n    this.frameId = this.elem.globalData.frameId;\n    this.iterateDynamicProperties();\n    this._mdf = this._mdf || forceRender;\n\n    if (this._mdf) {\n      var i = 0;\n      var len = this.dataProps.length;\n\n      if (this.renderer === 'svg') {\n        this.dashStr = '';\n      }\n\n      for (i = 0; i < len; i += 1) {\n        if (this.dataProps[i].n !== 'o') {\n          if (this.renderer === 'svg') {\n            this.dashStr += ' ' + this.dataProps[i].p.v;\n          } else {\n            this.dashArray[i] = this.dataProps[i].p.v;\n          }\n        } else {\n          this.dashoffset[0] = this.dataProps[i].p.v;\n        }\n      }\n    }\n  };\n\n  extendPrototype([DynamicPropertyContainer], DashProperty);\n\n  function SVGStrokeStyleData(elem, data, styleOb) {\n    this.initDynamicPropertyContainer(elem);\n    this.getValue = this.iterateDynamicProperties;\n    this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, this);\n    this.w = PropertyFactory.getProp(elem, data.w, 0, null, this);\n    this.d = new DashProperty(elem, data.d || {}, 'svg', this);\n    this.c = PropertyFactory.getProp(elem, data.c, 1, 255, this);\n    this.style = styleOb;\n    this._isAnimated = !!this._isAnimated;\n  }\n\n  extendPrototype([DynamicPropertyContainer], SVGStrokeStyleData);\n\n  function SVGFillStyleData(elem, data, styleOb) {\n    this.initDynamicPropertyContainer(elem);\n    this.getValue = this.iterateDynamicProperties;\n    this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, this);\n    this.c = PropertyFactory.getProp(elem, data.c, 1, 255, this);\n    this.style = styleOb;\n  }\n\n  extendPrototype([DynamicPropertyContainer], SVGFillStyleData);\n\n  function SVGNoStyleData(elem, data, styleOb) {\n    this.initDynamicPropertyContainer(elem);\n    this.getValue = this.iterateDynamicProperties;\n    this.style = styleOb;\n  }\n\n  extendPrototype([DynamicPropertyContainer], SVGNoStyleData);\n\n  function GradientProperty(elem, data, container) {\n    this.data = data;\n    this.c = createTypedArray('uint8c', data.p * 4);\n    var cLength = data.k.k[0].s ? data.k.k[0].s.length - data.p * 4 : data.k.k.length - data.p * 4;\n    this.o = createTypedArray('float32', cLength);\n    this._cmdf = false;\n    this._omdf = false;\n    this._collapsable = this.checkCollapsable();\n    this._hasOpacity = cLength;\n    this.initDynamicPropertyContainer(container);\n    this.prop = PropertyFactory.getProp(elem, data.k, 1, null, this);\n    this.k = this.prop.k;\n    this.getValue(true);\n  }\n\n  GradientProperty.prototype.comparePoints = function (values, points) {\n    var i = 0;\n    var len = this.o.length / 2;\n    var diff;\n\n    while (i < len) {\n      diff = Math.abs(values[i * 4] - values[points * 4 + i * 2]);\n\n      if (diff > 0.01) {\n        return false;\n      }\n\n      i += 1;\n    }\n\n    return true;\n  };\n\n  GradientProperty.prototype.checkCollapsable = function () {\n    if (this.o.length / 2 !== this.c.length / 4) {\n      return false;\n    }\n\n    if (this.data.k.k[0].s) {\n      var i = 0;\n      var len = this.data.k.k.length;\n\n      while (i < len) {\n        if (!this.comparePoints(this.data.k.k[i].s, this.data.p)) {\n          return false;\n        }\n\n        i += 1;\n      }\n    } else if (!this.comparePoints(this.data.k.k, this.data.p)) {\n      return false;\n    }\n\n    return true;\n  };\n\n  GradientProperty.prototype.getValue = function (forceRender) {\n    this.prop.getValue();\n    this._mdf = false;\n    this._cmdf = false;\n    this._omdf = false;\n\n    if (this.prop._mdf || forceRender) {\n      var i;\n      var len = this.data.p * 4;\n      var mult;\n      var val;\n\n      for (i = 0; i < len; i += 1) {\n        mult = i % 4 === 0 ? 100 : 255;\n        val = Math.round(this.prop.v[i] * mult);\n\n        if (this.c[i] !== val) {\n          this.c[i] = val;\n          this._cmdf = !forceRender;\n        }\n      }\n\n      if (this.o.length) {\n        len = this.prop.v.length;\n\n        for (i = this.data.p * 4; i < len; i += 1) {\n          mult = i % 2 === 0 ? 100 : 1;\n          val = i % 2 === 0 ? Math.round(this.prop.v[i] * 100) : this.prop.v[i];\n\n          if (this.o[i - this.data.p * 4] !== val) {\n            this.o[i - this.data.p * 4] = val;\n            this._omdf = !forceRender;\n          }\n        }\n      }\n\n      this._mdf = !forceRender;\n    }\n  };\n\n  extendPrototype([DynamicPropertyContainer], GradientProperty);\n\n  function SVGGradientFillStyleData(elem, data, styleOb) {\n    this.initDynamicPropertyContainer(elem);\n    this.getValue = this.iterateDynamicProperties;\n    this.initGradientData(elem, data, styleOb);\n  }\n\n  SVGGradientFillStyleData.prototype.initGradientData = function (elem, data, styleOb) {\n    this.o = PropertyFactory.getProp(elem, data.o, 0, 0.01, this);\n    this.s = PropertyFactory.getProp(elem, data.s, 1, null, this);\n    this.e = PropertyFactory.getProp(elem, data.e, 1, null, this);\n    this.h = PropertyFactory.getProp(elem, data.h || {\n      k: 0\n    }, 0, 0.01, this);\n    this.a = PropertyFactory.getProp(elem, data.a || {\n      k: 0\n    }, 0, degToRads, this);\n    this.g = new GradientProperty(elem, data.g, this);\n    this.style = styleOb;\n    this.stops = [];\n    this.setGradientData(styleOb.pElem, data);\n    this.setGradientOpacity(data, styleOb);\n    this._isAnimated = !!this._isAnimated;\n  };\n\n  SVGGradientFillStyleData.prototype.setGradientData = function (pathElement, data) {\n    var gradientId = createElementID();\n    var gfill = createNS(data.t === 1 ? 'linearGradient' : 'radialGradient');\n    gfill.setAttribute('id', gradientId);\n    gfill.setAttribute('spreadMethod', 'pad');\n    gfill.setAttribute('gradientUnits', 'userSpaceOnUse');\n    var stops = [];\n    var stop;\n    var j;\n    var jLen;\n    jLen = data.g.p * 4;\n\n    for (j = 0; j < jLen; j += 4) {\n      stop = createNS('stop');\n      gfill.appendChild(stop);\n      stops.push(stop);\n    }\n\n    pathElement.setAttribute(data.ty === 'gf' ? 'fill' : 'stroke', 'url(' + getLocationHref() + '#' + gradientId + ')');\n    this.gf = gfill;\n    this.cst = stops;\n  };\n\n  SVGGradientFillStyleData.prototype.setGradientOpacity = function (data, styleOb) {\n    if (this.g._hasOpacity && !this.g._collapsable) {\n      var stop;\n      var j;\n      var jLen;\n      var mask = createNS('mask');\n      var maskElement = createNS('path');\n      mask.appendChild(maskElement);\n      var opacityId = createElementID();\n      var maskId = createElementID();\n      mask.setAttribute('id', maskId);\n      var opFill = createNS(data.t === 1 ? 'linearGradient' : 'radialGradient');\n      opFill.setAttribute('id', opacityId);\n      opFill.setAttribute('spreadMethod', 'pad');\n      opFill.setAttribute('gradientUnits', 'userSpaceOnUse');\n      jLen = data.g.k.k[0].s ? data.g.k.k[0].s.length : data.g.k.k.length;\n      var stops = this.stops;\n\n      for (j = data.g.p * 4; j < jLen; j += 2) {\n        stop = createNS('stop');\n        stop.setAttribute('stop-color', 'rgb(255,255,255)');\n        opFill.appendChild(stop);\n        stops.push(stop);\n      }\n\n      maskElement.setAttribute(data.ty === 'gf' ? 'fill' : 'stroke', 'url(' + getLocationHref() + '#' + opacityId + ')');\n\n      if (data.ty === 'gs') {\n        maskElement.setAttribute('stroke-linecap', lineCapEnum[data.lc || 2]);\n        maskElement.setAttribute('stroke-linejoin', lineJoinEnum[data.lj || 2]);\n\n        if (data.lj === 1) {\n          maskElement.setAttribute('stroke-miterlimit', data.ml);\n        }\n      }\n\n      this.of = opFill;\n      this.ms = mask;\n      this.ost = stops;\n      this.maskId = maskId;\n      styleOb.msElem = maskElement;\n    }\n  };\n\n  extendPrototype([DynamicPropertyContainer], SVGGradientFillStyleData);\n\n  function SVGGradientStrokeStyleData(elem, data, styleOb) {\n    this.initDynamicPropertyContainer(elem);\n    this.getValue = this.iterateDynamicProperties;\n    this.w = PropertyFactory.getProp(elem, data.w, 0, null, this);\n    this.d = new DashProperty(elem, data.d || {}, 'svg', this);\n    this.initGradientData(elem, data, styleOb);\n    this._isAnimated = !!this._isAnimated;\n  }\n\n  extendPrototype([SVGGradientFillStyleData, DynamicPropertyContainer], SVGGradientStrokeStyleData);\n\n  function ShapeGroupData() {\n    this.it = [];\n    this.prevViewData = [];\n    this.gr = createNS('g');\n  }\n\n  function SVGTransformData(mProps, op, container) {\n    this.transform = {\n      mProps: mProps,\n      op: op,\n      container: container\n    };\n    this.elements = [];\n    this._isAnimated = this.transform.mProps.dynamicProperties.length || this.transform.op.effectsSequence.length;\n  }\n\n  var buildShapeString = function buildShapeString(pathNodes, length, closed, mat) {\n    if (length === 0) {\n      return '';\n    }\n\n    var _o = pathNodes.o;\n    var _i = pathNodes.i;\n    var _v = pathNodes.v;\n    var i;\n    var shapeString = ' M' + mat.applyToPointStringified(_v[0][0], _v[0][1]);\n\n    for (i = 1; i < length; i += 1) {\n      shapeString += ' C' + mat.applyToPointStringified(_o[i - 1][0], _o[i - 1][1]) + ' ' + mat.applyToPointStringified(_i[i][0], _i[i][1]) + ' ' + mat.applyToPointStringified(_v[i][0], _v[i][1]);\n    }\n\n    if (closed && length) {\n      shapeString += ' C' + mat.applyToPointStringified(_o[i - 1][0], _o[i - 1][1]) + ' ' + mat.applyToPointStringified(_i[0][0], _i[0][1]) + ' ' + mat.applyToPointStringified(_v[0][0], _v[0][1]);\n      shapeString += 'z';\n    }\n\n    return shapeString;\n  };\n\n  var SVGElementsRenderer = function () {\n    var _identityMatrix = new Matrix();\n\n    var _matrixHelper = new Matrix();\n\n    var ob = {\n      createRenderFunction: createRenderFunction\n    };\n\n    function createRenderFunction(data) {\n      switch (data.ty) {\n        case 'fl':\n          return renderFill;\n\n        case 'gf':\n          return renderGradient;\n\n        case 'gs':\n          return renderGradientStroke;\n\n        case 'st':\n          return renderStroke;\n\n        case 'sh':\n        case 'el':\n        case 'rc':\n        case 'sr':\n          return renderPath;\n\n        case 'tr':\n          return renderContentTransform;\n\n        case 'no':\n          return renderNoop;\n\n        default:\n          return null;\n      }\n    }\n\n    function renderContentTransform(styleData, itemData, isFirstFrame) {\n      if (isFirstFrame || itemData.transform.op._mdf) {\n        itemData.transform.container.setAttribute('opacity', itemData.transform.op.v);\n      }\n\n      if (isFirstFrame || itemData.transform.mProps._mdf) {\n        itemData.transform.container.setAttribute('transform', itemData.transform.mProps.v.to2dCSS());\n      }\n    }\n\n    function renderNoop() {}\n\n    function renderPath(styleData, itemData, isFirstFrame) {\n      var j;\n      var jLen;\n      var pathStringTransformed;\n      var redraw;\n      var pathNodes;\n      var l;\n      var lLen = itemData.styles.length;\n      var lvl = itemData.lvl;\n      var paths;\n      var mat;\n      var props;\n      var iterations;\n      var k;\n\n      for (l = 0; l < lLen; l += 1) {\n        redraw = itemData.sh._mdf || isFirstFrame;\n\n        if (itemData.styles[l].lvl < lvl) {\n          mat = _matrixHelper.reset();\n          iterations = lvl - itemData.styles[l].lvl;\n          k = itemData.transformers.length - 1;\n\n          while (!redraw && iterations > 0) {\n            redraw = itemData.transformers[k].mProps._mdf || redraw;\n            iterations -= 1;\n            k -= 1;\n          }\n\n          if (redraw) {\n            iterations = lvl - itemData.styles[l].lvl;\n            k = itemData.transformers.length - 1;\n\n            while (iterations > 0) {\n              props = itemData.transformers[k].mProps.v.props;\n              mat.transform(props[0], props[1], props[2], props[3], props[4], props[5], props[6], props[7], props[8], props[9], props[10], props[11], props[12], props[13], props[14], props[15]);\n              iterations -= 1;\n              k -= 1;\n            }\n          }\n        } else {\n          mat = _identityMatrix;\n        }\n\n        paths = itemData.sh.paths;\n        jLen = paths._length;\n\n        if (redraw) {\n          pathStringTransformed = '';\n\n          for (j = 0; j < jLen; j += 1) {\n            pathNodes = paths.shapes[j];\n\n            if (pathNodes && pathNodes._length) {\n              pathStringTransformed += buildShapeString(pathNodes, pathNodes._length, pathNodes.c, mat);\n            }\n          }\n\n          itemData.caches[l] = pathStringTransformed;\n        } else {\n          pathStringTransformed = itemData.caches[l];\n        }\n\n        itemData.styles[l].d += styleData.hd === true ? '' : pathStringTransformed;\n        itemData.styles[l]._mdf = redraw || itemData.styles[l]._mdf;\n      }\n    }\n\n    function renderFill(styleData, itemData, isFirstFrame) {\n      var styleElem = itemData.style;\n\n      if (itemData.c._mdf || isFirstFrame) {\n        styleElem.pElem.setAttribute('fill', 'rgb(' + bmFloor(itemData.c.v[0]) + ',' + bmFloor(itemData.c.v[1]) + ',' + bmFloor(itemData.c.v[2]) + ')');\n      }\n\n      if (itemData.o._mdf || isFirstFrame) {\n        styleElem.pElem.setAttribute('fill-opacity', itemData.o.v);\n      }\n    }\n\n    function renderGradientStroke(styleData, itemData, isFirstFrame) {\n      renderGradient(styleData, itemData, isFirstFrame);\n      renderStroke(styleData, itemData, isFirstFrame);\n    }\n\n    function renderGradient(styleData, itemData, isFirstFrame) {\n      var gfill = itemData.gf;\n      var hasOpacity = itemData.g._hasOpacity;\n      var pt1 = itemData.s.v;\n      var pt2 = itemData.e.v;\n\n      if (itemData.o._mdf || isFirstFrame) {\n        var attr = styleData.ty === 'gf' ? 'fill-opacity' : 'stroke-opacity';\n        itemData.style.pElem.setAttribute(attr, itemData.o.v);\n      }\n\n      if (itemData.s._mdf || isFirstFrame) {\n        var attr1 = styleData.t === 1 ? 'x1' : 'cx';\n        var attr2 = attr1 === 'x1' ? 'y1' : 'cy';\n        gfill.setAttribute(attr1, pt1[0]);\n        gfill.setAttribute(attr2, pt1[1]);\n\n        if (hasOpacity && !itemData.g._collapsable) {\n          itemData.of.setAttribute(attr1, pt1[0]);\n          itemData.of.setAttribute(attr2, pt1[1]);\n        }\n      }\n\n      var stops;\n      var i;\n      var len;\n      var stop;\n\n      if (itemData.g._cmdf || isFirstFrame) {\n        stops = itemData.cst;\n        var cValues = itemData.g.c;\n        len = stops.length;\n\n        for (i = 0; i < len; i += 1) {\n          stop = stops[i];\n          stop.setAttribute('offset', cValues[i * 4] + '%');\n          stop.setAttribute('stop-color', 'rgb(' + cValues[i * 4 + 1] + ',' + cValues[i * 4 + 2] + ',' + cValues[i * 4 + 3] + ')');\n        }\n      }\n\n      if (hasOpacity && (itemData.g._omdf || isFirstFrame)) {\n        var oValues = itemData.g.o;\n\n        if (itemData.g._collapsable) {\n          stops = itemData.cst;\n        } else {\n          stops = itemData.ost;\n        }\n\n        len = stops.length;\n\n        for (i = 0; i < len; i += 1) {\n          stop = stops[i];\n\n          if (!itemData.g._collapsable) {\n            stop.setAttribute('offset', oValues[i * 2] + '%');\n          }\n\n          stop.setAttribute('stop-opacity', oValues[i * 2 + 1]);\n        }\n      }\n\n      if (styleData.t === 1) {\n        if (itemData.e._mdf || isFirstFrame) {\n          gfill.setAttribute('x2', pt2[0]);\n          gfill.setAttribute('y2', pt2[1]);\n\n          if (hasOpacity && !itemData.g._collapsable) {\n            itemData.of.setAttribute('x2', pt2[0]);\n            itemData.of.setAttribute('y2', pt2[1]);\n          }\n        }\n      } else {\n        var rad;\n\n        if (itemData.s._mdf || itemData.e._mdf || isFirstFrame) {\n          rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\n          gfill.setAttribute('r', rad);\n\n          if (hasOpacity && !itemData.g._collapsable) {\n            itemData.of.setAttribute('r', rad);\n          }\n        }\n\n        if (itemData.e._mdf || itemData.h._mdf || itemData.a._mdf || isFirstFrame) {\n          if (!rad) {\n            rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\n          }\n\n          var ang = Math.atan2(pt2[1] - pt1[1], pt2[0] - pt1[0]);\n          var percent = itemData.h.v;\n\n          if (percent >= 1) {\n            percent = 0.99;\n          } else if (percent <= -1) {\n            percent = -0.99;\n          }\n\n          var dist = rad * percent;\n          var x = Math.cos(ang + itemData.a.v) * dist + pt1[0];\n          var y = Math.sin(ang + itemData.a.v) * dist + pt1[1];\n          gfill.setAttribute('fx', x);\n          gfill.setAttribute('fy', y);\n\n          if (hasOpacity && !itemData.g._collapsable) {\n            itemData.of.setAttribute('fx', x);\n            itemData.of.setAttribute('fy', y);\n          }\n        } // gfill.setAttribute('fy','200');\n\n      }\n    }\n\n    function renderStroke(styleData, itemData, isFirstFrame) {\n      var styleElem = itemData.style;\n      var d = itemData.d;\n\n      if (d && (d._mdf || isFirstFrame) && d.dashStr) {\n        styleElem.pElem.setAttribute('stroke-dasharray', d.dashStr);\n        styleElem.pElem.setAttribute('stroke-dashoffset', d.dashoffset[0]);\n      }\n\n      if (itemData.c && (itemData.c._mdf || isFirstFrame)) {\n        styleElem.pElem.setAttribute('stroke', 'rgb(' + bmFloor(itemData.c.v[0]) + ',' + bmFloor(itemData.c.v[1]) + ',' + bmFloor(itemData.c.v[2]) + ')');\n      }\n\n      if (itemData.o._mdf || isFirstFrame) {\n        styleElem.pElem.setAttribute('stroke-opacity', itemData.o.v);\n      }\n\n      if (itemData.w._mdf || isFirstFrame) {\n        styleElem.pElem.setAttribute('stroke-width', itemData.w.v);\n\n        if (styleElem.msElem) {\n          styleElem.msElem.setAttribute('stroke-width', itemData.w.v);\n        }\n      }\n    }\n\n    return ob;\n  }();\n\n  function SVGShapeElement(data, globalData, comp) {\n    // List of drawable elements\n    this.shapes = []; // Full shape data\n\n    this.shapesData = data.shapes; // List of styles that will be applied to shapes\n\n    this.stylesList = []; // List of modifiers that will be applied to shapes\n\n    this.shapeModifiers = []; // List of items in shape tree\n\n    this.itemsData = []; // List of items in previous shape tree\n\n    this.processedElements = []; // List of animated components\n\n    this.animatedContents = [];\n    this.initElement(data, globalData, comp); // Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\n    // List of elements that have been created\n\n    this.prevViewData = []; // Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\n  }\n\n  extendPrototype([BaseElement, TransformElement, SVGBaseElement, IShapeElement, HierarchyElement, FrameElement, RenderableDOMElement], SVGShapeElement);\n\n  SVGShapeElement.prototype.initSecondaryElement = function () {};\n\n  SVGShapeElement.prototype.identityMatrix = new Matrix();\n\n  SVGShapeElement.prototype.buildExpressionInterface = function () {};\n\n  SVGShapeElement.prototype.createContent = function () {\n    this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, this.layerElement, 0, [], true);\n    this.filterUniqueShapes();\n  };\n  /*\r\n  This method searches for multiple shapes that affect a single element and one of them is animated\r\n  */\n\n\n  SVGShapeElement.prototype.filterUniqueShapes = function () {\n    var i;\n    var len = this.shapes.length;\n    var shape;\n    var j;\n    var jLen = this.stylesList.length;\n    var style;\n    var tempShapes = [];\n    var areAnimated = false;\n\n    for (j = 0; j < jLen; j += 1) {\n      style = this.stylesList[j];\n      areAnimated = false;\n      tempShapes.length = 0;\n\n      for (i = 0; i < len; i += 1) {\n        shape = this.shapes[i];\n\n        if (shape.styles.indexOf(style) !== -1) {\n          tempShapes.push(shape);\n          areAnimated = shape._isAnimated || areAnimated;\n        }\n      }\n\n      if (tempShapes.length > 1 && areAnimated) {\n        this.setShapesAsAnimated(tempShapes);\n      }\n    }\n  };\n\n  SVGShapeElement.prototype.setShapesAsAnimated = function (shapes) {\n    var i;\n    var len = shapes.length;\n\n    for (i = 0; i < len; i += 1) {\n      shapes[i].setAsAnimated();\n    }\n  };\n\n  SVGShapeElement.prototype.createStyleElement = function (data, level) {\n    // TODO: prevent drawing of hidden styles\n    var elementData;\n    var styleOb = new SVGStyleData(data, level);\n    var pathElement = styleOb.pElem;\n\n    if (data.ty === 'st') {\n      elementData = new SVGStrokeStyleData(this, data, styleOb);\n    } else if (data.ty === 'fl') {\n      elementData = new SVGFillStyleData(this, data, styleOb);\n    } else if (data.ty === 'gf' || data.ty === 'gs') {\n      var GradientConstructor = data.ty === 'gf' ? SVGGradientFillStyleData : SVGGradientStrokeStyleData;\n      elementData = new GradientConstructor(this, data, styleOb);\n      this.globalData.defs.appendChild(elementData.gf);\n\n      if (elementData.maskId) {\n        this.globalData.defs.appendChild(elementData.ms);\n        this.globalData.defs.appendChild(elementData.of);\n        pathElement.setAttribute('mask', 'url(' + getLocationHref() + '#' + elementData.maskId + ')');\n      }\n    } else if (data.ty === 'no') {\n      elementData = new SVGNoStyleData(this, data, styleOb);\n    }\n\n    if (data.ty === 'st' || data.ty === 'gs') {\n      pathElement.setAttribute('stroke-linecap', lineCapEnum[data.lc || 2]);\n      pathElement.setAttribute('stroke-linejoin', lineJoinEnum[data.lj || 2]);\n      pathElement.setAttribute('fill-opacity', '0');\n\n      if (data.lj === 1) {\n        pathElement.setAttribute('stroke-miterlimit', data.ml);\n      }\n    }\n\n    if (data.r === 2) {\n      pathElement.setAttribute('fill-rule', 'evenodd');\n    }\n\n    if (data.ln) {\n      pathElement.setAttribute('id', data.ln);\n    }\n\n    if (data.cl) {\n      pathElement.setAttribute('class', data.cl);\n    }\n\n    if (data.bm) {\n      pathElement.style['mix-blend-mode'] = getBlendMode(data.bm);\n    }\n\n    this.stylesList.push(styleOb);\n    this.addToAnimatedContents(data, elementData);\n    return elementData;\n  };\n\n  SVGShapeElement.prototype.createGroupElement = function (data) {\n    var elementData = new ShapeGroupData();\n\n    if (data.ln) {\n      elementData.gr.setAttribute('id', data.ln);\n    }\n\n    if (data.cl) {\n      elementData.gr.setAttribute('class', data.cl);\n    }\n\n    if (data.bm) {\n      elementData.gr.style['mix-blend-mode'] = getBlendMode(data.bm);\n    }\n\n    return elementData;\n  };\n\n  SVGShapeElement.prototype.createTransformElement = function (data, container) {\n    var transformProperty = TransformPropertyFactory.getTransformProperty(this, data, this);\n    var elementData = new SVGTransformData(transformProperty, transformProperty.o, container);\n    this.addToAnimatedContents(data, elementData);\n    return elementData;\n  };\n\n  SVGShapeElement.prototype.createShapeElement = function (data, ownTransformers, level) {\n    var ty = 4;\n\n    if (data.ty === 'rc') {\n      ty = 5;\n    } else if (data.ty === 'el') {\n      ty = 6;\n    } else if (data.ty === 'sr') {\n      ty = 7;\n    }\n\n    var shapeProperty = ShapePropertyFactory.getShapeProp(this, data, ty, this);\n    var elementData = new SVGShapeData(ownTransformers, level, shapeProperty);\n    this.shapes.push(elementData);\n    this.addShapeToModifiers(elementData);\n    this.addToAnimatedContents(data, elementData);\n    return elementData;\n  };\n\n  SVGShapeElement.prototype.addToAnimatedContents = function (data, element) {\n    var i = 0;\n    var len = this.animatedContents.length;\n\n    while (i < len) {\n      if (this.animatedContents[i].element === element) {\n        return;\n      }\n\n      i += 1;\n    }\n\n    this.animatedContents.push({\n      fn: SVGElementsRenderer.createRenderFunction(data),\n      element: element,\n      data: data\n    });\n  };\n\n  SVGShapeElement.prototype.setElementStyles = function (elementData) {\n    var arr = elementData.styles;\n    var j;\n    var jLen = this.stylesList.length;\n\n    for (j = 0; j < jLen; j += 1) {\n      if (!this.stylesList[j].closed) {\n        arr.push(this.stylesList[j]);\n      }\n    }\n  };\n\n  SVGShapeElement.prototype.reloadShapes = function () {\n    this._isFirstFrame = true;\n    var i;\n    var len = this.itemsData.length;\n\n    for (i = 0; i < len; i += 1) {\n      this.prevViewData[i] = this.itemsData[i];\n    }\n\n    this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, this.layerElement, 0, [], true);\n    this.filterUniqueShapes();\n    len = this.dynamicProperties.length;\n\n    for (i = 0; i < len; i += 1) {\n      this.dynamicProperties[i].getValue();\n    }\n\n    this.renderModifiers();\n  };\n\n  SVGShapeElement.prototype.searchShapes = function (arr, itemsData, prevViewData, container, level, transformers, render) {\n    var ownTransformers = [].concat(transformers);\n    var i;\n    var len = arr.length - 1;\n    var j;\n    var jLen;\n    var ownStyles = [];\n    var ownModifiers = [];\n    var currentTransform;\n    var modifier;\n    var processedPos;\n\n    for (i = len; i >= 0; i -= 1) {\n      processedPos = this.searchProcessedElement(arr[i]);\n\n      if (!processedPos) {\n        arr[i]._render = render;\n      } else {\n        itemsData[i] = prevViewData[processedPos - 1];\n      }\n\n      if (arr[i].ty === 'fl' || arr[i].ty === 'st' || arr[i].ty === 'gf' || arr[i].ty === 'gs' || arr[i].ty === 'no') {\n        if (!processedPos) {\n          itemsData[i] = this.createStyleElement(arr[i], level);\n        } else {\n          itemsData[i].style.closed = false;\n        }\n\n        if (arr[i]._render) {\n          if (itemsData[i].style.pElem.parentNode !== container) {\n            container.appendChild(itemsData[i].style.pElem);\n          }\n        }\n\n        ownStyles.push(itemsData[i].style);\n      } else if (arr[i].ty === 'gr') {\n        if (!processedPos) {\n          itemsData[i] = this.createGroupElement(arr[i]);\n        } else {\n          jLen = itemsData[i].it.length;\n\n          for (j = 0; j < jLen; j += 1) {\n            itemsData[i].prevViewData[j] = itemsData[i].it[j];\n          }\n        }\n\n        this.searchShapes(arr[i].it, itemsData[i].it, itemsData[i].prevViewData, itemsData[i].gr, level + 1, ownTransformers, render);\n\n        if (arr[i]._render) {\n          if (itemsData[i].gr.parentNode !== container) {\n            container.appendChild(itemsData[i].gr);\n          }\n        }\n      } else if (arr[i].ty === 'tr') {\n        if (!processedPos) {\n          itemsData[i] = this.createTransformElement(arr[i], container);\n        }\n\n        currentTransform = itemsData[i].transform;\n        ownTransformers.push(currentTransform);\n      } else if (arr[i].ty === 'sh' || arr[i].ty === 'rc' || arr[i].ty === 'el' || arr[i].ty === 'sr') {\n        if (!processedPos) {\n          itemsData[i] = this.createShapeElement(arr[i], ownTransformers, level);\n        }\n\n        this.setElementStyles(itemsData[i]);\n      } else if (arr[i].ty === 'tm' || arr[i].ty === 'rd' || arr[i].ty === 'ms' || arr[i].ty === 'pb') {\n        if (!processedPos) {\n          modifier = ShapeModifiers.getModifier(arr[i].ty);\n          modifier.init(this, arr[i]);\n          itemsData[i] = modifier;\n          this.shapeModifiers.push(modifier);\n        } else {\n          modifier = itemsData[i];\n          modifier.closed = false;\n        }\n\n        ownModifiers.push(modifier);\n      } else if (arr[i].ty === 'rp') {\n        if (!processedPos) {\n          modifier = ShapeModifiers.getModifier(arr[i].ty);\n          itemsData[i] = modifier;\n          modifier.init(this, arr, i, itemsData);\n          this.shapeModifiers.push(modifier);\n          render = false;\n        } else {\n          modifier = itemsData[i];\n          modifier.closed = true;\n        }\n\n        ownModifiers.push(modifier);\n      }\n\n      this.addProcessedElement(arr[i], i + 1);\n    }\n\n    len = ownStyles.length;\n\n    for (i = 0; i < len; i += 1) {\n      ownStyles[i].closed = true;\n    }\n\n    len = ownModifiers.length;\n\n    for (i = 0; i < len; i += 1) {\n      ownModifiers[i].closed = true;\n    }\n  };\n\n  SVGShapeElement.prototype.renderInnerContent = function () {\n    this.renderModifiers();\n    var i;\n    var len = this.stylesList.length;\n\n    for (i = 0; i < len; i += 1) {\n      this.stylesList[i].reset();\n    }\n\n    this.renderShape();\n\n    for (i = 0; i < len; i += 1) {\n      if (this.stylesList[i]._mdf || this._isFirstFrame) {\n        if (this.stylesList[i].msElem) {\n          this.stylesList[i].msElem.setAttribute('d', this.stylesList[i].d); // Adding M0 0 fixes same mask bug on all browsers\n\n          this.stylesList[i].d = 'M0 0' + this.stylesList[i].d;\n        }\n\n        this.stylesList[i].pElem.setAttribute('d', this.stylesList[i].d || 'M0 0');\n      }\n    }\n  };\n\n  SVGShapeElement.prototype.renderShape = function () {\n    var i;\n    var len = this.animatedContents.length;\n    var animatedContent;\n\n    for (i = 0; i < len; i += 1) {\n      animatedContent = this.animatedContents[i];\n\n      if ((this._isFirstFrame || animatedContent.element._isAnimated) && animatedContent.data !== true) {\n        animatedContent.fn(animatedContent.data, animatedContent.element, this._isFirstFrame);\n      }\n    }\n  };\n\n  SVGShapeElement.prototype.destroy = function () {\n    this.destroyBaseElement();\n    this.shapesData = null;\n    this.itemsData = null;\n  };\n\n  function LetterProps(o, sw, sc, fc, m, p) {\n    this.o = o;\n    this.sw = sw;\n    this.sc = sc;\n    this.fc = fc;\n    this.m = m;\n    this.p = p;\n    this._mdf = {\n      o: true,\n      sw: !!sw,\n      sc: !!sc,\n      fc: !!fc,\n      m: true,\n      p: true\n    };\n  }\n\n  LetterProps.prototype.update = function (o, sw, sc, fc, m, p) {\n    this._mdf.o = false;\n    this._mdf.sw = false;\n    this._mdf.sc = false;\n    this._mdf.fc = false;\n    this._mdf.m = false;\n    this._mdf.p = false;\n    var updated = false;\n\n    if (this.o !== o) {\n      this.o = o;\n      this._mdf.o = true;\n      updated = true;\n    }\n\n    if (this.sw !== sw) {\n      this.sw = sw;\n      this._mdf.sw = true;\n      updated = true;\n    }\n\n    if (this.sc !== sc) {\n      this.sc = sc;\n      this._mdf.sc = true;\n      updated = true;\n    }\n\n    if (this.fc !== fc) {\n      this.fc = fc;\n      this._mdf.fc = true;\n      updated = true;\n    }\n\n    if (this.m !== m) {\n      this.m = m;\n      this._mdf.m = true;\n      updated = true;\n    }\n\n    if (p.length && (this.p[0] !== p[0] || this.p[1] !== p[1] || this.p[4] !== p[4] || this.p[5] !== p[5] || this.p[12] !== p[12] || this.p[13] !== p[13])) {\n      this.p = p;\n      this._mdf.p = true;\n      updated = true;\n    }\n\n    return updated;\n  };\n\n  function TextProperty(elem, data) {\n    this._frameId = initialDefaultFrame;\n    this.pv = '';\n    this.v = '';\n    this.kf = false;\n    this._isFirstFrame = true;\n    this._mdf = false;\n    this.data = data;\n    this.elem = elem;\n    this.comp = this.elem.comp;\n    this.keysIndex = 0;\n    this.canResize = false;\n    this.minimumFontSize = 1;\n    this.effectsSequence = [];\n    this.currentData = {\n      ascent: 0,\n      boxWidth: this.defaultBoxWidth,\n      f: '',\n      fStyle: '',\n      fWeight: '',\n      fc: '',\n      j: '',\n      justifyOffset: '',\n      l: [],\n      lh: 0,\n      lineWidths: [],\n      ls: '',\n      of: '',\n      s: '',\n      sc: '',\n      sw: 0,\n      t: 0,\n      tr: 0,\n      sz: 0,\n      ps: null,\n      fillColorAnim: false,\n      strokeColorAnim: false,\n      strokeWidthAnim: false,\n      yOffset: 0,\n      finalSize: 0,\n      finalText: [],\n      finalLineHeight: 0,\n      __complete: false\n    };\n    this.copyData(this.currentData, this.data.d.k[0].s);\n\n    if (!this.searchProperty()) {\n      this.completeTextData(this.currentData);\n    }\n  }\n\n  TextProperty.prototype.defaultBoxWidth = [0, 0];\n\n  TextProperty.prototype.copyData = function (obj, data) {\n    for (var s in data) {\n      if (Object.prototype.hasOwnProperty.call(data, s)) {\n        obj[s] = data[s];\n      }\n    }\n\n    return obj;\n  };\n\n  TextProperty.prototype.setCurrentData = function (data) {\n    if (!data.__complete) {\n      this.completeTextData(data);\n    }\n\n    this.currentData = data;\n    this.currentData.boxWidth = this.currentData.boxWidth || this.defaultBoxWidth;\n    this._mdf = true;\n  };\n\n  TextProperty.prototype.searchProperty = function () {\n    return this.searchKeyframes();\n  };\n\n  TextProperty.prototype.searchKeyframes = function () {\n    this.kf = this.data.d.k.length > 1;\n\n    if (this.kf) {\n      this.addEffect(this.getKeyframeValue.bind(this));\n    }\n\n    return this.kf;\n  };\n\n  TextProperty.prototype.addEffect = function (effectFunction) {\n    this.effectsSequence.push(effectFunction);\n    this.elem.addDynamicProperty(this);\n  };\n\n  TextProperty.prototype.getValue = function (_finalValue) {\n    if ((this.elem.globalData.frameId === this.frameId || !this.effectsSequence.length) && !_finalValue) {\n      return;\n    }\n\n    this.currentData.t = this.data.d.k[this.keysIndex].s.t;\n    var currentValue = this.currentData;\n    var currentIndex = this.keysIndex;\n\n    if (this.lock) {\n      this.setCurrentData(this.currentData);\n      return;\n    }\n\n    this.lock = true;\n    this._mdf = false;\n    var i;\n    var len = this.effectsSequence.length;\n    var finalValue = _finalValue || this.data.d.k[this.keysIndex].s;\n\n    for (i = 0; i < len; i += 1) {\n      // Checking if index changed to prevent creating a new object every time the expression updates.\n      if (currentIndex !== this.keysIndex) {\n        finalValue = this.effectsSequence[i](finalValue, finalValue.t);\n      } else {\n        finalValue = this.effectsSequence[i](this.currentData, finalValue.t);\n      }\n    }\n\n    if (currentValue !== finalValue) {\n      this.setCurrentData(finalValue);\n    }\n\n    this.v = this.currentData;\n    this.pv = this.v;\n    this.lock = false;\n    this.frameId = this.elem.globalData.frameId;\n  };\n\n  TextProperty.prototype.getKeyframeValue = function () {\n    var textKeys = this.data.d.k;\n    var frameNum = this.elem.comp.renderedFrame;\n    var i = 0;\n    var len = textKeys.length;\n\n    while (i <= len - 1) {\n      if (i === len - 1 || textKeys[i + 1].t > frameNum) {\n        break;\n      }\n\n      i += 1;\n    }\n\n    if (this.keysIndex !== i) {\n      this.keysIndex = i;\n    }\n\n    return this.data.d.k[this.keysIndex].s;\n  };\n\n  TextProperty.prototype.buildFinalText = function (text) {\n    var charactersArray = [];\n    var i = 0;\n    var len = text.length;\n    var charCode;\n    var secondCharCode;\n    var shouldCombine = false;\n\n    while (i < len) {\n      charCode = text.charCodeAt(i);\n\n      if (FontManager.isCombinedCharacter(charCode)) {\n        charactersArray[charactersArray.length - 1] += text.charAt(i);\n      } else if (charCode >= 0xD800 && charCode <= 0xDBFF) {\n        secondCharCode = text.charCodeAt(i + 1);\n\n        if (secondCharCode >= 0xDC00 && secondCharCode <= 0xDFFF) {\n          if (shouldCombine || FontManager.isModifier(charCode, secondCharCode)) {\n            charactersArray[charactersArray.length - 1] += text.substr(i, 2);\n            shouldCombine = false;\n          } else {\n            charactersArray.push(text.substr(i, 2));\n          }\n\n          i += 1;\n        } else {\n          charactersArray.push(text.charAt(i));\n        }\n      } else if (charCode > 0xDBFF) {\n        secondCharCode = text.charCodeAt(i + 1);\n\n        if (FontManager.isZeroWidthJoiner(charCode, secondCharCode)) {\n          shouldCombine = true;\n          charactersArray[charactersArray.length - 1] += text.substr(i, 2);\n          i += 1;\n        } else {\n          charactersArray.push(text.charAt(i));\n        }\n      } else if (FontManager.isZeroWidthJoiner(charCode)) {\n        charactersArray[charactersArray.length - 1] += text.charAt(i);\n        shouldCombine = true;\n      } else {\n        charactersArray.push(text.charAt(i));\n      }\n\n      i += 1;\n    }\n\n    return charactersArray;\n  };\n\n  TextProperty.prototype.completeTextData = function (documentData) {\n    documentData.__complete = true;\n    var fontManager = this.elem.globalData.fontManager;\n    var data = this.data;\n    var letters = [];\n    var i;\n    var len;\n    var newLineFlag;\n    var index = 0;\n    var val;\n    var anchorGrouping = data.m.g;\n    var currentSize = 0;\n    var currentPos = 0;\n    var currentLine = 0;\n    var lineWidths = [];\n    var lineWidth = 0;\n    var maxLineWidth = 0;\n    var j;\n    var jLen;\n    var fontData = fontManager.getFontByName(documentData.f);\n    var charData;\n    var cLength = 0;\n    var fontProps = getFontProperties(fontData);\n    documentData.fWeight = fontProps.weight;\n    documentData.fStyle = fontProps.style;\n    documentData.finalSize = documentData.s;\n    documentData.finalText = this.buildFinalText(documentData.t);\n    len = documentData.finalText.length;\n    documentData.finalLineHeight = documentData.lh;\n    var trackingOffset = documentData.tr / 1000 * documentData.finalSize;\n    var charCode;\n\n    if (documentData.sz) {\n      var flag = true;\n      var boxWidth = documentData.sz[0];\n      var boxHeight = documentData.sz[1];\n      var currentHeight;\n      var finalText;\n\n      while (flag) {\n        finalText = this.buildFinalText(documentData.t);\n        currentHeight = 0;\n        lineWidth = 0;\n        len = finalText.length;\n        trackingOffset = documentData.tr / 1000 * documentData.finalSize;\n        var lastSpaceIndex = -1;\n\n        for (i = 0; i < len; i += 1) {\n          charCode = finalText[i].charCodeAt(0);\n          newLineFlag = false;\n\n          if (finalText[i] === ' ') {\n            lastSpaceIndex = i;\n          } else if (charCode === 13 || charCode === 3) {\n            lineWidth = 0;\n            newLineFlag = true;\n            currentHeight += documentData.finalLineHeight || documentData.finalSize * 1.2;\n          }\n\n          if (fontManager.chars) {\n            charData = fontManager.getCharData(finalText[i], fontData.fStyle, fontData.fFamily);\n            cLength = newLineFlag ? 0 : charData.w * documentData.finalSize / 100;\n          } else {\n            // tCanvasHelper.font = documentData.s + 'px '+ fontData.fFamily;\n            cLength = fontManager.measureText(finalText[i], documentData.f, documentData.finalSize);\n          }\n\n          if (lineWidth + cLength > boxWidth && finalText[i] !== ' ') {\n            if (lastSpaceIndex === -1) {\n              len += 1;\n            } else {\n              i = lastSpaceIndex;\n            }\n\n            currentHeight += documentData.finalLineHeight || documentData.finalSize * 1.2;\n            finalText.splice(i, lastSpaceIndex === i ? 1 : 0, '\\r'); // finalText = finalText.substr(0,i) + \"\\r\" + finalText.substr(i === lastSpaceIndex ? i + 1 : i);\n\n            lastSpaceIndex = -1;\n            lineWidth = 0;\n          } else {\n            lineWidth += cLength;\n            lineWidth += trackingOffset;\n          }\n        }\n\n        currentHeight += fontData.ascent * documentData.finalSize / 100;\n\n        if (this.canResize && documentData.finalSize > this.minimumFontSize && boxHeight < currentHeight) {\n          documentData.finalSize -= 1;\n          documentData.finalLineHeight = documentData.finalSize * documentData.lh / documentData.s;\n        } else {\n          documentData.finalText = finalText;\n          len = documentData.finalText.length;\n          flag = false;\n        }\n      }\n    }\n\n    lineWidth = -trackingOffset;\n    cLength = 0;\n    var uncollapsedSpaces = 0;\n    var currentChar;\n\n    for (i = 0; i < len; i += 1) {\n      newLineFlag = false;\n      currentChar = documentData.finalText[i];\n      charCode = currentChar.charCodeAt(0);\n\n      if (charCode === 13 || charCode === 3) {\n        uncollapsedSpaces = 0;\n        lineWidths.push(lineWidth);\n        maxLineWidth = lineWidth > maxLineWidth ? lineWidth : maxLineWidth;\n        lineWidth = -2 * trackingOffset;\n        val = '';\n        newLineFlag = true;\n        currentLine += 1;\n      } else {\n        val = currentChar;\n      }\n\n      if (fontManager.chars) {\n        charData = fontManager.getCharData(currentChar, fontData.fStyle, fontManager.getFontByName(documentData.f).fFamily);\n        cLength = newLineFlag ? 0 : charData.w * documentData.finalSize / 100;\n      } else {\n        // var charWidth = fontManager.measureText(val, documentData.f, documentData.finalSize);\n        // tCanvasHelper.font = documentData.finalSize + 'px '+ fontManager.getFontByName(documentData.f).fFamily;\n        cLength = fontManager.measureText(val, documentData.f, documentData.finalSize);\n      } //\n\n\n      if (currentChar === ' ') {\n        uncollapsedSpaces += cLength + trackingOffset;\n      } else {\n        lineWidth += cLength + trackingOffset + uncollapsedSpaces;\n        uncollapsedSpaces = 0;\n      }\n\n      letters.push({\n        l: cLength,\n        an: cLength,\n        add: currentSize,\n        n: newLineFlag,\n        anIndexes: [],\n        val: val,\n        line: currentLine,\n        animatorJustifyOffset: 0\n      });\n\n      if (anchorGrouping == 2) {\n        // eslint-disable-line eqeqeq\n        currentSize += cLength;\n\n        if (val === '' || val === ' ' || i === len - 1) {\n          if (val === '' || val === ' ') {\n            currentSize -= cLength;\n          }\n\n          while (currentPos <= i) {\n            letters[currentPos].an = currentSize;\n            letters[currentPos].ind = index;\n            letters[currentPos].extra = cLength;\n            currentPos += 1;\n          }\n\n          index += 1;\n          currentSize = 0;\n        }\n      } else if (anchorGrouping == 3) {\n        // eslint-disable-line eqeqeq\n        currentSize += cLength;\n\n        if (val === '' || i === len - 1) {\n          if (val === '') {\n            currentSize -= cLength;\n          }\n\n          while (currentPos <= i) {\n            letters[currentPos].an = currentSize;\n            letters[currentPos].ind = index;\n            letters[currentPos].extra = cLength;\n            currentPos += 1;\n          }\n\n          currentSize = 0;\n          index += 1;\n        }\n      } else {\n        letters[index].ind = index;\n        letters[index].extra = 0;\n        index += 1;\n      }\n    }\n\n    documentData.l = letters;\n    maxLineWidth = lineWidth > maxLineWidth ? lineWidth : maxLineWidth;\n    lineWidths.push(lineWidth);\n\n    if (documentData.sz) {\n      documentData.boxWidth = documentData.sz[0];\n      documentData.justifyOffset = 0;\n    } else {\n      documentData.boxWidth = maxLineWidth;\n\n      switch (documentData.j) {\n        case 1:\n          documentData.justifyOffset = -documentData.boxWidth;\n          break;\n\n        case 2:\n          documentData.justifyOffset = -documentData.boxWidth / 2;\n          break;\n\n        default:\n          documentData.justifyOffset = 0;\n      }\n    }\n\n    documentData.lineWidths = lineWidths;\n    var animators = data.a;\n    var animatorData;\n    var letterData;\n    jLen = animators.length;\n    var based;\n    var ind;\n    var indexes = [];\n\n    for (j = 0; j < jLen; j += 1) {\n      animatorData = animators[j];\n\n      if (animatorData.a.sc) {\n        documentData.strokeColorAnim = true;\n      }\n\n      if (animatorData.a.sw) {\n        documentData.strokeWidthAnim = true;\n      }\n\n      if (animatorData.a.fc || animatorData.a.fh || animatorData.a.fs || animatorData.a.fb) {\n        documentData.fillColorAnim = true;\n      }\n\n      ind = 0;\n      based = animatorData.s.b;\n\n      for (i = 0; i < len; i += 1) {\n        letterData = letters[i];\n        letterData.anIndexes[j] = ind;\n\n        if (based == 1 && letterData.val !== '' || based == 2 && letterData.val !== '' && letterData.val !== ' ' || based == 3 && (letterData.n || letterData.val == ' ' || i == len - 1) || based == 4 && (letterData.n || i == len - 1)) {\n          // eslint-disable-line eqeqeq\n          if (animatorData.s.rn === 1) {\n            indexes.push(ind);\n          }\n\n          ind += 1;\n        }\n      }\n\n      data.a[j].s.totalChars = ind;\n      var currentInd = -1;\n      var newInd;\n\n      if (animatorData.s.rn === 1) {\n        for (i = 0; i < len; i += 1) {\n          letterData = letters[i];\n\n          if (currentInd != letterData.anIndexes[j]) {\n            // eslint-disable-line eqeqeq\n            currentInd = letterData.anIndexes[j];\n            newInd = indexes.splice(Math.floor(Math.random() * indexes.length), 1)[0];\n          }\n\n          letterData.anIndexes[j] = newInd;\n        }\n      }\n    }\n\n    documentData.yOffset = documentData.finalLineHeight || documentData.finalSize * 1.2;\n    documentData.ls = documentData.ls || 0;\n    documentData.ascent = fontData.ascent * documentData.finalSize / 100;\n  };\n\n  TextProperty.prototype.updateDocumentData = function (newData, index) {\n    index = index === undefined ? this.keysIndex : index;\n    var dData = this.copyData({}, this.data.d.k[index].s);\n    dData = this.copyData(dData, newData);\n    this.data.d.k[index].s = dData;\n    this.recalculate(index);\n    this.elem.addDynamicProperty(this);\n  };\n\n  TextProperty.prototype.recalculate = function (index) {\n    var dData = this.data.d.k[index].s;\n    dData.__complete = false;\n    this.keysIndex = 0;\n    this._isFirstFrame = true;\n    this.getValue(dData);\n  };\n\n  TextProperty.prototype.canResizeFont = function (_canResize) {\n    this.canResize = _canResize;\n    this.recalculate(this.keysIndex);\n    this.elem.addDynamicProperty(this);\n  };\n\n  TextProperty.prototype.setMinimumFontSize = function (_fontValue) {\n    this.minimumFontSize = Math.floor(_fontValue) || 1;\n    this.recalculate(this.keysIndex);\n    this.elem.addDynamicProperty(this);\n  };\n\n  var TextSelectorProp = function () {\n    var max = Math.max;\n    var min = Math.min;\n    var floor = Math.floor;\n\n    function TextSelectorPropFactory(elem, data) {\n      this._currentTextLength = -1;\n      this.k = false;\n      this.data = data;\n      this.elem = elem;\n      this.comp = elem.comp;\n      this.finalS = 0;\n      this.finalE = 0;\n      this.initDynamicPropertyContainer(elem);\n      this.s = PropertyFactory.getProp(elem, data.s || {\n        k: 0\n      }, 0, 0, this);\n\n      if ('e' in data) {\n        this.e = PropertyFactory.getProp(elem, data.e, 0, 0, this);\n      } else {\n        this.e = {\n          v: 100\n        };\n      }\n\n      this.o = PropertyFactory.getProp(elem, data.o || {\n        k: 0\n      }, 0, 0, this);\n      this.xe = PropertyFactory.getProp(elem, data.xe || {\n        k: 0\n      }, 0, 0, this);\n      this.ne = PropertyFactory.getProp(elem, data.ne || {\n        k: 0\n      }, 0, 0, this);\n      this.sm = PropertyFactory.getProp(elem, data.sm || {\n        k: 100\n      }, 0, 0, this);\n      this.a = PropertyFactory.getProp(elem, data.a, 0, 0.01, this);\n\n      if (!this.dynamicProperties.length) {\n        this.getValue();\n      }\n    }\n\n    TextSelectorPropFactory.prototype = {\n      getMult: function getMult(ind) {\n        if (this._currentTextLength !== this.elem.textProperty.currentData.l.length) {\n          this.getValue();\n        }\n\n        var x1 = 0;\n        var y1 = 0;\n        var x2 = 1;\n        var y2 = 1;\n\n        if (this.ne.v > 0) {\n          x1 = this.ne.v / 100.0;\n        } else {\n          y1 = -this.ne.v / 100.0;\n        }\n\n        if (this.xe.v > 0) {\n          x2 = 1.0 - this.xe.v / 100.0;\n        } else {\n          y2 = 1.0 + this.xe.v / 100.0;\n        }\n\n        var easer = BezierFactory.getBezierEasing(x1, y1, x2, y2).get;\n        var mult = 0;\n        var s = this.finalS;\n        var e = this.finalE;\n        var type = this.data.sh;\n\n        if (type === 2) {\n          if (e === s) {\n            mult = ind >= e ? 1 : 0;\n          } else {\n            mult = max(0, min(0.5 / (e - s) + (ind - s) / (e - s), 1));\n          }\n\n          mult = easer(mult);\n        } else if (type === 3) {\n          if (e === s) {\n            mult = ind >= e ? 0 : 1;\n          } else {\n            mult = 1 - max(0, min(0.5 / (e - s) + (ind - s) / (e - s), 1));\n          }\n\n          mult = easer(mult);\n        } else if (type === 4) {\n          if (e === s) {\n            mult = 0;\n          } else {\n            mult = max(0, min(0.5 / (e - s) + (ind - s) / (e - s), 1));\n\n            if (mult < 0.5) {\n              mult *= 2;\n            } else {\n              mult = 1 - 2 * (mult - 0.5);\n            }\n          }\n\n          mult = easer(mult);\n        } else if (type === 5) {\n          if (e === s) {\n            mult = 0;\n          } else {\n            var tot = e - s;\n            /* ind += 0.5;\r\n                      mult = -4/(tot*tot)*(ind*ind)+(4/tot)*ind; */\n\n            ind = min(max(0, ind + 0.5 - s), e - s);\n            var x = -tot / 2 + ind;\n            var a = tot / 2;\n            mult = Math.sqrt(1 - x * x / (a * a));\n          }\n\n          mult = easer(mult);\n        } else if (type === 6) {\n          if (e === s) {\n            mult = 0;\n          } else {\n            ind = min(max(0, ind + 0.5 - s), e - s);\n            mult = (1 + Math.cos(Math.PI + Math.PI * 2 * ind / (e - s))) / 2; // eslint-disable-line\n          }\n\n          mult = easer(mult);\n        } else {\n          if (ind >= floor(s)) {\n            if (ind - s < 0) {\n              mult = max(0, min(min(e, 1) - (s - ind), 1));\n            } else {\n              mult = max(0, min(e - ind, 1));\n            }\n          }\n\n          mult = easer(mult);\n        } // Smoothness implementation.\n        // The smoothness represents a reduced range of the original [0; 1] range.\n        // if smoothness is 25%, the new range will be [0.375; 0.625]\n        // Steps are:\n        // - find the lower value of the new range (threshold)\n        // - if multiplier is smaller than that value, floor it to 0\n        // - if it is larger,\n        //     - subtract the threshold\n        //     - divide it by the smoothness (this will return the range to [0; 1])\n        // Note: If it doesn't work on some scenarios, consider applying it before the easer.\n\n\n        if (this.sm.v !== 100) {\n          var smoothness = this.sm.v * 0.01;\n\n          if (smoothness === 0) {\n            smoothness = 0.00000001;\n          }\n\n          var threshold = 0.5 - smoothness * 0.5;\n\n          if (mult < threshold) {\n            mult = 0;\n          } else {\n            mult = (mult - threshold) / smoothness;\n\n            if (mult > 1) {\n              mult = 1;\n            }\n          }\n        }\n\n        return mult * this.a.v;\n      },\n      getValue: function getValue(newCharsFlag) {\n        this.iterateDynamicProperties();\n        this._mdf = newCharsFlag || this._mdf;\n        this._currentTextLength = this.elem.textProperty.currentData.l.length || 0;\n\n        if (newCharsFlag && this.data.r === 2) {\n          this.e.v = this._currentTextLength;\n        }\n\n        var divisor = this.data.r === 2 ? 1 : 100 / this.data.totalChars;\n        var o = this.o.v / divisor;\n        var s = this.s.v / divisor + o;\n        var e = this.e.v / divisor + o;\n\n        if (s > e) {\n          var _s = s;\n          s = e;\n          e = _s;\n        }\n\n        this.finalS = s;\n        this.finalE = e;\n      }\n    };\n    extendPrototype([DynamicPropertyContainer], TextSelectorPropFactory);\n\n    function getTextSelectorProp(elem, data, arr) {\n      return new TextSelectorPropFactory(elem, data, arr);\n    }\n\n    return {\n      getTextSelectorProp: getTextSelectorProp\n    };\n  }();\n\n  function TextAnimatorDataProperty(elem, animatorProps, container) {\n    var defaultData = {\n      propType: false\n    };\n    var getProp = PropertyFactory.getProp;\n    var textAnimatorAnimatables = animatorProps.a;\n    this.a = {\n      r: textAnimatorAnimatables.r ? getProp(elem, textAnimatorAnimatables.r, 0, degToRads, container) : defaultData,\n      rx: textAnimatorAnimatables.rx ? getProp(elem, textAnimatorAnimatables.rx, 0, degToRads, container) : defaultData,\n      ry: textAnimatorAnimatables.ry ? getProp(elem, textAnimatorAnimatables.ry, 0, degToRads, container) : defaultData,\n      sk: textAnimatorAnimatables.sk ? getProp(elem, textAnimatorAnimatables.sk, 0, degToRads, container) : defaultData,\n      sa: textAnimatorAnimatables.sa ? getProp(elem, textAnimatorAnimatables.sa, 0, degToRads, container) : defaultData,\n      s: textAnimatorAnimatables.s ? getProp(elem, textAnimatorAnimatables.s, 1, 0.01, container) : defaultData,\n      a: textAnimatorAnimatables.a ? getProp(elem, textAnimatorAnimatables.a, 1, 0, container) : defaultData,\n      o: textAnimatorAnimatables.o ? getProp(elem, textAnimatorAnimatables.o, 0, 0.01, container) : defaultData,\n      p: textAnimatorAnimatables.p ? getProp(elem, textAnimatorAnimatables.p, 1, 0, container) : defaultData,\n      sw: textAnimatorAnimatables.sw ? getProp(elem, textAnimatorAnimatables.sw, 0, 0, container) : defaultData,\n      sc: textAnimatorAnimatables.sc ? getProp(elem, textAnimatorAnimatables.sc, 1, 0, container) : defaultData,\n      fc: textAnimatorAnimatables.fc ? getProp(elem, textAnimatorAnimatables.fc, 1, 0, container) : defaultData,\n      fh: textAnimatorAnimatables.fh ? getProp(elem, textAnimatorAnimatables.fh, 0, 0, container) : defaultData,\n      fs: textAnimatorAnimatables.fs ? getProp(elem, textAnimatorAnimatables.fs, 0, 0.01, container) : defaultData,\n      fb: textAnimatorAnimatables.fb ? getProp(elem, textAnimatorAnimatables.fb, 0, 0.01, container) : defaultData,\n      t: textAnimatorAnimatables.t ? getProp(elem, textAnimatorAnimatables.t, 0, 0, container) : defaultData\n    };\n    this.s = TextSelectorProp.getTextSelectorProp(elem, animatorProps.s, container);\n    this.s.t = animatorProps.s.t;\n  }\n\n  function TextAnimatorProperty(textData, renderType, elem) {\n    this._isFirstFrame = true;\n    this._hasMaskedPath = false;\n    this._frameId = -1;\n    this._textData = textData;\n    this._renderType = renderType;\n    this._elem = elem;\n    this._animatorsData = createSizedArray(this._textData.a.length);\n    this._pathData = {};\n    this._moreOptions = {\n      alignment: {}\n    };\n    this.renderedLetters = [];\n    this.lettersChangedFlag = false;\n    this.initDynamicPropertyContainer(elem);\n  }\n\n  TextAnimatorProperty.prototype.searchProperties = function () {\n    var i;\n    var len = this._textData.a.length;\n    var animatorProps;\n    var getProp = PropertyFactory.getProp;\n\n    for (i = 0; i < len; i += 1) {\n      animatorProps = this._textData.a[i];\n      this._animatorsData[i] = new TextAnimatorDataProperty(this._elem, animatorProps, this);\n    }\n\n    if (this._textData.p && 'm' in this._textData.p) {\n      this._pathData = {\n        a: getProp(this._elem, this._textData.p.a, 0, 0, this),\n        f: getProp(this._elem, this._textData.p.f, 0, 0, this),\n        l: getProp(this._elem, this._textData.p.l, 0, 0, this),\n        r: getProp(this._elem, this._textData.p.r, 0, 0, this),\n        p: getProp(this._elem, this._textData.p.p, 0, 0, this),\n        m: this._elem.maskManager.getMaskProperty(this._textData.p.m)\n      };\n      this._hasMaskedPath = true;\n    } else {\n      this._hasMaskedPath = false;\n    }\n\n    this._moreOptions.alignment = getProp(this._elem, this._textData.m.a, 1, 0, this);\n  };\n\n  TextAnimatorProperty.prototype.getMeasures = function (documentData, lettersChangedFlag) {\n    this.lettersChangedFlag = lettersChangedFlag;\n\n    if (!this._mdf && !this._isFirstFrame && !lettersChangedFlag && (!this._hasMaskedPath || !this._pathData.m._mdf)) {\n      return;\n    }\n\n    this._isFirstFrame = false;\n    var alignment = this._moreOptions.alignment.v;\n    var animators = this._animatorsData;\n    var textData = this._textData;\n    var matrixHelper = this.mHelper;\n    var renderType = this._renderType;\n    var renderedLettersCount = this.renderedLetters.length;\n    var xPos;\n    var yPos;\n    var i;\n    var len;\n    var letters = documentData.l;\n    var pathInfo;\n    var currentLength;\n    var currentPoint;\n    var segmentLength;\n    var flag;\n    var pointInd;\n    var segmentInd;\n    var prevPoint;\n    var points;\n    var segments;\n    var partialLength;\n    var totalLength;\n    var perc;\n    var tanAngle;\n    var mask;\n\n    if (this._hasMaskedPath) {\n      mask = this._pathData.m;\n\n      if (!this._pathData.n || this._pathData._mdf) {\n        var paths = mask.v;\n\n        if (this._pathData.r.v) {\n          paths = paths.reverse();\n        } // TODO: release bezier data cached from previous pathInfo: this._pathData.pi\n\n\n        pathInfo = {\n          tLength: 0,\n          segments: []\n        };\n        len = paths._length - 1;\n        var bezierData;\n        totalLength = 0;\n\n        for (i = 0; i < len; i += 1) {\n          bezierData = bez.buildBezierData(paths.v[i], paths.v[i + 1], [paths.o[i][0] - paths.v[i][0], paths.o[i][1] - paths.v[i][1]], [paths.i[i + 1][0] - paths.v[i + 1][0], paths.i[i + 1][1] - paths.v[i + 1][1]]);\n          pathInfo.tLength += bezierData.segmentLength;\n          pathInfo.segments.push(bezierData);\n          totalLength += bezierData.segmentLength;\n        }\n\n        i = len;\n\n        if (mask.v.c) {\n          bezierData = bez.buildBezierData(paths.v[i], paths.v[0], [paths.o[i][0] - paths.v[i][0], paths.o[i][1] - paths.v[i][1]], [paths.i[0][0] - paths.v[0][0], paths.i[0][1] - paths.v[0][1]]);\n          pathInfo.tLength += bezierData.segmentLength;\n          pathInfo.segments.push(bezierData);\n          totalLength += bezierData.segmentLength;\n        }\n\n        this._pathData.pi = pathInfo;\n      }\n\n      pathInfo = this._pathData.pi;\n      currentLength = this._pathData.f.v;\n      segmentInd = 0;\n      pointInd = 1;\n      segmentLength = 0;\n      flag = true;\n      segments = pathInfo.segments;\n\n      if (currentLength < 0 && mask.v.c) {\n        if (pathInfo.tLength < Math.abs(currentLength)) {\n          currentLength = -Math.abs(currentLength) % pathInfo.tLength;\n        }\n\n        segmentInd = segments.length - 1;\n        points = segments[segmentInd].points;\n        pointInd = points.length - 1;\n\n        while (currentLength < 0) {\n          currentLength += points[pointInd].partialLength;\n          pointInd -= 1;\n\n          if (pointInd < 0) {\n            segmentInd -= 1;\n            points = segments[segmentInd].points;\n            pointInd = points.length - 1;\n          }\n        }\n      }\n\n      points = segments[segmentInd].points;\n      prevPoint = points[pointInd - 1];\n      currentPoint = points[pointInd];\n      partialLength = currentPoint.partialLength;\n    }\n\n    len = letters.length;\n    xPos = 0;\n    yPos = 0;\n    var yOff = documentData.finalSize * 1.2 * 0.714;\n    var firstLine = true;\n    var animatorProps;\n    var animatorSelector;\n    var j;\n    var jLen;\n    var letterValue;\n    jLen = animators.length;\n    var mult;\n    var ind = -1;\n    var offf;\n    var xPathPos;\n    var yPathPos;\n    var initPathPos = currentLength;\n    var initSegmentInd = segmentInd;\n    var initPointInd = pointInd;\n    var currentLine = -1;\n    var elemOpacity;\n    var sc;\n    var sw;\n    var fc;\n    var k;\n    var letterSw;\n    var letterSc;\n    var letterFc;\n    var letterM = '';\n    var letterP = this.defaultPropsArray;\n    var letterO; //\n\n    if (documentData.j === 2 || documentData.j === 1) {\n      var animatorJustifyOffset = 0;\n      var animatorFirstCharOffset = 0;\n      var justifyOffsetMult = documentData.j === 2 ? -0.5 : -1;\n      var lastIndex = 0;\n      var isNewLine = true;\n\n      for (i = 0; i < len; i += 1) {\n        if (letters[i].n) {\n          if (animatorJustifyOffset) {\n            animatorJustifyOffset += animatorFirstCharOffset;\n          }\n\n          while (lastIndex < i) {\n            letters[lastIndex].animatorJustifyOffset = animatorJustifyOffset;\n            lastIndex += 1;\n          }\n\n          animatorJustifyOffset = 0;\n          isNewLine = true;\n        } else {\n          for (j = 0; j < jLen; j += 1) {\n            animatorProps = animators[j].a;\n\n            if (animatorProps.t.propType) {\n              if (isNewLine && documentData.j === 2) {\n                animatorFirstCharOffset += animatorProps.t.v * justifyOffsetMult;\n              }\n\n              animatorSelector = animators[j].s;\n              mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\n\n              if (mult.length) {\n                animatorJustifyOffset += animatorProps.t.v * mult[0] * justifyOffsetMult;\n              } else {\n                animatorJustifyOffset += animatorProps.t.v * mult * justifyOffsetMult;\n              }\n            }\n          }\n\n          isNewLine = false;\n        }\n      }\n\n      if (animatorJustifyOffset) {\n        animatorJustifyOffset += animatorFirstCharOffset;\n      }\n\n      while (lastIndex < i) {\n        letters[lastIndex].animatorJustifyOffset = animatorJustifyOffset;\n        lastIndex += 1;\n      }\n    } //\n\n\n    for (i = 0; i < len; i += 1) {\n      matrixHelper.reset();\n      elemOpacity = 1;\n\n      if (letters[i].n) {\n        xPos = 0;\n        yPos += documentData.yOffset;\n        yPos += firstLine ? 1 : 0;\n        currentLength = initPathPos;\n        firstLine = false;\n\n        if (this._hasMaskedPath) {\n          segmentInd = initSegmentInd;\n          pointInd = initPointInd;\n          points = segments[segmentInd].points;\n          prevPoint = points[pointInd - 1];\n          currentPoint = points[pointInd];\n          partialLength = currentPoint.partialLength;\n          segmentLength = 0;\n        }\n\n        letterM = '';\n        letterFc = '';\n        letterSw = '';\n        letterO = '';\n        letterP = this.defaultPropsArray;\n      } else {\n        if (this._hasMaskedPath) {\n          if (currentLine !== letters[i].line) {\n            switch (documentData.j) {\n              case 1:\n                currentLength += totalLength - documentData.lineWidths[letters[i].line];\n                break;\n\n              case 2:\n                currentLength += (totalLength - documentData.lineWidths[letters[i].line]) / 2;\n                break;\n\n              default:\n                break;\n            }\n\n            currentLine = letters[i].line;\n          }\n\n          if (ind !== letters[i].ind) {\n            if (letters[ind]) {\n              currentLength += letters[ind].extra;\n            }\n\n            currentLength += letters[i].an / 2;\n            ind = letters[i].ind;\n          }\n\n          currentLength += alignment[0] * letters[i].an * 0.005;\n          var animatorOffset = 0;\n\n          for (j = 0; j < jLen; j += 1) {\n            animatorProps = animators[j].a;\n\n            if (animatorProps.p.propType) {\n              animatorSelector = animators[j].s;\n              mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\n\n              if (mult.length) {\n                animatorOffset += animatorProps.p.v[0] * mult[0];\n              } else {\n                animatorOffset += animatorProps.p.v[0] * mult;\n              }\n            }\n\n            if (animatorProps.a.propType) {\n              animatorSelector = animators[j].s;\n              mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\n\n              if (mult.length) {\n                animatorOffset += animatorProps.a.v[0] * mult[0];\n              } else {\n                animatorOffset += animatorProps.a.v[0] * mult;\n              }\n            }\n          }\n\n          flag = true; // Force alignment only works with a single line for now\n\n          if (this._pathData.a.v) {\n            currentLength = letters[0].an * 0.5 + (totalLength - this._pathData.f.v - letters[0].an * 0.5 - letters[letters.length - 1].an * 0.5) * ind / (len - 1);\n            currentLength += this._pathData.f.v;\n          }\n\n          while (flag) {\n            if (segmentLength + partialLength >= currentLength + animatorOffset || !points) {\n              perc = (currentLength + animatorOffset - segmentLength) / currentPoint.partialLength;\n              xPathPos = prevPoint.point[0] + (currentPoint.point[0] - prevPoint.point[0]) * perc;\n              yPathPos = prevPoint.point[1] + (currentPoint.point[1] - prevPoint.point[1]) * perc;\n              matrixHelper.translate(-alignment[0] * letters[i].an * 0.005, -(alignment[1] * yOff) * 0.01);\n              flag = false;\n            } else if (points) {\n              segmentLength += currentPoint.partialLength;\n              pointInd += 1;\n\n              if (pointInd >= points.length) {\n                pointInd = 0;\n                segmentInd += 1;\n\n                if (!segments[segmentInd]) {\n                  if (mask.v.c) {\n                    pointInd = 0;\n                    segmentInd = 0;\n                    points = segments[segmentInd].points;\n                  } else {\n                    segmentLength -= currentPoint.partialLength;\n                    points = null;\n                  }\n                } else {\n                  points = segments[segmentInd].points;\n                }\n              }\n\n              if (points) {\n                prevPoint = currentPoint;\n                currentPoint = points[pointInd];\n                partialLength = currentPoint.partialLength;\n              }\n            }\n          }\n\n          offf = letters[i].an / 2 - letters[i].add;\n          matrixHelper.translate(-offf, 0, 0);\n        } else {\n          offf = letters[i].an / 2 - letters[i].add;\n          matrixHelper.translate(-offf, 0, 0); // Grouping alignment\n\n          matrixHelper.translate(-alignment[0] * letters[i].an * 0.005, -alignment[1] * yOff * 0.01, 0);\n        }\n\n        for (j = 0; j < jLen; j += 1) {\n          animatorProps = animators[j].a;\n\n          if (animatorProps.t.propType) {\n            animatorSelector = animators[j].s;\n            mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars); // This condition is to prevent applying tracking to first character in each line. Might be better to use a boolean \"isNewLine\"\n\n            if (xPos !== 0 || documentData.j !== 0) {\n              if (this._hasMaskedPath) {\n                if (mult.length) {\n                  currentLength += animatorProps.t.v * mult[0];\n                } else {\n                  currentLength += animatorProps.t.v * mult;\n                }\n              } else if (mult.length) {\n                xPos += animatorProps.t.v * mult[0];\n              } else {\n                xPos += animatorProps.t.v * mult;\n              }\n            }\n          }\n        }\n\n        if (documentData.strokeWidthAnim) {\n          sw = documentData.sw || 0;\n        }\n\n        if (documentData.strokeColorAnim) {\n          if (documentData.sc) {\n            sc = [documentData.sc[0], documentData.sc[1], documentData.sc[2]];\n          } else {\n            sc = [0, 0, 0];\n          }\n        }\n\n        if (documentData.fillColorAnim && documentData.fc) {\n          fc = [documentData.fc[0], documentData.fc[1], documentData.fc[2]];\n        }\n\n        for (j = 0; j < jLen; j += 1) {\n          animatorProps = animators[j].a;\n\n          if (animatorProps.a.propType) {\n            animatorSelector = animators[j].s;\n            mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\n\n            if (mult.length) {\n              matrixHelper.translate(-animatorProps.a.v[0] * mult[0], -animatorProps.a.v[1] * mult[1], animatorProps.a.v[2] * mult[2]);\n            } else {\n              matrixHelper.translate(-animatorProps.a.v[0] * mult, -animatorProps.a.v[1] * mult, animatorProps.a.v[2] * mult);\n            }\n          }\n        }\n\n        for (j = 0; j < jLen; j += 1) {\n          animatorProps = animators[j].a;\n\n          if (animatorProps.s.propType) {\n            animatorSelector = animators[j].s;\n            mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\n\n            if (mult.length) {\n              matrixHelper.scale(1 + (animatorProps.s.v[0] - 1) * mult[0], 1 + (animatorProps.s.v[1] - 1) * mult[1], 1);\n            } else {\n              matrixHelper.scale(1 + (animatorProps.s.v[0] - 1) * mult, 1 + (animatorProps.s.v[1] - 1) * mult, 1);\n            }\n          }\n        }\n\n        for (j = 0; j < jLen; j += 1) {\n          animatorProps = animators[j].a;\n          animatorSelector = animators[j].s;\n          mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\n\n          if (animatorProps.sk.propType) {\n            if (mult.length) {\n              matrixHelper.skewFromAxis(-animatorProps.sk.v * mult[0], animatorProps.sa.v * mult[1]);\n            } else {\n              matrixHelper.skewFromAxis(-animatorProps.sk.v * mult, animatorProps.sa.v * mult);\n            }\n          }\n\n          if (animatorProps.r.propType) {\n            if (mult.length) {\n              matrixHelper.rotateZ(-animatorProps.r.v * mult[2]);\n            } else {\n              matrixHelper.rotateZ(-animatorProps.r.v * mult);\n            }\n          }\n\n          if (animatorProps.ry.propType) {\n            if (mult.length) {\n              matrixHelper.rotateY(animatorProps.ry.v * mult[1]);\n            } else {\n              matrixHelper.rotateY(animatorProps.ry.v * mult);\n            }\n          }\n\n          if (animatorProps.rx.propType) {\n            if (mult.length) {\n              matrixHelper.rotateX(animatorProps.rx.v * mult[0]);\n            } else {\n              matrixHelper.rotateX(animatorProps.rx.v * mult);\n            }\n          }\n\n          if (animatorProps.o.propType) {\n            if (mult.length) {\n              elemOpacity += (animatorProps.o.v * mult[0] - elemOpacity) * mult[0];\n            } else {\n              elemOpacity += (animatorProps.o.v * mult - elemOpacity) * mult;\n            }\n          }\n\n          if (documentData.strokeWidthAnim && animatorProps.sw.propType) {\n            if (mult.length) {\n              sw += animatorProps.sw.v * mult[0];\n            } else {\n              sw += animatorProps.sw.v * mult;\n            }\n          }\n\n          if (documentData.strokeColorAnim && animatorProps.sc.propType) {\n            for (k = 0; k < 3; k += 1) {\n              if (mult.length) {\n                sc[k] += (animatorProps.sc.v[k] - sc[k]) * mult[0];\n              } else {\n                sc[k] += (animatorProps.sc.v[k] - sc[k]) * mult;\n              }\n            }\n          }\n\n          if (documentData.fillColorAnim && documentData.fc) {\n            if (animatorProps.fc.propType) {\n              for (k = 0; k < 3; k += 1) {\n                if (mult.length) {\n                  fc[k] += (animatorProps.fc.v[k] - fc[k]) * mult[0];\n                } else {\n                  fc[k] += (animatorProps.fc.v[k] - fc[k]) * mult;\n                }\n              }\n            }\n\n            if (animatorProps.fh.propType) {\n              if (mult.length) {\n                fc = addHueToRGB(fc, animatorProps.fh.v * mult[0]);\n              } else {\n                fc = addHueToRGB(fc, animatorProps.fh.v * mult);\n              }\n            }\n\n            if (animatorProps.fs.propType) {\n              if (mult.length) {\n                fc = addSaturationToRGB(fc, animatorProps.fs.v * mult[0]);\n              } else {\n                fc = addSaturationToRGB(fc, animatorProps.fs.v * mult);\n              }\n            }\n\n            if (animatorProps.fb.propType) {\n              if (mult.length) {\n                fc = addBrightnessToRGB(fc, animatorProps.fb.v * mult[0]);\n              } else {\n                fc = addBrightnessToRGB(fc, animatorProps.fb.v * mult);\n              }\n            }\n          }\n        }\n\n        for (j = 0; j < jLen; j += 1) {\n          animatorProps = animators[j].a;\n\n          if (animatorProps.p.propType) {\n            animatorSelector = animators[j].s;\n            mult = animatorSelector.getMult(letters[i].anIndexes[j], textData.a[j].s.totalChars);\n\n            if (this._hasMaskedPath) {\n              if (mult.length) {\n                matrixHelper.translate(0, animatorProps.p.v[1] * mult[0], -animatorProps.p.v[2] * mult[1]);\n              } else {\n                matrixHelper.translate(0, animatorProps.p.v[1] * mult, -animatorProps.p.v[2] * mult);\n              }\n            } else if (mult.length) {\n              matrixHelper.translate(animatorProps.p.v[0] * mult[0], animatorProps.p.v[1] * mult[1], -animatorProps.p.v[2] * mult[2]);\n            } else {\n              matrixHelper.translate(animatorProps.p.v[0] * mult, animatorProps.p.v[1] * mult, -animatorProps.p.v[2] * mult);\n            }\n          }\n        }\n\n        if (documentData.strokeWidthAnim) {\n          letterSw = sw < 0 ? 0 : sw;\n        }\n\n        if (documentData.strokeColorAnim) {\n          letterSc = 'rgb(' + Math.round(sc[0] * 255) + ',' + Math.round(sc[1] * 255) + ',' + Math.round(sc[2] * 255) + ')';\n        }\n\n        if (documentData.fillColorAnim && documentData.fc) {\n          letterFc = 'rgb(' + Math.round(fc[0] * 255) + ',' + Math.round(fc[1] * 255) + ',' + Math.round(fc[2] * 255) + ')';\n        }\n\n        if (this._hasMaskedPath) {\n          matrixHelper.translate(0, -documentData.ls);\n          matrixHelper.translate(0, alignment[1] * yOff * 0.01 + yPos, 0);\n\n          if (this._pathData.p.v) {\n            tanAngle = (currentPoint.point[1] - prevPoint.point[1]) / (currentPoint.point[0] - prevPoint.point[0]);\n            var rot = Math.atan(tanAngle) * 180 / Math.PI;\n\n            if (currentPoint.point[0] < prevPoint.point[0]) {\n              rot += 180;\n            }\n\n            matrixHelper.rotate(-rot * Math.PI / 180);\n          }\n\n          matrixHelper.translate(xPathPos, yPathPos, 0);\n          currentLength -= alignment[0] * letters[i].an * 0.005;\n\n          if (letters[i + 1] && ind !== letters[i + 1].ind) {\n            currentLength += letters[i].an / 2;\n            currentLength += documentData.tr * 0.001 * documentData.finalSize;\n          }\n        } else {\n          matrixHelper.translate(xPos, yPos, 0);\n\n          if (documentData.ps) {\n            // matrixHelper.translate(documentData.ps[0],documentData.ps[1],0);\n            matrixHelper.translate(documentData.ps[0], documentData.ps[1] + documentData.ascent, 0);\n          }\n\n          switch (documentData.j) {\n            case 1:\n              matrixHelper.translate(letters[i].animatorJustifyOffset + documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[letters[i].line]), 0, 0);\n              break;\n\n            case 2:\n              matrixHelper.translate(letters[i].animatorJustifyOffset + documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[letters[i].line]) / 2, 0, 0);\n              break;\n\n            default:\n              break;\n          }\n\n          matrixHelper.translate(0, -documentData.ls);\n          matrixHelper.translate(offf, 0, 0);\n          matrixHelper.translate(alignment[0] * letters[i].an * 0.005, alignment[1] * yOff * 0.01, 0);\n          xPos += letters[i].l + documentData.tr * 0.001 * documentData.finalSize;\n        }\n\n        if (renderType === 'html') {\n          letterM = matrixHelper.toCSS();\n        } else if (renderType === 'svg') {\n          letterM = matrixHelper.to2dCSS();\n        } else {\n          letterP = [matrixHelper.props[0], matrixHelper.props[1], matrixHelper.props[2], matrixHelper.props[3], matrixHelper.props[4], matrixHelper.props[5], matrixHelper.props[6], matrixHelper.props[7], matrixHelper.props[8], matrixHelper.props[9], matrixHelper.props[10], matrixHelper.props[11], matrixHelper.props[12], matrixHelper.props[13], matrixHelper.props[14], matrixHelper.props[15]];\n        }\n\n        letterO = elemOpacity;\n      }\n\n      if (renderedLettersCount <= i) {\n        letterValue = new LetterProps(letterO, letterSw, letterSc, letterFc, letterM, letterP);\n        this.renderedLetters.push(letterValue);\n        renderedLettersCount += 1;\n        this.lettersChangedFlag = true;\n      } else {\n        letterValue = this.renderedLetters[i];\n        this.lettersChangedFlag = letterValue.update(letterO, letterSw, letterSc, letterFc, letterM, letterP) || this.lettersChangedFlag;\n      }\n    }\n  };\n\n  TextAnimatorProperty.prototype.getValue = function () {\n    if (this._elem.globalData.frameId === this._frameId) {\n      return;\n    }\n\n    this._frameId = this._elem.globalData.frameId;\n    this.iterateDynamicProperties();\n  };\n\n  TextAnimatorProperty.prototype.mHelper = new Matrix();\n  TextAnimatorProperty.prototype.defaultPropsArray = [];\n  extendPrototype([DynamicPropertyContainer], TextAnimatorProperty);\n\n  function ITextElement() {}\n\n  ITextElement.prototype.initElement = function (data, globalData, comp) {\n    this.lettersChangedFlag = true;\n    this.initFrame();\n    this.initBaseData(data, globalData, comp);\n    this.textProperty = new TextProperty(this, data.t, this.dynamicProperties);\n    this.textAnimator = new TextAnimatorProperty(data.t, this.renderType, this);\n    this.initTransform(data, globalData, comp);\n    this.initHierarchy();\n    this.initRenderable();\n    this.initRendererElement();\n    this.createContainerElements();\n    this.createRenderableComponents();\n    this.createContent();\n    this.hide();\n    this.textAnimator.searchProperties(this.dynamicProperties);\n  };\n\n  ITextElement.prototype.prepareFrame = function (num) {\n    this._mdf = false;\n    this.prepareRenderableFrame(num);\n    this.prepareProperties(num, this.isInRange);\n\n    if (this.textProperty._mdf || this.textProperty._isFirstFrame) {\n      this.buildNewText();\n      this.textProperty._isFirstFrame = false;\n      this.textProperty._mdf = false;\n    }\n  };\n\n  ITextElement.prototype.createPathShape = function (matrixHelper, shapes) {\n    var j;\n    var jLen = shapes.length;\n    var pathNodes;\n    var shapeStr = '';\n\n    for (j = 0; j < jLen; j += 1) {\n      if (shapes[j].ty === 'sh') {\n        pathNodes = shapes[j].ks.k;\n        shapeStr += buildShapeString(pathNodes, pathNodes.i.length, true, matrixHelper);\n      }\n    }\n\n    return shapeStr;\n  };\n\n  ITextElement.prototype.updateDocumentData = function (newData, index) {\n    this.textProperty.updateDocumentData(newData, index);\n  };\n\n  ITextElement.prototype.canResizeFont = function (_canResize) {\n    this.textProperty.canResizeFont(_canResize);\n  };\n\n  ITextElement.prototype.setMinimumFontSize = function (_fontSize) {\n    this.textProperty.setMinimumFontSize(_fontSize);\n  };\n\n  ITextElement.prototype.applyTextPropertiesToMatrix = function (documentData, matrixHelper, lineNumber, xPos, yPos) {\n    if (documentData.ps) {\n      matrixHelper.translate(documentData.ps[0], documentData.ps[1] + documentData.ascent, 0);\n    }\n\n    matrixHelper.translate(0, -documentData.ls, 0);\n\n    switch (documentData.j) {\n      case 1:\n        matrixHelper.translate(documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[lineNumber]), 0, 0);\n        break;\n\n      case 2:\n        matrixHelper.translate(documentData.justifyOffset + (documentData.boxWidth - documentData.lineWidths[lineNumber]) / 2, 0, 0);\n        break;\n\n      default:\n        break;\n    }\n\n    matrixHelper.translate(xPos, yPos, 0);\n  };\n\n  ITextElement.prototype.buildColor = function (colorData) {\n    return 'rgb(' + Math.round(colorData[0] * 255) + ',' + Math.round(colorData[1] * 255) + ',' + Math.round(colorData[2] * 255) + ')';\n  };\n\n  ITextElement.prototype.emptyProp = new LetterProps();\n\n  ITextElement.prototype.destroy = function () {};\n\n  var emptyShapeData = {\n    shapes: []\n  };\n\n  function SVGTextLottieElement(data, globalData, comp) {\n    this.textSpans = [];\n    this.renderType = 'svg';\n    this.initElement(data, globalData, comp);\n  }\n\n  extendPrototype([BaseElement, TransformElement, SVGBaseElement, HierarchyElement, FrameElement, RenderableDOMElement, ITextElement], SVGTextLottieElement);\n\n  SVGTextLottieElement.prototype.createContent = function () {\n    if (this.data.singleShape && !this.globalData.fontManager.chars) {\n      this.textContainer = createNS('text');\n    }\n  };\n\n  SVGTextLottieElement.prototype.buildTextContents = function (textArray) {\n    var i = 0;\n    var len = textArray.length;\n    var textContents = [];\n    var currentTextContent = '';\n\n    while (i < len) {\n      if (textArray[i] === String.fromCharCode(13) || textArray[i] === String.fromCharCode(3)) {\n        textContents.push(currentTextContent);\n        currentTextContent = '';\n      } else {\n        currentTextContent += textArray[i];\n      }\n\n      i += 1;\n    }\n\n    textContents.push(currentTextContent);\n    return textContents;\n  };\n\n  SVGTextLottieElement.prototype.buildShapeData = function (data, scale) {\n    // data should probably be cloned to apply scale separately to each instance of a text on different layers\n    // but since text internal content gets only rendered once and then it's never rerendered,\n    // it's probably safe not to clone data and reuse always the same instance even if the object is mutated.\n    // Avoiding cloning is preferred since cloning each character shape data is expensive\n    if (data.shapes && data.shapes.length) {\n      var shape = data.shapes[0];\n\n      if (shape.it) {\n        var shapeItem = shape.it[shape.it.length - 1];\n\n        if (shapeItem.s) {\n          shapeItem.s.k[0] = scale;\n          shapeItem.s.k[1] = scale;\n        }\n      }\n    }\n\n    return data;\n  };\n\n  SVGTextLottieElement.prototype.buildNewText = function () {\n    this.addDynamicProperty(this);\n    var i;\n    var len;\n    var documentData = this.textProperty.currentData;\n    this.renderedLetters = createSizedArray(documentData ? documentData.l.length : 0);\n\n    if (documentData.fc) {\n      this.layerElement.setAttribute('fill', this.buildColor(documentData.fc));\n    } else {\n      this.layerElement.setAttribute('fill', 'rgba(0,0,0,0)');\n    }\n\n    if (documentData.sc) {\n      this.layerElement.setAttribute('stroke', this.buildColor(documentData.sc));\n      this.layerElement.setAttribute('stroke-width', documentData.sw);\n    }\n\n    this.layerElement.setAttribute('font-size', documentData.finalSize);\n    var fontData = this.globalData.fontManager.getFontByName(documentData.f);\n\n    if (fontData.fClass) {\n      this.layerElement.setAttribute('class', fontData.fClass);\n    } else {\n      this.layerElement.setAttribute('font-family', fontData.fFamily);\n      var fWeight = documentData.fWeight;\n      var fStyle = documentData.fStyle;\n      this.layerElement.setAttribute('font-style', fStyle);\n      this.layerElement.setAttribute('font-weight', fWeight);\n    }\n\n    this.layerElement.setAttribute('aria-label', documentData.t);\n    var letters = documentData.l || [];\n    var usesGlyphs = !!this.globalData.fontManager.chars;\n    len = letters.length;\n    var tSpan;\n    var matrixHelper = this.mHelper;\n    var shapeStr = '';\n    var singleShape = this.data.singleShape;\n    var xPos = 0;\n    var yPos = 0;\n    var firstLine = true;\n    var trackingOffset = documentData.tr * 0.001 * documentData.finalSize;\n\n    if (singleShape && !usesGlyphs && !documentData.sz) {\n      var tElement = this.textContainer;\n      var justify = 'start';\n\n      switch (documentData.j) {\n        case 1:\n          justify = 'end';\n          break;\n\n        case 2:\n          justify = 'middle';\n          break;\n\n        default:\n          justify = 'start';\n          break;\n      }\n\n      tElement.setAttribute('text-anchor', justify);\n      tElement.setAttribute('letter-spacing', trackingOffset);\n      var textContent = this.buildTextContents(documentData.finalText);\n      len = textContent.length;\n      yPos = documentData.ps ? documentData.ps[1] + documentData.ascent : 0;\n\n      for (i = 0; i < len; i += 1) {\n        tSpan = this.textSpans[i].span || createNS('tspan');\n        tSpan.textContent = textContent[i];\n        tSpan.setAttribute('x', 0);\n        tSpan.setAttribute('y', yPos);\n        tSpan.style.display = 'inherit';\n        tElement.appendChild(tSpan);\n\n        if (!this.textSpans[i]) {\n          this.textSpans[i] = {\n            span: null,\n            glyph: null\n          };\n        }\n\n        this.textSpans[i].span = tSpan;\n        yPos += documentData.finalLineHeight;\n      }\n\n      this.layerElement.appendChild(tElement);\n    } else {\n      var cachedSpansLength = this.textSpans.length;\n      var charData;\n\n      for (i = 0; i < len; i += 1) {\n        if (!this.textSpans[i]) {\n          this.textSpans[i] = {\n            span: null,\n            childSpan: null,\n            glyph: null\n          };\n        }\n\n        if (!usesGlyphs || !singleShape || i === 0) {\n          tSpan = cachedSpansLength > i ? this.textSpans[i].span : createNS(usesGlyphs ? 'g' : 'text');\n\n          if (cachedSpansLength <= i) {\n            tSpan.setAttribute('stroke-linecap', 'butt');\n            tSpan.setAttribute('stroke-linejoin', 'round');\n            tSpan.setAttribute('stroke-miterlimit', '4');\n            this.textSpans[i].span = tSpan;\n\n            if (usesGlyphs) {\n              var childSpan = createNS('g');\n              tSpan.appendChild(childSpan);\n              this.textSpans[i].childSpan = childSpan;\n            }\n\n            this.textSpans[i].span = tSpan;\n            this.layerElement.appendChild(tSpan);\n          }\n\n          tSpan.style.display = 'inherit';\n        }\n\n        matrixHelper.reset();\n\n        if (singleShape) {\n          if (letters[i].n) {\n            xPos = -trackingOffset;\n            yPos += documentData.yOffset;\n            yPos += firstLine ? 1 : 0;\n            firstLine = false;\n          }\n\n          this.applyTextPropertiesToMatrix(documentData, matrixHelper, letters[i].line, xPos, yPos);\n          xPos += letters[i].l || 0; // xPos += letters[i].val === ' ' ? 0 : trackingOffset;\n\n          xPos += trackingOffset;\n        }\n\n        if (usesGlyphs) {\n          charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\n          var glyphElement; // t === 1 means the character has been replaced with an animated shaped\n\n          if (charData.t === 1) {\n            glyphElement = new SVGCompElement(charData.data, this.globalData, this);\n          } else {\n            var data = emptyShapeData;\n\n            if (charData.data && charData.data.shapes) {\n              data = this.buildShapeData(charData.data, documentData.finalSize);\n            }\n\n            glyphElement = new SVGShapeElement(data, this.globalData, this);\n          }\n\n          if (this.textSpans[i].glyph) {\n            var glyph = this.textSpans[i].glyph;\n            this.textSpans[i].childSpan.removeChild(glyph.layerElement);\n            glyph.destroy();\n          }\n\n          this.textSpans[i].glyph = glyphElement;\n          glyphElement._debug = true;\n          glyphElement.prepareFrame(0);\n          glyphElement.renderFrame();\n          this.textSpans[i].childSpan.appendChild(glyphElement.layerElement); // when using animated shapes, the layer will be scaled instead of replacing the internal scale\n          // this might have issues with strokes and might need a different solution\n\n          if (charData.t === 1) {\n            this.textSpans[i].childSpan.setAttribute('transform', 'scale(' + documentData.finalSize / 100 + ',' + documentData.finalSize / 100 + ')');\n          }\n        } else {\n          if (singleShape) {\n            tSpan.setAttribute('transform', 'translate(' + matrixHelper.props[12] + ',' + matrixHelper.props[13] + ')');\n          }\n\n          tSpan.textContent = letters[i].val;\n          tSpan.setAttributeNS('http://www.w3.org/XML/1998/namespace', 'xml:space', 'preserve');\n        } //\n\n      }\n\n      if (singleShape && tSpan) {\n        tSpan.setAttribute('d', shapeStr);\n      }\n    }\n\n    while (i < this.textSpans.length) {\n      this.textSpans[i].span.style.display = 'none';\n      i += 1;\n    }\n\n    this._sizeChanged = true;\n  };\n\n  SVGTextLottieElement.prototype.sourceRectAtTime = function () {\n    this.prepareFrame(this.comp.renderedFrame - this.data.st);\n    this.renderInnerContent();\n\n    if (this._sizeChanged) {\n      this._sizeChanged = false;\n      var textBox = this.layerElement.getBBox();\n      this.bbox = {\n        top: textBox.y,\n        left: textBox.x,\n        width: textBox.width,\n        height: textBox.height\n      };\n    }\n\n    return this.bbox;\n  };\n\n  SVGTextLottieElement.prototype.getValue = function () {\n    var i;\n    var len = this.textSpans.length;\n    var glyphElement;\n    this.renderedFrame = this.comp.renderedFrame;\n\n    for (i = 0; i < len; i += 1) {\n      glyphElement = this.textSpans[i].glyph;\n\n      if (glyphElement) {\n        glyphElement.prepareFrame(this.comp.renderedFrame - this.data.st);\n\n        if (glyphElement._mdf) {\n          this._mdf = true;\n        }\n      }\n    }\n  };\n\n  SVGTextLottieElement.prototype.renderInnerContent = function () {\n    if (!this.data.singleShape || this._mdf) {\n      this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\n\n      if (this.lettersChangedFlag || this.textAnimator.lettersChangedFlag) {\n        this._sizeChanged = true;\n        var i;\n        var len;\n        var renderedLetters = this.textAnimator.renderedLetters;\n        var letters = this.textProperty.currentData.l;\n        len = letters.length;\n        var renderedLetter;\n        var textSpan;\n        var glyphElement;\n\n        for (i = 0; i < len; i += 1) {\n          if (!letters[i].n) {\n            renderedLetter = renderedLetters[i];\n            textSpan = this.textSpans[i].span;\n            glyphElement = this.textSpans[i].glyph;\n\n            if (glyphElement) {\n              glyphElement.renderFrame();\n            }\n\n            if (renderedLetter._mdf.m) {\n              textSpan.setAttribute('transform', renderedLetter.m);\n            }\n\n            if (renderedLetter._mdf.o) {\n              textSpan.setAttribute('opacity', renderedLetter.o);\n            }\n\n            if (renderedLetter._mdf.sw) {\n              textSpan.setAttribute('stroke-width', renderedLetter.sw);\n            }\n\n            if (renderedLetter._mdf.sc) {\n              textSpan.setAttribute('stroke', renderedLetter.sc);\n            }\n\n            if (renderedLetter._mdf.fc) {\n              textSpan.setAttribute('fill', renderedLetter.fc);\n            }\n          }\n        }\n      }\n    }\n  };\n\n  function ISolidElement(data, globalData, comp) {\n    this.initElement(data, globalData, comp);\n  }\n\n  extendPrototype([IImageElement], ISolidElement);\n\n  ISolidElement.prototype.createContent = function () {\n    var rect = createNS('rect'); /// /rect.style.width = this.data.sw;\n    /// /rect.style.height = this.data.sh;\n    /// /rect.style.fill = this.data.sc;\n\n    rect.setAttribute('width', this.data.sw);\n    rect.setAttribute('height', this.data.sh);\n    rect.setAttribute('fill', this.data.sc);\n    this.layerElement.appendChild(rect);\n  };\n\n  function NullElement(data, globalData, comp) {\n    this.initFrame();\n    this.initBaseData(data, globalData, comp);\n    this.initFrame();\n    this.initTransform(data, globalData, comp);\n    this.initHierarchy();\n  }\n\n  NullElement.prototype.prepareFrame = function (num) {\n    this.prepareProperties(num, true);\n  };\n\n  NullElement.prototype.renderFrame = function () {};\n\n  NullElement.prototype.getBaseElement = function () {\n    return null;\n  };\n\n  NullElement.prototype.destroy = function () {};\n\n  NullElement.prototype.sourceRectAtTime = function () {};\n\n  NullElement.prototype.hide = function () {};\n\n  extendPrototype([BaseElement, TransformElement, HierarchyElement, FrameElement], NullElement);\n\n  function SVGRendererBase() {}\n\n  extendPrototype([BaseRenderer], SVGRendererBase);\n\n  SVGRendererBase.prototype.createNull = function (data) {\n    return new NullElement(data, this.globalData, this);\n  };\n\n  SVGRendererBase.prototype.createShape = function (data) {\n    return new SVGShapeElement(data, this.globalData, this);\n  };\n\n  SVGRendererBase.prototype.createText = function (data) {\n    return new SVGTextLottieElement(data, this.globalData, this);\n  };\n\n  SVGRendererBase.prototype.createImage = function (data) {\n    return new IImageElement(data, this.globalData, this);\n  };\n\n  SVGRendererBase.prototype.createSolid = function (data) {\n    return new ISolidElement(data, this.globalData, this);\n  };\n\n  SVGRendererBase.prototype.configAnimation = function (animData) {\n    this.svgElement.setAttribute('xmlns', 'http://www.w3.org/2000/svg');\n\n    if (this.renderConfig.viewBoxSize) {\n      this.svgElement.setAttribute('viewBox', this.renderConfig.viewBoxSize);\n    } else {\n      this.svgElement.setAttribute('viewBox', '0 0 ' + animData.w + ' ' + animData.h);\n    }\n\n    if (!this.renderConfig.viewBoxOnly) {\n      this.svgElement.setAttribute('width', animData.w);\n      this.svgElement.setAttribute('height', animData.h);\n      this.svgElement.style.width = '100%';\n      this.svgElement.style.height = '100%';\n      this.svgElement.style.transform = 'translate3d(0,0,0)';\n      this.svgElement.style.contentVisibility = this.renderConfig.contentVisibility;\n    }\n\n    if (this.renderConfig.width) {\n      this.svgElement.setAttribute('width', this.renderConfig.width);\n    }\n\n    if (this.renderConfig.height) {\n      this.svgElement.setAttribute('height', this.renderConfig.height);\n    }\n\n    if (this.renderConfig.className) {\n      this.svgElement.setAttribute('class', this.renderConfig.className);\n    }\n\n    if (this.renderConfig.id) {\n      this.svgElement.setAttribute('id', this.renderConfig.id);\n    }\n\n    if (this.renderConfig.focusable !== undefined) {\n      this.svgElement.setAttribute('focusable', this.renderConfig.focusable);\n    }\n\n    this.svgElement.setAttribute('preserveAspectRatio', this.renderConfig.preserveAspectRatio); // this.layerElement.style.transform = 'translate3d(0,0,0)';\n    // this.layerElement.style.transformOrigin = this.layerElement.style.mozTransformOrigin = this.layerElement.style.webkitTransformOrigin = this.layerElement.style['-webkit-transform'] = \"0px 0px 0px\";\n\n    this.animationItem.wrapper.appendChild(this.svgElement); // Mask animation\n\n    var defs = this.globalData.defs;\n    this.setupGlobalData(animData, defs);\n    this.globalData.progressiveLoad = this.renderConfig.progressiveLoad;\n    this.data = animData;\n    var maskElement = createNS('clipPath');\n    var rect = createNS('rect');\n    rect.setAttribute('width', animData.w);\n    rect.setAttribute('height', animData.h);\n    rect.setAttribute('x', 0);\n    rect.setAttribute('y', 0);\n    var maskId = createElementID();\n    maskElement.setAttribute('id', maskId);\n    maskElement.appendChild(rect);\n    this.layerElement.setAttribute('clip-path', 'url(' + getLocationHref() + '#' + maskId + ')');\n    defs.appendChild(maskElement);\n    this.layers = animData.layers;\n    this.elements = createSizedArray(animData.layers.length);\n  };\n\n  SVGRendererBase.prototype.destroy = function () {\n    if (this.animationItem.wrapper) {\n      this.animationItem.wrapper.innerText = '';\n    }\n\n    this.layerElement = null;\n    this.globalData.defs = null;\n    var i;\n    var len = this.layers ? this.layers.length : 0;\n\n    for (i = 0; i < len; i += 1) {\n      if (this.elements[i]) {\n        this.elements[i].destroy();\n      }\n    }\n\n    this.elements.length = 0;\n    this.destroyed = true;\n    this.animationItem = null;\n  };\n\n  SVGRendererBase.prototype.updateContainerSize = function () {};\n\n  SVGRendererBase.prototype.buildItem = function (pos) {\n    var elements = this.elements;\n\n    if (elements[pos] || this.layers[pos].ty === 99) {\n      return;\n    }\n\n    elements[pos] = true;\n    var element = this.createItem(this.layers[pos]);\n    elements[pos] = element;\n\n    if (getExpressionsPlugin()) {\n      if (this.layers[pos].ty === 0) {\n        this.globalData.projectInterface.registerComposition(element);\n      }\n\n      element.initExpressions();\n    }\n\n    this.appendElementInPos(element, pos);\n\n    if (this.layers[pos].tt) {\n      if (!this.elements[pos - 1] || this.elements[pos - 1] === true) {\n        this.buildItem(pos - 1);\n        this.addPendingElement(element);\n      } else {\n        element.setMatte(elements[pos - 1].layerId);\n      }\n    }\n  };\n\n  SVGRendererBase.prototype.checkPendingElements = function () {\n    while (this.pendingElements.length) {\n      var element = this.pendingElements.pop();\n      element.checkParenting();\n\n      if (element.data.tt) {\n        var i = 0;\n        var len = this.elements.length;\n\n        while (i < len) {\n          if (this.elements[i] === element) {\n            element.setMatte(this.elements[i - 1].layerId);\n            break;\n          }\n\n          i += 1;\n        }\n      }\n    }\n  };\n\n  SVGRendererBase.prototype.renderFrame = function (num) {\n    if (this.renderedFrame === num || this.destroyed) {\n      return;\n    }\n\n    if (num === null) {\n      num = this.renderedFrame;\n    } else {\n      this.renderedFrame = num;\n    } // console.log('-------');\n    // console.log('FRAME ',num);\n\n\n    this.globalData.frameNum = num;\n    this.globalData.frameId += 1;\n    this.globalData.projectInterface.currentFrame = num;\n    this.globalData._mdf = false;\n    var i;\n    var len = this.layers.length;\n\n    if (!this.completeLayers) {\n      this.checkLayers(num);\n    }\n\n    for (i = len - 1; i >= 0; i -= 1) {\n      if (this.completeLayers || this.elements[i]) {\n        this.elements[i].prepareFrame(num - this.layers[i].st);\n      }\n    }\n\n    if (this.globalData._mdf) {\n      for (i = 0; i < len; i += 1) {\n        if (this.completeLayers || this.elements[i]) {\n          this.elements[i].renderFrame();\n        }\n      }\n    }\n  };\n\n  SVGRendererBase.prototype.appendElementInPos = function (element, pos) {\n    var newElement = element.getBaseElement();\n\n    if (!newElement) {\n      return;\n    }\n\n    var i = 0;\n    var nextElement;\n\n    while (i < pos) {\n      if (this.elements[i] && this.elements[i] !== true && this.elements[i].getBaseElement()) {\n        nextElement = this.elements[i].getBaseElement();\n      }\n\n      i += 1;\n    }\n\n    if (nextElement) {\n      this.layerElement.insertBefore(newElement, nextElement);\n    } else {\n      this.layerElement.appendChild(newElement);\n    }\n  };\n\n  SVGRendererBase.prototype.hide = function () {\n    this.layerElement.style.display = 'none';\n  };\n\n  SVGRendererBase.prototype.show = function () {\n    this.layerElement.style.display = 'block';\n  };\n\n  function ICompElement() {}\n\n  extendPrototype([BaseElement, TransformElement, HierarchyElement, FrameElement, RenderableDOMElement], ICompElement);\n\n  ICompElement.prototype.initElement = function (data, globalData, comp) {\n    this.initFrame();\n    this.initBaseData(data, globalData, comp);\n    this.initTransform(data, globalData, comp);\n    this.initRenderable();\n    this.initHierarchy();\n    this.initRendererElement();\n    this.createContainerElements();\n    this.createRenderableComponents();\n\n    if (this.data.xt || !globalData.progressiveLoad) {\n      this.buildAllItems();\n    }\n\n    this.hide();\n  };\n  /* ICompElement.prototype.hide = function(){\r\n      if(!this.hidden){\r\n          this.hideElement();\r\n          var i,len = this.elements.length;\r\n          for( i = 0; i < len; i+=1 ){\r\n              if(this.elements[i]){\r\n                  this.elements[i].hide();\r\n              }\r\n          }\r\n      }\r\n  }; */\n\n\n  ICompElement.prototype.prepareFrame = function (num) {\n    this._mdf = false;\n    this.prepareRenderableFrame(num);\n    this.prepareProperties(num, this.isInRange);\n\n    if (!this.isInRange && !this.data.xt) {\n      return;\n    }\n\n    if (!this.tm._placeholder) {\n      var timeRemapped = this.tm.v;\n\n      if (timeRemapped === this.data.op) {\n        timeRemapped = this.data.op - 1;\n      }\n\n      this.renderedFrame = timeRemapped;\n    } else {\n      this.renderedFrame = num / this.data.sr;\n    }\n\n    var i;\n    var len = this.elements.length;\n\n    if (!this.completeLayers) {\n      this.checkLayers(this.renderedFrame);\n    } // This iteration needs to be backwards because of how expressions connect between each other\n\n\n    for (i = len - 1; i >= 0; i -= 1) {\n      if (this.completeLayers || this.elements[i]) {\n        this.elements[i].prepareFrame(this.renderedFrame - this.layers[i].st);\n\n        if (this.elements[i]._mdf) {\n          this._mdf = true;\n        }\n      }\n    }\n  };\n\n  ICompElement.prototype.renderInnerContent = function () {\n    var i;\n    var len = this.layers.length;\n\n    for (i = 0; i < len; i += 1) {\n      if (this.completeLayers || this.elements[i]) {\n        this.elements[i].renderFrame();\n      }\n    }\n  };\n\n  ICompElement.prototype.setElements = function (elems) {\n    this.elements = elems;\n  };\n\n  ICompElement.prototype.getElements = function () {\n    return this.elements;\n  };\n\n  ICompElement.prototype.destroyElements = function () {\n    var i;\n    var len = this.layers.length;\n\n    for (i = 0; i < len; i += 1) {\n      if (this.elements[i]) {\n        this.elements[i].destroy();\n      }\n    }\n  };\n\n  ICompElement.prototype.destroy = function () {\n    this.destroyElements();\n    this.destroyBaseElement();\n  };\n\n  function SVGCompElement(data, globalData, comp) {\n    this.layers = data.layers;\n    this.supports3d = true;\n    this.completeLayers = false;\n    this.pendingElements = [];\n    this.elements = this.layers ? createSizedArray(this.layers.length) : [];\n    this.initElement(data, globalData, comp);\n    this.tm = data.tm ? PropertyFactory.getProp(this, data.tm, 0, globalData.frameRate, this) : {\n      _placeholder: true\n    };\n  }\n\n  extendPrototype([SVGRendererBase, ICompElement, SVGBaseElement], SVGCompElement);\n\n  SVGCompElement.prototype.createComp = function (data) {\n    return new SVGCompElement(data, this.globalData, this);\n  };\n\n  function SVGRenderer(animationItem, config) {\n    this.animationItem = animationItem;\n    this.layers = null;\n    this.renderedFrame = -1;\n    this.svgElement = createNS('svg');\n    var ariaLabel = '';\n\n    if (config && config.title) {\n      var titleElement = createNS('title');\n      var titleId = createElementID();\n      titleElement.setAttribute('id', titleId);\n      titleElement.textContent = config.title;\n      this.svgElement.appendChild(titleElement);\n      ariaLabel += titleId;\n    }\n\n    if (config && config.description) {\n      var descElement = createNS('desc');\n      var descId = createElementID();\n      descElement.setAttribute('id', descId);\n      descElement.textContent = config.description;\n      this.svgElement.appendChild(descElement);\n      ariaLabel += ' ' + descId;\n    }\n\n    if (ariaLabel) {\n      this.svgElement.setAttribute('aria-labelledby', ariaLabel);\n    }\n\n    var defs = createNS('defs');\n    this.svgElement.appendChild(defs);\n    var maskElement = createNS('g');\n    this.svgElement.appendChild(maskElement);\n    this.layerElement = maskElement;\n    this.renderConfig = {\n      preserveAspectRatio: config && config.preserveAspectRatio || 'xMidYMid meet',\n      imagePreserveAspectRatio: config && config.imagePreserveAspectRatio || 'xMidYMid slice',\n      contentVisibility: config && config.contentVisibility || 'visible',\n      progressiveLoad: config && config.progressiveLoad || false,\n      hideOnTransparent: !(config && config.hideOnTransparent === false),\n      viewBoxOnly: config && config.viewBoxOnly || false,\n      viewBoxSize: config && config.viewBoxSize || false,\n      className: config && config.className || '',\n      id: config && config.id || '',\n      focusable: config && config.focusable,\n      filterSize: {\n        width: config && config.filterSize && config.filterSize.width || '100%',\n        height: config && config.filterSize && config.filterSize.height || '100%',\n        x: config && config.filterSize && config.filterSize.x || '0%',\n        y: config && config.filterSize && config.filterSize.y || '0%'\n      },\n      width: config && config.width,\n      height: config && config.height\n    };\n    this.globalData = {\n      _mdf: false,\n      frameNum: -1,\n      defs: defs,\n      renderConfig: this.renderConfig\n    };\n    this.elements = [];\n    this.pendingElements = [];\n    this.destroyed = false;\n    this.rendererType = 'svg';\n  }\n\n  extendPrototype([SVGRendererBase], SVGRenderer);\n\n  SVGRenderer.prototype.createComp = function (data) {\n    return new SVGCompElement(data, this.globalData, this);\n  };\n\n  function CVContextData() {\n    this.saved = [];\n    this.cArrPos = 0;\n    this.cTr = new Matrix();\n    this.cO = 1;\n    var i;\n    var len = 15;\n    this.savedOp = createTypedArray('float32', len);\n\n    for (i = 0; i < len; i += 1) {\n      this.saved[i] = createTypedArray('float32', 16);\n    }\n\n    this._length = len;\n  }\n\n  CVContextData.prototype.duplicate = function () {\n    var newLength = this._length * 2;\n    var currentSavedOp = this.savedOp;\n    this.savedOp = createTypedArray('float32', newLength);\n    this.savedOp.set(currentSavedOp);\n    var i = 0;\n\n    for (i = this._length; i < newLength; i += 1) {\n      this.saved[i] = createTypedArray('float32', 16);\n    }\n\n    this._length = newLength;\n  };\n\n  CVContextData.prototype.reset = function () {\n    this.cArrPos = 0;\n    this.cTr.reset();\n    this.cO = 1;\n  };\n\n  function ShapeTransformManager() {\n    this.sequences = {};\n    this.sequenceList = [];\n    this.transform_key_count = 0;\n  }\n\n  ShapeTransformManager.prototype = {\n    addTransformSequence: function addTransformSequence(transforms) {\n      var i;\n      var len = transforms.length;\n      var key = '_';\n\n      for (i = 0; i < len; i += 1) {\n        key += transforms[i].transform.key + '_';\n      }\n\n      var sequence = this.sequences[key];\n\n      if (!sequence) {\n        sequence = {\n          transforms: [].concat(transforms),\n          finalTransform: new Matrix(),\n          _mdf: false\n        };\n        this.sequences[key] = sequence;\n        this.sequenceList.push(sequence);\n      }\n\n      return sequence;\n    },\n    processSequence: function processSequence(sequence, isFirstFrame) {\n      var i = 0;\n      var len = sequence.transforms.length;\n      var _mdf = isFirstFrame;\n\n      while (i < len && !isFirstFrame) {\n        if (sequence.transforms[i].transform.mProps._mdf) {\n          _mdf = true;\n          break;\n        }\n\n        i += 1;\n      }\n\n      if (_mdf) {\n        var props;\n        sequence.finalTransform.reset();\n\n        for (i = len - 1; i >= 0; i -= 1) {\n          props = sequence.transforms[i].transform.mProps.v.props;\n          sequence.finalTransform.transform(props[0], props[1], props[2], props[3], props[4], props[5], props[6], props[7], props[8], props[9], props[10], props[11], props[12], props[13], props[14], props[15]);\n        }\n      }\n\n      sequence._mdf = _mdf;\n    },\n    processSequences: function processSequences(isFirstFrame) {\n      var i;\n      var len = this.sequenceList.length;\n\n      for (i = 0; i < len; i += 1) {\n        this.processSequence(this.sequenceList[i], isFirstFrame);\n      }\n    },\n    getNewKey: function getNewKey() {\n      this.transform_key_count += 1;\n      return '_' + this.transform_key_count;\n    }\n  };\n\n  function CVEffects() {}\n\n  CVEffects.prototype.renderFrame = function () {};\n\n  function CVMaskElement(data, element) {\n    this.data = data;\n    this.element = element;\n    this.masksProperties = this.data.masksProperties || [];\n    this.viewData = createSizedArray(this.masksProperties.length);\n    var i;\n    var len = this.masksProperties.length;\n    var hasMasks = false;\n\n    for (i = 0; i < len; i += 1) {\n      if (this.masksProperties[i].mode !== 'n') {\n        hasMasks = true;\n      }\n\n      this.viewData[i] = ShapePropertyFactory.getShapeProp(this.element, this.masksProperties[i], 3);\n    }\n\n    this.hasMasks = hasMasks;\n\n    if (hasMasks) {\n      this.element.addRenderableComponent(this);\n    }\n  }\n\n  CVMaskElement.prototype.renderFrame = function () {\n    if (!this.hasMasks) {\n      return;\n    }\n\n    var transform = this.element.finalTransform.mat;\n    var ctx = this.element.canvasContext;\n    var i;\n    var len = this.masksProperties.length;\n    var pt;\n    var pts;\n    var data;\n    ctx.beginPath();\n\n    for (i = 0; i < len; i += 1) {\n      if (this.masksProperties[i].mode !== 'n') {\n        if (this.masksProperties[i].inv) {\n          ctx.moveTo(0, 0);\n          ctx.lineTo(this.element.globalData.compSize.w, 0);\n          ctx.lineTo(this.element.globalData.compSize.w, this.element.globalData.compSize.h);\n          ctx.lineTo(0, this.element.globalData.compSize.h);\n          ctx.lineTo(0, 0);\n        }\n\n        data = this.viewData[i].v;\n        pt = transform.applyToPointArray(data.v[0][0], data.v[0][1], 0);\n        ctx.moveTo(pt[0], pt[1]);\n        var j;\n        var jLen = data._length;\n\n        for (j = 1; j < jLen; j += 1) {\n          pts = transform.applyToTriplePoints(data.o[j - 1], data.i[j], data.v[j]);\n          ctx.bezierCurveTo(pts[0], pts[1], pts[2], pts[3], pts[4], pts[5]);\n        }\n\n        pts = transform.applyToTriplePoints(data.o[j - 1], data.i[0], data.v[0]);\n        ctx.bezierCurveTo(pts[0], pts[1], pts[2], pts[3], pts[4], pts[5]);\n      }\n    }\n\n    this.element.globalData.renderer.save(true);\n    ctx.clip();\n  };\n\n  CVMaskElement.prototype.getMaskProperty = MaskElement.prototype.getMaskProperty;\n\n  CVMaskElement.prototype.destroy = function () {\n    this.element = null;\n  };\n\n  function CVBaseElement() {}\n\n  CVBaseElement.prototype = {\n    createElements: function createElements() {},\n    initRendererElement: function initRendererElement() {},\n    createContainerElements: function createContainerElements() {\n      this.canvasContext = this.globalData.canvasContext;\n      this.renderableEffectsManager = new CVEffects(this);\n    },\n    createContent: function createContent() {},\n    setBlendMode: function setBlendMode() {\n      var globalData = this.globalData;\n\n      if (globalData.blendMode !== this.data.bm) {\n        globalData.blendMode = this.data.bm;\n        var blendModeValue = getBlendMode(this.data.bm);\n        globalData.canvasContext.globalCompositeOperation = blendModeValue;\n      }\n    },\n    createRenderableComponents: function createRenderableComponents() {\n      this.maskManager = new CVMaskElement(this.data, this);\n    },\n    hideElement: function hideElement() {\n      if (!this.hidden && (!this.isInRange || this.isTransparent)) {\n        this.hidden = true;\n      }\n    },\n    showElement: function showElement() {\n      if (this.isInRange && !this.isTransparent) {\n        this.hidden = false;\n        this._isFirstFrame = true;\n        this.maskManager._isFirstFrame = true;\n      }\n    },\n    renderFrame: function renderFrame() {\n      if (this.hidden || this.data.hd) {\n        return;\n      }\n\n      this.renderTransform();\n      this.renderRenderable();\n      this.setBlendMode();\n      var forceRealStack = this.data.ty === 0;\n      this.globalData.renderer.save(forceRealStack);\n      this.globalData.renderer.ctxTransform(this.finalTransform.mat.props);\n      this.globalData.renderer.ctxOpacity(this.finalTransform.mProp.o.v);\n      this.renderInnerContent();\n      this.globalData.renderer.restore(forceRealStack);\n\n      if (this.maskManager.hasMasks) {\n        this.globalData.renderer.restore(true);\n      }\n\n      if (this._isFirstFrame) {\n        this._isFirstFrame = false;\n      }\n    },\n    destroy: function destroy() {\n      this.canvasContext = null;\n      this.data = null;\n      this.globalData = null;\n      this.maskManager.destroy();\n    },\n    mHelper: new Matrix()\n  };\n  CVBaseElement.prototype.hide = CVBaseElement.prototype.hideElement;\n  CVBaseElement.prototype.show = CVBaseElement.prototype.showElement;\n\n  function CVShapeData(element, data, styles, transformsManager) {\n    this.styledShapes = [];\n    this.tr = [0, 0, 0, 0, 0, 0];\n    var ty = 4;\n\n    if (data.ty === 'rc') {\n      ty = 5;\n    } else if (data.ty === 'el') {\n      ty = 6;\n    } else if (data.ty === 'sr') {\n      ty = 7;\n    }\n\n    this.sh = ShapePropertyFactory.getShapeProp(element, data, ty, element);\n    var i;\n    var len = styles.length;\n    var styledShape;\n\n    for (i = 0; i < len; i += 1) {\n      if (!styles[i].closed) {\n        styledShape = {\n          transforms: transformsManager.addTransformSequence(styles[i].transforms),\n          trNodes: []\n        };\n        this.styledShapes.push(styledShape);\n        styles[i].elements.push(styledShape);\n      }\n    }\n  }\n\n  CVShapeData.prototype.setAsAnimated = SVGShapeData.prototype.setAsAnimated;\n\n  function CVShapeElement(data, globalData, comp) {\n    this.shapes = [];\n    this.shapesData = data.shapes;\n    this.stylesList = [];\n    this.itemsData = [];\n    this.prevViewData = [];\n    this.shapeModifiers = [];\n    this.processedElements = [];\n    this.transformsManager = new ShapeTransformManager();\n    this.initElement(data, globalData, comp);\n  }\n\n  extendPrototype([BaseElement, TransformElement, CVBaseElement, IShapeElement, HierarchyElement, FrameElement, RenderableElement], CVShapeElement);\n  CVShapeElement.prototype.initElement = RenderableDOMElement.prototype.initElement;\n  CVShapeElement.prototype.transformHelper = {\n    opacity: 1,\n    _opMdf: false\n  };\n  CVShapeElement.prototype.dashResetter = [];\n\n  CVShapeElement.prototype.createContent = function () {\n    this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, true, []);\n  };\n\n  CVShapeElement.prototype.createStyleElement = function (data, transforms) {\n    var styleElem = {\n      data: data,\n      type: data.ty,\n      preTransforms: this.transformsManager.addTransformSequence(transforms),\n      transforms: [],\n      elements: [],\n      closed: data.hd === true\n    };\n    var elementData = {};\n\n    if (data.ty === 'fl' || data.ty === 'st') {\n      elementData.c = PropertyFactory.getProp(this, data.c, 1, 255, this);\n\n      if (!elementData.c.k) {\n        styleElem.co = 'rgb(' + bmFloor(elementData.c.v[0]) + ',' + bmFloor(elementData.c.v[1]) + ',' + bmFloor(elementData.c.v[2]) + ')';\n      }\n    } else if (data.ty === 'gf' || data.ty === 'gs') {\n      elementData.s = PropertyFactory.getProp(this, data.s, 1, null, this);\n      elementData.e = PropertyFactory.getProp(this, data.e, 1, null, this);\n      elementData.h = PropertyFactory.getProp(this, data.h || {\n        k: 0\n      }, 0, 0.01, this);\n      elementData.a = PropertyFactory.getProp(this, data.a || {\n        k: 0\n      }, 0, degToRads, this);\n      elementData.g = new GradientProperty(this, data.g, this);\n    }\n\n    elementData.o = PropertyFactory.getProp(this, data.o, 0, 0.01, this);\n\n    if (data.ty === 'st' || data.ty === 'gs') {\n      styleElem.lc = lineCapEnum[data.lc || 2];\n      styleElem.lj = lineJoinEnum[data.lj || 2];\n\n      if (data.lj == 1) {\n        // eslint-disable-line eqeqeq\n        styleElem.ml = data.ml;\n      }\n\n      elementData.w = PropertyFactory.getProp(this, data.w, 0, null, this);\n\n      if (!elementData.w.k) {\n        styleElem.wi = elementData.w.v;\n      }\n\n      if (data.d) {\n        var d = new DashProperty(this, data.d, 'canvas', this);\n        elementData.d = d;\n\n        if (!elementData.d.k) {\n          styleElem.da = elementData.d.dashArray;\n          styleElem[\"do\"] = elementData.d.dashoffset[0];\n        }\n      }\n    } else {\n      styleElem.r = data.r === 2 ? 'evenodd' : 'nonzero';\n    }\n\n    this.stylesList.push(styleElem);\n    elementData.style = styleElem;\n    return elementData;\n  };\n\n  CVShapeElement.prototype.createGroupElement = function () {\n    var elementData = {\n      it: [],\n      prevViewData: []\n    };\n    return elementData;\n  };\n\n  CVShapeElement.prototype.createTransformElement = function (data) {\n    var elementData = {\n      transform: {\n        opacity: 1,\n        _opMdf: false,\n        key: this.transformsManager.getNewKey(),\n        op: PropertyFactory.getProp(this, data.o, 0, 0.01, this),\n        mProps: TransformPropertyFactory.getTransformProperty(this, data, this)\n      }\n    };\n    return elementData;\n  };\n\n  CVShapeElement.prototype.createShapeElement = function (data) {\n    var elementData = new CVShapeData(this, data, this.stylesList, this.transformsManager);\n    this.shapes.push(elementData);\n    this.addShapeToModifiers(elementData);\n    return elementData;\n  };\n\n  CVShapeElement.prototype.reloadShapes = function () {\n    this._isFirstFrame = true;\n    var i;\n    var len = this.itemsData.length;\n\n    for (i = 0; i < len; i += 1) {\n      this.prevViewData[i] = this.itemsData[i];\n    }\n\n    this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, true, []);\n    len = this.dynamicProperties.length;\n\n    for (i = 0; i < len; i += 1) {\n      this.dynamicProperties[i].getValue();\n    }\n\n    this.renderModifiers();\n    this.transformsManager.processSequences(this._isFirstFrame);\n  };\n\n  CVShapeElement.prototype.addTransformToStyleList = function (transform) {\n    var i;\n    var len = this.stylesList.length;\n\n    for (i = 0; i < len; i += 1) {\n      if (!this.stylesList[i].closed) {\n        this.stylesList[i].transforms.push(transform);\n      }\n    }\n  };\n\n  CVShapeElement.prototype.removeTransformFromStyleList = function () {\n    var i;\n    var len = this.stylesList.length;\n\n    for (i = 0; i < len; i += 1) {\n      if (!this.stylesList[i].closed) {\n        this.stylesList[i].transforms.pop();\n      }\n    }\n  };\n\n  CVShapeElement.prototype.closeStyles = function (styles) {\n    var i;\n    var len = styles.length;\n\n    for (i = 0; i < len; i += 1) {\n      styles[i].closed = true;\n    }\n  };\n\n  CVShapeElement.prototype.searchShapes = function (arr, itemsData, prevViewData, shouldRender, transforms) {\n    var i;\n    var len = arr.length - 1;\n    var j;\n    var jLen;\n    var ownStyles = [];\n    var ownModifiers = [];\n    var processedPos;\n    var modifier;\n    var currentTransform;\n    var ownTransforms = [].concat(transforms);\n\n    for (i = len; i >= 0; i -= 1) {\n      processedPos = this.searchProcessedElement(arr[i]);\n\n      if (!processedPos) {\n        arr[i]._shouldRender = shouldRender;\n      } else {\n        itemsData[i] = prevViewData[processedPos - 1];\n      }\n\n      if (arr[i].ty === 'fl' || arr[i].ty === 'st' || arr[i].ty === 'gf' || arr[i].ty === 'gs') {\n        if (!processedPos) {\n          itemsData[i] = this.createStyleElement(arr[i], ownTransforms);\n        } else {\n          itemsData[i].style.closed = false;\n        }\n\n        ownStyles.push(itemsData[i].style);\n      } else if (arr[i].ty === 'gr') {\n        if (!processedPos) {\n          itemsData[i] = this.createGroupElement(arr[i]);\n        } else {\n          jLen = itemsData[i].it.length;\n\n          for (j = 0; j < jLen; j += 1) {\n            itemsData[i].prevViewData[j] = itemsData[i].it[j];\n          }\n        }\n\n        this.searchShapes(arr[i].it, itemsData[i].it, itemsData[i].prevViewData, shouldRender, ownTransforms);\n      } else if (arr[i].ty === 'tr') {\n        if (!processedPos) {\n          currentTransform = this.createTransformElement(arr[i]);\n          itemsData[i] = currentTransform;\n        }\n\n        ownTransforms.push(itemsData[i]);\n        this.addTransformToStyleList(itemsData[i]);\n      } else if (arr[i].ty === 'sh' || arr[i].ty === 'rc' || arr[i].ty === 'el' || arr[i].ty === 'sr') {\n        if (!processedPos) {\n          itemsData[i] = this.createShapeElement(arr[i]);\n        }\n      } else if (arr[i].ty === 'tm' || arr[i].ty === 'rd' || arr[i].ty === 'pb') {\n        if (!processedPos) {\n          modifier = ShapeModifiers.getModifier(arr[i].ty);\n          modifier.init(this, arr[i]);\n          itemsData[i] = modifier;\n          this.shapeModifiers.push(modifier);\n        } else {\n          modifier = itemsData[i];\n          modifier.closed = false;\n        }\n\n        ownModifiers.push(modifier);\n      } else if (arr[i].ty === 'rp') {\n        if (!processedPos) {\n          modifier = ShapeModifiers.getModifier(arr[i].ty);\n          itemsData[i] = modifier;\n          modifier.init(this, arr, i, itemsData);\n          this.shapeModifiers.push(modifier);\n          shouldRender = false;\n        } else {\n          modifier = itemsData[i];\n          modifier.closed = true;\n        }\n\n        ownModifiers.push(modifier);\n      }\n\n      this.addProcessedElement(arr[i], i + 1);\n    }\n\n    this.removeTransformFromStyleList();\n    this.closeStyles(ownStyles);\n    len = ownModifiers.length;\n\n    for (i = 0; i < len; i += 1) {\n      ownModifiers[i].closed = true;\n    }\n  };\n\n  CVShapeElement.prototype.renderInnerContent = function () {\n    this.transformHelper.opacity = 1;\n    this.transformHelper._opMdf = false;\n    this.renderModifiers();\n    this.transformsManager.processSequences(this._isFirstFrame);\n    this.renderShape(this.transformHelper, this.shapesData, this.itemsData, true);\n  };\n\n  CVShapeElement.prototype.renderShapeTransform = function (parentTransform, groupTransform) {\n    if (parentTransform._opMdf || groupTransform.op._mdf || this._isFirstFrame) {\n      groupTransform.opacity = parentTransform.opacity;\n      groupTransform.opacity *= groupTransform.op.v;\n      groupTransform._opMdf = true;\n    }\n  };\n\n  CVShapeElement.prototype.drawLayer = function () {\n    var i;\n    var len = this.stylesList.length;\n    var j;\n    var jLen;\n    var k;\n    var kLen;\n    var elems;\n    var nodes;\n    var renderer = this.globalData.renderer;\n    var ctx = this.globalData.canvasContext;\n    var type;\n    var currentStyle;\n\n    for (i = 0; i < len; i += 1) {\n      currentStyle = this.stylesList[i];\n      type = currentStyle.type; // Skipping style when\n      // Stroke width equals 0\n      // style should not be rendered (extra unused repeaters)\n      // current opacity equals 0\n      // global opacity equals 0\n\n      if (!((type === 'st' || type === 'gs') && currentStyle.wi === 0 || !currentStyle.data._shouldRender || currentStyle.coOp === 0 || this.globalData.currentGlobalAlpha === 0)) {\n        renderer.save();\n        elems = currentStyle.elements;\n\n        if (type === 'st' || type === 'gs') {\n          ctx.strokeStyle = type === 'st' ? currentStyle.co : currentStyle.grd;\n          ctx.lineWidth = currentStyle.wi;\n          ctx.lineCap = currentStyle.lc;\n          ctx.lineJoin = currentStyle.lj;\n          ctx.miterLimit = currentStyle.ml || 0;\n        } else {\n          ctx.fillStyle = type === 'fl' ? currentStyle.co : currentStyle.grd;\n        }\n\n        renderer.ctxOpacity(currentStyle.coOp);\n\n        if (type !== 'st' && type !== 'gs') {\n          ctx.beginPath();\n        }\n\n        renderer.ctxTransform(currentStyle.preTransforms.finalTransform.props);\n        jLen = elems.length;\n\n        for (j = 0; j < jLen; j += 1) {\n          if (type === 'st' || type === 'gs') {\n            ctx.beginPath();\n\n            if (currentStyle.da) {\n              ctx.setLineDash(currentStyle.da);\n              ctx.lineDashOffset = currentStyle[\"do\"];\n            }\n          }\n\n          nodes = elems[j].trNodes;\n          kLen = nodes.length;\n\n          for (k = 0; k < kLen; k += 1) {\n            if (nodes[k].t === 'm') {\n              ctx.moveTo(nodes[k].p[0], nodes[k].p[1]);\n            } else if (nodes[k].t === 'c') {\n              ctx.bezierCurveTo(nodes[k].pts[0], nodes[k].pts[1], nodes[k].pts[2], nodes[k].pts[3], nodes[k].pts[4], nodes[k].pts[5]);\n            } else {\n              ctx.closePath();\n            }\n          }\n\n          if (type === 'st' || type === 'gs') {\n            ctx.stroke();\n\n            if (currentStyle.da) {\n              ctx.setLineDash(this.dashResetter);\n            }\n          }\n        }\n\n        if (type !== 'st' && type !== 'gs') {\n          ctx.fill(currentStyle.r);\n        }\n\n        renderer.restore();\n      }\n    }\n  };\n\n  CVShapeElement.prototype.renderShape = function (parentTransform, items, data, isMain) {\n    var i;\n    var len = items.length - 1;\n    var groupTransform;\n    groupTransform = parentTransform;\n\n    for (i = len; i >= 0; i -= 1) {\n      if (items[i].ty === 'tr') {\n        groupTransform = data[i].transform;\n        this.renderShapeTransform(parentTransform, groupTransform);\n      } else if (items[i].ty === 'sh' || items[i].ty === 'el' || items[i].ty === 'rc' || items[i].ty === 'sr') {\n        this.renderPath(items[i], data[i]);\n      } else if (items[i].ty === 'fl') {\n        this.renderFill(items[i], data[i], groupTransform);\n      } else if (items[i].ty === 'st') {\n        this.renderStroke(items[i], data[i], groupTransform);\n      } else if (items[i].ty === 'gf' || items[i].ty === 'gs') {\n        this.renderGradientFill(items[i], data[i], groupTransform);\n      } else if (items[i].ty === 'gr') {\n        this.renderShape(groupTransform, items[i].it, data[i].it);\n      } else if (items[i].ty === 'tm') {//\n      }\n    }\n\n    if (isMain) {\n      this.drawLayer();\n    }\n  };\n\n  CVShapeElement.prototype.renderStyledShape = function (styledShape, shape) {\n    if (this._isFirstFrame || shape._mdf || styledShape.transforms._mdf) {\n      var shapeNodes = styledShape.trNodes;\n      var paths = shape.paths;\n      var i;\n      var len;\n      var j;\n      var jLen = paths._length;\n      shapeNodes.length = 0;\n      var groupTransformMat = styledShape.transforms.finalTransform;\n\n      for (j = 0; j < jLen; j += 1) {\n        var pathNodes = paths.shapes[j];\n\n        if (pathNodes && pathNodes.v) {\n          len = pathNodes._length;\n\n          for (i = 1; i < len; i += 1) {\n            if (i === 1) {\n              shapeNodes.push({\n                t: 'm',\n                p: groupTransformMat.applyToPointArray(pathNodes.v[0][0], pathNodes.v[0][1], 0)\n              });\n            }\n\n            shapeNodes.push({\n              t: 'c',\n              pts: groupTransformMat.applyToTriplePoints(pathNodes.o[i - 1], pathNodes.i[i], pathNodes.v[i])\n            });\n          }\n\n          if (len === 1) {\n            shapeNodes.push({\n              t: 'm',\n              p: groupTransformMat.applyToPointArray(pathNodes.v[0][0], pathNodes.v[0][1], 0)\n            });\n          }\n\n          if (pathNodes.c && len) {\n            shapeNodes.push({\n              t: 'c',\n              pts: groupTransformMat.applyToTriplePoints(pathNodes.o[i - 1], pathNodes.i[0], pathNodes.v[0])\n            });\n            shapeNodes.push({\n              t: 'z'\n            });\n          }\n        }\n      }\n\n      styledShape.trNodes = shapeNodes;\n    }\n  };\n\n  CVShapeElement.prototype.renderPath = function (pathData, itemData) {\n    if (pathData.hd !== true && pathData._shouldRender) {\n      var i;\n      var len = itemData.styledShapes.length;\n\n      for (i = 0; i < len; i += 1) {\n        this.renderStyledShape(itemData.styledShapes[i], itemData.sh);\n      }\n    }\n  };\n\n  CVShapeElement.prototype.renderFill = function (styleData, itemData, groupTransform) {\n    var styleElem = itemData.style;\n\n    if (itemData.c._mdf || this._isFirstFrame) {\n      styleElem.co = 'rgb(' + bmFloor(itemData.c.v[0]) + ',' + bmFloor(itemData.c.v[1]) + ',' + bmFloor(itemData.c.v[2]) + ')';\n    }\n\n    if (itemData.o._mdf || groupTransform._opMdf || this._isFirstFrame) {\n      styleElem.coOp = itemData.o.v * groupTransform.opacity;\n    }\n  };\n\n  CVShapeElement.prototype.renderGradientFill = function (styleData, itemData, groupTransform) {\n    var styleElem = itemData.style;\n    var grd;\n\n    if (!styleElem.grd || itemData.g._mdf || itemData.s._mdf || itemData.e._mdf || styleData.t !== 1 && (itemData.h._mdf || itemData.a._mdf)) {\n      var ctx = this.globalData.canvasContext;\n      var pt1 = itemData.s.v;\n      var pt2 = itemData.e.v;\n\n      if (styleData.t === 1) {\n        grd = ctx.createLinearGradient(pt1[0], pt1[1], pt2[0], pt2[1]);\n      } else {\n        var rad = Math.sqrt(Math.pow(pt1[0] - pt2[0], 2) + Math.pow(pt1[1] - pt2[1], 2));\n        var ang = Math.atan2(pt2[1] - pt1[1], pt2[0] - pt1[0]);\n        var percent = itemData.h.v;\n\n        if (percent >= 1) {\n          percent = 0.99;\n        } else if (percent <= -1) {\n          percent = -0.99;\n        }\n\n        var dist = rad * percent;\n        var x = Math.cos(ang + itemData.a.v) * dist + pt1[0];\n        var y = Math.sin(ang + itemData.a.v) * dist + pt1[1];\n        grd = ctx.createRadialGradient(x, y, 0, pt1[0], pt1[1], rad);\n      }\n\n      var i;\n      var len = styleData.g.p;\n      var cValues = itemData.g.c;\n      var opacity = 1;\n\n      for (i = 0; i < len; i += 1) {\n        if (itemData.g._hasOpacity && itemData.g._collapsable) {\n          opacity = itemData.g.o[i * 2 + 1];\n        }\n\n        grd.addColorStop(cValues[i * 4] / 100, 'rgba(' + cValues[i * 4 + 1] + ',' + cValues[i * 4 + 2] + ',' + cValues[i * 4 + 3] + ',' + opacity + ')');\n      }\n\n      styleElem.grd = grd;\n    }\n\n    styleElem.coOp = itemData.o.v * groupTransform.opacity;\n  };\n\n  CVShapeElement.prototype.renderStroke = function (styleData, itemData, groupTransform) {\n    var styleElem = itemData.style;\n    var d = itemData.d;\n\n    if (d && (d._mdf || this._isFirstFrame)) {\n      styleElem.da = d.dashArray;\n      styleElem[\"do\"] = d.dashoffset[0];\n    }\n\n    if (itemData.c._mdf || this._isFirstFrame) {\n      styleElem.co = 'rgb(' + bmFloor(itemData.c.v[0]) + ',' + bmFloor(itemData.c.v[1]) + ',' + bmFloor(itemData.c.v[2]) + ')';\n    }\n\n    if (itemData.o._mdf || groupTransform._opMdf || this._isFirstFrame) {\n      styleElem.coOp = itemData.o.v * groupTransform.opacity;\n    }\n\n    if (itemData.w._mdf || this._isFirstFrame) {\n      styleElem.wi = itemData.w.v;\n    }\n  };\n\n  CVShapeElement.prototype.destroy = function () {\n    this.shapesData = null;\n    this.globalData = null;\n    this.canvasContext = null;\n    this.stylesList.length = 0;\n    this.itemsData.length = 0;\n  };\n\n  function CVTextElement(data, globalData, comp) {\n    this.textSpans = [];\n    this.yOffset = 0;\n    this.fillColorAnim = false;\n    this.strokeColorAnim = false;\n    this.strokeWidthAnim = false;\n    this.stroke = false;\n    this.fill = false;\n    this.justifyOffset = 0;\n    this.currentRender = null;\n    this.renderType = 'canvas';\n    this.values = {\n      fill: 'rgba(0,0,0,0)',\n      stroke: 'rgba(0,0,0,0)',\n      sWidth: 0,\n      fValue: ''\n    };\n    this.initElement(data, globalData, comp);\n  }\n\n  extendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement, ITextElement], CVTextElement);\n  CVTextElement.prototype.tHelper = createTag('canvas').getContext('2d');\n\n  CVTextElement.prototype.buildNewText = function () {\n    var documentData = this.textProperty.currentData;\n    this.renderedLetters = createSizedArray(documentData.l ? documentData.l.length : 0);\n    var hasFill = false;\n\n    if (documentData.fc) {\n      hasFill = true;\n      this.values.fill = this.buildColor(documentData.fc);\n    } else {\n      this.values.fill = 'rgba(0,0,0,0)';\n    }\n\n    this.fill = hasFill;\n    var hasStroke = false;\n\n    if (documentData.sc) {\n      hasStroke = true;\n      this.values.stroke = this.buildColor(documentData.sc);\n      this.values.sWidth = documentData.sw;\n    }\n\n    var fontData = this.globalData.fontManager.getFontByName(documentData.f);\n    var i;\n    var len;\n    var letters = documentData.l;\n    var matrixHelper = this.mHelper;\n    this.stroke = hasStroke;\n    this.values.fValue = documentData.finalSize + 'px ' + this.globalData.fontManager.getFontByName(documentData.f).fFamily;\n    len = documentData.finalText.length; // this.tHelper.font = this.values.fValue;\n\n    var charData;\n    var shapeData;\n    var k;\n    var kLen;\n    var shapes;\n    var j;\n    var jLen;\n    var pathNodes;\n    var commands;\n    var pathArr;\n    var singleShape = this.data.singleShape;\n    var trackingOffset = documentData.tr * 0.001 * documentData.finalSize;\n    var xPos = 0;\n    var yPos = 0;\n    var firstLine = true;\n    var cnt = 0;\n\n    for (i = 0; i < len; i += 1) {\n      charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\n      shapeData = charData && charData.data || {};\n      matrixHelper.reset();\n\n      if (singleShape && letters[i].n) {\n        xPos = -trackingOffset;\n        yPos += documentData.yOffset;\n        yPos += firstLine ? 1 : 0;\n        firstLine = false;\n      }\n\n      shapes = shapeData.shapes ? shapeData.shapes[0].it : [];\n      jLen = shapes.length;\n      matrixHelper.scale(documentData.finalSize / 100, documentData.finalSize / 100);\n\n      if (singleShape) {\n        this.applyTextPropertiesToMatrix(documentData, matrixHelper, letters[i].line, xPos, yPos);\n      }\n\n      commands = createSizedArray(jLen - 1);\n      var commandsCounter = 0;\n\n      for (j = 0; j < jLen; j += 1) {\n        if (shapes[j].ty === 'sh') {\n          kLen = shapes[j].ks.k.i.length;\n          pathNodes = shapes[j].ks.k;\n          pathArr = [];\n\n          for (k = 1; k < kLen; k += 1) {\n            if (k === 1) {\n              pathArr.push(matrixHelper.applyToX(pathNodes.v[0][0], pathNodes.v[0][1], 0), matrixHelper.applyToY(pathNodes.v[0][0], pathNodes.v[0][1], 0));\n            }\n\n            pathArr.push(matrixHelper.applyToX(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToY(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToX(pathNodes.i[k][0], pathNodes.i[k][1], 0), matrixHelper.applyToY(pathNodes.i[k][0], pathNodes.i[k][1], 0), matrixHelper.applyToX(pathNodes.v[k][0], pathNodes.v[k][1], 0), matrixHelper.applyToY(pathNodes.v[k][0], pathNodes.v[k][1], 0));\n          }\n\n          pathArr.push(matrixHelper.applyToX(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToY(pathNodes.o[k - 1][0], pathNodes.o[k - 1][1], 0), matrixHelper.applyToX(pathNodes.i[0][0], pathNodes.i[0][1], 0), matrixHelper.applyToY(pathNodes.i[0][0], pathNodes.i[0][1], 0), matrixHelper.applyToX(pathNodes.v[0][0], pathNodes.v[0][1], 0), matrixHelper.applyToY(pathNodes.v[0][0], pathNodes.v[0][1], 0));\n          commands[commandsCounter] = pathArr;\n          commandsCounter += 1;\n        }\n      }\n\n      if (singleShape) {\n        xPos += letters[i].l;\n        xPos += trackingOffset;\n      }\n\n      if (this.textSpans[cnt]) {\n        this.textSpans[cnt].elem = commands;\n      } else {\n        this.textSpans[cnt] = {\n          elem: commands\n        };\n      }\n\n      cnt += 1;\n    }\n  };\n\n  CVTextElement.prototype.renderInnerContent = function () {\n    var ctx = this.canvasContext;\n    ctx.font = this.values.fValue;\n    ctx.lineCap = 'butt';\n    ctx.lineJoin = 'miter';\n    ctx.miterLimit = 4;\n\n    if (!this.data.singleShape) {\n      this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\n    }\n\n    var i;\n    var len;\n    var j;\n    var jLen;\n    var k;\n    var kLen;\n    var renderedLetters = this.textAnimator.renderedLetters;\n    var letters = this.textProperty.currentData.l;\n    len = letters.length;\n    var renderedLetter;\n    var lastFill = null;\n    var lastStroke = null;\n    var lastStrokeW = null;\n    var commands;\n    var pathArr;\n\n    for (i = 0; i < len; i += 1) {\n      if (!letters[i].n) {\n        renderedLetter = renderedLetters[i];\n\n        if (renderedLetter) {\n          this.globalData.renderer.save();\n          this.globalData.renderer.ctxTransform(renderedLetter.p);\n          this.globalData.renderer.ctxOpacity(renderedLetter.o);\n        }\n\n        if (this.fill) {\n          if (renderedLetter && renderedLetter.fc) {\n            if (lastFill !== renderedLetter.fc) {\n              lastFill = renderedLetter.fc;\n              ctx.fillStyle = renderedLetter.fc;\n            }\n          } else if (lastFill !== this.values.fill) {\n            lastFill = this.values.fill;\n            ctx.fillStyle = this.values.fill;\n          }\n\n          commands = this.textSpans[i].elem;\n          jLen = commands.length;\n          this.globalData.canvasContext.beginPath();\n\n          for (j = 0; j < jLen; j += 1) {\n            pathArr = commands[j];\n            kLen = pathArr.length;\n            this.globalData.canvasContext.moveTo(pathArr[0], pathArr[1]);\n\n            for (k = 2; k < kLen; k += 6) {\n              this.globalData.canvasContext.bezierCurveTo(pathArr[k], pathArr[k + 1], pathArr[k + 2], pathArr[k + 3], pathArr[k + 4], pathArr[k + 5]);\n            }\n          }\n\n          this.globalData.canvasContext.closePath();\n          this.globalData.canvasContext.fill(); /// ctx.fillText(this.textSpans[i].val,0,0);\n        }\n\n        if (this.stroke) {\n          if (renderedLetter && renderedLetter.sw) {\n            if (lastStrokeW !== renderedLetter.sw) {\n              lastStrokeW = renderedLetter.sw;\n              ctx.lineWidth = renderedLetter.sw;\n            }\n          } else if (lastStrokeW !== this.values.sWidth) {\n            lastStrokeW = this.values.sWidth;\n            ctx.lineWidth = this.values.sWidth;\n          }\n\n          if (renderedLetter && renderedLetter.sc) {\n            if (lastStroke !== renderedLetter.sc) {\n              lastStroke = renderedLetter.sc;\n              ctx.strokeStyle = renderedLetter.sc;\n            }\n          } else if (lastStroke !== this.values.stroke) {\n            lastStroke = this.values.stroke;\n            ctx.strokeStyle = this.values.stroke;\n          }\n\n          commands = this.textSpans[i].elem;\n          jLen = commands.length;\n          this.globalData.canvasContext.beginPath();\n\n          for (j = 0; j < jLen; j += 1) {\n            pathArr = commands[j];\n            kLen = pathArr.length;\n            this.globalData.canvasContext.moveTo(pathArr[0], pathArr[1]);\n\n            for (k = 2; k < kLen; k += 6) {\n              this.globalData.canvasContext.bezierCurveTo(pathArr[k], pathArr[k + 1], pathArr[k + 2], pathArr[k + 3], pathArr[k + 4], pathArr[k + 5]);\n            }\n          }\n\n          this.globalData.canvasContext.closePath();\n          this.globalData.canvasContext.stroke(); /// ctx.strokeText(letters[i].val,0,0);\n        }\n\n        if (renderedLetter) {\n          this.globalData.renderer.restore();\n        }\n      }\n    }\n  };\n\n  function CVImageElement(data, globalData, comp) {\n    this.assetData = globalData.getAssetData(data.refId);\n    this.img = globalData.imageLoader.getAsset(this.assetData);\n    this.initElement(data, globalData, comp);\n  }\n\n  extendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement], CVImageElement);\n  CVImageElement.prototype.initElement = SVGShapeElement.prototype.initElement;\n  CVImageElement.prototype.prepareFrame = IImageElement.prototype.prepareFrame;\n\n  CVImageElement.prototype.createContent = function () {\n    if (this.img.width && (this.assetData.w !== this.img.width || this.assetData.h !== this.img.height)) {\n      var canvas = createTag('canvas');\n      canvas.width = this.assetData.w;\n      canvas.height = this.assetData.h;\n      var ctx = canvas.getContext('2d');\n      var imgW = this.img.width;\n      var imgH = this.img.height;\n      var imgRel = imgW / imgH;\n      var canvasRel = this.assetData.w / this.assetData.h;\n      var widthCrop;\n      var heightCrop;\n      var par = this.assetData.pr || this.globalData.renderConfig.imagePreserveAspectRatio;\n\n      if (imgRel > canvasRel && par === 'xMidYMid slice' || imgRel < canvasRel && par !== 'xMidYMid slice') {\n        heightCrop = imgH;\n        widthCrop = heightCrop * canvasRel;\n      } else {\n        widthCrop = imgW;\n        heightCrop = widthCrop / canvasRel;\n      }\n\n      ctx.drawImage(this.img, (imgW - widthCrop) / 2, (imgH - heightCrop) / 2, widthCrop, heightCrop, 0, 0, this.assetData.w, this.assetData.h);\n      this.img = canvas;\n    }\n  };\n\n  CVImageElement.prototype.renderInnerContent = function () {\n    this.canvasContext.drawImage(this.img, 0, 0);\n  };\n\n  CVImageElement.prototype.destroy = function () {\n    this.img = null;\n  };\n\n  function CVSolidElement(data, globalData, comp) {\n    this.initElement(data, globalData, comp);\n  }\n\n  extendPrototype([BaseElement, TransformElement, CVBaseElement, HierarchyElement, FrameElement, RenderableElement], CVSolidElement);\n  CVSolidElement.prototype.initElement = SVGShapeElement.prototype.initElement;\n  CVSolidElement.prototype.prepareFrame = IImageElement.prototype.prepareFrame;\n\n  CVSolidElement.prototype.renderInnerContent = function () {\n    var ctx = this.canvasContext;\n    ctx.fillStyle = this.data.sc;\n    ctx.fillRect(0, 0, this.data.sw, this.data.sh); //\n  };\n\n  function CanvasRendererBase(animationItem, config) {\n    this.animationItem = animationItem;\n    this.renderConfig = {\n      clearCanvas: config && config.clearCanvas !== undefined ? config.clearCanvas : true,\n      context: config && config.context || null,\n      progressiveLoad: config && config.progressiveLoad || false,\n      preserveAspectRatio: config && config.preserveAspectRatio || 'xMidYMid meet',\n      imagePreserveAspectRatio: config && config.imagePreserveAspectRatio || 'xMidYMid slice',\n      contentVisibility: config && config.contentVisibility || 'visible',\n      className: config && config.className || '',\n      id: config && config.id || ''\n    };\n    this.renderConfig.dpr = config && config.dpr || 1;\n\n    if (this.animationItem.wrapper) {\n      this.renderConfig.dpr = config && config.dpr || window.devicePixelRatio || 1;\n    }\n\n    this.renderedFrame = -1;\n    this.globalData = {\n      frameNum: -1,\n      _mdf: false,\n      renderConfig: this.renderConfig,\n      currentGlobalAlpha: -1\n    };\n    this.contextData = new CVContextData();\n    this.elements = [];\n    this.pendingElements = [];\n    this.transformMat = new Matrix();\n    this.completeLayers = false;\n    this.rendererType = 'canvas';\n  }\n\n  extendPrototype([BaseRenderer], CanvasRendererBase);\n\n  CanvasRendererBase.prototype.createShape = function (data) {\n    return new CVShapeElement(data, this.globalData, this);\n  };\n\n  CanvasRendererBase.prototype.createText = function (data) {\n    return new CVTextElement(data, this.globalData, this);\n  };\n\n  CanvasRendererBase.prototype.createImage = function (data) {\n    return new CVImageElement(data, this.globalData, this);\n  };\n\n  CanvasRendererBase.prototype.createSolid = function (data) {\n    return new CVSolidElement(data, this.globalData, this);\n  };\n\n  CanvasRendererBase.prototype.createNull = SVGRenderer.prototype.createNull;\n\n  CanvasRendererBase.prototype.ctxTransform = function (props) {\n    if (props[0] === 1 && props[1] === 0 && props[4] === 0 && props[5] === 1 && props[12] === 0 && props[13] === 0) {\n      return;\n    }\n\n    if (!this.renderConfig.clearCanvas) {\n      this.canvasContext.transform(props[0], props[1], props[4], props[5], props[12], props[13]);\n      return;\n    }\n\n    this.transformMat.cloneFromProps(props);\n    var cProps = this.contextData.cTr.props;\n    this.transformMat.transform(cProps[0], cProps[1], cProps[2], cProps[3], cProps[4], cProps[5], cProps[6], cProps[7], cProps[8], cProps[9], cProps[10], cProps[11], cProps[12], cProps[13], cProps[14], cProps[15]); // this.contextData.cTr.transform(props[0],props[1],props[2],props[3],props[4],props[5],props[6],props[7],props[8],props[9],props[10],props[11],props[12],props[13],props[14],props[15]);\n\n    this.contextData.cTr.cloneFromProps(this.transformMat.props);\n    var trProps = this.contextData.cTr.props;\n    this.canvasContext.setTransform(trProps[0], trProps[1], trProps[4], trProps[5], trProps[12], trProps[13]);\n  };\n\n  CanvasRendererBase.prototype.ctxOpacity = function (op) {\n    /* if(op === 1){\r\n          return;\r\n      } */\n    if (!this.renderConfig.clearCanvas) {\n      this.canvasContext.globalAlpha *= op < 0 ? 0 : op;\n      this.globalData.currentGlobalAlpha = this.contextData.cO;\n      return;\n    }\n\n    this.contextData.cO *= op < 0 ? 0 : op;\n\n    if (this.globalData.currentGlobalAlpha !== this.contextData.cO) {\n      this.canvasContext.globalAlpha = this.contextData.cO;\n      this.globalData.currentGlobalAlpha = this.contextData.cO;\n    }\n  };\n\n  CanvasRendererBase.prototype.reset = function () {\n    if (!this.renderConfig.clearCanvas) {\n      this.canvasContext.restore();\n      return;\n    }\n\n    this.contextData.reset();\n  };\n\n  CanvasRendererBase.prototype.save = function (actionFlag) {\n    if (!this.renderConfig.clearCanvas) {\n      this.canvasContext.save();\n      return;\n    }\n\n    if (actionFlag) {\n      this.canvasContext.save();\n    }\n\n    var props = this.contextData.cTr.props;\n\n    if (this.contextData._length <= this.contextData.cArrPos) {\n      this.contextData.duplicate();\n    }\n\n    var i;\n    var arr = this.contextData.saved[this.contextData.cArrPos];\n\n    for (i = 0; i < 16; i += 1) {\n      arr[i] = props[i];\n    }\n\n    this.contextData.savedOp[this.contextData.cArrPos] = this.contextData.cO;\n    this.contextData.cArrPos += 1;\n  };\n\n  CanvasRendererBase.prototype.restore = function (actionFlag) {\n    if (!this.renderConfig.clearCanvas) {\n      this.canvasContext.restore();\n      return;\n    }\n\n    if (actionFlag) {\n      this.canvasContext.restore();\n      this.globalData.blendMode = 'source-over';\n    }\n\n    this.contextData.cArrPos -= 1;\n    var popped = this.contextData.saved[this.contextData.cArrPos];\n    var i;\n    var arr = this.contextData.cTr.props;\n\n    for (i = 0; i < 16; i += 1) {\n      arr[i] = popped[i];\n    }\n\n    this.canvasContext.setTransform(popped[0], popped[1], popped[4], popped[5], popped[12], popped[13]);\n    popped = this.contextData.savedOp[this.contextData.cArrPos];\n    this.contextData.cO = popped;\n\n    if (this.globalData.currentGlobalAlpha !== popped) {\n      this.canvasContext.globalAlpha = popped;\n      this.globalData.currentGlobalAlpha = popped;\n    }\n  };\n\n  CanvasRendererBase.prototype.configAnimation = function (animData) {\n    if (this.animationItem.wrapper) {\n      this.animationItem.container = createTag('canvas');\n      var containerStyle = this.animationItem.container.style;\n      containerStyle.width = '100%';\n      containerStyle.height = '100%';\n      var origin = '0px 0px 0px';\n      containerStyle.transformOrigin = origin;\n      containerStyle.mozTransformOrigin = origin;\n      containerStyle.webkitTransformOrigin = origin;\n      containerStyle['-webkit-transform'] = origin;\n      containerStyle.contentVisibility = this.renderConfig.contentVisibility;\n      this.animationItem.wrapper.appendChild(this.animationItem.container);\n      this.canvasContext = this.animationItem.container.getContext('2d');\n\n      if (this.renderConfig.className) {\n        this.animationItem.container.setAttribute('class', this.renderConfig.className);\n      }\n\n      if (this.renderConfig.id) {\n        this.animationItem.container.setAttribute('id', this.renderConfig.id);\n      }\n    } else {\n      this.canvasContext = this.renderConfig.context;\n    }\n\n    this.data = animData;\n    this.layers = animData.layers;\n    this.transformCanvas = {\n      w: animData.w,\n      h: animData.h,\n      sx: 0,\n      sy: 0,\n      tx: 0,\n      ty: 0\n    };\n    this.setupGlobalData(animData, document.body);\n    this.globalData.canvasContext = this.canvasContext;\n    this.globalData.renderer = this;\n    this.globalData.isDashed = false;\n    this.globalData.progressiveLoad = this.renderConfig.progressiveLoad;\n    this.globalData.transformCanvas = this.transformCanvas;\n    this.elements = createSizedArray(animData.layers.length);\n    this.updateContainerSize();\n  };\n\n  CanvasRendererBase.prototype.updateContainerSize = function () {\n    this.reset();\n    var elementWidth;\n    var elementHeight;\n\n    if (this.animationItem.wrapper && this.animationItem.container) {\n      elementWidth = this.animationItem.wrapper.offsetWidth;\n      elementHeight = this.animationItem.wrapper.offsetHeight;\n      this.animationItem.container.setAttribute('width', elementWidth * this.renderConfig.dpr);\n      this.animationItem.container.setAttribute('height', elementHeight * this.renderConfig.dpr);\n    } else {\n      elementWidth = this.canvasContext.canvas.width * this.renderConfig.dpr;\n      elementHeight = this.canvasContext.canvas.height * this.renderConfig.dpr;\n    }\n\n    var elementRel;\n    var animationRel;\n\n    if (this.renderConfig.preserveAspectRatio.indexOf('meet') !== -1 || this.renderConfig.preserveAspectRatio.indexOf('slice') !== -1) {\n      var par = this.renderConfig.preserveAspectRatio.split(' ');\n      var fillType = par[1] || 'meet';\n      var pos = par[0] || 'xMidYMid';\n      var xPos = pos.substr(0, 4);\n      var yPos = pos.substr(4);\n      elementRel = elementWidth / elementHeight;\n      animationRel = this.transformCanvas.w / this.transformCanvas.h;\n\n      if (animationRel > elementRel && fillType === 'meet' || animationRel < elementRel && fillType === 'slice') {\n        this.transformCanvas.sx = elementWidth / (this.transformCanvas.w / this.renderConfig.dpr);\n        this.transformCanvas.sy = elementWidth / (this.transformCanvas.w / this.renderConfig.dpr);\n      } else {\n        this.transformCanvas.sx = elementHeight / (this.transformCanvas.h / this.renderConfig.dpr);\n        this.transformCanvas.sy = elementHeight / (this.transformCanvas.h / this.renderConfig.dpr);\n      }\n\n      if (xPos === 'xMid' && (animationRel < elementRel && fillType === 'meet' || animationRel > elementRel && fillType === 'slice')) {\n        this.transformCanvas.tx = (elementWidth - this.transformCanvas.w * (elementHeight / this.transformCanvas.h)) / 2 * this.renderConfig.dpr;\n      } else if (xPos === 'xMax' && (animationRel < elementRel && fillType === 'meet' || animationRel > elementRel && fillType === 'slice')) {\n        this.transformCanvas.tx = (elementWidth - this.transformCanvas.w * (elementHeight / this.transformCanvas.h)) * this.renderConfig.dpr;\n      } else {\n        this.transformCanvas.tx = 0;\n      }\n\n      if (yPos === 'YMid' && (animationRel > elementRel && fillType === 'meet' || animationRel < elementRel && fillType === 'slice')) {\n        this.transformCanvas.ty = (elementHeight - this.transformCanvas.h * (elementWidth / this.transformCanvas.w)) / 2 * this.renderConfig.dpr;\n      } else if (yPos === 'YMax' && (animationRel > elementRel && fillType === 'meet' || animationRel < elementRel && fillType === 'slice')) {\n        this.transformCanvas.ty = (elementHeight - this.transformCanvas.h * (elementWidth / this.transformCanvas.w)) * this.renderConfig.dpr;\n      } else {\n        this.transformCanvas.ty = 0;\n      }\n    } else if (this.renderConfig.preserveAspectRatio === 'none') {\n      this.transformCanvas.sx = elementWidth / (this.transformCanvas.w / this.renderConfig.dpr);\n      this.transformCanvas.sy = elementHeight / (this.transformCanvas.h / this.renderConfig.dpr);\n      this.transformCanvas.tx = 0;\n      this.transformCanvas.ty = 0;\n    } else {\n      this.transformCanvas.sx = this.renderConfig.dpr;\n      this.transformCanvas.sy = this.renderConfig.dpr;\n      this.transformCanvas.tx = 0;\n      this.transformCanvas.ty = 0;\n    }\n\n    this.transformCanvas.props = [this.transformCanvas.sx, 0, 0, 0, 0, this.transformCanvas.sy, 0, 0, 0, 0, 1, 0, this.transformCanvas.tx, this.transformCanvas.ty, 0, 1];\n    /* var i, len = this.elements.length;\r\n      for(i=0;i<len;i+=1){\r\n          if(this.elements[i] && this.elements[i].data.ty === 0){\r\n              this.elements[i].resize(this.globalData.transformCanvas);\r\n          }\r\n      } */\n\n    this.ctxTransform(this.transformCanvas.props);\n    this.canvasContext.beginPath();\n    this.canvasContext.rect(0, 0, this.transformCanvas.w, this.transformCanvas.h);\n    this.canvasContext.closePath();\n    this.canvasContext.clip();\n    this.renderFrame(this.renderedFrame, true);\n  };\n\n  CanvasRendererBase.prototype.destroy = function () {\n    if (this.renderConfig.clearCanvas && this.animationItem.wrapper) {\n      this.animationItem.wrapper.innerText = '';\n    }\n\n    var i;\n    var len = this.layers ? this.layers.length : 0;\n\n    for (i = len - 1; i >= 0; i -= 1) {\n      if (this.elements[i]) {\n        this.elements[i].destroy();\n      }\n    }\n\n    this.elements.length = 0;\n    this.globalData.canvasContext = null;\n    this.animationItem.container = null;\n    this.destroyed = true;\n  };\n\n  CanvasRendererBase.prototype.renderFrame = function (num, forceRender) {\n    if (this.renderedFrame === num && this.renderConfig.clearCanvas === true && !forceRender || this.destroyed || num === -1) {\n      return;\n    }\n\n    this.renderedFrame = num;\n    this.globalData.frameNum = num - this.animationItem._isFirstFrame;\n    this.globalData.frameId += 1;\n    this.globalData._mdf = !this.renderConfig.clearCanvas || forceRender;\n    this.globalData.projectInterface.currentFrame = num; // console.log('--------');\n    // console.log('NEW: ',num);\n\n    var i;\n    var len = this.layers.length;\n\n    if (!this.completeLayers) {\n      this.checkLayers(num);\n    }\n\n    for (i = 0; i < len; i += 1) {\n      if (this.completeLayers || this.elements[i]) {\n        this.elements[i].prepareFrame(num - this.layers[i].st);\n      }\n    }\n\n    if (this.globalData._mdf) {\n      if (this.renderConfig.clearCanvas === true) {\n        this.canvasContext.clearRect(0, 0, this.transformCanvas.w, this.transformCanvas.h);\n      } else {\n        this.save();\n      }\n\n      for (i = len - 1; i >= 0; i -= 1) {\n        if (this.completeLayers || this.elements[i]) {\n          this.elements[i].renderFrame();\n        }\n      }\n\n      if (this.renderConfig.clearCanvas !== true) {\n        this.restore();\n      }\n    }\n  };\n\n  CanvasRendererBase.prototype.buildItem = function (pos) {\n    var elements = this.elements;\n\n    if (elements[pos] || this.layers[pos].ty === 99) {\n      return;\n    }\n\n    var element = this.createItem(this.layers[pos], this, this.globalData);\n    elements[pos] = element;\n    element.initExpressions();\n    /* if(this.layers[pos].ty === 0){\r\n          element.resize(this.globalData.transformCanvas);\r\n      } */\n  };\n\n  CanvasRendererBase.prototype.checkPendingElements = function () {\n    while (this.pendingElements.length) {\n      var element = this.pendingElements.pop();\n      element.checkParenting();\n    }\n  };\n\n  CanvasRendererBase.prototype.hide = function () {\n    this.animationItem.container.style.display = 'none';\n  };\n\n  CanvasRendererBase.prototype.show = function () {\n    this.animationItem.container.style.display = 'block';\n  };\n\n  function CVCompElement(data, globalData, comp) {\n    this.completeLayers = false;\n    this.layers = data.layers;\n    this.pendingElements = [];\n    this.elements = createSizedArray(this.layers.length);\n    this.initElement(data, globalData, comp);\n    this.tm = data.tm ? PropertyFactory.getProp(this, data.tm, 0, globalData.frameRate, this) : {\n      _placeholder: true\n    };\n  }\n\n  extendPrototype([CanvasRendererBase, ICompElement, CVBaseElement], CVCompElement);\n\n  CVCompElement.prototype.renderInnerContent = function () {\n    var ctx = this.canvasContext;\n    ctx.beginPath();\n    ctx.moveTo(0, 0);\n    ctx.lineTo(this.data.w, 0);\n    ctx.lineTo(this.data.w, this.data.h);\n    ctx.lineTo(0, this.data.h);\n    ctx.lineTo(0, 0);\n    ctx.clip();\n    var i;\n    var len = this.layers.length;\n\n    for (i = len - 1; i >= 0; i -= 1) {\n      if (this.completeLayers || this.elements[i]) {\n        this.elements[i].renderFrame();\n      }\n    }\n  };\n\n  CVCompElement.prototype.destroy = function () {\n    var i;\n    var len = this.layers.length;\n\n    for (i = len - 1; i >= 0; i -= 1) {\n      if (this.elements[i]) {\n        this.elements[i].destroy();\n      }\n    }\n\n    this.layers = null;\n    this.elements = null;\n  };\n\n  CVCompElement.prototype.createComp = function (data) {\n    return new CVCompElement(data, this.globalData, this);\n  };\n\n  function CanvasRenderer(animationItem, config) {\n    this.animationItem = animationItem;\n    this.renderConfig = {\n      clearCanvas: config && config.clearCanvas !== undefined ? config.clearCanvas : true,\n      context: config && config.context || null,\n      progressiveLoad: config && config.progressiveLoad || false,\n      preserveAspectRatio: config && config.preserveAspectRatio || 'xMidYMid meet',\n      imagePreserveAspectRatio: config && config.imagePreserveAspectRatio || 'xMidYMid slice',\n      contentVisibility: config && config.contentVisibility || 'visible',\n      className: config && config.className || '',\n      id: config && config.id || ''\n    };\n    this.renderConfig.dpr = config && config.dpr || 1;\n\n    if (this.animationItem.wrapper) {\n      this.renderConfig.dpr = config && config.dpr || window.devicePixelRatio || 1;\n    }\n\n    this.renderedFrame = -1;\n    this.globalData = {\n      frameNum: -1,\n      _mdf: false,\n      renderConfig: this.renderConfig,\n      currentGlobalAlpha: -1\n    };\n    this.contextData = new CVContextData();\n    this.elements = [];\n    this.pendingElements = [];\n    this.transformMat = new Matrix();\n    this.completeLayers = false;\n    this.rendererType = 'canvas';\n  }\n\n  extendPrototype([CanvasRendererBase], CanvasRenderer);\n\n  CanvasRenderer.prototype.createComp = function (data) {\n    return new CVCompElement(data, this.globalData, this);\n  };\n\n  function HBaseElement() {}\n\n  HBaseElement.prototype = {\n    checkBlendMode: function checkBlendMode() {},\n    initRendererElement: function initRendererElement() {\n      this.baseElement = createTag(this.data.tg || 'div');\n\n      if (this.data.hasMask) {\n        this.svgElement = createNS('svg');\n        this.layerElement = createNS('g');\n        this.maskedElement = this.layerElement;\n        this.svgElement.appendChild(this.layerElement);\n        this.baseElement.appendChild(this.svgElement);\n      } else {\n        this.layerElement = this.baseElement;\n      }\n\n      styleDiv(this.baseElement);\n    },\n    createContainerElements: function createContainerElements() {\n      this.renderableEffectsManager = new CVEffects(this);\n      this.transformedElement = this.baseElement;\n      this.maskedElement = this.layerElement;\n\n      if (this.data.ln) {\n        this.layerElement.setAttribute('id', this.data.ln);\n      }\n\n      if (this.data.cl) {\n        this.layerElement.setAttribute('class', this.data.cl);\n      }\n\n      if (this.data.bm !== 0) {\n        this.setBlendMode();\n      }\n    },\n    renderElement: function renderElement() {\n      var transformedElementStyle = this.transformedElement ? this.transformedElement.style : {};\n\n      if (this.finalTransform._matMdf) {\n        var matrixValue = this.finalTransform.mat.toCSS();\n        transformedElementStyle.transform = matrixValue;\n        transformedElementStyle.webkitTransform = matrixValue;\n      }\n\n      if (this.finalTransform._opMdf) {\n        transformedElementStyle.opacity = this.finalTransform.mProp.o.v;\n      }\n    },\n    renderFrame: function renderFrame() {\n      // If it is exported as hidden (data.hd === true) no need to render\n      // If it is not visible no need to render\n      if (this.data.hd || this.hidden) {\n        return;\n      }\n\n      this.renderTransform();\n      this.renderRenderable();\n      this.renderElement();\n      this.renderInnerContent();\n\n      if (this._isFirstFrame) {\n        this._isFirstFrame = false;\n      }\n    },\n    destroy: function destroy() {\n      this.layerElement = null;\n      this.transformedElement = null;\n\n      if (this.matteElement) {\n        this.matteElement = null;\n      }\n\n      if (this.maskManager) {\n        this.maskManager.destroy();\n        this.maskManager = null;\n      }\n    },\n    createRenderableComponents: function createRenderableComponents() {\n      this.maskManager = new MaskElement(this.data, this, this.globalData);\n    },\n    addEffects: function addEffects() {},\n    setMatte: function setMatte() {}\n  };\n  HBaseElement.prototype.getBaseElement = SVGBaseElement.prototype.getBaseElement;\n  HBaseElement.prototype.destroyBaseElement = HBaseElement.prototype.destroy;\n  HBaseElement.prototype.buildElementParenting = BaseRenderer.prototype.buildElementParenting;\n\n  function HSolidElement(data, globalData, comp) {\n    this.initElement(data, globalData, comp);\n  }\n\n  extendPrototype([BaseElement, TransformElement, HBaseElement, HierarchyElement, FrameElement, RenderableDOMElement], HSolidElement);\n\n  HSolidElement.prototype.createContent = function () {\n    var rect;\n\n    if (this.data.hasMask) {\n      rect = createNS('rect');\n      rect.setAttribute('width', this.data.sw);\n      rect.setAttribute('height', this.data.sh);\n      rect.setAttribute('fill', this.data.sc);\n      this.svgElement.setAttribute('width', this.data.sw);\n      this.svgElement.setAttribute('height', this.data.sh);\n    } else {\n      rect = createTag('div');\n      rect.style.width = this.data.sw + 'px';\n      rect.style.height = this.data.sh + 'px';\n      rect.style.backgroundColor = this.data.sc;\n    }\n\n    this.layerElement.appendChild(rect);\n  };\n\n  function HShapeElement(data, globalData, comp) {\n    // List of drawable elements\n    this.shapes = []; // Full shape data\n\n    this.shapesData = data.shapes; // List of styles that will be applied to shapes\n\n    this.stylesList = []; // List of modifiers that will be applied to shapes\n\n    this.shapeModifiers = []; // List of items in shape tree\n\n    this.itemsData = []; // List of items in previous shape tree\n\n    this.processedElements = []; // List of animated components\n\n    this.animatedContents = [];\n    this.shapesContainer = createNS('g');\n    this.initElement(data, globalData, comp); // Moving any property that doesn't get too much access after initialization because of v8 way of handling more than 10 properties.\n    // List of elements that have been created\n\n    this.prevViewData = [];\n    this.currentBBox = {\n      x: 999999,\n      y: -999999,\n      h: 0,\n      w: 0\n    };\n  }\n\n  extendPrototype([BaseElement, TransformElement, HSolidElement, SVGShapeElement, HBaseElement, HierarchyElement, FrameElement, RenderableElement], HShapeElement);\n  HShapeElement.prototype._renderShapeFrame = HShapeElement.prototype.renderInnerContent;\n\n  HShapeElement.prototype.createContent = function () {\n    var cont;\n    this.baseElement.style.fontSize = 0;\n\n    if (this.data.hasMask) {\n      this.layerElement.appendChild(this.shapesContainer);\n      cont = this.svgElement;\n    } else {\n      cont = createNS('svg');\n      var size = this.comp.data ? this.comp.data : this.globalData.compSize;\n      cont.setAttribute('width', size.w);\n      cont.setAttribute('height', size.h);\n      cont.appendChild(this.shapesContainer);\n      this.layerElement.appendChild(cont);\n    }\n\n    this.searchShapes(this.shapesData, this.itemsData, this.prevViewData, this.shapesContainer, 0, [], true);\n    this.filterUniqueShapes();\n    this.shapeCont = cont;\n  };\n\n  HShapeElement.prototype.getTransformedPoint = function (transformers, point) {\n    var i;\n    var len = transformers.length;\n\n    for (i = 0; i < len; i += 1) {\n      point = transformers[i].mProps.v.applyToPointArray(point[0], point[1], 0);\n    }\n\n    return point;\n  };\n\n  HShapeElement.prototype.calculateShapeBoundingBox = function (item, boundingBox) {\n    var shape = item.sh.v;\n    var transformers = item.transformers;\n    var i;\n    var len = shape._length;\n    var vPoint;\n    var oPoint;\n    var nextIPoint;\n    var nextVPoint;\n\n    if (len <= 1) {\n      return;\n    }\n\n    for (i = 0; i < len - 1; i += 1) {\n      vPoint = this.getTransformedPoint(transformers, shape.v[i]);\n      oPoint = this.getTransformedPoint(transformers, shape.o[i]);\n      nextIPoint = this.getTransformedPoint(transformers, shape.i[i + 1]);\n      nextVPoint = this.getTransformedPoint(transformers, shape.v[i + 1]);\n      this.checkBounds(vPoint, oPoint, nextIPoint, nextVPoint, boundingBox);\n    }\n\n    if (shape.c) {\n      vPoint = this.getTransformedPoint(transformers, shape.v[i]);\n      oPoint = this.getTransformedPoint(transformers, shape.o[i]);\n      nextIPoint = this.getTransformedPoint(transformers, shape.i[0]);\n      nextVPoint = this.getTransformedPoint(transformers, shape.v[0]);\n      this.checkBounds(vPoint, oPoint, nextIPoint, nextVPoint, boundingBox);\n    }\n  };\n\n  HShapeElement.prototype.checkBounds = function (vPoint, oPoint, nextIPoint, nextVPoint, boundingBox) {\n    this.getBoundsOfCurve(vPoint, oPoint, nextIPoint, nextVPoint);\n    var bounds = this.shapeBoundingBox;\n    boundingBox.x = bmMin(bounds.left, boundingBox.x);\n    boundingBox.xMax = bmMax(bounds.right, boundingBox.xMax);\n    boundingBox.y = bmMin(bounds.top, boundingBox.y);\n    boundingBox.yMax = bmMax(bounds.bottom, boundingBox.yMax);\n  };\n\n  HShapeElement.prototype.shapeBoundingBox = {\n    left: 0,\n    right: 0,\n    top: 0,\n    bottom: 0\n  };\n  HShapeElement.prototype.tempBoundingBox = {\n    x: 0,\n    xMax: 0,\n    y: 0,\n    yMax: 0,\n    width: 0,\n    height: 0\n  };\n\n  HShapeElement.prototype.getBoundsOfCurve = function (p0, p1, p2, p3) {\n    var bounds = [[p0[0], p3[0]], [p0[1], p3[1]]];\n\n    for (var a, b, c, t, b2ac, t1, t2, i = 0; i < 2; ++i) {\n      // eslint-disable-line no-plusplus\n      b = 6 * p0[i] - 12 * p1[i] + 6 * p2[i];\n      a = -3 * p0[i] + 9 * p1[i] - 9 * p2[i] + 3 * p3[i];\n      c = 3 * p1[i] - 3 * p0[i];\n      b |= 0; // eslint-disable-line no-bitwise\n\n      a |= 0; // eslint-disable-line no-bitwise\n\n      c |= 0; // eslint-disable-line no-bitwise\n\n      if (a === 0 && b === 0) {//\n      } else if (a === 0) {\n        t = -c / b;\n\n        if (t > 0 && t < 1) {\n          bounds[i].push(this.calculateF(t, p0, p1, p2, p3, i));\n        }\n      } else {\n        b2ac = b * b - 4 * c * a;\n\n        if (b2ac >= 0) {\n          t1 = (-b + bmSqrt(b2ac)) / (2 * a);\n          if (t1 > 0 && t1 < 1) bounds[i].push(this.calculateF(t1, p0, p1, p2, p3, i));\n          t2 = (-b - bmSqrt(b2ac)) / (2 * a);\n          if (t2 > 0 && t2 < 1) bounds[i].push(this.calculateF(t2, p0, p1, p2, p3, i));\n        }\n      }\n    }\n\n    this.shapeBoundingBox.left = bmMin.apply(null, bounds[0]);\n    this.shapeBoundingBox.top = bmMin.apply(null, bounds[1]);\n    this.shapeBoundingBox.right = bmMax.apply(null, bounds[0]);\n    this.shapeBoundingBox.bottom = bmMax.apply(null, bounds[1]);\n  };\n\n  HShapeElement.prototype.calculateF = function (t, p0, p1, p2, p3, i) {\n    return bmPow(1 - t, 3) * p0[i] + 3 * bmPow(1 - t, 2) * t * p1[i] + 3 * (1 - t) * bmPow(t, 2) * p2[i] + bmPow(t, 3) * p3[i];\n  };\n\n  HShapeElement.prototype.calculateBoundingBox = function (itemsData, boundingBox) {\n    var i;\n    var len = itemsData.length;\n\n    for (i = 0; i < len; i += 1) {\n      if (itemsData[i] && itemsData[i].sh) {\n        this.calculateShapeBoundingBox(itemsData[i], boundingBox);\n      } else if (itemsData[i] && itemsData[i].it) {\n        this.calculateBoundingBox(itemsData[i].it, boundingBox);\n      } else if (itemsData[i] && itemsData[i].style && itemsData[i].w) {\n        this.expandStrokeBoundingBox(itemsData[i].w, boundingBox);\n      }\n    }\n  };\n\n  HShapeElement.prototype.expandStrokeBoundingBox = function (widthProperty, boundingBox) {\n    var width = 0;\n\n    if (widthProperty.keyframes) {\n      for (var i = 0; i < widthProperty.keyframes.length; i += 1) {\n        var kfw = widthProperty.keyframes[i].s;\n\n        if (kfw > width) {\n          width = kfw;\n        }\n      }\n\n      width *= widthProperty.mult;\n    } else {\n      width = widthProperty.v * widthProperty.mult;\n    }\n\n    boundingBox.x -= width;\n    boundingBox.xMax += width;\n    boundingBox.y -= width;\n    boundingBox.yMax += width;\n  };\n\n  HShapeElement.prototype.currentBoxContains = function (box) {\n    return this.currentBBox.x <= box.x && this.currentBBox.y <= box.y && this.currentBBox.width + this.currentBBox.x >= box.x + box.width && this.currentBBox.height + this.currentBBox.y >= box.y + box.height;\n  };\n\n  HShapeElement.prototype.renderInnerContent = function () {\n    this._renderShapeFrame();\n\n    if (!this.hidden && (this._isFirstFrame || this._mdf)) {\n      var tempBoundingBox = this.tempBoundingBox;\n      var max = 999999;\n      tempBoundingBox.x = max;\n      tempBoundingBox.xMax = -max;\n      tempBoundingBox.y = max;\n      tempBoundingBox.yMax = -max;\n      this.calculateBoundingBox(this.itemsData, tempBoundingBox);\n      tempBoundingBox.width = tempBoundingBox.xMax < tempBoundingBox.x ? 0 : tempBoundingBox.xMax - tempBoundingBox.x;\n      tempBoundingBox.height = tempBoundingBox.yMax < tempBoundingBox.y ? 0 : tempBoundingBox.yMax - tempBoundingBox.y; // var tempBoundingBox = this.shapeCont.getBBox();\n\n      if (this.currentBoxContains(tempBoundingBox)) {\n        return;\n      }\n\n      var changed = false;\n\n      if (this.currentBBox.w !== tempBoundingBox.width) {\n        this.currentBBox.w = tempBoundingBox.width;\n        this.shapeCont.setAttribute('width', tempBoundingBox.width);\n        changed = true;\n      }\n\n      if (this.currentBBox.h !== tempBoundingBox.height) {\n        this.currentBBox.h = tempBoundingBox.height;\n        this.shapeCont.setAttribute('height', tempBoundingBox.height);\n        changed = true;\n      }\n\n      if (changed || this.currentBBox.x !== tempBoundingBox.x || this.currentBBox.y !== tempBoundingBox.y) {\n        this.currentBBox.w = tempBoundingBox.width;\n        this.currentBBox.h = tempBoundingBox.height;\n        this.currentBBox.x = tempBoundingBox.x;\n        this.currentBBox.y = tempBoundingBox.y;\n        this.shapeCont.setAttribute('viewBox', this.currentBBox.x + ' ' + this.currentBBox.y + ' ' + this.currentBBox.w + ' ' + this.currentBBox.h);\n        var shapeStyle = this.shapeCont.style;\n        var shapeTransform = 'translate(' + this.currentBBox.x + 'px,' + this.currentBBox.y + 'px)';\n        shapeStyle.transform = shapeTransform;\n        shapeStyle.webkitTransform = shapeTransform;\n      }\n    }\n  };\n\n  function HTextElement(data, globalData, comp) {\n    this.textSpans = [];\n    this.textPaths = [];\n    this.currentBBox = {\n      x: 999999,\n      y: -999999,\n      h: 0,\n      w: 0\n    };\n    this.renderType = 'svg';\n    this.isMasked = false;\n    this.initElement(data, globalData, comp);\n  }\n\n  extendPrototype([BaseElement, TransformElement, HBaseElement, HierarchyElement, FrameElement, RenderableDOMElement, ITextElement], HTextElement);\n\n  HTextElement.prototype.createContent = function () {\n    this.isMasked = this.checkMasks();\n\n    if (this.isMasked) {\n      this.renderType = 'svg';\n      this.compW = this.comp.data.w;\n      this.compH = this.comp.data.h;\n      this.svgElement.setAttribute('width', this.compW);\n      this.svgElement.setAttribute('height', this.compH);\n      var g = createNS('g');\n      this.maskedElement.appendChild(g);\n      this.innerElem = g;\n    } else {\n      this.renderType = 'html';\n      this.innerElem = this.layerElement;\n    }\n\n    this.checkParenting();\n  };\n\n  HTextElement.prototype.buildNewText = function () {\n    var documentData = this.textProperty.currentData;\n    this.renderedLetters = createSizedArray(documentData.l ? documentData.l.length : 0);\n    var innerElemStyle = this.innerElem.style;\n    var textColor = documentData.fc ? this.buildColor(documentData.fc) : 'rgba(0,0,0,0)';\n    innerElemStyle.fill = textColor;\n    innerElemStyle.color = textColor;\n\n    if (documentData.sc) {\n      innerElemStyle.stroke = this.buildColor(documentData.sc);\n      innerElemStyle.strokeWidth = documentData.sw + 'px';\n    }\n\n    var fontData = this.globalData.fontManager.getFontByName(documentData.f);\n\n    if (!this.globalData.fontManager.chars) {\n      innerElemStyle.fontSize = documentData.finalSize + 'px';\n      innerElemStyle.lineHeight = documentData.finalSize + 'px';\n\n      if (fontData.fClass) {\n        this.innerElem.className = fontData.fClass;\n      } else {\n        innerElemStyle.fontFamily = fontData.fFamily;\n        var fWeight = documentData.fWeight;\n        var fStyle = documentData.fStyle;\n        innerElemStyle.fontStyle = fStyle;\n        innerElemStyle.fontWeight = fWeight;\n      }\n    }\n\n    var i;\n    var len;\n    var letters = documentData.l;\n    len = letters.length;\n    var tSpan;\n    var tParent;\n    var tCont;\n    var matrixHelper = this.mHelper;\n    var shapes;\n    var shapeStr = '';\n    var cnt = 0;\n\n    for (i = 0; i < len; i += 1) {\n      if (this.globalData.fontManager.chars) {\n        if (!this.textPaths[cnt]) {\n          tSpan = createNS('path');\n          tSpan.setAttribute('stroke-linecap', lineCapEnum[1]);\n          tSpan.setAttribute('stroke-linejoin', lineJoinEnum[2]);\n          tSpan.setAttribute('stroke-miterlimit', '4');\n        } else {\n          tSpan = this.textPaths[cnt];\n        }\n\n        if (!this.isMasked) {\n          if (this.textSpans[cnt]) {\n            tParent = this.textSpans[cnt];\n            tCont = tParent.children[0];\n          } else {\n            tParent = createTag('div');\n            tParent.style.lineHeight = 0;\n            tCont = createNS('svg');\n            tCont.appendChild(tSpan);\n            styleDiv(tParent);\n          }\n        }\n      } else if (!this.isMasked) {\n        if (this.textSpans[cnt]) {\n          tParent = this.textSpans[cnt];\n          tSpan = this.textPaths[cnt];\n        } else {\n          tParent = createTag('span');\n          styleDiv(tParent);\n          tSpan = createTag('span');\n          styleDiv(tSpan);\n          tParent.appendChild(tSpan);\n        }\n      } else {\n        tSpan = this.textPaths[cnt] ? this.textPaths[cnt] : createNS('text');\n      } // tSpan.setAttribute('visibility', 'hidden');\n\n\n      if (this.globalData.fontManager.chars) {\n        var charData = this.globalData.fontManager.getCharData(documentData.finalText[i], fontData.fStyle, this.globalData.fontManager.getFontByName(documentData.f).fFamily);\n        var shapeData;\n\n        if (charData) {\n          shapeData = charData.data;\n        } else {\n          shapeData = null;\n        }\n\n        matrixHelper.reset();\n\n        if (shapeData && shapeData.shapes && shapeData.shapes.length) {\n          shapes = shapeData.shapes[0].it;\n          matrixHelper.scale(documentData.finalSize / 100, documentData.finalSize / 100);\n          shapeStr = this.createPathShape(matrixHelper, shapes);\n          tSpan.setAttribute('d', shapeStr);\n        }\n\n        if (!this.isMasked) {\n          this.innerElem.appendChild(tParent);\n\n          if (shapeData && shapeData.shapes) {\n            // document.body.appendChild is needed to get exact measure of shape\n            document.body.appendChild(tCont);\n            var boundingBox = tCont.getBBox();\n            tCont.setAttribute('width', boundingBox.width + 2);\n            tCont.setAttribute('height', boundingBox.height + 2);\n            tCont.setAttribute('viewBox', boundingBox.x - 1 + ' ' + (boundingBox.y - 1) + ' ' + (boundingBox.width + 2) + ' ' + (boundingBox.height + 2));\n            var tContStyle = tCont.style;\n            var tContTranslation = 'translate(' + (boundingBox.x - 1) + 'px,' + (boundingBox.y - 1) + 'px)';\n            tContStyle.transform = tContTranslation;\n            tContStyle.webkitTransform = tContTranslation;\n            letters[i].yOffset = boundingBox.y - 1;\n          } else {\n            tCont.setAttribute('width', 1);\n            tCont.setAttribute('height', 1);\n          }\n\n          tParent.appendChild(tCont);\n        } else {\n          this.innerElem.appendChild(tSpan);\n        }\n      } else {\n        tSpan.textContent = letters[i].val;\n        tSpan.setAttributeNS('http://www.w3.org/XML/1998/namespace', 'xml:space', 'preserve');\n\n        if (!this.isMasked) {\n          this.innerElem.appendChild(tParent); //\n\n          var tStyle = tSpan.style;\n          var tSpanTranslation = 'translate3d(0,' + -documentData.finalSize / 1.2 + 'px,0)';\n          tStyle.transform = tSpanTranslation;\n          tStyle.webkitTransform = tSpanTranslation;\n        } else {\n          this.innerElem.appendChild(tSpan);\n        }\n      } //\n\n\n      if (!this.isMasked) {\n        this.textSpans[cnt] = tParent;\n      } else {\n        this.textSpans[cnt] = tSpan;\n      }\n\n      this.textSpans[cnt].style.display = 'block';\n      this.textPaths[cnt] = tSpan;\n      cnt += 1;\n    }\n\n    while (cnt < this.textSpans.length) {\n      this.textSpans[cnt].style.display = 'none';\n      cnt += 1;\n    }\n  };\n\n  HTextElement.prototype.renderInnerContent = function () {\n    var svgStyle;\n\n    if (this.data.singleShape) {\n      if (!this._isFirstFrame && !this.lettersChangedFlag) {\n        return;\n      }\n\n      if (this.isMasked && this.finalTransform._matMdf) {\n        // Todo Benchmark if using this is better than getBBox\n        this.svgElement.setAttribute('viewBox', -this.finalTransform.mProp.p.v[0] + ' ' + -this.finalTransform.mProp.p.v[1] + ' ' + this.compW + ' ' + this.compH);\n        svgStyle = this.svgElement.style;\n        var translation = 'translate(' + -this.finalTransform.mProp.p.v[0] + 'px,' + -this.finalTransform.mProp.p.v[1] + 'px)';\n        svgStyle.transform = translation;\n        svgStyle.webkitTransform = translation;\n      }\n    }\n\n    this.textAnimator.getMeasures(this.textProperty.currentData, this.lettersChangedFlag);\n\n    if (!this.lettersChangedFlag && !this.textAnimator.lettersChangedFlag) {\n      return;\n    }\n\n    var i;\n    var len;\n    var count = 0;\n    var renderedLetters = this.textAnimator.renderedLetters;\n    var letters = this.textProperty.currentData.l;\n    len = letters.length;\n    var renderedLetter;\n    var textSpan;\n    var textPath;\n\n    for (i = 0; i < len; i += 1) {\n      if (letters[i].n) {\n        count += 1;\n      } else {\n        textSpan = this.textSpans[i];\n        textPath = this.textPaths[i];\n        renderedLetter = renderedLetters[count];\n        count += 1;\n\n        if (renderedLetter._mdf.m) {\n          if (!this.isMasked) {\n            textSpan.style.webkitTransform = renderedLetter.m;\n            textSpan.style.transform = renderedLetter.m;\n          } else {\n            textSpan.setAttribute('transform', renderedLetter.m);\n          }\n        } /// /textSpan.setAttribute('opacity',renderedLetter.o);\n\n\n        textSpan.style.opacity = renderedLetter.o;\n\n        if (renderedLetter.sw && renderedLetter._mdf.sw) {\n          textPath.setAttribute('stroke-width', renderedLetter.sw);\n        }\n\n        if (renderedLetter.sc && renderedLetter._mdf.sc) {\n          textPath.setAttribute('stroke', renderedLetter.sc);\n        }\n\n        if (renderedLetter.fc && renderedLetter._mdf.fc) {\n          textPath.setAttribute('fill', renderedLetter.fc);\n          textPath.style.color = renderedLetter.fc;\n        }\n      }\n    }\n\n    if (this.innerElem.getBBox && !this.hidden && (this._isFirstFrame || this._mdf)) {\n      var boundingBox = this.innerElem.getBBox();\n\n      if (this.currentBBox.w !== boundingBox.width) {\n        this.currentBBox.w = boundingBox.width;\n        this.svgElement.setAttribute('width', boundingBox.width);\n      }\n\n      if (this.currentBBox.h !== boundingBox.height) {\n        this.currentBBox.h = boundingBox.height;\n        this.svgElement.setAttribute('height', boundingBox.height);\n      }\n\n      var margin = 1;\n\n      if (this.currentBBox.w !== boundingBox.width + margin * 2 || this.currentBBox.h !== boundingBox.height + margin * 2 || this.currentBBox.x !== boundingBox.x - margin || this.currentBBox.y !== boundingBox.y - margin) {\n        this.currentBBox.w = boundingBox.width + margin * 2;\n        this.currentBBox.h = boundingBox.height + margin * 2;\n        this.currentBBox.x = boundingBox.x - margin;\n        this.currentBBox.y = boundingBox.y - margin;\n        this.svgElement.setAttribute('viewBox', this.currentBBox.x + ' ' + this.currentBBox.y + ' ' + this.currentBBox.w + ' ' + this.currentBBox.h);\n        svgStyle = this.svgElement.style;\n        var svgTransform = 'translate(' + this.currentBBox.x + 'px,' + this.currentBBox.y + 'px)';\n        svgStyle.transform = svgTransform;\n        svgStyle.webkitTransform = svgTransform;\n      }\n    }\n  };\n\n  function HCameraElement(data, globalData, comp) {\n    this.initFrame();\n    this.initBaseData(data, globalData, comp);\n    this.initHierarchy();\n    var getProp = PropertyFactory.getProp;\n    this.pe = getProp(this, data.pe, 0, 0, this);\n\n    if (data.ks.p.s) {\n      this.px = getProp(this, data.ks.p.x, 1, 0, this);\n      this.py = getProp(this, data.ks.p.y, 1, 0, this);\n      this.pz = getProp(this, data.ks.p.z, 1, 0, this);\n    } else {\n      this.p = getProp(this, data.ks.p, 1, 0, this);\n    }\n\n    if (data.ks.a) {\n      this.a = getProp(this, data.ks.a, 1, 0, this);\n    }\n\n    if (data.ks.or.k.length && data.ks.or.k[0].to) {\n      var i;\n      var len = data.ks.or.k.length;\n\n      for (i = 0; i < len; i += 1) {\n        data.ks.or.k[i].to = null;\n        data.ks.or.k[i].ti = null;\n      }\n    }\n\n    this.or = getProp(this, data.ks.or, 1, degToRads, this);\n    this.or.sh = true;\n    this.rx = getProp(this, data.ks.rx, 0, degToRads, this);\n    this.ry = getProp(this, data.ks.ry, 0, degToRads, this);\n    this.rz = getProp(this, data.ks.rz, 0, degToRads, this);\n    this.mat = new Matrix();\n    this._prevMat = new Matrix();\n    this._isFirstFrame = true; // TODO: find a better way to make the HCamera element to be compatible with the LayerInterface and TransformInterface.\n\n    this.finalTransform = {\n      mProp: this\n    };\n  }\n\n  extendPrototype([BaseElement, FrameElement, HierarchyElement], HCameraElement);\n\n  HCameraElement.prototype.setup = function () {\n    var i;\n    var len = this.comp.threeDElements.length;\n    var comp;\n    var perspectiveStyle;\n    var containerStyle;\n\n    for (i = 0; i < len; i += 1) {\n      // [perspectiveElem,container]\n      comp = this.comp.threeDElements[i];\n\n      if (comp.type === '3d') {\n        perspectiveStyle = comp.perspectiveElem.style;\n        containerStyle = comp.container.style;\n        var perspective = this.pe.v + 'px';\n        var origin = '0px 0px 0px';\n        var matrix = 'matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)';\n        perspectiveStyle.perspective = perspective;\n        perspectiveStyle.webkitPerspective = perspective;\n        containerStyle.transformOrigin = origin;\n        containerStyle.mozTransformOrigin = origin;\n        containerStyle.webkitTransformOrigin = origin;\n        perspectiveStyle.transform = matrix;\n        perspectiveStyle.webkitTransform = matrix;\n      }\n    }\n  };\n\n  HCameraElement.prototype.createElements = function () {};\n\n  HCameraElement.prototype.hide = function () {};\n\n  HCameraElement.prototype.renderFrame = function () {\n    var _mdf = this._isFirstFrame;\n    var i;\n    var len;\n\n    if (this.hierarchy) {\n      len = this.hierarchy.length;\n\n      for (i = 0; i < len; i += 1) {\n        _mdf = this.hierarchy[i].finalTransform.mProp._mdf || _mdf;\n      }\n    }\n\n    if (_mdf || this.pe._mdf || this.p && this.p._mdf || this.px && (this.px._mdf || this.py._mdf || this.pz._mdf) || this.rx._mdf || this.ry._mdf || this.rz._mdf || this.or._mdf || this.a && this.a._mdf) {\n      this.mat.reset();\n\n      if (this.hierarchy) {\n        len = this.hierarchy.length - 1;\n\n        for (i = len; i >= 0; i -= 1) {\n          var mTransf = this.hierarchy[i].finalTransform.mProp;\n          this.mat.translate(-mTransf.p.v[0], -mTransf.p.v[1], mTransf.p.v[2]);\n          this.mat.rotateX(-mTransf.or.v[0]).rotateY(-mTransf.or.v[1]).rotateZ(mTransf.or.v[2]);\n          this.mat.rotateX(-mTransf.rx.v).rotateY(-mTransf.ry.v).rotateZ(mTransf.rz.v);\n          this.mat.scale(1 / mTransf.s.v[0], 1 / mTransf.s.v[1], 1 / mTransf.s.v[2]);\n          this.mat.translate(mTransf.a.v[0], mTransf.a.v[1], mTransf.a.v[2]);\n        }\n      }\n\n      if (this.p) {\n        this.mat.translate(-this.p.v[0], -this.p.v[1], this.p.v[2]);\n      } else {\n        this.mat.translate(-this.px.v, -this.py.v, this.pz.v);\n      }\n\n      if (this.a) {\n        var diffVector;\n\n        if (this.p) {\n          diffVector = [this.p.v[0] - this.a.v[0], this.p.v[1] - this.a.v[1], this.p.v[2] - this.a.v[2]];\n        } else {\n          diffVector = [this.px.v - this.a.v[0], this.py.v - this.a.v[1], this.pz.v - this.a.v[2]];\n        }\n\n        var mag = Math.sqrt(Math.pow(diffVector[0], 2) + Math.pow(diffVector[1], 2) + Math.pow(diffVector[2], 2)); // var lookDir = getNormalizedPoint(getDiffVector(this.a.v,this.p.v));\n\n        var lookDir = [diffVector[0] / mag, diffVector[1] / mag, diffVector[2] / mag];\n        var lookLengthOnXZ = Math.sqrt(lookDir[2] * lookDir[2] + lookDir[0] * lookDir[0]);\n        var mRotationX = Math.atan2(lookDir[1], lookLengthOnXZ);\n        var mRotationY = Math.atan2(lookDir[0], -lookDir[2]);\n        this.mat.rotateY(mRotationY).rotateX(-mRotationX);\n      }\n\n      this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v);\n      this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]);\n      this.mat.translate(this.globalData.compSize.w / 2, this.globalData.compSize.h / 2, 0);\n      this.mat.translate(0, 0, this.pe.v);\n      var hasMatrixChanged = !this._prevMat.equals(this.mat);\n\n      if ((hasMatrixChanged || this.pe._mdf) && this.comp.threeDElements) {\n        len = this.comp.threeDElements.length;\n        var comp;\n        var perspectiveStyle;\n        var containerStyle;\n\n        for (i = 0; i < len; i += 1) {\n          comp = this.comp.threeDElements[i];\n\n          if (comp.type === '3d') {\n            if (hasMatrixChanged) {\n              var matValue = this.mat.toCSS();\n              containerStyle = comp.container.style;\n              containerStyle.transform = matValue;\n              containerStyle.webkitTransform = matValue;\n            }\n\n            if (this.pe._mdf) {\n              perspectiveStyle = comp.perspectiveElem.style;\n              perspectiveStyle.perspective = this.pe.v + 'px';\n              perspectiveStyle.webkitPerspective = this.pe.v + 'px';\n            }\n          }\n        }\n\n        this.mat.clone(this._prevMat);\n      }\n    }\n\n    this._isFirstFrame = false;\n  };\n\n  HCameraElement.prototype.prepareFrame = function (num) {\n    this.prepareProperties(num, true);\n  };\n\n  HCameraElement.prototype.destroy = function () {};\n\n  HCameraElement.prototype.getBaseElement = function () {\n    return null;\n  };\n\n  function HImageElement(data, globalData, comp) {\n    this.assetData = globalData.getAssetData(data.refId);\n    this.initElement(data, globalData, comp);\n  }\n\n  extendPrototype([BaseElement, TransformElement, HBaseElement, HSolidElement, HierarchyElement, FrameElement, RenderableElement], HImageElement);\n\n  HImageElement.prototype.createContent = function () {\n    var assetPath = this.globalData.getAssetsPath(this.assetData);\n    var img = new Image();\n\n    if (this.data.hasMask) {\n      this.imageElem = createNS('image');\n      this.imageElem.setAttribute('width', this.assetData.w + 'px');\n      this.imageElem.setAttribute('height', this.assetData.h + 'px');\n      this.imageElem.setAttributeNS('http://www.w3.org/1999/xlink', 'href', assetPath);\n      this.layerElement.appendChild(this.imageElem);\n      this.baseElement.setAttribute('width', this.assetData.w);\n      this.baseElement.setAttribute('height', this.assetData.h);\n    } else {\n      this.layerElement.appendChild(img);\n    }\n\n    img.crossOrigin = 'anonymous';\n    img.src = assetPath;\n\n    if (this.data.ln) {\n      this.baseElement.setAttribute('id', this.data.ln);\n    }\n  };\n\n  function HybridRendererBase(animationItem, config) {\n    this.animationItem = animationItem;\n    this.layers = null;\n    this.renderedFrame = -1;\n    this.renderConfig = {\n      className: config && config.className || '',\n      imagePreserveAspectRatio: config && config.imagePreserveAspectRatio || 'xMidYMid slice',\n      hideOnTransparent: !(config && config.hideOnTransparent === false),\n      filterSize: {\n        width: config && config.filterSize && config.filterSize.width || '400%',\n        height: config && config.filterSize && config.filterSize.height || '400%',\n        x: config && config.filterSize && config.filterSize.x || '-100%',\n        y: config && config.filterSize && config.filterSize.y || '-100%'\n      }\n    };\n    this.globalData = {\n      _mdf: false,\n      frameNum: -1,\n      renderConfig: this.renderConfig\n    };\n    this.pendingElements = [];\n    this.elements = [];\n    this.threeDElements = [];\n    this.destroyed = false;\n    this.camera = null;\n    this.supports3d = true;\n    this.rendererType = 'html';\n  }\n\n  extendPrototype([BaseRenderer], HybridRendererBase);\n  HybridRendererBase.prototype.buildItem = SVGRenderer.prototype.buildItem;\n\n  HybridRendererBase.prototype.checkPendingElements = function () {\n    while (this.pendingElements.length) {\n      var element = this.pendingElements.pop();\n      element.checkParenting();\n    }\n  };\n\n  HybridRendererBase.prototype.appendElementInPos = function (element, pos) {\n    var newDOMElement = element.getBaseElement();\n\n    if (!newDOMElement) {\n      return;\n    }\n\n    var layer = this.layers[pos];\n\n    if (!layer.ddd || !this.supports3d) {\n      if (this.threeDElements) {\n        this.addTo3dContainer(newDOMElement, pos);\n      } else {\n        var i = 0;\n        var nextDOMElement;\n        var nextLayer;\n        var tmpDOMElement;\n\n        while (i < pos) {\n          if (this.elements[i] && this.elements[i] !== true && this.elements[i].getBaseElement) {\n            nextLayer = this.elements[i];\n            tmpDOMElement = this.layers[i].ddd ? this.getThreeDContainerByPos(i) : nextLayer.getBaseElement();\n            nextDOMElement = tmpDOMElement || nextDOMElement;\n          }\n\n          i += 1;\n        }\n\n        if (nextDOMElement) {\n          if (!layer.ddd || !this.supports3d) {\n            this.layerElement.insertBefore(newDOMElement, nextDOMElement);\n          }\n        } else if (!layer.ddd || !this.supports3d) {\n          this.layerElement.appendChild(newDOMElement);\n        }\n      }\n    } else {\n      this.addTo3dContainer(newDOMElement, pos);\n    }\n  };\n\n  HybridRendererBase.prototype.createShape = function (data) {\n    if (!this.supports3d) {\n      return new SVGShapeElement(data, this.globalData, this);\n    }\n\n    return new HShapeElement(data, this.globalData, this);\n  };\n\n  HybridRendererBase.prototype.createText = function (data) {\n    if (!this.supports3d) {\n      return new SVGTextLottieElement(data, this.globalData, this);\n    }\n\n    return new HTextElement(data, this.globalData, this);\n  };\n\n  HybridRendererBase.prototype.createCamera = function (data) {\n    this.camera = new HCameraElement(data, this.globalData, this);\n    return this.camera;\n  };\n\n  HybridRendererBase.prototype.createImage = function (data) {\n    if (!this.supports3d) {\n      return new IImageElement(data, this.globalData, this);\n    }\n\n    return new HImageElement(data, this.globalData, this);\n  };\n\n  HybridRendererBase.prototype.createSolid = function (data) {\n    if (!this.supports3d) {\n      return new ISolidElement(data, this.globalData, this);\n    }\n\n    return new HSolidElement(data, this.globalData, this);\n  };\n\n  HybridRendererBase.prototype.createNull = SVGRenderer.prototype.createNull;\n\n  HybridRendererBase.prototype.getThreeDContainerByPos = function (pos) {\n    var i = 0;\n    var len = this.threeDElements.length;\n\n    while (i < len) {\n      if (this.threeDElements[i].startPos <= pos && this.threeDElements[i].endPos >= pos) {\n        return this.threeDElements[i].perspectiveElem;\n      }\n\n      i += 1;\n    }\n\n    return null;\n  };\n\n  HybridRendererBase.prototype.createThreeDContainer = function (pos, type) {\n    var perspectiveElem = createTag('div');\n    var style;\n    var containerStyle;\n    styleDiv(perspectiveElem);\n    var container = createTag('div');\n    styleDiv(container);\n\n    if (type === '3d') {\n      style = perspectiveElem.style;\n      style.width = this.globalData.compSize.w + 'px';\n      style.height = this.globalData.compSize.h + 'px';\n      var center = '50% 50%';\n      style.webkitTransformOrigin = center;\n      style.mozTransformOrigin = center;\n      style.transformOrigin = center;\n      containerStyle = container.style;\n      var matrix = 'matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)';\n      containerStyle.transform = matrix;\n      containerStyle.webkitTransform = matrix;\n    }\n\n    perspectiveElem.appendChild(container); // this.resizerElem.appendChild(perspectiveElem);\n\n    var threeDContainerData = {\n      container: container,\n      perspectiveElem: perspectiveElem,\n      startPos: pos,\n      endPos: pos,\n      type: type\n    };\n    this.threeDElements.push(threeDContainerData);\n    return threeDContainerData;\n  };\n\n  HybridRendererBase.prototype.build3dContainers = function () {\n    var i;\n    var len = this.layers.length;\n    var lastThreeDContainerData;\n    var currentContainer = '';\n\n    for (i = 0; i < len; i += 1) {\n      if (this.layers[i].ddd && this.layers[i].ty !== 3) {\n        if (currentContainer !== '3d') {\n          currentContainer = '3d';\n          lastThreeDContainerData = this.createThreeDContainer(i, '3d');\n        }\n\n        lastThreeDContainerData.endPos = Math.max(lastThreeDContainerData.endPos, i);\n      } else {\n        if (currentContainer !== '2d') {\n          currentContainer = '2d';\n          lastThreeDContainerData = this.createThreeDContainer(i, '2d');\n        }\n\n        lastThreeDContainerData.endPos = Math.max(lastThreeDContainerData.endPos, i);\n      }\n    }\n\n    len = this.threeDElements.length;\n\n    for (i = len - 1; i >= 0; i -= 1) {\n      this.resizerElem.appendChild(this.threeDElements[i].perspectiveElem);\n    }\n  };\n\n  HybridRendererBase.prototype.addTo3dContainer = function (elem, pos) {\n    var i = 0;\n    var len = this.threeDElements.length;\n\n    while (i < len) {\n      if (pos <= this.threeDElements[i].endPos) {\n        var j = this.threeDElements[i].startPos;\n        var nextElement;\n\n        while (j < pos) {\n          if (this.elements[j] && this.elements[j].getBaseElement) {\n            nextElement = this.elements[j].getBaseElement();\n          }\n\n          j += 1;\n        }\n\n        if (nextElement) {\n          this.threeDElements[i].container.insertBefore(elem, nextElement);\n        } else {\n          this.threeDElements[i].container.appendChild(elem);\n        }\n\n        break;\n      }\n\n      i += 1;\n    }\n  };\n\n  HybridRendererBase.prototype.configAnimation = function (animData) {\n    var resizerElem = createTag('div');\n    var wrapper = this.animationItem.wrapper;\n    var style = resizerElem.style;\n    style.width = animData.w + 'px';\n    style.height = animData.h + 'px';\n    this.resizerElem = resizerElem;\n    styleDiv(resizerElem);\n    style.transformStyle = 'flat';\n    style.mozTransformStyle = 'flat';\n    style.webkitTransformStyle = 'flat';\n\n    if (this.renderConfig.className) {\n      resizerElem.setAttribute('class', this.renderConfig.className);\n    }\n\n    wrapper.appendChild(resizerElem);\n    style.overflow = 'hidden';\n    var svg = createNS('svg');\n    svg.setAttribute('width', '1');\n    svg.setAttribute('height', '1');\n    styleDiv(svg);\n    this.resizerElem.appendChild(svg);\n    var defs = createNS('defs');\n    svg.appendChild(defs);\n    this.data = animData; // Mask animation\n\n    this.setupGlobalData(animData, svg);\n    this.globalData.defs = defs;\n    this.layers = animData.layers;\n    this.layerElement = this.resizerElem;\n    this.build3dContainers();\n    this.updateContainerSize();\n  };\n\n  HybridRendererBase.prototype.destroy = function () {\n    if (this.animationItem.wrapper) {\n      this.animationItem.wrapper.innerText = '';\n    }\n\n    this.animationItem.container = null;\n    this.globalData.defs = null;\n    var i;\n    var len = this.layers ? this.layers.length : 0;\n\n    for (i = 0; i < len; i += 1) {\n      this.elements[i].destroy();\n    }\n\n    this.elements.length = 0;\n    this.destroyed = true;\n    this.animationItem = null;\n  };\n\n  HybridRendererBase.prototype.updateContainerSize = function () {\n    var elementWidth = this.animationItem.wrapper.offsetWidth;\n    var elementHeight = this.animationItem.wrapper.offsetHeight;\n    var elementRel = elementWidth / elementHeight;\n    var animationRel = this.globalData.compSize.w / this.globalData.compSize.h;\n    var sx;\n    var sy;\n    var tx;\n    var ty;\n\n    if (animationRel > elementRel) {\n      sx = elementWidth / this.globalData.compSize.w;\n      sy = elementWidth / this.globalData.compSize.w;\n      tx = 0;\n      ty = (elementHeight - this.globalData.compSize.h * (elementWidth / this.globalData.compSize.w)) / 2;\n    } else {\n      sx = elementHeight / this.globalData.compSize.h;\n      sy = elementHeight / this.globalData.compSize.h;\n      tx = (elementWidth - this.globalData.compSize.w * (elementHeight / this.globalData.compSize.h)) / 2;\n      ty = 0;\n    }\n\n    var style = this.resizerElem.style;\n    style.webkitTransform = 'matrix3d(' + sx + ',0,0,0,0,' + sy + ',0,0,0,0,1,0,' + tx + ',' + ty + ',0,1)';\n    style.transform = style.webkitTransform;\n  };\n\n  HybridRendererBase.prototype.renderFrame = SVGRenderer.prototype.renderFrame;\n\n  HybridRendererBase.prototype.hide = function () {\n    this.resizerElem.style.display = 'none';\n  };\n\n  HybridRendererBase.prototype.show = function () {\n    this.resizerElem.style.display = 'block';\n  };\n\n  HybridRendererBase.prototype.initItems = function () {\n    this.buildAllItems();\n\n    if (this.camera) {\n      this.camera.setup();\n    } else {\n      var cWidth = this.globalData.compSize.w;\n      var cHeight = this.globalData.compSize.h;\n      var i;\n      var len = this.threeDElements.length;\n\n      for (i = 0; i < len; i += 1) {\n        var style = this.threeDElements[i].perspectiveElem.style;\n        style.webkitPerspective = Math.sqrt(Math.pow(cWidth, 2) + Math.pow(cHeight, 2)) + 'px';\n        style.perspective = style.webkitPerspective;\n      }\n    }\n  };\n\n  HybridRendererBase.prototype.searchExtraCompositions = function (assets) {\n    var i;\n    var len = assets.length;\n    var floatingContainer = createTag('div');\n\n    for (i = 0; i < len; i += 1) {\n      if (assets[i].xt) {\n        var comp = this.createComp(assets[i], floatingContainer, this.globalData.comp, null);\n        comp.initExpressions();\n        this.globalData.projectInterface.registerComposition(comp);\n      }\n    }\n  };\n\n  function HCompElement(data, globalData, comp) {\n    this.layers = data.layers;\n    this.supports3d = !data.hasMask;\n    this.completeLayers = false;\n    this.pendingElements = [];\n    this.elements = this.layers ? createSizedArray(this.layers.length) : [];\n    this.initElement(data, globalData, comp);\n    this.tm = data.tm ? PropertyFactory.getProp(this, data.tm, 0, globalData.frameRate, this) : {\n      _placeholder: true\n    };\n  }\n\n  extendPrototype([HybridRendererBase, ICompElement, HBaseElement], HCompElement);\n  HCompElement.prototype._createBaseContainerElements = HCompElement.prototype.createContainerElements;\n\n  HCompElement.prototype.createContainerElements = function () {\n    this._createBaseContainerElements(); // divElement.style.clip = 'rect(0px, '+this.data.w+'px, '+this.data.h+'px, 0px)';\n\n\n    if (this.data.hasMask) {\n      this.svgElement.setAttribute('width', this.data.w);\n      this.svgElement.setAttribute('height', this.data.h);\n      this.transformedElement = this.baseElement;\n    } else {\n      this.transformedElement = this.layerElement;\n    }\n  };\n\n  HCompElement.prototype.addTo3dContainer = function (elem, pos) {\n    var j = 0;\n    var nextElement;\n\n    while (j < pos) {\n      if (this.elements[j] && this.elements[j].getBaseElement) {\n        nextElement = this.elements[j].getBaseElement();\n      }\n\n      j += 1;\n    }\n\n    if (nextElement) {\n      this.layerElement.insertBefore(elem, nextElement);\n    } else {\n      this.layerElement.appendChild(elem);\n    }\n  };\n\n  HCompElement.prototype.createComp = function (data) {\n    if (!this.supports3d) {\n      return new SVGCompElement(data, this.globalData, this);\n    }\n\n    return new HCompElement(data, this.globalData, this);\n  };\n\n  function HybridRenderer(animationItem, config) {\n    this.animationItem = animationItem;\n    this.layers = null;\n    this.renderedFrame = -1;\n    this.renderConfig = {\n      className: config && config.className || '',\n      imagePreserveAspectRatio: config && config.imagePreserveAspectRatio || 'xMidYMid slice',\n      hideOnTransparent: !(config && config.hideOnTransparent === false),\n      filterSize: {\n        width: config && config.filterSize && config.filterSize.width || '400%',\n        height: config && config.filterSize && config.filterSize.height || '400%',\n        x: config && config.filterSize && config.filterSize.x || '-100%',\n        y: config && config.filterSize && config.filterSize.y || '-100%'\n      }\n    };\n    this.globalData = {\n      _mdf: false,\n      frameNum: -1,\n      renderConfig: this.renderConfig\n    };\n    this.pendingElements = [];\n    this.elements = [];\n    this.threeDElements = [];\n    this.destroyed = false;\n    this.camera = null;\n    this.supports3d = true;\n    this.rendererType = 'html';\n  }\n\n  extendPrototype([HybridRendererBase], HybridRenderer);\n\n  HybridRenderer.prototype.createComp = function (data) {\n    if (!this.supports3d) {\n      return new SVGCompElement(data, this.globalData, this);\n    }\n\n    return new HCompElement(data, this.globalData, this);\n  };\n\n  var Expressions = function () {\n    var ob = {};\n    ob.initExpressions = initExpressions;\n\n    function initExpressions(animation) {\n      var stackCount = 0;\n      var registers = [];\n\n      function pushExpression() {\n        stackCount += 1;\n      }\n\n      function popExpression() {\n        stackCount -= 1;\n\n        if (stackCount === 0) {\n          releaseInstances();\n        }\n      }\n\n      function registerExpressionProperty(expression) {\n        if (registers.indexOf(expression) === -1) {\n          registers.push(expression);\n        }\n      }\n\n      function releaseInstances() {\n        var i;\n        var len = registers.length;\n\n        for (i = 0; i < len; i += 1) {\n          registers[i].release();\n        }\n\n        registers.length = 0;\n      }\n\n      animation.renderer.compInterface = CompExpressionInterface(animation.renderer);\n      animation.renderer.globalData.projectInterface.registerComposition(animation.renderer);\n      animation.renderer.globalData.pushExpression = pushExpression;\n      animation.renderer.globalData.popExpression = popExpression;\n      animation.renderer.globalData.registerExpressionProperty = registerExpressionProperty;\n    }\n\n    return ob;\n  }();\n\n  function _typeof$1(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof$1 = function _typeof(obj) { return typeof obj; }; } else { _typeof$1 = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof$1(obj); }\n\n  /* eslint-disable */\n\n  /*\r\n   Copyright 2014 David Bau.\r\n\r\n   Permission is hereby granted, free of charge, to any person obtaining\r\n   a copy of this software and associated documentation files (the\r\n   \"Software\"), to deal in the Software without restriction, including\r\n   without limitation the rights to use, copy, modify, merge, publish,\r\n   distribute, sublicense, and/or sell copies of the Software, and to\r\n   permit persons to whom the Software is furnished to do so, subject to\r\n   the following conditions:\r\n\r\n   The above copyright notice and this permission notice shall be\r\n   included in all copies or substantial portions of the Software.\r\n\r\n   THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\r\n   EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\r\n   MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.\r\n   IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY\r\n   CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT,\r\n   TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE\r\n   SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\r\n\r\n   */\n  function seedRandom(pool, math) {\n    //\n    // The following constants are related to IEEE 754 limits.\n    //\n    var global = this,\n        width = 256,\n        // each RC4 output is 0 <= x < 256\n    chunks = 6,\n        // at least six RC4 outputs for each double\n    digits = 52,\n        // there are 52 significant digits in a double\n    rngname = 'random',\n        // rngname: name for Math.random and Math.seedrandom\n    startdenom = math.pow(width, chunks),\n        significance = math.pow(2, digits),\n        overflow = significance * 2,\n        mask = width - 1,\n        nodecrypto; // node.js crypto module, initialized at the bottom.\n    //\n    // seedrandom()\n    // This is the seedrandom function described above.\n    //\n\n    function seedrandom(seed, options, callback) {\n      var key = [];\n      options = options === true ? {\n        entropy: true\n      } : options || {}; // Flatten the seed string or build one from local entropy if needed.\n\n      var shortseed = mixkey(flatten(options.entropy ? [seed, tostring(pool)] : seed === null ? autoseed() : seed, 3), key); // Use the seed to initialize an ARC4 generator.\n\n      var arc4 = new ARC4(key); // This function returns a random double in [0, 1) that contains\n      // randomness in every bit of the mantissa of the IEEE 754 value.\n\n      var prng = function prng() {\n        var n = arc4.g(chunks),\n            // Start with a numerator n < 2 ^ 48\n        d = startdenom,\n            //   and denominator d = 2 ^ 48.\n        x = 0; //   and no 'extra last byte'.\n\n        while (n < significance) {\n          // Fill up all significant digits by\n          n = (n + x) * width; //   shifting numerator and\n\n          d *= width; //   denominator and generating a\n\n          x = arc4.g(1); //   new least-significant-byte.\n        }\n\n        while (n >= overflow) {\n          // To avoid rounding up, before adding\n          n /= 2; //   last byte, shift everything\n\n          d /= 2; //   right using integer math until\n\n          x >>>= 1; //   we have exactly the desired bits.\n        }\n\n        return (n + x) / d; // Form the number within [0, 1).\n      };\n\n      prng.int32 = function () {\n        return arc4.g(4) | 0;\n      };\n\n      prng.quick = function () {\n        return arc4.g(4) / 0x100000000;\n      };\n\n      prng[\"double\"] = prng; // Mix the randomness into accumulated entropy.\n\n      mixkey(tostring(arc4.S), pool); // Calling convention: what to return as a function of prng, seed, is_math.\n\n      return (options.pass || callback || function (prng, seed, is_math_call, state) {\n        if (state) {\n          // Load the arc4 state from the given state if it has an S array.\n          if (state.S) {\n            copy(state, arc4);\n          } // Only provide the .state method if requested via options.state.\n\n\n          prng.state = function () {\n            return copy(arc4, {});\n          };\n        } // If called as a method of Math (Math.seedrandom()), mutate\n        // Math.random because that is how seedrandom.js has worked since v1.0.\n\n\n        if (is_math_call) {\n          math[rngname] = prng;\n          return seed;\n        } // Otherwise, it is a newer calling convention, so return the\n        // prng directly.\n        else return prng;\n      })(prng, shortseed, 'global' in options ? options.global : this == math, options.state);\n    }\n\n    math['seed' + rngname] = seedrandom; //\n    // ARC4\n    //\n    // An ARC4 implementation.  The constructor takes a key in the form of\n    // an array of at most (width) integers that should be 0 <= x < (width).\n    //\n    // The g(count) method returns a pseudorandom integer that concatenates\n    // the next (count) outputs from ARC4.  Its return value is a number x\n    // that is in the range 0 <= x < (width ^ count).\n    //\n\n    function ARC4(key) {\n      var t,\n          keylen = key.length,\n          me = this,\n          i = 0,\n          j = me.i = me.j = 0,\n          s = me.S = []; // The empty key [] is treated as [0].\n\n      if (!keylen) {\n        key = [keylen++];\n      } // Set up S using the standard key scheduling algorithm.\n\n\n      while (i < width) {\n        s[i] = i++;\n      }\n\n      for (i = 0; i < width; i++) {\n        s[i] = s[j = mask & j + key[i % keylen] + (t = s[i])];\n        s[j] = t;\n      } // The \"g\" method returns the next (count) outputs as one number.\n\n\n      me.g = function (count) {\n        // Using instance members instead of closure state nearly doubles speed.\n        var t,\n            r = 0,\n            i = me.i,\n            j = me.j,\n            s = me.S;\n\n        while (count--) {\n          t = s[i = mask & i + 1];\n          r = r * width + s[mask & (s[i] = s[j = mask & j + t]) + (s[j] = t)];\n        }\n\n        me.i = i;\n        me.j = j;\n        return r; // For robust unpredictability, the function call below automatically\n        // discards an initial batch of values.  This is called RC4-drop[256].\n        // See http://google.com/search?q=rsa+fluhrer+response&btnI\n      };\n    } //\n    // copy()\n    // Copies internal state of ARC4 to or from a plain object.\n    //\n\n\n    function copy(f, t) {\n      t.i = f.i;\n      t.j = f.j;\n      t.S = f.S.slice();\n      return t;\n    } //\n    // flatten()\n    // Converts an object tree to nested arrays of strings.\n    //\n\n\n    function flatten(obj, depth) {\n      var result = [],\n          typ = _typeof$1(obj),\n          prop;\n\n      if (depth && typ == 'object') {\n        for (prop in obj) {\n          try {\n            result.push(flatten(obj[prop], depth - 1));\n          } catch (e) {}\n        }\n      }\n\n      return result.length ? result : typ == 'string' ? obj : obj + '\\0';\n    } //\n    // mixkey()\n    // Mixes a string seed into a key that is an array of integers, and\n    // returns a shortened string seed that is equivalent to the result key.\n    //\n\n\n    function mixkey(seed, key) {\n      var stringseed = seed + '',\n          smear,\n          j = 0;\n\n      while (j < stringseed.length) {\n        key[mask & j] = mask & (smear ^= key[mask & j] * 19) + stringseed.charCodeAt(j++);\n      }\n\n      return tostring(key);\n    } //\n    // autoseed()\n    // Returns an object for autoseeding, using window.crypto and Node crypto\n    // module if available.\n    //\n\n\n    function autoseed() {\n      try {\n        if (nodecrypto) {\n          return tostring(nodecrypto.randomBytes(width));\n        }\n\n        var out = new Uint8Array(width);\n        (global.crypto || global.msCrypto).getRandomValues(out);\n        return tostring(out);\n      } catch (e) {\n        var browser = global.navigator,\n            plugins = browser && browser.plugins;\n        return [+new Date(), global, plugins, global.screen, tostring(pool)];\n      }\n    } //\n    // tostring()\n    // Converts an array of charcodes to a string\n    //\n\n\n    function tostring(a) {\n      return String.fromCharCode.apply(0, a);\n    } //\n    // When seedrandom.js is loaded, we immediately mix a few bits\n    // from the built-in RNG into the entropy pool.  Because we do\n    // not want to interfere with deterministic PRNG state later,\n    // seedrandom will not call math.random on its own again after\n    // initialization.\n    //\n\n\n    mixkey(math.random(), pool); //\n    // Nodejs and AMD support: export the implementation as a module using\n    // either convention.\n    //\n    // End anonymous scope, and pass initial values.\n  }\n\n  ;\n\n  function initialize$2(BMMath) {\n    seedRandom([], BMMath);\n  }\n\n  var propTypes = {\n    SHAPE: 'shape'\n  };\n\n  function _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n  var ExpressionManager = function () {\n    'use strict';\n\n    var ob = {};\n    var Math = BMMath;\n    var window = null;\n    var document = null;\n    var XMLHttpRequest = null;\n    var fetch = null;\n    var frames = null;\n    initialize$2(BMMath);\n\n    function $bm_isInstanceOfArray(arr) {\n      return arr.constructor === Array || arr.constructor === Float32Array;\n    }\n\n    function isNumerable(tOfV, v) {\n      return tOfV === 'number' || tOfV === 'boolean' || tOfV === 'string' || v instanceof Number;\n    }\n\n    function $bm_neg(a) {\n      var tOfA = _typeof(a);\n\n      if (tOfA === 'number' || tOfA === 'boolean' || a instanceof Number) {\n        return -a;\n      }\n\n      if ($bm_isInstanceOfArray(a)) {\n        var i;\n        var lenA = a.length;\n        var retArr = [];\n\n        for (i = 0; i < lenA; i += 1) {\n          retArr[i] = -a[i];\n        }\n\n        return retArr;\n      }\n\n      if (a.propType) {\n        return a.v;\n      }\n\n      return -a;\n    }\n\n    var easeInBez = BezierFactory.getBezierEasing(0.333, 0, 0.833, 0.833, 'easeIn').get;\n    var easeOutBez = BezierFactory.getBezierEasing(0.167, 0.167, 0.667, 1, 'easeOut').get;\n    var easeInOutBez = BezierFactory.getBezierEasing(0.33, 0, 0.667, 1, 'easeInOut').get;\n\n    function sum(a, b) {\n      var tOfA = _typeof(a);\n\n      var tOfB = _typeof(b);\n\n      if (tOfA === 'string' || tOfB === 'string') {\n        return a + b;\n      }\n\n      if (isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\n        return a + b;\n      }\n\n      if ($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)) {\n        a = a.slice(0);\n        a[0] += b;\n        return a;\n      }\n\n      if (isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)) {\n        b = b.slice(0);\n        b[0] = a + b[0];\n        return b;\n      }\n\n      if ($bm_isInstanceOfArray(a) && $bm_isInstanceOfArray(b)) {\n        var i = 0;\n        var lenA = a.length;\n        var lenB = b.length;\n        var retArr = [];\n\n        while (i < lenA || i < lenB) {\n          if ((typeof a[i] === 'number' || a[i] instanceof Number) && (typeof b[i] === 'number' || b[i] instanceof Number)) {\n            retArr[i] = a[i] + b[i];\n          } else {\n            retArr[i] = b[i] === undefined ? a[i] : a[i] || b[i];\n          }\n\n          i += 1;\n        }\n\n        return retArr;\n      }\n\n      return 0;\n    }\n\n    var add = sum;\n\n    function sub(a, b) {\n      var tOfA = _typeof(a);\n\n      var tOfB = _typeof(b);\n\n      if (isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\n        if (tOfA === 'string') {\n          a = parseInt(a, 10);\n        }\n\n        if (tOfB === 'string') {\n          b = parseInt(b, 10);\n        }\n\n        return a - b;\n      }\n\n      if ($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)) {\n        a = a.slice(0);\n        a[0] -= b;\n        return a;\n      }\n\n      if (isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)) {\n        b = b.slice(0);\n        b[0] = a - b[0];\n        return b;\n      }\n\n      if ($bm_isInstanceOfArray(a) && $bm_isInstanceOfArray(b)) {\n        var i = 0;\n        var lenA = a.length;\n        var lenB = b.length;\n        var retArr = [];\n\n        while (i < lenA || i < lenB) {\n          if ((typeof a[i] === 'number' || a[i] instanceof Number) && (typeof b[i] === 'number' || b[i] instanceof Number)) {\n            retArr[i] = a[i] - b[i];\n          } else {\n            retArr[i] = b[i] === undefined ? a[i] : a[i] || b[i];\n          }\n\n          i += 1;\n        }\n\n        return retArr;\n      }\n\n      return 0;\n    }\n\n    function mul(a, b) {\n      var tOfA = _typeof(a);\n\n      var tOfB = _typeof(b);\n\n      var arr;\n\n      if (isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\n        return a * b;\n      }\n\n      var i;\n      var len;\n\n      if ($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)) {\n        len = a.length;\n        arr = createTypedArray('float32', len);\n\n        for (i = 0; i < len; i += 1) {\n          arr[i] = a[i] * b;\n        }\n\n        return arr;\n      }\n\n      if (isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)) {\n        len = b.length;\n        arr = createTypedArray('float32', len);\n\n        for (i = 0; i < len; i += 1) {\n          arr[i] = a * b[i];\n        }\n\n        return arr;\n      }\n\n      return 0;\n    }\n\n    function div(a, b) {\n      var tOfA = _typeof(a);\n\n      var tOfB = _typeof(b);\n\n      var arr;\n\n      if (isNumerable(tOfA, a) && isNumerable(tOfB, b)) {\n        return a / b;\n      }\n\n      var i;\n      var len;\n\n      if ($bm_isInstanceOfArray(a) && isNumerable(tOfB, b)) {\n        len = a.length;\n        arr = createTypedArray('float32', len);\n\n        for (i = 0; i < len; i += 1) {\n          arr[i] = a[i] / b;\n        }\n\n        return arr;\n      }\n\n      if (isNumerable(tOfA, a) && $bm_isInstanceOfArray(b)) {\n        len = b.length;\n        arr = createTypedArray('float32', len);\n\n        for (i = 0; i < len; i += 1) {\n          arr[i] = a / b[i];\n        }\n\n        return arr;\n      }\n\n      return 0;\n    }\n\n    function mod(a, b) {\n      if (typeof a === 'string') {\n        a = parseInt(a, 10);\n      }\n\n      if (typeof b === 'string') {\n        b = parseInt(b, 10);\n      }\n\n      return a % b;\n    }\n\n    var $bm_sum = sum;\n    var $bm_sub = sub;\n    var $bm_mul = mul;\n    var $bm_div = div;\n    var $bm_mod = mod;\n\n    function clamp(num, min, max) {\n      if (min > max) {\n        var mm = max;\n        max = min;\n        min = mm;\n      }\n\n      return Math.min(Math.max(num, min), max);\n    }\n\n    function radiansToDegrees(val) {\n      return val / degToRads;\n    }\n\n    var radians_to_degrees = radiansToDegrees;\n\n    function degreesToRadians(val) {\n      return val * degToRads;\n    }\n\n    var degrees_to_radians = radiansToDegrees;\n    var helperLengthArray = [0, 0, 0, 0, 0, 0];\n\n    function length(arr1, arr2) {\n      if (typeof arr1 === 'number' || arr1 instanceof Number) {\n        arr2 = arr2 || 0;\n        return Math.abs(arr1 - arr2);\n      }\n\n      if (!arr2) {\n        arr2 = helperLengthArray;\n      }\n\n      var i;\n      var len = Math.min(arr1.length, arr2.length);\n      var addedLength = 0;\n\n      for (i = 0; i < len; i += 1) {\n        addedLength += Math.pow(arr2[i] - arr1[i], 2);\n      }\n\n      return Math.sqrt(addedLength);\n    }\n\n    function normalize(vec) {\n      return div(vec, length(vec));\n    }\n\n    function rgbToHsl(val) {\n      var r = val[0];\n      var g = val[1];\n      var b = val[2];\n      var max = Math.max(r, g, b);\n      var min = Math.min(r, g, b);\n      var h;\n      var s;\n      var l = (max + min) / 2;\n\n      if (max === min) {\n        h = 0; // achromatic\n\n        s = 0; // achromatic\n      } else {\n        var d = max - min;\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\n\n        switch (max) {\n          case r:\n            h = (g - b) / d + (g < b ? 6 : 0);\n            break;\n\n          case g:\n            h = (b - r) / d + 2;\n            break;\n\n          case b:\n            h = (r - g) / d + 4;\n            break;\n\n          default:\n            break;\n        }\n\n        h /= 6;\n      }\n\n      return [h, s, l, val[3]];\n    }\n\n    function hue2rgb(p, q, t) {\n      if (t < 0) t += 1;\n      if (t > 1) t -= 1;\n      if (t < 1 / 6) return p + (q - p) * 6 * t;\n      if (t < 1 / 2) return q;\n      if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6;\n      return p;\n    }\n\n    function hslToRgb(val) {\n      var h = val[0];\n      var s = val[1];\n      var l = val[2];\n      var r;\n      var g;\n      var b;\n\n      if (s === 0) {\n        r = l; // achromatic\n\n        b = l; // achromatic\n\n        g = l; // achromatic\n      } else {\n        var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n        var p = 2 * l - q;\n        r = hue2rgb(p, q, h + 1 / 3);\n        g = hue2rgb(p, q, h);\n        b = hue2rgb(p, q, h - 1 / 3);\n      }\n\n      return [r, g, b, val[3]];\n    }\n\n    function linear(t, tMin, tMax, value1, value2) {\n      if (value1 === undefined || value2 === undefined) {\n        value1 = tMin;\n        value2 = tMax;\n        tMin = 0;\n        tMax = 1;\n      }\n\n      if (tMax < tMin) {\n        var _tMin = tMax;\n        tMax = tMin;\n        tMin = _tMin;\n      }\n\n      if (t <= tMin) {\n        return value1;\n      }\n\n      if (t >= tMax) {\n        return value2;\n      }\n\n      var perc = tMax === tMin ? 0 : (t - tMin) / (tMax - tMin);\n\n      if (!value1.length) {\n        return value1 + (value2 - value1) * perc;\n      }\n\n      var i;\n      var len = value1.length;\n      var arr = createTypedArray('float32', len);\n\n      for (i = 0; i < len; i += 1) {\n        arr[i] = value1[i] + (value2[i] - value1[i]) * perc;\n      }\n\n      return arr;\n    }\n\n    function random(min, max) {\n      if (max === undefined) {\n        if (min === undefined) {\n          min = 0;\n          max = 1;\n        } else {\n          max = min;\n          min = undefined;\n        }\n      }\n\n      if (max.length) {\n        var i;\n        var len = max.length;\n\n        if (!min) {\n          min = createTypedArray('float32', len);\n        }\n\n        var arr = createTypedArray('float32', len);\n        var rnd = BMMath.random();\n\n        for (i = 0; i < len; i += 1) {\n          arr[i] = min[i] + rnd * (max[i] - min[i]);\n        }\n\n        return arr;\n      }\n\n      if (min === undefined) {\n        min = 0;\n      }\n\n      var rndm = BMMath.random();\n      return min + rndm * (max - min);\n    }\n\n    function createPath(points, inTangents, outTangents, closed) {\n      var i;\n      var len = points.length;\n      var path = shapePool.newElement();\n      path.setPathData(!!closed, len);\n      var arrPlaceholder = [0, 0];\n      var inVertexPoint;\n      var outVertexPoint;\n\n      for (i = 0; i < len; i += 1) {\n        inVertexPoint = inTangents && inTangents[i] ? inTangents[i] : arrPlaceholder;\n        outVertexPoint = outTangents && outTangents[i] ? outTangents[i] : arrPlaceholder;\n        path.setTripleAt(points[i][0], points[i][1], outVertexPoint[0] + points[i][0], outVertexPoint[1] + points[i][1], inVertexPoint[0] + points[i][0], inVertexPoint[1] + points[i][1], i, true);\n      }\n\n      return path;\n    }\n\n    function initiateExpression(elem, data, property) {\n      var val = data.x;\n      var needsVelocity = /velocity(?![\\w\\d])/.test(val);\n\n      var _needsRandom = val.indexOf('random') !== -1;\n\n      var elemType = elem.data.ty;\n      var transform;\n      var $bm_transform;\n      var content;\n      var effect;\n      var thisProperty = property;\n      thisProperty.valueAtTime = thisProperty.getValueAtTime;\n      Object.defineProperty(thisProperty, 'value', {\n        get: function get() {\n          return thisProperty.v;\n        }\n      });\n      elem.comp.frameDuration = 1 / elem.comp.globalData.frameRate;\n      elem.comp.displayStartTime = 0;\n      var inPoint = elem.data.ip / elem.comp.globalData.frameRate;\n      var outPoint = elem.data.op / elem.comp.globalData.frameRate;\n      var width = elem.data.sw ? elem.data.sw : 0;\n      var height = elem.data.sh ? elem.data.sh : 0;\n      var name = elem.data.nm;\n      var loopIn;\n      var loop_in;\n      var loopOut;\n      var loop_out;\n      var smooth;\n      var toWorld;\n      var fromWorld;\n      var fromComp;\n      var toComp;\n      var fromCompToSurface;\n      var position;\n      var rotation;\n      var anchorPoint;\n      var scale;\n      var thisLayer;\n      var thisComp;\n      var mask;\n      var valueAtTime;\n      var velocityAtTime;\n      var scoped_bm_rt; // val = val.replace(/(\\\\?\"|')((http)(s)?(:\\/))?\\/.*?(\\\\?\"|')/g, \"\\\"\\\"\"); // deter potential network calls\n\n      var expression_function = eval('[function _expression_function(){' + val + ';scoped_bm_rt=$bm_rt}]')[0]; // eslint-disable-line no-eval\n\n      var numKeys = property.kf ? data.k.length : 0;\n      var active = !this.data || this.data.hd !== true;\n\n      var wiggle = function wiggle(freq, amp) {\n        var iWiggle;\n        var j;\n        var lenWiggle = this.pv.length ? this.pv.length : 1;\n        var addedAmps = createTypedArray('float32', lenWiggle);\n        freq = 5;\n        var iterations = Math.floor(time * freq);\n        iWiggle = 0;\n        j = 0;\n\n        while (iWiggle < iterations) {\n          // var rnd = BMMath.random();\n          for (j = 0; j < lenWiggle; j += 1) {\n            addedAmps[j] += -amp + amp * 2 * BMMath.random(); // addedAmps[j] += -amp + amp*2*rnd;\n          }\n\n          iWiggle += 1;\n        } // var rnd2 = BMMath.random();\n\n\n        var periods = time * freq;\n        var perc = periods - Math.floor(periods);\n        var arr = createTypedArray('float32', lenWiggle);\n\n        if (lenWiggle > 1) {\n          for (j = 0; j < lenWiggle; j += 1) {\n            arr[j] = this.pv[j] + addedAmps[j] + (-amp + amp * 2 * BMMath.random()) * perc; // arr[j] = this.pv[j] + addedAmps[j] + (-amp + amp*2*rnd)*perc;\n            // arr[i] = this.pv[i] + addedAmp + amp1*perc + amp2*(1-perc);\n          }\n\n          return arr;\n        }\n\n        return this.pv + addedAmps[0] + (-amp + amp * 2 * BMMath.random()) * perc;\n      }.bind(this);\n\n      if (thisProperty.loopIn) {\n        loopIn = thisProperty.loopIn.bind(thisProperty);\n        loop_in = loopIn;\n      }\n\n      if (thisProperty.loopOut) {\n        loopOut = thisProperty.loopOut.bind(thisProperty);\n        loop_out = loopOut;\n      }\n\n      if (thisProperty.smooth) {\n        smooth = thisProperty.smooth.bind(thisProperty);\n      }\n\n      function loopInDuration(type, duration) {\n        return loopIn(type, duration, true);\n      }\n\n      function loopOutDuration(type, duration) {\n        return loopOut(type, duration, true);\n      }\n\n      if (this.getValueAtTime) {\n        valueAtTime = this.getValueAtTime.bind(this);\n      }\n\n      if (this.getVelocityAtTime) {\n        velocityAtTime = this.getVelocityAtTime.bind(this);\n      }\n\n      var comp = elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);\n\n      function lookAt(elem1, elem2) {\n        var fVec = [elem2[0] - elem1[0], elem2[1] - elem1[1], elem2[2] - elem1[2]];\n        var pitch = Math.atan2(fVec[0], Math.sqrt(fVec[1] * fVec[1] + fVec[2] * fVec[2])) / degToRads;\n        var yaw = -Math.atan2(fVec[1], fVec[2]) / degToRads;\n        return [yaw, pitch, 0];\n      }\n\n      function easeOut(t, tMin, tMax, val1, val2) {\n        return applyEase(easeOutBez, t, tMin, tMax, val1, val2);\n      }\n\n      function easeIn(t, tMin, tMax, val1, val2) {\n        return applyEase(easeInBez, t, tMin, tMax, val1, val2);\n      }\n\n      function ease(t, tMin, tMax, val1, val2) {\n        return applyEase(easeInOutBez, t, tMin, tMax, val1, val2);\n      }\n\n      function applyEase(fn, t, tMin, tMax, val1, val2) {\n        if (val1 === undefined) {\n          val1 = tMin;\n          val2 = tMax;\n        } else {\n          t = (t - tMin) / (tMax - tMin);\n        }\n\n        if (t > 1) {\n          t = 1;\n        } else if (t < 0) {\n          t = 0;\n        }\n\n        var mult = fn(t);\n\n        if ($bm_isInstanceOfArray(val1)) {\n          var iKey;\n          var lenKey = val1.length;\n          var arr = createTypedArray('float32', lenKey);\n\n          for (iKey = 0; iKey < lenKey; iKey += 1) {\n            arr[iKey] = (val2[iKey] - val1[iKey]) * mult + val1[iKey];\n          }\n\n          return arr;\n        }\n\n        return (val2 - val1) * mult + val1;\n      }\n\n      function nearestKey(time) {\n        var iKey;\n        var lenKey = data.k.length;\n        var index;\n        var keyTime;\n\n        if (!data.k.length || typeof data.k[0] === 'number') {\n          index = 0;\n          keyTime = 0;\n        } else {\n          index = -1;\n          time *= elem.comp.globalData.frameRate;\n\n          if (time < data.k[0].t) {\n            index = 1;\n            keyTime = data.k[0].t;\n          } else {\n            for (iKey = 0; iKey < lenKey - 1; iKey += 1) {\n              if (time === data.k[iKey].t) {\n                index = iKey + 1;\n                keyTime = data.k[iKey].t;\n                break;\n              } else if (time > data.k[iKey].t && time < data.k[iKey + 1].t) {\n                if (time - data.k[iKey].t > data.k[iKey + 1].t - time) {\n                  index = iKey + 2;\n                  keyTime = data.k[iKey + 1].t;\n                } else {\n                  index = iKey + 1;\n                  keyTime = data.k[iKey].t;\n                }\n\n                break;\n              }\n            }\n\n            if (index === -1) {\n              index = iKey + 1;\n              keyTime = data.k[iKey].t;\n            }\n          }\n        }\n\n        var obKey = {};\n        obKey.index = index;\n        obKey.time = keyTime / elem.comp.globalData.frameRate;\n        return obKey;\n      }\n\n      function key(ind) {\n        var obKey;\n        var iKey;\n        var lenKey;\n\n        if (!data.k.length || typeof data.k[0] === 'number') {\n          throw new Error('The property has no keyframe at index ' + ind);\n        }\n\n        ind -= 1;\n        obKey = {\n          time: data.k[ind].t / elem.comp.globalData.frameRate,\n          value: []\n        };\n        var arr = Object.prototype.hasOwnProperty.call(data.k[ind], 's') ? data.k[ind].s : data.k[ind - 1].e;\n        lenKey = arr.length;\n\n        for (iKey = 0; iKey < lenKey; iKey += 1) {\n          obKey[iKey] = arr[iKey];\n          obKey.value[iKey] = arr[iKey];\n        }\n\n        return obKey;\n      }\n\n      function framesToTime(fr, fps) {\n        if (!fps) {\n          fps = elem.comp.globalData.frameRate;\n        }\n\n        return fr / fps;\n      }\n\n      function timeToFrames(t, fps) {\n        if (!t && t !== 0) {\n          t = time;\n        }\n\n        if (!fps) {\n          fps = elem.comp.globalData.frameRate;\n        }\n\n        return t * fps;\n      }\n\n      function seedRandom(seed) {\n        BMMath.seedrandom(randSeed + seed);\n      }\n\n      function sourceRectAtTime() {\n        return elem.sourceRectAtTime();\n      }\n\n      function substring(init, end) {\n        if (typeof value === 'string') {\n          if (end === undefined) {\n            return value.substring(init);\n          }\n\n          return value.substring(init, end);\n        }\n\n        return '';\n      }\n\n      function substr(init, end) {\n        if (typeof value === 'string') {\n          if (end === undefined) {\n            return value.substr(init);\n          }\n\n          return value.substr(init, end);\n        }\n\n        return '';\n      }\n\n      function posterizeTime(framesPerSecond) {\n        time = framesPerSecond === 0 ? 0 : Math.floor(time * framesPerSecond) / framesPerSecond;\n        value = valueAtTime(time);\n      }\n\n      var time;\n      var velocity;\n      var value;\n      var text;\n      var textIndex;\n      var textTotal;\n      var selectorValue;\n      var index = elem.data.ind;\n      var hasParent = !!(elem.hierarchy && elem.hierarchy.length);\n      var parent;\n      var randSeed = Math.floor(Math.random() * 1000000);\n      var globalData = elem.globalData;\n\n      function executeExpression(_value) {\n        // globalData.pushExpression();\n        value = _value;\n\n        if (this.frameExpressionId === elem.globalData.frameId && this.propType !== 'textSelector') {\n          return value;\n        }\n\n        if (this.propType === 'textSelector') {\n          textIndex = this.textIndex;\n          textTotal = this.textTotal;\n          selectorValue = this.selectorValue;\n        }\n\n        if (!thisLayer) {\n          text = elem.layerInterface.text;\n          thisLayer = elem.layerInterface;\n          thisComp = elem.comp.compInterface;\n          toWorld = thisLayer.toWorld.bind(thisLayer);\n          fromWorld = thisLayer.fromWorld.bind(thisLayer);\n          fromComp = thisLayer.fromComp.bind(thisLayer);\n          toComp = thisLayer.toComp.bind(thisLayer);\n          mask = thisLayer.mask ? thisLayer.mask.bind(thisLayer) : null;\n          fromCompToSurface = fromComp;\n        }\n\n        if (!transform) {\n          transform = elem.layerInterface('ADBE Transform Group');\n          $bm_transform = transform;\n\n          if (transform) {\n            anchorPoint = transform.anchorPoint;\n            /* position = transform.position;\r\n                      rotation = transform.rotation;\r\n                      scale = transform.scale; */\n          }\n        }\n\n        if (elemType === 4 && !content) {\n          content = thisLayer('ADBE Root Vectors Group');\n        }\n\n        if (!effect) {\n          effect = thisLayer(4);\n        }\n\n        hasParent = !!(elem.hierarchy && elem.hierarchy.length);\n\n        if (hasParent && !parent) {\n          parent = elem.hierarchy[0].layerInterface;\n        }\n\n        time = this.comp.renderedFrame / this.comp.globalData.frameRate;\n\n        if (_needsRandom) {\n          seedRandom(randSeed + time);\n        }\n\n        if (needsVelocity) {\n          velocity = velocityAtTime(time);\n        }\n\n        expression_function();\n        this.frameExpressionId = elem.globalData.frameId; // TODO: Check if it's possible to return on ShapeInterface the .v value\n        // Changed this to a ternary operation because Rollup failed compiling it correctly\n\n        scoped_bm_rt = scoped_bm_rt.propType === propTypes.SHAPE ? scoped_bm_rt.v : scoped_bm_rt;\n        return scoped_bm_rt;\n      } // Bundlers will see these as dead code and unless we reference them\n\n\n      executeExpression.__preventDeadCodeRemoval = [$bm_transform, anchorPoint, time, velocity, inPoint, outPoint, width, height, name, loop_in, loop_out, smooth, toComp, fromCompToSurface, toWorld, fromWorld, mask, position, rotation, scale, thisComp, numKeys, active, wiggle, loopInDuration, loopOutDuration, comp, lookAt, easeOut, easeIn, ease, nearestKey, key, text, textIndex, textTotal, selectorValue, framesToTime, timeToFrames, sourceRectAtTime, substring, substr, posterizeTime, index, globalData];\n      return executeExpression;\n    }\n\n    ob.initiateExpression = initiateExpression;\n    ob.__preventDeadCodeRemoval = [window, document, XMLHttpRequest, fetch, frames, $bm_neg, add, $bm_sum, $bm_sub, $bm_mul, $bm_div, $bm_mod, clamp, radians_to_degrees, degreesToRadians, degrees_to_radians, normalize, rgbToHsl, hslToRgb, linear, random, createPath];\n    return ob;\n  }();\n\n  var expressionHelpers = function () {\n    function searchExpressions(elem, data, prop) {\n      if (data.x) {\n        prop.k = true;\n        prop.x = true;\n        prop.initiateExpression = ExpressionManager.initiateExpression;\n        prop.effectsSequence.push(prop.initiateExpression(elem, data, prop).bind(prop));\n      }\n    }\n\n    function getValueAtTime(frameNum) {\n      frameNum *= this.elem.globalData.frameRate;\n      frameNum -= this.offsetTime;\n\n      if (frameNum !== this._cachingAtTime.lastFrame) {\n        this._cachingAtTime.lastIndex = this._cachingAtTime.lastFrame < frameNum ? this._cachingAtTime.lastIndex : 0;\n        this._cachingAtTime.value = this.interpolateValue(frameNum, this._cachingAtTime);\n        this._cachingAtTime.lastFrame = frameNum;\n      }\n\n      return this._cachingAtTime.value;\n    }\n\n    function getSpeedAtTime(frameNum) {\n      var delta = -0.01;\n      var v1 = this.getValueAtTime(frameNum);\n      var v2 = this.getValueAtTime(frameNum + delta);\n      var speed = 0;\n\n      if (v1.length) {\n        var i;\n\n        for (i = 0; i < v1.length; i += 1) {\n          speed += Math.pow(v2[i] - v1[i], 2);\n        }\n\n        speed = Math.sqrt(speed) * 100;\n      } else {\n        speed = 0;\n      }\n\n      return speed;\n    }\n\n    function getVelocityAtTime(frameNum) {\n      if (this.vel !== undefined) {\n        return this.vel;\n      }\n\n      var delta = -0.001; // frameNum += this.elem.data.st;\n\n      var v1 = this.getValueAtTime(frameNum);\n      var v2 = this.getValueAtTime(frameNum + delta);\n      var velocity;\n\n      if (v1.length) {\n        velocity = createTypedArray('float32', v1.length);\n        var i;\n\n        for (i = 0; i < v1.length; i += 1) {\n          // removing frameRate\n          // if needed, don't add it here\n          // velocity[i] = this.elem.globalData.frameRate*((v2[i] - v1[i])/delta);\n          velocity[i] = (v2[i] - v1[i]) / delta;\n        }\n      } else {\n        velocity = (v2 - v1) / delta;\n      }\n\n      return velocity;\n    }\n\n    function getStaticValueAtTime() {\n      return this.pv;\n    }\n\n    function setGroupProperty(propertyGroup) {\n      this.propertyGroup = propertyGroup;\n    }\n\n    return {\n      searchExpressions: searchExpressions,\n      getSpeedAtTime: getSpeedAtTime,\n      getVelocityAtTime: getVelocityAtTime,\n      getValueAtTime: getValueAtTime,\n      getStaticValueAtTime: getStaticValueAtTime,\n      setGroupProperty: setGroupProperty\n    };\n  }();\n\n  function addPropertyDecorator() {\n    function loopOut(type, duration, durationFlag) {\n      if (!this.k || !this.keyframes) {\n        return this.pv;\n      }\n\n      type = type ? type.toLowerCase() : '';\n      var currentFrame = this.comp.renderedFrame;\n      var keyframes = this.keyframes;\n      var lastKeyFrame = keyframes[keyframes.length - 1].t;\n\n      if (currentFrame <= lastKeyFrame) {\n        return this.pv;\n      }\n\n      var cycleDuration;\n      var firstKeyFrame;\n\n      if (!durationFlag) {\n        if (!duration || duration > keyframes.length - 1) {\n          duration = keyframes.length - 1;\n        }\n\n        firstKeyFrame = keyframes[keyframes.length - 1 - duration].t;\n        cycleDuration = lastKeyFrame - firstKeyFrame;\n      } else {\n        if (!duration) {\n          cycleDuration = Math.max(0, lastKeyFrame - this.elem.data.ip);\n        } else {\n          cycleDuration = Math.abs(lastKeyFrame - this.elem.comp.globalData.frameRate * duration);\n        }\n\n        firstKeyFrame = lastKeyFrame - cycleDuration;\n      }\n\n      var i;\n      var len;\n      var ret;\n\n      if (type === 'pingpong') {\n        var iterations = Math.floor((currentFrame - firstKeyFrame) / cycleDuration);\n\n        if (iterations % 2 !== 0) {\n          return this.getValueAtTime((cycleDuration - (currentFrame - firstKeyFrame) % cycleDuration + firstKeyFrame) / this.comp.globalData.frameRate, 0); // eslint-disable-line\n        }\n      } else if (type === 'offset') {\n        var initV = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\n        var endV = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\n        var current = this.getValueAtTime(((currentFrame - firstKeyFrame) % cycleDuration + firstKeyFrame) / this.comp.globalData.frameRate, 0); // eslint-disable-line\n\n        var repeats = Math.floor((currentFrame - firstKeyFrame) / cycleDuration);\n\n        if (this.pv.length) {\n          ret = new Array(initV.length);\n          len = ret.length;\n\n          for (i = 0; i < len; i += 1) {\n            ret[i] = (endV[i] - initV[i]) * repeats + current[i];\n          }\n\n          return ret;\n        }\n\n        return (endV - initV) * repeats + current;\n      } else if (type === 'continue') {\n        var lastValue = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\n        var nextLastValue = this.getValueAtTime((lastKeyFrame - 0.001) / this.comp.globalData.frameRate, 0);\n\n        if (this.pv.length) {\n          ret = new Array(lastValue.length);\n          len = ret.length;\n\n          for (i = 0; i < len; i += 1) {\n            ret[i] = lastValue[i] + (lastValue[i] - nextLastValue[i]) * ((currentFrame - lastKeyFrame) / this.comp.globalData.frameRate) / 0.0005; // eslint-disable-line\n          }\n\n          return ret;\n        }\n\n        return lastValue + (lastValue - nextLastValue) * ((currentFrame - lastKeyFrame) / 0.001);\n      }\n\n      return this.getValueAtTime(((currentFrame - firstKeyFrame) % cycleDuration + firstKeyFrame) / this.comp.globalData.frameRate, 0); // eslint-disable-line\n    }\n\n    function loopIn(type, duration, durationFlag) {\n      if (!this.k) {\n        return this.pv;\n      }\n\n      type = type ? type.toLowerCase() : '';\n      var currentFrame = this.comp.renderedFrame;\n      var keyframes = this.keyframes;\n      var firstKeyFrame = keyframes[0].t;\n\n      if (currentFrame >= firstKeyFrame) {\n        return this.pv;\n      }\n\n      var cycleDuration;\n      var lastKeyFrame;\n\n      if (!durationFlag) {\n        if (!duration || duration > keyframes.length - 1) {\n          duration = keyframes.length - 1;\n        }\n\n        lastKeyFrame = keyframes[duration].t;\n        cycleDuration = lastKeyFrame - firstKeyFrame;\n      } else {\n        if (!duration) {\n          cycleDuration = Math.max(0, this.elem.data.op - firstKeyFrame);\n        } else {\n          cycleDuration = Math.abs(this.elem.comp.globalData.frameRate * duration);\n        }\n\n        lastKeyFrame = firstKeyFrame + cycleDuration;\n      }\n\n      var i;\n      var len;\n      var ret;\n\n      if (type === 'pingpong') {\n        var iterations = Math.floor((firstKeyFrame - currentFrame) / cycleDuration);\n\n        if (iterations % 2 === 0) {\n          return this.getValueAtTime(((firstKeyFrame - currentFrame) % cycleDuration + firstKeyFrame) / this.comp.globalData.frameRate, 0); // eslint-disable-line\n        }\n      } else if (type === 'offset') {\n        var initV = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\n        var endV = this.getValueAtTime(lastKeyFrame / this.comp.globalData.frameRate, 0);\n        var current = this.getValueAtTime((cycleDuration - (firstKeyFrame - currentFrame) % cycleDuration + firstKeyFrame) / this.comp.globalData.frameRate, 0);\n        var repeats = Math.floor((firstKeyFrame - currentFrame) / cycleDuration) + 1;\n\n        if (this.pv.length) {\n          ret = new Array(initV.length);\n          len = ret.length;\n\n          for (i = 0; i < len; i += 1) {\n            ret[i] = current[i] - (endV[i] - initV[i]) * repeats;\n          }\n\n          return ret;\n        }\n\n        return current - (endV - initV) * repeats;\n      } else if (type === 'continue') {\n        var firstValue = this.getValueAtTime(firstKeyFrame / this.comp.globalData.frameRate, 0);\n        var nextFirstValue = this.getValueAtTime((firstKeyFrame + 0.001) / this.comp.globalData.frameRate, 0);\n\n        if (this.pv.length) {\n          ret = new Array(firstValue.length);\n          len = ret.length;\n\n          for (i = 0; i < len; i += 1) {\n            ret[i] = firstValue[i] + (firstValue[i] - nextFirstValue[i]) * (firstKeyFrame - currentFrame) / 0.001;\n          }\n\n          return ret;\n        }\n\n        return firstValue + (firstValue - nextFirstValue) * (firstKeyFrame - currentFrame) / 0.001;\n      }\n\n      return this.getValueAtTime((cycleDuration - ((firstKeyFrame - currentFrame) % cycleDuration + firstKeyFrame)) / this.comp.globalData.frameRate, 0); // eslint-disable-line\n    }\n\n    function smooth(width, samples) {\n      if (!this.k) {\n        return this.pv;\n      }\n\n      width = (width || 0.4) * 0.5;\n      samples = Math.floor(samples || 5);\n\n      if (samples <= 1) {\n        return this.pv;\n      }\n\n      var currentTime = this.comp.renderedFrame / this.comp.globalData.frameRate;\n      var initFrame = currentTime - width;\n      var endFrame = currentTime + width;\n      var sampleFrequency = samples > 1 ? (endFrame - initFrame) / (samples - 1) : 1;\n      var i = 0;\n      var j = 0;\n      var value;\n\n      if (this.pv.length) {\n        value = createTypedArray('float32', this.pv.length);\n      } else {\n        value = 0;\n      }\n\n      var sampleValue;\n\n      while (i < samples) {\n        sampleValue = this.getValueAtTime(initFrame + i * sampleFrequency);\n\n        if (this.pv.length) {\n          for (j = 0; j < this.pv.length; j += 1) {\n            value[j] += sampleValue[j];\n          }\n        } else {\n          value += sampleValue;\n        }\n\n        i += 1;\n      }\n\n      if (this.pv.length) {\n        for (j = 0; j < this.pv.length; j += 1) {\n          value[j] /= samples;\n        }\n      } else {\n        value /= samples;\n      }\n\n      return value;\n    }\n\n    function getTransformValueAtTime(time) {\n      if (!this._transformCachingAtTime) {\n        this._transformCachingAtTime = {\n          v: new Matrix()\n        };\n      } /// /\n\n\n      var matrix = this._transformCachingAtTime.v;\n      matrix.cloneFromProps(this.pre.props);\n\n      if (this.appliedTransformations < 1) {\n        var anchor = this.a.getValueAtTime(time);\n        matrix.translate(-anchor[0] * this.a.mult, -anchor[1] * this.a.mult, anchor[2] * this.a.mult);\n      }\n\n      if (this.appliedTransformations < 2) {\n        var scale = this.s.getValueAtTime(time);\n        matrix.scale(scale[0] * this.s.mult, scale[1] * this.s.mult, scale[2] * this.s.mult);\n      }\n\n      if (this.sk && this.appliedTransformations < 3) {\n        var skew = this.sk.getValueAtTime(time);\n        var skewAxis = this.sa.getValueAtTime(time);\n        matrix.skewFromAxis(-skew * this.sk.mult, skewAxis * this.sa.mult);\n      }\n\n      if (this.r && this.appliedTransformations < 4) {\n        var rotation = this.r.getValueAtTime(time);\n        matrix.rotate(-rotation * this.r.mult);\n      } else if (!this.r && this.appliedTransformations < 4) {\n        var rotationZ = this.rz.getValueAtTime(time);\n        var rotationY = this.ry.getValueAtTime(time);\n        var rotationX = this.rx.getValueAtTime(time);\n        var orientation = this.or.getValueAtTime(time);\n        matrix.rotateZ(-rotationZ * this.rz.mult).rotateY(rotationY * this.ry.mult).rotateX(rotationX * this.rx.mult).rotateZ(-orientation[2] * this.or.mult).rotateY(orientation[1] * this.or.mult).rotateX(orientation[0] * this.or.mult);\n      }\n\n      if (this.data.p && this.data.p.s) {\n        var positionX = this.px.getValueAtTime(time);\n        var positionY = this.py.getValueAtTime(time);\n\n        if (this.data.p.z) {\n          var positionZ = this.pz.getValueAtTime(time);\n          matrix.translate(positionX * this.px.mult, positionY * this.py.mult, -positionZ * this.pz.mult);\n        } else {\n          matrix.translate(positionX * this.px.mult, positionY * this.py.mult, 0);\n        }\n      } else {\n        var position = this.p.getValueAtTime(time);\n        matrix.translate(position[0] * this.p.mult, position[1] * this.p.mult, -position[2] * this.p.mult);\n      }\n\n      return matrix; /// /\n    }\n\n    function getTransformStaticValueAtTime() {\n      return this.v.clone(new Matrix());\n    }\n\n    var getTransformProperty = TransformPropertyFactory.getTransformProperty;\n\n    TransformPropertyFactory.getTransformProperty = function (elem, data, container) {\n      var prop = getTransformProperty(elem, data, container);\n\n      if (prop.dynamicProperties.length) {\n        prop.getValueAtTime = getTransformValueAtTime.bind(prop);\n      } else {\n        prop.getValueAtTime = getTransformStaticValueAtTime.bind(prop);\n      }\n\n      prop.setGroupProperty = expressionHelpers.setGroupProperty;\n      return prop;\n    };\n\n    var propertyGetProp = PropertyFactory.getProp;\n\n    PropertyFactory.getProp = function (elem, data, type, mult, container) {\n      var prop = propertyGetProp(elem, data, type, mult, container); // prop.getVelocityAtTime = getVelocityAtTime;\n      // prop.loopOut = loopOut;\n      // prop.loopIn = loopIn;\n\n      if (prop.kf) {\n        prop.getValueAtTime = expressionHelpers.getValueAtTime.bind(prop);\n      } else {\n        prop.getValueAtTime = expressionHelpers.getStaticValueAtTime.bind(prop);\n      }\n\n      prop.setGroupProperty = expressionHelpers.setGroupProperty;\n      prop.loopOut = loopOut;\n      prop.loopIn = loopIn;\n      prop.smooth = smooth;\n      prop.getVelocityAtTime = expressionHelpers.getVelocityAtTime.bind(prop);\n      prop.getSpeedAtTime = expressionHelpers.getSpeedAtTime.bind(prop);\n      prop.numKeys = data.a === 1 ? data.k.length : 0;\n      prop.propertyIndex = data.ix;\n      var value = 0;\n\n      if (type !== 0) {\n        value = createTypedArray('float32', data.a === 1 ? data.k[0].s.length : data.k.length);\n      }\n\n      prop._cachingAtTime = {\n        lastFrame: initialDefaultFrame,\n        lastIndex: 0,\n        value: value\n      };\n      expressionHelpers.searchExpressions(elem, data, prop);\n\n      if (prop.k) {\n        container.addDynamicProperty(prop);\n      }\n\n      return prop;\n    };\n\n    function getShapeValueAtTime(frameNum) {\n      // For now this caching object is created only when needed instead of creating it when the shape is initialized.\n      if (!this._cachingAtTime) {\n        this._cachingAtTime = {\n          shapeValue: shapePool.clone(this.pv),\n          lastIndex: 0,\n          lastTime: initialDefaultFrame\n        };\n      }\n\n      frameNum *= this.elem.globalData.frameRate;\n      frameNum -= this.offsetTime;\n\n      if (frameNum !== this._cachingAtTime.lastTime) {\n        this._cachingAtTime.lastIndex = this._cachingAtTime.lastTime < frameNum ? this._caching.lastIndex : 0;\n        this._cachingAtTime.lastTime = frameNum;\n        this.interpolateShape(frameNum, this._cachingAtTime.shapeValue, this._cachingAtTime);\n      }\n\n      return this._cachingAtTime.shapeValue;\n    }\n\n    var ShapePropertyConstructorFunction = ShapePropertyFactory.getConstructorFunction();\n    var KeyframedShapePropertyConstructorFunction = ShapePropertyFactory.getKeyframedConstructorFunction();\n\n    function ShapeExpressions() {}\n\n    ShapeExpressions.prototype = {\n      vertices: function vertices(prop, time) {\n        if (this.k) {\n          this.getValue();\n        }\n\n        var shapePath = this.v;\n\n        if (time !== undefined) {\n          shapePath = this.getValueAtTime(time, 0);\n        }\n\n        var i;\n        var len = shapePath._length;\n        var vertices = shapePath[prop];\n        var points = shapePath.v;\n        var arr = createSizedArray(len);\n\n        for (i = 0; i < len; i += 1) {\n          if (prop === 'i' || prop === 'o') {\n            arr[i] = [vertices[i][0] - points[i][0], vertices[i][1] - points[i][1]];\n          } else {\n            arr[i] = [vertices[i][0], vertices[i][1]];\n          }\n        }\n\n        return arr;\n      },\n      points: function points(time) {\n        return this.vertices('v', time);\n      },\n      inTangents: function inTangents(time) {\n        return this.vertices('i', time);\n      },\n      outTangents: function outTangents(time) {\n        return this.vertices('o', time);\n      },\n      isClosed: function isClosed() {\n        return this.v.c;\n      },\n      pointOnPath: function pointOnPath(perc, time) {\n        var shapePath = this.v;\n\n        if (time !== undefined) {\n          shapePath = this.getValueAtTime(time, 0);\n        }\n\n        if (!this._segmentsLength) {\n          this._segmentsLength = bez.getSegmentsLength(shapePath);\n        }\n\n        var segmentsLength = this._segmentsLength;\n        var lengths = segmentsLength.lengths;\n        var lengthPos = segmentsLength.totalLength * perc;\n        var i = 0;\n        var len = lengths.length;\n        var accumulatedLength = 0;\n        var pt;\n\n        while (i < len) {\n          if (accumulatedLength + lengths[i].addedLength > lengthPos) {\n            var initIndex = i;\n            var endIndex = shapePath.c && i === len - 1 ? 0 : i + 1;\n            var segmentPerc = (lengthPos - accumulatedLength) / lengths[i].addedLength;\n            pt = bez.getPointInSegment(shapePath.v[initIndex], shapePath.v[endIndex], shapePath.o[initIndex], shapePath.i[endIndex], segmentPerc, lengths[i]);\n            break;\n          } else {\n            accumulatedLength += lengths[i].addedLength;\n          }\n\n          i += 1;\n        }\n\n        if (!pt) {\n          pt = shapePath.c ? [shapePath.v[0][0], shapePath.v[0][1]] : [shapePath.v[shapePath._length - 1][0], shapePath.v[shapePath._length - 1][1]];\n        }\n\n        return pt;\n      },\n      vectorOnPath: function vectorOnPath(perc, time, vectorType) {\n        // perc doesn't use triple equality because it can be a Number object as well as a primitive.\n        if (perc == 1) {\n          // eslint-disable-line eqeqeq\n          perc = this.v.c;\n        } else if (perc == 0) {\n          // eslint-disable-line eqeqeq\n          perc = 0.999;\n        }\n\n        var pt1 = this.pointOnPath(perc, time);\n        var pt2 = this.pointOnPath(perc + 0.001, time);\n        var xLength = pt2[0] - pt1[0];\n        var yLength = pt2[1] - pt1[1];\n        var magnitude = Math.sqrt(Math.pow(xLength, 2) + Math.pow(yLength, 2));\n\n        if (magnitude === 0) {\n          return [0, 0];\n        }\n\n        var unitVector = vectorType === 'tangent' ? [xLength / magnitude, yLength / magnitude] : [-yLength / magnitude, xLength / magnitude];\n        return unitVector;\n      },\n      tangentOnPath: function tangentOnPath(perc, time) {\n        return this.vectorOnPath(perc, time, 'tangent');\n      },\n      normalOnPath: function normalOnPath(perc, time) {\n        return this.vectorOnPath(perc, time, 'normal');\n      },\n      setGroupProperty: expressionHelpers.setGroupProperty,\n      getValueAtTime: expressionHelpers.getStaticValueAtTime\n    };\n    extendPrototype([ShapeExpressions], ShapePropertyConstructorFunction);\n    extendPrototype([ShapeExpressions], KeyframedShapePropertyConstructorFunction);\n    KeyframedShapePropertyConstructorFunction.prototype.getValueAtTime = getShapeValueAtTime;\n    KeyframedShapePropertyConstructorFunction.prototype.initiateExpression = ExpressionManager.initiateExpression;\n    var propertyGetShapeProp = ShapePropertyFactory.getShapeProp;\n\n    ShapePropertyFactory.getShapeProp = function (elem, data, type, arr, trims) {\n      var prop = propertyGetShapeProp(elem, data, type, arr, trims);\n      prop.propertyIndex = data.ix;\n      prop.lock = false;\n\n      if (type === 3) {\n        expressionHelpers.searchExpressions(elem, data.pt, prop);\n      } else if (type === 4) {\n        expressionHelpers.searchExpressions(elem, data.ks, prop);\n      }\n\n      if (prop.k) {\n        elem.addDynamicProperty(prop);\n      }\n\n      return prop;\n    };\n  }\n\n  function initialize$1() {\n    addPropertyDecorator();\n  }\n\n  function addDecorator() {\n    function searchExpressions() {\n      if (this.data.d.x) {\n        this.calculateExpression = ExpressionManager.initiateExpression.bind(this)(this.elem, this.data.d, this);\n        this.addEffect(this.getExpressionValue.bind(this));\n        return true;\n      }\n\n      return null;\n    }\n\n    TextProperty.prototype.getExpressionValue = function (currentValue, text) {\n      var newValue = this.calculateExpression(text);\n\n      if (currentValue.t !== newValue) {\n        var newData = {};\n        this.copyData(newData, currentValue);\n        newData.t = newValue.toString();\n        newData.__complete = false;\n        return newData;\n      }\n\n      return currentValue;\n    };\n\n    TextProperty.prototype.searchProperty = function () {\n      var isKeyframed = this.searchKeyframes();\n      var hasExpressions = this.searchExpressions();\n      this.kf = isKeyframed || hasExpressions;\n      return this.kf;\n    };\n\n    TextProperty.prototype.searchExpressions = searchExpressions;\n  }\n\n  function initialize() {\n    addDecorator();\n  }\n\n  function SVGComposableEffect() {}\n\n  SVGComposableEffect.prototype = {\n    createMergeNode: function createMergeNode(resultId, ins) {\n      var feMerge = createNS('feMerge');\n      feMerge.setAttribute('result', resultId);\n      var feMergeNode;\n      var i;\n\n      for (i = 0; i < ins.length; i += 1) {\n        feMergeNode = createNS('feMergeNode');\n        feMergeNode.setAttribute('in', ins[i]);\n        feMerge.appendChild(feMergeNode);\n        feMerge.appendChild(feMergeNode);\n      }\n\n      return feMerge;\n    }\n  };\n\n  function SVGTintFilter(filter, filterManager, elem, id, source) {\n    this.filterManager = filterManager;\n    var feColorMatrix = createNS('feColorMatrix');\n    feColorMatrix.setAttribute('type', 'matrix');\n    feColorMatrix.setAttribute('color-interpolation-filters', 'linearRGB');\n    feColorMatrix.setAttribute('values', '0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0');\n    feColorMatrix.setAttribute('result', id + '_tint_1');\n    filter.appendChild(feColorMatrix);\n    feColorMatrix = createNS('feColorMatrix');\n    feColorMatrix.setAttribute('type', 'matrix');\n    feColorMatrix.setAttribute('color-interpolation-filters', 'sRGB');\n    feColorMatrix.setAttribute('values', '1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0');\n    feColorMatrix.setAttribute('result', id + '_tint_2');\n    filter.appendChild(feColorMatrix);\n    this.matrixFilter = feColorMatrix;\n    var feMerge = this.createMergeNode(id, [source, id + '_tint_1', id + '_tint_2']);\n    filter.appendChild(feMerge);\n  }\n\n  extendPrototype([SVGComposableEffect], SVGTintFilter);\n\n  SVGTintFilter.prototype.renderFrame = function (forceRender) {\n    if (forceRender || this.filterManager._mdf) {\n      var colorBlack = this.filterManager.effectElements[0].p.v;\n      var colorWhite = this.filterManager.effectElements[1].p.v;\n      var opacity = this.filterManager.effectElements[2].p.v / 100;\n      this.matrixFilter.setAttribute('values', colorWhite[0] - colorBlack[0] + ' 0 0 0 ' + colorBlack[0] + ' ' + (colorWhite[1] - colorBlack[1]) + ' 0 0 0 ' + colorBlack[1] + ' ' + (colorWhite[2] - colorBlack[2]) + ' 0 0 0 ' + colorBlack[2] + ' 0 0 0 ' + opacity + ' 0');\n    }\n  };\n\n  function SVGFillFilter(filter, filterManager, elem, id) {\n    this.filterManager = filterManager;\n    var feColorMatrix = createNS('feColorMatrix');\n    feColorMatrix.setAttribute('type', 'matrix');\n    feColorMatrix.setAttribute('color-interpolation-filters', 'sRGB');\n    feColorMatrix.setAttribute('values', '1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0');\n    feColorMatrix.setAttribute('result', id);\n    filter.appendChild(feColorMatrix);\n    this.matrixFilter = feColorMatrix;\n  }\n\n  SVGFillFilter.prototype.renderFrame = function (forceRender) {\n    if (forceRender || this.filterManager._mdf) {\n      var color = this.filterManager.effectElements[2].p.v;\n      var opacity = this.filterManager.effectElements[6].p.v;\n      this.matrixFilter.setAttribute('values', '0 0 0 0 ' + color[0] + ' 0 0 0 0 ' + color[1] + ' 0 0 0 0 ' + color[2] + ' 0 0 0 ' + opacity + ' 0');\n    }\n  };\n\n  function SVGStrokeEffect(fil, filterManager, elem) {\n    this.initialized = false;\n    this.filterManager = filterManager;\n    this.elem = elem;\n    this.paths = [];\n  }\n\n  SVGStrokeEffect.prototype.initialize = function () {\n    var elemChildren = this.elem.layerElement.children || this.elem.layerElement.childNodes;\n    var path;\n    var groupPath;\n    var i;\n    var len;\n\n    if (this.filterManager.effectElements[1].p.v === 1) {\n      len = this.elem.maskManager.masksProperties.length;\n      i = 0;\n    } else {\n      i = this.filterManager.effectElements[0].p.v - 1;\n      len = i + 1;\n    }\n\n    groupPath = createNS('g');\n    groupPath.setAttribute('fill', 'none');\n    groupPath.setAttribute('stroke-linecap', 'round');\n    groupPath.setAttribute('stroke-dashoffset', 1);\n\n    for (i; i < len; i += 1) {\n      path = createNS('path');\n      groupPath.appendChild(path);\n      this.paths.push({\n        p: path,\n        m: i\n      });\n    }\n\n    if (this.filterManager.effectElements[10].p.v === 3) {\n      var mask = createNS('mask');\n      var id = createElementID();\n      mask.setAttribute('id', id);\n      mask.setAttribute('mask-type', 'alpha');\n      mask.appendChild(groupPath);\n      this.elem.globalData.defs.appendChild(mask);\n      var g = createNS('g');\n      g.setAttribute('mask', 'url(' + getLocationHref() + '#' + id + ')');\n\n      while (elemChildren[0]) {\n        g.appendChild(elemChildren[0]);\n      }\n\n      this.elem.layerElement.appendChild(g);\n      this.masker = mask;\n      groupPath.setAttribute('stroke', '#fff');\n    } else if (this.filterManager.effectElements[10].p.v === 1 || this.filterManager.effectElements[10].p.v === 2) {\n      if (this.filterManager.effectElements[10].p.v === 2) {\n        elemChildren = this.elem.layerElement.children || this.elem.layerElement.childNodes;\n\n        while (elemChildren.length) {\n          this.elem.layerElement.removeChild(elemChildren[0]);\n        }\n      }\n\n      this.elem.layerElement.appendChild(groupPath);\n      this.elem.layerElement.removeAttribute('mask');\n      groupPath.setAttribute('stroke', '#fff');\n    }\n\n    this.initialized = true;\n    this.pathMasker = groupPath;\n  };\n\n  SVGStrokeEffect.prototype.renderFrame = function (forceRender) {\n    if (!this.initialized) {\n      this.initialize();\n    }\n\n    var i;\n    var len = this.paths.length;\n    var mask;\n    var path;\n\n    for (i = 0; i < len; i += 1) {\n      if (this.paths[i].m !== -1) {\n        mask = this.elem.maskManager.viewData[this.paths[i].m];\n        path = this.paths[i].p;\n\n        if (forceRender || this.filterManager._mdf || mask.prop._mdf) {\n          path.setAttribute('d', mask.lastPath);\n        }\n\n        if (forceRender || this.filterManager.effectElements[9].p._mdf || this.filterManager.effectElements[4].p._mdf || this.filterManager.effectElements[7].p._mdf || this.filterManager.effectElements[8].p._mdf || mask.prop._mdf) {\n          var dasharrayValue;\n\n          if (this.filterManager.effectElements[7].p.v !== 0 || this.filterManager.effectElements[8].p.v !== 100) {\n            var s = Math.min(this.filterManager.effectElements[7].p.v, this.filterManager.effectElements[8].p.v) * 0.01;\n            var e = Math.max(this.filterManager.effectElements[7].p.v, this.filterManager.effectElements[8].p.v) * 0.01;\n            var l = path.getTotalLength();\n            dasharrayValue = '0 0 0 ' + l * s + ' ';\n            var lineLength = l * (e - s);\n            var segment = 1 + this.filterManager.effectElements[4].p.v * 2 * this.filterManager.effectElements[9].p.v * 0.01;\n            var units = Math.floor(lineLength / segment);\n            var j;\n\n            for (j = 0; j < units; j += 1) {\n              dasharrayValue += '1 ' + this.filterManager.effectElements[4].p.v * 2 * this.filterManager.effectElements[9].p.v * 0.01 + ' ';\n            }\n\n            dasharrayValue += '0 ' + l * 10 + ' 0 0';\n          } else {\n            dasharrayValue = '1 ' + this.filterManager.effectElements[4].p.v * 2 * this.filterManager.effectElements[9].p.v * 0.01;\n          }\n\n          path.setAttribute('stroke-dasharray', dasharrayValue);\n        }\n      }\n    }\n\n    if (forceRender || this.filterManager.effectElements[4].p._mdf) {\n      this.pathMasker.setAttribute('stroke-width', this.filterManager.effectElements[4].p.v * 2);\n    }\n\n    if (forceRender || this.filterManager.effectElements[6].p._mdf) {\n      this.pathMasker.setAttribute('opacity', this.filterManager.effectElements[6].p.v);\n    }\n\n    if (this.filterManager.effectElements[10].p.v === 1 || this.filterManager.effectElements[10].p.v === 2) {\n      if (forceRender || this.filterManager.effectElements[3].p._mdf) {\n        var color = this.filterManager.effectElements[3].p.v;\n        this.pathMasker.setAttribute('stroke', 'rgb(' + bmFloor(color[0] * 255) + ',' + bmFloor(color[1] * 255) + ',' + bmFloor(color[2] * 255) + ')');\n      }\n    }\n  };\n\n  function SVGTritoneFilter(filter, filterManager, elem, id) {\n    this.filterManager = filterManager;\n    var feColorMatrix = createNS('feColorMatrix');\n    feColorMatrix.setAttribute('type', 'matrix');\n    feColorMatrix.setAttribute('color-interpolation-filters', 'linearRGB');\n    feColorMatrix.setAttribute('values', '0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0');\n    filter.appendChild(feColorMatrix);\n    var feComponentTransfer = createNS('feComponentTransfer');\n    feComponentTransfer.setAttribute('color-interpolation-filters', 'sRGB');\n    feComponentTransfer.setAttribute('result', id);\n    this.matrixFilter = feComponentTransfer;\n    var feFuncR = createNS('feFuncR');\n    feFuncR.setAttribute('type', 'table');\n    feComponentTransfer.appendChild(feFuncR);\n    this.feFuncR = feFuncR;\n    var feFuncG = createNS('feFuncG');\n    feFuncG.setAttribute('type', 'table');\n    feComponentTransfer.appendChild(feFuncG);\n    this.feFuncG = feFuncG;\n    var feFuncB = createNS('feFuncB');\n    feFuncB.setAttribute('type', 'table');\n    feComponentTransfer.appendChild(feFuncB);\n    this.feFuncB = feFuncB;\n    filter.appendChild(feComponentTransfer);\n  }\n\n  SVGTritoneFilter.prototype.renderFrame = function (forceRender) {\n    if (forceRender || this.filterManager._mdf) {\n      var color1 = this.filterManager.effectElements[0].p.v;\n      var color2 = this.filterManager.effectElements[1].p.v;\n      var color3 = this.filterManager.effectElements[2].p.v;\n      var tableR = color3[0] + ' ' + color2[0] + ' ' + color1[0];\n      var tableG = color3[1] + ' ' + color2[1] + ' ' + color1[1];\n      var tableB = color3[2] + ' ' + color2[2] + ' ' + color1[2];\n      this.feFuncR.setAttribute('tableValues', tableR);\n      this.feFuncG.setAttribute('tableValues', tableG);\n      this.feFuncB.setAttribute('tableValues', tableB);\n    }\n  };\n\n  function SVGProLevelsFilter(filter, filterManager, elem, id) {\n    this.filterManager = filterManager;\n    var effectElements = this.filterManager.effectElements;\n    var feComponentTransfer = createNS('feComponentTransfer'); // Red\n\n    if (effectElements[10].p.k || effectElements[10].p.v !== 0 || effectElements[11].p.k || effectElements[11].p.v !== 1 || effectElements[12].p.k || effectElements[12].p.v !== 1 || effectElements[13].p.k || effectElements[13].p.v !== 0 || effectElements[14].p.k || effectElements[14].p.v !== 1) {\n      this.feFuncR = this.createFeFunc('feFuncR', feComponentTransfer);\n    } // Green\n\n\n    if (effectElements[17].p.k || effectElements[17].p.v !== 0 || effectElements[18].p.k || effectElements[18].p.v !== 1 || effectElements[19].p.k || effectElements[19].p.v !== 1 || effectElements[20].p.k || effectElements[20].p.v !== 0 || effectElements[21].p.k || effectElements[21].p.v !== 1) {\n      this.feFuncG = this.createFeFunc('feFuncG', feComponentTransfer);\n    } // Blue\n\n\n    if (effectElements[24].p.k || effectElements[24].p.v !== 0 || effectElements[25].p.k || effectElements[25].p.v !== 1 || effectElements[26].p.k || effectElements[26].p.v !== 1 || effectElements[27].p.k || effectElements[27].p.v !== 0 || effectElements[28].p.k || effectElements[28].p.v !== 1) {\n      this.feFuncB = this.createFeFunc('feFuncB', feComponentTransfer);\n    } // Alpha\n\n\n    if (effectElements[31].p.k || effectElements[31].p.v !== 0 || effectElements[32].p.k || effectElements[32].p.v !== 1 || effectElements[33].p.k || effectElements[33].p.v !== 1 || effectElements[34].p.k || effectElements[34].p.v !== 0 || effectElements[35].p.k || effectElements[35].p.v !== 1) {\n      this.feFuncA = this.createFeFunc('feFuncA', feComponentTransfer);\n    } // RGB\n\n\n    if (this.feFuncR || this.feFuncG || this.feFuncB || this.feFuncA) {\n      feComponentTransfer.setAttribute('color-interpolation-filters', 'sRGB');\n      filter.appendChild(feComponentTransfer);\n    }\n\n    if (effectElements[3].p.k || effectElements[3].p.v !== 0 || effectElements[4].p.k || effectElements[4].p.v !== 1 || effectElements[5].p.k || effectElements[5].p.v !== 1 || effectElements[6].p.k || effectElements[6].p.v !== 0 || effectElements[7].p.k || effectElements[7].p.v !== 1) {\n      feComponentTransfer = createNS('feComponentTransfer');\n      feComponentTransfer.setAttribute('color-interpolation-filters', 'sRGB');\n      feComponentTransfer.setAttribute('result', id);\n      filter.appendChild(feComponentTransfer);\n      this.feFuncRComposed = this.createFeFunc('feFuncR', feComponentTransfer);\n      this.feFuncGComposed = this.createFeFunc('feFuncG', feComponentTransfer);\n      this.feFuncBComposed = this.createFeFunc('feFuncB', feComponentTransfer);\n    }\n  }\n\n  SVGProLevelsFilter.prototype.createFeFunc = function (type, feComponentTransfer) {\n    var feFunc = createNS(type);\n    feFunc.setAttribute('type', 'table');\n    feComponentTransfer.appendChild(feFunc);\n    return feFunc;\n  };\n\n  SVGProLevelsFilter.prototype.getTableValue = function (inputBlack, inputWhite, gamma, outputBlack, outputWhite) {\n    var cnt = 0;\n    var segments = 256;\n    var perc;\n    var min = Math.min(inputBlack, inputWhite);\n    var max = Math.max(inputBlack, inputWhite);\n    var table = Array.call(null, {\n      length: segments\n    });\n    var colorValue;\n    var pos = 0;\n    var outputDelta = outputWhite - outputBlack;\n    var inputDelta = inputWhite - inputBlack;\n\n    while (cnt <= 256) {\n      perc = cnt / 256;\n\n      if (perc <= min) {\n        colorValue = inputDelta < 0 ? outputWhite : outputBlack;\n      } else if (perc >= max) {\n        colorValue = inputDelta < 0 ? outputBlack : outputWhite;\n      } else {\n        colorValue = outputBlack + outputDelta * Math.pow((perc - inputBlack) / inputDelta, 1 / gamma);\n      }\n\n      table[pos] = colorValue;\n      pos += 1;\n      cnt += 256 / (segments - 1);\n    }\n\n    return table.join(' ');\n  };\n\n  SVGProLevelsFilter.prototype.renderFrame = function (forceRender) {\n    if (forceRender || this.filterManager._mdf) {\n      var val;\n      var effectElements = this.filterManager.effectElements;\n\n      if (this.feFuncRComposed && (forceRender || effectElements[3].p._mdf || effectElements[4].p._mdf || effectElements[5].p._mdf || effectElements[6].p._mdf || effectElements[7].p._mdf)) {\n        val = this.getTableValue(effectElements[3].p.v, effectElements[4].p.v, effectElements[5].p.v, effectElements[6].p.v, effectElements[7].p.v);\n        this.feFuncRComposed.setAttribute('tableValues', val);\n        this.feFuncGComposed.setAttribute('tableValues', val);\n        this.feFuncBComposed.setAttribute('tableValues', val);\n      }\n\n      if (this.feFuncR && (forceRender || effectElements[10].p._mdf || effectElements[11].p._mdf || effectElements[12].p._mdf || effectElements[13].p._mdf || effectElements[14].p._mdf)) {\n        val = this.getTableValue(effectElements[10].p.v, effectElements[11].p.v, effectElements[12].p.v, effectElements[13].p.v, effectElements[14].p.v);\n        this.feFuncR.setAttribute('tableValues', val);\n      }\n\n      if (this.feFuncG && (forceRender || effectElements[17].p._mdf || effectElements[18].p._mdf || effectElements[19].p._mdf || effectElements[20].p._mdf || effectElements[21].p._mdf)) {\n        val = this.getTableValue(effectElements[17].p.v, effectElements[18].p.v, effectElements[19].p.v, effectElements[20].p.v, effectElements[21].p.v);\n        this.feFuncG.setAttribute('tableValues', val);\n      }\n\n      if (this.feFuncB && (forceRender || effectElements[24].p._mdf || effectElements[25].p._mdf || effectElements[26].p._mdf || effectElements[27].p._mdf || effectElements[28].p._mdf)) {\n        val = this.getTableValue(effectElements[24].p.v, effectElements[25].p.v, effectElements[26].p.v, effectElements[27].p.v, effectElements[28].p.v);\n        this.feFuncB.setAttribute('tableValues', val);\n      }\n\n      if (this.feFuncA && (forceRender || effectElements[31].p._mdf || effectElements[32].p._mdf || effectElements[33].p._mdf || effectElements[34].p._mdf || effectElements[35].p._mdf)) {\n        val = this.getTableValue(effectElements[31].p.v, effectElements[32].p.v, effectElements[33].p.v, effectElements[34].p.v, effectElements[35].p.v);\n        this.feFuncA.setAttribute('tableValues', val);\n      }\n    }\n  };\n\n  function SVGDropShadowEffect(filter, filterManager, elem, id, source) {\n    var globalFilterSize = filterManager.container.globalData.renderConfig.filterSize;\n    var filterSize = filterManager.data.fs || globalFilterSize;\n    filter.setAttribute('x', filterSize.x || globalFilterSize.x);\n    filter.setAttribute('y', filterSize.y || globalFilterSize.y);\n    filter.setAttribute('width', filterSize.width || globalFilterSize.width);\n    filter.setAttribute('height', filterSize.height || globalFilterSize.height);\n    this.filterManager = filterManager;\n    var feGaussianBlur = createNS('feGaussianBlur');\n    feGaussianBlur.setAttribute('in', 'SourceAlpha');\n    feGaussianBlur.setAttribute('result', id + '_drop_shadow_1');\n    feGaussianBlur.setAttribute('stdDeviation', '0');\n    this.feGaussianBlur = feGaussianBlur;\n    filter.appendChild(feGaussianBlur);\n    var feOffset = createNS('feOffset');\n    feOffset.setAttribute('dx', '25');\n    feOffset.setAttribute('dy', '0');\n    feOffset.setAttribute('in', id + '_drop_shadow_1');\n    feOffset.setAttribute('result', id + '_drop_shadow_2');\n    this.feOffset = feOffset;\n    filter.appendChild(feOffset);\n    var feFlood = createNS('feFlood');\n    feFlood.setAttribute('flood-color', '#00ff00');\n    feFlood.setAttribute('flood-opacity', '1');\n    feFlood.setAttribute('result', id + '_drop_shadow_3');\n    this.feFlood = feFlood;\n    filter.appendChild(feFlood);\n    var feComposite = createNS('feComposite');\n    feComposite.setAttribute('in', id + '_drop_shadow_3');\n    feComposite.setAttribute('in2', id + '_drop_shadow_2');\n    feComposite.setAttribute('operator', 'in');\n    feComposite.setAttribute('result', id + '_drop_shadow_4');\n    filter.appendChild(feComposite);\n    var feMerge = this.createMergeNode(id, [id + '_drop_shadow_4', source]);\n    filter.appendChild(feMerge); //\n  }\n\n  extendPrototype([SVGComposableEffect], SVGDropShadowEffect);\n\n  SVGDropShadowEffect.prototype.renderFrame = function (forceRender) {\n    if (forceRender || this.filterManager._mdf) {\n      if (forceRender || this.filterManager.effectElements[4].p._mdf) {\n        this.feGaussianBlur.setAttribute('stdDeviation', this.filterManager.effectElements[4].p.v / 4);\n      }\n\n      if (forceRender || this.filterManager.effectElements[0].p._mdf) {\n        var col = this.filterManager.effectElements[0].p.v;\n        this.feFlood.setAttribute('flood-color', rgbToHex(Math.round(col[0] * 255), Math.round(col[1] * 255), Math.round(col[2] * 255)));\n      }\n\n      if (forceRender || this.filterManager.effectElements[1].p._mdf) {\n        this.feFlood.setAttribute('flood-opacity', this.filterManager.effectElements[1].p.v / 255);\n      }\n\n      if (forceRender || this.filterManager.effectElements[2].p._mdf || this.filterManager.effectElements[3].p._mdf) {\n        var distance = this.filterManager.effectElements[3].p.v;\n        var angle = (this.filterManager.effectElements[2].p.v - 90) * degToRads;\n        var x = distance * Math.cos(angle);\n        var y = distance * Math.sin(angle);\n        this.feOffset.setAttribute('dx', x);\n        this.feOffset.setAttribute('dy', y);\n      }\n    }\n  };\n\n  var _svgMatteSymbols = [];\n\n  function SVGMatte3Effect(filterElem, filterManager, elem) {\n    this.initialized = false;\n    this.filterManager = filterManager;\n    this.filterElem = filterElem;\n    this.elem = elem;\n    elem.matteElement = createNS('g');\n    elem.matteElement.appendChild(elem.layerElement);\n    elem.matteElement.appendChild(elem.transformedElement);\n    elem.baseElement = elem.matteElement;\n  }\n\n  SVGMatte3Effect.prototype.findSymbol = function (mask) {\n    var i = 0;\n    var len = _svgMatteSymbols.length;\n\n    while (i < len) {\n      if (_svgMatteSymbols[i] === mask) {\n        return _svgMatteSymbols[i];\n      }\n\n      i += 1;\n    }\n\n    return null;\n  };\n\n  SVGMatte3Effect.prototype.replaceInParent = function (mask, symbolId) {\n    var parentNode = mask.layerElement.parentNode;\n\n    if (!parentNode) {\n      return;\n    }\n\n    var children = parentNode.children;\n    var i = 0;\n    var len = children.length;\n\n    while (i < len) {\n      if (children[i] === mask.layerElement) {\n        break;\n      }\n\n      i += 1;\n    }\n\n    var nextChild;\n\n    if (i <= len - 2) {\n      nextChild = children[i + 1];\n    }\n\n    var useElem = createNS('use');\n    useElem.setAttribute('href', '#' + symbolId);\n\n    if (nextChild) {\n      parentNode.insertBefore(useElem, nextChild);\n    } else {\n      parentNode.appendChild(useElem);\n    }\n  };\n\n  SVGMatte3Effect.prototype.setElementAsMask = function (elem, mask) {\n    if (!this.findSymbol(mask)) {\n      var symbolId = createElementID();\n      var masker = createNS('mask');\n      masker.setAttribute('id', mask.layerId);\n      masker.setAttribute('mask-type', 'alpha');\n\n      _svgMatteSymbols.push(mask);\n\n      var defs = elem.globalData.defs;\n      defs.appendChild(masker);\n      var symbol = createNS('symbol');\n      symbol.setAttribute('id', symbolId);\n      this.replaceInParent(mask, symbolId);\n      symbol.appendChild(mask.layerElement);\n      defs.appendChild(symbol);\n      var useElem = createNS('use');\n      useElem.setAttribute('href', '#' + symbolId);\n      masker.appendChild(useElem);\n      mask.data.hd = false;\n      mask.show();\n    }\n\n    elem.setMatte(mask.layerId);\n  };\n\n  SVGMatte3Effect.prototype.initialize = function () {\n    var ind = this.filterManager.effectElements[0].p.v;\n    var elements = this.elem.comp.elements;\n    var i = 0;\n    var len = elements.length;\n\n    while (i < len) {\n      if (elements[i] && elements[i].data.ind === ind) {\n        this.setElementAsMask(this.elem, elements[i]);\n      }\n\n      i += 1;\n    }\n\n    this.initialized = true;\n  };\n\n  SVGMatte3Effect.prototype.renderFrame = function () {\n    if (!this.initialized) {\n      this.initialize();\n    }\n  };\n\n  function SVGGaussianBlurEffect(filter, filterManager, elem, id) {\n    // Outset the filter region by 100% on all sides to accommodate blur expansion.\n    filter.setAttribute('x', '-100%');\n    filter.setAttribute('y', '-100%');\n    filter.setAttribute('width', '300%');\n    filter.setAttribute('height', '300%');\n    this.filterManager = filterManager;\n    var feGaussianBlur = createNS('feGaussianBlur');\n    feGaussianBlur.setAttribute('result', id);\n    filter.appendChild(feGaussianBlur);\n    this.feGaussianBlur = feGaussianBlur;\n  }\n\n  SVGGaussianBlurEffect.prototype.renderFrame = function (forceRender) {\n    if (forceRender || this.filterManager._mdf) {\n      // Empirical value, matching AE's blur appearance.\n      var kBlurrinessToSigma = 0.3;\n      var sigma = this.filterManager.effectElements[0].p.v * kBlurrinessToSigma; // Dimensions mapping:\n      //\n      //   1 -> horizontal & vertical\n      //   2 -> horizontal only\n      //   3 -> vertical only\n      //\n\n      var dimensions = this.filterManager.effectElements[1].p.v;\n      var sigmaX = dimensions == 3 ? 0 : sigma; // eslint-disable-line eqeqeq\n\n      var sigmaY = dimensions == 2 ? 0 : sigma; // eslint-disable-line eqeqeq\n\n      this.feGaussianBlur.setAttribute('stdDeviation', sigmaX + ' ' + sigmaY); // Repeat edges mapping:\n      //\n      //   0 -> off -> duplicate\n      //   1 -> on  -> wrap\n\n      var edgeMode = this.filterManager.effectElements[2].p.v == 1 ? 'wrap' : 'duplicate'; // eslint-disable-line eqeqeq\n\n      this.feGaussianBlur.setAttribute('edgeMode', edgeMode);\n    }\n  };\n\n  registerRenderer('canvas', CanvasRenderer);\n  registerRenderer('html', HybridRenderer);\n  registerRenderer('svg', SVGRenderer); // Registering shape modifiers\n\n  ShapeModifiers.registerModifier('tm', TrimModifier);\n  ShapeModifiers.registerModifier('pb', PuckerAndBloatModifier);\n  ShapeModifiers.registerModifier('rp', RepeaterModifier);\n  ShapeModifiers.registerModifier('rd', RoundCornersModifier); // Registering expression plugin\n\n  setExpressionsPlugin(Expressions);\n  initialize$1();\n  initialize(); // Registering svg effects\n\n  registerEffect(20, SVGTintFilter, true);\n  registerEffect(21, SVGFillFilter, true);\n  registerEffect(22, SVGStrokeEffect, false);\n  registerEffect(23, SVGTritoneFilter, true);\n  registerEffect(24, SVGProLevelsFilter, true);\n  registerEffect(25, SVGDropShadowEffect, true);\n  registerEffect(28, SVGMatte3Effect, false);\n  registerEffect(29, SVGGaussianBlurEffect, true);\n\n  return lottie;\n\n}));\n","\"use strict\"\n\nvar twoProduct = require(\"two-product\")\nvar robustSum = require(\"robust-sum\")\nvar robustScale = require(\"robust-scale\")\nvar robustSubtract = require(\"robust-subtract\")\n\nvar NUM_EXPAND = 5\n\nvar EPSILON     = 1.1102230246251565e-16\nvar ERRBOUND3   = (3.0 + 16.0 * EPSILON) * EPSILON\nvar ERRBOUND4   = (7.0 + 56.0 * EPSILON) * EPSILON\n\nfunction orientation_3(sum, prod, scale, sub) {\n  return function orientation3Exact(m0, m1, m2) {\n    var p = sum(sum(prod(m1[1], m2[0]), prod(-m2[1], m1[0])), sum(prod(m0[1], m1[0]), prod(-m1[1], m0[0])))\n    var n = sum(prod(m0[1], m2[0]), prod(-m2[1], m0[0]))\n    var d = sub(p, n)\n    return d[d.length - 1]\n  }\n}\n\nfunction orientation_4(sum, prod, scale, sub) {\n  return function orientation4Exact(m0, m1, m2, m3) {\n    var p = sum(sum(scale(sum(prod(m2[1], m3[0]), prod(-m3[1], m2[0])), m1[2]), sum(scale(sum(prod(m1[1], m3[0]), prod(-m3[1], m1[0])), -m2[2]), scale(sum(prod(m1[1], m2[0]), prod(-m2[1], m1[0])), m3[2]))), sum(scale(sum(prod(m1[1], m3[0]), prod(-m3[1], m1[0])), m0[2]), sum(scale(sum(prod(m0[1], m3[0]), prod(-m3[1], m0[0])), -m1[2]), scale(sum(prod(m0[1], m1[0]), prod(-m1[1], m0[0])), m3[2]))))\n    var n = sum(sum(scale(sum(prod(m2[1], m3[0]), prod(-m3[1], m2[0])), m0[2]), sum(scale(sum(prod(m0[1], m3[0]), prod(-m3[1], m0[0])), -m2[2]), scale(sum(prod(m0[1], m2[0]), prod(-m2[1], m0[0])), m3[2]))), sum(scale(sum(prod(m1[1], m2[0]), prod(-m2[1], m1[0])), m0[2]), sum(scale(sum(prod(m0[1], m2[0]), prod(-m2[1], m0[0])), -m1[2]), scale(sum(prod(m0[1], m1[0]), prod(-m1[1], m0[0])), m2[2]))))\n    var d = sub(p, n)\n    return d[d.length - 1]\n  }\n}\n\nfunction orientation_5(sum, prod, scale, sub) {\n  return function orientation5Exact(m0, m1, m2, m3, m4) {\n    var p = sum(sum(sum(scale(sum(scale(sum(prod(m3[1], m4[0]), prod(-m4[1], m3[0])), m2[2]), sum(scale(sum(prod(m2[1], m4[0]), prod(-m4[1], m2[0])), -m3[2]), scale(sum(prod(m2[1], m3[0]), prod(-m3[1], m2[0])), m4[2]))), m1[3]), sum(scale(sum(scale(sum(prod(m3[1], m4[0]), prod(-m4[1], m3[0])), m1[2]), sum(scale(sum(prod(m1[1], m4[0]), prod(-m4[1], m1[0])), -m3[2]), scale(sum(prod(m1[1], m3[0]), prod(-m3[1], m1[0])), m4[2]))), -m2[3]), scale(sum(scale(sum(prod(m2[1], m4[0]), prod(-m4[1], m2[0])), m1[2]), sum(scale(sum(prod(m1[1], m4[0]), prod(-m4[1], m1[0])), -m2[2]), scale(sum(prod(m1[1], m2[0]), prod(-m2[1], m1[0])), m4[2]))), m3[3]))), sum(scale(sum(scale(sum(prod(m2[1], m3[0]), prod(-m3[1], m2[0])), m1[2]), sum(scale(sum(prod(m1[1], m3[0]), prod(-m3[1], m1[0])), -m2[2]), scale(sum(prod(m1[1], m2[0]), prod(-m2[1], m1[0])), m3[2]))), -m4[3]), sum(scale(sum(scale(sum(prod(m3[1], m4[0]), prod(-m4[1], m3[0])), m1[2]), sum(scale(sum(prod(m1[1], m4[0]), prod(-m4[1], m1[0])), -m3[2]), scale(sum(prod(m1[1], m3[0]), prod(-m3[1], m1[0])), m4[2]))), m0[3]), scale(sum(scale(sum(prod(m3[1], m4[0]), prod(-m4[1], m3[0])), m0[2]), sum(scale(sum(prod(m0[1], m4[0]), prod(-m4[1], m0[0])), -m3[2]), scale(sum(prod(m0[1], m3[0]), prod(-m3[1], m0[0])), m4[2]))), -m1[3])))), sum(sum(scale(sum(scale(sum(prod(m1[1], m4[0]), prod(-m4[1], m1[0])), m0[2]), sum(scale(sum(prod(m0[1], m4[0]), prod(-m4[1], m0[0])), -m1[2]), scale(sum(prod(m0[1], m1[0]), prod(-m1[1], m0[0])), m4[2]))), m3[3]), sum(scale(sum(scale(sum(prod(m1[1], m3[0]), prod(-m3[1], m1[0])), m0[2]), sum(scale(sum(prod(m0[1], m3[0]), prod(-m3[1], m0[0])), -m1[2]), scale(sum(prod(m0[1], m1[0]), prod(-m1[1], m0[0])), m3[2]))), -m4[3]), scale(sum(scale(sum(prod(m2[1], m3[0]), prod(-m3[1], m2[0])), m1[2]), sum(scale(sum(prod(m1[1], m3[0]), prod(-m3[1], m1[0])), -m2[2]), scale(sum(prod(m1[1], m2[0]), prod(-m2[1], m1[0])), m3[2]))), m0[3]))), sum(scale(sum(scale(sum(prod(m2[1], m3[0]), prod(-m3[1], m2[0])), m0[2]), sum(scale(sum(prod(m0[1], m3[0]), prod(-m3[1], m0[0])), -m2[2]), scale(sum(prod(m0[1], m2[0]), prod(-m2[1], m0[0])), m3[2]))), -m1[3]), sum(scale(sum(scale(sum(prod(m1[1], m3[0]), prod(-m3[1], m1[0])), m0[2]), sum(scale(sum(prod(m0[1], m3[0]), prod(-m3[1], m0[0])), -m1[2]), scale(sum(prod(m0[1], m1[0]), prod(-m1[1], m0[0])), m3[2]))), m2[3]), scale(sum(scale(sum(prod(m1[1], m2[0]), prod(-m2[1], m1[0])), m0[2]), sum(scale(sum(prod(m0[1], m2[0]), prod(-m2[1], m0[0])), -m1[2]), scale(sum(prod(m0[1], m1[0]), prod(-m1[1], m0[0])), m2[2]))), -m3[3])))))\n    var n = sum(sum(sum(scale(sum(scale(sum(prod(m3[1], m4[0]), prod(-m4[1], m3[0])), m2[2]), sum(scale(sum(prod(m2[1], m4[0]), prod(-m4[1], m2[0])), -m3[2]), scale(sum(prod(m2[1], m3[0]), prod(-m3[1], m2[0])), m4[2]))), m0[3]), scale(sum(scale(sum(prod(m3[1], m4[0]), prod(-m4[1], m3[0])), m0[2]), sum(scale(sum(prod(m0[1], m4[0]), prod(-m4[1], m0[0])), -m3[2]), scale(sum(prod(m0[1], m3[0]), prod(-m3[1], m0[0])), m4[2]))), -m2[3])), sum(scale(sum(scale(sum(prod(m2[1], m4[0]), prod(-m4[1], m2[0])), m0[2]), sum(scale(sum(prod(m0[1], m4[0]), prod(-m4[1], m0[0])), -m2[2]), scale(sum(prod(m0[1], m2[0]), prod(-m2[1], m0[0])), m4[2]))), m3[3]), scale(sum(scale(sum(prod(m2[1], m3[0]), prod(-m3[1], m2[0])), m0[2]), sum(scale(sum(prod(m0[1], m3[0]), prod(-m3[1], m0[0])), -m2[2]), scale(sum(prod(m0[1], m2[0]), prod(-m2[1], m0[0])), m3[2]))), -m4[3]))), sum(sum(scale(sum(scale(sum(prod(m2[1], m4[0]), prod(-m4[1], m2[0])), m1[2]), sum(scale(sum(prod(m1[1], m4[0]), prod(-m4[1], m1[0])), -m2[2]), scale(sum(prod(m1[1], m2[0]), prod(-m2[1], m1[0])), m4[2]))), m0[3]), scale(sum(scale(sum(prod(m2[1], m4[0]), prod(-m4[1], m2[0])), m0[2]), sum(scale(sum(prod(m0[1], m4[0]), prod(-m4[1], m0[0])), -m2[2]), scale(sum(prod(m0[1], m2[0]), prod(-m2[1], m0[0])), m4[2]))), -m1[3])), sum(scale(sum(scale(sum(prod(m1[1], m4[0]), prod(-m4[1], m1[0])), m0[2]), sum(scale(sum(prod(m0[1], m4[0]), prod(-m4[1], m0[0])), -m1[2]), scale(sum(prod(m0[1], m1[0]), prod(-m1[1], m0[0])), m4[2]))), m2[3]), scale(sum(scale(sum(prod(m1[1], m2[0]), prod(-m2[1], m1[0])), m0[2]), sum(scale(sum(prod(m0[1], m2[0]), prod(-m2[1], m0[0])), -m1[2]), scale(sum(prod(m0[1], m1[0]), prod(-m1[1], m0[0])), m2[2]))), -m4[3]))))\n    var d = sub(p, n)\n    return d[d.length - 1]\n  }\n}\n\nfunction orientation(n) {\n  var fn =\n    n === 3 ? orientation_3 :\n    n === 4 ? orientation_4 : orientation_5\n\n  return fn(robustSum, twoProduct, robustScale, robustSubtract)\n}\n\nvar orientation3Exact = orientation(3)\nvar orientation4Exact = orientation(4)\n\nvar CACHED = [\n  function orientation0() { return 0 },\n  function orientation1() { return 0 },\n  function orientation2(a, b) {\n    return b[0] - a[0]\n  },\n  function orientation3(a, b, c) {\n    var l = (a[1] - c[1]) * (b[0] - c[0])\n    var r = (a[0] - c[0]) * (b[1] - c[1])\n    var det = l - r\n    var s\n    if(l > 0) {\n      if(r <= 0) {\n        return det\n      } else {\n        s = l + r\n      }\n    } else if(l < 0) {\n      if(r >= 0) {\n        return det\n      } else {\n        s = -(l + r)\n      }\n    } else {\n      return det\n    }\n    var tol = ERRBOUND3 * s\n    if(det >= tol || det <= -tol) {\n      return det\n    }\n    return orientation3Exact(a, b, c)\n  },\n  function orientation4(a,b,c,d) {\n    var adx = a[0] - d[0]\n    var bdx = b[0] - d[0]\n    var cdx = c[0] - d[0]\n    var ady = a[1] - d[1]\n    var bdy = b[1] - d[1]\n    var cdy = c[1] - d[1]\n    var adz = a[2] - d[2]\n    var bdz = b[2] - d[2]\n    var cdz = c[2] - d[2]\n    var bdxcdy = bdx * cdy\n    var cdxbdy = cdx * bdy\n    var cdxady = cdx * ady\n    var adxcdy = adx * cdy\n    var adxbdy = adx * bdy\n    var bdxady = bdx * ady\n    var det = adz * (bdxcdy - cdxbdy)\n            + bdz * (cdxady - adxcdy)\n            + cdz * (adxbdy - bdxady)\n    var permanent = (Math.abs(bdxcdy) + Math.abs(cdxbdy)) * Math.abs(adz)\n                  + (Math.abs(cdxady) + Math.abs(adxcdy)) * Math.abs(bdz)\n                  + (Math.abs(adxbdy) + Math.abs(bdxady)) * Math.abs(cdz)\n    var tol = ERRBOUND4 * permanent\n    if ((det > tol) || (-det > tol)) {\n      return det\n    }\n    return orientation4Exact(a,b,c,d)\n  }\n]\n\nfunction slowOrient(args) {\n  var proc = CACHED[args.length]\n  if(!proc) {\n    proc = CACHED[args.length] = orientation(args.length)\n  }\n  return proc.apply(undefined, args)\n}\n\nfunction proc (slow, o0, o1, o2, o3, o4, o5) {\n  return function getOrientation(a0, a1, a2, a3, a4) {\n    switch (arguments.length) {\n      case 0:\n      case 1:\n        return 0;\n      case 2:\n        return o2(a0, a1)\n      case 3:\n        return o3(a0, a1, a2)\n      case 4:\n        return o4(a0, a1, a2, a3)\n      case 5:\n        return o5(a0, a1, a2, a3, a4)\n    }\n\n    var s = new Array(arguments.length)\n    for (var i = 0; i < arguments.length; ++i) {\n      s[i] = arguments[i]\n    }\n    return slow(s)\n  }\n}\n\nfunction generateOrientationProc() {\n  while(CACHED.length <= NUM_EXPAND) {\n    CACHED.push(orientation(CACHED.length))\n  }\n  module.exports = proc.apply(undefined, [slowOrient].concat(CACHED))\n  for(var i=0; i<=NUM_EXPAND; ++i) {\n    module.exports[i] = CACHED[i]\n  }\n}\n\ngenerateOrientationProc()","module.exports = robustPointInPolygon\n\nvar orient = require('robust-orientation')\n\nfunction robustPointInPolygon(vs, point) {\n  var x = point[0]\n  var y = point[1]\n  var n = vs.length\n  var inside = 1\n  var lim = n\n  for(var i = 0, j = n-1; i<lim; j=i++) {\n    var a = vs[i]\n    var b = vs[j]\n    var yi = a[1]\n    var yj = b[1]\n    if(yj < yi) {\n      if(yj < y && y < yi) {\n        var s = orient(a, b, point)\n        if(s === 0) {\n          return 0\n        } else {\n          inside ^= (0 < s)|0\n        }\n      } else if(y === yi) {\n        var c = vs[(i+1)%n]\n        var yk = c[1]\n        if(yi < yk) {\n          var s = orient(a, b, point)\n          if(s === 0) {\n            return 0\n          } else {\n            inside ^= (0 < s)|0\n          }\n        }\n      }\n    } else if(yi < yj) {\n      if(yi < y && y < yj) {\n        var s = orient(a, b, point)\n        if(s === 0) {\n          return 0\n        } else {\n          inside ^= (s < 0)|0\n        }\n      } else if(y === yi) {\n        var c = vs[(i+1)%n]\n        var yk = c[1]\n        if(yk < yi) {\n          var s = orient(a, b, point)\n          if(s === 0) {\n            return 0\n          } else {\n            inside ^= (s < 0)|0\n          }\n        }\n      }\n    } else if(y === yi) {\n      var x0 = Math.min(a[0], b[0])\n      var x1 = Math.max(a[0], b[0])\n      if(i === 0) {\n        while(j>0) {\n          var k = (j+n-1)%n\n          var p = vs[k]\n          if(p[1] !== y) {\n            break\n          }\n          var px = p[0]\n          x0 = Math.min(x0, px)\n          x1 = Math.max(x1, px)\n          j = k\n        }\n        if(j === 0) {\n          if(x0 <= x && x <= x1) {\n            return 0\n          }\n          return 1 \n        }\n        lim = j+1\n      }\n      var y0 = vs[(j+n-1)%n][1]\n      while(i+1<lim) {\n        var p = vs[i+1]\n        if(p[1] !== y) {\n          break\n        }\n        var px = p[0]\n        x0 = Math.min(x0, px)\n        x1 = Math.max(x1, px)\n        i += 1\n      }\n      if(x0 <= x && x <= x1) {\n        return 0\n      }\n      var y1 = vs[(i+1)%n][1]\n      if(x < x0 && (y0 < y !== y1 < y)) {\n        inside ^= 1\n      }\n    }\n  }\n  return 2 * inside - 1\n}","\"use strict\"\n\nvar twoProduct = require(\"two-product\")\nvar twoSum = require(\"two-sum\")\n\nmodule.exports = scaleLinearExpansion\n\nfunction scaleLinearExpansion(e, scale) {\n  var n = e.length\n  if(n === 1) {\n    var ts = twoProduct(e[0], scale)\n    if(ts[0]) {\n      return ts\n    }\n    return [ ts[1] ]\n  }\n  var g = new Array(2 * n)\n  var q = [0.1, 0.1]\n  var t = [0.1, 0.1]\n  var count = 0\n  twoProduct(e[0], scale, q)\n  if(q[0]) {\n    g[count++] = q[0]\n  }\n  for(var i=1; i<n; ++i) {\n    twoProduct(e[i], scale, t)\n    var pq = q[1]\n    twoSum(pq, t[0], q)\n    if(q[0]) {\n      g[count++] = q[0]\n    }\n    var a = t[1]\n    var b = q[1]\n    var x = a + b\n    var bv = x - a\n    var y = b - bv\n    q[1] = x\n    if(y) {\n      g[count++] = y\n    }\n  }\n  if(q[1]) {\n    g[count++] = q[1]\n  }\n  if(count === 0) {\n    g[count++] = 0.0\n  }\n  g.length = count\n  return g\n}","\"use strict\"\n\nmodule.exports = robustSubtract\n\n//Easy case: Add two scalars\nfunction scalarScalar(a, b) {\n  var x = a + b\n  var bv = x - a\n  var av = x - bv\n  var br = b - bv\n  var ar = a - av\n  var y = ar + br\n  if(y) {\n    return [y, x]\n  }\n  return [x]\n}\n\nfunction robustSubtract(e, f) {\n  var ne = e.length|0\n  var nf = f.length|0\n  if(ne === 1 && nf === 1) {\n    return scalarScalar(e[0], -f[0])\n  }\n  var n = ne + nf\n  var g = new Array(n)\n  var count = 0\n  var eptr = 0\n  var fptr = 0\n  var abs = Math.abs\n  var ei = e[eptr]\n  var ea = abs(ei)\n  var fi = -f[fptr]\n  var fa = abs(fi)\n  var a, b\n  if(ea < fa) {\n    b = ei\n    eptr += 1\n    if(eptr < ne) {\n      ei = e[eptr]\n      ea = abs(ei)\n    }\n  } else {\n    b = fi\n    fptr += 1\n    if(fptr < nf) {\n      fi = -f[fptr]\n      fa = abs(fi)\n    }\n  }\n  if((eptr < ne && ea < fa) || (fptr >= nf)) {\n    a = ei\n    eptr += 1\n    if(eptr < ne) {\n      ei = e[eptr]\n      ea = abs(ei)\n    }\n  } else {\n    a = fi\n    fptr += 1\n    if(fptr < nf) {\n      fi = -f[fptr]\n      fa = abs(fi)\n    }\n  }\n  var x = a + b\n  var bv = x - a\n  var y = b - bv\n  var q0 = y\n  var q1 = x\n  var _x, _bv, _av, _br, _ar\n  while(eptr < ne && fptr < nf) {\n    if(ea < fa) {\n      a = ei\n      eptr += 1\n      if(eptr < ne) {\n        ei = e[eptr]\n        ea = abs(ei)\n      }\n    } else {\n      a = fi\n      fptr += 1\n      if(fptr < nf) {\n        fi = -f[fptr]\n        fa = abs(fi)\n      }\n    }\n    b = q0\n    x = a + b\n    bv = x - a\n    y = b - bv\n    if(y) {\n      g[count++] = y\n    }\n    _x = q1 + x\n    _bv = _x - q1\n    _av = _x - _bv\n    _br = x - _bv\n    _ar = q1 - _av\n    q0 = _ar + _br\n    q1 = _x\n  }\n  while(eptr < ne) {\n    a = ei\n    b = q0\n    x = a + b\n    bv = x - a\n    y = b - bv\n    if(y) {\n      g[count++] = y\n    }\n    _x = q1 + x\n    _bv = _x - q1\n    _av = _x - _bv\n    _br = x - _bv\n    _ar = q1 - _av\n    q0 = _ar + _br\n    q1 = _x\n    eptr += 1\n    if(eptr < ne) {\n      ei = e[eptr]\n    }\n  }\n  while(fptr < nf) {\n    a = fi\n    b = q0\n    x = a + b\n    bv = x - a\n    y = b - bv\n    if(y) {\n      g[count++] = y\n    } \n    _x = q1 + x\n    _bv = _x - q1\n    _av = _x - _bv\n    _br = x - _bv\n    _ar = q1 - _av\n    q0 = _ar + _br\n    q1 = _x\n    fptr += 1\n    if(fptr < nf) {\n      fi = -f[fptr]\n    }\n  }\n  if(q0) {\n    g[count++] = q0\n  }\n  if(q1) {\n    g[count++] = q1\n  }\n  if(!count) {\n    g[count++] = 0.0  \n  }\n  g.length = count\n  return g\n}","\"use strict\"\n\nmodule.exports = linearExpansionSum\n\n//Easy case: Add two scalars\nfunction scalarScalar(a, b) {\n  var x = a + b\n  var bv = x - a\n  var av = x - bv\n  var br = b - bv\n  var ar = a - av\n  var y = ar + br\n  if(y) {\n    return [y, x]\n  }\n  return [x]\n}\n\nfunction linearExpansionSum(e, f) {\n  var ne = e.length|0\n  var nf = f.length|0\n  if(ne === 1 && nf === 1) {\n    return scalarScalar(e[0], f[0])\n  }\n  var n = ne + nf\n  var g = new Array(n)\n  var count = 0\n  var eptr = 0\n  var fptr = 0\n  var abs = Math.abs\n  var ei = e[eptr]\n  var ea = abs(ei)\n  var fi = f[fptr]\n  var fa = abs(fi)\n  var a, b\n  if(ea < fa) {\n    b = ei\n    eptr += 1\n    if(eptr < ne) {\n      ei = e[eptr]\n      ea = abs(ei)\n    }\n  } else {\n    b = fi\n    fptr += 1\n    if(fptr < nf) {\n      fi = f[fptr]\n      fa = abs(fi)\n    }\n  }\n  if((eptr < ne && ea < fa) || (fptr >= nf)) {\n    a = ei\n    eptr += 1\n    if(eptr < ne) {\n      ei = e[eptr]\n      ea = abs(ei)\n    }\n  } else {\n    a = fi\n    fptr += 1\n    if(fptr < nf) {\n      fi = f[fptr]\n      fa = abs(fi)\n    }\n  }\n  var x = a + b\n  var bv = x - a\n  var y = b - bv\n  var q0 = y\n  var q1 = x\n  var _x, _bv, _av, _br, _ar\n  while(eptr < ne && fptr < nf) {\n    if(ea < fa) {\n      a = ei\n      eptr += 1\n      if(eptr < ne) {\n        ei = e[eptr]\n        ea = abs(ei)\n      }\n    } else {\n      a = fi\n      fptr += 1\n      if(fptr < nf) {\n        fi = f[fptr]\n        fa = abs(fi)\n      }\n    }\n    b = q0\n    x = a + b\n    bv = x - a\n    y = b - bv\n    if(y) {\n      g[count++] = y\n    }\n    _x = q1 + x\n    _bv = _x - q1\n    _av = _x - _bv\n    _br = x - _bv\n    _ar = q1 - _av\n    q0 = _ar + _br\n    q1 = _x\n  }\n  while(eptr < ne) {\n    a = ei\n    b = q0\n    x = a + b\n    bv = x - a\n    y = b - bv\n    if(y) {\n      g[count++] = y\n    }\n    _x = q1 + x\n    _bv = _x - q1\n    _av = _x - _bv\n    _br = x - _bv\n    _ar = q1 - _av\n    q0 = _ar + _br\n    q1 = _x\n    eptr += 1\n    if(eptr < ne) {\n      ei = e[eptr]\n    }\n  }\n  while(fptr < nf) {\n    a = fi\n    b = q0\n    x = a + b\n    bv = x - a\n    y = b - bv\n    if(y) {\n      g[count++] = y\n    } \n    _x = q1 + x\n    _bv = _x - q1\n    _av = _x - _bv\n    _br = x - _bv\n    _ar = q1 - _av\n    q0 = _ar + _br\n    q1 = _x\n    fptr += 1\n    if(fptr < nf) {\n      fi = f[fptr]\n    }\n  }\n  if(q0) {\n    g[count++] = q0\n  }\n  if(q1) {\n    g[count++] = q1\n  }\n  if(!count) {\n    g[count++] = 0.0  \n  }\n  g.length = count\n  return g\n}","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./app.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./app.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./attrSort.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./attrSort.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./dragableCanvas.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./dragableCanvas.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./floating-window.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./floating-window.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./hint.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./hint.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./keyframeContainer.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./keyframeContainer.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./keyframeTrack.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./keyframeTrack.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./loading.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./loading.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./nav.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./nav.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./player.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./player.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./resizablePanel.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./resizablePanel.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./selectableTable.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./selectableTable.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./selection.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./selection.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./slider.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./slider.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./sortableSvgTable.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./sortableSvgTable.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./suggestBox.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./suggestBox.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","\n      import API from \"!../../../node_modules/style-loader/dist/runtime/injectStylesIntoStyleTag.js\";\n      import domAPI from \"!../../../node_modules/style-loader/dist/runtime/styleDomAPI.js\";\n      import insertFn from \"!../../../node_modules/style-loader/dist/runtime/insertBySelector.js\";\n      import setAttributes from \"!../../../node_modules/style-loader/dist/runtime/setAttributesWithoutAttributes.js\";\n      import insertStyleElement from \"!../../../node_modules/style-loader/dist/runtime/insertStyleElement.js\";\n      import styleTagTransformFn from \"!../../../node_modules/style-loader/dist/runtime/styleTagTransform.js\";\n      import content, * as namedExport from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./view-window.scss\";\n      \n      \n\nvar options = {};\n\noptions.styleTagTransform = styleTagTransformFn;\noptions.setAttributes = setAttributes;\n\n      options.insert = insertFn.bind(null, \"head\");\n    \noptions.domAPI = domAPI;\noptions.insertStyleElement = insertStyleElement;\n\nvar update = API(content, options);\n\n\n\nexport * from \"!!../../../node_modules/css-loader/dist/cjs.js!../../../node_modules/sass-loader/dist/cjs.js!./view-window.scss\";\n       export default content && content.locals ? content.locals : undefined;\n","\"use strict\";\n\nvar stylesInDOM = [];\nfunction getIndexByIdentifier(identifier) {\n  var result = -1;\n  for (var i = 0; i < stylesInDOM.length; i++) {\n    if (stylesInDOM[i].identifier === identifier) {\n      result = i;\n      break;\n    }\n  }\n  return result;\n}\nfunction modulesToDom(list, options) {\n  var idCountMap = {};\n  var identifiers = [];\n  for (var i = 0; i < list.length; i++) {\n    var item = list[i];\n    var id = options.base ? item[0] + options.base : item[0];\n    var count = idCountMap[id] || 0;\n    var identifier = \"\".concat(id, \" \").concat(count);\n    idCountMap[id] = count + 1;\n    var indexByIdentifier = getIndexByIdentifier(identifier);\n    var obj = {\n      css: item[1],\n      media: item[2],\n      sourceMap: item[3],\n      supports: item[4],\n      layer: item[5]\n    };\n    if (indexByIdentifier !== -1) {\n      stylesInDOM[indexByIdentifier].references++;\n      stylesInDOM[indexByIdentifier].updater(obj);\n    } else {\n      var updater = addElementStyle(obj, options);\n      options.byIndex = i;\n      stylesInDOM.splice(i, 0, {\n        identifier: identifier,\n        updater: updater,\n        references: 1\n      });\n    }\n    identifiers.push(identifier);\n  }\n  return identifiers;\n}\nfunction addElementStyle(obj, options) {\n  var api = options.domAPI(options);\n  api.update(obj);\n  var updater = function updater(newObj) {\n    if (newObj) {\n      if (newObj.css === obj.css && newObj.media === obj.media && newObj.sourceMap === obj.sourceMap && newObj.supports === obj.supports && newObj.layer === obj.layer) {\n        return;\n      }\n      api.update(obj = newObj);\n    } else {\n      api.remove();\n    }\n  };\n  return updater;\n}\nmodule.exports = function (list, options) {\n  options = options || {};\n  list = list || [];\n  var lastIdentifiers = modulesToDom(list, options);\n  return function update(newList) {\n    newList = newList || [];\n    for (var i = 0; i < lastIdentifiers.length; i++) {\n      var identifier = lastIdentifiers[i];\n      var index = getIndexByIdentifier(identifier);\n      stylesInDOM[index].references--;\n    }\n    var newLastIdentifiers = modulesToDom(newList, options);\n    for (var _i = 0; _i < lastIdentifiers.length; _i++) {\n      var _identifier = lastIdentifiers[_i];\n      var _index = getIndexByIdentifier(_identifier);\n      if (stylesInDOM[_index].references === 0) {\n        stylesInDOM[_index].updater();\n        stylesInDOM.splice(_index, 1);\n      }\n    }\n    lastIdentifiers = newLastIdentifiers;\n  };\n};","\"use strict\";\n\nvar memo = {};\n\n/* istanbul ignore next  */\nfunction getTarget(target) {\n  if (typeof memo[target] === \"undefined\") {\n    var styleTarget = document.querySelector(target);\n\n    // Special case to return head of iframe instead of iframe itself\n    if (window.HTMLIFrameElement && styleTarget instanceof window.HTMLIFrameElement) {\n      try {\n        // This will throw an exception if access to iframe is blocked\n        // due to cross-origin restrictions\n        styleTarget = styleTarget.contentDocument.head;\n      } catch (e) {\n        // istanbul ignore next\n        styleTarget = null;\n      }\n    }\n    memo[target] = styleTarget;\n  }\n  return memo[target];\n}\n\n/* istanbul ignore next  */\nfunction insertBySelector(insert, style) {\n  var target = getTarget(insert);\n  if (!target) {\n    throw new Error(\"Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.\");\n  }\n  target.appendChild(style);\n}\nmodule.exports = insertBySelector;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction insertStyleElement(options) {\n  var element = document.createElement(\"style\");\n  options.setAttributes(element, options.attributes);\n  options.insert(element, options.options);\n  return element;\n}\nmodule.exports = insertStyleElement;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction setAttributesWithoutAttributes(styleElement) {\n  var nonce = typeof __webpack_nonce__ !== \"undefined\" ? __webpack_nonce__ : null;\n  if (nonce) {\n    styleElement.setAttribute(\"nonce\", nonce);\n  }\n}\nmodule.exports = setAttributesWithoutAttributes;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction apply(styleElement, options, obj) {\n  var css = \"\";\n  if (obj.supports) {\n    css += \"@supports (\".concat(obj.supports, \") {\");\n  }\n  if (obj.media) {\n    css += \"@media \".concat(obj.media, \" {\");\n  }\n  var needLayer = typeof obj.layer !== \"undefined\";\n  if (needLayer) {\n    css += \"@layer\".concat(obj.layer.length > 0 ? \" \".concat(obj.layer) : \"\", \" {\");\n  }\n  css += obj.css;\n  if (needLayer) {\n    css += \"}\";\n  }\n  if (obj.media) {\n    css += \"}\";\n  }\n  if (obj.supports) {\n    css += \"}\";\n  }\n  var sourceMap = obj.sourceMap;\n  if (sourceMap && typeof btoa !== \"undefined\") {\n    css += \"\\n/*# sourceMappingURL=data:application/json;base64,\".concat(btoa(unescape(encodeURIComponent(JSON.stringify(sourceMap)))), \" */\");\n  }\n\n  // For old IE\n  /* istanbul ignore if  */\n  options.styleTagTransform(css, styleElement, options.options);\n}\nfunction removeStyleElement(styleElement) {\n  // istanbul ignore if\n  if (styleElement.parentNode === null) {\n    return false;\n  }\n  styleElement.parentNode.removeChild(styleElement);\n}\n\n/* istanbul ignore next  */\nfunction domAPI(options) {\n  if (typeof document === \"undefined\") {\n    return {\n      update: function update() {},\n      remove: function remove() {}\n    };\n  }\n  var styleElement = options.insertStyleElement(options);\n  return {\n    update: function update(obj) {\n      apply(styleElement, options, obj);\n    },\n    remove: function remove() {\n      removeStyleElement(styleElement);\n    }\n  };\n}\nmodule.exports = domAPI;","\"use strict\";\n\n/* istanbul ignore next  */\nfunction styleTagTransform(css, styleElement) {\n  if (styleElement.styleSheet) {\n    styleElement.styleSheet.cssText = css;\n  } else {\n    while (styleElement.firstChild) {\n      styleElement.removeChild(styleElement.firstChild);\n    }\n    styleElement.appendChild(document.createTextNode(css));\n  }\n}\nmodule.exports = styleTagTransform;","// v1.0 exported just the parser function. To maintain backwards compatibility,\n// we export additional named features as properties of that function.\nvar parserFunction = require('./parser.js').parse;\nparserFunction.parseSVG = parserFunction;\nparserFunction.makeAbsolute = makeSVGPathCommandsAbsolute;\nmodule.exports = parserFunction;\n\nfunction makeSVGPathCommandsAbsolute(commands) {\n\tvar subpathStart, prevCmd={x:0,y:0};\n\tvar attr = {x:'x0',y:'y0',x1:'x0',y1:'y0',x2:'x0',y2:'y0'};\n\tcommands.forEach(function(cmd) {\n\t\tif (cmd.command==='moveto') subpathStart=cmd;\n\t\tcmd.x0=prevCmd.x; cmd.y0=prevCmd.y;\n\t\tfor (var a in attr) if (a in cmd) cmd[a] += cmd.relative ? cmd[attr[a]] : 0;\n\t\tif (!('x' in cmd)) cmd.x = prevCmd.x; // V\n\t\tif (!('y' in cmd)) cmd.y = prevCmd.y; // X\n\t\tcmd.relative = false;\n\t\tcmd.code = cmd.code.toUpperCase();\n\t\tif (cmd.command=='closepath') {\n\t\t\tcmd.x = subpathStart.x;\n\t\t\tcmd.y = subpathStart.y;\n\t\t}\n\t\tprevCmd = cmd;\n\t});\n\treturn commands;\n}\n","/*\n * Generated by PEG.js 0.10.0.\n *\n * http://pegjs.org/\n */\n\n\"use strict\";\n\nfunction peg$subclass(child, parent) {\n  function ctor() { this.constructor = child; }\n  ctor.prototype = parent.prototype;\n  child.prototype = new ctor();\n}\n\nfunction peg$SyntaxError(message, expected, found, location) {\n  this.message  = message;\n  this.expected = expected;\n  this.found    = found;\n  this.location = location;\n  this.name     = \"SyntaxError\";\n\n  if (typeof Error.captureStackTrace === \"function\") {\n    Error.captureStackTrace(this, peg$SyntaxError);\n  }\n}\n\npeg$subclass(peg$SyntaxError, Error);\n\npeg$SyntaxError.buildMessage = function(expected, found) {\n  var DESCRIBE_EXPECTATION_FNS = {\n        literal: function(expectation) {\n          return \"\\\"\" + literalEscape(expectation.text) + \"\\\"\";\n        },\n\n        \"class\": function(expectation) {\n          var escapedParts = \"\",\n              i;\n\n          for (i = 0; i < expectation.parts.length; i++) {\n            escapedParts += expectation.parts[i] instanceof Array\n              ? classEscape(expectation.parts[i][0]) + \"-\" + classEscape(expectation.parts[i][1])\n              : classEscape(expectation.parts[i]);\n          }\n\n          return \"[\" + (expectation.inverted ? \"^\" : \"\") + escapedParts + \"]\";\n        },\n\n        any: function(expectation) {\n          return \"any character\";\n        },\n\n        end: function(expectation) {\n          return \"end of input\";\n        },\n\n        other: function(expectation) {\n          return expectation.description;\n        }\n      };\n\n  function hex(ch) {\n    return ch.charCodeAt(0).toString(16).toUpperCase();\n  }\n\n  function literalEscape(s) {\n    return s\n      .replace(/\\\\/g, '\\\\\\\\')\n      .replace(/\"/g,  '\\\\\"')\n      .replace(/\\0/g, '\\\\0')\n      .replace(/\\t/g, '\\\\t')\n      .replace(/\\n/g, '\\\\n')\n      .replace(/\\r/g, '\\\\r')\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return '\\\\x0' + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return '\\\\x'  + hex(ch); });\n  }\n\n  function classEscape(s) {\n    return s\n      .replace(/\\\\/g, '\\\\\\\\')\n      .replace(/\\]/g, '\\\\]')\n      .replace(/\\^/g, '\\\\^')\n      .replace(/-/g,  '\\\\-')\n      .replace(/\\0/g, '\\\\0')\n      .replace(/\\t/g, '\\\\t')\n      .replace(/\\n/g, '\\\\n')\n      .replace(/\\r/g, '\\\\r')\n      .replace(/[\\x00-\\x0F]/g,          function(ch) { return '\\\\x0' + hex(ch); })\n      .replace(/[\\x10-\\x1F\\x7F-\\x9F]/g, function(ch) { return '\\\\x'  + hex(ch); });\n  }\n\n  function describeExpectation(expectation) {\n    return DESCRIBE_EXPECTATION_FNS[expectation.type](expectation);\n  }\n\n  function describeExpected(expected) {\n    var descriptions = new Array(expected.length),\n        i, j;\n\n    for (i = 0; i < expected.length; i++) {\n      descriptions[i] = describeExpectation(expected[i]);\n    }\n\n    descriptions.sort();\n\n    if (descriptions.length > 0) {\n      for (i = 1, j = 1; i < descriptions.length; i++) {\n        if (descriptions[i - 1] !== descriptions[i]) {\n          descriptions[j] = descriptions[i];\n          j++;\n        }\n      }\n      descriptions.length = j;\n    }\n\n    switch (descriptions.length) {\n      case 1:\n        return descriptions[0];\n\n      case 2:\n        return descriptions[0] + \" or \" + descriptions[1];\n\n      default:\n        return descriptions.slice(0, -1).join(\", \")\n          + \", or \"\n          + descriptions[descriptions.length - 1];\n    }\n  }\n\n  function describeFound(found) {\n    return found ? \"\\\"\" + literalEscape(found) + \"\\\"\" : \"end of input\";\n  }\n\n  return \"Expected \" + describeExpected(expected) + \" but \" + describeFound(found) + \" found.\";\n};\n\nfunction peg$parse(input, options) {\n  options = options !== void 0 ? options : {};\n\n  var peg$FAILED = {},\n\n      peg$startRuleFunctions = { svg_path: peg$parsesvg_path },\n      peg$startRuleFunction  = peg$parsesvg_path,\n\n      peg$c0 = function(data) {\n          if (!data) return [];\n          for (var cmds=[],i=0;i<data.length;i++) cmds=cmds.concat.apply(cmds,data[i]);\n          var first=cmds[0];\n          if (first && first.code=='m'){ // Per spec, first moveto is never relative\n            delete first.relative;\n            first.code = 'M';\n          }\n          return cmds;\n        },\n      peg$c1 = function(first, more) { return merge(first,more) },\n      peg$c2 = /^[Mm]/,\n      peg$c3 = peg$classExpectation([\"M\", \"m\"], false, false),\n      peg$c4 = function(c, first, more) {\n          var move = commands(c,[first]);\n          if (more) move = move.concat(commands(c=='M' ? 'L' : 'l',more[1]));\n          return move;\n        },\n      peg$c5 = /^[Zz]/,\n      peg$c6 = peg$classExpectation([\"Z\", \"z\"], false, false),\n      peg$c7 = function() { return commands('Z') },\n      peg$c8 = /^[Ll]/,\n      peg$c9 = peg$classExpectation([\"L\", \"l\"], false, false),\n      peg$c10 = function(c, args) { return commands(c,args) },\n      peg$c11 = /^[Hh]/,\n      peg$c12 = peg$classExpectation([\"H\", \"h\"], false, false),\n      peg$c13 = function(c, args) { return commands(c,args.map(function(x){ return {x:x}})) },\n      peg$c14 = /^[Vv]/,\n      peg$c15 = peg$classExpectation([\"V\", \"v\"], false, false),\n      peg$c16 = function(c, args) { return commands(c,args.map(function(y){ return {y:y}})) },\n      peg$c17 = /^[Cc]/,\n      peg$c18 = peg$classExpectation([\"C\", \"c\"], false, false),\n      peg$c19 = function(a, b, c) { return { x1:a.x, y1:a.y, x2:b.x, y2:b.y, x:c.x, y:c.y } },\n      peg$c20 = /^[Ss]/,\n      peg$c21 = peg$classExpectation([\"S\", \"s\"], false, false),\n      peg$c22 = function(b, c) { return { x2:b.x, y2:b.y, x:c.x, y:c.y } },\n      peg$c23 = /^[Qq]/,\n      peg$c24 = peg$classExpectation([\"Q\", \"q\"], false, false),\n      peg$c25 = function(a, b) { return { x1:a.x, y1:a.y, x:b.x, y:b.y } },\n      peg$c26 = /^[Tt]/,\n      peg$c27 = peg$classExpectation([\"T\", \"t\"], false, false),\n      peg$c28 = /^[Aa]/,\n      peg$c29 = peg$classExpectation([\"A\", \"a\"], false, false),\n      peg$c30 = function(rx, ry, xrot, large, sweep, xy) { return { rx:rx, ry:ry, xAxisRotation:xrot, largeArc:large, sweep:sweep, x:xy.x, y:xy.y } },\n      peg$c31 = function(x, y) { return { x:x, y:y } },\n      peg$c32 = function(n) { return n*1 },\n      peg$c33 = function(parts) { return parts.join('')*1 },\n      peg$c34 = /^[01]/,\n      peg$c35 = peg$classExpectation([\"0\", \"1\"], false, false),\n      peg$c36 = function(bit) { return bit=='1' },\n      peg$c37 = function() { return '' },\n      peg$c38 = \",\",\n      peg$c39 = peg$literalExpectation(\",\", false),\n      peg$c40 = function(parts) { return parts.join('') },\n      peg$c41 = \".\",\n      peg$c42 = peg$literalExpectation(\".\", false),\n      peg$c43 = /^[eE]/,\n      peg$c44 = peg$classExpectation([\"e\", \"E\"], false, false),\n      peg$c45 = /^[+\\-]/,\n      peg$c46 = peg$classExpectation([\"+\", \"-\"], false, false),\n      peg$c47 = /^[0-9]/,\n      peg$c48 = peg$classExpectation([[\"0\", \"9\"]], false, false),\n      peg$c49 = function(digits) { return digits.join('') },\n      peg$c50 = /^[ \\t\\n\\r]/,\n      peg$c51 = peg$classExpectation([\" \", \"\\t\", \"\\n\", \"\\r\"], false, false),\n\n      peg$currPos          = 0,\n      peg$savedPos         = 0,\n      peg$posDetailsCache  = [{ line: 1, column: 1 }],\n      peg$maxFailPos       = 0,\n      peg$maxFailExpected  = [],\n      peg$silentFails      = 0,\n\n      peg$result;\n\n  if (\"startRule\" in options) {\n    if (!(options.startRule in peg$startRuleFunctions)) {\n      throw new Error(\"Can't start parsing from rule \\\"\" + options.startRule + \"\\\".\");\n    }\n\n    peg$startRuleFunction = peg$startRuleFunctions[options.startRule];\n  }\n\n  function text() {\n    return input.substring(peg$savedPos, peg$currPos);\n  }\n\n  function location() {\n    return peg$computeLocation(peg$savedPos, peg$currPos);\n  }\n\n  function expected(description, location) {\n    location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)\n\n    throw peg$buildStructuredError(\n      [peg$otherExpectation(description)],\n      input.substring(peg$savedPos, peg$currPos),\n      location\n    );\n  }\n\n  function error(message, location) {\n    location = location !== void 0 ? location : peg$computeLocation(peg$savedPos, peg$currPos)\n\n    throw peg$buildSimpleError(message, location);\n  }\n\n  function peg$literalExpectation(text, ignoreCase) {\n    return { type: \"literal\", text: text, ignoreCase: ignoreCase };\n  }\n\n  function peg$classExpectation(parts, inverted, ignoreCase) {\n    return { type: \"class\", parts: parts, inverted: inverted, ignoreCase: ignoreCase };\n  }\n\n  function peg$anyExpectation() {\n    return { type: \"any\" };\n  }\n\n  function peg$endExpectation() {\n    return { type: \"end\" };\n  }\n\n  function peg$otherExpectation(description) {\n    return { type: \"other\", description: description };\n  }\n\n  function peg$computePosDetails(pos) {\n    var details = peg$posDetailsCache[pos], p;\n\n    if (details) {\n      return details;\n    } else {\n      p = pos - 1;\n      while (!peg$posDetailsCache[p]) {\n        p--;\n      }\n\n      details = peg$posDetailsCache[p];\n      details = {\n        line:   details.line,\n        column: details.column\n      };\n\n      while (p < pos) {\n        if (input.charCodeAt(p) === 10) {\n          details.line++;\n          details.column = 1;\n        } else {\n          details.column++;\n        }\n\n        p++;\n      }\n\n      peg$posDetailsCache[pos] = details;\n      return details;\n    }\n  }\n\n  function peg$computeLocation(startPos, endPos) {\n    var startPosDetails = peg$computePosDetails(startPos),\n        endPosDetails   = peg$computePosDetails(endPos);\n\n    return {\n      start: {\n        offset: startPos,\n        line:   startPosDetails.line,\n        column: startPosDetails.column\n      },\n      end: {\n        offset: endPos,\n        line:   endPosDetails.line,\n        column: endPosDetails.column\n      }\n    };\n  }\n\n  function peg$fail(expected) {\n    if (peg$currPos < peg$maxFailPos) { return; }\n\n    if (peg$currPos > peg$maxFailPos) {\n      peg$maxFailPos = peg$currPos;\n      peg$maxFailExpected = [];\n    }\n\n    peg$maxFailExpected.push(expected);\n  }\n\n  function peg$buildSimpleError(message, location) {\n    return new peg$SyntaxError(message, null, null, location);\n  }\n\n  function peg$buildStructuredError(expected, found, location) {\n    return new peg$SyntaxError(\n      peg$SyntaxError.buildMessage(expected, found),\n      expected,\n      found,\n      location\n    );\n  }\n\n  function peg$parsesvg_path() {\n    var s0, s1, s2, s3, s4;\n\n    s0 = peg$currPos;\n    s1 = [];\n    s2 = peg$parsewsp();\n    while (s2 !== peg$FAILED) {\n      s1.push(s2);\n      s2 = peg$parsewsp();\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsemoveTo_drawTo_commandGroups();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = [];\n        s4 = peg$parsewsp();\n        while (s4 !== peg$FAILED) {\n          s3.push(s4);\n          s4 = peg$parsewsp();\n        }\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c0(s2);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsemoveTo_drawTo_commandGroups() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parsemoveTo_drawTo_commandGroup();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      s4 = [];\n      s5 = peg$parsewsp();\n      while (s5 !== peg$FAILED) {\n        s4.push(s5);\n        s5 = peg$parsewsp();\n      }\n      if (s4 !== peg$FAILED) {\n        s5 = peg$parsemoveTo_drawTo_commandGroup();\n        if (s5 !== peg$FAILED) {\n          s4 = [s4, s5];\n          s3 = s4;\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        if (s4 !== peg$FAILED) {\n          s5 = peg$parsemoveTo_drawTo_commandGroup();\n          if (s5 !== peg$FAILED) {\n            s4 = [s4, s5];\n            s3 = s4;\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c1(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsemoveTo_drawTo_commandGroup() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parsemoveto();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      s4 = [];\n      s5 = peg$parsewsp();\n      while (s5 !== peg$FAILED) {\n        s4.push(s5);\n        s5 = peg$parsewsp();\n      }\n      if (s4 !== peg$FAILED) {\n        s5 = peg$parsedrawto_command();\n        if (s5 !== peg$FAILED) {\n          s4 = [s4, s5];\n          s3 = s4;\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        s4 = [];\n        s5 = peg$parsewsp();\n        while (s5 !== peg$FAILED) {\n          s4.push(s5);\n          s5 = peg$parsewsp();\n        }\n        if (s4 !== peg$FAILED) {\n          s5 = peg$parsedrawto_command();\n          if (s5 !== peg$FAILED) {\n            s4 = [s4, s5];\n            s3 = s4;\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c1(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsedrawto_command() {\n    var s0;\n\n    s0 = peg$parseclosepath();\n    if (s0 === peg$FAILED) {\n      s0 = peg$parselineto();\n      if (s0 === peg$FAILED) {\n        s0 = peg$parsehorizontal_lineto();\n        if (s0 === peg$FAILED) {\n          s0 = peg$parsevertical_lineto();\n          if (s0 === peg$FAILED) {\n            s0 = peg$parsecurveto();\n            if (s0 === peg$FAILED) {\n              s0 = peg$parsesmooth_curveto();\n              if (s0 === peg$FAILED) {\n                s0 = peg$parsequadratic_bezier_curveto();\n                if (s0 === peg$FAILED) {\n                  s0 = peg$parsesmooth_quadratic_bezier_curveto();\n                  if (s0 === peg$FAILED) {\n                    s0 = peg$parseelliptical_arc();\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n\n    return s0;\n  }\n\n  function peg$parsemoveto() {\n    var s0, s1, s2, s3, s4, s5, s6;\n\n    s0 = peg$currPos;\n    if (peg$c2.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c3); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsecoordinate_pair();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$currPos;\n          s5 = peg$parsecomma_wsp();\n          if (s5 === peg$FAILED) {\n            s5 = null;\n          }\n          if (s5 !== peg$FAILED) {\n            s6 = peg$parselineto_argument_sequence();\n            if (s6 !== peg$FAILED) {\n              s5 = [s5, s6];\n              s4 = s5;\n            } else {\n              peg$currPos = s4;\n              s4 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s4;\n            s4 = peg$FAILED;\n          }\n          if (s4 === peg$FAILED) {\n            s4 = null;\n          }\n          if (s4 !== peg$FAILED) {\n            peg$savedPos = s0;\n            s1 = peg$c4(s1, s3, s4);\n            s0 = s1;\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseclosepath() {\n    var s0, s1;\n\n    s0 = peg$currPos;\n    if (peg$c5.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c6); }\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c7();\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parselineto() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    if (peg$c8.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c9); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parselineto_argument_sequence();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c10(s1, s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parselineto_argument_sequence() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parsecoordinate_pair();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      s4 = peg$parsecomma_wsp();\n      if (s4 === peg$FAILED) {\n        s4 = null;\n      }\n      if (s4 !== peg$FAILED) {\n        s5 = peg$parsecoordinate_pair();\n        if (s5 !== peg$FAILED) {\n          s4 = [s4, s5];\n          s3 = s4;\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        s4 = peg$parsecomma_wsp();\n        if (s4 === peg$FAILED) {\n          s4 = null;\n        }\n        if (s4 !== peg$FAILED) {\n          s5 = peg$parsecoordinate_pair();\n          if (s5 !== peg$FAILED) {\n            s4 = [s4, s5];\n            s3 = s4;\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c1(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsehorizontal_lineto() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    if (peg$c11.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c12); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsecoordinate_sequence();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c13(s1, s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecoordinate_sequence() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parsenumber();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      s4 = peg$parsecomma_wsp();\n      if (s4 === peg$FAILED) {\n        s4 = null;\n      }\n      if (s4 !== peg$FAILED) {\n        s5 = peg$parsenumber();\n        if (s5 !== peg$FAILED) {\n          s4 = [s4, s5];\n          s3 = s4;\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        s4 = peg$parsecomma_wsp();\n        if (s4 === peg$FAILED) {\n          s4 = null;\n        }\n        if (s4 !== peg$FAILED) {\n          s5 = peg$parsenumber();\n          if (s5 !== peg$FAILED) {\n            s4 = [s4, s5];\n            s3 = s4;\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c1(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsevertical_lineto() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    if (peg$c14.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c15); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsecoordinate_sequence();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c16(s1, s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecurveto() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    if (peg$c17.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c18); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsecurveto_argument_sequence();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c10(s1, s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecurveto_argument_sequence() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parsecurveto_argument();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      s4 = peg$parsecomma_wsp();\n      if (s4 === peg$FAILED) {\n        s4 = null;\n      }\n      if (s4 !== peg$FAILED) {\n        s5 = peg$parsecurveto_argument();\n        if (s5 !== peg$FAILED) {\n          s4 = [s4, s5];\n          s3 = s4;\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        s4 = peg$parsecomma_wsp();\n        if (s4 === peg$FAILED) {\n          s4 = null;\n        }\n        if (s4 !== peg$FAILED) {\n          s5 = peg$parsecurveto_argument();\n          if (s5 !== peg$FAILED) {\n            s4 = [s4, s5];\n            s3 = s4;\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c1(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecurveto_argument() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parsecoordinate_pair();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsecomma_wsp();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsecoordinate_pair();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parsecomma_wsp();\n          if (s4 === peg$FAILED) {\n            s4 = null;\n          }\n          if (s4 !== peg$FAILED) {\n            s5 = peg$parsecoordinate_pair();\n            if (s5 !== peg$FAILED) {\n              peg$savedPos = s0;\n              s1 = peg$c19(s1, s3, s5);\n              s0 = s1;\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsesmooth_curveto() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    if (peg$c20.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c21); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsesmooth_curveto_argument_sequence();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c10(s1, s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsesmooth_curveto_argument_sequence() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parsesmooth_curveto_argument();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      s4 = peg$parsecomma_wsp();\n      if (s4 === peg$FAILED) {\n        s4 = null;\n      }\n      if (s4 !== peg$FAILED) {\n        s5 = peg$parsesmooth_curveto_argument();\n        if (s5 !== peg$FAILED) {\n          s4 = [s4, s5];\n          s3 = s4;\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        s4 = peg$parsecomma_wsp();\n        if (s4 === peg$FAILED) {\n          s4 = null;\n        }\n        if (s4 !== peg$FAILED) {\n          s5 = peg$parsesmooth_curveto_argument();\n          if (s5 !== peg$FAILED) {\n            s4 = [s4, s5];\n            s3 = s4;\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c1(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsesmooth_curveto_argument() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    s1 = peg$parsecoordinate_pair();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsecomma_wsp();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsecoordinate_pair();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c22(s1, s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsequadratic_bezier_curveto() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    if (peg$c23.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c24); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsequadratic_bezier_curveto_argument_sequence();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c10(s1, s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsequadratic_bezier_curveto_argument_sequence() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parsequadratic_bezier_curveto_argument();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      s4 = peg$parsecomma_wsp();\n      if (s4 === peg$FAILED) {\n        s4 = null;\n      }\n      if (s4 !== peg$FAILED) {\n        s5 = peg$parsequadratic_bezier_curveto_argument();\n        if (s5 !== peg$FAILED) {\n          s4 = [s4, s5];\n          s3 = s4;\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        s4 = peg$parsecomma_wsp();\n        if (s4 === peg$FAILED) {\n          s4 = null;\n        }\n        if (s4 !== peg$FAILED) {\n          s5 = peg$parsequadratic_bezier_curveto_argument();\n          if (s5 !== peg$FAILED) {\n            s4 = [s4, s5];\n            s3 = s4;\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c1(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsequadratic_bezier_curveto_argument() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    s1 = peg$parsecoordinate_pair();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsecomma_wsp();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsecoordinate_pair();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c25(s1, s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsesmooth_quadratic_bezier_curveto() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    if (peg$c26.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c27); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsesmooth_quadratic_bezier_curveto_argument_sequence();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c10(s1, s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsesmooth_quadratic_bezier_curveto_argument_sequence() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parsecoordinate_pair();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      s4 = peg$parsecomma_wsp();\n      if (s4 === peg$FAILED) {\n        s4 = null;\n      }\n      if (s4 !== peg$FAILED) {\n        s5 = peg$parsecoordinate_pair();\n        if (s5 !== peg$FAILED) {\n          s4 = [s4, s5];\n          s3 = s4;\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        s4 = peg$parsecomma_wsp();\n        if (s4 === peg$FAILED) {\n          s4 = null;\n        }\n        if (s4 !== peg$FAILED) {\n          s5 = peg$parsecoordinate_pair();\n          if (s5 !== peg$FAILED) {\n            s4 = [s4, s5];\n            s3 = s4;\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c1(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseelliptical_arc() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    if (peg$c28.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c29); }\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$parsewsp();\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$parsewsp();\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parseelliptical_arc_argument_sequence();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c10(s1, s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseelliptical_arc_argument_sequence() {\n    var s0, s1, s2, s3, s4, s5;\n\n    s0 = peg$currPos;\n    s1 = peg$parseelliptical_arc_argument();\n    if (s1 !== peg$FAILED) {\n      s2 = [];\n      s3 = peg$currPos;\n      s4 = peg$parsecomma_wsp();\n      if (s4 === peg$FAILED) {\n        s4 = null;\n      }\n      if (s4 !== peg$FAILED) {\n        s5 = peg$parseelliptical_arc_argument();\n        if (s5 !== peg$FAILED) {\n          s4 = [s4, s5];\n          s3 = s4;\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s3;\n        s3 = peg$FAILED;\n      }\n      while (s3 !== peg$FAILED) {\n        s2.push(s3);\n        s3 = peg$currPos;\n        s4 = peg$parsecomma_wsp();\n        if (s4 === peg$FAILED) {\n          s4 = null;\n        }\n        if (s4 !== peg$FAILED) {\n          s5 = peg$parseelliptical_arc_argument();\n          if (s5 !== peg$FAILED) {\n            s4 = [s4, s5];\n            s3 = s4;\n          } else {\n            peg$currPos = s3;\n            s3 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s3;\n          s3 = peg$FAILED;\n        }\n      }\n      if (s2 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c1(s1, s2);\n        s0 = s1;\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parseelliptical_arc_argument() {\n    var s0, s1, s2, s3, s4, s5, s6, s7, s8, s9, s10, s11;\n\n    s0 = peg$currPos;\n    s1 = peg$parsenonnegative_number();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsecomma_wsp();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsenonnegative_number();\n        if (s3 !== peg$FAILED) {\n          s4 = peg$parsecomma_wsp();\n          if (s4 === peg$FAILED) {\n            s4 = null;\n          }\n          if (s4 !== peg$FAILED) {\n            s5 = peg$parsenumber();\n            if (s5 !== peg$FAILED) {\n              s6 = peg$parsecomma_wsp();\n              if (s6 !== peg$FAILED) {\n                s7 = peg$parseflag();\n                if (s7 !== peg$FAILED) {\n                  s8 = peg$parsecomma_wsp();\n                  if (s8 === peg$FAILED) {\n                    s8 = null;\n                  }\n                  if (s8 !== peg$FAILED) {\n                    s9 = peg$parseflag();\n                    if (s9 !== peg$FAILED) {\n                      s10 = peg$parsecomma_wsp();\n                      if (s10 === peg$FAILED) {\n                        s10 = null;\n                      }\n                      if (s10 !== peg$FAILED) {\n                        s11 = peg$parsecoordinate_pair();\n                        if (s11 !== peg$FAILED) {\n                          peg$savedPos = s0;\n                          s1 = peg$c30(s1, s3, s5, s7, s9, s11);\n                          s0 = s1;\n                        } else {\n                          peg$currPos = s0;\n                          s0 = peg$FAILED;\n                        }\n                      } else {\n                        peg$currPos = s0;\n                        s0 = peg$FAILED;\n                      }\n                    } else {\n                      peg$currPos = s0;\n                      s0 = peg$FAILED;\n                    }\n                  } else {\n                    peg$currPos = s0;\n                    s0 = peg$FAILED;\n                  }\n                } else {\n                  peg$currPos = s0;\n                  s0 = peg$FAILED;\n                }\n              } else {\n                peg$currPos = s0;\n                s0 = peg$FAILED;\n              }\n            } else {\n              peg$currPos = s0;\n              s0 = peg$FAILED;\n            }\n          } else {\n            peg$currPos = s0;\n            s0 = peg$FAILED;\n          }\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecoordinate_pair() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    s1 = peg$parsenumber();\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsecomma_wsp();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsenumber();\n        if (s3 !== peg$FAILED) {\n          peg$savedPos = s0;\n          s1 = peg$c31(s1, s3);\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n\n    return s0;\n  }\n\n  function peg$parsenonnegative_number() {\n    var s0, s1;\n\n    s0 = peg$currPos;\n    s1 = peg$parsefloating_point_constant();\n    if (s1 === peg$FAILED) {\n      s1 = peg$parsedigit_sequence();\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c32(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsenumber() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    s1 = peg$currPos;\n    s2 = peg$parsesign();\n    if (s2 === peg$FAILED) {\n      s2 = null;\n    }\n    if (s2 !== peg$FAILED) {\n      s3 = peg$parsefloating_point_constant();\n      if (s3 !== peg$FAILED) {\n        s2 = [s2, s3];\n        s1 = s2;\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s1;\n      s1 = peg$FAILED;\n    }\n    if (s1 === peg$FAILED) {\n      s1 = peg$currPos;\n      s2 = peg$parsesign();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parsedigit_sequence();\n        if (s3 !== peg$FAILED) {\n          s2 = [s2, s3];\n          s1 = s2;\n        } else {\n          peg$currPos = s1;\n          s1 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c33(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parseflag() {\n    var s0, s1;\n\n    s0 = peg$currPos;\n    if (peg$c34.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c35); }\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c36(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsecomma_wsp() {\n    var s0, s1, s2, s3, s4;\n\n    s0 = peg$currPos;\n    s1 = [];\n    s2 = peg$parsewsp();\n    if (s2 !== peg$FAILED) {\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        s2 = peg$parsewsp();\n      }\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      s2 = peg$parsecomma();\n      if (s2 === peg$FAILED) {\n        s2 = null;\n      }\n      if (s2 !== peg$FAILED) {\n        s3 = [];\n        s4 = peg$parsewsp();\n        while (s4 !== peg$FAILED) {\n          s3.push(s4);\n          s4 = peg$parsewsp();\n        }\n        if (s3 !== peg$FAILED) {\n          s1 = [s1, s2, s3];\n          s0 = s1;\n        } else {\n          peg$currPos = s0;\n          s0 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s0;\n        s0 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s0;\n      s0 = peg$FAILED;\n    }\n    if (s0 === peg$FAILED) {\n      s0 = peg$currPos;\n      s1 = peg$currPos;\n      s2 = peg$parsecomma();\n      if (s2 !== peg$FAILED) {\n        s3 = [];\n        s4 = peg$parsewsp();\n        while (s4 !== peg$FAILED) {\n          s3.push(s4);\n          s4 = peg$parsewsp();\n        }\n        if (s3 !== peg$FAILED) {\n          s2 = [s2, s3];\n          s1 = s2;\n        } else {\n          peg$currPos = s1;\n          s1 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n      if (s1 !== peg$FAILED) {\n        peg$savedPos = s0;\n        s1 = peg$c37();\n      }\n      s0 = s1;\n    }\n\n    return s0;\n  }\n\n  function peg$parsecomma() {\n    var s0;\n\n    if (input.charCodeAt(peg$currPos) === 44) {\n      s0 = peg$c38;\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c39); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsefloating_point_constant() {\n    var s0, s1, s2, s3;\n\n    s0 = peg$currPos;\n    s1 = peg$currPos;\n    s2 = peg$parsefractional_constant();\n    if (s2 !== peg$FAILED) {\n      s3 = peg$parseexponent();\n      if (s3 === peg$FAILED) {\n        s3 = null;\n      }\n      if (s3 !== peg$FAILED) {\n        s2 = [s2, s3];\n        s1 = s2;\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s1;\n      s1 = peg$FAILED;\n    }\n    if (s1 === peg$FAILED) {\n      s1 = peg$currPos;\n      s2 = peg$parsedigit_sequence();\n      if (s2 !== peg$FAILED) {\n        s3 = peg$parseexponent();\n        if (s3 !== peg$FAILED) {\n          s2 = [s2, s3];\n          s1 = s2;\n        } else {\n          peg$currPos = s1;\n          s1 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c40(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsefractional_constant() {\n    var s0, s1, s2, s3, s4;\n\n    s0 = peg$currPos;\n    s1 = peg$currPos;\n    s2 = peg$parsedigit_sequence();\n    if (s2 === peg$FAILED) {\n      s2 = null;\n    }\n    if (s2 !== peg$FAILED) {\n      if (input.charCodeAt(peg$currPos) === 46) {\n        s3 = peg$c41;\n        peg$currPos++;\n      } else {\n        s3 = peg$FAILED;\n        if (peg$silentFails === 0) { peg$fail(peg$c42); }\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = peg$parsedigit_sequence();\n        if (s4 !== peg$FAILED) {\n          s2 = [s2, s3, s4];\n          s1 = s2;\n        } else {\n          peg$currPos = s1;\n          s1 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s1;\n      s1 = peg$FAILED;\n    }\n    if (s1 === peg$FAILED) {\n      s1 = peg$currPos;\n      s2 = peg$parsedigit_sequence();\n      if (s2 !== peg$FAILED) {\n        if (input.charCodeAt(peg$currPos) === 46) {\n          s3 = peg$c41;\n          peg$currPos++;\n        } else {\n          s3 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c42); }\n        }\n        if (s3 !== peg$FAILED) {\n          s2 = [s2, s3];\n          s1 = s2;\n        } else {\n          peg$currPos = s1;\n          s1 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c40(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parseexponent() {\n    var s0, s1, s2, s3, s4;\n\n    s0 = peg$currPos;\n    s1 = peg$currPos;\n    if (peg$c43.test(input.charAt(peg$currPos))) {\n      s2 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c44); }\n    }\n    if (s2 !== peg$FAILED) {\n      s3 = peg$parsesign();\n      if (s3 === peg$FAILED) {\n        s3 = null;\n      }\n      if (s3 !== peg$FAILED) {\n        s4 = peg$parsedigit_sequence();\n        if (s4 !== peg$FAILED) {\n          s2 = [s2, s3, s4];\n          s1 = s2;\n        } else {\n          peg$currPos = s1;\n          s1 = peg$FAILED;\n        }\n      } else {\n        peg$currPos = s1;\n        s1 = peg$FAILED;\n      }\n    } else {\n      peg$currPos = s1;\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c40(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsesign() {\n    var s0;\n\n    if (peg$c45.test(input.charAt(peg$currPos))) {\n      s0 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s0 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c46); }\n    }\n\n    return s0;\n  }\n\n  function peg$parsedigit_sequence() {\n    var s0, s1, s2;\n\n    s0 = peg$currPos;\n    s1 = [];\n    if (peg$c47.test(input.charAt(peg$currPos))) {\n      s2 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s2 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c48); }\n    }\n    if (s2 !== peg$FAILED) {\n      while (s2 !== peg$FAILED) {\n        s1.push(s2);\n        if (peg$c47.test(input.charAt(peg$currPos))) {\n          s2 = input.charAt(peg$currPos);\n          peg$currPos++;\n        } else {\n          s2 = peg$FAILED;\n          if (peg$silentFails === 0) { peg$fail(peg$c48); }\n        }\n      }\n    } else {\n      s1 = peg$FAILED;\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c49(s1);\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n  function peg$parsewsp() {\n    var s0, s1;\n\n    s0 = peg$currPos;\n    if (peg$c50.test(input.charAt(peg$currPos))) {\n      s1 = input.charAt(peg$currPos);\n      peg$currPos++;\n    } else {\n      s1 = peg$FAILED;\n      if (peg$silentFails === 0) { peg$fail(peg$c51); }\n    }\n    if (s1 !== peg$FAILED) {\n      peg$savedPos = s0;\n      s1 = peg$c37();\n    }\n    s0 = s1;\n\n    return s0;\n  }\n\n\n    function merge(first,more){\n      if (!more) return [first];\n      for (var a=[first],i=0,l=more.length;i<l;i++) a[i+1]=more[i][1];\n      return a;\n    }\n\n    var cmds = {m:'moveto',l:'lineto',h:'horizontal lineto',v:'vertical lineto',c:'curveto',s:'smooth curveto',q:'quadratic curveto',t:'smooth quadratic curveto',a:'elliptical arc',z:'closepath'};\n    for (var code in cmds) cmds[code.toUpperCase()]=cmds[code];\n    function commands(code,args){\n      if (!args) args=[{}];\n      for (var i=args.length;i--;){\n        var cmd={code:code,command:cmds[code]};\n        if (code==code.toLowerCase()) cmd.relative=true;\n        for (var k in args[i]) cmd[k]=args[i][k];\n        args[i] = cmd;\n      }\n      return args;\n    }\n\n\n  peg$result = peg$startRuleFunction();\n\n  if (peg$result !== peg$FAILED && peg$currPos === input.length) {\n    return peg$result;\n  } else {\n    if (peg$result !== peg$FAILED && peg$currPos < input.length) {\n      peg$fail(peg$endExpectation());\n    }\n\n    throw peg$buildStructuredError(\n      peg$maxFailExpected,\n      peg$maxFailPos < input.length ? input.charAt(peg$maxFailPos) : null,\n      peg$maxFailPos < input.length\n        ? peg$computeLocation(peg$maxFailPos, peg$maxFailPos + 1)\n        : peg$computeLocation(peg$maxFailPos, peg$maxFailPos)\n    );\n  }\n}\n\nmodule.exports = {\n  SyntaxError: peg$SyntaxError,\n  parse:       peg$parse\n};\n","import './assets/style/app.scss'\r\nimport Nav from './components/nav'\r\nimport ResizablePanel, { IRPanel } from './components/resizablePanel'\r\nimport ViewWindow from './components/viewWindow'\r\nimport Tool from './util/tool'\r\nimport { Hint, hintTag } from './components/widgets/hint'\r\nimport { player } from './components/player'\r\nimport { MarkSelector } from './app/markSelector'\r\n\r\nfunction app(): HTMLDivElement {\r\n    const outerWrapper: HTMLDivElement = document.createElement('div');\r\n    outerWrapper.id = 'appWrapper';\r\n    outerWrapper.className = 'outer-wrapper';\r\n    const nav = new Nav();\r\n    nav.createNav();\r\n    outerWrapper.appendChild(nav.navContainer);\r\n\r\n    const innerWrapper: IRPanel = ResizablePanel.createRPanels(false, { verticle: false });\r\n    innerWrapper.wrapper.classList.add('inner-wrapper');\r\n    //create data panel\r\n    const dataView: ViewWindow = new ViewWindow(ViewWindow.DATA_VIEW_TITLE);\r\n    dataView.createView();\r\n    innerWrapper.panel1.appendChild(dataView.view);\r\n\r\n    //create main panels\r\n    const mainWrapper: IRPanel = ResizablePanel.createRPanels(true, { p1: 5.5, p2: 4.5, verticle: true });//chart & video, keyframe\r\n    const chartVideoPanels: IRPanel = ResizablePanel.createRPanels(true, { p1: 5, p2: 5, verticle: false });\r\n    //create chart view\r\n    const chartView: ViewWindow = new ViewWindow(ViewWindow.CHART_VIEW_TITLE);\r\n    chartView.createView();\r\n    chartVideoPanels.panel1.appendChild(chartView.view);\r\n    //create video view\r\n    const videoView: ViewWindow = new ViewWindow(ViewWindow.VIDEO_VIEW_TITLE);\r\n    videoView.createView();\r\n    chartVideoPanels.panel2.appendChild(videoView.view);\r\n    mainWrapper.panel1.appendChild(chartVideoPanels.wrapper);\r\n\r\n    //create keyframe view\r\n    const kfView: ViewWindow = new ViewWindow(ViewWindow.KF_VIEW_TITLE);\r\n    kfView.createView();\r\n    mainWrapper.panel2.appendChild(kfView.view);\r\n\r\n    innerWrapper.panel2.appendChild(mainWrapper.wrapper);\r\n    outerWrapper.appendChild(innerWrapper.wrapper);\r\n\r\n    // const footer: HTMLDivElement = document.createElement('div');\r\n    // footer.id = 'footer';\r\n    // footer.className = 'footer';\r\n    // outerWrapper.appendChild(footer);\r\n    return outerWrapper;\r\n}\r\n\r\n//cancel right click\r\ndocument.oncontextmenu = () => {\r\n    return false;\r\n}\r\ndocument.onkeyup = (e) => {\r\n    var event: any = e || window.event;\r\n    var key = event.which || event.keyCode || event.charCode;\r\n    if (key == 13) {\r\n        if (typeof document.getElementById(Hint.TIMING_HINT_ID) !== 'undefined') {\r\n            // hintTag.contentInput.blur();\r\n            MarkSelector.emitSelection();\r\n        }\r\n    } else if (key == 32) {\r\n        if (player.playing) {\r\n            player.playing = false;\r\n            player.pauseAnimation();\r\n        } else {\r\n            player.playing = true;\r\n            player.playAnimation();\r\n        }\r\n    }\r\n};\r\n\r\ndocument.body.appendChild(app());\r\n//init styles\r\nTool.resizeWidgets();\r\n\r\nMarkSelector.init();\r\n\r\n//load examples\r\n// (<HTMLElement>document.getElementsByClassName('open-eg-icon')[0]).click();\r\n//thisis to test timeline\r\n// Timeline.renderTimeline(<SVGSVGElement><unknown>document.getElementById('timelineSvg'));\r\n\r\nwindow.onresize = () => {\r\n    Tool.resizeWidgets();\r\n}","const padding = 5;\nconst width: number = 220;\nconst foldedWidth: number = 28;\nconst foldedHeight: number = 28;\n\nconst recommendListWidth = 260;\n\nconst highlightColor = \"rgb(252,191,139)\";\nconst regularColor = \"dodgerblue\";\n\nexport class AddPanel {\n    static container: SVGElement;\n    static box: SVGElement;\n    static icon: SVGElement;\n    static shouldHide: boolean;\n    static height: number;\n    static width: number;\n\n    static createAddPanel(height: number, shouldHide = false) {\n        this.height = height;\n        this.shouldHide = shouldHide;\n        const container = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n        this.container = container;\n\n        container.setAttribute(\"id\", \"addPanel\");\n        const dashBox = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n        dashBox.setAttribute(\"height\", String(height - 2 * padding));\n        dashBox.setAttribute(\"x\", String(padding));\n        dashBox.setAttribute(\"y\", String(padding));\n\n        dashBox.setAttribute(\"rx\", \"8\");\n        dashBox.setAttribute(\"stroke\", regularColor);\n        dashBox.setAttribute(\"stroke-width\", \"1\");\n        dashBox.setAttribute(\"stroke-dasharray\", \"4 4\");\n        dashBox.setAttribute(\"fill\", \"none\");\n        container.appendChild(dashBox);\n        this.box = dashBox;\n\n        const plusIcon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n        const r = 5;\n        const w = 1;\n        plusIcon.setAttribute(\"d\",\n            `M${w} ${r}V${w}H${r}V${-w}H${w}V${-r}H${-w}V${-w}H${-r}V${w}H${-w}V${r}Z`\n        );\n        plusIcon.setAttribute(\"fill\", regularColor);\n        this.icon = plusIcon;\n        container.appendChild(plusIcon);\n\n        this.fold();\n    }\n\n    static resize(width: number, height: number) {\n        const result = width - this.width;\n        this.width = width;\n        if (width == 0) {\n            this.container.setAttribute(\"display\", \"none\");\n            return;\n        }\n        this.container.removeAttribute(\"display\");\n        this.icon.setAttribute(\"transform\", `translate(${width / 2}, ${this.height / 2})`);\n        this.box.setAttribute(\"width\", String(width - padding * 2));\n        this.box.setAttribute(\"height\", String(height - padding * 2));\n        if (height === foldedHeight) {\n            this.box.setAttribute(\"transform\", `translate(${0}, ${(this.height - padding * 2) / 2 - 9})`)\n            this.box.setAttribute('stroke', 'gray')\n            this.icon.setAttribute(\"fill\", \"gray\");\n        }else{\n            this.icon.setAttribute(\"fill\", regularColor);\n            this.box.setAttribute('stroke', regularColor)\n            this.box.setAttribute(\"transform\", `translate(${0}, ${0})`)\n        }\n        return result;\n    }\n\n    static fold() {\n        let result: number;\n        if (this.shouldHide) {\n            result = this.resize(0, 0);\n        } else {\n            result = this.resize(foldedWidth, foldedHeight);\n        }\n\n        const recommendList = document.getElementById(\"recommendList\");\n        if (recommendList && this.shouldHide && result != 0) {\n            recommendList.removeAttribute('display');\n            result += recommendListWidth;\n        }\n\n        return result;\n    }\n\n    static show() {\n        let result = this.resize(width, this.height);\n\n        const recommendList = document.getElementById(\"recommendList\");\n        if (recommendList && this.shouldHide && result != 0) {\n            recommendList.setAttribute('display', \"none\");\n            result -= recommendListWidth;\n        }\n\n        return result;\n    }\n\n    static addHighlight() {\n        this.icon.setAttribute(\"fill\", highlightColor);\n        this.box.setAttribute(\"stroke\", highlightColor);\n    }\n\n    static removeHighlight() {\n        this.icon.setAttribute(\"fill\", regularColor);\n        this.box.setAttribute(\"stroke\", regularColor);\n    }\n}","import { chartManager } from \"./chartManager\";\nimport { KfTreeGroup, KfTreeNode, meetAttributeConstrains, meetMarkTypeConstrains } from \"./kfTree\";\nimport { sortStrings } from \"./sortUtil\";\n\nclass AnimationTreeItem {\n    delay: number;\n    render(animations: any[], time: number) {\n        return time;\n    }\n}\n\nexport class AnimationTreeGroup extends AnimationTreeItem {\n    children: AnimationTreeItem[][] = [];\n    fromKfTreeGroup(kfGroup: KfTreeGroup, marks: string[], isFirst: boolean, lastDuration: number, minStartTimeBinding: number) {\n        if (kfGroup.startTimeBinding) {\n            this.delay = calcMean(marks, kfGroup.startTimeBinding) / minStartTimeBinding * kfGroup.delay;\n        } else {\n            const delay = isFirst ? 0 : kfGroup.delay;\n            this.delay = Math.max(-lastDuration, delay);\n        }\n        let isFirstNode = true;\n        for (let arr of kfGroup.children) {\n            let col = [];\n            for (let child of arr) {\n                if (child.grouping == null) {\n                    const childNode = new AnimationTreeNode();\n                    lastDuration = childNode.fromKfTreeNode(child, marks, isFirstNode, lastDuration);\n                    col.push(childNode);\n                } else {\n                    const childGroup = new AnimationTreeGroup();\n                    lastDuration = childGroup.fromKfTreeNode(child, marks, isFirstNode, lastDuration);\n                    col.push(childGroup);\n                }\n                isFirstNode = false;\n            }\n            this.children.push(col);\n        }\n\n        return lastDuration;\n    }\n    fromKfTreeNode(kfNode: KfTreeNode, marks: string[], isFirst: boolean, lastDuration: number) {\n        marks = marks.filter(i => meetMarkTypeConstrains(i, kfNode.markTypeSelectors));\n        const delay = isFirst ? 0 : kfNode.delay;\n        this.delay = Math.max(0, delay);\n        const groupBy = kfNode.grouping.groupBy;\n        const partition: Map<string, Set<string>> = new Map();\n        for (let id of marks) {\n            const value = chartManager.marks.get(id).get(groupBy);\n            if (!partition.has(value)) {\n                partition.set(value, new Set());\n            }\n            partition.get(value).add(id);\n        }\n        const sequence: string[] = kfNode.grouping.sequence.filter(i => partition.has(i));\n        if (kfNode.grouping.sort.channel) {\n            const channel = kfNode.grouping.sort.channel;\n            const order = kfNode.grouping.sort.order;\n            if (channel == groupBy) {\n                sortStrings(sequence);\n            } else if (channel) {\n                const count = new Map<string, number>();\n                for (let [k, v] of partition) {\n                    let sum = 0;\n                    for (let id of v) {\n                        const value = chartManager.numericAttrs.get(id).get(channel);\n                        if (value) {\n                            sum += Number(value);\n                        }\n                    }\n                    count.set(k, sum);\n                }\n                sequence.sort((a: string, b: string) => {\n                    return count.get(a) - count.get(b);\n                });\n            }\n            if (order == \"dsc\") {\n                sequence.reverse();\n            }\n        }\n        let isFirstChild = true;\n        const childGroup = kfNode.grouping.child;\n        let minStartTimeBinding = Infinity;\n        if (childGroup.startTimeBinding) {\n            minStartTimeBinding = chartManager.getMinValue(childGroup.startTimeBinding);\n        }\n        for (let attributeName of sequence) {\n            if (!partition.has(attributeName)) {\n                continue;\n            }\n            const child = new AnimationTreeGroup();\n            lastDuration = child.fromKfTreeGroup(childGroup, Array.from(partition.get(attributeName)), isFirstChild, lastDuration, minStartTimeBinding);\n            this.children.push([child]);\n            isFirstChild = false;\n        }\n        if (kfNode.vertical) {\n            if (!childGroup.startTimeBinding) {\n                let index = 0;\n                for (let child of this.children) {\n                    if (child.length == 1) {\n                        child[0].delay *= index;\n                        child[0].delay = Math.max(child[0].delay, 0);\n                    }\n                    index++;\n                }\n            } else {\n                for (let i = 1; i < this.children.length; i++) {\n                    this.children[i][0].delay -= this.children[0][0].delay;\n                }\n            }\n            this.children = [this.children.flatMap(i => i)];\n        }\n        return lastDuration;\n    }\n\n    render(animations: any[], time: number) {\n        time += this.delay;\n        for (let arr of this.children) {\n            let nextTime = time;\n            time += arr[0].delay;\n            arr[0].delay = 0;\n            for (let child of arr) {\n                nextTime = Math.max(nextTime, child.render(animations, time))\n            }\n            time = nextTime;\n        }\n        return time;\n    }\n}\n\nexport class AnimationTreeNode extends AnimationTreeItem {\n    marks: string[];\n    duration: number;\n    effectType: string;\n    easing: string;\n\n    fromKfTreeNode(kfNode: KfTreeNode, marks: string[], isFirst: boolean, lastDuration: number) {\n        if (kfNode.markTypeSelectors.size > 0) {\n            marks = marks.filter(i => meetMarkTypeConstrains(i, kfNode.markTypeSelectors));\n        }\n        const delay = isFirst ? 0 : kfNode.delay;\n        this.delay = Math.max(-lastDuration, delay);\n\n        this.marks = marks;\n        this.duration = kfNode.property.duration * kfNode.calcDurationRatio(marks);\n        this.easing = kfNode.property.easing;\n        this.effectType = kfNode.property.effectType;\n\n        return this.duration;\n    }\n\n    render(animations: any[], time: number) {\n        time += this.delay;\n        for (let id of this.marks) {\n            let effectType = [\"grow\", \"wheel\"].includes(this.effectType) && chartManager.isText.get(id) ? \"wipe left\" : this.effectType;\n            if (this.effectType == \"wheel\") {\n                const element = document.getElementById(id);\n                if (element.tagName == \"line\" || element.getAttribute(\"fill\") == \"none\") {\n                    effectType = \"grow\";\n                }\n            }\n            animations.push(generateCanisFrame(\n                `#${id}`,\n                effectType,\n                this.easing,\n                time,\n                this.duration\n            ));\n        }\n        return time + this.duration;\n    }\n}\n\nconst generateCanisFrame = (selector: string, effectType: string, easing: string, start: number, duration: number) => {\n    return {\n        selector,\n        offset: start,\n        reference: \"absolute\",\n        effects: [\n            {\n                type: effectType,\n                duration,\n                easing\n            }\n        ]\n    }\n}\n\nfunction calcMean(marks: string[], channel: string) {\n    let result = 0;\n    let cnt = 0;\n    for (let i of marks) {\n        const attributes = chartManager.numericAttrs.get(i);\n        if (attributes.has(channel)) {\n            cnt++;\n            result += Number(attributes.get(channel));\n        }\n    }\n    result /= cnt;\n    return result;\n}","import Lottie from \"lottie-web\";\nimport { IChartSpec } from \"../app_backup/core/canisGenerator\";\nimport { Player, player } from \"../components/player\";\nimport { ViewContent } from \"../components/viewWindow\";\nimport CanisGenerator, { canis, ICanisSpec } from \"./core/canisGenerator\";\nimport { clearKfTrees } from \"./kfTree\";\nimport { MarkSelector, MarkSelectorMode } from \"./markSelector\";\nimport { markTableManager } from \"./markTableManager\";\nimport Tool from \"../util/tool\";\nimport { clone } from \"lodash\";\n\nexport const MARKID = \"_MARKID\";\nexport const MONTHS = [\"January\", \"February\", \"March\", \"April\", \"May\", \"June\", \"July\", \"August\", \"September\", \"October\", \"November\", \"December\", \"Jan\", \"Feb\", \"Mar\", \"Apr\", \"Jun\", \"Jul\", \"Aug\", \"Sep\", \"Oct\", \"Nov\", \"Dec\"];\nexport const NONDATATYPE = [\"axis-domain\", \"axis-tick\", \"axis-label\", \"legend-text\", \"legend-symbol\", \"x-axis-domain\", \"x-axis-tick\", \"x-axis-label\", \"y-axis-domain\", \"y-axis-tick\", \"y-axis-label\", \"title\", \"Title\", \"axis-grid\", \"y-axis-grid\", \"x-axis-grid\", \"y-axis-domain1\", \"y-axis-tick1\", \"y-axis-label1\", \"y-axis-domain2\", \"y-axis-tick2\", \"y-axis-label2\", \"legend-label\", \"year-title\", \"title1\",\n    \"title2\", \"x-axis-title\", \"y-axis-title\", \"l-axis-domain\", \"l-axis-tick\", \"l-axis-label\", \"r-axis-domain\", \"r-axis-tick\", \"r-axis-label\"];\nclass MarkTable {\n    markType: Set<string> = new Set();\n    fieldNames: string[] = [];\n    fieldType: string[] = [];\n    sortAttribute: string[] = [];\n    sortId: string = ''\n    items: { id: string, attributes: string[] }[] = [];\n    constructor(firstMark: Map<string, string>, id: string) {\n        this.sortId = 'none';\n        this.fieldNames.push(MARKID);\n        this.sortAttribute.push('none');\n        this.fieldType.push('string');\n        for (let [k, v] of firstMark) {\n            if (k == MARKID) {\n                continue;\n            }\n            this.fieldNames.push(k);\n            this.sortAttribute.push('none');\n            if (parseFloat(v) == Number(v)) {\n                this.fieldType.push('number');\n            } else if (MONTHS.indexOf(v) != -1) {\n                this.fieldType.push('month');\n            } else {\n                this.fieldType.push('string');\n            }\n        }\n        this.tryToAddMark(firstMark, id);\n    }\n\n    tryToAddMark(mark: Map<string, string>, id: string) {\n        if (mark.size != this.fieldNames.length) {\n            return false;\n        }\n\n        for (let name of this.fieldNames) {\n            if (!mark.has(name)) {\n                return false;\n            }\n        }\n\n        const attributes: string[] = [];\n        for (let i of this.fieldNames) {\n            attributes.push(mark.get(i));\n        }\n        this.items.push({ id, attributes });\n        this.markType.add(mark.get(MARKID));\n        return true;\n    }\n}\n\nclass ChartManager {\n    canisSpec: ICanisSpec;\n    marks: Map<string, Map<string, string>> = new Map();\n    numericAttrs: Map<string, Map<string, string>> = new Map();\n    isText: Map<string, boolean> = new Map();\n    markTables: MarkTable[];\n    lottieSpec: any;\n    lottieAnimation: any;\n\n    loadChart(chart: string) {\n        const chartSpec: IChartSpec[] = CanisGenerator.generateChartSpec([chart]);\n        const spec: ICanisSpec = { charts: chartSpec, animations: [] };\n        this.marks.clear();\n        this.numericAttrs.clear();\n        this.canisSpec = spec;\n        const lottieSpec = canis.renderSpec(this.canisSpec, () => { });\n\n        this.updateAnimation(lottieSpec);\n\n        const marks = document.getElementsByClassName(\"mark\");\n        for (let i = 0, l = marks.length; i < l; i++) {\n            const mark = marks[i];\n            this.isText.set(mark.id, mark.tagName == \"text\");\n            const markAttributes = JSON.parse(mark.getAttribute(\"data-datum\"));\n            const attributeMap = new Map<string, string>();\n            const numericAttributeMap = new Map<string, string>();\n            attributeMap.set(MARKID, markAttributes[MARKID]);\n            for (let name in markAttributes) {\n                if (name[0] == \"_\") {\n                    continue;\n                }\n                let value: string = markAttributes[name];\n                if (parseFloat(value) == Number(value)) {\n                    numericAttributeMap.set(name, value)\n                    continue;\n                }\n                if (value[0] == \"_\") {\n                    value = value.slice(1);\n                }\n                attributeMap.set(name, value);\n            }\n            this.marks.set(mark.id, attributeMap);\n            this.numericAttrs.set(mark.id, numericAttributeMap);\n        }\n        this.loadMarkTables();\n        clearKfTrees();\n    }\n\n    loadMarkTables() {\n        const markTables: MarkTable[] = [];\n        const dataMarks: Map<string, Map<string, string>> = new Map();\n        this.marks.forEach((value, key) => {\n            if (NONDATATYPE.indexOf(value.get(MARKID)) == -1) {\n                dataMarks.set(key, new Map([...value, ...this.numericAttrs.get(key)]));\n            }\n        });\n\n        for (let [id, mark] of dataMarks) {\n            let flag: boolean = false;\n            for (let markTable of markTables) {\n                if (markTable.tryToAddMark(mark, id)) {\n                    flag = true;\n                    break;\n                }\n            }\n            if (flag) {\n                continue;\n            }\n            markTables.push(new MarkTable(mark, id));\n        }\n        this.markTables = markTables;\n        markTableManager.render();\n    }\n    updatePreviewCanisSpec(animations: any[]) {\n        if (!this.canisSpec) {\n            return;\n        }\n        const spec :ICanisSpec = {charts: this.canisSpec.charts, animations: animations};\n        const lottieSpec =  canis.renderSpecPreview(spec, () => { });\n        return lottieSpec;\n    }\n\n    updateCanisSpec(animations: any[]) {\n        if (!this.canisSpec) {\n            return;\n        }\n        this.canisSpec.animations = animations;\n        const lottieSpec = canis.renderSpec(this.canisSpec, () => { });\n        this.updateAnimation(lottieSpec);\n    }\n\n    updateAnimation(lottieSpec: any) {\n        this.lottieSpec = lottieSpec;\n        document.getElementById(ViewContent.VIDEO_VIEW_CONTENT_ID).innerHTML = '';\n        this.lottieAnimation = Lottie.loadAnimation({\n            container: document.getElementById(ViewContent.VIDEO_VIEW_CONTENT_ID),\n            renderer: 'svg',\n            loop: false,\n            autoplay: false,\n            animationData: lottieSpec // the animation data\n        })\n        player.resetPlayer({\n            frameRate: canis.frameRate,\n            currentTime: 0,\n            totalTime: canis.duration()\n        })\n        // document.getElementById(Player.PLAY_BTN_ID).click();\n    }\n\n    getMinValue(fieldName: string) {\n        let result = Infinity;\n        for (let [id, attrs] of this.numericAttrs) {\n            if (attrs.has(fieldName)) {\n                result = Math.min(result, Number(attrs.get(fieldName)));\n            }\n        }\n        return result;\n    }\n\n    getAvgValue(marks: string[], fieldName: string) {\n        let result = 0;\n        let count = 0;\n        for (let id of marks) {\n            const attr = this.numericAttrs.get(id);\n            if (attr.has(fieldName)) {\n                result += Number(attr.get(fieldName));\n                count++;\n            }\n        }\n        result /= count;\n        return result;\n    }\n}\n\nexport const chartManager = new ChartManager();","import Canis, { ActionSpec, ChartSpec, TimingSpec, Animation} from '../../canis/moduleIdx';\r\n// import { state } from '../state'\r\n\r\nexport let canis = new Canis();\r\n\r\nexport interface IChartSpec {\r\n    id?: string\r\n    type?: string\r\n    source: string\r\n}\r\n\r\nexport interface ISort {\r\n    field?: string\r\n    order: string | string[]\r\n}\r\n\r\nexport interface IGrouping {\r\n    reference?: string\r\n    delay?: number\r\n    groupBy: string\r\n    sort?: ISort\r\n    grouping?: IGrouping\r\n}\r\n\r\nexport interface IOffset {\r\n    field: string\r\n    minOffset: number\r\n}\r\n\r\nexport interface IDuration {\r\n    field: string\r\n    minDuration: number\r\n}\r\n\r\nexport interface IAction {\r\n    reference?: string\r\n    offset?: number | IOffset\r\n    type: string\r\n    easing?: string\r\n    duration?: number | IDuration\r\n    chartIdx?: number\r\n}\r\n\r\nexport interface IAlign {\r\n    target: string\r\n    type: string\r\n    merge: boolean\r\n}\r\n\r\nexport interface IAnimationSpec {\r\n    id?: string\r\n    reference?: string\r\n    align?: IAlign\r\n    offset?: number | IOffset\r\n    selector: string\r\n    grouping?: IGrouping\r\n    effects: IAction[]\r\n    chartIdx?: string\r\n}\r\n\r\nexport interface ICanisSpec {\r\n    charts: IChartSpec[]\r\n    animations: IAnimationSpec[]\r\n}\r\n\r\nexport default class CanisGenerator {\r\n    public static generateChartSpec(charts: string[]): IChartSpec[] {\r\n        let chartSpecs: IChartSpec[] = [];\r\n        for (let i = 0; i < charts.length; i++) {\r\n            //judge the content of charts[i], url or chart content\r\n            const chartType: string = charts[i].indexOf('<svg') >= 0 ? ChartSpec.CHART_CONTENT : ChartSpec.CHART_URL;\r\n            const chartSpec: IChartSpec = {\r\n                source: charts[i],\r\n                type: chartType\r\n            }\r\n            chartSpecs.push(chartSpec);\r\n            // this.canisSpec.charts.push(chartSpec);\r\n        }\r\n        return chartSpecs;\r\n    }\r\n\r\n    public generateAnimationSpec(): void {\r\n\r\n    }\r\n\r\n    public static validate(spec: ICanisSpec): boolean {\r\n        if (spec.charts.length === 0) {\r\n            console.warn('there are no input charts!');\r\n            return false;\r\n        }\r\n        if (spec.animations.length > 0) {\r\n            //remove empty animations\r\n            let i = spec.animations.length;\r\n            while (i--) {\r\n                const tmpAni: IAnimationSpec = spec.animations[i];\r\n                if (tmpAni.selector === '' || tmpAni.selector === '#') {\r\n                    spec.animations.splice(i, 1);\r\n                }\r\n            }\r\n            //check animation order, alignTo animation must follow the target\r\n            for (let j = 0, len = spec.animations.length; j < len; j++) {\r\n                const tmpAni: IAnimationSpec = spec.animations[j];\r\n                if (typeof tmpAni.id !== 'undefined') {\r\n                    let removedAni: IAnimationSpec[] = [];\r\n                    // let emptyAlignTo: boolean = true;\r\n                    // let noAlign: boolean = true;\r\n                    for (let z = 0, len2 = len; z < len2; z++) {\r\n                        const tmpAni2: IAnimationSpec = spec.animations[z];\r\n\r\n                        if (typeof tmpAni2.align !== 'undefined') {\r\n                            // noAlign = false;\r\n                            if (tmpAni2.align.target === tmpAni.id) {\r\n                                // emptyAlignTo = false;\r\n                                removedAni.push(spec.animations.splice(z, 1)[0]);\r\n                                z--;\r\n                                len2--;\r\n                            }\r\n                        }\r\n                    }\r\n                    // if (emptyAlignTo && !noAlign) {\r\n                    //     console.warn('no aligned aniunit');\r\n                    //     return false;\r\n                    // }\r\n                    //put the start with ahead of start after\r\n                    removedAni.sort((a: IAnimationSpec, b: IAnimationSpec) => {\r\n                        if (a.reference === TimingSpec.timingRef.previousEnd && b.reference === TimingSpec.timingRef.previousStart) {\r\n                            return 1;\r\n                        } else if (a.reference === TimingSpec.timingRef.previousStart && b.reference === TimingSpec.timingRef.previousEnd) {\r\n                            return -1;\r\n                        }\r\n                        return 0;\r\n                    })\r\n                    const insertIdx: number = spec.animations.indexOf(tmpAni);\r\n                    spec.animations.splice(insertIdx + 1, 0, ...removedAni);\r\n                }\r\n            }\r\n\r\n            for (let j = 0, len = spec.animations.length; j < len; j++) {\r\n                const tmpAni: IAnimationSpec = spec.animations[j];\r\n                if (typeof tmpAni.align !== 'undefined') {\r\n                    let emptyAlignTo: boolean = true;\r\n                    for (let z = 0; z < len; z++) {\r\n                        const tmpAni2: IAnimationSpec = spec.animations[z];\r\n                        if (tmpAni.align.target === tmpAni2.id) {\r\n                            emptyAlignTo = false;\r\n                        }\r\n                    }\r\n                    if (emptyAlignTo) {\r\n                        console.warn('no aligned aniunit');\r\n                        return false;\r\n                    }\r\n                }\r\n            }\r\n\r\n            //check aniId\r\n            for (let j = 0, len = spec.animations.length; j < len; j++) {\r\n                const tmpAni: IAnimationSpec = spec.animations[j];\r\n                const checkAniId: string = `${tmpAni.chartIdx}_${tmpAni.selector}`;\r\n                const flag: boolean = tmpAni.id === checkAniId;\r\n                if (!flag) {\r\n                    for (let z = 0; z < len; z++) {\r\n                        const tmpAni2: IAnimationSpec = spec.animations[z];\r\n                        if (typeof tmpAni2.align !== 'undefined') {\r\n                            if (tmpAni2.align.target === tmpAni.id) {\r\n                                spec.animations[z].align.target = checkAniId;\r\n                            }\r\n                        }\r\n                    }\r\n                    spec.animations[j].id = checkAniId;\r\n                }\r\n            }\r\n        }\r\n        if (spec.animations.length === 0) {\r\n            const animationSpec: IAnimationSpec = {\r\n                selector: '.mark',\r\n                // effects: [{ type: ActionSpec.actionTypes.fade, duration: 300 }]\r\n                effects: [{ type: spec.charts.length === 1 ? ActionSpec.actionTypes.fade : ActionSpec.actionTypes.transition, duration: 300 }]\r\n            }\r\n            spec.animations.push(animationSpec);\r\n        }\r\n        if (spec.charts.length > 1) {\r\n            //reset the chart idx in animations\r\n            for (let i = 0, len = spec.animations.length; i < len; i++) {\r\n                delete spec.animations[i].chartIdx;\r\n                for (let j = 0, len2 = spec.animations[i].effects.length; j < len2; j++) {\r\n                    delete spec.animations[i].effects[j].chartIdx;\r\n                }\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    public static resetSpec(spec: ICanisSpec): void {\r\n        spec.animations = [];\r\n    }\r\n\r\n    public static updateKfDelay(groupingSpec: IGrouping, delay: number): number {\r\n        if (typeof groupingSpec.grouping !== 'undefined') {\r\n            return this.updateKfDelay(groupingSpec.grouping, delay);\r\n        } else {\r\n            let oriDelay = groupingSpec.delay;\r\n            groupingSpec.delay = delay;\r\n            return oriDelay;\r\n        }\r\n    }\r\n\r\n    public static removeKfDelay(groupingSpec: IGrouping): void {\r\n        if (typeof groupingSpec.grouping !== 'undefined') {\r\n            this.removeKfDelay(groupingSpec.grouping);\r\n        } else {\r\n            groupingSpec.delay = 0;\r\n        }\r\n    }\r\n\r\n    public static updateKfRef(groupingSpec: IGrouping, ref: string): void {\r\n        if (typeof groupingSpec.grouping !== 'undefined') {\r\n            this.updateKfRef(groupingSpec.grouping, ref);\r\n        } else {\r\n            groupingSpec.reference = ref;\r\n        }\r\n    }\r\n\r\n    public static updateKfRefAndDelay(groupingSpec: IGrouping, ref: string, delay: number): void {\r\n        if (typeof groupingSpec.grouping !== 'undefined') {\r\n            this.updateKfRefAndDelay(groupingSpec.grouping, ref, delay);\r\n        } else {\r\n            groupingSpec.reference = ref;\r\n            groupingSpec.delay = delay;\r\n        }\r\n    }\r\n\r\n    public static removeLowestGrouping(groupingSpec: IGrouping): void {\r\n        if (typeof groupingSpec.grouping !== 'undefined') {\r\n            if (typeof groupingSpec.grouping.grouping !== 'undefined') {\r\n                this.removeLowestGrouping(groupingSpec.grouping);\r\n            } else {\r\n                delete groupingSpec.grouping;\r\n            }\r\n        }\r\n    }\r\n\r\n    public static updateGroupTiming(groupingSpec: IGrouping, groupRef: string, ref: string): void {\r\n        if (groupingSpec.groupBy === groupRef) {\r\n            groupingSpec.reference = ref;\r\n        } else {\r\n            if (typeof groupingSpec.grouping !== 'undefined') {\r\n                this.updateGroupTiming(groupingSpec.grouping, groupRef, ref);\r\n            }\r\n        }\r\n    }\r\n\r\n    public static updateGroupDelay(groupingSpec: IGrouping, groupRef: string, delay: number): void {\r\n        if (groupingSpec.groupBy === groupRef) {\r\n            groupingSpec.delay = delay;\r\n        } else {\r\n            if (typeof groupingSpec.grouping !== 'undefined') {\r\n                this.updateGroupDelay(groupingSpec.grouping, groupRef, delay);\r\n            }\r\n        }\r\n    }\r\n\r\n    public static updateGroupDelayTiming(groupingSpec: IGrouping, groupRef: string, delay: number, ref: string): void {\r\n        if (groupingSpec.groupBy === groupRef) {\r\n            groupingSpec.delay = delay;\r\n            groupingSpec.reference = ref;\r\n        } else {\r\n            if (typeof groupingSpec.grouping !== 'undefined') {\r\n                this.updateGroupDelayTiming(groupingSpec.grouping, groupRef, delay, ref);\r\n            }\r\n        }\r\n    }\r\n\r\n    public static removeGroupDelay(groupingSpec: IGrouping, groupRef: string): void {\r\n        if (groupingSpec.groupBy === groupRef) {\r\n            delete groupingSpec.delay;\r\n        } else {\r\n            if (typeof groupingSpec.grouping !== 'undefined') {\r\n                this.removeGroupDelay(groupingSpec.grouping, groupRef);\r\n            }\r\n        }\r\n    }\r\n\r\n    public static removeGroupDelayUpdateTiming(groupingSpec: IGrouping, groupRef: string, ref: string): void {\r\n        if (groupingSpec.groupBy === groupRef) {\r\n            delete groupingSpec.delay;\r\n            groupingSpec.reference = ref;\r\n        } else {\r\n            if (typeof groupingSpec.grouping !== 'undefined') {\r\n                this.removeGroupDelayUpdateTiming(groupingSpec.grouping, groupRef, ref);\r\n            }\r\n        }\r\n    }\r\n\r\n    public static mergeGroup(groupingSpec: IGrouping, groupRef: string, parentGrouping?: IGrouping): IGrouping {\r\n        if (groupingSpec.groupBy === groupRef) {\r\n            if (typeof groupingSpec.grouping !== 'undefined') {\r\n                return groupingSpec.grouping;\r\n            } else {\r\n                // delete parentGrouping.grouping;\r\n                return undefined;\r\n            }\r\n        } else {\r\n            if (typeof groupingSpec.grouping !== 'undefined') {\r\n                groupingSpec.grouping = this.mergeGroup(groupingSpec.grouping, groupRef, groupingSpec);\r\n                return groupingSpec;\r\n            }\r\n        }\r\n    }\r\n\r\n    public static updateDuration(actionSpec: IAction, duration: number): void {\r\n        //TODO: consider data binding\r\n        if (typeof actionSpec.duration === 'number') {\r\n            actionSpec.duration = duration;\r\n        }\r\n    }\r\n\r\n    public static updateEffectType(actionSpec: IAction, type: string): void {\r\n        actionSpec.type = type;\r\n    }\r\n\r\n    public static updateEffectEasing(actionSpec: IAction, easing: string): void {\r\n        actionSpec.easing = easing;\r\n    }\r\n\r\n    public static updateAniOffset(ani: IAnimationSpec, offset: number): void {\r\n        ani.offset = offset;\r\n    }\r\n\r\n    public static updateStaticSelector(ani: IAnimationSpec, staticMarks: string[]): void {\r\n        let currentSelectedMarks: string[] = [];\r\n        if (ani.selector === '.mark') {\r\n            Animation.markClass.forEach((clsName: string, mId: string) => {\r\n                if (!staticMarks.includes(mId)) {\r\n                    currentSelectedMarks.push(`#${mId}`);\r\n                }\r\n            })\r\n        } else {\r\n            ani.selector.split(', ').forEach((s: string) => {\r\n                const mId: string = s.substring(1);\r\n                if (!staticMarks.includes(mId)) {\r\n                    currentSelectedMarks.push(`#${mId}`);\r\n                }\r\n            });\r\n        }\r\n        ani.selector = currentSelectedMarks.join(', ');\r\n    }\r\n\r\n    public static updateGrouping(parent: IAnimationSpec | IGrouping, attrComb: string[], attrValueSort?: string[][]) {\r\n        if (typeof parent.grouping !== 'undefined') {\r\n            parent.grouping.groupBy = attrComb[0];\r\n        } else {\r\n            parent.grouping = { groupBy: attrComb[0] };\r\n        }\r\n        if (typeof attrValueSort !== 'undefined') {\r\n            parent.grouping.sort = {\r\n                order: attrValueSort[0]\r\n            }\r\n            attrValueSort.splice(0, 1);\r\n        }\r\n        attrComb.splice(0, 1);\r\n        if (attrComb.length > 0) {\r\n            this.updateGrouping(parent.grouping, attrComb, attrValueSort);\r\n        }\r\n    }\r\n\r\n    public static createGrouping(parent: IAnimationSpec | IGrouping, attrComb: string[], attrValueSort?: string[][]) {\r\n        parent.grouping = { groupBy: attrComb[0], reference: TimingSpec.timingRef.previousEnd };\r\n        if (typeof attrValueSort !== 'undefined') {\r\n            parent.grouping.sort = {\r\n                order: attrValueSort[0]\r\n            }\r\n            attrValueSort.splice(0, 1);\r\n        }\r\n        attrComb.splice(0, 1);\r\n        if (attrComb.length > 0) {\r\n            this.createGrouping(parent.grouping, attrComb, attrValueSort);\r\n        }\r\n    }\r\n\r\n    public static appendGrouping(parent: IAnimationSpec | IGrouping, attrComb: string[], attrValueSort?: string[][]) {\r\n        if (typeof parent.grouping !== 'undefined') {\r\n            this.appendGrouping(parent.grouping, attrComb, attrValueSort);\r\n        } else {\r\n            this.createGrouping(parent, attrComb, attrValueSort);\r\n        }\r\n    }\r\n\r\n    public static removeMarksFromSelector(ani: IAnimationSpec, targetMarks: string[]) {\r\n        let currentMarks: string[] = ani.selector.split(', ');\r\n        let filteredMarks: string[] = [];\r\n        currentMarks.forEach((mSelector: string) => {\r\n            if (!targetMarks.includes(mSelector)) {\r\n                filteredMarks.push(mSelector);\r\n            }\r\n        })\r\n        ani.selector = filteredMarks.join(', ');\r\n    }\r\n\r\n    public static updateMerge(ani: IAnimationSpec, merge: boolean) {\r\n        ani.align.merge = merge;\r\n    }\r\n\r\n    // /**\r\n    //  * \r\n    //  * @param id : aniId used in align\r\n    //  */\r\n    // public static findMergedAlignAnis(id: string): [string, string[]] {\r\n    //     let alignWithAni: string, alignToAnis: string[] = [];\r\n    //     state.spec.animations.forEach((a: IAnimationSpec) => {\r\n    //         if (a.id === id) {\r\n    //             alignWithAni = a.selector;\r\n    //         }\r\n    //         if (typeof a.align !== 'undefined') {\r\n    //             if (a.align.type === Animation.alignTarget.withEle && a.align.merge && a.align.target === id) {\r\n    //                 alignToAnis.push(a.selector);\r\n    //             }\r\n    //         }\r\n    //     })\r\n    //     return [alignWithAni, alignToAnis];\r\n    // }\r\n\r\n    public static updateGroupingSort(a: IAnimationSpec, groupRef: string, order: string[]): boolean {\r\n        let flag: boolean = true;\r\n        let updated: boolean = false;\r\n        let tmpGrouping: IGrouping = a.grouping;\r\n        while (flag) {\r\n            if (typeof tmpGrouping !== 'undefined') {\r\n                if (tmpGrouping.groupBy === groupRef) {\r\n                    tmpGrouping.sort = {\r\n                        order: order\r\n                    }\r\n                    updated = true;\r\n                    flag = false;\r\n                } else if (typeof tmpGrouping.grouping !== 'undefined') {\r\n                    tmpGrouping = tmpGrouping.grouping;\r\n                } else {\r\n                    flag = false;\r\n                }\r\n            }\r\n        }\r\n        return updated;\r\n    }\r\n\r\n    // public static fetchGroupingSort(aniId: string, groupRef: string): string[] {\r\n    //     const animations: IAnimationSpec[] = state.spec.animations;\r\n    //     for (let i = 0, len = animations.length; i < len; i++) {\r\n    //         const a: IAnimationSpec = animations[i];\r\n    //         if (`${a.chartIdx}_${a.selector}` === aniId) {\r\n    //             let flag: boolean = true;\r\n    //             let tmpGrouping: IGrouping = a.grouping;\r\n    //             while (flag) {\r\n    //                 if (typeof tmpGrouping !== 'undefined') {\r\n    //                     if (tmpGrouping.groupBy === groupRef) {\r\n    //                         return <string[]>tmpGrouping.sort.order;\r\n    //                     } else if (typeof tmpGrouping.grouping !== 'undefined') {\r\n    //                         tmpGrouping = tmpGrouping.grouping;\r\n    //                     } else {\r\n    //                         flag = false;\r\n    //                     }\r\n    //                 }\r\n    //             }\r\n    //         }\r\n    //     }\r\n    //     return [];\r\n    // }\r\n}","import { bin } from 'd3';\nimport '../assets/style/keyframeTrack.scss'\nimport { AddPanel } from './addPanel';\nimport { KfTreeGroup, KfTreeNode, calcNonSelectedMarks, calcSelectedMarks, getSuggestFrames, kfTrees } from './kfTree';\nimport { MarkSelector } from './markSelector';\nimport { SuggestPanel, suggestPanel } from './suggestPanel';\nimport Tool from '../util/tool';\nimport { kfContainer } from '../components/kfContainer';\n\nconst LABEL_HEIGHT = 20;\nconst LABEL_CORNER_RADIUS = 3;\nconst ITEM_GAP = 3;\nconst TEXT_OFFSET = 6;\nconst FONT_SIZE = 12;\nconst THUMBNAIL_HEIGHT = 120;\n// const LABEL_COLORS = [\n//     // 255,\n//     // 255,\n//     // 160,\n//     // 165,\n//     185,\n//     200,\n//     220,\n//     200,\n//     220,\n// ].map(i => `rgb(${i}, ${i}, ${i})`);\nconst LABEL_COLORS = [\n    \"#FFFFFF\",\n    \"#D6D6D6\",\n    \"#C5C5C5\",\n    \"#BCBCBC\",\n    \"#B6B6B6\",\n]\nconst TEXT_COLORS = [\n    \"#black\",\n    \"#777\",\n    \"#777\",\n    \"#777\",\n    \"#777\",\n];\n\nconst OMIT_COLOR = \"#777\";\nconst LABEL_BORDER_COLOR = \"#ffffff\";\nconst LABEL_BORDER_OPACITY = \"0.5\";\n\nconst ITEM_LENGTH = 150;\n\nconst DURATION_TO_LENGTH_K = 0.125;\nconst DURATION_TO_LENGTH_B = ITEM_LENGTH - 2 * ITEM_GAP;\n// const DURATION_TO_LENGTH_K = 0.25;\n// const DURATION_TO_LENGTH_B = 125;\nconst MIN_DURATION = 100;\nconst MAX_DURATION = 20000;\n\n\nconst lengthToDuration = (length: number) => {\n    return (length - DURATION_TO_LENGTH_B) / DURATION_TO_LENGTH_K;\n}\n\nconst durationToLength = (duration: number) => {\n    return duration * DURATION_TO_LENGTH_K + DURATION_TO_LENGTH_B;\n}\n\nconst MIN_LENGTH = durationToLength(MIN_DURATION);\nconst MAX_LENGTH = durationToLength(MAX_DURATION);\n\nconst DELAY_TO_LENGTH_K = 0.125;\nconst DELAY_TO_LENGTH_B = 0;\nconst MIN_DELAY = 0;\nconst MAX_DELAY = 20000;\n\n\nconst lengthToDelay = (length: number) => {\n    return (length - DELAY_TO_LENGTH_B) / DELAY_TO_LENGTH_K;\n}\n\nconst delayToLength = (delay: number) => {\n    return delay * DELAY_TO_LENGTH_K + DELAY_TO_LENGTH_B;\n}\n\nconst MIN_DELAY_LENGTH = delayToLength(MIN_DELAY);\nconst MAX_DELAY_LENGTH = delayToLength(MAX_DELAY);\n\nconst EFFECT_FADE: string = 'fade';\nconst EFFECT_FADE_OUT: string = 'fade out';\nconst EFFECT_WIPE_LEFT: string = 'wipe left';\nconst EFFECT_WIPE_RIGHT: string = 'wipe right';\nconst EFFECT_WIPE_TOP: string = 'wipe top';\nconst EFFECT_WIPE_BOTTOM: string = 'wipe bottom';\nconst EFFECT_WHEEL: string = 'wheel';\nconst EFFECT_CIRCLE: string = 'circle';\nconst EFFECT_GROW: string = 'grow';\nconst EFFECT_TRANSITION: string = 'custom';\nconst EASING_LINEAR: string = 'easeLinear';\nconst EASING_IN_QUAD: string = 'easeInQuad';\nconst EASING_OUT_QUAD: string = 'easeOutQuad';\nconst EASING_INOUT_QUAD: string = 'easeInOutQuad';\nconst EASING_IN_CUBIC: string = 'easeInCubic';\nconst EASING_OUT_CUBIC: string = 'easeOutCubic';\nconst EASING_INOUT_CUBIC: string = 'easeInOutCubic';\nconst EASING_OUT_BOUNCE: string = 'easeOutBounce';\nconst DURATION: string = 'duration';\n\nconst EFFECTS = [EFFECT_FADE, EFFECT_FADE_OUT, EFFECT_WIPE_LEFT, EFFECT_WIPE_RIGHT, EFFECT_WIPE_TOP, EFFECT_WIPE_BOTTOM, EFFECT_WHEEL, EFFECT_CIRCLE, EFFECT_GROW];\nconst EASINGS = [EASING_LINEAR, EASING_IN_QUAD, EASING_OUT_QUAD, EASING_OUT_QUAD, EASING_IN_CUBIC, EASING_OUT_CUBIC, EASING_INOUT_CUBIC];\n\nconst snap = (value: number, size: number, size2: number = size) => {\n    if (value >= 0) {\n        return Math.round(value / size) * size;\n    } else {\n        return Math.round(value / size2) * size2;\n    }\n}\n\nconst createLabelBackgroundShape = (width: number, height: number, radius: number) => {\n    const result: string[] = [];\n    result.push(`M0,${height}`);\n    result.push(`L${width},${height}`);\n    result.push(`L${width},${radius}`);\n    result.push(`A${radius} ${radius} 0 0 0 ${width - radius},0`);\n    result.push(`L${radius},0`);\n    result.push(`A${radius} ${radius} 0 0 0 0,${radius}`);\n    result.push(\"Z\");\n    return result.join(\"\");\n}\n\nexport class KfItem {\n    static idCounter = 0;\n    children: any;\n    static resetCounter() {\n        this.idCounter = 0;\n    }\n\n    levelFromLeaves: number = 0;\n    container: Element;\n    mainContainer: Element;\n    id: number;\n    parent: KfGroup;\n\n    length: number;\n    height: number;\n    x: number = 0;\n    y: number = 0;\n\n    leftDragBarCallback: Function = null;\n    leftDragBar: Element;\n    hideLeftDragBar: boolean = false;\n\n    delayLength: number = 0;\n    delayWidget: KfDelay;\n\n    updateDelayLength() {\n        const deltaL = this.delayWidget.length - this.delayLength;\n        this.delayLength = this.delayWidget.length;\n        this.mainContainer.setAttribute(\"transform\", `translate(${this.delayLength},${0})`);\n        if (this.parent) {\n            this.parent.resize(this, deltaL);\n        } else {\n            kfTrack.resize(this, deltaL);\n        }\n    }\n\n    renderDelay(height: number, allowNegtiveDelay = false) {\n        if (!this.delayWidget.originalNode || isNaN(this.delayWidget.delay)) {\n            return;\n        }\n        this.delayWidget.render(height, allowNegtiveDelay);\n        this.delayLength = this.delayWidget.length;\n        this.mainContainer.setAttribute(\"transform\", `translate(${this.delayLength},${0})`);\n    }\n\n    translate(x: number, y: number) {\n        this.x += x;\n        this.y += y;\n        this.container.setAttribute(\"transform\", `translate(${this.x},${this.y})`);\n    }\n\n    getX() {\n        let parent = this.parent;\n        let result = this.x;\n        while (parent) {\n            result += parent.x;\n            parent = parent.parent;\n        }\n        return result;\n    }\n\n    getY() {\n        let parent = this.parent;\n        let result = this.y;\n        while (parent) {\n            result += parent.y;\n            parent = parent.parent;\n        }\n        return result;\n    }\n\n    renderLeftBar() {\n        if (this.leftDragBarCallback == null) {\n            return;\n        }\n        const leftDragBar = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n        this.leftDragBar = leftDragBar;\n        // leftDragBar.setAttribute(\"x\", String(-ITEM_GAP));\n        leftDragBar.setAttribute(\"height\", String(this.height));\n        leftDragBar.setAttribute(\"width\", String(2 * ITEM_GAP));\n        leftDragBar.classList.add(\"kf-drag-bar-left\");\n        leftDragBar.onmousedown = (downEvent: MouseEvent) => {\n            this.leftDragBarCallback(downEvent);\n        }\n\n        this.mainContainer.appendChild(leftDragBar);\n\n        if (this.hideLeftDragBar) {\n            leftDragBar.setAttribute(\"display\", \"none\");\n        }\n    }\n\n    findRightMostLength() {\n        return this.length;\n    }\n\n    constructor(parent: KfGroup, delay: number, originalDelayNode: KfTreeGroup | KfTreeNode, previousNode: KfItem = null) {\n        this.container = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n        this.id = KfItem.idCounter++;\n        this.container.id = `kfContainer${this.id}`;\n        this.parent = parent;\n\n        if (this.id == kfTrack.activeNodeId) {\n            kfTrack.activeNode = this;\n        }\n        this.mainContainer = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n        this.container.appendChild(this.mainContainer);\n\n        this.delayWidget = new KfDelay(delay, this, originalDelayNode, previousNode);\n        this.container.appendChild(this.delayWidget.container);\n    }\n\n    getOriginalHeight() {\n        return this.levelFromLeaves * (LABEL_HEIGHT) + THUMBNAIL_HEIGHT;\n    }\n\n    hideRightDragBar() {\n\n    }\n\n    calcLevelFromLeaves() {\n        this.levelFromLeaves = 0;\n    }\n\n    render(height: number) {\n        return 0;\n        // return { element: this.container, length: 0 };\n    }\n}\n\nexport class KfGroup extends KfItem {\n    children: KfItem[] = [];\n    resize(chiactiveChildld: KfItem, deltaL: number) { }\n}\n\nexport class KfColume extends KfGroup {\n    right: number[] = [];\n\n    constructor(parent: KfGroup, delay: number, originalDelayNode: KfTreeNode | KfTreeGroup) {\n        super(parent, delay, originalDelayNode);\n    }\n\n    resize(activeChild: KfItem, deltaL: number) {\n        const index = this.children.indexOf(activeChild);\n        this.right[index] += deltaL;\n        const newLength = Math.max(...this.right);\n        if (newLength != this.length) {\n            this.parent.resize(this, newLength - this.length);\n            this.length = newLength;\n        }\n    }\n\n    calcLevelFromLeaves() {\n        let levelFromLeaves = 0;\n        for (let i of this.children) {\n            i.calcLevelFromLeaves();\n            levelFromLeaves = Math.max(i.levelFromLeaves, levelFromLeaves);\n        }\n        this.levelFromLeaves = levelFromLeaves;\n    }\n\n    render(height: number) {\n        const container = this.mainContainer;\n        let length = 0;\n        let y = 0;\n\n        // const background = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n        // this.container.appendChild(background);\n        // background.setAttribute(\"fill\", \"#f7f7f7\")\n        let x = 0;\n        for (let child of this.children) {\n            child.render(height);\n            container.appendChild(child.container);\n            child.translate(x, y);\n\n            length = Math.max(length, x + child.length + child.delayLength);\n            this.right.push(child.length + child.delayLength);\n\n            x += ITEM_GAP;\n            y += child.height + 20;\n        }\n        y -= 20;\n        this.height = y;\n        this.length = length;\n\n        // background.setAttribute(\"width\", String(length));\n        // background.setAttribute(\"height\", String(y));\n        this.renderDelay(this.height);\n        this.renderLeftBar();\n\n        return length;\n        // return { element: this.container, length };\n    }\n}\n\nexport class KfRow extends KfGroup {\n    label: string;\n    sortable: boolean;\n    binding: {\n        duration: {\n            binding: string,\n            node: KfTreeNode\n        },\n        startTime: {\n            binding: string,\n            group: KfTreeGroup\n        },\n        options: string[],\n    } = null;\n    vertical: boolean = false;\n    sortAttributes: string[];\n    originalGrouping: KfTreeNode;\n    originalNode: KfTreeNode | KfTreeGroup;\n\n    labelContainer: Element;\n    labelBackground: Element;\n    background: Element;\n    labelText: Element;\n\n    constructor(label: string, parent: KfGroup, delay: number, originalNode: KfTreeNode | KfTreeGroup, sortable = false, sortAttrtibutes: string[] = [], originalGrouping: KfTreeNode = null) {\n        super(parent, delay, originalNode);\n        this.label = label;\n        this.originalNode = originalNode;\n        this.sortable = sortable;\n        this.sortAttributes = sortAttrtibutes;\n        this.originalGrouping = originalGrouping;\n    }\n\n    findRightMostLength() {\n        return this.children[this.children.length - 1].findRightMostLength();\n    }\n\n    hideRightDragBar() {\n        this.children[this.children.length - 1].hideRightDragBar();\n    }\n\n    resize(activeChild: KfItem, deltaL: number) {\n        this.length += deltaL;\n        this.labelBackground.setAttribute(\"width\", String(this.length));\n        this.background.setAttribute(\"width\", String(this.length));\n        if (this.parent) {\n            this.parent.resize(this, deltaL);\n        } else {\n            kfTrack.resize(this, deltaL);\n        }\n        this.labelText.setAttribute(\"x\", String(this.length / 2));\n        let flag: Boolean = false;\n        for (let child of this.children) {\n            if (flag) {\n                child.translate(deltaL, 0);\n            }\n            if (child == activeChild) {\n                flag = true;\n            }\n        }\n    }\n\n    calcLevelFromLeaves() {\n        let levelFromLeaves = 0;\n        for (let i of this.children) {\n            i.calcLevelFromLeaves();\n            levelFromLeaves = Math.max(i.levelFromLeaves, levelFromLeaves);\n        }\n        if (this.label.length > 0) {\n            levelFromLeaves++;\n        }\n        this.levelFromLeaves = levelFromLeaves;\n    }\n\n    getOriginalHeight() {\n        if (this.label.length == 0) {\n            return (this.levelFromLeaves - 1) * LABEL_HEIGHT + THUMBNAIL_HEIGHT;\n        } else {\n            return super.getOriginalHeight();\n        }\n    }\n\n    createOrderBtn(order: string) {\n        const g = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n        g.classList.add(\"kf-order-button\")\n\n        const rect = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n        g.appendChild(rect);\n        rect.setAttribute(\"height\", \"20\");\n        rect.setAttribute(\"width\", \"20\");\n        rect.setAttribute(\"rx\", \"3\");\n\n        const path = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n        g.appendChild(path);\n        if (order == \"asc\") {\n            path.setAttribute(\"d\", \"M 3.461 0.162 l -3.34 3.78 c -0.274 0.31 -0.054 0.799 0.36 0.799 h 1.961 v 11.932 c 0 0.265 0.215 0.481 0.481 0.481 h 1.798 c 0.265 0 0.481 -0.215 0.481 -0.481 V 4.742 h 1.961 c 0.414 0 0.634 -0.489 0.36 -0.799 L 4.182 0.162 C 3.99 -0.054 3.653 -0.054 3.461 0.162 z M 6.581 6.817 v 1.791 c 0 0.267 0.217 0.484 0.484 0.484 h 9.748 c 0.267 0 0.484 -0.217 0.484 -0.484 V 6.817 c 0 -0.267 -0.217 -0.484 -0.484 -0.484 H 7.065 C 6.797 6.333 6.581 6.549 6.581 6.817 z M 7.029 13.124 h 7.904 c 0.248 0 0.449 -0.201 0.449 -0.449 v -1.861 c 0 -0.248 -0.201 -0.449 -0.449 -0.449 H 7.029 c -0.248 0 -0.449 0.201 -0.449 0.449 v 1.861 C 6.581 12.923 6.782 13.124 7.029 13.124 z M 7.024 17.155 h 5.916 c 0.245 0 0.443 -0.198 0.443 -0.443 v -1.873 c 0 -0.245 -0.198 -0.443 -0.443 -0.443 H 7.024 c -0.245 0 -0.443 0.198 -0.443 0.443 v 1.873 C 6.581 16.956 6.779 17.155 7.024 17.155 z\");\n        } else {\n            path.setAttribute(\"d\", \"M 3.461 16.988 l -3.34 -3.78 c -0.274 -0.31 -0.054 -0.799 0.36 -0.799 h 1.961 v -11.932 c 0 -0.265 0.215 -0.481 0.481 -0.481 h 1.798 c 0.265 0 0.481 0.215 0.481 0.481 v 11.931 h 1.961 c 0.414 0 0.634 0.489 0.36 0.799 l -3.341 3.781 c -0.192 0.216 -0.529 0.216 -0.721 0 z m 3.12 -6.655 v -1.791 c 0 -0.267 0.217 -0.484 0.484 -0.484 h 9.748 c 0.267 0 0.484 0.217 0.484 0.484 v 1.791 c 0 0.267 -0.217 0.484 -0.484 0.484 h -9.748 c -0.268 0 -0.484 -0.216 -0.484 -0.484 z m 0.448 -6.307 h 7.904 c 0.248 0 0.449 0.201 0.449 0.449 v 1.861 c 0 0.248 -0.201 0.449 -0.449 0.449 h -7.904 c -0.248 0 -0.449 -0.201 -0.449 -0.449 v -1.861 c 0.001 -0.248 0.202 -0.449 0.449 -0.449 z m -0.005 -4.031 h 5.916 c 0.245 0 0.443 0.198 0.443 0.443 v 1.873 c 0 0.245 -0.198 0.443 -0.443 0.443 h -5.916 c -0.245 0 -0.443 -0.198 -0.443 -0.443 v -1.873 c 0 -0.244 0.198 -0.443 0.443 -0.443 z\");\n        }\n        path.setAttribute(\"transform\", \"scale(0.8)translate(4,4)\");\n        // path.setAttribute(\"style\", \"fill: #676767\");\n\n        return g;\n    }\n\n    createSortList(sortBtnContainer: Element) {\n\n        const sortListContainer = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n        kfTrack.innerContainer.appendChild(sortListContainer);\n        sortListContainer.setAttribute(\"transform\", `translate(${this.getX() + this.delayLength + this.length - 5},${this.getY() + 2}), scale(${1 / kfTrack.scale})`);\n        // sortListContainer.setAttribute(\"transform\", `translate(${this.getX() + this.delayLength + 30},${this.getY() + 2}), scale(${1 / kfTrack.scale})`);\n        const itemWidth = 120;\n        const itemHeight = 20;\n        let index = 0;\n        console.log(this.sortAttributes);\n\n        const background = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n        background.setAttribute(\"width\", \"25\");\n        background.setAttribute(\"height\", \"16\");\n        background.setAttribute(\"transform\", `scale(${kfTrack.scale}), translate(${-25}, 0)`);\n        background.setAttribute(\"opacity\", \"0\");\n        sortListContainer.appendChild(background);\n        const sortChannel = this.originalGrouping.grouping.sort.channel;\n        const sortOrder = this.originalGrouping.grouping.sort.order;\n\n        for (let attributeName of this.sortAttributes) {\n            // for (let order of [\"asc\", \"dsc\"]) {\n\n\n            const itemBackground = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n            itemBackground.setAttribute(\"width\", String(itemWidth));\n            itemBackground.setAttribute(\"height\", String(itemHeight));\n            itemBackground.setAttribute(\"fill\", \"#676767\");\n            itemBackground.setAttribute(\"stroke\", \"#AAA\");\n            itemBackground.setAttribute(\"y\", String(index * (itemHeight)));\n            sortListContainer.appendChild(itemBackground);\n\n            const itemContainer = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n            // itemContainer.classList.add(\"kf-button\");\n            itemContainer.setAttribute(\"transform\", `translate(${0},${index * (itemHeight)})`);\n            sortListContainer.appendChild(itemContainer);\n            // itemContainer.onclick = () => {\n\n            // }\n\n            // const icon = this.createOrderIcon(order);\n            // icon.setAttribute(\"transform\", \"scale(0.8)translate(5,5)\");\n            // itemContainer.appendChild(icon);\n\n            // const itemMask = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n            // itemMask.setAttribute(\"width\", String(itemWidth));\n            // itemMask.setAttribute(\"height\", String(itemHeight));\n            // itemMask.setAttribute(\"opacity\", \"0\");\n            // itemContainer.appendChild(itemMask);\n            const ascBtn = this.createOrderBtn(\"asc\");\n            ascBtn.setAttribute(\"transform\", \"translate(5, 0)\")\n            itemContainer.appendChild(ascBtn);\n            ascBtn.onclick = () => {\n                this.originalGrouping.updateSort(attributeName, \"asc\");\n            }\n\n            const dscBtn = this.createOrderBtn(\"dsc\");\n            dscBtn.setAttribute(\"transform\", `translate(${itemWidth - 16 - 9}, 0)`)\n            itemContainer.appendChild(dscBtn);\n            dscBtn.onclick = () => {\n                this.originalGrouping.updateSort(attributeName, \"dsc\");\n            }\n\n            if (sortChannel == attributeName) {\n                if (sortOrder == \"asc\") {\n                    ascBtn.classList.add(\"kf-active-order-button\");\n                } else {\n                    dscBtn.classList.add(\"kf-active-order-button\");\n                }\n            }\n\n            const text = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n            text.innerHTML = attributeName;\n            text.setAttribute(\"font-size\", \"12\");\n            text.setAttribute(\"x\", String(itemWidth / 2));\n            text.setAttribute(\"y\", String(itemHeight / 2 + 4));\n            text.setAttribute(\"fill\", \"rgb(163, 163, 163)\");\n            text.setAttribute(\"text-anchor\", \"middle\");\n            text.setAttribute(\"font-weight\", \"600\");\n            itemContainer.appendChild(text);\n\n            index++\n            // }\n        }\n        {\n            const itemBackground = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n            itemBackground.setAttribute(\"width\", String(itemWidth));\n            itemBackground.setAttribute(\"height\", String(itemHeight));\n            itemBackground.setAttribute(\"fill\", \"#676767\");\n            itemBackground.setAttribute(\"stroke\", \"#AAA\");\n            itemBackground.setAttribute(\"y\", String(index * (itemHeight)));\n            sortListContainer.appendChild(itemBackground);\n\n            const itemContainer = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n            // itemContainer.classList.add(\"kf-button\");\n            itemContainer.setAttribute(\"transform\", `translate(${0},${index * (itemHeight)})`);\n            sortListContainer.appendChild(itemContainer);\n\n            const buttonContainer = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n            itemContainer.appendChild(buttonContainer);\n            buttonContainer.setAttribute(\"transform\", `translate(${itemWidth / 2},${2})`);\n            buttonContainer.classList.add(\"kf-order-button\");\n\n            const rect = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n            buttonContainer.appendChild(rect);\n            rect.setAttribute(\"height\", \"16\");\n            rect.setAttribute(\"width\", \"50\");\n            rect.setAttribute(\"rx\", \"3\");\n            rect.setAttribute(\"x\", String(-50 / 2));\n\n            const text = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n            text.innerHTML = \"Default\";\n            text.setAttribute(\"text-anchor\", \"middle\")\n            text.setAttribute(\"font-size\", \"12\");\n            text.setAttribute(\"font-weight\", \"600\");\n            text.setAttribute(\"y\", \"12\");\n            buttonContainer.appendChild(text);\n\n            buttonContainer.onclick = () => {\n                this.originalGrouping.updateSort(null, null);\n            }\n\n            if (!sortChannel) {\n                buttonContainer.classList.add(\"kf-active-order-button\");\n            }\n\n        }\n        sortListContainer.onmouseleave = () => {\n            sortBtnContainer.removeAttribute(\"style\");\n            kfTrack.innerContainer.removeChild(sortListContainer);\n        }\n    }\n\n    createBindList(bindBtnContainer: Element) {\n        const bindListContainer = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n        kfTrack.innerContainer.appendChild(bindListContainer);\n        bindListContainer.setAttribute(\"transform\", `translate(${this.getX() + this.delayLength + 30},${this.getY() + 2}), scale(${1 / kfTrack.scale})`);\n        // bindListContainer.setAttribute(\"transform\", `translate(${this.getX() + this.delayLength + this.length - 5},${this.getY() + 2}), scale(${1 / kfTrack.scale})`);\n        const itemWidth = 80;\n        const itemHeight = 20;\n\n        const background = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n        background.setAttribute(\"width\", \"25\");\n        background.setAttribute(\"height\", \"16\");\n        background.setAttribute(\"transform\", `scale(${kfTrack.scale}), translate(${-25}, 0)`);\n        background.setAttribute(\"opacity\", \"0\");\n        bindListContainer.appendChild(background);\n\n        const binding = this.binding;\n\n        const options = binding.options.concat([null]);\n\n        const createList = (title: string, highlighted: string, callback: Function) => {\n            const listContainer = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n            let index = 0;\n            {\n                const itemBackground = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n                itemBackground.setAttribute(\"width\", String(itemWidth));\n                itemBackground.setAttribute(\"height\", String(itemHeight));\n                itemBackground.setAttribute(\"fill\", \"#676767\");\n                itemBackground.setAttribute(\"stroke\", \"#AAA\");\n                itemBackground.setAttribute(\"y\", String(index * (itemHeight)));\n                listContainer.appendChild(itemBackground);\n\n                const itemContainer = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n                // itemContainer.classList.add(\"kf-button\");\n                itemContainer.setAttribute(\"transform\", `translate(${0},${index * (itemHeight)})`);\n                listContainer.appendChild(itemContainer);\n\n                const text = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n                text.innerHTML = title;\n                text.setAttribute(\"text-anchor\", \"middle\")\n                text.setAttribute(\"font-size\", \"12\");\n                text.setAttribute(\"font-weight\", \"600\");\n                text.setAttribute(\"y\", \"14\");\n                text.setAttribute(\"x\", String(itemWidth / 2));\n                text.setAttribute(\"fill\", \"white\");\n                itemContainer.appendChild(text);\n\n                index++;\n            }\n            for (let option of options) {\n                const itemBackground = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n                itemBackground.setAttribute(\"width\", String(itemWidth));\n                itemBackground.setAttribute(\"height\", String(itemHeight));\n                itemBackground.setAttribute(\"fill\", \"#676767\");\n                itemBackground.setAttribute(\"stroke\", \"#AAA\");\n                itemBackground.setAttribute(\"y\", String(index * (itemHeight)));\n                listContainer.appendChild(itemBackground);\n\n                const itemContainer = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n                // itemContainer.classList.add(\"kf-button\");\n                itemContainer.setAttribute(\"transform\", `translate(${0},${index * (itemHeight)})`);\n                listContainer.appendChild(itemContainer);\n\n                const buttonContainer = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n                itemContainer.appendChild(buttonContainer);\n                buttonContainer.setAttribute(\"transform\", `translate(${itemWidth / 2},${2})`);\n                buttonContainer.classList.add(\"kf-order-button\");\n\n                const rect = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n                buttonContainer.appendChild(rect);\n                rect.setAttribute(\"height\", \"16\");\n                rect.setAttribute(\"width\", \"50\");\n                rect.setAttribute(\"rx\", \"3\");\n                rect.setAttribute(\"x\", String(-50 / 2));\n\n                const text = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n                text.innerHTML = option ? option : \"Default\";\n                text.setAttribute(\"text-anchor\", \"middle\")\n                text.setAttribute(\"font-size\", \"12\");\n                text.setAttribute(\"font-weight\", \"600\");\n                text.setAttribute(\"y\", \"12\");\n                buttonContainer.appendChild(text);\n\n                buttonContainer.onclick = () => {\n                    callback(option);\n                }\n\n                if (option == highlighted) {\n                    buttonContainer.classList.add(\"kf-active-order-button\");\n                }\n                index++;\n            }\n            return listContainer;\n        }\n\n        let x = 0;\n        if (binding.startTime) {\n            const l1 = createList(\"Start Time\", binding.startTime.binding, (startTime: string) => {\n                binding.startTime.group.updateStartTimeBinding(startTime);\n            });\n            bindListContainer.appendChild(l1);\n            x += itemWidth;\n        }\n\n        if (binding.duration) {\n\n            const l2 = createList(\"Duration\", binding.duration.binding, (duration: string) => {\n                binding.duration.node.updateDurationBinding(duration);\n            });\n            bindListContainer.appendChild(l2);\n            l2.setAttribute(\"transform\", `translate(${x},0)`);\n            x += itemWidth;\n        }\n\n        bindListContainer.onmouseleave = () => {\n            bindBtnContainer.removeAttribute(\"style\");\n            kfTrack.innerContainer.removeChild(bindListContainer);\n        }\n    }\n\n    render(height: number) {\n        this.height = height;\n        const container = this.mainContainer;\n        // let length = ITEM_GAP;\n        let length = 0;\n\n        const labelContainer = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n        this.labelContainer = labelContainer;\n        labelContainer.classList.add(\"kf-label-container\");\n        container.appendChild(labelContainer);\n\n        const labelBackground = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n        labelContainer.appendChild(labelBackground);\n        this.labelBackground = labelBackground;\n        const labelText = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n        labelContainer.appendChild(labelText);\n        this.labelText = labelText;\n\n        if (this.binding) {\n            const bindBtnContainer = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n            labelContainer.appendChild(bindBtnContainer);\n            bindBtnContainer.classList.add(\"kf-label-btn-container\");\n            // bindBtnContainer.setAttribute(\"transform\", `translate(${length - 35},0)`)\n\n            const bindBtnBackground = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n            bindBtnContainer.appendChild(bindBtnBackground);\n            bindBtnBackground.classList.add(\"kf-label-btn-background\");\n            bindBtnBackground.setAttribute(\"x\", \"5\");\n            bindBtnBackground.setAttribute(\"y\", \"2\");\n\n            const bindBtnIcon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n            bindBtnContainer.appendChild(bindBtnIcon);\n            bindBtnIcon.setAttribute(\"d\", \"M 20.44 8.013 L 6 8 L 6 9 L 20.425 8.976 L 15.33 13.348 L 16 14 L 22 9 L 22 8 L 16 3 L 15.283 3.759 Z M 5 14 L 5 3 L 4 3 L 4 14 Z\");\n            // bindBtnIcon.setAttribute('points', '10.1,0 10.1,4.1 5.6,0.1 4.3,1.5 8.3,5.1 0,5.1 0,6.9 8.3,6.9 4.3,10.5 5.6,11.9 10.1,7.9 10.1,12 12,12 12,0 ');\n\n            bindBtnIcon.setAttribute(\"transform\", `translate(5, 2)`);\n            bindBtnIcon.classList.add(\"kf-button\");\n\n            bindBtnContainer.onclick = () => {\n                bindBtnContainer.setAttribute(\"style\", \"opacity: 1\");\n                this.createBindList(bindBtnContainer);\n            }\n        }\n        labelBackground.onmousedown = () => {\n            if (kfTrack.timingLock || this.label == \"__graph\") {\n                return;\n            }\n            if (this.originalNode) {\n\n                let virtualMovementX = 0;\n                let actualMovementX = 0;\n                let virtualMovementY = 0;\n                let actualMovementY = 0;\n                let moveX = 0;\n                let moveY = 0;\n                let moveDirection: string = 'Left'\n                for (let i = 0; i < this.parent.children.length; i++) {\n                    if (this.parent.children[i].id == this.id) {\n                        if (i > 0) {\n                            if (this.parent.children[i - 1] instanceof KfOmit) {\n                                if (Tool.diffLessThan(this.parent.children[i - 1].x, this.x, 5)) {\n                                    moveX = this.parent.children[i - 2].length;\n                                    moveY = this.parent.children[i - 2].height + this.parent.children[i - 1].height;\n                                    moveDirection = 'Right';\n                                } else if (Tool.diffLessThan(this.parent.children[i - 1].y, this.y, 1)) {\n                                    moveX = this.parent.children[i - 2].length + this.parent.children[i - 1].length;\n                                    moveY = this.parent.children[i - 2].height;\n                                    moveDirection = 'Left';\n                                }\n                            } else {\n                                moveDirection = 'none';\n                                moveX = this.parent.children[i - 1].length\n                                moveY = this.parent.children[i - 1].height\n                            }\n                        } else {\n                            moveDirection = 'none';\n                            moveX = 3000\n                            moveY = 3000\n                        }\n                        break;\n                    }\n                }\n                let x = this.getX();\n                let y = this.getY();\n                this.container.parentNode.removeChild(this.container);\n                this.container.setAttribute(\"transform\", `translate(${x},${y})`);\n                kfTrack.innerContainer.appendChild(this.container);\n\n                document.onmousemove = (event: MouseEvent) => {\n                    virtualMovementX += event.movementX;\n                    virtualMovementY += event.movementY;\n                    let newactualMovementX, newactualMovementY;\n                    if (moveDirection == 'Left') {\n                        newactualMovementX = Math.max(-moveX, Math.min(0, virtualMovementX));\n                        newactualMovementY = Math.max(0, Math.min(moveY, virtualMovementY));\n                    } else if (moveDirection == 'Right') {\n                        newactualMovementX = Math.max(0, Math.min(moveX, virtualMovementX));\n                        newactualMovementY = Math.min(0, Math.max(-moveY, virtualMovementY));\n                    } else {\n                        newactualMovementX = Math.max(-moveX, Math.min(moveX, virtualMovementX));\n                        newactualMovementY = Math.max(-moveY, Math.min(moveY, virtualMovementY));\n                    }\n                    // this.translate(newactualMovementX - actualMovementX, newactualMovementY - actualMovementY);\n                    x += newactualMovementX - actualMovementX;\n                    y += newactualMovementY - actualMovementY;\n                    this.container.setAttribute(\"transform\", `translate(${x},${y})`);\n                    actualMovementX = newactualMovementX;\n                    actualMovementY = newactualMovementY;\n                    if (moveX != 0) {\n                        if (Tool.diffLessThan(Math.abs(actualMovementX), Math.abs(moveX), 7)) {\n                            if (this.leftDragBar) {\n                                this.leftDragBar.setAttribute(\"style\", \"opacity: 1\");\n                            }\n                        } else {\n                            if (this.leftDragBar) {\n                                this.leftDragBar.removeAttribute(\"style\");\n                            }\n                        }\n                    }\n                }\n                document.onmouseup = (event: MouseEvent) => {\n                    document.onmousemove = null;\n                    document.onmouseup = null;\n\n                    if (actualMovementX <= -100) {\n                        this.originalNode.moveForward();\n                    } else if (actualMovementX >= 100) {\n                        this.originalNode.moveBackward();\n                    } else {\n                        this.container.parentNode.removeChild(this.container);\n                        this.parent.container.appendChild(this.container);\n                        this.translate(0, 0)\n                        // this.translate(-actualMovementX, -actualMovementY);\n                    }\n                }\n            }\n        }\n\n        // const childrenOffsetY = this.label.length != 0 ? 0 : ITEM_GAP - LABEL_HEIGHT;\n        const childrenOffsetY = this.label.length != 0 ? LABEL_HEIGHT : 0;\n\n        const background = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n        this.background = background;\n        container.appendChild(background);\n        background.setAttribute(\"fill\", \"#f7f7f7\");\n        background.setAttribute(\"y\", String(childrenOffsetY));\n\n        for (let child of this.children) {\n            child.render(height - childrenOffsetY);\n\n            child.translate(length, childrenOffsetY);\n            container.appendChild(child.container);\n            length += child.length + child.delayLength// + ITEM_GAP;\n            length += (this.levelFromLeaves - 1) * 2;\n            this.height = Math.max(this.height, child.height + childrenOffsetY);\n        }\n        // length -= ITEM_GAP;\n        length -= (this.levelFromLeaves - 1) * 2;\n        this.length = length;\n        if (this.sortable) {\n            const sortBtnContainer = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n            labelContainer.appendChild(sortBtnContainer);\n            sortBtnContainer.classList.add(\"kf-label-btn-container\")\n            sortBtnContainer.setAttribute(\"transform\", `translate(${length - 35},0)`)\n\n            const sortBtnBackground = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n            sortBtnContainer.appendChild(sortBtnBackground);\n            sortBtnBackground.classList.add(\"kf-label-btn-background\");\n            sortBtnBackground.setAttribute(\"x\", \"5\");\n            sortBtnBackground.setAttribute(\"y\", \"2\");\n\n            const sortBtnIcon = document.createElementNS(\"http://www.w3.org/2000/svg\", \"path\");\n            sortBtnContainer.appendChild(sortBtnIcon);\n            sortBtnIcon.setAttribute(\"d\", \"M 3 13 H 9 V 12 H 3 Z M 3 4 V 4 H 21 V 3 H 3 Z M 3 10 H 13 V 9 H 3 Z M 3 6 L 17 6 L 17 7 L 3 7 Z\");\n            sortBtnIcon.setAttribute(\"transform\", `translate(5, 2)`);\n            sortBtnIcon.classList.add(\"kf-button\");\n\n            sortBtnContainer.onclick = () => {\n                sortBtnContainer.setAttribute(\"style\", \"opacity: 1\");\n                this.createSortList(sortBtnContainer);\n            }\n        }\n\n\n        // labelBackground.setAttribute(\"d\", createLabelBackgroundShape(length, this.levelFromLeaves * (LABEL_HEIGHT + ITEM_SPACE) + THUMBNAIL_HEIGHT, LABEL_CORNER_RADIUS));\n        labelBackground.setAttribute(\"width\", String(length));\n        // labelBackground.setAttribute(\"x\", String(ITEM_GAP));\n        if (this.label.length == 0) {\n            // labelBackground.setAttribute(\"height\", String(this.levelFromLeaves * (LABEL_HEIGHT + ITEM_GAP) - LABEL_HEIGHT + ITEM_GAP + THUMBNAIL_HEIGHT));\n            this.labelBackground.setAttribute(\"height\", \"0\");\n        } else {\n            this.labelBackground.setAttribute(\"height\", String(LABEL_HEIGHT));\n            // labelBackground.setAttribute(\"height\", String(this.levelFromLeaves * (LABEL_HEIGHT + ITEM_GAP) + THUMBNAIL_HEIGHT));\n        }\n        labelBackground.setAttribute(\"rx\", String(LABEL_CORNER_RADIUS));\n        labelBackground.setAttribute(\"fill\", LABEL_COLORS[this.levelFromLeaves % 5]);\n        labelBackground.setAttribute(\"stroke\", LABEL_BORDER_COLOR);\n        // labelBackground.setAttribute(\"stroke-width\", String(this.levelFromLeaves));\n        labelBackground.setAttribute(\"stroke-opacity\", LABEL_BORDER_OPACITY);\n\n        background.setAttribute(\"width\", String(length));\n        background.setAttribute(\"height\", String(this.height - childrenOffsetY));\n\n        labelText.setAttribute(\"fill\", TEXT_COLORS[this.levelFromLeaves % 5]);\n        labelText.setAttribute(\"text-anchor\", \"middle\");\n        labelText.setAttribute(\"x\", String(length / 2));\n        labelText.setAttribute(\"y\", String(LABEL_HEIGHT - TEXT_OFFSET));\n        labelText.setAttribute(\"font-size\", String(FONT_SIZE));\n        labelText.setAttribute(\"font-weight\", \"600\");\n        const maxStrLen = Math.floor(length / 8);\n        labelText.innerHTML = this.label == \"__graph\" ? \"graph\" : this.label.length <= maxStrLen ? this.label : this.label.substring(0, maxStrLen - 3) + \"...\";\n\n        this.renderDelay(this.height, (this.binding != null) && !this.vertical);\n        this.renderLeftBar();\n\n        if (this.label == \"__graph\") {\n            this.container.id = \"__graph\";\n        }\n        return length;\n    }\n}\n\nexport class KfOmit extends KfItem {\n    numberOmitted: number;\n    lastNode: KfItem;\n    constructor(numberOmitted: number, parent: KfGroup, delay: number, originalDelayNode: KfTreeGroup | KfTreeNode, lastNode: KfItem) {\n        super(parent, delay, originalDelayNode);\n        this.numberOmitted = numberOmitted;\n        this.lastNode = lastNode;\n    }\n\n    render(height: number) {\n        if (this.lastNode) {\n            height = this.lastNode.height;\n        } else {\n            height = 10;\n        }\n        this.renderDelay(height);\n        this.height = height;\n        const container = this.mainContainer;\n        const length = 50;\n        this.length = length;\n        if (this.numberOmitted > 0) {\n            for (let i = 0; i < 3; i++) {\n                const circle = document.createElementNS(\"http://www.w3.org/2000/svg\", \"circle\");\n                circle.setAttribute(\"cx\", String(i * 10 + 15));\n                circle.setAttribute(\"cy\", String(height / 2));\n                circle.setAttribute(\"r\", \"3\");\n                circle.setAttribute(\"fill\", OMIT_COLOR);\n                container.appendChild(circle);\n            }\n            const text = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");;\n            text.innerHTML = `x${this.numberOmitted}`;\n            text.setAttribute(\"text-anchor\", \"middle\");\n            text.setAttribute(\"fill\", OMIT_COLOR);\n            text.setAttribute(\"x\", String(length / 2));\n            text.setAttribute(\"y\", String(height / 2 + 16));\n            text.setAttribute(\"font-size\", String(FONT_SIZE));\n            text.setAttribute(\"font-weight\", \"600\");\n            container.appendChild(text);\n        }\n        this.renderLeftBar();\n\n        return length;\n    }\n}\n\nexport class KfDelay {\n    container: Element;\n    parent: KfItem;\n\n    length: number;\n    delay: number;\n\n    virtualLength: number;\n    height: number;\n\n    background: Element;\n    iconPolygon: Element;\n    dragBar: Element;\n    lengthGuideBackground: Element;\n    lengthGuide: Element;\n    // hoverArea: Element;\n\n    originalNode: KfTreeNode | KfTreeGroup;\n\n    previousNode: KfItem;\n\n    parentLength: number;\n\n    constructor(delayTime: number, parent: KfItem, originalNode: KfTreeGroup | KfTreeNode, previousNode: KfItem) {\n        this.container = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n        this.parent = parent;\n\n        this.delay = delayTime;\n\n        this.originalNode = originalNode;\n\n        this.previousNode = previousNode;\n    }\n\n    controlOn() {\n        this.background.removeAttribute(\"display\");\n        this.iconPolygon.removeAttribute(\"display\");\n    }\n\n    controlOff() {\n        this.background.setAttribute(\"display\", \"none\");\n        this.iconPolygon.setAttribute(\"display\", \"none\");\n    }\n\n    updateElements() {\n        if (this.length < 0) {\n            this.controlOn();\n\n            if (this.length > -12) {\n                this.iconPolygon.setAttribute(\"display\", \"none\");\n            }\n\n            this.dragBar.setAttribute(\"x\", String(this.length));\n\n            this.background.setAttribute(\"x\", String(this.length));\n            this.background.setAttribute(\"y\", String(this.height));\n            this.background.setAttribute(\"width\", String(-this.length));\n            this.background.setAttribute(\"height\", String(LABEL_HEIGHT));\n            this.iconPolygon.setAttribute(\"transform\", `rotate(180) translate(${- this.length / 2 - 6},${- this.height - LABEL_HEIGHT / 2 - 6})`);\n        } else if (this.length == 0) {\n            this.controlOff();\n        } else {\n            this.controlOn();\n\n            this.background.setAttribute(\"x\", \"0\");\n            this.background.setAttribute(\"height\", String(this.height));\n            this.background.setAttribute(\"y\", String(0));\n            this.background.setAttribute(\"width\", String(this.length));\n            this.iconPolygon.setAttribute(\"transform\", `translate(${this.length / 2 - 6},${this.height / 2 - 6})`);\n        }\n    }\n\n    updateWidth(moveEvent: MouseEvent) {\n        this.virtualLength += moveEvent.movementX;\n        let deltaL = -this.length;\n        this.length = Math.min(this.virtualLength, MAX_DELAY_LENGTH);\n\n        this.length = Math.max(-this.parentLength, this.length);\n\n        this.length = this.timeToLength(snap(this.lengthToTime(this.length), 50, 10));\n\n        if (this.length < 0) {\n            this.dragBar.removeAttribute(\"display\");\n            this.parent.leftDragBar.setAttribute(\"display\", \"none\");\n        } else {\n            this.dragBar.setAttribute(\"display\", \"none\");\n            this.parent.leftDragBar.removeAttribute(\"display\");\n        }\n\n        this.updateElements();\n        this.updateLengthGuide(Math.max(0, this.length), this.lengthToTime(this.length));\n\n        if (this.length < 0) {\n            this.length = 0;\n        }\n\n        deltaL += this.length;\n\n        this.parent.updateDelayLength();\n    }\n\n    getOriginalHeight() {\n        return Math.min(this.previousNode.getOriginalHeight(), this.parent.getOriginalHeight());;\n    }\n\n    finishUpdateWidth(upEvent: MouseEvent) {\n        document.onmousemove = null;\n        document.onmouseup = null;\n        kfTrack.panningLock = false;\n\n        this.originalNode.updateDelay(snap(this.lengthToTime(Math.max(-this.parentLength, Math.min(MAX_DELAY_LENGTH, this.virtualLength))), 50, 10));\n    }\n\n    updateLengthGuide(position: number, delay: number) {\n        if (delay < 0) {\n            this.lengthGuide.innerHTML = `forward: ${Math.round(-delay)} ms`;\n        } else if (delay == 0) {\n            this.lengthGuide.innerHTML = \"no delay\";\n        } else {\n            this.lengthGuide.innerHTML = `delay: ${delay} ms`;\n        }\n        const textWidth = this.lengthGuide.getBoundingClientRect().width;\n        this.lengthGuideBackground.setAttribute(\"width\", String((textWidth + ITEM_GAP * 2) / kfTrack.scale));\n        this.lengthGuideBackground.setAttribute(\"x\", String(position + (ITEM_GAP * 4) / kfTrack.scale));\n        this.lengthGuide.setAttribute(\"x\", String(position + ITEM_GAP * 5 / kfTrack.scale));\n    }\n\n    lengthToTime(length: number) {\n        if (length >= 0) {\n            return lengthToDelay(length);\n        }\n        return length / this.parentLength * lengthToDuration(this.parentLength);\n    }\n\n    timeToLength(time: number) {\n        if (time >= 0) {\n            return delayToLength(time);\n        }\n        return time / lengthToDuration(this.parentLength) * this.parentLength;\n    }\n\n    render(height: number, allowNegtiveDelay: boolean = false) {\n        this.height = height;\n        if (allowNegtiveDelay) {\n            this.parentLength = this.parent.length;\n        } else {\n            this.parentLength = 0;\n        }\n        this.length = this.timeToLength(this.delay);\n        // this.length = Math.max(-this.lastNodeLength, this.length);\n        this.virtualLength = this.length;\n\n\n        const background = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n        this.container.appendChild(background);\n        this.background = background;\n        background.setAttribute(\"rx\", String(ITEM_GAP))\n        background.setAttribute(\"fill\", \"#FFBD89\");\n\n        const iconPolygon = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');\n        this.container.appendChild(iconPolygon);\n        this.iconPolygon = iconPolygon;\n        iconPolygon.setAttribute(\"transform\", `translate(${this.length / 2 - 6},${height / 2 - 6})`);\n        iconPolygon.setAttributeNS(null, 'fill', '#fff');\n        iconPolygon.setAttributeNS(null, 'points', '10.1,0 10.1,4.1 5.6,0.1 4.3,1.5 8.3,5.1 0,5.1 0,6.9 8.3,6.9 4.3,10.5 5.6,11.9 10.1,7.9 10.1,12 12,12 12,0 ');\n\n        const dragBar = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n        this.container.appendChild(dragBar);\n        this.dragBar = dragBar;\n        dragBar.classList.add(\"kf-drag-bar-left\");\n        dragBar.setAttribute(\"height\", String(LABEL_HEIGHT));\n        dragBar.setAttribute(\"y\", String(height));\n        dragBar.setAttribute(\"width\", String(2 * ITEM_GAP));\n\n        dragBar.onmousedown = this.parent.leftDragBarCallback = (downEvent: MouseEvent) => {\n            if (downEvent.button != 0) {\n                return;\n            }\n            // this.previousNode.hideRightDragBar();\n            this.parent.leftDragBar.setAttribute(\"style\", \"opacity:1\");\n            this.dragBar.setAttribute(\"style\", \"opacity:1\");\n            kfTrack.panningLock = true;\n            // rightDragBar.setAttribute(\"style\", \"opacity:1\");\n\n            kfTrack.setActiveNode(this.parent);\n\n            const lengthGuideBackground = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n            this.container.appendChild(lengthGuideBackground);\n            this.lengthGuideBackground = lengthGuideBackground;\n            lengthGuideBackground.classList.add(\"kf-length-guide-bg\");\n            lengthGuideBackground.setAttribute(\"y\", String((6 - ITEM_GAP) / kfTrack.scale));\n            lengthGuideBackground.setAttribute(\"height\", String((20) / kfTrack.scale));\n\n            const lengthGuide = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n            this.container.appendChild(lengthGuide);\n            this.lengthGuide = lengthGuide;\n            lengthGuide.setAttribute(\"x\", String(this.length));\n            lengthGuide.setAttribute(\"y\", String(18 / kfTrack.scale));\n            lengthGuide.setAttribute(\"font-size\", String(12 / kfTrack.scale) + \"px\");\n            lengthGuide.classList.add(\"kf-delay-length-guide\");\n\n            this.updateLengthGuide(Math.max(0, this.virtualLength), this.lengthToTime(this.virtualLength));\n\n            document.onmousemove = (event: MouseEvent) => { this.updateWidth(event) };\n            document.onmouseup = (event: MouseEvent) => { this.finishUpdateWidth(event) };\n        };\n        this.updateElements();\n\n        if (this.length < 0) {\n            this.parent.hideLeftDragBar = true;\n        } else {\n            this.dragBar.setAttribute(\"display\", \"none\");\n        }\n\n        this.length = Math.max(this.length, 0);\n\n\n        if (this.length == 0) {\n            return { element: this.container, length: 0 };\n        } else {\n            return { element: this.container, length: this.length };\n        }\n    }\n}\n\nexport class KfNode extends KfItem {\n    thumbnailUrl: string;\n    effectType: string;\n    easing: string;\n\n    durationRatio: number = 1;\n\n    virtualLength: number;\n    background: Element;\n    iconPolygon: Element;\n    thumbnail: Element;\n    thumbnailBackground: Element;\n    rightDragBar: Element;\n    lengthGuideBackground: Element;\n    lengthGuide: Element;\n\n    menuContainer: Element;\n\n    originalNode: KfTreeNode;\n\n    constructor(duration: number, effectType: string, easing: string, thumbnailUrl: string, parent: KfGroup, originalNode: KfTreeNode) {\n        super(parent, 0, null);\n        this.effectType = effectType;\n        this.easing = easing;\n        this.length = durationToLength(duration);\n        this.thumbnailUrl = thumbnailUrl;\n        this.originalNode = originalNode;\n    }\n\n    hideRightDragBar() {\n        this.rightDragBar.setAttribute(\"display\", \"none\");\n    }\n\n    updateLengthGuide() {\n        const duration = snap(lengthToDuration(this.length), 10);\n\n        this.lengthGuide.innerHTML = `duration: ${duration} ms`;\n        const textWidth = this.lengthGuide.getBoundingClientRect().width;\n        this.lengthGuideBackground.setAttribute(\"width\", String((textWidth + ITEM_GAP * 2) / kfTrack.scale));\n        this.lengthGuideBackground.setAttribute(\"x\", String(this.length - (ITEM_GAP * 4 + textWidth) / kfTrack.scale));\n        this.lengthGuide.setAttribute(\"x\", String(this.length - ITEM_GAP * 3 / kfTrack.scale));\n    }\n    controlOn() {\n        this.background.removeAttribute(\"display\");\n        this.iconPolygon.removeAttribute(\"display\");\n    }\n\n    controlOff() {\n        this.background.setAttribute(\"display\", \"none\");\n        this.iconPolygon.setAttribute(\"display\", \"none\");\n    }\n    updateDurationBar() {\n        if (this.length < 0) {\n            this.controlOn();\n\n            if (this.length > -12) {\n                this.iconPolygon.setAttribute(\"display\", \"none\");\n            }\n\n            // this.rightBar.setAttribute(\"x\", String(this.length));\n\n            this.background.setAttribute(\"x\", String(this.length));\n            this.background.setAttribute(\"y\", String(this.height));\n            this.background.setAttribute(\"width\", String(-this.length));\n            this.background.setAttribute(\"height\", String(LABEL_HEIGHT));\n            this.iconPolygon.setAttribute(\"transform\", `rotate(180) translate(${- this.length / 2 - 6},${- this.height - LABEL_HEIGHT / 2 - 6})`);\n        } else if (this.length == 0) {\n            this.controlOff();\n        } else {\n            this.controlOn();\n\n            this.background.setAttribute(\"x\", String(ITEM_LENGTH - 2 * ITEM_GAP));\n            this.background.setAttribute(\"height\", String(this.height));\n            this.background.setAttribute(\"y\", String(0));\n            this.background.setAttribute(\"width\", String(this.length  - ITEM_LENGTH + 2 * ITEM_GAP));\n            this.iconPolygon.setAttribute(\"transform\", `translate(${ITEM_LENGTH - 2 * ITEM_GAP + (this.length - ITEM_LENGTH) / 2},${this.height / 2 - 6})`);\n        }\n    }\n    updateWidth(moveEvent: MouseEvent) {\n        this.virtualLength += moveEvent.movementX;\n        let deltaL = -this.length;\n        // this.length = this.virtualLength;\n        this.length = Math.min(Math.max(this.virtualLength, durationToLength(MIN_DURATION * this.durationRatio)), durationToLength(MAX_DURATION * this.durationRatio));\n        // console.log(this.durationRatio);\n        deltaL += this.length;\n        this.thumbnail.setAttribute(\"width\", String(ITEM_LENGTH - 2 * ITEM_GAP));\n        this.thumbnailBackground.setAttribute(\"width\", String(ITEM_LENGTH - 2 * ITEM_GAP));\n        this.rightDragBar.setAttribute(\"x\", String(this.length - 2 * ITEM_GAP));\n        // this.menuContainer.setAttribute(\"transform\", `translate(${this.length / 2},${0})`);\n\n        this.updateDurationBar();\n        this.updateLengthGuide();\n\n        this.parent.resize(this, deltaL);\n    }\n\n    finishUpdateWidth(upEvent: MouseEvent) {\n        document.onmousemove = null;\n        document.onmouseup = null;\n        // this.virtualLength = this.length;\n        // this.container.removeChild(this.lengthGuideBackground);\n        // this.container.removeChild(this.lengthGuide);\n        kfTrack.panningLock = false;\n        this.originalNode.updateDuration(lengthToDuration(this.length) / this.durationRatio);\n    }\n\n    createBtnIcon(btnType: string) {\n        const icon: SVGPathElement = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n        switch (btnType) {\n            case EFFECT_FADE:\n            case EFFECT_FADE_OUT:\n                icon.setAttributeNS(null, 'd', 'M7.37,0.29C7.09,0.31,6.82,0.35,6.55,0.41v15.19c0.27,0.05,0.54,0.09,0.82,0.12V0.29z M3.45,14.18c0.26,0.2,0.53,0.38,0.82,0.54V1.27C3.98,1.44,3.71,1.62,3.45,1.82V14.18z M5.82,0.59C5.54,0.68,5.26,0.79,5,0.9v14.2c0.27,0.12,0.54,0.22,0.82,0.31V0.59z M1.17,4.56C0.65,5.6,0.35,6.76,0.35,8s0.3,2.4,0.82,3.44V4.56z M8.1,0.25C8.1,0.25,8.1,0.25,8.1,0.25l0,15.5c0,0,0,0,0,0c4.27,0,7.75-3.48,7.75-7.75S12.37,0.25,8.1,0.25z M2.72,2.44c-0.3,0.29-0.57,0.6-0.82,0.93v9.26c0.25,0.33,0.52,0.65,0.82,0.93V2.44z');\n                break;\n            case EFFECT_WIPE_LEFT:\n                icon.setAttributeNS(null, 'd', 'M8,0.25C3.73,0.25,0.25,3.73,0.25,8c0,4.27,3.48,7.75,7.75,7.75c4.27,0,7.75-3.48,7.75-7.75C15.75,3.73,12.27,0.25,8,0.25z M8,15c-1.01,0-1.97-0.22-2.84-0.61V8.38c0,0,0,0,0,0h5.44l-2.58,2.39l0.56,0.6L12.21,8L8.58,4.63l-0.56,0.6l2.58,2.39H5.16c0,0,0,0,0,0V1.61C6.03,1.22,6.99,1,8,1c3.86,0,7,3.14,7,7S11.86,15,8,15z');\n                break;\n            case EFFECT_WIPE_RIGHT:\n                icon.setAttributeNS(null, 'd', 'M0.25,8c0,4.27,3.48,7.75,7.75,7.75s7.75-3.48,7.75-7.75S12.27,0.25,8,0.25S0.25,3.73,0.25,8z M1,8 c0-3.86,3.14-7,7-7c1.01,0,1.97,0.22,2.84,0.61v6.01l0,0H5.4l2.58-2.39l-0.56-0.6L3.79,8l3.63,3.37l0.56-0.6L5.4,8.38h5.44l0,0v6.01 C9.97,14.78,9.01,15,8,15C4.14,15,1,11.86,1,8z');\n                break;\n            case EFFECT_WIPE_TOP:\n                icon.setAttributeNS(null, 'd', 'M8,15.75c4.27,0,7.75-3.48,7.75-7.75S12.27,0.25,8,0.25S0.25,3.73,0.25,8S3.73,15.75,8,15.75z M8,15 c-3.86,0-7-3.14-7-7c0-1.01,0.22-1.97,0.61-2.84h6.01l0,0v5.44L5.23,8.02l-0.6,0.56L8,12.21l3.37-3.63l-0.6-0.56L8.38,10.6V5.16l0,0 h6.01C14.78,6.03,15,6.99,15,8C15,11.86,11.86,15,8,15z');\n                break;\n            case EFFECT_WIPE_BOTTOM:\n                icon.setAttributeNS(null, 'd', 'M8,0.25C3.73,0.25,0.25,3.73,0.25,8S3.73,15.75,8,15.75s7.75-3.48,7.75-7.75S12.27,0.25,8,0.25z M8,1 c3.86,0,7,3.14,7,7c0,1.01-0.22,1.97-0.61,2.84H8.38l0,0V5.4l2.39,2.58l0.6-0.56L8,3.79L4.63,7.42l0.6,0.56L7.62,5.4v5.44l0,0H1.61 C1.22,9.97,1,9.01,1,8C1,4.14,4.14,1,8,1z');\n                break;\n            case EFFECT_GROW:\n                icon.setAttributeNS(null, 'd', 'M8,0.25C3.73,0.25,0.25,3.73,0.25,8c0,4.27,3.48,7.75,7.75,7.75c4.27,0,7.75-3.48,7.75-7.75C15.75,3.73,12.27,0.25,8,0.25z M8,15c-3.86,0-7-3.14-7-7s3.14-7,7-7s7,3.14,7,7S11.86,15,8,15z M13.99,7.91c0-0.13-0.12-0.24-0.25-0.24H8.17c-0.14,0-0.25,0.11-0.25,0.25V9.9c0,0.14,0.11,0.25,0.25,0.25h2.79c-0.25,0.43-0.56,0.75-0.93,0.97C9.58,11.41,9,11.55,8.32,11.55c-1.06,0-1.93-0.34-2.65-1.04C5.1,9.95,4.78,9.31,4.66,8.57l0.8,0.65l0.17-0.21L4.57,8.14C4.54,8.1,4.5,8.07,4.46,8.05l-0.1-0.08L4.3,8.04c-0.11,0.03-0.2,0.13-0.19,0.25c0,0.01,0,0.01,0,0.02L3.41,9.32l0.23,0.16l0.55-0.78c0.14,0.82,0.52,1.56,1.14,2.17c0.81,0.79,1.82,1.18,3,1.18c0.77,0,1.44-0.17,1.97-0.5c0.54-0.33,0.98-0.85,1.31-1.54c0.04-0.08,0.03-0.17-0.02-0.24s-0.13-0.12-0.21-0.12H8.42V8.17h5.08l0.01,0.22c0,0.92-0.24,1.8-0.72,2.63c-0.48,0.82-1.1,1.46-1.86,1.9c-0.76,0.43-1.66,0.65-2.68,0.65c-1.1,0-2.09-0.24-2.95-0.72c-0.86-0.47-1.54-1.16-2.04-2.04C2.75,9.93,2.5,8.96,2.5,7.94c0-1.4,0.47-2.63,1.39-3.66c1.09-1.23,2.54-1.85,4.3-1.85c0.92,0,1.8,0.17,2.6,0.51c0.61,0.26,1.23,0.7,1.83,1.32l-1.13,1.12C10.54,4.46,9.43,4,8.2,4C8.06,4,7.95,4.11,7.95,4.25S8.06,4.5,8.2,4.5c1.19,0,2.2,0.46,3.1,1.41c0.05,0.05,0.11,0.08,0.18,0.08c0.09,0,0.13-0.02,0.18-0.07l1.48-1.47c0.1-0.09,0.1-0.25,0.01-0.35c-0.7-0.76-1.43-1.3-2.16-1.61c-0.87-0.37-1.81-0.55-2.8-0.55c-1.91,0-3.48,0.68-4.67,2.02C2.51,5.08,2,6.42,2,7.94c0,1.11,0.28,2.16,0.82,3.11c0.54,0.96,1.3,1.71,2.23,2.23c0.93,0.52,2.01,0.78,3.2,0.78c1.11,0,2.1-0.24,2.93-0.72c0.83-0.48,1.52-1.18,2.04-2.08C13.74,10.36,14,9.4,14,8.38L13.99,7.91z');\n                break;\n            case EFFECT_CIRCLE:\n                icon.setAttributeNS(null, 'd', 'M8.08,0.29c-4.27,0-7.73,3.46-7.73,7.73s3.47,7.73,7.73,7.73s7.73-3.46,7.73-7.73S12.35,0.29,8.08,0.29z M8.08,13.79c-3.18,0-5.77-2.58-5.77-5.77S4.9,2.25,8.08,2.25s5.77,2.58,5.77,5.77S11.27,13.79,8.08,13.79z M8.08,3.14 c-2.7,0-4.88,2.19-4.88,4.88s2.19,4.88,4.88,4.88c2.7,0,4.88-2.19,4.88-4.88S10.78,3.14,8.08,3.14z M8.08,11.66 c-2.01,0-3.64-1.63-3.64-3.64s1.63-3.64,3.64-3.64S11.73,6,11.73,8.02S10.1,11.66,8.08,11.66z M8.08,5.18 c-1.56,0-2.83,1.27-2.83,2.83s1.27,2.83,2.83,2.83s2.83-1.27,2.83-2.83S9.65,5.18,8.08,5.18z M8.08,10.13 c-1.17,0-2.11-0.94-2.11-2.11S6.91,5.9,8.08,5.9s2.11,0.94,2.11,2.11S9.25,10.13,8.08,10.13z')\n                break;\n            case EFFECT_WHEEL:\n                icon.setAttributeNS(null, 'd', 'M8,0.25C3.73,0.25,0.25,3.73,0.25,8c0,4.27,3.48,7.75,7.75,7.75c4.27,0,7.75-3.48,7.75-7.75C15.75,3.73,12.27,0.25,8,0.25z M8,1c0,2.33,0,4.67,0,7c-1.91,1.33-3.83,2.66-5.74,4C1.47,10.86,1,9.49,1,8C1,4.14,4.14,1,8,1z M4.04,10.45c0.04,0,0.08-0.01,0.12-0.03c0.12-0.07,0.16-0.22,0.1-0.34C3.9,9.44,3.71,8.72,3.71,8c0-1.87,1.25-3.52,3.01-4.08L5.98,5.21L6.29,5.4L7.4,3.5L7.16,3.39C7.14,3.37,7.12,3.36,7.09,3.35L5.43,2.54L5.27,2.87L6.5,3.47C4.58,4.11,3.21,5.94,3.21,8c0,0.81,0.21,1.61,0.6,2.32C3.87,10.4,3.95,10.45,4.04,10.45z');\n                break;\n            case EFFECT_TRANSITION:\n                icon.setAttributeNS(null, 'd', 'M11.71,7.98L8.9,5.17L8.9,7.21L5,7.21L5,8.69L8.9,8.69L8.9,10.79z M8.88,0.27v4.22l3.49,3.49l-3.49,3.49v4.22c3.92-0.39,6.98-3.69,6.98-7.71C15.85,3.96,12.79,0.66,8.88,0.27z M7.71,9.38H4.22V6.59h3.49V0.25c-4.1,0.2-7.36,3.58-7.36,7.73c0,4.15,3.26,7.53,7.36,7.73V9.38z');\n                break;\n            case EASING_LINEAR:\n                icon.setAttributeNS(null, 'd', 'M4.02,12.92c-0.09,0-0.19-0.04-0.26-0.11c-0.15-0.14-0.15-0.38-0.01-0.53l8.18-8.38c0.15-0.15,0.38-0.15,0.53-0.01c0.15,0.14,0.15,0.38,0.01,0.53l-8.18,8.38C4.22,12.89,4.12,12.92,4.02,12.92z M11.93,14.87H4.29c-1.74,0-3.15-1.42-3.15-3.15V4.07c0-1.74,1.41-3.15,3.15-3.15h7.64c1.74,0,3.15,1.41,3.15,3.15v7.64C15.09,13.46,13.67,14.87,11.93,14.87z M4.29,1.67c-1.33,0-2.4,1.08-2.4,2.4v7.64c0,1.33,1.08,2.4,2.4,2.4h7.64c1.33,0,2.4-1.08,2.4-2.4V4.07c0-1.33-1.08-2.4-2.4-2.4H4.29z');\n                break;\n            case EASING_IN_QUAD:\n                icon.setAttributeNS(null, 'd', 'M12.21,3.79c0.03,0,0.06,0,0.08,0.01c0.2,0.05,0.33,0.25,0.28,0.45c-0.32,1.4-1.68,6.13-5.89,7.98 c-0.82,0.36-1.7,0.59-2.62,0.69c-0.22,0.02-0.39-0.13-0.41-0.33s0.13-0.39,0.33-0.41c0.84-0.09,1.65-0.3,2.4-0.63 c3.89-1.71,5.16-6.14,5.46-7.46C11.88,3.9,12.04,3.79,12.21,3.79z M11.93,0.92H4.29c-1.74,0-3.15,1.41-3.15,3.15v7.65c0,1.73,1.41,3.15,3.15,3.15h7.64 c1.74,0,3.16-1.41,3.15-3.16V4.07C15.08,2.33,13.67,0.92,11.93,0.92z M14.33,11.71c0,1.32-1.07,2.4-2.4,2.4H4.29 c-1.32,0-2.4-1.07-2.4-2.4V4.07c0-1.32,1.07-2.4,2.4-2.4h7.64c1.32,0,2.4,1.07,2.4,2.4V11.71z');\n                break;\n            case EASING_OUT_QUAD:\n                icon.setAttributeNS(null, 'd', 'M4.02,12.92c-0.03,0-0.06,0-0.08-0.01c-0.2-0.05-0.33-0.25-0.28-0.45c0.32-1.4,1.68-6.13,5.89-7.98c0.82-0.36,1.7-0.59,2.62-0.69c0.22-0.02,0.39,0.13,0.41,0.33s-0.13,0.39-0.33,0.41c-0.84,0.09-1.65,0.3-2.4,0.63c-3.89,1.71-5.16,6.14-5.46,7.46C4.35,12.81,4.19,12.92,4.02,12.92z M11.93,14.87H4.29c-1.74,0-3.15-1.42-3.15-3.15V4.07c0-1.74,1.41-3.15,3.15-3.15h7.64c1.74,0,3.15,1.41,3.15,3.15v7.64C15.09,13.46,13.67,14.87,11.93,14.87z M4.29,1.67c-1.33,0-2.4,1.08-2.4,2.4v7.64c0,1.33,1.08,2.4,2.4,2.4h7.64c1.33,0,2.4-1.08,2.4-2.4V4.07c0-1.33-1.08-2.4-2.4-2.4H4.29z');\n                break;\n            case EASING_INOUT_QUAD:\n                icon.setAttributeNS(null, 'd', 'M4.02,12.92c-0.18,0-0.35-0.14-0.37-0.32c-0.03-0.21,0.12-0.39,0.32-0.42c1.02-0.14,1.84-0.5,2.46-1.08c0.93-0.87,1.17-2.06,1.4-3.2c0.25-1.25,0.51-2.53,1.64-3.37C10.18,4,11.1,3.76,12.22,3.79c0.21,0.01,0.37,0.18,0.36,0.39c-0.01,0.21-0.2,0.36-0.39,0.36c-0.96-0.03-1.71,0.16-2.27,0.58C9.02,5.8,8.81,6.84,8.56,8.05c-0.24,1.21-0.52,2.57-1.63,3.6c-0.73,0.68-1.69,1.11-2.87,1.27C4.05,12.92,4.04,12.92,4.02,12.92z M11.93,14.87H4.29c-1.74,0-3.15-1.42-3.15-3.15V4.07c0-1.74,1.41-3.15,3.15-3.15h7.64c1.74,0,3.15,1.41,3.15,3.15v7.64C15.09,13.46,13.67,14.87,11.93,14.87z M4.29,1.67c-1.33,0-2.4,1.08-2.4,2.4v7.64c0,1.33,1.08,2.4,2.4,2.4h7.64c1.33,0,2.4-1.08,2.4-2.4V4.07c0-1.33-1.08-2.4-2.4-2.4H4.29z');\n                break;\n            case EASING_IN_CUBIC:\n                icon.setAttributeNS(null, 'd', 'M12.21,3.79c0.03,0,0.06,0,0.08,0.01c0.2,0.05,0.33,0.25,0.28,0.45c-0.32,1.4-1.68,6.13-5.89,7.98 c-0.82,0.36-1.7,0.59-2.62,0.69c-0.22,0.02-0.39-0.13-0.41-0.33s0.13-0.39,0.33-0.41c0.84-0.09,1.65-0.3,2.4-0.63 c3.89-1.71,5.16-6.14,5.46-7.46C11.88,3.9,12.04,3.79,12.21,3.79z M11.93,0.92H4.29c-1.74,0-3.15,1.41-3.15,3.15v7.65c0,1.73,1.41,3.15,3.15,3.15h7.64 c1.74,0,3.16-1.41,3.15-3.16V4.07C15.08,2.33,13.67,0.92,11.93,0.92z M14.33,11.71c0,1.32-1.07,2.4-2.4,2.4H4.29 c-1.32,0-2.4-1.07-2.4-2.4V4.07c0-1.32,1.07-2.4,2.4-2.4h7.64c1.32,0,2.4,1.07,2.4,2.4V11.71z');\n                break;\n            case EASING_OUT_CUBIC:\n                icon.setAttributeNS(null, 'd', 'M4.02,12.92c-0.03,0-0.06,0-0.08-0.01c-0.2-0.05-0.33-0.25-0.28-0.45c0.32-1.4,1.68-6.13,5.89-7.98c0.82-0.36,1.7-0.59,2.62-0.69c0.22-0.02,0.39,0.13,0.41,0.33s-0.13,0.39-0.33,0.41c-0.84,0.09-1.65,0.3-2.4,0.63c-3.89,1.71-5.16,6.14-5.46,7.46C4.35,12.81,4.19,12.92,4.02,12.92z M11.93,14.87H4.29c-1.74,0-3.15-1.42-3.15-3.15V4.07c0-1.74,1.41-3.15,3.15-3.15h7.64c1.74,0,3.15,1.41,3.15,3.15v7.64C15.09,13.46,13.67,14.87,11.93,14.87z M4.29,1.67c-1.33,0-2.4,1.08-2.4,2.4v7.64c0,1.33,1.08,2.4,2.4,2.4h7.64c1.33,0,2.4-1.08,2.4-2.4V4.07c0-1.33-1.08-2.4-2.4-2.4H4.29z');\n                break;\n            case EASING_INOUT_CUBIC:\n                icon.setAttributeNS(null, 'd', 'M4.02,12.92c-0.18,0-0.35-0.14-0.37-0.32c-0.03-0.21,0.12-0.39,0.32-0.42c1.02-0.14,1.84-0.5,2.46-1.08c0.93-0.87,1.17-2.06,1.4-3.2c0.25-1.25,0.51-2.53,1.64-3.37C10.18,4,11.1,3.76,12.22,3.79c0.21,0.01,0.37,0.18,0.36,0.39c-0.01,0.21-0.2,0.36-0.39,0.36c-0.96-0.03-1.71,0.16-2.27,0.58C9.02,5.8,8.81,6.84,8.56,8.05c-0.24,1.21-0.52,2.57-1.63,3.6c-0.73,0.68-1.69,1.11-2.87,1.27C4.05,12.92,4.04,12.92,4.02,12.92z M11.93,14.87H4.29c-1.74,0-3.15-1.42-3.15-3.15V4.07c0-1.74,1.41-3.15,3.15-3.15h7.64c1.74,0,3.15,1.41,3.15,3.15v7.64C15.09,13.46,13.67,14.87,11.93,14.87z M4.29,1.67c-1.33,0-2.4,1.08-2.4,2.4v7.64c0,1.33,1.08,2.4,2.4,2.4h7.64c1.33,0,2.4-1.08,2.4-2.4V4.07c0-1.33-1.08-2.4-2.4-2.4H4.29z');\n                break;\n            case DURATION:\n                icon.setAttributeNS(null, 'd', 'M8.26,0.68C8.17,0.67,8.09,0.65,8,0.65c-4.12,0-7.46,3.34-7.46,7.46c0,4.12,3.34,7.46,7.46,7.46c2.54,0,4.78-1.28,6.12-3.22c0.84-1.2,1.33-2.66,1.33-4.24C15.46,4.08,12.26,0.82,8.26,0.68z M8,14.81c-3.7,0-6.71-3.01-6.71-6.71c0-3.53,2.75-6.44,6.22-6.69v6.7V8.5l0.31,0.22l1.41,1.02l3.82,2.76C11.79,13.96,9.95,14.81,8,14.81z M13.32,11.8c-0.07,0.1-0.19,0.16-0.3,0.16c-0.08,0-0.15-0.02-0.22-0.07L7.84,8.31V2.03c0-0.21,0.17-0.38,0.38-0.38s0.38,0.17,0.38,0.38v5.9l4.64,3.35C13.4,11.39,13.44,11.63,13.32,11.8z');\n                break;\n            default:\n        }\n        return icon;\n    }\n\n    createBtn(btnType: string) {\n        const container = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n        const rect = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n        rect.setAttribute(\"width\", \"16\");\n        rect.setAttribute(\"height\", \"16\");\n        rect.setAttribute(\"opacity\", \"0\");\n        container.appendChild(rect);\n        container.appendChild(this.createBtnIcon(btnType));\n        container.classList.add(\"kf-button\");\n        return container;\n    }\n\n    createDropDownList(items: string[], x: number, y: number, callback: Function) {\n        this.menuContainer.setAttribute(\"style\", \"opacity: 1\");\n        const itemWidth = 120;\n        const itemHeight = 20;\n        let cx = this.getX();\n        // x += cx;\n        y += this.getY();\n\n        const container = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n        kfTrack.innerContainer.appendChild(container);\n        container.setAttribute(\"transform\", `translate(${(this.length - itemWidth) / 2 + cx},${y})scale(${1 / kfTrack.scale})`);\n\n        const background1 = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n        background1.setAttribute(\"opacity\", \"0\");\n        background1.setAttribute(\"y\", String(-25 * kfTrack.scale));\n        background1.setAttribute(\"x\", String((itemWidth / 2 + x) * kfTrack.scale));\n        background1.setAttribute(\"width\", String(25 * kfTrack.scale));\n        background1.setAttribute(\"height\", String(25 * kfTrack.scale));\n        container.appendChild(background1);\n\n        let index = 0;\n        for (let item of items) {\n            const itemBackground = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n            itemBackground.setAttribute(\"width\", String(itemWidth));\n            itemBackground.setAttribute(\"height\", String(itemHeight));\n            itemBackground.setAttribute(\"fill\", \"#676767\");\n            itemBackground.setAttribute(\"stroke\", \"#AAA\");\n            itemBackground.setAttribute(\"y\", String(index * (itemHeight)))\n            container.appendChild(itemBackground);\n\n            const itemContainer = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n            itemContainer.classList.add(\"kf-button\")\n            itemContainer.setAttribute(\"transform\", `translate(${0},${index * (itemHeight)})`);\n            container.appendChild(itemContainer);\n            itemContainer.onclick = () => {\n                callback(item);\n            }\n\n            const itemMask = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n            itemMask.setAttribute(\"width\", String(itemWidth));\n            itemMask.setAttribute(\"height\", String(itemHeight));\n            itemMask.setAttribute(\"opacity\", \"0\");\n            itemContainer.appendChild(itemMask);\n\n            const buttonIcon = this.createBtnIcon(item);\n            itemContainer.appendChild(buttonIcon);\n            buttonIcon.setAttribute(\"transform\", `translate(${itemHeight / 2 - 8},${itemHeight / 2 - 8})`)\n\n            const text = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n            text.innerHTML = item;\n            text.setAttribute(\"font-size\", \"12\");\n            text.setAttribute(\"x\", \"25\");\n            text.setAttribute(\"y\", String(itemHeight / 2 + 4));\n            text.setAttribute(\"font-weight\", \"600\");\n            itemContainer.appendChild(text);\n\n            index++\n        }\n\n        container.onmouseleave = () => {\n            kfTrack.innerContainer.removeChild(container);\n            this.menuContainer.removeAttribute(\"style\");\n        }\n    }\n\n    createMenu() {\n        const menuContainer = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n        this.menuContainer = menuContainer;\n        this.mainContainer.appendChild(menuContainer);\n        menuContainer.classList.add(\"kf-item-menu\");\n\n        const menuWidth = 50;\n        const menuRoundCorner = 10;\n        const menuBackgroundColor = \"#676767\"\n\n        // menuContainer.setAttribute(\"transform\", `translate(${this.length / 2},${0})`);\n        menuContainer.setAttribute(\"transform\", `translate(${ITEM_LENGTH / 2},${0})`);\n\n        const menuBackground1 = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n        menuContainer.appendChild(menuBackground1);\n        menuBackground1.setAttribute(\"width\", String(menuWidth));\n        menuBackground1.setAttribute(\"height\", String(menuWidth / 2));\n        menuBackground1.setAttribute(\"x\", String(- menuWidth / 2));\n        menuBackground1.setAttribute(\"rx\", String(menuRoundCorner));\n        menuBackground1.setAttribute(\"fill\", menuBackgroundColor);\n\n        const menuBackground2 = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n        menuContainer.appendChild(menuBackground2);\n        menuBackground2.setAttribute(\"width\", String(menuWidth));\n        menuBackground2.setAttribute(\"height\", String(menuWidth / 2 - menuRoundCorner));\n        menuBackground2.setAttribute(\"x\", String(- menuWidth / 2));\n        menuBackground2.setAttribute(\"fill\", menuBackgroundColor);\n\n\n        const effectBtn = this.createBtn(this.effectType);\n        menuContainer.appendChild(effectBtn);\n        effectBtn.setAttribute(\"transform\", `translate(${-25 / 2 - 8},${25 / 2 - 8})`);\n\n        const easingBtn = this.createBtn(this.easing);\n        menuContainer.appendChild(easingBtn);\n        easingBtn.setAttribute(\"transform\", `translate(${25 / 2 - 8},${25 / 2 - 8})`);\n\n        const line = document.createElementNS(\"http://www.w3.org/2000/svg\", \"line\");\n        line.setAttribute(\"y1\", \"5\");\n        line.setAttribute(\"y2\", \"20\");\n        line.setAttribute(\"stroke\", \"rgb(163, 163, 163)\");\n        menuContainer.appendChild(line);\n\n        effectBtn.onclick = () => {\n            this.createDropDownList(EFFECTS, -25, 25, (effectType: string) => {\n                kfTrack.setActiveNode(this);\n                this.originalNode.updateEffectType(effectType);\n            });\n        }\n\n        easingBtn.onclick = () => {\n            this.createDropDownList(EASINGS, 0, 25, (easing: string) => {\n                kfTrack.setActiveNode(this);\n                this.originalNode.updateEasing(easing);\n            })\n        }\n\n    }\n\n    render(height: number) {\n        this.height = height;\n        const container = this.mainContainer;\n        const length = this.length;\n        this.virtualLength = length;\n        container.classList.add(\"kf-item-container\");\n\n\n        const thumbnailBackground = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n        container.appendChild(thumbnailBackground);\n        this.thumbnailBackground = thumbnailBackground;\n        // thumbnailBackground.setAttribute(\"stroke\", LABEL_COLORS[0]);\n        thumbnailBackground.setAttribute(\"fill\", \"white\");\n        thumbnailBackground.setAttribute(\"stroke\", \"#CCC\");\n        thumbnailBackground.setAttribute(\"width\", String(ITEM_LENGTH - 2 * ITEM_GAP));\n        thumbnailBackground.setAttribute(\"height\", String(height));\n        // thumbnailBackground.setAttribute(\"y\", String(LABEL_HEIGHT));\n\n        const thumbnail = document.createElementNS(\"http://www.w3.org/2000/svg\", \"image\");\n        container.appendChild(thumbnail);\n        this.thumbnail = thumbnail;\n        thumbnail.setAttribute(\"href\", this.thumbnailUrl);\n        thumbnail.setAttribute(\"width\", String(ITEM_LENGTH - 2 * ITEM_GAP));\n        thumbnail.setAttribute(\"height\", String(height));\n        // thumbnail.setAttribute(\"y\", String(LABEL_HEIGHT));\n\n        const background = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n        container.appendChild(background);\n        this.background = background;\n        background.setAttribute(\"rx\", String(ITEM_GAP))\n        background.setAttribute(\"fill\", \"#71b1ed\");\n\n\n        const iconPolygon = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');\n        container.appendChild(iconPolygon);\n        this.iconPolygon = iconPolygon;\n        iconPolygon.setAttribute(\"transform\", `translate(${(this.length + ITEM_LENGTH - 2 * ITEM_GAP) / 2 - 2 * ITEM_GAP},${height / 2 - 6})`);\n        iconPolygon.setAttributeNS(null, 'fill', '#fff');\n        iconPolygon.setAttributeNS(null, 'points', '10.1,0 10.1,4.1 5.6,0.1 4.3,1.5 8.3,5.1 0,5.1 0,6.9 8.3,6.9 4.3,10.5 5.6,11.9 10.1,7.9 10.1,12 12,12 12,0 ');\n\n        const rightDragBar = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n        container.appendChild(rightDragBar);\n        this.rightDragBar = rightDragBar;\n        rightDragBar.setAttribute(\"x\", String(length - 2 * ITEM_GAP));\n        rightDragBar.setAttribute(\"y\", String(0));\n        rightDragBar.setAttribute(\"width\", String(ITEM_GAP * 2));\n        rightDragBar.setAttribute(\"height\", String(height));\n        rightDragBar.classList.add(\"kf-drag-bar-right\");\n\n        rightDragBar.onmousedown = (downEvent: MouseEvent) => {\n            if (downEvent.button != 0) {\n                return;\n            }\n            kfTrack.panningLock = true;\n            rightDragBar.setAttribute(\"style\", \"opacity:1\");\n\n            kfTrack.setActiveNode(this);\n\n            const lengthGuideBackground = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n            this.container.appendChild(lengthGuideBackground);\n            this.lengthGuideBackground = lengthGuideBackground;\n            lengthGuideBackground.classList.add(\"kf-length-guide-bg\");\n            lengthGuideBackground.setAttribute(\"y\", String((6 - ITEM_GAP) / kfTrack.scale));\n            lengthGuideBackground.setAttribute(\"height\", String(20 / kfTrack.scale));\n\n            const lengthGuide = document.createElementNS(\"http://www.w3.org/2000/svg\", \"text\");\n            this.container.appendChild(lengthGuide);\n            this.lengthGuide = lengthGuide;\n            lengthGuide.setAttribute(\"x\", String(this.length));\n            lengthGuide.setAttribute(\"y\", String(18 / kfTrack.scale));\n            lengthGuide.setAttribute(\"font-size\", String(12 / kfTrack.scale));\n            lengthGuide.classList.add(\"kf-length-guide\");\n\n            this.updateLengthGuide();\n\n            document.onmousemove = (event: MouseEvent) => { this.updateWidth(event) };\n            document.onmouseup = (event: MouseEvent) => { this.finishUpdateWidth(event) };\n        }\n\n        this.updateDurationBar();\n        this.renderLeftBar();\n        this.createMenu();\n        return length;\n    }\n}\n\nclass KfTrack {\n    groups: KfItem[];\n    lastGroup: KfItem;\n    length: number;\n    panningX: number;\n    panningY: number;\n    scale: number = 1;\n\n    aniX: number;\n    aniY: number;\n    aniScale: number = 1;\n\n    container: Element;\n    innerContainer: Element;\n    panningLock: boolean = false;\n    timingLock: boolean = false;\n\n    activeNodeX: number;\n    activeNodeId: number;\n    activeNode: KfItem;\n\n    updateKfTrack(groups: KfItem[]) {\n        // console.log(groups);\n        this.groups = groups;\n        this.lastGroup = groups.pop();\n        this.render();\n    }\n\n    resize(activeChild: KfItem, deltaL: number) {\n        let flag = false;\n        for (let group of this.groups) {\n            if (flag) {\n                group.translate(deltaL, 0);\n            }\n            if (group == activeChild) {\n                flag = true;\n            }\n        }\n    }\n\n    resetActiveNode() {\n        this.activeNodeId = -1;\n    }\n\n    setActiveNode(node: KfItem) {\n        this.activeNodeId = node.id;\n        this.activeNodeX = node.getX() - this.panningX;\n    }\n\n    render() {\n        const container = document.getElementById(\"kfTracksContainer\");\n        this.container = container;\n        container.innerHTML = \"\";\n\n        let maxHeight = THUMBNAIL_HEIGHT;\n        let maxLevel = 0;\n        for (let i of this.groups) {\n            i.calcLevelFromLeaves();\n            maxHeight = Math.max(maxHeight, i.getOriginalHeight());\n            maxLevel = Math.max(maxLevel, i.levelFromLeaves);\n        }\n\n        const innerContainer = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n        this.innerContainer = innerContainer;\n        innerContainer.id = \"kfTracksInnerContainer\";\n        container.appendChild(innerContainer);\n\n        const trackBackground = document.createElementNS(\"http://www.w3.org/2000/svg\", \"rect\");\n        innerContainer.appendChild(trackBackground);\n        // trackBackground.setAttribute(\"fill\", \"#dfdfdf\");\n        trackBackground.setAttribute(\"fill\", \"#f7f7f7\");\n        trackBackground.setAttribute(\"y\", \"20\");\n        trackBackground.setAttribute(\"width\", \"10000\");\n        trackBackground.setAttribute(\"height\", String(maxHeight));\n\n        let x = 0;\n        for (let i of this.groups) {\n            const length = i.render(maxHeight);\n            i.translate(x, 20);\n\n            x += length + i.delayLength;\n            x += (maxLevel - 2) * 2;\n            innerContainer.append(i.container);\n        }\n        // x += 20;\n        x -= (maxLevel - 2) * 2;\n        // x -= ITEM_GAP;\n        const nonSelectedMarks = calcNonSelectedMarks();\n\n        const suggestFrames = getSuggestFrames([]);\n        if (nonSelectedMarks.size) {\n            AddPanel.createAddPanel(maxHeight, suggestFrames.length > 0);\n            const addPanelContainer = AddPanel.container;\n            innerContainer.appendChild(addPanelContainer);\n            addPanelContainer.setAttribute(\"transform\", `translate(${x}, 20)`);\n            x += AddPanel.width\n        }\n        // suggestPanel.removeSuggestPanel();\n        const recommendList: SVGElement = document.createElementNS(\"http://www.w3.org/2000/svg\", \"g\");\n        recommendList.setAttribute(\"transform\", `translate(${x}, 20)`);\n        recommendList.setAttribute(\"id\", \"recommendList\");\n        innerContainer.appendChild(recommendList);\n        suggestPanel.createSuggestPanel(suggestFrames, maxHeight, [...calcSelectedMarks()]);\n\n        if (suggestFrames.length > 0) {\n            this.timingLock = true;\n            x += 260;\n        } else {\n            this.timingLock = false;\n        }\n        if (nonSelectedMarks.size) {\n            this.lastGroup.calcLevelFromLeaves();\n            const length = this.lastGroup.render(maxHeight);\n            this.lastGroup.translate(x, 20);\n\n            x += length + this.lastGroup.delayLength;\n            innerContainer.append(this.lastGroup.container);\n        }\n\n        this.length = x;\n        if (this.activeNodeId == -1) {\n            this.updatePanning(x, 0);\n            kfContainer.kfContainerTransX(x);\n        } else {\n            this.updatePanning(this.activeNode.getX() - this.activeNodeX, 0);\n            kfContainer.kfContainerTransX(this.activeNode.getX() - this.activeNodeX);\n        }\n\n        container.addEventListener(\"wheel\", (event: WheelEvent) => {\n            const factorX = 0.06;\n            const factorY = 0.02;\n            if (event.shiftKey) {\n                // this.updateScale(this.scale * Math.pow(1.0001, -event.deltaY));\n            } else if (event.altKey) {\n                this.updatePanning(this.panningX, this.panningY + event.deltaY * factorY);\n\n            } else {\n                this.updatePanning(this.panningX + event.deltaY * factorX, this.panningY);\n                kfContainer.kfContainerTransX(this.panningX + event.deltaY * factorX);\n            }\n        })\n    }\n    updateScale(scale: number) {\n        scale = Math.max(0.5, Math.min(1, scale));\n        let scaleFactor = scale / this.scale\n        this.scale = scale;\n        this.updatePanning(this.panningX, this.panningY);\n    }\n\n    updatePanning(x: number, y: number) {\n        if (this.panningLock) {\n            return;\n        }\n        const rect = this.container.getBoundingClientRect();\n        if (this.length * this.scale - x * this.scale < rect.width) {\n            x = this.length - rect.width / this.scale;\n        }\n        if (x < 0) {\n            x = 0;\n        }\n        this.panningX = x;\n        this.panningY = y;\n        this.innerContainer.setAttribute(\"transform\", `scale(${this.scale})translate(${-this.panningX},${this.panningY})`);\n        const aniPreview = document.getElementById(\"aniPreview\");\n        const loc = document.getElementById('recommendList').getBoundingClientRect();\n        aniPreview.style.left = `${loc.left}px`;\n        aniPreview.style.top = `${loc.top}px`;\n    }\n}\n\nexport const kfTrack = new KfTrack();","import { AnimationTreeGroup } from \"./animationTree\";\nimport { chartManager, MARKID } from \"./chartManager\";\nimport { KfItem, KfRow, KfNode, KfOmit, kfTrack, KfDelay, KfColume, KfGroup } from \"./kfTrack\";\nimport { MarkSelector } from \"./markSelector\";\nimport { sortStrings } from \"./sortUtil\";\nimport Tool from \"../util/tool\";\nimport { Loading, loadingBlock } from \"../components/widgets/loading\";\ntype MarkType = string;\ntype AttributeName = string;\ntype AttributeValue = string;\n\nexport class KfTreeNode {\n    public markTypeSelectors: Set<MarkType>;\n    parent: KfTreeGroup;\n\n    grouping: null | {\n        child: KfTreeGroup;\n        groupBy: AttributeName;\n        sequence: AttributeValue[];\n        sort: {\n            channel: string;\n            order: string;\n        }\n    }\n    vertical = false;\n\n    property: null | {\n        duration: number;\n        effectType: string;\n        easing: string;\n    }\n    durationBinding: string = null;\n\n    delay: number;\n    updateFlag: boolean = false;\n\n    constructor(markTypeSelectors: Set<MarkType>, parent: KfTreeGroup) {\n        this.markTypeSelectors = markTypeSelectors;\n        this.grouping = null;\n        this.property = null;\n        this.delay = 0;\n        this.parent = parent;\n    }\n\n    calcDurationRatio(marks: string[]) {\n        if (!this.durationBinding) {\n            return 1;\n        }\n        return chartManager.getAvgValue(marks, this.durationBinding) / chartManager.getMinValue(this.durationBinding);\n    }\n\n    getBinding(marks: Set<string>) {\n        const options: string[] = [];\n        const childMarkType = this.markTypeSelectors;\n        for (let markType of childMarkType) {\n            for (let mark of marks) {\n                if (chartManager.marks.get(mark).get(MARKID) != markType) {\n                    continue;\n                }\n                for (let [k, v] of chartManager.numericAttrs.get(mark)) {\n                    if (!options.includes(k)) {\n                        options.push(k);\n                    }\n                }\n                break;\n            }\n        }\n        if (options.length == 0) {\n            return null;\n        }\n        return {\n            duration: {\n                binding: this.durationBinding,\n                node: this\n            },\n            startTime: null as {\n                binding: string,\n                group: KfTreeGroup\n            },\n            options,\n            // assume that every children has the same numeric attributes\n        }\n    }\n\n    updateProperty() {\n        if (this.markTypeSelectors.size == 0) {\n            firstFrame = firstFrame.deepClone(null);\n            return firstFrame.children[0][0];\n        }\n        this.updateFlag = true;\n        kfTrees = kfTrees.map(i => i.deepClone(null));\n        this.updateFlag = false;\n        for (let i of kfTrees) {\n            const result = i.findUpdateNode();\n            if (result) {\n                result.updateFlag = false;\n                return result;\n            }\n        }\n    }\n\n    updateDurationBinding(durationBinding: string) {\n        this.updateProperty().durationBinding = durationBinding;\n        saveHistory();\n        renderKfTree();\n    }\n\n    updateDuration(duration: number) {\n        this.updateProperty().property.duration = duration;\n        saveHistory();\n        renderKfTree();\n    }\n\n    updateDelay(delay: number) {\n        this.updateProperty().delay = delay;\n        saveHistory();\n        renderKfTree();\n    }\n\n    updateEffectType(effectType: string) {\n        this.updateProperty().property.effectType = effectType;\n        saveHistory();\n        renderKfTree();\n    }\n\n    updateEasing(easing: string) {\n        this.updateProperty().property.easing = easing;\n        saveHistory();\n        renderKfTree();\n    }\n\n    updateSort(channel: string, order: string) {\n        this.updateProperty().grouping.sort = { channel, order };\n        saveHistory();\n        renderKfTree();\n    }\n\n    moveForward() {\n        const node = this.updateProperty();\n        const parent = node.parent;\n        const children = parent.children;\n        let index = 0;\n        for (let arr of children) {\n            if (arr.includes(node)) {\n                break;\n            }\n            index++;\n        }\n        if (children[index].length == 1) {\n            if (index == 0) {\n                renderKfTree();\n                return;\n            }\n            children.splice(index, 1);\n            children[index - 1].push(node);\n        } else {\n            children[index].splice(children[index].indexOf(node), 1);\n            children.splice(index, 0, [node]);\n        }\n        saveHistory();\n        renderKfTree();\n    }\n\n    moveBackward() {\n        const node = this.updateProperty();\n        const parent = node.parent;\n        const children = parent.children;\n        let index = 0;\n        for (let arr of children) {\n            if (arr.includes(node)) {\n                break;\n            }\n            index++;\n        }\n        if (children[index].length == 1) {\n            if (index == children.length - 1) {\n                renderKfTree();\n                return;\n            }\n            children.splice(index, 1);\n            children[index].push(node);\n        } else {\n            children[index].splice(children[index].indexOf(node), 1);\n            children.splice(index + 1, 0, [node]);\n        }\n        saveHistory();\n        renderKfTree();\n    }\n\n    deepClone(parent: KfTreeGroup) {\n        const result = new KfTreeNode(this.markTypeSelectors, parent);\n        result.markTypeSelectors = new Set(this.markTypeSelectors);\n        result.delay = this.delay;\n        result.updateFlag = this.updateFlag;\n        result.vertical = this.vertical;\n        result.durationBinding = this.durationBinding;\n        if (this.grouping) {\n            result.grouping = {\n                groupBy: this.grouping.groupBy,\n                child: this.grouping.child.deepClone(result),\n                sequence: Array.from(this.grouping.sequence),\n                sort: {\n                    channel: this.grouping.sort.channel,\n                    order: this.grouping.sort.order\n                }\n            }\n        } else {\n            result.property = {\n                duration: this.property.duration,\n                effectType: this.property.effectType,\n                easing: this.property.easing\n            }\n        }\n        return result;\n    }\n}\n\nexport class KfTreeGroup {\n    attributeSelectors: Map<AttributeName, AttributeValue>;\n    children: KfTreeNode[][];\n    parent: KfTreeNode;\n\n    delay: number;\n\n    startTimeBinding: string = null;\n\n    updateFlag: boolean = false;\n\n    constructor(attributeSelectors: Map<string, string>, children: KfTreeNode[][], parent: KfTreeNode) {\n        this.attributeSelectors = attributeSelectors;\n        this.children = children;\n        this.delay = 0;\n        this.parent = parent;\n    }\n    getAttributeSelectors() {\n        return this.attributeSelectors;\n    }\n\n    isBindable() {\n        return this.parent != null && this.children.length == 1 && this.children[0].length == 1 && this.children[0][0].grouping == null;\n    }\n\n    getBinding(marks: Set<string>) {\n        if (!this.parent) {\n            return null;\n        }\n        // if (!this.isBindable()) {\n        //     return null;\n        // }\n        const options: string[] = [];\n        const childMarkType = this.children[0][0].markTypeSelectors;\n        for (let markType of childMarkType) {\n            for (let mark of marks) {\n                if (chartManager.marks.get(mark).get(MARKID) != markType) {\n                    continue;\n                }\n                for (let [k, v] of chartManager.numericAttrs.get(mark)) {\n                    if (!options.includes(k)) {\n                        options.push(k);\n                    }\n                }\n                break;\n            }\n        }\n        if (options.length == 0) {\n            return null\n        }\n        let durationBinding: {\n            binding: string,\n            node: KfTreeNode\n        } = null;\n        if (this.isBindable()) {\n            durationBinding = {\n                binding: this.children[0][0].durationBinding,\n                node: this.children[0][0]\n            };\n        }\n        return {\n            duration: durationBinding,\n            startTime: {\n                binding: this.startTimeBinding,\n                group: this\n            },\n            options,\n            // assume that every children has the same numeric attributes\n        }\n    }\n\n    // updateDurationBinding(durationBinding: string) {\n    //     this.updateProperty().children[0][0].durationBinding = durationBinding;\n    //     saveHistory();\n    //     renderKfTree();\n    // }\n\n    updateStartTimeBinding(startTimeBinding: string) {\n        const group = this.updateProperty();\n        group.startTimeBinding = startTimeBinding;\n        if (startTimeBinding && group.delay == 0) {\n            if (group.children[0][0].property) {\n                group.delay = group.children[0][0].property.duration;\n            } else {\n                group.delay = 300;\n            }\n        }\n        if (startTimeBinding) {\n            group.parent.vertical = true;\n        }\n        saveHistory();\n        renderKfTree();\n    }\n\n    updateProperty() {\n        this.updateFlag = true;\n        kfTrees = kfTrees.map(i => i.deepClone(null));\n        this.updateFlag = false;\n        for (let i of kfTrees) {\n            const result = i.findUpdateGroup();\n            if (result) {\n                result.updateFlag = false;\n                return result;\n            }\n        }\n    }\n\n    updateDelay(delay: number) {\n        this.updateProperty().delay = delay;\n        saveHistory();\n        renderKfTree();\n    }\n    merge() {\n        const node = this.updateProperty();\n\n        const parent = node.parent;\n        console.assert(parent);\n        parent.vertical = !parent.vertical;\n        if (!parent.vertical) {\n            node.startTimeBinding = null;\n        }\n        saveHistory();\n        renderKfTree();\n    }\n\n    moveForward() {\n        this.updateProperty().merge();\n    }\n\n    moveBackward() {\n        this.updateProperty().merge();\n    }\n\n    deepClone(parent: KfTreeNode) {\n        const result = new KfTreeGroup(this.attributeSelectors, this.children, parent);\n        result.attributeSelectors = new Map(this.attributeSelectors);\n        result.children = this.children.map(i => i.map(j => j.deepClone(result)));\n        result.delay = this.delay;\n        result.updateFlag = this.updateFlag;\n        result.startTimeBinding = this.startTimeBinding;\n        return result;\n    }\n\n    findUpdateNode(): KfTreeNode {\n        for (let arr of this.children) {\n            for (let i of arr) {\n                if (i.updateFlag) {\n                    return i;\n                }\n                if (i.grouping) {\n                    const result = i.grouping.child.findUpdateNode();\n                    if (result) {\n                        return result;\n                    }\n                }\n            }\n        }\n        return null;\n    }\n\n    findUpdateGroup(): KfTreeGroup {\n        if (this.updateFlag) {\n            return this;\n        }\n        for (let arr of this.children) {\n            for (let i of arr) {\n                if (!i.grouping) {\n                    continue;\n                }\n                const result = i.grouping.child.findUpdateGroup();\n                if (result) {\n                    return result;\n                }\n            }\n        }\n        return null;\n    }\n}\n\nexport let kfTrees: KfTreeGroup[] = [];\nlet expandOptions: Set<string>[] = [];\nexport let firstFrame: KfTreeGroup;\n\nconst history: { kfTrees: KfTreeGroup[], expandOptions: Set<string>[], firstFrame: KfTreeGroup }[] = [];\nlet historyIndex = -1;\n\nconst saveHistory = () => {\n    historyIndex++;\n    history.length = historyIndex;\n    // history.push({ kfTrees: kfTrees.map(i => i.deepClone()), expandOptions: expandOptions.map(i => new Set(i)), firstFrame });\n    history.push({ kfTrees, expandOptions, firstFrame });\n}\n\nexport const revert = () => {\n    if (historyIndex <= 0) {\n        return;\n    }\n    historyIndex--;\n    kfTrees = history[historyIndex].kfTrees;\n    firstFrame = history[historyIndex].firstFrame;\n    expandOptions = history[historyIndex].expandOptions;\n    kfTrack.resetActiveNode();\n    renderKfTree();\n}\n\nexport const redo = () => {\n    if (historyIndex + 1 >= history.length) {\n        return;\n    }\n    historyIndex++;\n    kfTrees = history[historyIndex].kfTrees;\n    firstFrame = history[historyIndex].firstFrame;\n    expandOptions = history[historyIndex].expandOptions;\n    kfTrack.resetActiveNode();\n    renderKfTree();\n}\n\nexport const clearKfTrees = () => {\n    kfTrees.length = 0;\n    expandOptions.length = 0;\n    historyIndex = -1;\n    const node = new KfTreeNode(new Set(), null);\n    node.property = {\n        duration: 300,\n        effectType: \"fade\",\n        easing: \"easeLinear\"\n    }\n    firstFrame = new KfTreeGroup(new Map(), [[node]], null);\n    saveHistory();\n    kfTrack.resetActiveNode();\n    renderKfTree();\n};\nconst needNewGroupPreview = (attributeSelectors: Map<string, string>, kfT: KfTreeGroup[]) => {\n    if (kfT.length == 0) {\n        return true;\n    }\n    const activeGroup = kfT[kfT.length - 1];\n    if (attributeSelectors.size != activeGroup.attributeSelectors.size) {\n        return true;\n    }\n    for (let [k, v] of activeGroup.attributeSelectors) {\n        if (attributeSelectors.get(k) != v) {\n            return true;\n        }\n    }\n    return false;\n}\nconst needNewGroup = (attributeSelectors: Map<string, string>) => {\n    if (kfTrees.length == 0) {\n        return true;\n    }\n    const activeGroup = kfTrees[kfTrees.length - 1];\n    if (attributeSelectors.size != activeGroup.attributeSelectors.size) {\n        return true;\n    }\n    for (let [k, v] of activeGroup.attributeSelectors) {\n        if (attributeSelectors.get(k) != v) {\n            return true;\n        }\n    }\n    return false;\n}\nconst needExpandPreview = (markTypeSelectors: Set<string>, kfT: KfTreeGroup[]) => {\n    if (kfT.length == 0) {\n        return false;\n    }\n    const group = kfT[kfT.length - 1];\n    const firstChild = group.children[0][0];\n    for (let i of markTypeSelectors) {\n        if (firstChild.markTypeSelectors.has(i)) {\n            return true;\n        }\n    }\n    return false;\n}\n\nconst needExpand = (markTypeSelectors: Set<string>) => {\n    if (kfTrees.length == 0) {\n        return false;\n    }\n    const group = kfTrees[kfTrees.length - 1];\n    const firstChild = group.children[0][0];\n    for (let i of markTypeSelectors) {\n        if (firstChild.markTypeSelectors.has(i)) {\n            return true;\n        }\n    }\n    return false;\n}\n\nconst selectByMarkTypeSelectors = (markTypeSelectors: Set<string>) => {\n    const result: Set<string> = new Set();\n    for (let [id, attributes] of chartManager.marks) {\n        if (markTypeSelectors.has(attributes.get(MARKID))) {\n            result.add(id);\n        }\n    }\n    return result;\n}\n\nconst getExpandSequence = (marks: Set<string>, attributeName: string, firstValue: string) => {\n    let sequence: string[] = [];\n    let p = 0;\n    const tryInsert = (value: string) => {\n        const index = sequence.indexOf(value);\n        if (index == -1) {\n            p++;\n            sequence.splice(p, 0, value);\n        } else {\n            p = index;\n        }\n    }\n    for (let id of marks) {\n        const value = chartManager.marks.get(id).get(attributeName);\n        tryInsert(value);\n    }\n    for (let [id, attributes] of chartManager.marks) {\n        const value = attributes.get(attributeName);\n        if (value != undefined) {\n            tryInsert(value);\n        }\n    }\n    if (sequence.length == 5) {\n        sequence.sort();\n    }\n\n    let index = sequence.indexOf(firstValue);\n    if (index >= sequence.length / 2) {\n        sequence = sequence.reverse();\n        index = sequence.length - index - 1;\n    }\n    sequence = sequence.concat(sequence).slice(index, index + sequence.length);\n    return sequence;\n}\n\nconst placeNode = (node: KfTreeNode, attributeSelectors: Map<string, string>) => {\n    if (needNewGroup(attributeSelectors)) {\n        const group = new KfTreeGroup(attributeSelectors, [[node]], null);\n        node.parent = group;\n        kfTrees.push(group);\n    } else {\n        kfTrees[kfTrees.length - 1].children.push([node]);\n        node.parent = kfTrees[kfTrees.length - 1];\n    }\n}\nexport const calcNonSelectedMarks = () => {\n    const nonSelectedMarks: Set<string> = new Set(chartManager.marks.keys());\n    for (let group of kfTrees) {\n        const attributeSelectors = group.attributeSelectors;\n        const markTypeSelectors: Set<string> = new Set();\n        for (let child of group.children.flatMap(val => val)) {\n            for (let typeName of child.markTypeSelectors) {\n                markTypeSelectors.add(typeName);\n            }\n        }\n        for (let id of nonSelectedMarks) {\n            if (!meetMarkTypeConstrains(id, markTypeSelectors)) {\n                continue;\n            }\n            if (!meetAttributeConstrains(id, attributeSelectors)) {\n                continue;\n            }\n            nonSelectedMarks.delete(id);\n        }\n    }\n    return nonSelectedMarks;\n}\nexport const calcNonSelectedMarksPreview = (kfT: KfTreeGroup[]) => {\n    const nonSelectedMarks: Set<string> = new Set(chartManager.marks.keys());\n    for (let group of kfT) {\n        const attributeSelectors = group.attributeSelectors;\n        const markTypeSelectors: Set<string> = new Set();\n        for (let child of group.children.flatMap(val => val)) {\n            for (let typeName of child.markTypeSelectors) {\n                markTypeSelectors.add(typeName);\n            }\n        }\n        for (let id of nonSelectedMarks) {\n            if (!meetMarkTypeConstrains(id, markTypeSelectors)) {\n                continue;\n            }\n            if (!meetAttributeConstrains(id, attributeSelectors)) {\n                continue;\n            }\n            nonSelectedMarks.delete(id);\n        }\n    }\n    return nonSelectedMarks;\n}\n\nexport const calcSelectedMarks = () => {\n    const result: Set<string> = new Set();\n    const nonSelectedMarks = calcNonSelectedMarks();\n    for (let i of chartManager.marks.keys()) {\n        if (!nonSelectedMarks.has(i)) {\n            result.add(i);\n        }\n    }\n    return result;\n}\n\nconst getLeftMost = (group: KfTreeGroup) => {\n    let leftMostGroup = group;\n    let leftMostNode = group.children[0][0];\n    while (leftMostNode.grouping != null) {\n        leftMostGroup = leftMostNode.grouping.child;\n        leftMostNode = leftMostGroup.children[0][0];\n    }\n    return { leftMostGroup, leftMostNode };\n}\n\nexport const previewFrame = (nextKf: string[]) => {\n    let kfT: KfTreeGroup[] = kfTrees.map(i => i.deepClone(null));\n    if (nextKf.length == 4 && nextKf[0] === 'mark117') {\n        kfT.forEach(kfTree => {\n            if (kfTree.attributeSelectors.has('IsEdible')) {\n                kfTree.attributeSelectors.delete('IsEdible');\n                kfTree.children.forEach(child => {\n                    child.forEach(node => {\n                        node.parent.attributeSelectors.delete('IsEdible');\n                    })\n                })\n            }\n        })\n    }\n    if ((nextKf.length == 1 || nextKf.length == 2) && nextKf[0] === 'mark3001') {\n        kfT.forEach(kfTree => {\n            if (kfTree.attributeSelectors.has('IsEdible')) {\n                kfTree.attributeSelectors.delete('IsEdible');\n                kfTree.children.forEach(child => {\n                    child.forEach(node => {\n                        node.parent.attributeSelectors.delete('IsEdible');\n                    })\n                })\n            }\n        });\n\n    }\n    const markTypeSelectors: Set<string> = new Set();\n    for (let markId of nextKf) {\n        const attributes = chartManager.marks.get(markId);\n        markTypeSelectors.add(attributes.get(MARKID));\n    }\n    const attributeSelectors: Map<string, string> = extractAttributeConstrains(new Set(nextKf));\n    if (needExpandPreview(markTypeSelectors, kfT)) {\n        let groupBy = \"\";\n        const group = kfT.pop();\n\n        for (let [k, v] of group.attributeSelectors) {\n            if (attributeSelectors.get(k) != v) {\n                groupBy = k;\n                break;\n            }\n        }\n        console.assert(groupBy != \"\");\n\n        let parentAttributeSelectors = new Map(group.attributeSelectors)\n        parentAttributeSelectors.delete(groupBy);\n        for (let child of group.children.flatMap(val => val)) {\n            for (let markType of child.markTypeSelectors) {\n                markTypeSelectors.add(markType);\n            }\n        }\n        const { leftMostGroup, leftMostNode } = getLeftMost(group);\n        const node = new KfTreeNode(markTypeSelectors, null);\n        node.grouping = {\n            groupBy,\n            child: group,\n            sequence: getExpandSequence(\n                selectByMarkTypeSelectors(leftMostNode.markTypeSelectors),\n                groupBy,\n                leftMostGroup.attributeSelectors.get(groupBy)\n            ),\n            sort: {\n                channel: null,\n                order: null,\n            }\n        }\n        group.parent = node;\n\n        attributeSelectors.delete(groupBy);\n        //place Node\n        if (needNewGroupPreview(parentAttributeSelectors, kfT)) {\n            const group = new KfTreeGroup(parentAttributeSelectors, [[node]], null);\n            node.parent = group;\n            kfT.push(group);\n        } else {\n            kfT[kfT.length - 1].children.push([node]);\n            node.parent = kfT[kfT.length - 1];\n        }\n\n    } else {\n        const node = new KfTreeNode(markTypeSelectors, null);\n        node.property = {\n            duration: 300,\n            effectType: \"fade\",\n            easing: \"easeLinear\"\n        }\n\n        if (needNewGroupPreview(attributeSelectors, kfT)) {\n            const group = new KfTreeGroup(attributeSelectors, [[node]], null);\n            node.parent = group;\n            kfT.push(group);\n        } else {\n            kfT[kfT.length - 1].children.push([node]);\n            node.parent = kfT[kfT.length - 1];\n        }\n    }\n    while (true) {\n        const nonSelectedMarks = calcNonSelectedMarks();\n        // check if it can construct subtree\n        const lastGroup = kfT[kfT.length - 1];\n        const attributeSelectors = lastGroup.attributeSelectors;\n        const markTypeSelectors: Set<string> = new Set();\n        for (let child of lastGroup.children.flatMap(val => val)) {\n            for (let typeName of child.markTypeSelectors) {\n                markTypeSelectors.add(typeName);\n            }\n        }\n\n        let canUpdateSubtree = false;\n        for (let id of nonSelectedMarks) {\n            if (meetAttributeConstrains(id, attributeSelectors)) {\n                canUpdateSubtree = true;\n                break;\n            }\n        }\n\n        // check how many ways it can expand\n        let parentAttributeSelectors: Map<string, string> = new Map();\n        if (kfT.length >= 2) {\n            parentAttributeSelectors = kfT[kfT.length - 2].attributeSelectors;\n        }\n\n        // some asserts\n        for (let [k, v] of parentAttributeSelectors) {\n            console.assert(attributeSelectors.get(k) == v);\n        }\n\n        if (attributeSelectors.size == parentAttributeSelectors.size) {\n            break;\n        }\n        if (attributeSelectors.size - parentAttributeSelectors.size > 1 || canUpdateSubtree) {\n            const expandDirections: string[] = [];\n            for (let [k, v] of attributeSelectors) {\n                if (!parentAttributeSelectors.has(k)) {\n                    expandDirections.push(k);\n                }\n            }\n\n            let { leftMostGroup, leftMostNode } = getLeftMost(kfT[kfT.length - 1]);\n\n            const marks = selectByMarkTypeSelectors(leftMostNode.markTypeSelectors);\n\n            for (let attributeName of expandDirections) {\n                const attributeSelectors = new Map(leftMostGroup.attributeSelectors);\n                const sequence = getExpandSequence(\n                    marks,\n                    attributeName,\n                    attributeSelectors.get(attributeName),\n                );\n                attributeSelectors.delete(attributeName);\n                const filteredMarks: Set<string> = new Set();\n                const attributeValues: Set<string> = new Set();\n                for (let id of marks) {\n                    if (meetAttributeConstrains(id, attributeSelectors)) {\n                        filteredMarks.add(id);\n                        attributeValues.add(chartManager.marks.get(id).get(attributeName));\n                    }\n                }\n                for (let i = 1; i < sequence.length; i++) {\n                    if (attributeValues.has(sequence[i])) {\n                        attributeSelectors.set(attributeName, sequence[i]);\n                        break;\n                    }\n                }\n                console.assert(attributeSelectors.get(attributeName) != undefined);\n                if (attributeSelectors.get(attributeName) != undefined) {\n                    const markSet: Set<string> = new Set();\n                    for (let id of filteredMarks) {\n                        if (meetAttributeConstrains(id, attributeSelectors)) {\n                            markSet.add(id);\n                        }\n                    }\n                }\n            }\n            break;\n        }\n        let groupBy = \"\";\n        for (let [k, v] of attributeSelectors) {\n            if (!parentAttributeSelectors.has(k)) {\n                groupBy = k;\n                break;\n            }\n        }\n\n        kfT.length--;\n\n        const { leftMostGroup, leftMostNode } = getLeftMost(lastGroup);\n        const node = new KfTreeNode(markTypeSelectors, null);\n        node.grouping = {\n            groupBy,\n            child: lastGroup,\n            sequence: getExpandSequence(\n                selectByMarkTypeSelectors(leftMostNode.markTypeSelectors),\n                groupBy,\n                leftMostGroup.attributeSelectors.get(groupBy)\n            ),\n            sort: {\n                channel: null,\n                order: null,\n            }\n        }\n        lastGroup.parent = node;\n\n        attributeSelectors.delete(groupBy);\n        if (needNewGroupPreview(attributeSelectors, kfT)) {\n            const group = new KfTreeGroup(attributeSelectors, [[node]], null);\n            node.parent = group;\n            kfT.push(group);\n        } else {\n            kfT[kfT.length - 1].children.push([node]);\n            node.parent = kfT[kfT.length - 1];\n        }\n    }\n    // generate Canis animation\n    const animationTree = generatePreviewCanisSpec(kfT);\n    const lottiespec = chartManager.updatePreviewCanisSpec(animationTree);\n    return lottiespec;\n}\n\nexport const addSelection = (selection: string[]) => {\n\n    kfTrees = kfTrees.map(i => i.deepClone(null));\n    if (selection.length == 4 && selection[0] === 'mark117') {\n        kfTrees.forEach(kfTree => {\n            if (kfTree.attributeSelectors.has('IsEdible')) {\n                kfTree.attributeSelectors.delete('IsEdible');\n                kfTree.children.forEach(child => {\n                    child.forEach(node => {\n                        node.parent.attributeSelectors.delete('IsEdible');\n                    })\n                })\n            }\n        })\n    }\n    if ((selection.length == 1 || selection.length == 2) && selection[0] === 'mark3001') {\n        kfTrees.forEach(kfTree => {\n            if (kfTree.attributeSelectors.has('IsEdible')) {\n                kfTree.attributeSelectors.delete('IsEdible');\n                kfTree.children.forEach(child => {\n                    child.forEach(node => {\n                        node.parent.attributeSelectors.delete('IsEdible');\n                    })\n                })\n            }\n        });\n\n    }\n    const markTypeSelectors: Set<string> = new Set();\n    let attributes: Map<string, string> = new Map();\n    for (let markId of selection) {\n        attributes = chartManager.marks.get(markId);\n        markTypeSelectors.add(attributes.get(MARKID));\n    }\n    const attributeSelectors: Map<string, string> = extractAttributeConstrains(new Set(selection));\n\n    expandOptions = [];\n\n    if (needExpand(markTypeSelectors)) {\n        let groupBy = \"\";\n        const group = kfTrees.pop();\n        for (let [k, v] of group.attributeSelectors) {\n            if (attributeSelectors.get(k) != v) {\n                groupBy = k;\n                break;\n            }\n        }\n        console.assert(groupBy != \"\");\n\n        let parentAttributeSelectors = new Map(group.attributeSelectors)\n        parentAttributeSelectors.delete(groupBy);\n        for (let child of group.children.flatMap(val => val)) {\n            for (let markType of child.markTypeSelectors) {\n                markTypeSelectors.add(markType);\n            }\n        }\n        // markTypeSelectors = Array.from(new Set(markTypeSelectors).keys());\n        const { leftMostGroup, leftMostNode } = getLeftMost(group);\n        const node = new KfTreeNode(markTypeSelectors, null);\n        node.grouping = {\n            groupBy,\n            child: group,\n            sequence: getExpandSequence(\n                selectByMarkTypeSelectors(leftMostNode.markTypeSelectors),\n                groupBy,\n                leftMostGroup.attributeSelectors.get(groupBy)\n            ),\n            sort: {\n                channel: null,\n                order: null,\n            }\n        }\n        group.parent = node;\n\n        attributeSelectors.delete(groupBy);\n        placeNode(node, parentAttributeSelectors);\n        //merge\n    } else {\n        const node = new KfTreeNode(markTypeSelectors, null);\n        node.property = {\n            duration: 300,\n            effectType: \"fade\",\n            easing: \"easeLinear\"\n        }\n        placeNode(node, attributeSelectors);\n    }\n\n    while (true) {\n        const nonSelectedMarks = calcNonSelectedMarks();\n\n        // check if it can construct subtree\n        const lastGroup = kfTrees[kfTrees.length - 1];\n        const attributeSelectors = lastGroup.attributeSelectors;\n        const markTypeSelectors: Set<string> = new Set();\n        for (let child of lastGroup.children.flatMap(val => val)) {\n            for (let typeName of child.markTypeSelectors) {\n                markTypeSelectors.add(typeName);\n            }\n        }\n\n        let canUpdateSubtree = false;\n        for (let id of nonSelectedMarks) {\n            if (meetAttributeConstrains(id, attributeSelectors)) {\n                canUpdateSubtree = true;\n                break;\n            }\n        }\n\n        // check how many ways it can expand\n        let parentAttributeSelectors: Map<string, string> = new Map();\n        if (kfTrees.length >= 2) {\n            parentAttributeSelectors = kfTrees[kfTrees.length - 2].attributeSelectors;\n        }\n\n        // some asserts\n        for (let [k, v] of parentAttributeSelectors) {\n            console.assert(attributeSelectors.get(k) == v);\n        }\n\n        if (attributeSelectors.size == parentAttributeSelectors.size) {\n            break;\n        }\n        if (attributeSelectors.size - parentAttributeSelectors.size > 1 || canUpdateSubtree) {\n            const expandDirections: string[] = [];\n            for (let [k, v] of attributeSelectors) {\n                if (!parentAttributeSelectors.has(k)) {\n                    expandDirections.push(k);\n                }\n            }\n\n            let { leftMostGroup, leftMostNode } = getLeftMost(kfTrees[kfTrees.length - 1]);\n\n            const marks = selectByMarkTypeSelectors(leftMostNode.markTypeSelectors);\n\n            for (let attributeName of expandDirections) {\n                const attributeSelectors = new Map(leftMostGroup.attributeSelectors);\n                const sequence = getExpandSequence(\n                    marks,\n                    attributeName,\n                    attributeSelectors.get(attributeName),\n                );\n                attributeSelectors.delete(attributeName);\n                const filteredMarks: Set<string> = new Set();\n                const attributeValues: Set<string> = new Set();\n                for (let id of marks) {\n                    if (meetAttributeConstrains(id, attributeSelectors)) {\n                        filteredMarks.add(id);\n                        attributeValues.add(chartManager.marks.get(id).get(attributeName));\n                    }\n                }\n                for (let i = 1; i < sequence.length; i++) {\n                    if (attributeValues.has(sequence[i])) {\n                        attributeSelectors.set(attributeName, sequence[i]);\n                        break;\n                    }\n                }\n                console.assert(attributeSelectors.get(attributeName) != undefined);\n                if (attributeSelectors.get(attributeName) != undefined) {\n                    const markSet: Set<string> = new Set();\n                    for (let id of filteredMarks) {\n                        if (meetAttributeConstrains(id, attributeSelectors)) {\n                            markSet.add(id);\n                        }\n                    }\n                    expandOptions.push(markSet);\n                }\n            }\n\n            break;\n        }\n\n        let groupBy = \"\";\n        for (let [k, v] of attributeSelectors) {\n            if (!parentAttributeSelectors.has(k)) {\n                groupBy = k;\n                break;\n            }\n        }\n\n        kfTrees.length--;\n\n        const { leftMostGroup, leftMostNode } = getLeftMost(lastGroup);\n        const node = new KfTreeNode(markTypeSelectors, null);\n        node.grouping = {\n            groupBy,\n            child: lastGroup,\n            sequence: getExpandSequence(\n                selectByMarkTypeSelectors(leftMostNode.markTypeSelectors),\n                groupBy,\n                leftMostGroup.attributeSelectors.get(groupBy)\n            ),\n            sort: {\n                channel: null,\n                order: null,\n            }\n        }\n        lastGroup.parent = node;\n\n        attributeSelectors.delete(groupBy);\n        placeNode(node, attributeSelectors);\n    }\n    kfTrack.resetActiveNode();\n    saveHistory();\n\n    renderKfTree();\n}\n\nconst renderKfTree = () => {\n    const wrapper = document.getElementById(\"appWrapper\");\n    loadingBlock.createLoading(wrapper, \"Generating animation...\");\n    setTimeout(() => {\n\n        chartManager.updateCanisSpec(generateCanisSpec());\n        const allNextKf: string[][] = getSuggestFrames([]);\n\n        if (expandOptions.length != 0 && expandOptions[0].has(\"mark117\") && expandOptions[0].has(\"mark20\")) {\n            if (!expandOptions.some(i => Tool.identicalArrays([...i], [\"mark117\", \"mark20\", \"mark87\", \"mark156\"]))) {\n                expandOptions.unshift(new Set([\"mark117\", \"mark20\", \"mark87\", \"mark156\"]));\n            }\n        }\n        if (allNextKf.length === 1 && expandOptions.length === 1 && expandOptions[0].has(\"mark91\") && expandOptions[0].has(\"mark24\")) {\n            if (!expandOptions.some(i => Tool.identicalArrays([...i], [\"mark87\", \"mark156\"]))) {\n                expandOptions.unshift(new Set([\"mark87\", \"mark156\"]));\n            }\n        }\n        if (allNextKf.length === 1 && expandOptions.length == 2 && expandOptions[0].has(\"mark117\") && MarkSelector.selectableMarks.size == 13) {\n            expandOptions.unshift(new Set([\"mark2001\"]));\n            expandOptions.unshift(new Set([\"mark3001\", \"mark2001\"]));\n            expandOptions.unshift(new Set([\"mark3001\"]));\n        }\n\n        const kfTrackData = generateKfTrack();\n        kfTrack.updateKfTrack(kfTrackData);\n        Loading.removeLoading();\n        if (kfTrees.length == 0) {\n            MarkSelector.reset(new Set(), new Map(), expandOptions);\n            return;\n        }\n\n        const disabledMarks = calcSelectedMarks();\n        if (expandOptions.length != 0 && expandOptions[0].has(\"mark117\") && expandOptions[0].has(\"mark20\")) {\n            disabledMarks.delete(\"mark87\")\n            disabledMarks.delete(\"mark156\")\n        }\n        MarkSelector.reset(disabledMarks, kfTrees[kfTrees.length - 1].attributeSelectors, expandOptions);\n    }, 0);\n}\n\nexport const getSuggestFrames = (selections: string[]): string[][] => {\n    if (expandOptions.length == 0) {\n        return [];\n    }\n    const results = expandOptions.map(i => [...i]);\n    for (let i of results) {\n        if (Tool.identicalArrays(i, selections)) {\n            return [i];\n        }\n    }\n    if (selections.length > 0) {\n        results.length = 0;\n    }\n    const results2 = [...results];\n    if (selections.length > 0) {\n        results2.push([...selections]);\n    }\n    const attributeSelectors = new Map(kfTrees[kfTrees.length - 1].attributeSelectors);\n    let allAvailableMarks = [...calcNonSelectedMarks()].filter(i => meetAttributeConstrains(i, attributeSelectors));\n    const allAttributes = new Map<string, string>();\n    for (let mark of allAvailableMarks) {\n        const attributes = chartManager.marks.get(mark);\n        for (let [k, v] of attributes) {\n            if (k == MARKID) {\n                continue;\n            }\n            if (attributeSelectors.has(k)) {\n                continue;\n            } else if (allAttributes.has(k)) {\n                continue;\n            } else {\n                allAttributes.set(k, v);\n            }\n        }\n    }\n    const constrains = extractAttributeConstrains(new Set(selections))\n    for (let [k, v] of constrains) {\n        if (allAttributes.has(k)) {\n            allAttributes.set(k, v);\n        }\n    }\n    const addFrame = (frameMarks: string[]) => {\n        if (results.some(i => Tool.identicalArrays(i, frameMarks))) {\n            return;\n        }\n        if (selections.some(i => !frameMarks.includes(i))) {\n            return;\n        }\n        results.push(frameMarks);\n        if (frameMarks.length != selections.length + 1) {\n            return;\n        }\n        if (results2.some(i => Tool.identicalArrays(i, frameMarks))) {\n            return;\n        }\n        results2.push(frameMarks);\n    }\n\n    const enumMarks = (selectedAttributes: Map<string, string>) => {\n        const selectedMarks = new Set<string>();\n        for (let id of allAvailableMarks) {\n            if (meetAttributeConstrains(id, selectedAttributes)) {\n                selectedMarks.add(id);\n            }\n        }\n        const allTypes: string[] = [];\n        for (let id of selectedMarks) {\n            const markType = chartManager.marks.get(id).get(MARKID);\n            if (!allTypes.includes(markType)) {\n                allTypes.push(markType);\n            }\n        }\n        for (let i = 1; i < (1 << allTypes.length); i++) {\n            const selectedTypes = new Set<string>();\n            for (let j = 0; j < allTypes.length; j++) {\n                if ((1 << j) & i) {\n                    selectedTypes.add(allTypes[j]);\n                }\n            }\n            const frameMarks: string[] = [];\n            for (let id of selectedMarks) {\n                const markType = chartManager.marks.get(id).get(MARKID);\n                if (selectedTypes.has(markType)) {\n                    frameMarks.push(id);\n                }\n            }\n            addFrame(frameMarks);\n        }\n    }\n\n    const allAttributePairs = [...allAttributes];\n    for (let i = 0; i < (1 << (allAttributePairs.length)); i++) {\n        const selectedAttributes = new Map<string, string>();\n        for (let j = 0; j < allAttributePairs.length; j++) {\n            if ((1 << j) & i) {\n                selectedAttributes.set(allAttributePairs[j][0], allAttributePairs[j][1]);\n            }\n        }\n        enumMarks(selectedAttributes);\n    }\n    if (results.length <= 8) {\n        return results;\n    } else {\n        return results2;\n    }\n}\n\nconst generatePreviewCanisSpec = (kfTree: KfTreeGroup[]) => {\n    let animations: any[] = [];\n    let time = 0;\n    let lastDuration = 0;\n    let isFirst = true;\n    for (let group of kfTree) {\n        const animationTreeGroup = new AnimationTreeGroup();\n        lastDuration = animationTreeGroup.fromKfTreeGroup(\n            group,\n            Array.from(chartManager.marks.keys()).filter(i => meetAttributeConstrains(i, group.attributeSelectors)),\n            isFirst,\n            lastDuration,\n            1\n        );\n        isFirst = false;\n        time = animationTreeGroup.render(animations, time);\n    }\n    {\n        const animationTreeGroup = new AnimationTreeGroup();\n        lastDuration = animationTreeGroup.fromKfTreeGroup(\n            firstFrame,\n            [...calcNonSelectedMarksPreview(kfTree)],\n            true,\n            0,\n            1\n        );\n        isFirst = false;\n        time = animationTreeGroup.render(animations, time);\n    }\n    return animations;\n}\nconst generateCanisSpec = () => {\n    let animations: any[] = [];\n    let time = 0;\n    let lastDuration = 0;\n\n    let isFirst = true;\n    for (let group of kfTrees) {\n        const animationTreeGroup = new AnimationTreeGroup();\n        lastDuration = animationTreeGroup.fromKfTreeGroup(\n            group,\n            Array.from(chartManager.marks.keys()).filter(i => meetAttributeConstrains(i, group.attributeSelectors)),\n            isFirst,\n            lastDuration,\n            1\n        );\n        isFirst = false;\n        time = animationTreeGroup.render(animations, time);\n    }\n\n    {\n        const animationTreeGroup = new AnimationTreeGroup();\n\n        lastDuration = animationTreeGroup.fromKfTreeGroup(\n            firstFrame,\n            [...calcNonSelectedMarks()],\n            true,\n            0,\n            1\n        );\n        isFirst = false;\n        time = animationTreeGroup.render(animations, time);\n    }\n    return animations;\n}\n\nconst generateCanisSpecOfGroup = (group: KfTreeGroup, marks: Set<string>, animations: any[], time: number, isFirst: boolean) => {\n    // if (group.delay > 0) {\n    //     time += group.delay;\n    // } else if (group.delay < 0) {\n    //     time /= 2;\n    // }\n    // time += group.delay;\n    time += isFirst ? 0 : group.delay;\n    time = Math.max(0, time);\n\n    let isFirstNode = true;\n    for (let child of group.children.flatMap(val => val)) {\n        if (isFirstNode) {\n            isFirstNode = false;\n        } else {\n            time += child.delay;\n            time = Math.max(0, time);\n        }\n        const subset: Set<string> = new Set();\n        for (let id of marks) {\n            if (meetMarkTypeConstrains(id, child.markTypeSelectors)) {\n                subset.add(id);\n            }\n        }\n\n        if (child.grouping == null) {\n            const filteredMarks = [...marks].filter(i => meetMarkTypeConstrains(i, child.markTypeSelectors));\n            if (filteredMarks.length == 0) {\n                continue;\n            }\n            for (let i of filteredMarks) {\n                let effectType = [\"grow\", \"wheel\"].includes(child.property.effectType) && chartManager.isText.get(i) ? \"wipe left\" : child.property.effectType;\n                if (child.property.effectType == \"wheel\") {\n                    const element = document.getElementById(i);\n                    if (element.tagName == \"line\" || element.getAttribute(\"fill\") == \"none\") {\n                        effectType = \"grow\";\n                    }\n                }\n                // const effectType = child.property.effectType;\n                animations.push(generateCanisFrame(\n                    `#${i}`,\n                    effectType,\n                    child.property.easing,\n                    time,\n                    child.property.duration\n                ));\n                time = 0;\n            }\n            time = child.property.duration;\n\n        } else {\n            const groupBy = child.grouping.groupBy;\n            const partition: Map<string, Set<string>> = new Map();\n            for (let id of subset) {\n                const value = chartManager.marks.get(id).get(groupBy);\n                if (!partition.has(value)) {\n                    partition.set(value, new Set());\n                }\n                partition.get(value).add(id);\n            }\n            let isFirstChild = true;\n            for (let attributeName of child.grouping.sequence) {\n                if (!partition.has(attributeName)) {\n                    continue;\n                }\n                time = generateCanisSpecOfGroup(child.grouping.child, partition.get(attributeName), animations, time, isFirstChild);\n                isFirstChild = false;\n            }\n        }\n    }\n    return time;\n}\n\nconst generateCanisFrame = (selector: string, effectsType: string, easing: string, start: number, duration: number) => {\n    return {\n        selector,\n        offset: start,\n        effects: [\n            {\n                type: effectsType,\n                duration,\n                easing\n            }\n        ]\n    }\n}\n\nconst generateKfTrack = () => {\n    KfItem.resetCounter();\n    const result: KfItem[] = [];\n    const svg = new DOMParser().parseFromString(document.getElementById(\"chartContainer\").innerHTML, \"image/svg+xml\");\n    const nonSelectedMarks = calcNonSelectedMarks();\n\n    Array.from(svg.getElementsByClassName(\"mark\")).forEach(element => {\n        // if (!nonSelectedMarks.has(element.id)) {\n        element.setAttribute(\"display\", \"none\");\n        // } else {\n        //     const opacity = element.getAttribute(\"opacity\");\n        //     if (opacity == null || opacity.length == 0) {\n        //         element.setAttribute(\"opacity\", \"0.3\");\n        //     } else {\n        //         element.setAttribute(\"opacity\", String(Number(opacity) * 0.3));\n        //     }\n        // }\n    })\n\n    let isFirst = true;\n\n    for (let group of kfTrees) {\n        const previousNode = isFirst ? null : result[result.length - 1];\n        const nextNode = generateKfTrackOfGroup(\n            group,\n            new Set(Array.from(chartManager.marks.keys()).filter(i => meetAttributeConstrains(i, group.attributeSelectors))),\n            Array.from(group.attributeSelectors.values()).join(\",\"),\n            svg,\n            null,\n            null,\n        );\n        if (isFirst) {\n            isFirst = false;\n        } else {\n            // result.push(new KfDelay(group.delay, null, group, previousNode, nextNode));\n        }\n        result.push(nextNode);\n    }\n\n    {\n        const marks = calcNonSelectedMarks();\n        for (let i of marks) {\n            svg.getElementById(i).removeAttribute(\"display\");\n        }\n        const group = new KfRow(\"__graph\", null, NaN, firstFrame);\n        const kfTreeNode = firstFrame.children[0][0];\n        const blob = new Blob([new XMLSerializer().serializeToString(svg)], { type: \"image/svg+xml;charset=utf-8\" });\n        const url = URL.createObjectURL(blob);\n\n        const node = new KfNode(kfTreeNode.property.duration, kfTreeNode.property.effectType, kfTreeNode.property.easing, url, group, kfTreeNode);\n        group.children.push(node)\n        result.push(group);\n    }\n\n    return result;\n}\n\nconst generateKfTrackOfGroup = (\n    group: KfTreeGroup,\n    marks: Set<string>,\n    label: string,\n    svg: Document,\n    parent: KfGroup,\n    originalNode: KfTreeGroup | KfTreeNode,\n    sortable = false,\n    sortAttributes: string[] = [],\n    originalParent: KfTreeNode = null,\n    delay: number = NaN) => {\n    const result = new KfRow(label, parent, delay, originalNode, sortable, sortAttributes, originalParent);\n    result.binding = group.getBinding(marks);\n\n    result.vertical = group.parent ? group.parent.vertical : false;\n    let isFirst = true;\n    const addNewChild = (nextNode: KfItem, originalNode: KfTreeGroup | KfTreeNode) => {\n        const previousNode = isFirst ? null : result.children[result.children.length - 1];\n        if (isFirst) {\n            isFirst = false;\n        } else {\n            // result.children.push(new KfDelay(originalNode.delay, result, originalNode, previousNode, nextNode));\n        }\n        result.children.push(nextNode);\n    }\n    const numberChildren = group.children.reduce((a, b) => a + b.length, 0);\n    for (let arr of group.children) {\n        const colume = new KfColume(result, arr[0].delay, isFirst ? null : arr[0]);\n        let isFirstRow = true;\n        const addNewRow = (nextNode: KfItem, originalNode: KfTreeGroup | KfTreeNode) => {\n            const previousNode = isFirstRow ? null : colume.children[colume.children.length - 1];\n            if (isFirstRow) {\n                isFirstRow = false;\n            } else {\n                // colume.children.push(new KfDelay(originalNode.delay, colume, originalNode, previousNode, nextNode));\n            }\n            colume.children.push(nextNode);\n        }\n        for (let child of arr) {\n            const subset: Set<string> = new Set();\n            for (let id of marks) {\n                if (meetMarkTypeConstrains(id, child.markTypeSelectors)) {\n                    subset.add(id);\n                }\n            }\n            if (subset.size == 0) {\n                continue;\n            }\n            if (child.grouping == null) {\n                for (let id of subset) {\n                    svg.getElementById(id).removeAttribute(\"display\");\n                }\n\n                const blob = new Blob([new XMLSerializer().serializeToString(svg)], { type: \"image/svg+xml;charset=utf-8\" });\n                const url = URL.createObjectURL(blob);\n                const durationRatio = child.calcDurationRatio([...subset]);\n                if (numberChildren > 1) {\n                    const childGroup = new KfRow(\n                        Array.from(child.markTypeSelectors).join(\",\"),\n                        colume,\n                        isFirstRow ? NaN : child.delay,\n                        child\n                    )\n                    childGroup.levelFromLeaves = 1;\n                    childGroup.binding = child.getBinding(subset);\n\n\n\n                    addNewRow(childGroup, child);\n\n                    const childNode = new KfNode(\n                        child.property.duration * durationRatio,\n                        child.property.effectType,\n                        child.property.easing,\n                        url,\n                        childGroup,\n                        child\n                    )\n                    childNode.durationRatio = durationRatio;\n                    childGroup.children.push(childNode);\n\n                } else {\n                    //TODO: calc duration\n                    // const currentAttr: string = group.children[0][0].durationBinding;\n\n                    // const allValues: string[] = [];\n                    // chartManager.numericAttrs.forEach((value, key) => {\n                    //     if (value.has(currentAttr)) {\n                    //         allValues.push(value.get(currentAttr));\n                    //     }\n                    // })\n\n                    // const minDurationBinding: number = Math.min(...allValues.map(i => Number(i)));\n                    // //same rate duration\n\n                    // let sumDurationBinding: number = 0;\n                    // subset.forEach((value) => {\n                    //     const currentMark = chartManager.numericAttrs.get(value).get(currentAttr);\n                    //     if (currentMark) {\n                    //         sumDurationBinding += Number(currentMark);\n                    //     }\n                    // })\n                    // const meanDurationBinding: number = sumDurationBinding / subset.size;\n\n                    // let duration: number = 0;\n                    // if (currentAttr) {\n                    //     duration = meanDurationBinding / minDurationBinding * child.property.duration;\n\n                    // } else {\n                    //     duration = child.property.duration;\n                    // }\n\n                    const childNode = new KfNode(\n                        // Array.from(child.markTypeSelectors).join(\",\"),\n                        child.property.duration * durationRatio,\n                        child.property.effectType,\n                        child.property.easing,\n                        url,\n                        colume,\n                        child\n                    );\n                    childNode.durationRatio = durationRatio;\n                    addNewRow(childNode, child);\n                }\n\n                for (let id of subset) {\n                    const element = svg.getElementById(id);\n                    const opacity = element.getAttribute(\"opacity\");\n                    if (opacity == null || opacity.length == 0) {\n                        element.setAttribute(\"opacity\", \"0.3\");\n                    } else {\n                        element.setAttribute(\"opacity\", String(Number(opacity) * 0.3));\n                    }\n                }\n            } else {\n                const groupBy = child.grouping.groupBy;\n                const partition: Map<string, Set<string>> = new Map();\n                for (let id of subset) {\n                    const value = chartManager.marks.get(id).get(groupBy);\n                    if (!partition.has(value)) {\n                        partition.set(value, new Set());\n                    }\n                    partition.get(value).add(id);\n                }\n                const sequence: string[] = child.grouping.sequence.filter(i => partition.has(i));\n                if (child.grouping.sort.channel) {\n                    const channel = child.grouping.sort.channel;\n                    const order = child.grouping.sort.order;\n                    if (channel == groupBy) {\n                        sortStrings(sequence);\n                    } else if (channel) {\n                        const count = new Map<string, number>();\n                        for (let [k, v] of partition) {\n                            let sum = 0;\n                            for (let id of v) {\n                                const value = chartManager.numericAttrs.get(id).get(channel);\n                                if (value) {\n                                    sum += Number(value);\n                                }\n                            }\n                            count.set(k, sum);\n                        }\n                        sequence.sort((a: string, b: string) => {\n                            return count.get(a) - count.get(b);\n                        });\n                    }\n                    if (order == \"dsc\") {\n                        sequence.reverse();\n                    }\n                }\n\n                const sortAttributes: string[] = [];\n                sortAttributes.push(groupBy);\n                for (let id of subset) {\n                    for (let attributeName of chartManager.numericAttrs.get(id).keys()) {\n                        if (!sortAttributes.includes(attributeName)) {\n                            sortAttributes.push(attributeName);\n                        }\n                    }\n                }\n\n                if (!child.vertical) {\n                    const groupContainer = new KfRow(\"\", colume, 0, null);\n                    let isFirstItem = true;\n\n                    const addNewItem = (nextNode: KfItem, originalNode: KfTreeGroup | KfTreeNode) => {\n                        const previousNode = isFirstItem ? null : groupContainer.children[groupContainer.children.length - 1];\n                        if (isFirstItem) {\n                            isFirstItem = false;\n                        } else {\n                            // groupContainer.children.push(new KfDelay(originalNode.delay, groupContainer, originalNode, previousNode, nextNode));\n                        }\n                        groupContainer.children.push(nextNode);\n                    }\n                    if (partition.size <= 3) {\n                        for (let attributeName of sequence) {\n                            addNewItem(generateKfTrackOfGroup(\n                                child.grouping.child, partition.get(attributeName), attributeName,\n                                svg,\n                                groupContainer,\n                                isFirstItem ? child : child.grouping.child,\n                                true,\n                                sortAttributes,\n                                child,\n                                isFirstItem ? isFirstRow ? NaN : child.delay : child.grouping.child.delay\n                            ), child.grouping.child)\n                        }\n                    } else {\n                        addNewItem(generateKfTrackOfGroup(\n                            child.grouping.child, partition.get(sequence[0]), sequence[0], svg, groupContainer, child, true,\n                            sortAttributes, child, isFirstRow ? NaN : child.delay\n                        ), child.grouping.child);\n                        addNewItem(generateKfTrackOfGroup(\n                            child.grouping.child, partition.get(sequence[1]), sequence[1], svg, groupContainer, child.grouping.child, true,\n                            sortAttributes, child, child.grouping.child.delay\n                        ), child.grouping.child);\n\n                        for (let i = 2; i < sequence.length - 1; i++) {\n                            const marks = partition.get(sequence[i]);\n                            for (let id of marks) {\n                                const element = svg.getElementById(id);\n                                element.removeAttribute(\"display\");\n                                const opacity = element.getAttribute(\"opacity\");\n                                if (opacity == null || opacity.length == 0) {\n                                    element.setAttribute(\"opacity\", \"0.3\");\n                                } else {\n                                    element.setAttribute(\"opacity\", String(Number(opacity) * 0.3));\n                                }\n                            }\n                        }\n                        const omit = new KfOmit(sequence.length - 3, groupContainer, NaN, child.grouping.child, groupContainer.children[1]);\n                        omit.levelFromLeaves = groupContainer.children[groupContainer.children.length - 1].levelFromLeaves;\n                        // groupContainer.children.push(omit);\n                        addNewItem(omit, child.grouping.child);\n\n                        groupContainer.children.push(generateKfTrackOfGroup(\n                            child.grouping.child, partition.get(sequence[sequence.length - 1]), sequence[sequence.length - 1], svg, groupContainer, child.grouping.child, true,\n                            sortAttributes, child, child.grouping.child.delay\n                        ));\n                    }\n                    addNewRow(groupContainer, child);\n                } else {\n                    const groupContainer = new KfColume(colume, 0, child);\n                    let isFirstItem = true;\n\n                    const addNewItem = (nextNode: KfItem, originalNode: KfTreeGroup | KfTreeNode) => {\n                        const previousNode = isFirstItem ? null : groupContainer.children[groupContainer.children.length - 1];\n                        if (isFirstItem) {\n                            isFirstItem = false;\n                        } else {\n                            // groupContainer.children.push(new KfDelay(originalNode.delay, groupContainer, originalNode, previousNode, nextNode));\n                        }\n                        groupContainer.children.push(nextNode);\n                    }\n                    if (partition.size <= 1) {\n                        for (let attributeName of sequence) {\n                            addNewItem(generateKfTrackOfGroup(\n                                child.grouping.child, partition.get(attributeName), attributeName,\n                                svg,\n                                groupContainer,\n                                isFirstItem ? child : child.grouping.child,\n                                true,\n                                sortAttributes,\n                                child,\n                                isFirstItem ? isFirstRow ? NaN : child.delay : child.grouping.child.delay\n                            ), child.grouping.child)\n                        }\n                    } else {\n                        addNewItem(generateKfTrackOfGroup(\n                            child.grouping.child, partition.get(sequence[0]), sequence[0], svg, groupContainer, child, true,\n                            sortAttributes, child, isFirstRow ? NaN : child.delay\n                        ), child.grouping.child);\n\n                        for (let i = 1; i < sequence.length - 1; i++) {\n                            const marks = partition.get(sequence[i]);\n                            for (let id of marks) {\n                                const element = svg.getElementById(id);\n                                element.removeAttribute(\"display\");\n                                const opacity = element.getAttribute(\"opacity\");\n                                if (opacity == null || opacity.length == 0) {\n                                    element.setAttribute(\"opacity\", \"0.3\");\n                                } else {\n                                    element.setAttribute(\"opacity\", String(Number(opacity) * 0.3));\n                                }\n                            }\n                        }\n                        const omit = new KfOmit(sequence.length - 2, groupContainer, NaN, child.grouping.child, null);\n                        omit.levelFromLeaves = groupContainer.children[groupContainer.children.length - 1].levelFromLeaves;\n                        // groupContainer.children.push(omit);\n                        addNewItem(omit, child.grouping.child);\n\n                        groupContainer.children.push(generateKfTrackOfGroup(\n                            child.grouping.child, partition.get(sequence[sequence.length - 1]), sequence[sequence.length - 1], svg, groupContainer, child.grouping.child, true,\n                            sortAttributes, child, child.grouping.child.delay\n                        ));\n                    }\n                    addNewRow(groupContainer, child);\n                }\n            }\n        }\n        if (colume.children.length == 0) {\n            continue;\n        }\n        addNewChild(colume, arr[0]);\n    }\n    return result;\n}\n\n// TODO: for test, remove later\nconst flatten = (group: KfTreeGroup, marks: Set<string>) => {\n    let result: any[] = [];\n    for (let child of group.children.flatMap(val => val)) {\n        const subset: Set<string> = new Set();\n        for (let id of marks) {\n            if (meetMarkTypeConstrains(id, child.markTypeSelectors)) {\n                subset.add(id);\n            }\n        }\n\n        if (child.grouping == null) {\n            result.push(subset);\n        } else {\n            const groupBy = child.grouping.groupBy;\n            const partition: Map<string, Set<string>> = new Map();\n            for (let id of subset) {\n                const value = chartManager.marks.get(id).get(groupBy);\n                if (!partition.has(value)) {\n                    partition.set(value, new Set());\n                }\n                partition.get(value).add(id);\n            }\n            for (let [k, v] of partition) {\n                result = result.concat(flatten(child.grouping.child, v));\n            }\n        }\n    }\n    return result;\n}\n\nexport const extractAttributeConstrains = (selection: Set<string>) => {\n    const marks: Map<string, Set<string>> = new Map();\n    for (let id of selection) {\n        const markType = chartManager.marks.get(id).get(MARKID);\n        if (!marks.has(markType)) {\n            marks.set(markType, new Set());\n        }\n        marks.get(markType).add(id);\n    }\n    const result: Map<string, string> = new Map();\n    let flag = true;\n    for (let [markId, markSet] of marks) {\n        const attributeSelectors: Map<string, string> = new Map();\n        const attributeValues: Map<string, Set<string>> = new Map();\n        for (let id of markSet) {\n            const attributes = chartManager.marks.get(id);\n            for (let [k, v] of attributes) {\n                if (k == MARKID) {\n                    continue;\n                }\n                if (!attributeValues.has(k)) {\n                    attributeValues.set(k, new Set());\n                }\n                attributeValues.get(k).add(v);\n            }\n        }\n        for (let [k, v] of attributeValues) {\n            if (v.size == 1) {\n                attributeSelectors.set(k, Array.from(v.keys())[0]);\n            }\n        }\n        if (flag) {\n            for (let [k, v] of attributeSelectors) {\n                result.set(k, v);\n            }\n            flag = false;\n        } else {\n            for (let [k, v] of result) {\n                if (attributeSelectors.get(k) != v) {\n                    result.delete(k);\n                }\n            }\n        }\n    }\n    return result;\n}\n\nexport const meetAttributeConstrains = (id: string, attributeSelectors: Map<string, string>) => {\n    const attributes = chartManager.marks.get(id);\n    for (let [k, v] of attributeSelectors) {\n        if (attributes.get(k) != v) {\n            return false;\n        }\n    }\n    return true;\n}\n\nexport const meetMarkTypeConstrains = (id: string, markTypeSelectors: Set<string>) => {\n    const markId = chartManager.marks.get(id).get(MARKID);\n    if (markTypeSelectors.has(markId)) {\n        return true;\n    }\n    return false;\n}\n\n","import \"../assets/style/selection.scss\";\nimport { dragableCanvas } from \"../components/widgets/dragableCanvas\";\nimport { ICoord } from \"../util/ds\";\nimport Tool from \"../util/tool\";\nimport { chartManager, MARKID } from \"./chartManager\";\nimport {\n  addSelection,\n  calcSelectedMarks,\n  extractAttributeConstrains,\n  getSuggestFrames,\n  meetAttributeConstrains,\n  meetMarkTypeConstrains,\n} from \"./kfTree\";\nimport { MarkTableManager, markTableManager } from \"./markTableManager\";\nimport { Polygon } from \"./polygon\";\nimport { suggestPanel } from \"./suggestPanel\";\n\nconst SELECTION_MASK = \"selectionMask\";\n\nexport enum MarkSelectorMode {\n  SINGLE_SELECT,\n  LASSO_SELECT,\n}\n\nenum MarkStatus {\n  DISABLE,\n  EXBAND,\n  INTERNAL,\n}\n\nexport class MarkSelector {\n  static selection: Set<string> = new Set();\n  static mode: MarkSelectorMode = null;\n\n  static selectableMarks: Set<string>;\n  static disabledMarks: Set<string>;\n\n  static attributeSelector: Map<string, string>;\n  static expandOptions: Set<string>[];\n  static selectOption: number;\n\n  static panning: { x: number; y: number };\n  static scale: number;\n  static chartDimension: { width: number; height: number };\n  static svg: Element = null;\n  static selectionMask: Element = null;\n  // static confirmButton: HTMLElement = null;\n\n  static selectStartPoint: ICoord;\n  static selectionRect: Element;\n  // static selectStartPoint: ICoord;\n  // static currentSelection: string[];\n  static updateSelection(elements: string[]) {\n    elements = elements.filter((i) => MarkSelector.selectableMarks.has(i));\n    let flag = 0;\n    for (let id of elements) {\n      const element = document.getElementById(id);\n      const selectionSize = this.selection.size;\n      if (flag != 1 && MarkSelector.selection.has(id)) {\n        MarkSelector.unselectMark(id);\n        if (!flag && this.selection.size != selectionSize) {\n          flag = 2;\n        }\n      } else if (flag != 2) {\n        MarkSelector.selectMark(id);\n        if (!flag && this.selection.size != selectionSize) {\n          flag = 1;\n        }\n      }\n    }\n    MarkSelector.complete();\n    //update recommendList\n    const height: number = suggestPanel.kfHeight;\n    const allNextKf: string[][] = getSuggestFrames([...MarkSelector.selection]);\n    for (let i = 0; i < allNextKf.length; i++) {\n      const element = allNextKf[i];\n      if (element.length == MarkSelector.selection.size) {\n        allNextKf.splice(i, 1);\n        allNextKf.unshift(element);\n        break;\n      }\n    }\n    suggestPanel.createSuggestPanel(allNextKf, height, [\n      ...calcSelectedMarks(),\n    ]);\n    const loc = document.getElementById(\"recommendList\").getBoundingClientRect().left;\n    const aniPreview = document.getElementById(\"aniPreview\");\n    const locold = aniPreview.getBoundingClientRect().left;\n    const xMove = loc - locold;\n    aniPreview.style.transform = `translate(${xMove}px, 20px)`;\n  }\n\n  static selectMark(id: string) {\n    if (MarkSelector.selection.size == 0) {\n      // this.confirmButton.removeAttribute(\"style\");\n      for (let i = 0; i < MarkSelector.expandOptions.length; i++) {\n        const set = MarkSelector.expandOptions[i];\n        if (set.has(id)) {\n          MarkSelector.selectOption = i;\n          for (id of set) {\n            MarkSelector.addSelect(id);\n          }\n          for (let id of MarkSelector.selectableMarks) {\n            if (!set.has(id)) {\n              MarkSelector.addHide(id);\n            }\n          }\n          return;\n        }\n      }\n      MarkSelector.selectOption = -1;\n      MarkSelector.addSelect(id);\n      for (let set of MarkSelector.expandOptions) {\n        for (let id of set) {\n          MarkSelector.addHide(id);\n        }\n      }\n      return;\n    }\n    if (MarkSelector.selectOption != -1) {\n      return;\n    }\n    for (let i = 0; i < MarkSelector.expandOptions.length; i++) {\n      const set = MarkSelector.expandOptions[i];\n      if (set.has(id)) {\n        return;\n      }\n    }\n    MarkSelector.addSelect(id);\n  }\n\n  static unselectMark(id: string) {\n    if (MarkSelector.selectOption != -1) {\n      for (let i of MarkSelector.selection) {\n        MarkSelector.removeSelect(i);\n      }\n      const set = MarkSelector.expandOptions[MarkSelector.selectOption];\n      for (let id of MarkSelector.selectableMarks) {\n        if (!set.has(id)) {\n          MarkSelector.removeHide(id);\n        }\n      }\n      MarkSelector.selectOption = -1;\n    } else {\n      const markType = chartManager.marks.get(id).get(MARKID);\n      for (let i of MarkSelector.selection) {\n        if (chartManager.marks.get(i).get(MARKID) == markType) {\n          MarkSelector.removeSelect(i);\n        }\n      }\n      if (MarkSelector.selection.size == 0) {\n        for (let set of MarkSelector.expandOptions) {\n          for (let id of set) {\n            MarkSelector.removeHide(id);\n          }\n        }\n      }\n    }\n    if (this.selection.size == 0) {\n    }\n  }\n\n  static addSelect(id: string) {\n    if (MarkSelector.selection.has(id)) {\n      return;\n    }\n    MarkSelector.selection.add(id);\n    MarkTableManager.selection.add(id);\n    MarkSelector.addHighlight(id);\n  }\n\n  static removeSelect(id: string) {\n    if (!MarkSelector.selection.has(id)) {\n      return;\n    }\n    MarkSelector.selection.delete(id);\n    MarkTableManager.selection.delete(id);\n    MarkSelector.removeHighlight(id);\n  }\n\n  static selectBySelectors(\n    markTypeSelectors: Set<string>,\n    attributeSelectors: Map<string, string>\n  ) {\n    const result: Set<string> = new Set();\n    for (let id of MarkSelector.selectableMarks) {\n      if (\n        meetAttributeConstrains(id, attributeSelectors) &&\n        meetMarkTypeConstrains(id, markTypeSelectors)\n      ) {\n        result.add(id);\n      }\n    }\n    return result;\n  }\n\n  static complete() {\n    const markTypeSelectors: Set<string> = new Set();\n    const attributeSelectors: Map<string, string> = extractAttributeConstrains(\n      MarkSelector.selection\n    );\n\n    for (let id of MarkSelector.selection) {\n      const markType = chartManager.marks.get(id).get(MARKID);\n      markTypeSelectors.add(markType);\n    }\n\n    const newSelection = MarkSelector.selectBySelectors(\n      markTypeSelectors,\n      attributeSelectors\n    );\n    for (let id of newSelection) {\n      MarkSelector.addSelect(id);\n    }\n  }\n\n  static setCompleteData(\n    disabledMarks: Set<string>,\n    attributeSelectors: Map<string, string>,\n    expandOptions: Set<string>[]\n  ) {\n    MarkSelector.disabledMarks = new Set();\n    MarkSelector.attributeSelector = attributeSelectors;\n    MarkSelector.expandOptions = expandOptions;\n    MarkSelector.selectableMarks = new Set();\n    for (let id of chartManager.marks.keys()) {\n      if (!disabledMarks.has(id)) {\n        let disable = true;\n        if (meetAttributeConstrains(id, MarkSelector.attributeSelector)) {\n          disable = false;\n        }\n        for (let set of MarkSelector.expandOptions) {\n          if (set.has(id)) {\n            disable = false;\n            break;\n          }\n        }\n        if (disable) {\n          MarkSelector.addHide(id);\n        } else {\n          MarkSelector.selectableMarks.add(id);\n        }\n      } else {\n        MarkSelector.addDisable(id);\n      }\n    }\n    MarkSelector.selectOption = -1;\n    // this.confirmButton.setAttribute(\"style\", \"display:none\");\n  }\n\n  static addHide(id: string) {\n    MarkTableManager.disabledMarks.add(id);\n    const element: HTMLElement = document.getElementById(id);\n    // element.setAttribute(\"display\", \"none\");\n    let opacity = 1;\n    const opacityAttr = element.getAttribute(\"opacity\");\n    if (opacityAttr && opacityAttr.length != 0) {\n      opacity = Number(opacityAttr);\n    }\n    element.setAttribute(\"opacity\", String(opacity * 0.1));\n    // dataTable\n    markTableManager.notOptional(id);\n  }\n\n  static removeHide(id: string) {\n    MarkTableManager.disabledMarks.delete(id);\n    const element: HTMLElement = document.getElementById(id);\n    let opacity = 1;\n    const opacityAttr = element.getAttribute(\"opacity\");\n    if (opacityAttr && opacityAttr.length != 0) {\n      opacity = Number(opacityAttr);\n    }\n    element.setAttribute(\"opacity\", String(opacity / 0.1));\n    markTableManager.removeNotOptional(id);\n  }\n\n  static addHighlight(id: string) {\n    const element: HTMLElement = document.getElementById(id);\n    MarkSelector.addDisable(id);\n    let maskElement: Element;\n\n    const boundingRect = element.getBoundingClientRect();\n    const p1 = Tool.screenToSvgCoords(\n      MarkSelector.svg,\n      boundingRect.left,\n      boundingRect.top\n    );\n    const p2 = Tool.screenToSvgCoords(\n      MarkSelector.svg,\n      boundingRect.right,\n      boundingRect.bottom\n    );\n    const width = (p2.x - p1.x) / MarkSelector.scale;\n    const height = (p2.y - p1.y) / MarkSelector.scale;\n\n    const sizeThreshold = 10;\n\n    if (element.tagName == \"text\") {\n      maskElement = document.createElementNS(\n        \"http://www.w3.org/2000/svg\",\n        \"rect\"\n      );\n      maskElement.setAttribute(\n        \"x\",\n        String((p1.x - MarkSelector.panning.x) / MarkSelector.scale)\n      );\n      maskElement.setAttribute(\n        \"y\",\n        String((p1.y - MarkSelector.panning.y) / MarkSelector.scale)\n      );\n      maskElement.setAttribute(\"width\", String(width));\n      maskElement.setAttribute(\"height\", String(height));\n    } else if (width < sizeThreshold || height < sizeThreshold) {\n      if (width < sizeThreshold && height < sizeThreshold) {\n        maskElement = document.createElementNS(\n          \"http://www.w3.org/2000/svg\",\n          \"rect\"\n        );\n        maskElement.setAttribute(\n          \"x\",\n          String(\n            (p1.x - MarkSelector.panning.x) / MarkSelector.scale -\n            (sizeThreshold - width) / 2\n          )\n        );\n        maskElement.setAttribute(\n          \"y\",\n          String(\n            (p1.y - MarkSelector.panning.y) / MarkSelector.scale -\n            (sizeThreshold - height) / 2\n          )\n        );\n        maskElement.setAttribute(\"width\", String(sizeThreshold));\n        maskElement.setAttribute(\"height\", String(sizeThreshold));\n      } else {\n        maskElement = element.cloneNode() as Element;\n        maskElement.classList.remove(\"mark\");\n        maskElement.setAttribute(\n          \"transform\",\n          new Polygon().getTransformFromChartContent(element).toString()\n        );\n        maskElement.setAttribute(\"stroke-width\", \"3\");\n        maskElement.setAttribute(\"opacity\", \"0.8\");\n      }\n    } else {\n      maskElement = element.cloneNode() as Element;\n      maskElement.classList.remove(\"mark\");\n      maskElement.removeAttribute(\"opacity\");\n      maskElement.removeAttribute(\"stroke-width\");\n      maskElement.setAttribute(\n        \"transform\",\n        new Polygon().getTransformFromChartContent(element).toString()\n      );\n    }\n    maskElement.setAttribute(\"fill\", \"fff\");\n    maskElement.setAttribute(\"fill-opacity\", \"0\");\n    maskElement.setAttribute(\"stroke\", \"#1a73e8\");\n    maskElement.id = \"__\" + element.id;\n    maskElement.addEventListener(\"mouseover\", () => {\n      MarkSelector.selection.forEach((id) => {\n        const maskId: string = \"__\" + id;\n        const maskElement: Element = document.getElementById(maskId);\n        maskElement.classList.add(\"highlight\");\n      });\n\n      // maskElement.classList.add(\"highlight\");\n    });\n    maskElement.addEventListener(\"mouseout\", () => {\n      // maskElement.classList.remove(\"highlight\");\n      MarkSelector.selection.forEach((id) => {\n        const maskId: string = \"__\" + id;\n        const maskElement: Element = document.getElementById(maskId);\n        maskElement.classList.remove(\"highlight\");\n      }\n      );\n    });\n    maskElement.addEventListener(\"click\", () => {\n      // this.removeHoverHighlight(maskElement.id);\n      MarkSelector.updateSelection([element.id]);\n    });\n\n    MarkSelector.selectionMask.appendChild(maskElement);\n    //update dataTableSelection\n    markTableManager.addHighLightRow(id);\n  }\n\n  static removeHighlight(id: string) {\n    const element: HTMLElement = document.getElementById(id);\n    MarkSelector.removeDisable(id);\n    MarkSelector.selectionMask.removeChild(\n      document.getElementById(\"__\" + element.id)\n    );\n    markTableManager.removeHighLightRow(id);\n  }\n\n  static addHoverHighlight(id: string) {\n    const element: HTMLElement = document.getElementById(id);\n    // MarkSelector.addDisable(id);\n    let maskElement: Element;\n\n    const boundingRect = element.getBoundingClientRect();\n    const p1 = Tool.screenToSvgCoords(\n      MarkSelector.svg,\n      boundingRect.left,\n      boundingRect.top\n    );\n    const p2 = Tool.screenToSvgCoords(\n      MarkSelector.svg,\n      boundingRect.right,\n      boundingRect.bottom\n    );\n    const width = (p2.x - p1.x) / MarkSelector.scale;\n    const height = (p2.y - p1.y) / MarkSelector.scale;\n\n    const sizeThreshold = 10;\n\n    if (width < sizeThreshold || height < sizeThreshold) {\n      if (width < sizeThreshold && height >= sizeThreshold) {\n        maskElement = document.createElementNS(\n          \"http://www.w3.org/2000/svg\",\n          \"rect\"\n        );\n        const mark = document.getElementById(id);\n        mark.classList.add(\"highlight\");\n      } else if (height < sizeThreshold && width >= sizeThreshold) {\n        maskElement = document.createElementNS(\n          \"http://www.w3.org/2000/svg\",\n          \"rect\"\n        );\n        const mark = document.getElementById(id);\n        mark.classList.add(\"highlight\");\n      } else {\n        maskElement = document.createElementNS(\n          \"http://www.w3.org/2000/svg\",\n          \"rect\"\n        );\n        maskElement.setAttribute(\n          \"x\",\n          String(\n            (p1.x - MarkSelector.panning.x) / MarkSelector.scale -\n            (sizeThreshold - width) / 2\n          )\n        );\n        maskElement.setAttribute(\n          \"y\",\n          String(\n            (p1.y - MarkSelector.panning.y) / MarkSelector.scale -\n            (sizeThreshold - height) / 2\n          )\n        );\n        maskElement.setAttribute(\"width\", String(sizeThreshold));\n        maskElement.setAttribute(\"height\", String(sizeThreshold));\n      }\n    } else if (element.tagName == \"text\") {\n      maskElement = document.createElementNS(\n        \"http://www.w3.org/2000/svg\",\n        \"rect\"\n      );\n      maskElement.setAttribute(\n        \"x\",\n        String((p1.x - MarkSelector.panning.x) / MarkSelector.scale)\n      );\n      maskElement.setAttribute(\n        \"y\",\n        String((p1.y - MarkSelector.panning.y) / MarkSelector.scale)\n      );\n      maskElement.setAttribute(\"width\", String(width));\n      maskElement.setAttribute(\"height\", String(height));\n    } else {\n      maskElement = element.cloneNode() as Element;\n      maskElement.classList.remove(\"mark\");\n      maskElement.removeAttribute(\"opacity\");\n      maskElement.removeAttribute(\"stroke-width\");\n      maskElement.setAttribute(\n        \"transform\",\n        new Polygon().getTransformFromChartContent(element).toString()\n      );\n    }\n    maskElement.setAttribute(\"fill\", \"none\");\n    // maskElement.setAttribute(\"fill-opacity\", \"0\");\n    maskElement.setAttribute(\"stroke\", \"#1a73e8\");\n    maskElement.setAttribute(\"stroke-width\", \"2\");\n    maskElement.id = \"___\" + element.id;\n    MarkSelector.selectionMask.appendChild(maskElement);\n    //update dataTableSelection\n    // markTableManager.addHighLightRow(id);\n  }\n\n  static removeHoverHighlight(id: string) {\n    const element: HTMLElement = document.getElementById(id);\n    element.classList.remove(\"highlight\");\n    MarkSelector.selectionMask.removeChild(\n      document.getElementById(\"___\" + element.id)\n    );\n    // markTableManager.removeHighLightRow(id);\n  }\n  static addDisable(id: string) {\n    MarkTableManager.disabledMarks.add(id);\n    const element: HTMLElement = document.getElementById(id);\n    let opacity = 1;\n    const opacityAttr = element.getAttribute(\"opacity\");\n    if (opacityAttr && opacityAttr.length != 0) {\n      opacity = Number(opacityAttr);\n    }\n    element.setAttribute(\"opacity\", String(opacity * 0.3));\n    markTableManager.removeHighLightRow(id);\n    markTableManager.notOptional(id);\n  }\n  static removeDisable(id: string) {\n    MarkTableManager.disabledMarks.delete(id);\n    const element: HTMLElement = document.getElementById(id);\n    let opacity = 1;\n    const opacityAttr = element.getAttribute(\"opacity\");\n    if (opacityAttr && opacityAttr.length != 0) {\n      opacity = Number(opacityAttr);\n    }\n    element.setAttribute(\"opacity\", String(opacity / 0.3));\n    markTableManager.removeNotOptional(id);\n  }\n\n  static init() {\n    MarkSelector.setSingleSelect();\n    const chartContainter = document.getElementById(\"chartContainer\");\n    chartContainter.onmousedown = MarkSelector.onMouseDown;\n    chartContainter.addEventListener(\"wheel\", MarkSelector.onMouseWheel);\n    // MarkSelector.confirmButton = document.getElementById(\"confirmButton\");\n    // MarkSelector.confirmButton.onclick = MarkSelector.emitSelection;\n    // this.confirmButton.setAttribute(\"style\", \"display:none\");\n  }\n\n  static reset(\n    disabledMarks: Set<string>,\n    attributeSelectors: Map<string, string>,\n    expandOptions: Set<string>[]\n  ) {\n    MarkSelector.selection.clear();\n    markTableManager.reset();\n    markTableManager.render();\n    MarkSelector.scale = 1;\n    MarkSelector.panning = { x: 0, y: 0 };\n    let svg = document.getElementById(\"visChart\");\n    if (!svg) {\n      return;\n    }\n    const marks = svg.querySelectorAll(\"[id*='mark']\");\n    marks.forEach((mark) => {\n      mark.addEventListener(\"mouseover\", () => {\n        if (mark.tagName != \"text\") {\n          mark.classList.add(\"highlight\");\n        } else {\n          mark.classList.add(\"highlight-text\");\n        }\n\n      });\n      mark.addEventListener(\"mouseout\", () => {\n        mark.classList.remove(\"highlight\");\n        mark.classList.remove(\"highlight-text\");\n      });\n      mark.addEventListener(\"click\", () => {\n        MarkSelector.updateSelection([mark.id]);\n      });\n    });\n    MarkSelector.svg = svg;\n\n    const selectionMask = document.createElementNS(\n      \"http://www.w3.org/2000/svg\",\n      \"g\"\n    );\n    MarkSelector.selectionMask = selectionMask;\n    selectionMask.id = SELECTION_MASK;\n\n    document.getElementById(\"chartContent\").appendChild(selectionMask);\n    MarkSelector.chartDimension = {\n      width: Number(MarkSelector.svg.getAttribute(\"width\")),\n      height: Number(MarkSelector.svg.getAttribute(\"height\")),\n    };\n    //update dataTable\n    MarkSelector.setCompleteData(\n      disabledMarks,\n      attributeSelectors,\n      expandOptions\n    );\n  }\n  static limitTranslate() {\n    MarkSelector.panning.x = Math.min(0, MarkSelector.panning.x);\n    MarkSelector.panning.x = Math.max(\n      MarkSelector.chartDimension.width * (1 - MarkSelector.scale),\n      MarkSelector.panning.x\n    );\n    MarkSelector.panning.y = Math.min(0, MarkSelector.panning.y);\n    MarkSelector.panning.y = Math.max(\n      MarkSelector.chartDimension.height * (1 - MarkSelector.scale),\n      MarkSelector.panning.y\n    );\n  }\n\n  static onMouseWheel(wheelEvent: WheelEvent) {\n    // console.log(wheelEvent);\n    if (MarkSelector.svg == null) {\n      return;\n    }\n    let scaleFactor = Math.pow(1.001, -wheelEvent.deltaY);\n\n    scaleFactor = Math.max(1 / MarkSelector.scale, scaleFactor);\n    scaleFactor = Math.min(10 / MarkSelector.scale, scaleFactor);\n\n    const center = Tool.screenToSvgCoords(\n      MarkSelector.svg,\n      wheelEvent.pageX,\n      wheelEvent.pageY\n    );\n\n    MarkSelector.panning.x =\n      (MarkSelector.panning.x - center.x) * scaleFactor + center.x;\n    MarkSelector.panning.y =\n      (MarkSelector.panning.y - center.y) * scaleFactor + center.y;\n    MarkSelector.scale *= scaleFactor;\n\n    MarkSelector.limitTranslate();\n\n    document\n      .getElementById(\"chartContent\")\n      .setAttribute(\n        \"transform\",\n        `matrix(${MarkSelector.scale},0,0,${MarkSelector.scale},${MarkSelector.panning.x},${MarkSelector.panning.y})`\n      );\n  }\n\n  static updateTranslate(moveEvent: MouseEvent) {\n    MarkSelector.panning.x += moveEvent.movementX;\n    MarkSelector.panning.y += moveEvent.movementY;\n\n    MarkSelector.limitTranslate();\n\n    document\n      .getElementById(\"chartContent\")\n      .setAttribute(\n        \"transform\",\n        `matrix(${MarkSelector.scale},0,0,${MarkSelector.scale},${MarkSelector.panning.x},${MarkSelector.panning.y})`\n      );\n  }\n\n  static finishTranslate(upEvent: MouseEvent) {\n    document.onmousemove = null;\n    document.onmouseup = null;\n  }\n\n  static emitSelection() {\n    if (MarkSelector.selection.size == 0) {\n      return;\n    }\n    addSelection([...MarkSelector.selection]);\n    // MarkSelector.updateSelection([...MarkSelector.selection]);\n  }\n\n  static onMouseDown(downEvent: MouseEvent) {\n    if (downEvent.button == 1) {\n      MarkSelector.emitSelection();\n      return;\n    } else if (downEvent.button == 2) {\n      document.onmousemove = MarkSelector.updateTranslate;\n      document.onmouseup = MarkSelector.finishTranslate;\n      return;\n    }\n    if (!MarkSelector.svg) {\n      return;\n    }\n\n    const downEvtTarget: HTMLElement = <HTMLElement>downEvent.target;\n    const targetId: string = downEvtTarget.id.replace(\"__\", \"\");\n\n    if ([...MarkSelector.selection].includes(targetId)) {\n      // if mouse move over 3px, then start drag\n\n      let lastMouseX = downEvent.pageX,\n        lastMouseY = downEvent.pageY;\n      const mouseMoveThsh: number = 3;\n\n      document.onmousemove = (moveEvt) => {\n        if (\n          Tool.pointDist(lastMouseX, moveEvt.pageX, lastMouseY, moveEvt.pageY) >\n          mouseMoveThsh\n        ) {\n          dragableCanvas.createCanvas(\n            document.querySelector(\"#chartContainer > svg:first-of-type\"),\n            { x: downEvent.pageX, y: downEvent.pageY }\n          );\n        }\n      };\n      document.onmouseup = (upEvt) => {\n        if (\n          Tool.pointDist(lastMouseX, upEvt.pageX, lastMouseY, upEvt.pageY) <\n          mouseMoveThsh\n        ) {\n          MarkSelector.finishRectSelection(upEvt);\n        }\n        document.onmousemove = null;\n        document.onmouseup = null;\n      };\n    } else {\n      document.onmousemove = MarkSelector.updateRectSelection;\n      document.onmouseup = MarkSelector.finishRectSelection;\n    }\n\n    // }\n\n    MarkSelector.selectStartPoint = Tool.screenToSvgCoords(\n      MarkSelector.svg,\n      downEvent.clientX,\n      downEvent.clientY\n    );\n    const selectionRect = document.createElementNS(\n      \"http://www.w3.org/2000/svg\",\n      \"rect\"\n    );\n    selectionRect.classList.add(\"selection-rect\");\n    // selectionRect.setAttribute(\"x\")\n    MarkSelector.selectionRect = selectionRect;\n    MarkSelector.selectionMask.appendChild(selectionRect);\n  }\n\n  static updateLassoSelection(moveEvent: MouseEvent) {\n    // console.log(\"u lasso\", moveEvent);\n  }\n\n  static updateRectSelection(moveEvent: MouseEvent) {\n    // console.log(\"u rect\", moveEvent);\n    const startPoint = MarkSelector.selectStartPoint;\n    const endPoint = Tool.screenToSvgCoords(\n      MarkSelector.svg,\n      moveEvent.clientX,\n      moveEvent.clientY\n    );\n    const selectionRect = MarkSelector.selectionRect;\n    const scale = MarkSelector.scale;\n    const panningX = MarkSelector.panning.x;\n    const panningY = MarkSelector.panning.y;\n    selectionRect.setAttribute(\n      \"x\",\n      String((Math.min(endPoint.x, startPoint.x) - panningX) / scale)\n    );\n    selectionRect.setAttribute(\n      \"y\",\n      String((Math.min(endPoint.y, startPoint.y) - panningY) / scale)\n    );\n    selectionRect.setAttribute(\n      \"width\",\n      String(Math.abs(endPoint.x - startPoint.x) / scale)\n    );\n    selectionRect.setAttribute(\n      \"height\",\n      String(Math.abs(endPoint.y - startPoint.y) / scale)\n    );\n  }\n\n  static finishLassoSelection(upEvent: MouseEvent) {\n    // console.log(\"f lasso\", upEvent);\n    document.onmousemove = null;\n    document.onmouseup = null;\n  }\n\n  static finishRectSelection(upEvent: MouseEvent) {\n    MarkSelector.selectionMask.removeChild(MarkSelector.selectionRect);\n    document.onmousemove = null;\n    document.onmouseup = null;\n    const startPoint = MarkSelector.selectStartPoint;\n    const endPoint = Tool.screenToSvgCoords(\n      MarkSelector.svg,\n      upEvent.clientX,\n      upEvent.clientY\n    );\n    if (endPoint.x == startPoint.x && endPoint.y == startPoint.y) {\n      const elementsUnderMouse = Array.from(\n        document.elementsFromPoint(upEvent.pageX, upEvent.pageY)\n      );\n      for (let element of elementsUnderMouse) {\n        if (!MarkSelector.selectableMarks.has(element.id)) {\n          continue;\n        }\n        // MarkSelector.updateSelection([element.id]);\n        return;\n      }\n      return;\n    }\n\n    const selection: string[] = [];\n    const yBegin = Math.min(startPoint.y, endPoint.y);\n    const yEnd = Math.max(startPoint.y, endPoint.y);\n    const xBegin = Math.min(startPoint.x, endPoint.x);\n    const xEnd = Math.max(startPoint.x, endPoint.x);\n    const numberSteps = 50;\n    const yStep = (yEnd - yBegin) / (numberSteps - 1);\n    for (let id of MarkSelector.selectableMarks) {\n      // const rect = document.getElementById(id).getBoundingClientRect();\n      const polygon = new Polygon();\n      polygon.fromElement(document.getElementById(id));\n      if (\n        xBegin <= polygon.xMin &&\n        xEnd >= polygon.xMax &&\n        yBegin <= polygon.yMin &&\n        yEnd >= polygon.yMax\n      ) {\n        selection.push(id);\n      }\n    }\n\n    MarkSelector.updateSelection(selection);\n  }\n\n  static removeSelectedTool() {\n    const selectedTool = document.getElementsByClassName(\"selected-tool\");\n    if (selectedTool.length == 0) {\n      return;\n    }\n    selectedTool[0].classList.remove(\"selected-tool\");\n  }\n\n  static setLassoSelect() {\n    if (MarkSelector.mode == MarkSelectorMode.LASSO_SELECT) {\n      return;\n    }\n    MarkSelector.mode = MarkSelectorMode.LASSO_SELECT;\n    const chartContainer = document.getElementById(\"chartContainer\");\n    chartContainer.classList.remove(\"single-select\");\n    chartContainer.classList.add(\"lasso-select\");\n    MarkSelector.removeSelectedTool();\n  }\n\n  static setSingleSelect() {\n    if (MarkSelector.mode == MarkSelectorMode.SINGLE_SELECT) {\n      return;\n    }\n    MarkSelector.mode = MarkSelectorMode.SINGLE_SELECT;\n    const chartContainer = document.getElementById(\"chartContainer\");\n    chartContainer.classList.remove(\"lasso-select\");\n    chartContainer.classList.add(\"single-select\");\n    MarkSelector.removeSelectedTool();\n  }\n}","import '../assets/style/selectableTable.scss'\nimport AttrSort from '../components/widgets/attrSort';\nimport { dragableCanvas } from '../components/widgets/dragableCanvas';\nimport Tool from '../util/tool';\nimport { chartManager } from \"./chartManager\"\nimport { MarkSelector } from './markSelector';\n\nexport class MarkTableManager {\n    static selection: Set<string> = new Set();\n    static disabledMarks: Set<string> = new Set();\n    render() {\n        const dataTableMarks = chartManager.markTables;\n        const dataTabelContainer = document.getElementById(\"dataTabelContainer\");\n        dataTabelContainer.innerHTML = '';\n        if(!dataTableMarks){\n            return;\n        }\n        dataTableMarks.forEach((dataTableMark) => {\n            const dataTable = document.createElement('table');\n            dataTable.className = 'selectable-table';\n            const headerTr: HTMLTableRowElement = document.createElement('tr');\n            const th: HTMLTableHeaderCellElement = document.createElement('th');\n            th.className = 'no-activate-th';\n            const thContainer: HTMLDivElement = document.createElement('div');\n            thContainer.className = 'th-container';\n            const titleContent: HTMLParagraphElement = document.createElement('p');\n            titleContent.innerHTML = 'Id';\n            titleContent.className = 'non-activate-p';\n            thContainer.appendChild(titleContent);\n            //create sort button\n            const sortBtn: HTMLSpanElement = document.createElement('span');\n            let iconCls: string = '';\n            if (dataTableMark.sortId === AttrSort.ASSCENDING_ORDER) {\n                iconCls = `${AttrSort.ASSCENDING_ORDER}-icon activate-sort-btn`;\n                th.title = `markId in asscending order`;\n                titleContent.classList.remove('non-activate-p');\n                th.classList.remove('no-activate-th');\n            } else if (dataTableMark.sortId === AttrSort.DESCENDING_ORDER) {\n                iconCls = `${AttrSort.DESCENDING_ORDER}-icon activate-sort-btn`;\n                th.title = `markId in descending order`;\n                titleContent.classList.remove('non-activate-p');\n                th.classList.remove('no-activate-th');\n            } else if (dataTableMark.sortId === 'none') {\n                th.title = `Click to sort by markId`;\n            }\n            sortBtn.className = `sort-btn ${iconCls}`;\n            th.onclick = () => {\n                dataTableMark.sortAttribute = dataTableMark.sortAttribute.map(() => 'none');\n                if (dataTableMark.sortId === 'none') {\n                    dataTableMark.sortId = AttrSort.ASSCENDING_ORDER;\n                }\n                else if (dataTableMark.sortId === AttrSort.ASSCENDING_ORDER) {\n                    dataTableMark.sortId = AttrSort.DESCENDING_ORDER;\n                }\n                else if (dataTableMark.sortId === AttrSort.DESCENDING_ORDER) {\n                    dataTableMark.sortId = AttrSort.ASSCENDING_ORDER;\n                }\n                dataTableMark.items.sort((a, b) => {\n                    if (dataTableMark.sortId === AttrSort.ASSCENDING_ORDER) {\n                        if (parseFloat(a.id.split('mark')[1]) > parseFloat(b.id.split('mark')[1])) {\n                            return 1;\n                        } else if (parseFloat(a.id.split('mark')[1]) < parseFloat(b.id.split('mark')[1])) {\n                            return -1;\n                        } else {\n                            return 0;\n                        }\n                    } else if (dataTableMark.sortId === AttrSort.DESCENDING_ORDER) {\n                        if (parseFloat(a.id.split('mark')[1]) > parseFloat(b.id.split('mark')[1])) {\n                            return -1;\n                        } else if (parseFloat(a.id.split('mark')[1]) < parseFloat(b.id.split('mark')[1])) {\n                            return 1;\n                        } else {\n                            return 0;\n                        }\n                    }\n                });\n                this.render();\n            }\n            thContainer.appendChild(sortBtn);\n            th.appendChild(thContainer);\n            headerTr.appendChild(th);\n            //attributes\n            dataTableMark.fieldNames.forEach((fieldName, index) => {\n                const th: HTMLTableHeaderCellElement = document.createElement('th');\n                th.className = 'no-activate-th';\n                const thContainer: HTMLDivElement = document.createElement('div');\n                thContainer.className = 'th-container';\n                const titleContent: HTMLParagraphElement = document.createElement('p');\n                if (fieldName === '_MARKID') {\n                    titleContent.innerHTML = 'Type';\n                } else {\n                    titleContent.innerHTML = fieldName;\n                }\n                titleContent.className = 'non-activate-p';\n                thContainer.appendChild(titleContent);\n                const sortBtn: HTMLSpanElement = document.createElement('span');\n                let iconCls: string = '';\n                if (dataTableMark.sortAttribute[index] === AttrSort.ASSCENDING_ORDER) {\n                    iconCls = `${AttrSort.ASSCENDING_ORDER}-icon activate-sort-btn`;\n                    th.title = `${fieldName} in asscending order`;\n                    titleContent.classList.remove('non-activate-p');\n                    th.classList.remove('no-activate-th');\n                } else if (dataTableMark.sortAttribute[index] === AttrSort.DESCENDING_ORDER) {\n                    iconCls = `${AttrSort.DESCENDING_ORDER}-icon activate-sort-btn`;\n                    th.title = `${fieldName} in descending order`;\n                    titleContent.classList.remove('non-activate-p');\n                    th.classList.remove('no-activate-th');\n                } else if (dataTableMark.sortAttribute[index] === 'none') {\n                    th.title = `Click to sort by ${fieldName}`;\n                }\n                sortBtn.className = `sort-btn ${iconCls}`;\n                th.onclick = () => {\n                    dataTableMark.sortId = 'none';\n                    dataTableMark.sortAttribute = dataTableMark.sortAttribute.map((value, i) => {\n                        if (i === index) {\n                            return value;\n                        } else {\n                            return 'none';\n                        }\n                    });\n                    if (dataTableMark.sortAttribute[index] === 'none') {\n                        dataTableMark.sortAttribute[index] = AttrSort.ASSCENDING_ORDER;\n                    }\n                    else if (dataTableMark.sortAttribute[index] === AttrSort.ASSCENDING_ORDER) {\n                        dataTableMark.sortAttribute[index] = AttrSort.DESCENDING_ORDER;\n                    }\n                    else if (dataTableMark.sortAttribute[index] === AttrSort.DESCENDING_ORDER) {\n                        dataTableMark.sortAttribute[index] = AttrSort.ASSCENDING_ORDER;\n                    }\n                    dataTableMark.sortAttribute.forEach((value, i) => {\n                        const attributesType: string = dataTableMark.fieldType[i];\n                        if (attributesType === 'string') {\n                            if (value === AttrSort.ASSCENDING_ORDER) {\n                                dataTableMark.items.sort((a, b) => {\n                                    if (a.attributes[i] > b.attributes[i]) {\n                                        return 1;\n                                    } else if (a.attributes[i] < b.attributes[i]) {\n                                        return -1;\n                                    } else {\n                                        return 0;\n                                    }\n                                })\n                            } else if (value === AttrSort.DESCENDING_ORDER) {\n                                dataTableMark.items.sort((a, b) => {\n                                    if (a.attributes[i] > b.attributes[i]) {\n                                        return -1;\n                                    } else if (a.attributes[i] < b.attributes[i]) {\n                                        return 1;\n                                    } else {\n                                        return 0;\n                                    }\n                                })\n                            }\n\n                        } else if (attributesType === 'number') {\n                            if (value === AttrSort.ASSCENDING_ORDER) {\n                                dataTableMark.items.sort((a, b) => {\n                                    if (parseFloat(a.attributes[i]) > parseFloat(b.attributes[i])) {\n                                        return 1;\n                                    } else if (parseFloat(a.attributes[i]) < parseFloat(b.attributes[i])) {\n                                        return -1;\n                                    } else {\n                                        return 0;\n                                    }\n                                })\n                            } else if (value === AttrSort.DESCENDING_ORDER) {\n                                dataTableMark.items.sort((a, b) => {\n                                    if (parseFloat(a.attributes[i]) > parseFloat(b.attributes[i])) {\n                                        return -1;\n                                    } else if (parseFloat(a.attributes[i]) < parseFloat(b.attributes[i])) {\n                                        return 1;\n                                    } else {\n                                        return 0;\n                                    }\n                                })\n                            }\n                        } else if (attributesType === 'month') {\n                            //reverse order\n                            if (!(value === AttrSort.ASSCENDING_ORDER && (dataTableMark.items[0].attributes.includes('Jan') || dataTableMark.items[0].attributes.includes('January')))) {\n                                dataTableMark.items.sort((a, b) => {\n                                    return -1;\n                                })\n                            }\n                        }\n\n\n                    })\n\n                    this.render();\n                }\n                thContainer.appendChild(sortBtn);\n                th.appendChild(thContainer);\n                headerTr.appendChild(th);\n            })\n            dataTable.appendChild(headerTr);\n\n            dataTableMark.items.forEach((item) => {\n                const tr: HTMLTableRowElement = document.createElement('tr');\n                tr.setAttribute('dataItem', item.id);\n                const td: HTMLTableDataCellElement = document.createElement('td');\n                td.innerText = item.id;\n                tr.appendChild(td);\n                item.attributes.forEach((value, index) => {\n                    const td: HTMLTableDataCellElement = document.createElement('td');\n                    td.innerText = value;\n                    tr.appendChild(td);\n                })\n                tr.onmousedown = (downEvent) => {\n                    let lastMouseX = downEvent.pageX, lastMouseY = downEvent.pageY;\n                    const mouseMoveThsh: number = 3;\n\n                    document.onmousemove = (moveEvt) => {\n                        if (Tool.pointDist(lastMouseX, moveEvt.pageX, lastMouseY, moveEvt.pageY) > mouseMoveThsh) {\n                            if (MarkTableManager.selection.size > 0) {\n                                dragableCanvas.createCanvas(document.querySelector('#chartContainer > svg:first-of-type'), { x: downEvent.pageX, y: downEvent.pageY });\n                            }\n                        }\n                    }\n                    document.onmouseup = (upEvt) => {\n                        if (Tool.pointDist(lastMouseX, upEvt.pageX, lastMouseY, upEvt.pageY) < mouseMoveThsh) {\n                            MarkSelector.updateSelection([item.id]);\n                        }\n                        document.onmousemove = null;\n                        document.onmouseup = null;\n                    }\n                }\n                dataTable.appendChild(tr);\n            })\n            dataTabelContainer.appendChild(dataTable);\n        })\n        MarkTableManager.disabledMarks.forEach((id) => {\n            this.notOptional(id);\n        })\n        MarkTableManager.selection.forEach((id) => {\n            this.addHighLightRow(id);\n        })\n\n    }\n    notOptional(id: string) {\n        const tr: HTMLTableRowElement = document.querySelector(`tr[dataItem=\"${id}\"]`);\n        if (tr) {\n            tr.setAttribute('style', 'opacity: 0.5');\n        }\n    }\n    removeNotOptional(id: string) {\n        const tr: HTMLTableRowElement = document.querySelector(`tr[dataItem=\"${id}\"]`);\n        if (tr) {\n            tr.setAttribute('style', 'opacity: 1');\n        }\n    }\n    addHighLightRow(id: string) {\n        const tr: HTMLTableRowElement = document.querySelector(`tr[dataItem=\"${id}\"]`);\n        if (tr) {\n            tr.classList.add('selected-td');\n            tr.setAttribute('style', 'opacity: 1')\n        }\n    }\n    removeHighLightRow(id: string) {\n        const tr: HTMLTableRowElement = document.querySelector(`tr[dataItem=\"${id}\"]`);\n        if (tr) {\n            tr.classList.remove('selected-td');\n        }\n    }\n    reset() {\n        MarkTableManager.selection.clear();\n        MarkTableManager.disabledMarks.clear();\n    }\n}\nexport const markTableManager = new MarkTableManager()","import Tool from \"../util/tool\";\r\n\r\nexport { Polygon, Point as PolygonPoint };\r\ntype Point = { x: number, y: number };\r\n\r\nfunction pointDis(p1: Point, p2: Point): number {\r\n    return Math.hypot(p1.x - p2.x, p1.y - p2.y);\r\n}\r\n\r\nfunction pointSub(p1: Point, p2: Point): Point {\r\n    return { x: p1.x - p2.x, y: p1.y - p2.y };\r\n}\r\n\r\nfunction pointDot(p1: Point, p2: Point): number {\r\n    return p1.x * p2.x + p1.y * p2.y;\r\n}\r\n\r\nfunction pointCross(p1: Point, p2: Point): number {\r\n    return p1.x * p2.y - p2.x * p1.y;\r\n}\r\n\r\nfunction pointToLine(p: Point, p1: Point, p2: Point): number {\r\n    const pp1 = pointSub(p1, p);\r\n    const p1p2 = pointSub(p2, p1);\r\n    if (pointDot(pp1, p1p2) >= 0) {\r\n        return pointDis(p, p1);\r\n    }\r\n    const pp2 = pointSub(p2, p);\r\n    if (pointDot(pp2, p1p2) <= 0) {\r\n        return pointDis(p, p2);\r\n    }\r\n    return Math.abs(pointCross(pp1, pp2) / pointDis(p1, p2));\r\n}\r\n\r\nclass Transform {\r\n    a: number;\r\n    b: number;\r\n    c: number;\r\n    d: number;\r\n    e: number;\r\n    f: number;\r\n\r\n    constructor(a: number, b: number, c: number, d: number, e: number, f: number) {\r\n        this.a = a;\r\n        this.b = b;\r\n        this.c = c;\r\n        this.d = d;\r\n        this.e = e;\r\n        this.f = f;\r\n    }\r\n\r\n    applyToPoint(p: Point): Point {\r\n        const x = p.x;\r\n        const y = p.y;\r\n        return { x: this.a * x + this.c * y + this.e, y: this.b * x + this.d * y + this.f };\r\n    }\r\n\r\n    toString(): string {\r\n        return `matrix(${this.a},${this.b},${this.c},${this.d},${this.e},${this.f})`\r\n    }\r\n}\r\n\r\nfunction mergeTransform(m1: Transform, m2: Transform): Transform {\r\n    return new Transform(\r\n        m1.a * m2.a + m1.c * m2.b,\r\n        m1.b * m2.a + m1.d * m2.b,\r\n        m1.a * m2.c + m1.c * m2.d,\r\n        m1.b * m2.c + m1.d * m2.d,\r\n        m1.a * m2.e + m1.c * m2.f + m1.e,\r\n        m1.b * m2.e + m1.d * m2.f + m1.f\r\n    )\r\n}\r\n\r\nclass Polygon {\r\n    vertices: Point[] = [];\r\n    useBoundingBox: boolean = false;\r\n    svgWidth: number = 0;\r\n    svgHeight: number = 0;\r\n    yMax: number = -Infinity;\r\n    yMin: number = Infinity;\r\n    xMax: number = -Infinity;\r\n    xMin: number = Infinity;\r\n    closed: boolean = true;\r\n    length: number = 0;\r\n    massCenter: Point = { x: 0, y: 0 };\r\n\r\n    isConnected(p: Polygon): boolean {\r\n        const threshold = 1;\r\n        const fp1 = this.vertices[0];\r\n        const fp2 = p.vertices[0];\r\n        const lp1 = this.vertices[this.vertices.length - 1];\r\n        const lp2 = p.vertices[p.vertices.length - 1];\r\n        if (pointDis(fp1, fp2) < threshold) {\r\n            return true;\r\n        }\r\n        if (pointDis(fp1, lp2) < threshold) {\r\n            return true;\r\n        }\r\n        if (pointDis(lp1, fp2) < threshold) {\r\n            return true;\r\n        }\r\n        if (pointDis(lp1, lp2) < threshold) {\r\n            return true;\r\n        }\r\n        return false\r\n    }\r\n\r\n    parseNumber(element: HTMLElement, name: string, defaultValue: number, relative: number): number {\r\n        const s = element.getAttribute(name);\r\n        if (s) {\r\n            let index = s.indexOf(\"%\");\r\n            if (index != -1) {\r\n                return relative * Number(s.slice(0, index)) / 100;\r\n            }\r\n            index = s.indexOf(\"px\");\r\n            if (index != -1) {\r\n                return Number(s.slice(0, index));\r\n            }\r\n            return Number(s)\r\n        }\r\n        return defaultValue;\r\n    }\r\n\r\n    parseTransform(element: Element): Transform {\r\n        let result = new Transform(1, 0, 0, 1, 0, 0);\r\n        const transformAttr = element.getAttribute(\"transform\");\r\n        // return result;\r\n        if (!transformAttr) {\r\n            return result;\r\n        }\r\n        const transformStrs = transformAttr.split(\")\").filter(i => /[^\\s]/.test(i));\r\n\r\n        for (let i of transformStrs) {\r\n            let [type, argList] = i.trim().split(\"(\");\r\n            const args = argList.split(/[ ,]+/).map(i => Number(i));\r\n            if (type && type[0] == \",\") {\r\n                type = type.slice(1);\r\n            }\r\n            type = type.trim();\r\n            switch (type) {\r\n                case \"matrix\": {\r\n                    console.assert(args.length >= 6);\r\n                    result = mergeTransform(result, new Transform(\r\n                        args[0],\r\n                        args[1],\r\n                        args[2],\r\n                        args[3],\r\n                        args[4],\r\n                        args[5]\r\n                    ))\r\n                    break;\r\n                }\r\n                case \"translate\": {\r\n                    console.assert(args.length >= 2);\r\n                    result = mergeTransform(result, new Transform(1, 0, 0, 1, args[0], args[1]));\r\n                    break;\r\n                }\r\n                case \"rotate\": {\r\n                    console.assert(args.length >= 1);\r\n                    const angle = args[0] / 180 * Math.PI;\r\n                    let centerX = 0;\r\n                    let centerY = 0;\r\n                    if (args.length >= 3) {\r\n                        centerX = args[1];\r\n                        centerY = args[2];\r\n                    }\r\n                    const c = Math.cos(angle);\r\n                    const s = Math.sin(angle);\r\n                    result = mergeTransform(result, new Transform(\r\n                        c, s, -s, c,\r\n                        centerX * (1 - c) + centerY * s,\r\n                        - centerX * s + centerY * (1 - c)\r\n                    ));\r\n                    break;\r\n                }\r\n                case \"scale\": {\r\n                    console.assert(args.length >= 1);\r\n                    const scaleX = args[0];\r\n                    let scaleY = scaleX;\r\n                    if (args.length >= 2) {\r\n                        scaleY = args[1]\r\n                    }\r\n                    result = mergeTransform(result, new Transform(scaleX, 0, 0, scaleY, 0, 0));\r\n                    break;\r\n                }\r\n                case \"skewX\": {\r\n                    console.assert(args.length >= 1);\r\n                    const angle = args[0] / 180 * Math.PI;\r\n                    result = mergeTransform(result, new Transform(1, 0, Math.tan(angle), 1, 0, 0));\r\n                    break;\r\n                }\r\n                case \"skewY\": {\r\n                    console.assert(args.length >= 1);\r\n                    const angle = args[0] / 180 * Math.PI;\r\n                    result = mergeTransform(result, new Transform(1, Math.tan(angle), 0, 1, 0, 0));\r\n                    break;\r\n                }\r\n                default: {\r\n                    console.warn(\"not support this type of transform: \" + type);\r\n                    this.useBoundingBox = true;\r\n                    return result;\r\n                }\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\n    parseShape(element: HTMLElement) {\r\n        this.vertices = [];\r\n        switch (element.tagName) {\r\n            case \"rect\": {\r\n                const x = this.parseNumber(element, \"x\", 0, this.svgWidth);\r\n                const y = this.parseNumber(element, \"y\", 0, this.svgHeight);\r\n                const width = this.parseNumber(element, \"width\", 0, this.svgWidth);\r\n                const height = this.parseNumber(element, \"height\", 0, this.svgHeight);\r\n                this.vertices.push({ x: x, y: y });\r\n                this.vertices.push({ x: x + width, y: y });\r\n                this.vertices.push({ x: x + width, y: y + height });\r\n                this.vertices.push({ x: x, y: y + height });\r\n                break;\r\n            }\r\n            case \"circle\": {\r\n                const cx = this.parseNumber(element, \"cx\", 0, this.svgWidth);\r\n                const cy = this.parseNumber(element, \"cy\", 0, this.svgHeight);\r\n                const r = this.parseNumber(element, \"r\", 0, Math.sqrt(\r\n                    (this.svgHeight * this.svgHeight + this.svgWidth * this.svgWidth) / 2)\r\n                );\r\n                const numberSegs = Math.max(8, Math.min(40, Math.ceil(r)));\r\n                let angle = 0;\r\n                const angleInc = Math.PI * 2 / numberSegs;\r\n                for (let i = 0; i < numberSegs; i++) {\r\n                    this.vertices.push({ x: cx + r * Math.cos(angle), y: cy + r * Math.sin(angle) })\r\n                    angle += angleInc;\r\n                }\r\n                break;\r\n            }\r\n            case \"line\": {\r\n                this.closed = false;\r\n                const x1 = this.parseNumber(element, \"x1\", 0, this.svgWidth);\r\n                const y1 = this.parseNumber(element, \"y1\", 0, this.svgHeight);\r\n                const x2 = this.parseNumber(element, \"x2\", 0, this.svgWidth);\r\n                const y2 = this.parseNumber(element, \"y2\", 0, this.svgHeight);\r\n                this.vertices.push({ x: x1, y: y1 });\r\n                this.vertices.push({ x: x2, y: y2 });\r\n                break;\r\n            }\r\n            case \"path\": {\r\n                this.parsePath(element);\r\n                break;\r\n            }\r\n            default: {\r\n                this.useBoundingBox = true;\r\n                return;\r\n            }\r\n        }\r\n    }\r\n\r\n    getTransformFromChartContent(element: HTMLElement): Transform {\r\n        let transform = this.parseTransform(element);\r\n        let parent = element.parentElement;\r\n        while (parent && parent.id != \"chartContent\") {\r\n            transform = mergeTransform(this.parseTransform(parent), transform);\r\n            parent = parent.parentElement;\r\n        }\r\n        return transform;\r\n    }\r\n\r\n    parsePath(element: HTMLElement) {\r\n        const fill = element.getAttribute(\"fill\");\r\n        if (fill && fill.toLowerCase() === \"none\") {\r\n            this.closed = false;\r\n        }\r\n        const d = element.getAttribute(\"d\");\r\n        if (!d) {\r\n            console.error(\"not found d in path\")\r\n            this.useBoundingBox = true;\r\n            return;\r\n        }\r\n        const commandStrs = d.split(/(?=[A-Za-z])/).filter(i => /[^\\s]/.test(i));\r\n        let types: string[] = [];\r\n        let argLists: number[][] = [];\r\n        for (let command of commandStrs) {\r\n            types.push(command[0]);\r\n            argLists.push(command.slice(1).split(/[\\s,]+/).filter(i => !!i).map(i => Number(i)));\r\n        }\r\n        const numberCommands = commandStrs.length;\r\n\r\n        let lastPoint: Point = { x: 0, y: 0 };\r\n        let lastCV: Point = { x: 0, y: 0 };\r\n\r\n        for (let i = 0; i < numberCommands; i++) {\r\n            const type = types[i];\r\n            const args = argLists[i];\r\n            switch (type) {\r\n                case \"M\":\r\n                case \"m\": {\r\n                    if (i != 0) {\r\n                        console.error(\"not support multi parts in path\");\r\n                        this.useBoundingBox = true;\r\n                        return;\r\n                    }\r\n                    console.assert(args.length >= 2);\r\n                    lastPoint = { x: args[0], y: args[1] };\r\n                    this.vertices.push(lastPoint);\r\n                    break;\r\n                }\r\n                case \"l\":\r\n                    console.assert(args.length >= 2);\r\n                    args[0] += lastPoint.x;\r\n                    args[1] += lastPoint.y;\r\n                case \"L\": {\r\n                    console.assert(args.length >= 2);\r\n                    lastPoint = { x: args[0], y: args[1] };\r\n                    this.vertices.push(lastPoint);\r\n                    break;\r\n                }\r\n                case \"h\":\r\n                    console.assert(args.length >= 1);\r\n                    args[0] += lastPoint.x;\r\n                case \"H\":\r\n                    console.assert(args.length >= 1);\r\n                    lastPoint = { x: args[0], y: lastPoint.y }\r\n                    this.vertices.push(lastPoint);\r\n                    break;\r\n                case \"v\":\r\n                    console.assert(args.length >= 1);\r\n                    args[0] += lastPoint.y;\r\n                case \"V\":\r\n                    console.assert(args.length >= 1);\r\n                    lastPoint = { x: lastPoint.x, y: args[0] }\r\n                    this.vertices.push(lastPoint);\r\n                    break;\r\n                case \"a\":\r\n                    console.assert(args.length >= 7);\r\n                    args[5] += lastPoint.x;\r\n                    args[6] += lastPoint.y;\r\n                case \"A\": {\r\n                    console.assert(args.length >= 7);\r\n                    args[0] = Math.abs(args[0]);\r\n                    args[1] = Math.abs(args[1]);\r\n                    const theta = args[2] / 180 * Math.PI;\r\n                    const cosTheta = Math.cos(theta);\r\n                    const sinTheta = Math.sin(theta);\r\n                    const transform = mergeTransform(\r\n                        new Transform(1 / args[0], 0, 0, 1 / args[1], 0, 0),\r\n                        new Transform(cosTheta, -sinTheta, sinTheta, cosTheta, 0, 0),\r\n                    )\r\n                    const invTransform = mergeTransform(\r\n                        new Transform(cosTheta, sinTheta, -sinTheta, cosTheta, lastPoint.x, lastPoint.y),\r\n                        new Transform(args[0], 0, 0, args[1], 0, 0),\r\n                    )\r\n                    const endPoint = transform.applyToPoint({ x: args[5] - lastPoint.x, y: args[6] - lastPoint.y });\r\n                    const chordLen = Math.hypot(endPoint.x, endPoint.y);\r\n                    const radius = Math.max(chordLen / 2, 1);\r\n                    const dis = Math.sqrt(radius * radius - (chordLen / 2) * (chordLen / 2));\r\n                    const rotated: Point = { x: -endPoint.y / chordLen * dis, y: endPoint.x / chordLen * dis };\r\n                    let center: Point;\r\n                    if (args[3] + args[4] == 1) {\r\n                        center = { x: endPoint.x / 2 + rotated.x, y: endPoint.y / 2 + rotated.y };\r\n                    } else {\r\n                        center = { x: endPoint.x / 2 - rotated.x, y: endPoint.y / 2 - rotated.y };\r\n                    } let t1 = Math.atan2(-center.y, -center.x);\r\n                    const t2 = Math.atan2(endPoint.y - center.y, endPoint.x - center.x);\r\n                    let angle = t1;\r\n                    let sweepAngle = t2 - t1;\r\n                    if (args[4] == 0) {\r\n                        if (sweepAngle > 0) {\r\n                            sweepAngle -= 2 * Math.PI;\r\n                        }\r\n                    } else {\r\n                        if (sweepAngle < 0) {\r\n                            sweepAngle += 2 * Math.PI;\r\n                        }\r\n                    }\r\n                    const numberSegs = Math.min(40, Math.ceil((args[0] + args[1]) * Math.abs(sweepAngle) / 4 / Math.PI));\r\n                    const angleInc = sweepAngle / numberSegs;\r\n                    for (let i = 0; i < numberSegs; i++) {\r\n                        angle += angleInc;\r\n                        this.vertices.push(invTransform.applyToPoint({\r\n                            x: center.x + radius * Math.cos(angle),\r\n                            y: center.y + radius * Math.sin(angle)\r\n                        }))\r\n                    }\r\n\r\n                    lastPoint = { x: args[5], y: args[6] };\r\n                    break;\r\n                }\r\n                case \"q\":\r\n                    console.assert(args.length >= 4);\r\n                    args[0] += lastPoint.x;\r\n                    args[1] += lastPoint.y;\r\n                    args[2] += lastPoint.x;\r\n                    args[3] += lastPoint.y;\r\n                case \"Q\": {\r\n                    console.assert(args.length >= 4);\r\n                    const numberSegs = 8;\r\n                    for (let i = 1; i <= numberSegs; i++) {\r\n                        const t = i / numberSegs;\r\n                        const c0 = (1 - t) * (1 - t);\r\n                        const c1 = 2 * t * (1 - t);\r\n                        const c2 = t * t;\r\n                        this.vertices.push({\r\n                            x: lastPoint.x * c0 + args[0] * c1 + args[2] * c2,\r\n                            y: lastPoint.y * c0 + args[1] * c1 + args[3] * c2\r\n                        })\r\n                    }\r\n                    lastPoint = { x: args[2], y: args[3] }\r\n                    lastCV = { x: args[0], y: args[1] };\r\n                    // TODO: add adaptive sampling\r\n                    break;\r\n                }\r\n                case \"t\":\r\n                    console.assert(args.length >= 2);\r\n                    args[0] += lastPoint.x;\r\n                    args[1] += lastPoint.y;\r\n                case \"T\": {\r\n                    console.assert(args.length >= 2);\r\n                    if (i == 0 || !(\"tTqQ\".includes(types[i - 1]))) {\r\n                        lastCV = lastPoint;\r\n                    } else {\r\n                        lastCV = {\r\n                            x: lastPoint.x * 2 - lastCV.x,\r\n                            y: lastPoint.y * 2 - lastCV.y\r\n                        }\r\n                    }\r\n                    const numberSegs = 8;\r\n                    for (let i = 1; i <= numberSegs; i++) {\r\n                        const t = i / numberSegs;\r\n                        const c0 = (1 - t) * (1 - t);\r\n                        const c1 = 2 * t * (1 - t);\r\n                        const c2 = t * t;\r\n                        this.vertices.push({\r\n                            x: lastPoint.x * c0 + lastCV.x * c1 + args[0] * c2,\r\n                            y: lastPoint.y * c0 + lastCV.y * c1 + args[1] * c2\r\n                        })\r\n                    }\r\n                    lastPoint = { x: args[0], y: args[1] }\r\n                    // TODO: add adaptive sampling\r\n                    break\r\n                }\r\n                case \"c\":\r\n                    console.assert(args.length >= 6);\r\n                    args[0] += lastPoint.x;\r\n                    args[1] += lastPoint.y;\r\n                    args[2] += lastPoint.x;\r\n                    args[3] += lastPoint.y;\r\n                    args[4] += lastPoint.x;\r\n                    args[5] += lastPoint.y;\r\n                case \"C\": {\r\n                    console.assert(args.length >= 6);\r\n                    const numberSegs = 12;\r\n                    for (let i = 1; i <= numberSegs; i++) {\r\n                        const t = i / numberSegs;\r\n                        const c0 = (1 - t) * (1 - t) * (1 - t);\r\n                        const c1 = 3 * (1 - t) * (1 - t) * t;\r\n                        const c2 = 3 * (1 - t) * t * t;\r\n                        const c3 = t * t * t;\r\n                        this.vertices.push({\r\n                            x: lastPoint.x * c0 + args[0] * c1 + args[2] * c2 + args[4] * c3,\r\n                            y: lastPoint.y * c0 + args[1] * c1 + args[3] * c2 + args[5] * c3\r\n                        })\r\n                    }\r\n                    lastCV = { x: args[2], y: args[3] };\r\n                    lastPoint = { x: args[4], y: args[5] };\r\n                    // TODO: add adaptive sampling\r\n                    break;\r\n                }\r\n                case \"s\":\r\n                    console.assert(args.length >= 6);\r\n                    args[0] += lastPoint.x;\r\n                    args[1] += lastPoint.y;\r\n                    args[2] += lastPoint.x;\r\n                    args[3] += lastPoint.y;\r\n                case \"S\": {\r\n                    console.assert(args.length >= 6);\r\n                    if (i == 0 || !(\"cCsS\".includes(types[i - 1]))) {\r\n                        lastCV = lastPoint;\r\n                    } else {\r\n                        lastCV = {\r\n                            x: lastPoint.x * 2 - lastCV.x,\r\n                            y: lastPoint.y * 2 - lastCV.y\r\n                        }\r\n                    }\r\n                    const numberSegs = 12;\r\n                    for (let i = 1; i <= numberSegs; i++) {\r\n                        const t = i / numberSegs;\r\n                        const c0 = (1 - t) * (1 - t) * (1 - t);\r\n                        const c1 = 3 * (1 - t) * (1 - t) * t;\r\n                        const c2 = 3 * (1 - t) * t * t;\r\n                        const c3 = t * t * t;\r\n                        this.vertices.push({\r\n                            x: lastPoint.x * c0 + lastCV.x * c1 + args[0] * c2 + args[2] * c3,\r\n                            y: lastPoint.y * c0 + lastCV.y * c1 + args[1] * c2 + args[3] * c3\r\n                        })\r\n                    }\r\n                    lastCV = { x: args[0], y: args[1] }\r\n                    lastPoint = { x: args[2], y: args[3] }\r\n                    // TODO: add adaptive sampling\r\n                    break;\r\n                }\r\n                case \"z\":\r\n                case \"Z\": {\r\n                    this.closed = true;\r\n                    return;\r\n                }\r\n                default: {\r\n                    console.warn(\"not support command \" + type);\r\n                    if (type.toLowerCase() === type) {\r\n                        args[args.length - 2] += lastPoint.x;\r\n                        args[args.length - 1] += lastPoint.y;\r\n                    }\r\n                    lastPoint = { x: args[args.length - 2], y: args[args.length - 1] };\r\n                    this.vertices.push(lastPoint);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    applyTransform(transform: Transform) {\r\n        const vertices = this.vertices;\r\n        const l = vertices.length;\r\n\r\n        for (let i = 0; i < l; i++) {\r\n            vertices[i] = transform.applyToPoint(vertices[i]);\r\n        }\r\n    }\r\n\r\n    lineIntersect(y: number): number[] {\r\n        const vertices = this.vertices;\r\n        const l = vertices.length - 1;\r\n        const result: number[] = [];\r\n        for (let i = 0; i < l; i++) {\r\n            const y1 = vertices[i].y;\r\n            const y2 = vertices[i + 1].y;\r\n            if ((y1 >= y && y2 >= y) || (y1 < y && y2 < y)) {\r\n                continue;\r\n            }\r\n            const x1 = vertices[i].x;\r\n            const x2 = vertices[i + 1].x;\r\n            const t = (y - y1) / (y2 - y1);\r\n            result.push(x1 + (x2 - x1) * t);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    fromBoundingBox(element: HTMLElement) {\r\n        this.vertices = [];\r\n        let svg = document.getElementById(\"visChart\");\r\n        const boundingBox = element.getBoundingClientRect();\r\n        const topLeft = Tool.screenToSvgCoords(svg, boundingBox.left, boundingBox.top) as Point;\r\n        const bottomRight = Tool.screenToSvgCoords(svg, boundingBox.right, boundingBox.bottom) as Point;\r\n        this.vertices.push(topLeft);\r\n        this.vertices.push({ x: topLeft.x, y: bottomRight.y });\r\n        this.vertices.push(bottomRight);\r\n        this.vertices.push({ x: bottomRight.x, y: topLeft.y });\r\n        this.vertices.push(topLeft);\r\n\r\n        this.yMax = bottomRight.y;\r\n        this.yMin = topLeft.y;\r\n        this.xMax = bottomRight.x;\r\n        this.xMin = topLeft.x;\r\n\r\n        console.assert(this.yMax >= this.yMin);\r\n\r\n        this.calcLength();\r\n    }\r\n\r\n    fromElement(element: HTMLElement) {\r\n        // not support viewBox\r\n\r\n        this.vertices = [];\r\n        // this.element = element.cloneNode() as Element;\r\n\r\n        let transform = this.parseTransform(element);\r\n        let parent = element.parentElement;\r\n        while (parent && parent.tagName == \"g\") {\r\n            transform = mergeTransform(this.parseTransform(parent), transform);\r\n            parent = parent.parentElement;\r\n        }\r\n        while (parent && parent.tagName != \"svg\") {\r\n            parent = parent.parentElement;\r\n        }\r\n        if (parent) {\r\n            let svgDomRect = parent.getBoundingClientRect();\r\n            this.svgWidth = svgDomRect.width;\r\n            this.svgHeight = svgDomRect.height;\r\n        } else {\r\n            console.error(\"svg not found\")\r\n        }\r\n        // this.transform = transform;\r\n        if (!this.useBoundingBox) {\r\n            this.parseShape(element);\r\n        }\r\n        if (!this.useBoundingBox) {\r\n            this.applyTransform(transform);\r\n            this.yMax = -Infinity;\r\n            this.yMin = Infinity;\r\n            this.xMax = -Infinity;\r\n            this.xMin = Infinity;\r\n            for (let i of this.vertices) {\r\n                this.yMax = Math.max(this.yMax, i.y);\r\n                this.yMin = Math.min(this.yMin, i.y);\r\n                this.xMax = Math.max(this.xMax, i.x);\r\n                this.xMin = Math.min(this.xMin, i.x);\r\n            }\r\n            if (this.closed) {\r\n                this.vertices.push(this.vertices[0]);\r\n            }\r\n            this.calcLength();\r\n        } else {\r\n            this.fromBoundingBox(element);\r\n        }\r\n        // this.resample(5);\r\n    }\r\n\r\n    fromVertices(vertices: Point[]) {\r\n        this.vertices = vertices;\r\n        this.yMax = -Infinity;\r\n        this.yMin = Infinity;\r\n        this.xMax = -Infinity;\r\n        this.xMin = Infinity;\r\n        for (let i of this.vertices) {\r\n            this.yMax = Math.max(this.yMax, i.y);\r\n            this.yMin = Math.min(this.yMin, i.y);\r\n            this.xMax = Math.max(this.xMax, i.x);\r\n            this.xMin = Math.min(this.xMin, i.x);\r\n        }\r\n        if (vertices[0].x != vertices[vertices.length - 1].x || vertices[0].y != vertices[vertices.length - 1].y) {\r\n            vertices.push(vertices[0]);\r\n        }\r\n        this.calcLength();\r\n    }\r\n\r\n    calcLength() {\r\n        this.length = 0;\r\n        const vertices = this.vertices;\r\n        const l = vertices.length;\r\n        for (let i = 0; i < l - 1; i++) {\r\n            let edgeLen = pointDis(vertices[i], vertices[i + 1]);\r\n            this.massCenter.x += vertices[i].x * edgeLen;\r\n            this.massCenter.y += vertices[i].y * edgeLen;\r\n            this.massCenter.x += vertices[i + 1].x * edgeLen;\r\n            this.massCenter.y += vertices[i + 1].y * edgeLen;\r\n            this.length += edgeLen;\r\n        }\r\n        this.massCenter.x /= this.length * 2;\r\n        this.massCenter.y /= this.length * 2;\r\n    }\r\n\r\n    resample(numberPoints: number): Point[] {\r\n        const result: Point[] = [];\r\n        // console.warn(this.length);\r\n\r\n        const vertices = this.vertices;\r\n        const l = vertices.length;\r\n        let currentPoint: Point = this.vertices[0];\r\n        let index = 1;\r\n\r\n        function findNextPoint(dis: number) {\r\n            let edgeLen: number;\r\n            while ((edgeLen = pointDis(currentPoint, vertices[index])) < dis) {\r\n                dis -= edgeLen;\r\n                currentPoint = vertices[index];\r\n                index++;\r\n            }\r\n            console.assert(edgeLen > 0);\r\n            const t = dis / edgeLen;\r\n            currentPoint = {\r\n                x: currentPoint.x * (1 - t) + vertices[index].x * t,\r\n                y: currentPoint.y * (1 - t) + vertices[index].y * t,\r\n            };\r\n        }\r\n\r\n        let segLen = this.length / numberPoints;\r\n        findNextPoint(segLen / 2);\r\n        for (let i = 0; i < numberPoints - 1; i++) {\r\n            result.push(currentPoint);\r\n            findNextPoint(segLen);\r\n        }\r\n        result.push(currentPoint);\r\n\r\n        this.vertices = result;\r\n        return result;\r\n    }\r\n\r\n    distance(p: Point): number {\r\n        let result = Infinity;\r\n        let vertices = this.vertices;\r\n        let l = vertices.length;\r\n        for (let i = 0; i < l - 1; i++) {\r\n            result = Math.min(result, pointToLine(p, vertices[i], vertices[i + 1]));\r\n        }\r\n        // const svg = document.getElementById(\"visChart\");\r\n        // let circle = document.createElementNS(\"http://www.w3.org/2000/svg\", \"circle\");\r\n        // circle.setAttribute(\"cx\", p.x.toString());\r\n        // circle.setAttribute(\"cy\", p.y.toString());\r\n        // circle.setAttribute(\"r\", result.toString());\r\n        // circle.setAttribute(\"opacity\", \".1\");\r\n        // svg.appendChild(circle);\r\n        return result;\r\n    }\r\n\r\n    display(): SVGElement {\r\n        const svgns = \"http://www.w3.org/2000/svg\";\r\n        const group = document.createElementNS(svgns, \"g\");\r\n        const path = document.createElementNS(svgns, \"path\");\r\n        const commands: string[] = [];\r\n        let isFirst = true;\r\n        for (let i of this.vertices) {\r\n            if (isFirst) {\r\n                isFirst = false;\r\n                commands.push(\"M\");\r\n            } else {\r\n                commands.push(\"L\");\r\n            }\r\n            commands.push(`${i.x} ${i.y}`);\r\n        }\r\n        // commands.push(\"z\");\r\n        path.setAttribute(\"d\", commands.join(\"\"));\r\n\r\n        path.setAttribute(\"fill\", \"none\");\r\n        path.setAttribute(\"stroke-width\", \"2\");\r\n        // path.setAttribute(\"fill\", `#${Math.floor(Math.random() * 255).toString(16)}${Math.floor(Math.random() * 255).toString(16)}${Math.floor(Math.random() * 255).toString(16)}`);\r\n        path.setAttribute(\"opacity\", \"1\");\r\n        path.setAttribute(\"stroke\", \"red\");\r\n        group.appendChild(path);\r\n\r\n        const circle = document.createElementNS(svgns, \"circle\");\r\n        circle.setAttribute(\"cx\", this.massCenter.x.toString());\r\n        circle.setAttribute(\"cy\", this.massCenter.y.toString());\r\n        circle.setAttribute(\"r\", \"4\");\r\n        group.appendChild(circle);\r\n\r\n        return group;\r\n    }\r\n\r\n}\r\n","const MAPPING = new Map([\n    [\"jan\", 1],\n    [\"feb\", 2],\n    [\"mar\", 3],\n    [\"apr\", 4],\n    [\"may\", 5],\n    [\"jun\", 6],\n    [\"jul\", 7],\n    [\"aug\", 8],\n    [\"sep\", 9],\n    [\"oct\", 10],\n    [\"nov\", 11],\n    [\"dec\", 12],\n    [\"january\", 1],\n    [\"february\", 2],\n    [\"march\", 3],\n    [\"april\", 4],\n    [\"may\", 5],\n    [\"june\", 6],\n    [\"july\", 7],\n    [\"august\", 8],\n    [\"september\", 9],\n    [\"october\", 10],\n    [\"november\", 11],\n    [\"december\", 12],\n    [\"mon\", 1],\n    [\"tue\", 2],\n    [\"wed\", 3],\n    [\"thu\", 4],\n    [\"fri\", 5],\n    [\"sat\", 6],\n    [\"sun\", 7],\n    [\"monday\", 1],\n    [\"tuesday\", 2],\n    [\"wednesday\", 3],\n    [\"thursday\", 4],\n    [\"friday\", 5],\n    [\"saturday\", 6],\n    [\"sunday\", 7],\n])\n\nexport const sortStrings = (value: string[]) => {\n    if (value.every(i => MAPPING.has(i.toLowerCase()))) {\n        value.sort((a: string, b: string) => {\n            return MAPPING.get(a) - MAPPING.get(b);\n        })\n    } else {\n        return value.sort();\n    }\n}","import { ICoord } from \"../util/ds\";\nimport { KfTreeGroup, KfTreeNode, addSelection, firstFrame, previewFrame } from \"./kfTree\";\nimport \"../assets/style/suggestBox.scss\";\nimport Tool from \"../util/tool\";\nimport Lottie from \"lottie-web\";\nimport { canis } from \"./core/canisGenerator\";\nimport { Player, player } from \"../components/player\";\nimport { KfColume, KfGroup, KfRow, kfTrack } from \"./kfTrack\";\nimport { MarkSelector } from \"./markSelector\";\nexport class SuggestPanel {\n  static PADDING: number = 6;\n  static SHOWN_NUM: number = 2;\n  static MENU_WIDTH: number = 20;\n\n  public kfWidth: number = 240;\n  public kfHeight: number = 178;\n  public boxWidth: number = 240;\n  public menuWidth: number = 0;\n  public preMenuWidth: number = 0;\n  public numShown: number = SuggestPanel.SHOWN_NUM;\n  public container: SVGElement;\n  public itemcontainer: SVGElement;\n  public suggestMenu: SuggestMenu;\n  public selectedMarks: string[] = [];\n  /**\n   * createSuggestPanel\n   */\n  public createSuggestPanel(allNextKf: string[][], height: number, selectedMarks: string[]) {\n    suggestPanel.removeSuggestPanel();\n    this.kfHeight = height;\n    this.selectedMarks = selectedMarks;\n    if (typeof this.container === \"undefined\") {\n      this.container = document.createElementNS(\n        \"http://www.w3.org/2000/svg\",\n        \"g\"\n      );\n    }\n    const aniPreview = document.createElement('div');\n    aniPreview.setAttribute('id', 'aniPreview');\n    aniPreview.style.position = 'fixed';\n    document.getElementById('kfContainer').appendChild(aniPreview);\n\n    if (allNextKf.length <= 0) {\n      this.numShown = allNextKf.length;\n      if (typeof this.suggestMenu !== \"undefined\") {\n        this.container.innerHTML = '';\n        this.suggestMenu = undefined;\n      }\n    } else {\n      this.numShown = SuggestPanel.SHOWN_NUM;\n      this.suggestMenu = new SuggestMenu();\n      this.suggestMenu.createSuggestMenu(\n        { x: this.boxWidth, y: height / 2 + SuggestPanel.PADDING },\n        allNextKf,\n        this\n      );\n      this.container.appendChild(this.suggestMenu.container);\n    }\n    const bg: SVGRectElement = document.createElementNS(\n      \"http://www.w3.org/2000/svg\",\n      \"rect\"\n    );\n    bg.setAttributeNS(null, \"width\", `${this.boxWidth}`);\n    bg.setAttributeNS(null, \"height\", `${(height + SuggestPanel.PADDING) * 2}`);\n    bg.setAttributeNS(null, \"fill\", \"#c9caca\");\n    bg.setAttributeNS(null, \"stroke\", \"#666666\");\n    bg.setAttributeNS(null, \"rx\", \"5\");\n    this.container.appendChild(bg);\n\n    this.itemcontainer = document.createElementNS(\n      \"http://www.w3.org/2000/svg\",\n      \"g\"\n    );\n    this.container.appendChild(this.itemcontainer);\n    if (allNextKf.length === 1) {\n      const item = this.createSuggestItem(allNextKf[0], allNextKf);\n      item.setAttributeNS(\n        null,\n        \"transform\",\n        `translate(0, ${0 * (height + 2 * SuggestPanel.PADDING)})`\n      );\n      bg.setAttributeNS(null, \"height\", `${(height + SuggestPanel.PADDING) * 1}`);\n      this.itemcontainer.appendChild(item);\n    } else if (allNextKf.length > 1) {\n      bg.setAttributeNS(null, \"height\", `${(height + SuggestPanel.PADDING) * 2}`);\n      for (let i = 0; i < this.numShown; i++) {\n        const item = this.createSuggestItem(allNextKf[i], allNextKf);\n        item.setAttributeNS(\n          null,\n          \"transform\",\n          `translate(0, ${i * (height + 2 * SuggestPanel.PADDING)})`\n        );\n        this.itemcontainer.appendChild(item);\n      }\n    }\n    const popupLayer: SVGElement = document.createElementNS(\n      \"http://www.w3.org/2000/svg\",\n      \"g\"\n    );\n    popupLayer.setAttributeNS(null, \"id\", \"popUpLayer\");\n    if (allNextKf.length > 0) {\n      popupLayer.appendChild(this.container);\n    }\n    const recommendList = document.getElementById(\"recommendList\");\n    recommendList.appendChild(popupLayer);\n    // return popupLayer;\n  }\n  public removeSuggestPanel() {\n    const recommendList = document.getElementById(\"recommendList\");\n    const aniPreview = document.getElementById('aniPreview');\n    if (aniPreview) {\n      aniPreview.parentNode.removeChild(aniPreview);\n    }\n    if (recommendList) {\n      recommendList.innerHTML = \"\";\n    }\n    if (typeof this.container !== \"undefined\") {\n      this.container.innerHTML = \"\";\n    }\n    const popupLayer = document.getElementById(\"popUpLayer\");\n    if (popupLayer) {\n      popupLayer.removeChild(this.container);\n    }\n  }\n  public createSuggestItem(nextKf: string[], allNextKf: string[][]) {\n    const container = document.createElementNS(\n      \"http://www.w3.org/2000/svg\",\n      \"g\"\n    );\n    container.classList.add(\"clickable-component\");\n    const itemImg = new Itemimg();\n    const img = itemImg.createItemimg(nextKf, this.selectedMarks);\n    const bg: SVGRectElement = document.createElementNS(\n      \"http://www.w3.org/2000/svg\",\n      \"rect\"\n    );\n    bg.classList.add(\"ease-fade\", \"hide-ele\");\n    bg.setAttributeNS(null, \"width\", `${this.kfWidth}`);\n    bg.setAttributeNS(null, \"height\", `${this.kfHeight}`);\n    bg.setAttributeNS(null, \"fill\", \"#b6b6b6\");\n    bg.setAttributeNS(null, \"rx\", \"5\");\n    container.appendChild(bg);\n    container.appendChild(itemImg.container);\n    \n    const animation = previewFrame(nextKf)\n    //animation list\n    const videoBox = document.getElementById('videoContainer').getBoundingClientRect();\n    const videoPreview = document.createElement('div');\n    videoPreview.style.width = `${videoBox.width}px`;\n    videoPreview.style.height = `${videoBox.height}px`;\n    videoPreview.style.position = 'absolute';\n    document.getElementById('videoContainer').appendChild(videoPreview);\n    const videoPreviewAnimation = Lottie.loadAnimation({\n      container: videoPreview,\n      renderer: 'svg',\n      loop: true,\n      autoplay: false,\n      animationData: animation,\n    });\n\n\n    container.onmouseout = () => {\n      bg.classList.add(\"hide-ele\");\n      allNextKf.forEach((item: string[]) => {\n        item.forEach((mark: string) => {\n          if (!nextKf.includes(mark)) {\n            const markEle = document.getElementById(mark);\n            if (markEle) {\n              markEle.setAttributeNS(null, \"opacity\", \"1\");\n            }\n          }\n        });\n      });\n      videoPreviewAnimation.stop();\n\n    };\n    container.onmouseover = () => {\n      bg.classList.remove(\"hide-ele\");\n      allNextKf.forEach((item: string[]) => {\n        item.forEach((mark: string) => {\n          if (!nextKf.includes(mark)) {\n            const markEle = document.getElementById(mark);\n            if (markEle) {\n              markEle.setAttributeNS(null, \"opacity\", \"0.15\");\n            }\n          }\n        });\n      });\n      player.stopAnimation();\n      videoPreviewAnimation.goToAndPlay((player.totalTime - firstFrame.children[0][0].property.duration) / 20, true);\n    };\n    container.onclick = () => {\n      setTimeout(() => {\n        addSelection(nextKf);\n      }, 1);\n    };\n    return container;\n  }\n}\nexport class SuggestMenu {\n  static MENU_WIDTH: number = 20;\n  static MENU_RX: number = 5;\n  static MENU_ICON_COLOR: string = \"#e5e5e5\";\n  static MENU_ICON_HIGHLIGHT_COLOR: string = \"#494949\";\n  static BTN_SIZE: number = 20;\n  static PADDING: number = 2;\n  static DOT_SIZE: number = 10;\n  static UP_DIRECT: string = \"up\";\n  static DOWN_DIRECT: string = \"down\";\n\n  public container: SVGGElement;\n  public parentSuggestPanel: SuggestPanel;\n  public numPages: number = 0;\n  public pageIdx: number = 0;\n  public dots: SVGCircleElement[] = [];\n  public nextKf: string[][] = [];\n  public createSuggestMenu(\n    startCoord: ICoord,\n    nextKf: string[][],\n    SuggestPanel: SuggestPanel\n  ) {\n    this.parentSuggestPanel = SuggestPanel;\n    this.nextKf = nextKf;\n    if (nextKf.length === 1) {\n      this.numPages = 1;\n    } else if (nextKf.length > 1) {\n      this.numPages = Math.ceil(nextKf.length / 2);\n    }\n\n    const menuHeight: number =\n      (SuggestMenu.BTN_SIZE + 2 * SuggestMenu.PADDING) * 2 +\n      this.numPages * (SuggestMenu.DOT_SIZE + 2 * SuggestMenu.PADDING);\n    this.container = document.createElementNS(\n      \"http://www.w3.org/2000/svg\",\n      \"g\"\n    );\n    this.container.setAttributeNS(\n      null,\n      \"transform\",\n      `translate(${startCoord.x - SuggestMenu.MENU_RX}, ${startCoord.y - menuHeight / 2\n      })`\n    );\n    const bg: SVGRectElement = document.createElementNS(\n      \"http://www.w3.org/2000/svg\",\n      \"rect\"\n    );\n    bg.setAttributeNS(\n      null,\n      \"width\",\n      `${SuggestMenu.MENU_RX + SuggestMenu.MENU_WIDTH}`\n    );\n    bg.setAttributeNS(null, \"height\", `${menuHeight}`);\n    bg.setAttributeNS(null, \"fill\", \"#676767\");\n    bg.setAttributeNS(null, \"rx\", `${SuggestMenu.MENU_RX}`);\n    this.container.appendChild(bg);\n\n    const upArrow: SVGPolygonElement = this.createArrowBtn(\n      SuggestMenu.UP_DIRECT,\n      menuHeight\n    );\n    this.container.appendChild(upArrow);\n    const downArrow: SVGPolygonElement = this.createArrowBtn(\n      SuggestMenu.DOWN_DIRECT,\n      menuHeight\n    );\n    this.container.appendChild(downArrow);\n\n    this.dots = [];\n    for (let i = 0; i < this.numPages; i++) {\n      const tmpDot: SVGCircleElement = this.createDot(i);\n      this.container.appendChild(tmpDot);\n      this.dots.push(tmpDot);\n    }\n  }\n\n  public createArrowBtn(direct: string, menuHeight: number): SVGPolygonElement {\n    let arrow: SVGPolygonElement = document.createElementNS(\n      \"http://www.w3.org/2000/svg\",\n      \"polygon\"\n    );\n    arrow.classList.add(\"clickable-component\", \"normal-btn\");\n    switch (direct) {\n      case SuggestMenu.UP_DIRECT:\n        arrow.setAttributeNS(\n          null,\n          \"points\",\n          \"9.76,2.41 16.46,17.59 9.76,14.68 3.12,17.59\"\n        );\n        arrow.setAttributeNS(\n          null,\n          \"transform\",\n          `translate(${SuggestMenu.MENU_RX}, ${SuggestMenu.PADDING})`\n        );\n        arrow.onclick = () => {\n          if (this.pageIdx > 0) {\n            this.pageIdx--;\n            this.arrowClickListener();\n          }\n        };\n        break;\n      case SuggestMenu.DOWN_DIRECT:\n        arrow.setAttributeNS(\n          null,\n          \"points\",\n          \"3.12,2.41 9.76,5.32 16.46,2.41 9.76,17.59\"\n        );\n        arrow.setAttributeNS(\n          null,\n          \"transform\",\n          `translate(${SuggestMenu.MENU_RX}, ${menuHeight - SuggestMenu.BTN_SIZE - SuggestMenu.PADDING\n          })`\n        );\n        arrow.onclick = () => {\n          if (this.pageIdx < this.numPages - 1) {\n            this.pageIdx++;\n            this.arrowClickListener();\n          }\n        };\n        break;\n    }\n    return arrow;\n  }\n\n  public arrowClickListener() {\n    this.parentSuggestPanel.itemcontainer.innerHTML = \"\";\n    const aniPreview = document.getElementById(\"aniPreview\");\n    aniPreview.innerHTML = \"\";\n    for (let i = this.pageIdx * 2; i < (this.pageIdx + 1) * 2; i++) {\n      if (i < this.nextKf.length) {\n        const index: number = i % 2;\n        const item = this.parentSuggestPanel.createSuggestItem(this.nextKf[i], this.nextKf);\n        item.setAttributeNS(\n          null,\n          \"transform\",\n          `translate(0, ${index *\n          (this.parentSuggestPanel.kfHeight + 2 * SuggestPanel.PADDING)\n          })`\n        );\n        this.parentSuggestPanel.itemcontainer.appendChild(item);\n      }\n      //\n    }\n    this.dots.forEach((dot: SVGCircleElement, idx: number) => {\n      if (idx === this.pageIdx) {\n        dot.classList.add(\"highlight-btn\");\n      } else {\n        dot.classList.remove(\"highlight-btn\");\n      }\n    });\n  }\n\n  public createDot(idx: number): SVGCircleElement {\n    let dot: SVGCircleElement = document.createElementNS(\n      \"http://www.w3.org/2000/svg\",\n      \"circle\"\n    );\n    dot.classList.add(\"clickable-component\", \"normal-btn\");\n    if (idx === 0) {\n      dot.classList.add(\"clickable-component\", \"highlight-btn\");\n    }\n    dot.setAttributeNS(null, \"fill\", SuggestMenu.MENU_ICON_COLOR);\n    dot.setAttributeNS(null, \"r\", `${SuggestMenu.BTN_SIZE / 2 - 6}`);\n    dot.setAttributeNS(\n      null,\n      \"cx\",\n      `${SuggestMenu.MENU_RX + SuggestMenu.BTN_SIZE / 2}`\n    );\n    dot.setAttributeNS(\n      null,\n      \"cy\",\n      `${SuggestMenu.BTN_SIZE +\n      SuggestMenu.PADDING * 3 +\n      SuggestMenu.DOT_SIZE / 2 +\n      (SuggestMenu.DOT_SIZE + 2 * SuggestMenu.PADDING) * idx\n      }`\n    );\n    dot.onclick = () => {\n      this.pageIdx = idx;\n      this.arrowClickListener();\n    };\n    return dot;\n  }\n}\nexport class Itemimg {\n  static KF_WIDTH: number = 220;\n  public container: SVGElement;\n  public createItemimg(nextKf: string[], selectedMarks: string[]) {\n    this.container = document.createElementNS(\n      \"http://www.w3.org/2000/svg\",\n      \"g\"\n    );\n    const bg = this.drawItemBg(\n      suggestPanel.kfHeight - 2 * SuggestPanel.PADDING\n    );\n    bg.setAttributeNS(\n      null,\n      \"transform\",\n      `translate(5, ${SuggestPanel.PADDING})`\n    );\n\n    const thumbnail = this.drawItemContent(nextKf, selectedMarks, suggestPanel.kfHeight - 2 * SuggestPanel.PADDING);\n    this.container.appendChild(bg);\n    this.container.appendChild(thumbnail);\n  }\n  public drawItemBg(height: number) {\n    const bg: SVGRectElement = document.createElementNS(\n      \"http://www.w3.org/2000/svg\",\n      \"rect\"\n    );\n    bg.setAttributeNS(null, \"width\", `${Itemimg.KF_WIDTH}`);\n    bg.setAttributeNS(null, \"height\", `${height}`);\n    bg.setAttributeNS(null, \"fill\", \"#fff\");\n    return bg;\n  }\n  public drawItemContent(nextKf: string[], selectedMarks: string[], height: number) {\n    const svg = document.getElementById(\"visChart\");\n    const svgClone = svg.cloneNode(true) as HTMLElement;\n    svgClone.setAttributeNS(null, \"width\", `${Itemimg.KF_WIDTH}`);\n    svgClone.setAttributeNS(null, \"height\", `${height}`);\n    Array.from(svgClone.getElementsByTagName(\"g\")).forEach(\n      (g: SVGElement) => {\n        if (g.id.startsWith(\"chartContent\")) {\n          g.removeAttributeNS(null, \"transform\");\n        }\n      }\n    );\n    Array.from(svgClone.getElementsByClassName(\"mark\")).forEach(\n      (mark: SVGElement) => {\n        if (nextKf.includes(mark.id)) {\n          mark.setAttributeNS(null, \"opacity\", \"1\");\n          if (mark.tagName === \"text\") {\n            mark.setAttributeNS(null, \"font-weight\", \"bolder\");\n            mark.setAttributeNS(null, \"font-size\", \"20\");\n          }\n          if (mark.classList.contains(\"axis-tick\")) {\n            mark.setAttributeNS(null, \"stroke-width\", \"5\");\n          }\n\n        } else if (selectedMarks.includes(mark.id)) {\n          mark.setAttributeNS(null, \"opacity\", \"0.3\");\n        } else {\n          mark.setAttributeNS(null, \"opacity\", \"0\");\n        }\n      }\n    );\n    Array.from(svgClone.getElementsByTagName(\"*\")).forEach(\n      (element: SVGElement) => {\n        if (element.id.startsWith(\"__mark\")) {\n          element.setAttributeNS(null, \"opacity\", \"0\");\n        }\n      }\n    );\n\n    const imgSrc: string = Tool.svg2url(svgClone);\n    const chartThumbnail: SVGImageElement = document.createElementNS(\n      \"http://www.w3.org/2000/svg\",\n      \"image\"\n    );\n    chartThumbnail.setAttributeNS(null, \"href\", imgSrc);\n    chartThumbnail.setAttributeNS(null, \"width\", `${Itemimg.KF_WIDTH}`);\n    chartThumbnail.setAttributeNS(null, \"height\", `${height}`);\n    chartThumbnail.classList.add(\"thumbnail\");\n\n    return chartThumbnail;\n  }\n}\nexport const suggestPanel = new SuggestPanel();\n","export const RESET_STATE = 'RESET_STATE'\r\nexport type RESET_STATE = typeof RESET_STATE\r\n\r\nexport const UPDATE_LOADING_STATUS = 'UPDATE_LOADING_STATUS'\r\nexport type UPDATE_LOADING_STATUS = typeof UPDATE_LOADING_STATUS\r\n\r\nexport const LOAD_CHARTS = 'LOAD_CHARTS'\r\nexport type LOAD_CHARTS = typeof LOAD_CHARTS\r\n\r\nexport const LOAD_CANIS_SPEC = 'LOAD_CANIS_SPEC'\r\nexport type LOAD_CANIS_SPEC = typeof LOAD_CANIS_SPEC\r\n\r\nexport const TOGGLE_SUGGESTION = 'TOGGLE_SUGGESTION'\r\nexport type TOGGLE_SUGGESTION = typeof TOGGLE_SUGGESTION\r\n\r\nexport const UPDATE_SELECTION = 'UPDATE_SELECTION'\r\nexport type UPDATE_SELECTION = typeof UPDATE_SELECTION\r\n\r\nexport const UPDATE_DATA_TABLE = 'UPDATE_DATA_TABLE'\r\nexport type UPDATE_DATA_TABLE = typeof UPDATE_DATA_TABLE\r\n\r\nexport const UPDATE_DATA_SORT = 'UPDATE_DATA_SORT'\r\nexport type UPDATE_DATA_SORT = typeof UPDATE_DATA_SORT\r\n\r\nexport const UPDATE_DATA_ORDER = 'UPDATE_DATA_ORDER'\r\nexport type UPDATE_DATA_ORDER = typeof UPDATE_DATA_ORDER\r\n\r\nexport const UPDATE_LOTTIE = 'UPDATE_LOTTIE'\r\nexport type UPDATE_LOTTIE = typeof UPDATE_LOTTIE\r\n\r\nexport const UPDATE_LOTTIE_SPEC = 'UPDATE_LOTTIE_SPEC'\r\nexport type UPDATE_LOTTIE_SPEC = typeof UPDATE_LOTTIE_SPEC\r\n\r\nexport const UPDATE_MOUSE_MOVING = 'UPDATE_MOUSE_MOVING'\r\nexport type UPDATE_MOUSE_MOVING = typeof UPDATE_MOUSE_MOVING\r\n\r\nexport const UPDATE_KEYFRAME_TRACKS = 'UPDATE_KEYFRAME_TRACKS'\r\nexport type UPDATE_KEYFRAME_TRACKS = typeof UPDATE_KEYFRAME_TRACKS\r\n\r\nexport const UPDATE_STATIC_KEYFRAME = 'UPDATE_STATIC_KEYFRAME'\r\nexport type UPDATE_STATIC_KEYFRAME = typeof UPDATE_STATIC_KEYFRAME\r\n\r\nexport const ACTIVATE_PLUS_BTN = 'ACTIVATE_PLUS_BTN'\r\nexport type ACTIVATE_PLUS_BTN = typeof ACTIVATE_PLUS_BTN\r\n\r\nexport const UPDATE_KEYFRAME_CONTAINER_SLIDER = 'UPDATE_KEYFRAME_CONTAINER_SLIDER'\r\nexport type UPDATE_KEYFRAME_CONTAINER_SLIDER = typeof UPDATE_KEYFRAME_CONTAINER_SLIDER\r\n\r\nexport const UPDATE_SPEC_CHARTS = 'UPDATE_SPEC_CHARTS'\r\nexport type UPDATE_SPEC_CHARTS = typeof UPDATE_SPEC_CHARTS\r\n\r\nexport const UPDATE_SPEC_ANIMATIONS = 'UPDATE_SPEC_ANIMATIONS'\r\nexport type UPDATE_SPEC_ANIMATIONS = typeof UPDATE_SPEC_ANIMATIONS\r\n\r\nexport const UPDATE_DELAY_BETWEEN_KF = 'UPDATE_DELAY_BETWEEN_KF'\r\nexport type UPDATE_DELAY_BETWEEN_KF = typeof UPDATE_DELAY_BETWEEN_KF\r\n\r\nexport const REMOVE_DELAY_BETWEEN_KF = 'REMOVE_DELAY_BETWEEN_KF'\r\nexport type REMOVE_DELAY_BETWEEN_KF = typeof REMOVE_DELAY_BETWEEN_KF\r\n\r\nexport const UPDATE_KF_TIMING_REF = 'UPDATE_KF_TIMING_REF'\r\nexport type UPDATE_KF_TIMING_REF = typeof UPDATE_KF_TIMING_REF\r\n\r\nexport const UPDATE_TIMING_REF_DELAY_KF = 'UPDATE_TIMING_REF_DELAY_KF'\r\nexport type UPDATE_TIMING_REF_DELAY_KF = typeof UPDATE_TIMING_REF_DELAY_KF\r\n\r\nexport const REMOVE_LOWESTGROUP = 'REMOVE_LOWESTGROUP'\r\nexport type REMOVE_LOWESTGROUP = typeof REMOVE_LOWESTGROUP\r\n\r\nexport const UPDATE_DELAY_BETWEEN_GROUP = 'UPDATE_DELAY_BETWEEN_GROUP'\r\nexport type UPDATE_DELAY_BETWEEN_GROUP = typeof UPDATE_DELAY_BETWEEN_GROUP\r\n\r\nexport const REMOVE_DELAY_BETWEEN_GROUP = 'REMOVE_DELAY_BETWEEN_GROUP'\r\nexport type REMOVE_DELAY_BETWEEN_GROUP = typeof REMOVE_DELAY_BETWEEN_GROUP\r\n\r\nexport const MERGE_GROUP = 'MERGE_GROUP'\r\nexport type MERGE_GROUP = typeof MERGE_GROUP\r\n\r\nexport const UPDATE_TIMEING_REF_BETWEEN_GROUP = 'UPDATE_TIMEING_REF_BETWEEN_GROUP'\r\nexport type UPDATE_TIMEING_REF_BETWEEN_GROUP = typeof UPDATE_TIMEING_REF_BETWEEN_GROUP\r\n\r\nexport const UPDATE_DELAY_TIMING_REF_BETWEEN_GROUP = 'UPDATE_DELAY_TIMING_REF_BETWEEN_GROUP'\r\nexport type UPDATE_DELAY_TIMING_REF_BETWEEN_GROUP = typeof UPDATE_DELAY_TIMING_REF_BETWEEN_GROUP\r\n\r\nexport const REMOVE_DELAY_UPDATE_TIMING_REF_GROUP = 'REMOVE_DELAY_UPDATE_TIMING_REF_GROUP'\r\nexport type REMOVE_DELAY_UPDATE_TIMING_REF_GROUP = typeof REMOVE_DELAY_UPDATE_TIMING_REF_GROUP\r\n\r\nexport const UPDATE_DURATION = 'UPDATE_DURATION'\r\nexport type UPDATE_DURATION = typeof UPDATE_DURATION\r\n\r\nexport const UPDATE_ANI_OFFSET = 'UPDATE_ANI_OFFSET'\r\nexport type UPDATE_ANI_OFFSET = typeof UPDATE_ANI_OFFSET\r\n\r\nexport const UPDATE_SUGGESTION_PATH = 'UPDATE_SUGGESTION_PATH'\r\nexport type UPDATE_SUGGESTION_PATH = typeof UPDATE_SUGGESTION_PATH\r\n\r\nexport const UPDATE_SPEC_GROUPING = 'UPDATE_SPEC_GROUPING'\r\nexport type UPDATE_SPEC_GROUPING = typeof UPDATE_SPEC_GROUPING\r\n\r\nexport const REMOVE_CREATE_MULTI_ANI = 'REMOVE_CREATE_MULTI_ANI'\r\nexport type REMOVE_CREATE_MULTI_ANI = typeof REMOVE_CREATE_MULTI_ANI\r\n\r\nexport const SPLIT_CREATE_MULTI_ANI = 'SPLIT_CREATE_MULTI_ANI'\r\nexport type SPLIT_CREATE_MULTI_ANI = typeof SPLIT_CREATE_MULTI_ANI\r\n\r\nexport const SPLIT_CREATE_ONE_ANI = 'SPLIT_CREATE_ONE_ANI'\r\nexport type SPLIT_CREATE_ONE_ANI = typeof SPLIT_CREATE_ONE_ANI\r\n\r\nexport const APPEND_SPEC_GROUPING = 'APPEND_SPEC_GROUPING'\r\nexport type APPEND_SPEC_GROUPING = typeof APPEND_SPEC_GROUPING\r\n\r\n/*** dragging animation ***/\r\nexport const UPDATE_ANI_ALIGN_WITH_ANI = 'UPDATE_ANI_ALIGN_WITH_ANI'\r\nexport type UPDATE_ANI_ALIGN_WITH_ANI = typeof UPDATE_ANI_ALIGN_WITH_ANI\r\n\r\nexport const UPDATE_ANI_ALIGN_AFTER_ANI = 'UPDATE_ANI_ALIGN_AFTER_ANI'\r\nexport type UPDATE_ANI_ALIGN_AFTER_ANI = typeof UPDATE_ANI_ALIGN_AFTER_ANI\r\n\r\nexport const UPDATE_ANI_ALIGN_AFTER_ANI_WITH_DELAY = 'UPDATE_ANI_ALIGN_AFTER_ANI_WITH_DELAY'\r\nexport type UPDATE_ANI_ALIGN_AFTER_ANI_WITH_DELAY = typeof UPDATE_ANI_ALIGN_AFTER_ANI_WITH_DELAY\r\n\r\nexport const UPDATE_ANI_ALIGN_WITH_KF = 'UPDATE_ANI_ALIGN_WITH_KF'\r\nexport type UPDATE_ANI_ALIGN_WITH_KF = typeof UPDATE_ANI_ALIGN_WITH_KF\r\n\r\nexport const UPDATE_ANI_ALIGN_AFTER_KF = 'UPDATE_ANI_ALIGN_AFTER_KF'\r\nexport type UPDATE_ANI_ALIGN_AFTER_KF = typeof UPDATE_ANI_ALIGN_AFTER_KF\r\n/*** end dragging animation ***/\r\n\r\nexport const UPDATE_ALIGN_MERGE = 'UPDATE_ALIGN_MERGE'\r\nexport type UPDATE_ALIGN_MERGE = typeof UPDATE_ALIGN_MERGE\r\n\r\nexport const UPDATE_EFFECT_TYPE = 'UPDATE_EFFECT_TYPE'\r\nexport type UPDATE_EFFECT_TYPE = typeof UPDATE_EFFECT_TYPE\r\n\r\nexport const UPDATE_EFFECT_EASING = 'UPDATE_EFFECT_EASING'\r\nexport type UPDATE_EFFECT_EASING = typeof UPDATE_EFFECT_EASING\r\n\r\nexport const KEYFRAME_ZOOM_LEVEL = 'KEYFRAME_ZOOM_LEVEL'\r\nexport type KEYFRAME_ZOOM_LEVEL = typeof KEYFRAME_ZOOM_LEVEL\r\n\r\nexport const UDPATE_GROUPING_SORT = 'UDPATE_GROUPING_SORT'\r\nexport type UDPATE_GROUPING_SORT = typeof UDPATE_GROUPING_SORT","import Canis, { ActionSpec, ChartSpec, TimingSpec, Animation} from '../../canis/moduleIdx';\r\nimport { state } from '../state'\r\n\r\nexport let canis = new Canis();\r\n\r\nexport interface IChartSpec {\r\n    id?: string\r\n    type?: string\r\n    source: string\r\n}\r\n\r\nexport interface ISort {\r\n    field?: string\r\n    order: string | string[]\r\n}\r\n\r\nexport interface IGrouping {\r\n    reference?: string\r\n    delay?: number\r\n    groupBy: string\r\n    sort?: ISort\r\n    grouping?: IGrouping\r\n}\r\n\r\nexport interface IOffset {\r\n    field: string\r\n    minOffset: number\r\n}\r\n\r\nexport interface IDuration {\r\n    field: string\r\n    minDuration: number\r\n}\r\n\r\nexport interface IAction {\r\n    reference?: string\r\n    offset?: number | IOffset\r\n    type: string\r\n    easing?: string\r\n    duration?: number | IDuration\r\n    chartIdx?: number\r\n}\r\n\r\nexport interface IAlign {\r\n    target: string\r\n    type: string\r\n    merge: boolean\r\n}\r\n\r\nexport interface IAnimationSpec {\r\n    id?: string\r\n    reference?: string\r\n    align?: IAlign\r\n    offset?: number | IOffset\r\n    selector: string\r\n    grouping?: IGrouping\r\n    effects: IAction[]\r\n    chartIdx?: string\r\n}\r\n\r\nexport interface ICanisSpec {\r\n    charts: IChartSpec[]\r\n    animations: IAnimationSpec[]\r\n}\r\n\r\nexport default class CanisGenerator {\r\n    public static generateChartSpec(charts: string[]): IChartSpec[] {\r\n        let chartSpecs: IChartSpec[] = [];\r\n        for (let i = 0; i < charts.length; i++) {\r\n            //judge the content of charts[i], url or chart content\r\n            const chartType: string = charts[i].indexOf('<svg') >= 0 ? ChartSpec.CHART_CONTENT : ChartSpec.CHART_URL;\r\n            const chartSpec: IChartSpec = {\r\n                source: charts[i],\r\n                type: chartType\r\n            }\r\n            chartSpecs.push(chartSpec);\r\n            // this.canisSpec.charts.push(chartSpec);\r\n        }\r\n        return chartSpecs;\r\n    }\r\n\r\n    public generateAnimationSpec(): void {\r\n\r\n    }\r\n\r\n    public static validate(spec: ICanisSpec): boolean {\r\n        if (spec.charts.length === 0) {\r\n            console.warn('there are no input charts!');\r\n            return false;\r\n        }\r\n        if (spec.animations.length > 0) {\r\n            //remove empty animations\r\n            let i = spec.animations.length;\r\n            while (i--) {\r\n                const tmpAni: IAnimationSpec = spec.animations[i];\r\n                if (tmpAni.selector === '' || tmpAni.selector === '#') {\r\n                    spec.animations.splice(i, 1);\r\n                }\r\n            }\r\n            //check animation order, alignTo animation must follow the target\r\n            for (let j = 0, len = spec.animations.length; j < len; j++) {\r\n                const tmpAni: IAnimationSpec = spec.animations[j];\r\n                if (typeof tmpAni.id !== 'undefined') {\r\n                    let removedAni: IAnimationSpec[] = [];\r\n                    // let emptyAlignTo: boolean = true;\r\n                    // let noAlign: boolean = true;\r\n                    for (let z = 0, len2 = len; z < len2; z++) {\r\n                        const tmpAni2: IAnimationSpec = spec.animations[z];\r\n\r\n                        if (typeof tmpAni2.align !== 'undefined') {\r\n                            // noAlign = false;\r\n                            if (tmpAni2.align.target === tmpAni.id) {\r\n                                // emptyAlignTo = false;\r\n                                removedAni.push(spec.animations.splice(z, 1)[0]);\r\n                                z--;\r\n                                len2--;\r\n                            }\r\n                        }\r\n                    }\r\n                    // if (emptyAlignTo && !noAlign) {\r\n                    //     console.warn('no aligned aniunit');\r\n                    //     return false;\r\n                    // }\r\n                    //put the start with ahead of start after\r\n                    removedAni.sort((a: IAnimationSpec, b: IAnimationSpec) => {\r\n                        if (a.reference === TimingSpec.timingRef.previousEnd && b.reference === TimingSpec.timingRef.previousStart) {\r\n                            return 1;\r\n                        } else if (a.reference === TimingSpec.timingRef.previousStart && b.reference === TimingSpec.timingRef.previousEnd) {\r\n                            return -1;\r\n                        }\r\n                        return 0;\r\n                    })\r\n                    const insertIdx: number = spec.animations.indexOf(tmpAni);\r\n                    spec.animations.splice(insertIdx + 1, 0, ...removedAni);\r\n                }\r\n            }\r\n\r\n            for (let j = 0, len = spec.animations.length; j < len; j++) {\r\n                const tmpAni: IAnimationSpec = spec.animations[j];\r\n                if (typeof tmpAni.align !== 'undefined') {\r\n                    let emptyAlignTo: boolean = true;\r\n                    for (let z = 0; z < len; z++) {\r\n                        const tmpAni2: IAnimationSpec = spec.animations[z];\r\n                        if (tmpAni.align.target === tmpAni2.id) {\r\n                            emptyAlignTo = false;\r\n                        }\r\n                    }\r\n                    if (emptyAlignTo) {\r\n                        console.warn('no aligned aniunit');\r\n                        return false;\r\n                    }\r\n                }\r\n            }\r\n\r\n            //check aniId\r\n            for (let j = 0, len = spec.animations.length; j < len; j++) {\r\n                const tmpAni: IAnimationSpec = spec.animations[j];\r\n                const checkAniId: string = `${tmpAni.chartIdx}_${tmpAni.selector}`;\r\n                const flag: boolean = tmpAni.id === checkAniId;\r\n                if (!flag) {\r\n                    for (let z = 0; z < len; z++) {\r\n                        const tmpAni2: IAnimationSpec = spec.animations[z];\r\n                        if (typeof tmpAni2.align !== 'undefined') {\r\n                            if (tmpAni2.align.target === tmpAni.id) {\r\n                                spec.animations[z].align.target = checkAniId;\r\n                            }\r\n                        }\r\n                    }\r\n                    spec.animations[j].id = checkAniId;\r\n                }\r\n            }\r\n        }\r\n        if (spec.animations.length === 0) {\r\n            const animationSpec: IAnimationSpec = {\r\n                selector: '.mark',\r\n                // effects: [{ type: ActionSpec.actionTypes.fade, duration: 300 }]\r\n                effects: [{ type: spec.charts.length === 1 ? ActionSpec.actionTypes.fade : ActionSpec.actionTypes.transition, duration: 300 }]\r\n            }\r\n            spec.animations.push(animationSpec);\r\n        }\r\n        if (spec.charts.length > 1) {\r\n            //reset the chart idx in animations\r\n            for (let i = 0, len = spec.animations.length; i < len; i++) {\r\n                delete spec.animations[i].chartIdx;\r\n                for (let j = 0, len2 = spec.animations[i].effects.length; j < len2; j++) {\r\n                    delete spec.animations[i].effects[j].chartIdx;\r\n                }\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    public static resetSpec(spec: ICanisSpec): void {\r\n        spec.animations = [];\r\n    }\r\n\r\n    public static updateKfDelay(groupingSpec: IGrouping, delay: number): number {\r\n        if (typeof groupingSpec.grouping !== 'undefined') {\r\n            return this.updateKfDelay(groupingSpec.grouping, delay);\r\n        } else {\r\n            let oriDelay = groupingSpec.delay;\r\n            groupingSpec.delay = delay;\r\n            return oriDelay;\r\n        }\r\n    }\r\n\r\n    public static removeKfDelay(groupingSpec: IGrouping): void {\r\n        if (typeof groupingSpec.grouping !== 'undefined') {\r\n            this.removeKfDelay(groupingSpec.grouping);\r\n        } else {\r\n            groupingSpec.delay = 0;\r\n        }\r\n    }\r\n\r\n    public static updateKfRef(groupingSpec: IGrouping, ref: string): void {\r\n        if (typeof groupingSpec.grouping !== 'undefined') {\r\n            this.updateKfRef(groupingSpec.grouping, ref);\r\n        } else {\r\n            groupingSpec.reference = ref;\r\n        }\r\n    }\r\n\r\n    public static updateKfRefAndDelay(groupingSpec: IGrouping, ref: string, delay: number): void {\r\n        if (typeof groupingSpec.grouping !== 'undefined') {\r\n            this.updateKfRefAndDelay(groupingSpec.grouping, ref, delay);\r\n        } else {\r\n            groupingSpec.reference = ref;\r\n            groupingSpec.delay = delay;\r\n        }\r\n    }\r\n\r\n    public static removeLowestGrouping(groupingSpec: IGrouping): void {\r\n        if (typeof groupingSpec.grouping !== 'undefined') {\r\n            if (typeof groupingSpec.grouping.grouping !== 'undefined') {\r\n                this.removeLowestGrouping(groupingSpec.grouping);\r\n            } else {\r\n                delete groupingSpec.grouping;\r\n            }\r\n        }\r\n    }\r\n\r\n    public static updateGroupTiming(groupingSpec: IGrouping, groupRef: string, ref: string): void {\r\n        if (groupingSpec.groupBy === groupRef) {\r\n            groupingSpec.reference = ref;\r\n        } else {\r\n            if (typeof groupingSpec.grouping !== 'undefined') {\r\n                this.updateGroupTiming(groupingSpec.grouping, groupRef, ref);\r\n            }\r\n        }\r\n    }\r\n\r\n    public static updateGroupDelay(groupingSpec: IGrouping, groupRef: string, delay: number): void {\r\n        if (groupingSpec.groupBy === groupRef) {\r\n            groupingSpec.delay = delay;\r\n        } else {\r\n            if (typeof groupingSpec.grouping !== 'undefined') {\r\n                this.updateGroupDelay(groupingSpec.grouping, groupRef, delay);\r\n            }\r\n        }\r\n    }\r\n\r\n    public static updateGroupDelayTiming(groupingSpec: IGrouping, groupRef: string, delay: number, ref: string): void {\r\n        if (groupingSpec.groupBy === groupRef) {\r\n            groupingSpec.delay = delay;\r\n            groupingSpec.reference = ref;\r\n        } else {\r\n            if (typeof groupingSpec.grouping !== 'undefined') {\r\n                this.updateGroupDelayTiming(groupingSpec.grouping, groupRef, delay, ref);\r\n            }\r\n        }\r\n    }\r\n\r\n    public static removeGroupDelay(groupingSpec: IGrouping, groupRef: string): void {\r\n        if (groupingSpec.groupBy === groupRef) {\r\n            delete groupingSpec.delay;\r\n        } else {\r\n            if (typeof groupingSpec.grouping !== 'undefined') {\r\n                this.removeGroupDelay(groupingSpec.grouping, groupRef);\r\n            }\r\n        }\r\n    }\r\n\r\n    public static removeGroupDelayUpdateTiming(groupingSpec: IGrouping, groupRef: string, ref: string): void {\r\n        if (groupingSpec.groupBy === groupRef) {\r\n            delete groupingSpec.delay;\r\n            groupingSpec.reference = ref;\r\n        } else {\r\n            if (typeof groupingSpec.grouping !== 'undefined') {\r\n                this.removeGroupDelayUpdateTiming(groupingSpec.grouping, groupRef, ref);\r\n            }\r\n        }\r\n    }\r\n\r\n    public static mergeGroup(groupingSpec: IGrouping, groupRef: string, parentGrouping?: IGrouping): IGrouping {\r\n        if (groupingSpec.groupBy === groupRef) {\r\n            if (typeof groupingSpec.grouping !== 'undefined') {\r\n                return groupingSpec.grouping;\r\n            } else {\r\n                // delete parentGrouping.grouping;\r\n                return undefined;\r\n            }\r\n        } else {\r\n            if (typeof groupingSpec.grouping !== 'undefined') {\r\n                groupingSpec.grouping = this.mergeGroup(groupingSpec.grouping, groupRef, groupingSpec);\r\n                return groupingSpec;\r\n            }\r\n        }\r\n    }\r\n\r\n    public static updateDuration(actionSpec: IAction, duration: number): void {\r\n        //TODO: consider data binding\r\n        if (typeof actionSpec.duration === 'number') {\r\n            actionSpec.duration = duration;\r\n        }\r\n    }\r\n\r\n    public static updateEffectType(actionSpec: IAction, type: string): void {\r\n        actionSpec.type = type;\r\n    }\r\n\r\n    public static updateEffectEasing(actionSpec: IAction, easing: string): void {\r\n        actionSpec.easing = easing;\r\n    }\r\n\r\n    public static updateAniOffset(ani: IAnimationSpec, offset: number): void {\r\n        ani.offset = offset;\r\n    }\r\n\r\n    public static updateStaticSelector(ani: IAnimationSpec, staticMarks: string[]): void {\r\n        let currentSelectedMarks: string[] = [];\r\n        if (ani.selector === '.mark') {\r\n            Animation.markClass.forEach((clsName: string, mId: string) => {\r\n                if (!staticMarks.includes(mId)) {\r\n                    currentSelectedMarks.push(`#${mId}`);\r\n                }\r\n            })\r\n        } else {\r\n            ani.selector.split(', ').forEach((s: string) => {\r\n                const mId: string = s.substring(1);\r\n                if (!staticMarks.includes(mId)) {\r\n                    currentSelectedMarks.push(`#${mId}`);\r\n                }\r\n            });\r\n        }\r\n        ani.selector = currentSelectedMarks.join(', ');\r\n    }\r\n\r\n    public static updateGrouping(parent: IAnimationSpec | IGrouping, attrComb: string[], attrValueSort?: string[][]) {\r\n        if (typeof parent.grouping !== 'undefined') {\r\n            parent.grouping.groupBy = attrComb[0];\r\n        } else {\r\n            parent.grouping = { groupBy: attrComb[0] };\r\n        }\r\n        if (typeof attrValueSort !== 'undefined') {\r\n            parent.grouping.sort = {\r\n                order: attrValueSort[0]\r\n            }\r\n            attrValueSort.splice(0, 1);\r\n        }\r\n        attrComb.splice(0, 1);\r\n        if (attrComb.length > 0) {\r\n            this.updateGrouping(parent.grouping, attrComb, attrValueSort);\r\n        }\r\n    }\r\n\r\n    public static createGrouping(parent: IAnimationSpec | IGrouping, attrComb: string[], attrValueSort?: string[][]) {\r\n        parent.grouping = { groupBy: attrComb[0], reference: TimingSpec.timingRef.previousEnd };\r\n        if (typeof attrValueSort !== 'undefined') {\r\n            parent.grouping.sort = {\r\n                order: attrValueSort[0]\r\n            }\r\n            attrValueSort.splice(0, 1);\r\n        }\r\n        attrComb.splice(0, 1);\r\n        if (attrComb.length > 0) {\r\n            this.createGrouping(parent.grouping, attrComb, attrValueSort);\r\n        }\r\n    }\r\n\r\n    public static appendGrouping(parent: IAnimationSpec | IGrouping, attrComb: string[], attrValueSort?: string[][]) {\r\n        if (typeof parent.grouping !== 'undefined') {\r\n            this.appendGrouping(parent.grouping, attrComb, attrValueSort);\r\n        } else {\r\n            this.createGrouping(parent, attrComb, attrValueSort);\r\n        }\r\n    }\r\n\r\n    public static removeMarksFromSelector(ani: IAnimationSpec, targetMarks: string[]) {\r\n        let currentMarks: string[] = ani.selector.split(', ');\r\n        let filteredMarks: string[] = [];\r\n        currentMarks.forEach((mSelector: string) => {\r\n            if (!targetMarks.includes(mSelector)) {\r\n                filteredMarks.push(mSelector);\r\n            }\r\n        })\r\n        ani.selector = filteredMarks.join(', ');\r\n    }\r\n\r\n    public static updateMerge(ani: IAnimationSpec, merge: boolean) {\r\n        ani.align.merge = merge;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param id : aniId used in align\r\n     */\r\n    public static findMergedAlignAnis(id: string): [string, string[]] {\r\n        let alignWithAni: string, alignToAnis: string[] = [];\r\n        state.spec.animations.forEach((a: IAnimationSpec) => {\r\n            if (a.id === id) {\r\n                alignWithAni = a.selector;\r\n            }\r\n            if (typeof a.align !== 'undefined') {\r\n                if (a.align.type === Animation.alignTarget.withEle && a.align.merge && a.align.target === id) {\r\n                    alignToAnis.push(a.selector);\r\n                }\r\n            }\r\n        })\r\n        return [alignWithAni, alignToAnis];\r\n    }\r\n\r\n    public static updateGroupingSort(a: IAnimationSpec, groupRef: string, order: string[]): boolean {\r\n        let flag: boolean = true;\r\n        let updated: boolean = false;\r\n        let tmpGrouping: IGrouping = a.grouping;\r\n        while (flag) {\r\n            if (typeof tmpGrouping !== 'undefined') {\r\n                if (tmpGrouping.groupBy === groupRef) {\r\n                    tmpGrouping.sort = {\r\n                        order: order\r\n                    }\r\n                    updated = true;\r\n                    flag = false;\r\n                } else if (typeof tmpGrouping.grouping !== 'undefined') {\r\n                    tmpGrouping = tmpGrouping.grouping;\r\n                } else {\r\n                    flag = false;\r\n                }\r\n            }\r\n        }\r\n        return updated;\r\n    }\r\n\r\n    public static fetchGroupingSort(aniId: string, groupRef: string): string[] {\r\n        const animations: IAnimationSpec[] = state.spec.animations;\r\n        for (let i = 0, len = animations.length; i < len; i++) {\r\n            const a: IAnimationSpec = animations[i];\r\n            if (`${a.chartIdx}_${a.selector}` === aniId) {\r\n                let flag: boolean = true;\r\n                let tmpGrouping: IGrouping = a.grouping;\r\n                while (flag) {\r\n                    if (typeof tmpGrouping !== 'undefined') {\r\n                        if (tmpGrouping.groupBy === groupRef) {\r\n                            return <string[]>tmpGrouping.sort.order;\r\n                        } else if (typeof tmpGrouping.grouping !== 'undefined') {\r\n                            tmpGrouping = tmpGrouping.grouping;\r\n                        } else {\r\n                            flag = false;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return [];\r\n    }\r\n}","import Tool from '../../util/tool';\r\nimport Util from './util';\r\nimport { IDataItem, IPath, IKeyframe } from './ds';\r\nimport KfGroup from '../../components/widgets/kfGroup';\r\nimport { ChartSpec } from '../../canis/moduleIdx';\r\n\r\nexport default class Suggest {\r\n    static NUMERIC_CAT_ATTRS: string[] = ['Year', 'year', 'Month', 'month', 'Day', 'day'];\r\n    static allPaths: IPath[] = [];\r\n\r\n    \r\n    /**\r\n     * find attributes with different values in the given mark arrays\r\n     * @param markIdArr1 \r\n     * @param markIdArr2 \r\n     * @param dataEncode \r\n     */\r\n    public static findAttrWithDiffValue(markIdArr1: string[], markIdArr2: string[], dataEncode: boolean): string[] {\r\n        let attrDiffValues: string[] = [];\r\n        const dataAttrArr: string[] = dataEncode ? Util.dataAttrs : Util.nonDataAttrs;\r\n        const dataTable: Map<string, IDataItem> = dataEncode ? Util.filteredDataTable : Util.nonDataTable;\r\n        dataAttrArr.forEach((aName: string) => {\r\n            if (Util.attrType[aName] === Util.CATEGORICAL_ATTR) {\r\n                let valueRecord1: Set<string> = new Set(), valueRecord2: Set<string> = new Set();\r\n                markIdArr1.forEach((mId: string) => {\r\n                    valueRecord1.add(`${dataTable.get(mId)[aName]}`);\r\n                })\r\n                markIdArr2.forEach((mId: string) => {\r\n                    valueRecord2.add(`${dataTable.get(mId)[aName]}`);\r\n                })\r\n                if (!Tool.identicalArrays([...valueRecord1], [...valueRecord2])) {\r\n                    attrDiffValues.push(aName);\r\n                }\r\n            }\r\n        })\r\n\r\n        return attrDiffValues;\r\n    }\r\n\r\n    public static removeEmptyCell(firstKfMarks: string[], attrToSec: string[], sameAttrs: string[], diffAttrs: string[], dataEncode: boolean): string[] {\r\n        const tmpMarkRecord: string[] = [];\r\n        const dataTable: Map<string, IDataItem> = dataEncode ? Util.filteredDataTable : Util.nonDataTable;\r\n        dataTable.forEach((d: IDataItem, mId: string) => {\r\n            let flag: boolean = true;\r\n            sameAttrs.forEach((aName: string) => {\r\n                if (d[aName] !== dataTable.get(firstKfMarks[0])[aName]) {\r\n                    flag = false;\r\n                }\r\n            })\r\n            if (flag) {\r\n                tmpMarkRecord.push(mId);\r\n            }\r\n        })\r\n        if (Tool.identicalArrays(firstKfMarks, tmpMarkRecord)) {//remove same attrs from attrToSecs\r\n            diffAttrs.forEach((aName: string) => {\r\n                if (attrToSec.includes(aName)) {\r\n                    attrToSec.splice(attrToSec.indexOf(aName), 1);\r\n                }\r\n            })\r\n        }\r\n        return attrToSec;\r\n    }\r\n\r\n    /**\r\n     * find the same and different attributes of the given marks\r\n     * @param markIdArr \r\n     * @param dataEncode \r\n     */\r\n    public static findSameDiffAttrs(markIdArr: string[], dataEncode: boolean): [string[], string[]] {\r\n        let sameAttrs: string[] = [], diffAttrs: string[] = [];\r\n        const dataAttrArr: string[] = dataEncode ? Util.dataAttrs : Util.nonDataAttrs;\r\n        const dataTable: Map<string, IDataItem> = dataEncode ? Util.filteredDataTable : Util.nonDataTable;\r\n        dataAttrArr.forEach((aName: string) => {\r\n            if (Util.attrType[aName] === Util.CATEGORICAL_ATTR) {\r\n                let flag: boolean = true;\r\n                let firstValue: string | number = dataTable.get(markIdArr[0])[aName];\r\n                for (let i = 1, len = markIdArr.length; i < len; i++) {\r\n                    if (dataTable.get(markIdArr[i])[aName] !== firstValue) {\r\n                        flag = false;\r\n                        break;\r\n                    }\r\n                }\r\n                if (flag) {\r\n                    sameAttrs.push(aName);\r\n                } else {\r\n                    diffAttrs.push(aName);\r\n                }\r\n            }\r\n        })\r\n        return [sameAttrs, diffAttrs];\r\n    }\r\n\r\n    /**\r\n     * filter the attribute names according to the effectiveness ranking of visual channels\r\n     * @param attrArr \r\n     */\r\n    // public static filterAttrs(attrArr: string[]): string[] {\r\n    //     let filteredAttrs: string[] = [];\r\n    //     let typeRecorder: string = '';\r\n    //     Util.EFFECTIVENESS_RANKING.forEach((channel: string) => {\r\n    //         attrArr.forEach((aName: string) => {\r\n    //             const tmpAttrChannel: string = ChartSpec.chartUnderstanding[aName];\r\n    //             if (tmpAttrChannel === channel && (tmpAttrChannel === typeRecorder || typeRecorder === '')) {\r\n    //                 filteredAttrs.push(aName);\r\n    //                 typeRecorder = tmpAttrChannel;\r\n    //             }\r\n    //         })\r\n    //     })\r\n    //     return filteredAttrs;\r\n    // }\r\n\r\n    /**\r\n     * order the attribute names according to the effectiveness ranking of visual channels \r\n     * @param attrArr \r\n     */\r\n    public static sortAttrs(attrArr: string[]): Map<string, string[]> {\r\n        let orderedAttrs: Map<string, string[]> = new Map();\r\n        Util.EFFECTIVENESS_RANKING.forEach((channel: string) => {\r\n            attrArr.forEach((aName: string) => {\r\n                let tmpAttrChannel: string[] = ChartSpec.chartUnderstanding[aName];\r\n                if (typeof tmpAttrChannel !== 'undefined') {\r\n                    if (tmpAttrChannel.includes(channel)) {\r\n                        if (typeof orderedAttrs.get(channel) === 'undefined') {\r\n                            orderedAttrs.set(channel, []);\r\n                        }\r\n                        orderedAttrs.get(channel).push(aName);\r\n                    }\r\n                }\r\n            })\r\n        })\r\n\r\n        return orderedAttrs;\r\n    }\r\n\r\n    public static assignChannelName(attrArr: string[]): Map<string, string[]> {\r\n        let channelAttrs: Map<string, string[]> = new Map();\r\n        attrArr.forEach((aName: string) => {\r\n            const tmpAttrChannels: string[] = ChartSpec.chartUnderstanding[aName];\r\n            tmpAttrChannels.forEach((tmpAttrChannel: string) => {\r\n                if (typeof channelAttrs.get(tmpAttrChannel) === 'undefined') {\r\n                    channelAttrs.set(tmpAttrChannel, []);\r\n                }\r\n                channelAttrs.get(tmpAttrChannel).push(aName);\r\n            })\r\n\r\n        })\r\n        return channelAttrs;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param {Map} sortedAttrs : key: visual channel, value : Array<String> attr names\r\n     */\r\n    public static generateAttrCombs(sortedAttrs: Map<string, string[]>) {\r\n        let visualChannelNum: number = sortedAttrs.size;\r\n        let allCombinations: string[][] = [];\r\n        while (visualChannelNum > 0) {\r\n            let count: number = 0;\r\n            let candidateAttrs: string[] = [];\r\n            let multiPosiAttrs: boolean = false, positionAttrs: string[] = [];\r\n            for (let [channelName, attrs] of sortedAttrs) {\r\n                candidateAttrs = [...candidateAttrs, ...attrs];\r\n                count++;\r\n                if (count === 1 && visualChannelNum !== 1 && channelName === 'position' && attrs.length > 1) {\r\n                    multiPosiAttrs = true;\r\n                    positionAttrs = attrs;\r\n                } else if (count === visualChannelNum) {\r\n                    let tmpCombRecord = Util.perm(candidateAttrs);\r\n                    if (multiPosiAttrs) {//check for attr continuity\r\n                        tmpCombRecord = Util.checkConti(tmpCombRecord, positionAttrs);\r\n                    }\r\n                    allCombinations = [...allCombinations, ...tmpCombRecord.map((oneComb: string[]) => [...new Set(oneComb)])];\r\n                    break;\r\n                }\r\n            }\r\n\r\n            visualChannelNum--;\r\n        }\r\n        return allCombinations;\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param sortedAttrs\r\n     * @param valueIdx \r\n     * @param firstKfMarks \r\n     * @param lastKfMarks \r\n     * @param hasOneMrak \r\n     */\r\n    public static generateRepeatKfs(\r\n        sortedAttrs: Map<string, string[]>,\r\n        valueIdx: Map<string, number>,\r\n        firstKfMarks: string[],\r\n        lastKfMarks: string[],\r\n        hasOneMrak: boolean = false): Array<[string[], Map<string, string[]>, string[]]> {\r\n\r\n        let possibleKfs: Array<[string[], Map<string, string[]>, string[]]> = [];\r\n\r\n        //get all possible combinations of attrs\r\n        const allCombinations: string[][] = this.generateAttrCombs(sortedAttrs);\r\n\r\n        //get values of the attrs in 1st kf\r\n        let valuesFirstKf: Set<string | number> = new Set();\r\n        let mShapes: Set<string> = new Set();\r\n        sortedAttrs.forEach((attrArr: string[], channel: string) => {\r\n            attrArr.forEach((aName: string) => {\r\n                firstKfMarks.forEach((mId: string) => {\r\n                    const attrValue: string | number = Util.filteredDataTable.get(mId)[aName];\r\n                    valuesFirstKf.add(attrValue);\r\n                    if (aName === 'mShape') {\r\n                        mShapes.add(`${attrValue}`);\r\n                    }\r\n                })\r\n            })\r\n        })\r\n\r\n        allCombinations.forEach((attrComb: string[]) => {//attrs to create sections\r\n            let sections: Map<string, string[]> = new Map();//key: section id, value: mark array\r\n            let sectionIdRecord: (string | number)[][] = [];\r\n            let timeSecIdx: number[] = [];\r\n            let tmpValueIdx: Map<number, number> = new Map();\r\n            attrComb.forEach((aName: string, idx: number) => {\r\n                tmpValueIdx.set(idx, valueIdx.get(aName));\r\n                if (Util.timeAttrs.includes(aName)) {\r\n                    timeSecIdx.push(idx);\r\n                }\r\n            })\r\n\r\n            let asscendingOrder: boolean = false;\r\n            lastKfMarks.forEach((mId: string, idx: number) => {\r\n                let sectionId: string = '';\r\n                let sepSecIdRecord: Set<string> = new Set();\r\n                let seperateSecId: Set<string> = new Set(); //for ordering section ids\r\n                // let secIsFirstKf: boolean = false;\r\n                attrComb.forEach((aName: string) => {\r\n                    let tmpValue: string | number = Util.filteredDataTable.get(mId)[aName];\r\n                    sectionId = [...sepSecIdRecord.add(`${tmpValue}`)].join(',');\r\n                    if (valuesFirstKf.has(tmpValue)) {\r\n                        //check whether this sec is the firstKf\r\n                        const isFirstKf: boolean = [...seperateSecId].every((attrVal: string) => { return (attrVal.includes('000_')) });\r\n                        // const isFirstKf: boolean = seperateSecId.every((attrVal: string) => { return (attrVal.includes('zzz_') || attrVal.includes('000_')) });\r\n                        if (isFirstKf) {\r\n                            tmpValue = '000_' + tmpValue\r\n                            let orderDirect: number = valueIdx.get(aName);\r\n                            if (orderDirect === 1) {\r\n                                asscendingOrder = false;\r\n                                // secIsFirstKf = false;\r\n                                // tmpValue = 'zzz_' + tmpValue;//for ordering \r\n                            } else {\r\n                                asscendingOrder = true;\r\n                                // secIsFirstKf = true;\r\n                                // tmpValue = '000_' + tmpValue;//for ordering \r\n\r\n                            }\r\n                        }\r\n                    }\r\n                    Util.addAttrValue(seperateSecId, `${tmpValue}`);\r\n                    // seperateSecId.add(`${tmpValue}`);\r\n                })\r\n\r\n                if (typeof sections.get(sectionId) === 'undefined') {\r\n                    sections.set(sectionId, []);\r\n                    sectionIdRecord.push([...seperateSecId]);\r\n                    // if (asscendingOrder && secIsFirstKf) {\r\n                    //     firstKfIdx = sectionIdRecord.length - 1;\r\n                    // }\r\n                }\r\n                sections.get(sectionId).push(mId);\r\n            })\r\n\r\n            if (hasOneMrak) {\r\n                let flag: boolean = false;//whether this one mark in the 1st kf is a section\r\n                for (let [sectionId, markIdArr] of sections) {\r\n                    if (markIdArr.includes(firstKfMarks[0]) && markIdArr.length === 1) {\r\n                        flag = true;\r\n                        break;\r\n                    }\r\n                }\r\n                if (!flag) {//if this one mark cannot form a section, we need to add markid into section id\r\n                    sections.clear();\r\n                    sectionIdRecord = [];\r\n                    lastKfMarks.forEach((mId: string) => {\r\n                        let sectionId: string = '';\r\n                        let sepSecIdRecord: Set<string> = new Set();\r\n                        let seperateSecId: Set<string> = new Set();\r\n                        // let secIsFirstKf: boolean = false;\r\n                        attrComb.forEach((aName: string) => {\r\n                            let tmpValue: string | number = Util.filteredDataTable.get(mId)[aName];\r\n                            sectionId = [...sepSecIdRecord.add(`${tmpValue}`)].join(',');\r\n                            if (valuesFirstKf.has(tmpValue)) {\r\n                                tmpValue = '000_' + tmpValue\r\n                                let orderDirect: number = valueIdx.get(aName);\r\n                                if (orderDirect === 1) {\r\n                                    asscendingOrder = false;\r\n                                    // secIsFirstKf = false;\r\n                                    // tmpValue = 'zzz_' + tmpValue;//for ordering \r\n                                } else {\r\n                                    asscendingOrder = true;\r\n                                    // secIsFirstKf = true;\r\n                                    // tmpValue = '000_' + tmpValue;//for ordering \r\n                                }\r\n                            }\r\n                            Util.addAttrValue(seperateSecId, `${tmpValue}`);\r\n                            // seperateSecId.add(`${tmpValue}`);\r\n                        })\r\n                        if (hasOneMrak) {\r\n                            sectionId = `${sectionId},${mId}`;\r\n                            seperateSecId.add(mId);\r\n                        }\r\n                        if (typeof sections.get(sectionId) === 'undefined') {\r\n                            sections.set(sectionId, []);\r\n                            sectionIdRecord.push([...seperateSecId]);\r\n                            // if (asscendingOrder && secIsFirstKf) {\r\n                            //     firstKfIdx = seperateSecId.length - 1;\r\n                            // }\r\n                        }\r\n                        sections.get(sectionId).push(mId);\r\n                    })\r\n                }\r\n            }\r\n\r\n            //first round sorting sectionIds\r\n            sectionIdRecord.sort(function (a, b) {\r\n                let diffValueIdx: number = 0;\r\n                let diffAttr: string = '';\r\n                for (let i = 0, len = attrComb.length; i < len; i++) {\r\n                    if (a[i] !== b[i]) {\r\n                        diffValueIdx = i;\r\n                        diffAttr = attrComb[i];\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                let aComp: string | number = a[diffValueIdx], bComp: string | number = b[diffValueIdx];\r\n                if ((<string>aComp).includes('000_')) {\r\n                    aComp = (<string>aComp).substring(4);\r\n                }\r\n                if ((<string>bComp).includes('000_')) {\r\n                    bComp = (<string>bComp).substring(4);\r\n                }\r\n                if (timeSecIdx.includes(diffValueIdx)) {\r\n                    aComp = Util.fetchTimeNum(<string>aComp);\r\n                    bComp = Util.fetchTimeNum(<string>bComp);\r\n                } else {\r\n                    aComp = isNaN(parseFloat(`${aComp}`)) ? aComp : parseFloat(`${aComp}`);\r\n                    bComp = isNaN(parseFloat(`${bComp}`)) ? bComp : parseFloat(`${bComp}`);\r\n                }\r\n\r\n                if (diffAttr === 'mShape') {\r\n                    const aCompStr: string = `${aComp}`, bCompStr: string = `${bComp}`;\r\n                    const aShapeName: string = (aCompStr.includes('000_') || aCompStr.includes('zzz_')) ? aCompStr.substring(4) : aCompStr;\r\n                    const bShapeName: string = (bCompStr.includes('000_') || bCompStr.includes('zzz_')) ? bCompStr.substring(4) : bCompStr;\r\n                    //put the same mark shape as those in the firstKfMarks i nthe front\r\n                    if (mShapes.has(aShapeName) && !mShapes.has(bShapeName)) {\r\n                        return -1;\r\n                    } else if (!mShapes.has(aShapeName) && mShapes.has(bShapeName)) {\r\n                        return 1;\r\n                    } else if (!mShapes.has(aShapeName) && !mShapes.has(bShapeName)) {\r\n                        if (aShapeName.toLocaleLowerCase().includes('link') && !bShapeName.toLocaleLowerCase().includes('link')) {\r\n                            return 1;\r\n                        } else if (!aShapeName.toLocaleLowerCase().includes('link') && bShapeName.toLocaleLowerCase().includes('link')) {\r\n                            return -1;\r\n                        } else {\r\n                            return 0;\r\n                        }\r\n                    } else {\r\n                        return 0;\r\n                    }\r\n                }\r\n\r\n                if (bComp > aComp) {\r\n                    switch (tmpValueIdx.get(diffValueIdx)) {\r\n                        case 0:\r\n                        case 2:\r\n                            return -1;\r\n                        case 1:\r\n                            return 1;\r\n                    }\r\n                } else {\r\n                    switch (tmpValueIdx.get(diffValueIdx)) {\r\n                        case 0:\r\n                        case 2:\r\n                            return 1;\r\n                        case 1:\r\n                            return -1;\r\n                    }\r\n                }\r\n            })\r\n            //find the first kf index\r\n            let firstKfIdx: number = -1;\r\n            for (let i = 0, len = sectionIdRecord.length; i < len; i++) {\r\n                // sectionIdRecord.forEach((separaSecIds: (string | number)[], idx: number) => {\r\n                const separaSecIds: (string | number)[] = sectionIdRecord[i];\r\n                if (separaSecIds.every((attrVal: string) => (attrVal.includes('000_')))) {\r\n                    firstKfIdx = i;\r\n                    break;\r\n                }\r\n            }\r\n            if (asscendingOrder) {\r\n                const sectionsBefore: (string | number)[][] = sectionIdRecord.slice(0, firstKfIdx);\r\n                const sectionsAfter: (string | number)[][] = sectionIdRecord.slice(firstKfIdx);\r\n                sectionIdRecord = [...sectionsAfter, ...sectionsBefore];\r\n            }\r\n            //remove 000_ and zzz_ added for ordering\r\n            for (let i = 0, len = sectionIdRecord.length; i < len; i++) {\r\n                for (let j = 0, len2 = sectionIdRecord[i].length; j < len2; j++) {\r\n                    // if ((<string>sectionIdRecord[i][j]).includes('000_') || (<string>sectionIdRecord[i][j]).includes('zzz_')) {\r\n                    if ((<string>sectionIdRecord[i][j]).indexOf('_') === 3) {\r\n                        const checkStr: string = (<string>sectionIdRecord[i][j]).substring(0, 3);\r\n                        if (checkStr === 'zzz' || !isNaN(parseInt(checkStr))) {\r\n                            sectionIdRecord[i][j] = (<string>sectionIdRecord[i][j]).substring(4);\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            if (mShapes.size > 1) {//deal with mark shape situations\r\n                const mShapeIdx: number = attrComb.indexOf('mShape');\r\n                let sectionMarksToMerge: string[] = [];\r\n                let valExceptShape: string[] = [];\r\n                let mergeIdxs: [number, (string | number)[]][] = [];\r\n                let mergeSecId: string = [...mShapes].join('+');\r\n                let sectionsToDelete: string[] = [];\r\n                sectionIdRecord.forEach((valComb: (string | number)[], idx: number) => {\r\n                    const correspondingSecId: string = valComb.join(',');\r\n                    const tmpShape: string = `${valComb[mShapeIdx]}`;\r\n                    let tmpValExceptShape: Set<string> = new Set();\r\n                    valComb.forEach((val: string | number, valIdx: number) => {\r\n                        if (valIdx !== mShapeIdx) {\r\n                            tmpValExceptShape.add(`${val}`);\r\n                        }\r\n                    })\r\n                    if (!Tool.identicalArrays(valExceptShape, [...tmpValExceptShape]) || idx === sectionIdRecord.length - 1) {\r\n                        if (valExceptShape.length !== 0) {//add new section\r\n                            valExceptShape.splice(mShapeIdx, 0, mergeSecId);\r\n                            const tmpSecId: string = [...new Set(valExceptShape)].join(',');\r\n                            sections.set(tmpSecId, sectionMarksToMerge);\r\n                        }\r\n                        valExceptShape = [...tmpValExceptShape];\r\n                        sectionMarksToMerge = sections.get(correspondingSecId);\r\n                        sectionsToDelete.push(correspondingSecId);\r\n                        let tmpValExceptShapeArr: string[] = [...tmpValExceptShape];\r\n                        tmpValExceptShapeArr.splice(mShapeIdx, 0, mergeSecId)\r\n                        mergeIdxs.push([idx, [...new Set(tmpValExceptShapeArr)]]);\r\n                    } else {\r\n                        if (mShapes.has(tmpShape)) {\r\n                            sectionsToDelete.push(correspondingSecId);\r\n                            sectionMarksToMerge = [...sectionMarksToMerge, ...sections.get(correspondingSecId)];\r\n                        }\r\n                    }\r\n                })\r\n                if (valExceptShape.length !== 0) {//add new section\r\n                    valExceptShape.splice(mShapeIdx, 0, mergeSecId);\r\n                    const tmpSecId: string = [...new Set(valExceptShape)].join(',');\r\n                    if (typeof sections.get(tmpSecId) !== 'undefined') {\r\n                        sectionMarksToMerge = [...new Set([...sectionMarksToMerge, ...sections.get(tmpSecId)])];\r\n                    }\r\n                    sections.set(tmpSecId, sectionMarksToMerge);\r\n                }\r\n\r\n                mergeIdxs.reverse().forEach((secIdxAndId: [number, (string | number)[]]) => {\r\n                    sectionIdRecord.splice(secIdxAndId[0], mShapes.size, secIdxAndId[1]);\r\n                })\r\n                sectionsToDelete.forEach((secIdToDelete: string) => {\r\n                    sections.delete(secIdToDelete);\r\n                })\r\n            }\r\n            let orderedSectionIds: string[] = sectionIdRecord.map(a => a.join(','));\r\n            possibleKfs.push([attrComb, sections, orderedSectionIds]);\r\n        })\r\n\r\n        // console.log('possible kfs: ', possibleKfs);\r\n        return possibleKfs;\r\n    }\r\n\r\n    /**\r\n     * find the next unique kf after kfStartIdx\r\n     * @param allPath \r\n     * @param kfStartIdx \r\n     */\r\n    public static findNextUniqueKf(allPaths: IPath[], kfStartIdx: number): number {\r\n        let len: number = 0;\r\n        if (typeof allPaths !== 'undefined') {\r\n            allPaths.forEach((p: IPath) => {\r\n                if (p.kfMarks.length > len) {\r\n                    len = p.kfMarks.length;\r\n                }\r\n            })\r\n        }\r\n        for (let i = kfStartIdx + 1; i < len; i++) {\r\n            for (let j = 1, len2 = allPaths.length; j < len2; j++) {\r\n                if (!Tool.identicalArrays(allPaths[j].kfMarks[i], allPaths[0].kfMarks[i])) {\r\n                    return i;\r\n                }\r\n            }\r\n        }\r\n        return -1;\r\n    }\r\n\r\n    public static findUniqueKfs(allPaths: IPath[], kfStartIdx: number): { uniqueKfIdxs: number[], hasNextUniqueKf: boolean } {\r\n        let len: number = 0;\r\n        if (typeof allPaths !== 'undefined') {\r\n            allPaths.forEach((p: IPath) => {\r\n                if (p.kfMarks.length > len) {\r\n                    len = p.kfMarks.length;\r\n                }\r\n            })\r\n        }\r\n        //pre kfs\r\n        const uniqueKfs: number[] = [];\r\n        for (let i = 0; i <= kfStartIdx; i++) {\r\n            for (let j = 1, len2 = allPaths.length; j < len2; j++) {\r\n                if (!Tool.identicalArrays(allPaths[j].kfMarks[i], allPaths[0].kfMarks[i])) {\r\n                    uniqueKfs.push(i);\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        //next kf\r\n        const nextKf: number = this.findNextUniqueKf(allPaths, kfStartIdx);\r\n        if (nextKf !== -1) {\r\n            uniqueKfs.push(nextKf);\r\n        }\r\n        return { uniqueKfIdxs: uniqueKfs, hasNextUniqueKf: nextKf !== -1 };\r\n    }\r\n\r\n    // /**\r\n    //  * return index of the unique kfs in each path\r\n    //  * @param {*} repeatKfRecord \r\n    //  */\r\n    // public static findUniqueKfs(repeatKfRecord: string[][][]): number[][] {\r\n    //     let pathWithUniqueAndMissingKfs: number[][] = [];\r\n    //     for (let i = 0, len = repeatKfRecord.length; i < len; i++) {\r\n    //         let uniqueKf: number[] = []; //record unique kf idx of this path\r\n    //         let removeIdx = [i];//index of the paths that don't need to compare\r\n    //         //kf index currently being compared\r\n    //         for (let compareKfIdx = 0, len2 = repeatKfRecord[i].length; compareKfIdx < len2; compareKfIdx++) {\r\n    //             let flag = true;//if the kf is the same in all paths\r\n    //             for (let j = 0; j < len; j++) {\r\n    //                 if (!removeIdx.includes(j)) {\r\n    //                     //compare the current kf\r\n    //                     let tmpFlag = Tool.identicalArrays(repeatKfRecord[i][compareKfIdx], repeatKfRecord[j][compareKfIdx]);\r\n    //                     if (!tmpFlag) {//this path in this kf is different from others\r\n    //                         flag = false;\r\n    //                         removeIdx.push(j);\r\n    //                     } else {\r\n    //                         continue;\r\n    //                     }\r\n    //                 }\r\n    //             }\r\n    //             if (!flag) {\r\n    //                 uniqueKf.push(compareKfIdx);\r\n    //             }\r\n    //         }\r\n    //         pathWithUniqueAndMissingKfs.push(uniqueKf);\r\n    //     }\r\n    //     return pathWithUniqueAndMissingKfs;\r\n    // }\r\n\r\n    public static generateSuggestionPath(selectedMarks: string[], firstKfInfoInParent: IKeyframe, targetKfg: KfGroup): boolean {\r\n        //create suggestion list if there is one, judge whether to use current last kf as last kf or the current first as last kf\r\n        const [clsSelMarks, containNonDataMarkInSel] = Util.extractClsFromMarks(selectedMarks);\r\n        const [clsFirstKf, containNonDataMarkFirstKf] = Util.extractClsFromMarks(firstKfInfoInParent.marksThisKf);\r\n        let suggestOnFirstKf: boolean = false;\r\n        if (Tool.arrayContained(firstKfInfoInParent.marksThisKf, selectedMarks) && Tool.identicalArrays(clsSelMarks, clsFirstKf)) {//suggest based on first kf in animation\r\n            suggestOnFirstKf = true;\r\n            Suggest.suggestPaths(selectedMarks, firstKfInfoInParent.marksThisKf);\r\n        } else {//suggest based on all marks in animation\r\n            const marksThisAni: string[] = targetKfg.marksThisAni();\r\n            Suggest.suggestPaths(selectedMarks, marksThisAni);\r\n        }\r\n        return suggestOnFirstKf;\r\n    }\r\n\r\n    /**\r\n     * check the numeric order with the mark in first kf (only mark in the first kf)\r\n     * @param firstKfMark \r\n     */\r\n    public static checkNumbericOrder(firstKfMark: string): [boolean, { attr: string, order: number, marks: string[] }[]] {\r\n        const firstMarkDatum: IDataItem = Util.filteredDataTable.get(firstKfMark);\r\n        const numericAttrs: string[] = Util.fetchNumericAttrs(firstMarkDatum);\r\n        let hasOrder: boolean = false;\r\n        const result: { attr: string, order: number, marks: string[] }[] = [];\r\n        numericAttrs.forEach((attrName: string) => {\r\n            const orderOfThisAttr: string[] = Util.numericAttrOrder.get(attrName);\r\n            const idxOfCurrentMark: number = orderOfThisAttr.indexOf(firstKfMark);\r\n            if (idxOfCurrentMark === 0 || idxOfCurrentMark === orderOfThisAttr.length - 1) {\r\n                hasOrder = true;\r\n                result.push({\r\n                    attr: attrName,\r\n                    order: idxOfCurrentMark === 0 ? 0 : 1,\r\n                    marks: orderOfThisAttr\r\n                })\r\n            }\r\n        })\r\n        return [hasOrder, result];\r\n    }\r\n\r\n    public static suggestPaths(firstKfMarks: string[], lastKfMarks: string[]) {\r\n        this.allPaths = [];\r\n        const sepFirstKfMarks: { dataMarks: string[], nonDataMarks: string[] } = Util.separateDataAndNonDataMarks(firstKfMarks);\r\n        const sepLastKfMarks: { dataMarks: string[], nonDataMarks: string[] } = Util.separateDataAndNonDataMarks(lastKfMarks);\r\n        if (sepFirstKfMarks.dataMarks.length > 0 && sepFirstKfMarks.nonDataMarks.length > 0) {//there are both data encoded and non data encoded marks in the first kf\r\n            //no suggestion\r\n\r\n        } else if (sepFirstKfMarks.dataMarks.length > 0 && sepFirstKfMarks.nonDataMarks.length === 0) {\r\n            //suggest based on data attrs\r\n            const firstKfDataMarks: string[] = sepFirstKfMarks.dataMarks;\r\n            const lastKfDataMarks: string[] = sepLastKfMarks.dataMarks;\r\n\r\n\r\n            if (Tool.identicalArrays(firstKfDataMarks, lastKfDataMarks)) {\r\n                //refresh current spec\r\n\r\n            } else {\r\n                let attrWithDiffValues: string[] = this.findAttrWithDiffValue(firstKfDataMarks, lastKfDataMarks, true);\r\n                const [sameAttrs, diffAttrs] = this.findSameDiffAttrs(firstKfDataMarks, true);\r\n                let flag: boolean = false;\r\n                if (attrWithDiffValues.length === 0) {\r\n                    flag = true;\r\n                    const filteredDiffAttrs: string[] = Util.filterAttrs(diffAttrs);\r\n                    attrWithDiffValues = [...sameAttrs, ...filteredDiffAttrs];\r\n                }\r\n                //remove empty cell problem\r\n                attrWithDiffValues = this.removeEmptyCell(firstKfMarks, attrWithDiffValues, sameAttrs, diffAttrs, true);\r\n                let valueIdx: Map<string, number> = new Map();//key: attr name, value: index of the value in all values\r\n                attrWithDiffValues.forEach((aName: string) => {\r\n                    const targetValue: string | number = Util.filteredDataTable.get(firstKfDataMarks[0])[aName];\r\n                    const tmpIdx: number = Util.dataValues.get(aName).indexOf(targetValue);\r\n                    if (tmpIdx === 0) {\r\n                        valueIdx.set(aName, 0);//this value is the 1st in all values\r\n                    } else if (tmpIdx === Util.dataValues.get(aName).length - 1) {\r\n                        valueIdx.set(aName, 1);//this value is the last in all values\r\n                    } else {\r\n                        valueIdx.set(aName, 2);//this value is in the middle of all values\r\n                    }\r\n                })\r\n\r\n                //sortedAttrs: key: channel, value: attr array\r\n                const sortedAttrs: Map<string, string[]> = flag ? this.assignChannelName(attrWithDiffValues) : this.sortAttrs(attrWithDiffValues);\r\n                // console.log('sorted attrs: ', sortedAttrs);\r\n                const oneMarkInFirstKf: boolean = firstKfDataMarks.length === 1;\r\n                let allPossibleKfs = this.generateRepeatKfs(sortedAttrs, valueIdx, firstKfDataMarks, lastKfDataMarks, oneMarkInFirstKf);\r\n                let repeatKfRecord: any[] = [];\r\n                let filterAllPaths: number[] = [], count = 0;//record the index of the path that should be removed: not all selected & not one mark in 1st kf\r\n                allPossibleKfs.forEach((possiblePath: any[]) => {\r\n                    let attrComb: string[] = possiblePath[0];\r\n                    let sections: Map<string, string[]> = possiblePath[1];\r\n                    let orderedSectionIds: string[] = possiblePath[2];\r\n                    let repeatKfs = [];\r\n                    let allSelected = false;\r\n                    let oneMarkFromEachSec = false, oneMarkEachSecRecorder: Set<string> = new Set();\r\n                    let numberMostMarksInSec = 0, selectedMarks: Map<string, string[]> = new Map();//in case of one mark from each sec\r\n\r\n                    orderedSectionIds.forEach((sectionId: string) => {\r\n                        let tmpSecMarks = sections.get(sectionId);\r\n                        if (tmpSecMarks.length > numberMostMarksInSec) {\r\n                            numberMostMarksInSec = tmpSecMarks.length;\r\n                        }\r\n\r\n                        //check if marks in 1st kf are one from each sec\r\n                        firstKfMarks.forEach((mId: string) => {\r\n                            if (tmpSecMarks.includes(mId)) {\r\n                                selectedMarks.set(sectionId, [mId]);\r\n                                oneMarkEachSecRecorder.add(sectionId);\r\n                            }\r\n                        })\r\n                    })\r\n\r\n                    if (oneMarkEachSecRecorder.size === sections.size && firstKfMarks.length === sections.size) {\r\n                        oneMarkFromEachSec = true;\r\n                    }\r\n\r\n                    if (oneMarkFromEachSec) {\r\n                        for (let i = 0; i < numberMostMarksInSec - 1; i++) {\r\n                            let tmpKfMarks = [];\r\n                            for (let j = 0; j < orderedSectionIds.length; j++) {\r\n                                let tmpSecMarks = sections.get(orderedSectionIds[j]);\r\n                                let tmpSelected = selectedMarks.get(orderedSectionIds[j]);\r\n                                for (let z = 0; z < tmpSecMarks.length; z++) {\r\n                                    if (!tmpSelected.includes(tmpSecMarks[z])) {\r\n                                        tmpKfMarks.push(tmpSecMarks[z]);\r\n                                        selectedMarks.get(orderedSectionIds[j]).push(tmpSecMarks[z]);\r\n                                        break;\r\n                                    }\r\n                                }\r\n                            }\r\n                            repeatKfs.push(tmpKfMarks);\r\n                        }\r\n                    } else {\r\n                        for (let i = 0, len = orderedSectionIds.length; i < len; i++) {\r\n                            let tmpSecMarks = sections.get(orderedSectionIds[i]);\r\n                            let judgeSame = Tool.identicalArrays(firstKfMarks, tmpSecMarks);\r\n                            if (!allSelected && judgeSame && !oneMarkInFirstKf) {\r\n                                allSelected = true;\r\n                            }\r\n                            if (!judgeSame) {//dont show the 1st kf twice\r\n                                repeatKfs.push(tmpSecMarks);\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    let samePath = false;\r\n                    for (let i = 0; i < this.allPaths.length; i++) {\r\n                        if (Tool.identicalArrays(repeatKfs, this.allPaths[i].kfMarks)) {\r\n                            samePath = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                    // repeatKfRecord.push(repeatKfs);\r\n                    this.allPaths.push({ attrComb: attrComb, sortedAttrValueComb: orderedSectionIds, kfMarks: repeatKfs, firstKfMarks: firstKfDataMarks, lastKfMarks: lastKfDataMarks });\r\n                    //check if the selection is one mark from each sec\r\n                    if ((!allSelected && !oneMarkInFirstKf && !oneMarkFromEachSec) || samePath) {\r\n                        filterAllPaths.push(count);\r\n                    }\r\n                    count++;\r\n                })\r\n\r\n                //filter all paths\r\n                filterAllPaths.sort(function (a, b) {\r\n                    return b - a;\r\n                })\r\n                for (let i = 0; i < filterAllPaths.length; i++) {\r\n                    this.allPaths.splice(filterAllPaths[i], 1);\r\n                }\r\n\r\n                //check numeric ordering\r\n                let hasNumericOrder: boolean = false;\r\n                let numericOrders: { attr: string, order: number, marks: string[] }[];\r\n                if (firstKfDataMarks.length === 1) {\r\n                    [hasNumericOrder, numericOrders] = this.checkNumbericOrder(firstKfDataMarks[0]);\r\n                }\r\n\r\n                if (hasNumericOrder) {//generate path according to the order of values of numeric attributes\r\n                    numericOrders.forEach((ordering: { attr: string, order: number, marks: string[] }) => {\r\n                        let orderedMarks: string[] = ordering.order === 0 ? ordering.marks : ordering.marks.reverse();\r\n                        let orderedKfMarks: string[][] = orderedMarks.map((a: string) => [a]);\r\n                        // orderedMarks = orderedMarks.slice(1, orderedMarks.length);\r\n                        // orderedKfMarks = orderedKfMarks.slice(1, orderedKfMarks.length);\r\n                        this.allPaths.push({\r\n                            attrComb: ['id'],\r\n                            sortedAttrValueComb: orderedMarks,\r\n                            kfMarks: orderedKfMarks,\r\n                            firstKfMarks: firstKfDataMarks,\r\n                            lastKfMarks: lastKfDataMarks,\r\n                            ordering: {\r\n                                attr: ordering.attr,\r\n                                order: ordering.order === 0 ? 'asscending' : 'descending'\r\n                            }\r\n                        })\r\n                    })\r\n                }\r\n\r\n                // console.log('all paths: ', this.allPaths);\r\n            }\r\n        } else if (sepFirstKfMarks.dataMarks.length === 0 && sepFirstKfMarks.nonDataMarks.length > 0) {\r\n            //suggest based on non data attrs\r\n            const firstKfNonDataMarks: string[] = sepFirstKfMarks.nonDataMarks;\r\n            const lastKfNonDataMarks: string[] = sepLastKfMarks.nonDataMarks;\r\n\r\n            if (!Tool.identicalArrays(firstKfNonDataMarks, lastKfNonDataMarks)) {\r\n                //count the number of types in first kf\r\n                const typeCount: Map<string, string[]> = new Map();\r\n                const attrValstrs: Set<string> = new Set();\r\n                firstKfNonDataMarks.forEach((mId: string) => {\r\n                    let attrValStr: string = '';\r\n                    const tmpDatum: IDataItem = Util.nonDataTable.get(mId);\r\n                    Object.keys(tmpDatum).forEach((attr: string) => {\r\n                        if (Util.isNonDataAttr(attr) && attr !== 'text') {\r\n                            attrValStr += `*${tmpDatum[attr]}`;\r\n                        }\r\n                    })\r\n                    if (typeof typeCount.get(attrValStr) === 'undefined') {\r\n                        typeCount.set(attrValStr, []);\r\n                    }\r\n                    typeCount.get(attrValStr).push(mId);\r\n                    attrValstrs.add(attrValStr);\r\n                })\r\n                // const attrValStr = [...typeCount][0][0];\r\n                //check whether there is one from each type\r\n                let oneFromEachType: boolean = true;\r\n                typeCount.forEach((mIds: string[], mType: string) => {\r\n                    if (mIds.length > 1) {\r\n                        oneFromEachType = false;\r\n                    }\r\n                })\r\n\r\n                // if (typeCount.size === 1 && [...typeCount][0][1] === 1) {\r\n                if (oneFromEachType) {\r\n                    //fetch all marks with the same attr values\r\n                    let suggestionLastKfMarks: Map<string, string[]> = new Map();//key: attrValStr, value: marks have those attr values\r\n                    Util.nonDataTable.forEach((datum: IDataItem, mId: string) => {\r\n                        let tmpAttrValStr: string = '';\r\n                        Object.keys(datum).forEach((attr: string) => {\r\n                            if (Util.isNonDataAttr(attr) && attr !== 'text') {\r\n                                tmpAttrValStr += `*${datum[attr]}`;\r\n                            }\r\n                        })\r\n                        if (attrValstrs.has(tmpAttrValStr)) {\r\n                            // if (tmpAttrValStr === attrValStr) {\r\n                            if (typeof suggestionLastKfMarks.get(tmpAttrValStr) === 'undefined') {\r\n                                suggestionLastKfMarks.set(tmpAttrValStr, []);\r\n                            }\r\n                            suggestionLastKfMarks.get(tmpAttrValStr).push(mId);\r\n                        }\r\n                    })\r\n\r\n                    //sort marks from each type\r\n                    let kfBefore: string[][] = [];\r\n                    let kfAfter: string[][] = [];\r\n                    let targetIdx: number = -100;\r\n                    let allLastKfMarks: string[] = [];\r\n                    let reverseIdx: boolean = false;\r\n\r\n                    suggestionLastKfMarks.forEach((mIds: string[], attrValStr: string) => {\r\n                        mIds.forEach((mId: string, idx: number) => {\r\n                            if (mId === typeCount.get(attrValStr)[0] && targetIdx === -100) {\r\n                                targetIdx = idx;\r\n                                if (targetIdx === mIds.length - 1) {\r\n                                    reverseIdx = true;\r\n                                }\r\n                            }\r\n                            if (targetIdx === -100 || idx < targetIdx) {\r\n                                if (typeof kfBefore[idx] === 'undefined') {\r\n                                    kfBefore[idx] = [];\r\n                                }\r\n                                kfBefore[idx].push(mId);\r\n                            } else {\r\n                                if (typeof kfAfter[idx - targetIdx] === 'undefined') {\r\n                                    kfAfter[idx - targetIdx] = [];\r\n                                }\r\n                                kfAfter[idx - targetIdx].push(mId);\r\n                            }\r\n                            allLastKfMarks.push(mId);\r\n                        })\r\n                    })\r\n                    let tmpKfMarks: string[][] = reverseIdx ? [...kfAfter, ...kfBefore.reverse()] : [...kfAfter, ...kfBefore];\r\n                    let sortedAttrValueComb: string[] = tmpKfMarks.map((mIds: string[]) => mIds.join(','));\r\n                    if (typeCount.size === 1) {\r\n                        sortedAttrValueComb = tmpKfMarks.map((mIds: string[]) => mIds[0]);\r\n                    } else {\r\n                        sortedAttrValueComb = tmpKfMarks.map((mIds: string[]) => `${Util.nonDataTable.get(mIds[0]).clsIdx}`);\r\n                    }\r\n                    const attrComb: string[] = typeCount.size === 1 ? ['id'] : ['clsIdx'];\r\n                    this.allPaths = [{ attrComb: attrComb, sortedAttrValueComb: sortedAttrValueComb, kfMarks: tmpKfMarks, firstKfMarks: firstKfNonDataMarks, lastKfMarks: allLastKfMarks }];\r\n                }\r\n            }\r\n        }\r\n    }\r\n}","import { state } from '../state'\r\nimport Tool from '../../util/tool'\r\nimport { ISortDataAttr, IDataItem, IDataDatumType, IKeyframeGroup, IKeyframe } from './ds';\r\nimport AttrSort from '../../components/widgets/attrSort';\r\nimport KfItem from '../../components/widgets/kfItem';\r\nimport KfGroup from '../../components/widgets/kfGroup';\r\nimport KfTrack from '../../components/widgets/kfTrack';\r\nimport { ChartSpec, TimingSpec, Animation } from '../../canis/moduleIdx';\r\n\r\nexport default class Util {\r\n    static NUMERIC_ATTR: string = 'numeric';\r\n    static CATEGORICAL_ATTR: string = 'categorical';\r\n    static DATA_SUGGESTION: string = 'dataSuggestion';\r\n    static NON_DATA_SUGGESTION: string = 'nonDataSuggestion';\r\n    static NO_SUGGESTION: string = 'noSuggestion';\r\n    static NUMERIC_CATEGORICAL_ATTR: string[] = ['Year', 'year', 'YEAR', 'Month', 'month', 'MONTH', 'Day', 'day', 'DAY', 'date', 'Date', 'DATE'];\r\n    static EFFECTIVENESS_RANKING: string[] = ['position', 'color', 'shape'];\r\n    static EXCLUDED_DATA_ATTR: string[] = ['_TYPE', 'text', '_x', '_y', '_id', '_MARKID', \"_ROW\", \"_COL\"];\r\n    static TIME_ATTR_VALUE: string[] = ['mon', 'monday', 'tue', 'tuesday', 'wed', 'wednesday', 'thr', 'thursday', 'fri', 'friday', 'sat', 'saturday', 'sun', 'sunday', 'jan', 'feb', 'mar', 'apr', 'may', 'jun', 'jul', 'aug', 'sep', 'oct', 'nov', 'dec', 'january', 'february', 'march', 'april', 'may', 'june', 'july', 'august', 'september', 'october', 'november', 'december'];\r\n\r\n    static filteredDataTable: Map<string, IDataItem> = new Map();//markId, dataItem\r\n    static numericAttrOrder: Map<string, string[]> = new Map();//attr name, mark id array\r\n    static nonDataTable: Map<string, IDataItem> = new Map();//markId, non dataitem (for axis, legend, title)\r\n    static attrType: IDataDatumType = {};\r\n    static dataAttrs: string[];\r\n    static timeAttrs: string[];\r\n    static dataValues: Map<string, Array<string | number>> = new Map();//key: attr name, value: all values of this attr\r\n    static nonDataAttrs: string[] = [];//same as those in nonDataTable\r\n    static nonDataValues: Map<string, Array<string | number>> = new Map();//key: attr name, value: all values\r\n\r\n    /**\r\n         * separate input marks to data encoded and non data encoded \r\n         * @param markIdArr \r\n         */\r\n    public static separateDataAndNonDataMarks(markIdArr: string[]): { dataMarks: string[], nonDataMarks: string[] } {\r\n        let dataMarks: string[] = [];\r\n        let nonDataMarks: string[] = [];\r\n        markIdArr.forEach((mId: string) => {\r\n            if (typeof ChartSpec.dataMarkDatum.get(mId) !== 'undefined') {\r\n                dataMarks.push(mId);\r\n            } else {\r\n                nonDataMarks.push(mId);\r\n            }\r\n        })\r\n        return { dataMarks: dataMarks, nonDataMarks: nonDataMarks }\r\n    }\r\n\r\n\r\n    /**\r\n     * based on selected marks, judge perfrom which kind of suggestion\r\n     * @param markIds \r\n     */\r\n    public static judgeSuggestionType(markIds: string[]): string {\r\n        const allDataEncodedMarks: string[] = Array.from(this.filteredDataTable.keys());\r\n        const allNonDataEncodedMarks: string[] = Array.from(this.nonDataTable.keys());\r\n        let containDataMark: boolean = false, containNonDataMark: boolean = false;\r\n        for (let i = 0, len = markIds.length; i < len; i++) {\r\n            if (allDataEncodedMarks.includes(markIds[i])) {\r\n                containDataMark = true;\r\n                if (containNonDataMark) {\r\n                    break;\r\n                }\r\n            } else if (allNonDataEncodedMarks.includes(markIds[i])) {\r\n                containNonDataMark = true;\r\n                if (containDataMark) {\r\n                    break;\r\n                }\r\n            }\r\n        }\r\n        if (containDataMark && !containNonDataMark) {\r\n            return this.DATA_SUGGESTION;\r\n        } else if (!containDataMark && containNonDataMark) {\r\n            return this.NON_DATA_SUGGESTION;\r\n        } else {\r\n            return this.NO_SUGGESTION;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * suggest based on selected marks\r\n     * @param markIds : selected marks\r\n     */\r\n    public static suggestSelection(markIds: string[]): string[] {\r\n        if (markIds.length > 0) {\r\n            const suggestionType: string = this.judgeSuggestionType(markIds);\r\n            switch (suggestionType) {\r\n                case this.DATA_SUGGESTION:\r\n                    return this.suggestSelBasedOnData(markIds);\r\n                case this.NON_DATA_SUGGESTION:\r\n                    return this.suggestSelBasedOnChart(markIds);\r\n                default:\r\n                    return markIds;\r\n            }\r\n        } else {\r\n            return [];\r\n        }\r\n    }\r\n\r\n    /**\r\n     * the selected marks are data encoded marks\r\n     */\r\n    public static suggestSelBasedOnData(markIds: string[]): string[] {\r\n        //find the same and diff attributes of the selected marks\r\n        const [sameAttrs, diffAttrs] = this.compareAttrs(markIds, this.filteredDataTable, Object.keys(this.attrType), true);\r\n        console.log('found diff attrs: ', diffAttrs);\r\n        //filter attributes according to the effectiveness ranking\r\n        const filteredDiffAttrs = this.filterAttrs(diffAttrs, markIds);\r\n        //list all data-encoded marks\r\n        let allMarkIds: string[] = Array.from(this.filteredDataTable.keys());\r\n        const [sections, orderedSectionIds] = this.partitionChart(sameAttrs, filteredDiffAttrs, allMarkIds, this.filteredDataTable);\r\n\r\n        //judge if marks from one section are selected all, otherwise repeat selection with the one with the most selected marks\r\n        let allSelected: boolean = false, mostSelectionNumInSec: number = 0;\r\n        sections.forEach((marksInSec, secId) => {\r\n            allSelected = Tool.arrayContained(markIds, marksInSec) || allSelected;//whether marks in this section are all selected\r\n            let tmpCount: number = 0;\r\n            marksInSec.forEach((mId) => {\r\n                if (markIds.includes(mId)) {\r\n                    tmpCount++;\r\n                }\r\n            })\r\n            mostSelectionNumInSec = tmpCount > mostSelectionNumInSec ? tmpCount : mostSelectionNumInSec;\r\n        })\r\n\r\n        //for each section, select the same most number of marks or all of the marks\r\n        //create container for each section, and push in the selected marks first\r\n        let selAndSug: Map<string, Set<string>> = new Map();\r\n        markIds.forEach((markId) => {\r\n            let sectionId: string = '';\r\n            [...sameAttrs, ...filteredDiffAttrs].forEach((attr) => {\r\n                // sectionId += ChartSpec.dataMarkDatum.get(markId)[attr] + ',';\r\n                sectionId += this.filteredDataTable.get(markId)[attr] + ',';\r\n            })\r\n            if (typeof selAndSug.get(sectionId) === 'undefined') {\r\n                selAndSug.set(sectionId, new Set());\r\n            }\r\n            selAndSug.get(sectionId).add(markId);\r\n        })\r\n\r\n        //find suggestion\r\n        let valueOfSameAttrs: string[] = [];\r\n        sameAttrs.forEach((sAttr) => {\r\n            valueOfSameAttrs.push(this.filteredDataTable.get(markIds[0])[sAttr].toString());\r\n            // valueOfSameAttrs.push(ChartSpec.dataMarkDatum.get(markIds[0])[sAttr]);\r\n        })\r\n        sections.forEach((marksInSec, secId) => {\r\n            marksInSec.forEach((mId) => {\r\n                if (filteredDiffAttrs.length > 0) {//there are diff categorical attrs\r\n                    if (typeof selAndSug.get(secId) === 'undefined') {\r\n                        selAndSug.set(secId, new Set());\r\n                    }\r\n\r\n                    if (allSelected) {\r\n                        //only those sections with the same attributes as the selected marks\r\n                        let blocks = secId.split(',');\r\n                        if (Tool.arrayContained(blocks, valueOfSameAttrs)) {\r\n                            selAndSug.get(secId).add(mId);\r\n                        }\r\n                    } else {\r\n                        if (selAndSug.get(secId).size < mostSelectionNumInSec) {\r\n                            //judge if this mark has the same attr value\r\n                            let hasSameVal: boolean = true;\r\n                            for (let j = 0, len2 = sameAttrs.length; j < len2; j++) {\r\n                                // if (ChartSpec.dataMarkDatum.get(mId)[sameAttrs[j]] !== ChartSpec.dataMarkDatum.get(markIds[0])[sameAttrs[j]]) {\r\n                                if (this.filteredDataTable.get(mId)[sameAttrs[j]] !== this.filteredDataTable.get(markIds[0])[sameAttrs[j]]) {\r\n                                    hasSameVal = false;\r\n                                    break;\r\n                                }\r\n                            }\r\n                            if (hasSameVal) {\r\n                                selAndSug.get(secId).add(mId);\r\n                            }\r\n                        }\r\n                    }\r\n                } else if (filteredDiffAttrs.length === 0 && markIds.length > 1) {//there are no diff categorical attrs && selected more than 1 mark\r\n                    let hasSameVal: boolean = true;\r\n                    for (let j = 0, len2 = sameAttrs.length; j < len2; j++) {\r\n                        // if (ChartSpec.dataMarkDatum.get(mId)[sameAttrs[j]] !== ChartSpec.dataMarkDatum.get(markIds[0])[sameAttrs[j]]) {\r\n                        if (this.filteredDataTable.get(mId)[sameAttrs[j]] !== this.filteredDataTable.get(markIds[0])[sameAttrs[j]]) {\r\n                            hasSameVal = false;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (hasSameVal) {\r\n                        selAndSug.get(secId).add(mId);\r\n                    }\r\n                }\r\n            })\r\n        })\r\n\r\n        //add suggestion result to the selected marks\r\n        let selectedMarks: string[] = [];\r\n        selAndSug.forEach((selAndSugMarks, secId) => {\r\n            selectedMarks.push(...selAndSugMarks);\r\n        })\r\n        return selectedMarks;\r\n    }\r\n\r\n    /**\r\n     * the selected marks are non data encoded marks\r\n     */\r\n    public static suggestSelBasedOnChart(markIds: string[]): string[] {\r\n        const [sameAttrs, diffAttrs] = this.compareAttrs(markIds, this.nonDataTable, this.nonDataAttrs, false);\r\n        // const allNonDataMarks: string[] = Array.from(this.nonDataTable.keys());\r\n        let suggestMarks: string[] = [];\r\n        this.nonDataTable.forEach((d: IDataItem, mId: string) => {\r\n            let flag = true;\r\n            sameAttrs.forEach((an: string) => {\r\n                if (d[an] !== this.nonDataTable.get(markIds[0])[an]) {\r\n                    flag = false;\r\n                }\r\n            })\r\n            if (flag) {\r\n                suggestMarks.push(mId);\r\n            }\r\n        })\r\n\r\n        return [...markIds, ...suggestMarks];\r\n    }\r\n\r\n    /**\r\n     * partition the chart according to the given attributes when doing data-driven suggestion\r\n     * @param sameAttr \r\n     * @param filteredDiffAttrs \r\n     * @param markIds \r\n     * @param hasOneMark \r\n     */\r\n    public static partitionChart(sameAttrs: string[], filteredDiffAttrs: string[], markIds: string[], dataTable: Map<string, IDataItem>, hasOneMark: boolean = false): [Map<string, string[]>, string[]] {\r\n        console.log('same and diff attrs: ', sameAttrs, filteredDiffAttrs);\r\n        let sections = new Map();\r\n        let sectionIdRecord: string[][] = [];\r\n\r\n        markIds.forEach((markId) => {\r\n            let sectionId: string = '';\r\n            let seperateSecId: string[] = [];//for ordering section ids\r\n            [...sameAttrs, ...filteredDiffAttrs].forEach((attr) => {\r\n                sectionId += dataTable.get(markId)[attr] + ',';\r\n                seperateSecId.push(dataTable.get(markId)[attr].toString());\r\n            })\r\n            if (hasOneMark) {\r\n                sectionId += markId + ',';\r\n                seperateSecId.push(markId);\r\n            }\r\n            if (typeof sections.get(sectionId) === 'undefined') {\r\n                sections.set(sectionId, []);\r\n                sectionIdRecord.push(seperateSecId);\r\n            }\r\n            sections.get(sectionId).push(markId);\r\n        })\r\n\r\n        //order section ids\r\n        sectionIdRecord.sort((a, b) => {\r\n            let diffValueIdx = 0;\r\n            for (let i = 0, len = [...sameAttrs, ...filteredDiffAttrs].length; i < len; i++) {\r\n                if (a[i] !== b[i]) {\r\n                    diffValueIdx = i;\r\n                    break;\r\n                }\r\n            }\r\n            if (b[diffValueIdx] > a[diffValueIdx]) {\r\n                return -1;\r\n            } else {\r\n                return 1;\r\n            }\r\n        })\r\n        const orderedSectionIds = sectionIdRecord.map(a => a.join(',') + ',');\r\n        console.log('sections: ', sections, orderedSectionIds);\r\n        return [sections, orderedSectionIds];\r\n    }\r\n\r\n    /**\r\n     * filter attributes according to the effectiveness ranking\r\n     * @param attrs \r\n     */\r\n    public static filterAttrs(attrs: string[], selectedMarks?: string[]) {\r\n        let filteredAttrs: string[] = [];\r\n        let typeRecorder: string[] = [];\r\n        for (let i = 0, len = this.EFFECTIVENESS_RANKING.length; i < len; i++) {\r\n            for (let j = 0, len2 = attrs.length; j < len2; j++) {\r\n                let tmpAttrType: string[] = ChartSpec.chartUnderstanding[attrs[j]];\r\n                console.log('test filter attrs: ', attrs[j], tmpAttrType, this.EFFECTIVENESS_RANKING[i]);\r\n                if (typeof tmpAttrType !== 'undefined') {\r\n                    console.log(tmpAttrType.includes(this.EFFECTIVENESS_RANKING[i]), Tool.arrayContained(tmpAttrType, typeRecorder), Tool.arrayContained(typeRecorder, tmpAttrType), typeRecorder.length === 0)\r\n                    if (tmpAttrType.includes(this.EFFECTIVENESS_RANKING[i]) && (Tool.arrayContained(tmpAttrType, typeRecorder) || Tool.arrayContained(typeRecorder, tmpAttrType) || typeRecorder.length === 0)) {\r\n                        filteredAttrs.push(attrs[j]);\r\n                        typeRecorder = tmpAttrType;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        if (typeof selectedMarks !== 'undefined') {\r\n            //check whether do we need to filter out some attrs like color or shape\r\n            const tmpSections: Map<string, string[]> = new Map();\r\n            selectedMarks.forEach((mId: string) => {\r\n                const tmpDataItem: IDataItem = this.filteredDataTable.get(mId);\r\n                let keyArr: string[] = [];\r\n                if (typeof tmpDataItem !== 'undefined') {\r\n                    filteredAttrs.forEach((fa: string) => {\r\n                        keyArr.push(`${tmpDataItem[fa]}`);\r\n                    })\r\n                }\r\n                const key: string = keyArr.length > 0 ? keyArr.join(',') : '';\r\n                if (typeof tmpSections.get(key) === 'undefined') {\r\n                    tmpSections.set(key, []);\r\n                }\r\n                tmpSections.get(key).push(mId);\r\n            })\r\n            console.log('tmp sections: ', tmpSections);\r\n            const extraAttrs: Set<string> = new Set();\r\n            tmpSections.forEach((mIds: string[], key: string) => {\r\n                attrs.forEach((a: string) => {\r\n                    if (!filteredAttrs.includes(a)) {\r\n                        for (let i = 0, len = mIds.length; i < len; i++) {\r\n                            if (this.filteredDataTable.get(mIds[i])[a] !== this.filteredDataTable.get(mIds[0])[a]) {\r\n                                extraAttrs.add(a);\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                })\r\n            })\r\n            console.log('extra attrs: ', extraAttrs);\r\n            return [...filteredAttrs, ...extraAttrs];\r\n        }\r\n        return filteredAttrs;\r\n    }\r\n\r\n    /**\r\n     * compare attributes of the selected marks, find the same and different attributes\r\n     * @param markIds \r\n     * @param markData \r\n     */\r\n    public static compareAttrs(markIds: string[], dataTable: Map<string, IDataItem>, allAttrs: string[], isDataAttr: boolean): string[][] {\r\n        let sameAttr: string[] = [], diffAttrs: string[] = [];\r\n        allAttrs.forEach((attrName: string) => {\r\n            let sameAttrType = true;\r\n            const firstMarkType = dataTable.get(markIds[0])[attrName];\r\n            for (let i = 1, len = markIds.length; i < len; i++) {\r\n                if (dataTable.get(markIds[i])[attrName] !== firstMarkType) {\r\n                    sameAttrType = false;\r\n                    break;\r\n                }\r\n            }\r\n            if ((isDataAttr && !this.EXCLUDED_DATA_ATTR.includes(attrName) && this.attrType[attrName] === this.CATEGORICAL_ATTR) || !isDataAttr) {\r\n                sameAttrType ? sameAttr.push(attrName) : diffAttrs.push(attrName);\r\n            }\r\n\r\n        })\r\n\r\n        return [sameAttr, diffAttrs];\r\n    }\r\n\r\n    public static fetchNumericAttrs(dataItem: IDataItem): string[] {\r\n        const numericAttrs: string[] = [];\r\n        for (const key in dataItem) {\r\n            if (!isNaN(Number(dataItem[key])) && dataItem[key] !== '' && !this.NUMERIC_CATEGORICAL_ATTR.includes(key)) {\r\n                numericAttrs.push(key);\r\n            }\r\n        }\r\n        return numericAttrs;\r\n    }\r\n\r\n    public static sortNumeric(markData: Map<string, IDataItem>, attrName: string) {\r\n        let markIds: string[] = [...markData.keys()];\r\n        markIds.sort((a: string, b: string) => (Number(markData.get(a)[attrName]) - Number(markData.get(b)[attrName])));\r\n        this.numericAttrOrder.set(attrName, markIds);\r\n    }\r\n\r\n    /**\r\n     * determine the attribute type of the data attributes of marks\r\n     * @param markData \r\n     */\r\n    public static extractAttrValueAndDeterminType(markData: Map<string, IDataItem>) {\r\n        this.filteredDataTable.clear();\r\n        this.dataAttrs = [];\r\n        this.timeAttrs = [];\r\n        this.dataValues.clear();\r\n        this.attrType = {};\r\n        markData.forEach((dataDatum: IDataItem, markId: string) => {\r\n            let tmpDataItem: IDataItem = {};\r\n            for (const key in dataDatum) {\r\n                let tmpAttrType: string = (!isNaN(Number(dataDatum[key])) && dataDatum[key] !== '' && !this.NUMERIC_CATEGORICAL_ATTR.includes(key)) ? this.NUMERIC_ATTR : this.CATEGORICAL_ATTR;\r\n                this.attrType[key] = tmpAttrType;\r\n                //sort numeric\r\n                if (tmpAttrType === this.NUMERIC_ATTR) {\r\n                    this.sortNumeric(markData, key);\r\n                }\r\n\r\n                if (!this.EXCLUDED_DATA_ATTR.includes(key)) {\r\n                    tmpDataItem[key] = dataDatum[key];\r\n                    this.dataAttrs.push(key);\r\n                    if (typeof this.dataValues.get(key) === 'undefined') {\r\n                        this.dataValues.set(key, []);\r\n                    }\r\n                    this.dataValues.get(key).push(dataDatum[key]);\r\n                }\r\n            }\r\n            this.filteredDataTable.set(markId, tmpDataItem);\r\n        })\r\n        this.dataAttrs = [...new Set(this.dataAttrs)];\r\n        //sort data values\r\n        this.sortAttrValues(this.dataValues);\r\n        // console.log('sorted data values: ', this.dataValues);\r\n    }\r\n\r\n    public static extractNonDataAttrValue(markData: Map<string, IDataItem>) {\r\n        this.nonDataTable.clear();\r\n        this.nonDataAttrs = [];\r\n\r\n        let lastType: string = '';\r\n        let typeCount: Map<string, number> = new Map();//key: type value , value: number of times this kind of type shows in a sequence\r\n        typeCount.set('', 0);\r\n        markData.forEach((dataDatum: IDataItem, markId: string) => {\r\n            let tmpDataItem: IDataItem = {};\r\n            for (const key in dataDatum) {\r\n                if (key === '_TYPE' && `${dataDatum[key]}`.includes('-')) {\r\n                    const typeValue: string = `${dataDatum[key]}`;\r\n                    if (typeof typeCount.get(typeValue) === 'undefined') {\r\n                        typeCount.set(typeValue, 0);\r\n                    }\r\n                    if (typeValue !== lastType) {\r\n                        typeCount.set(lastType, typeCount.get(lastType) + 1);\r\n                        lastType = typeValue;\r\n                    }\r\n                    const attrValues: string[] = typeValue.split('-');\r\n                    attrValues.forEach((av: string, i: number) => {\r\n                        if (i === 0) {\r\n                            tmpDataItem._TYPE = `${av}`;\r\n                            this.nonDataAttrs.push('_TYPE');\r\n                            if (typeof this.nonDataValues.get('_TYPE') === 'undefined') {\r\n                                this.nonDataValues.set('_TYPE', []);\r\n                            }\r\n                            this.nonDataValues.get('_TYPE').push(`${av}`);\r\n\r\n                            tmpDataItem._TYPE_IDX = `${typeCount.get(typeValue)}`;\r\n                            this.nonDataAttrs.push('_TYPE_IDX');\r\n                            if (typeof this.nonDataValues.get('_TYPE_IDX') === 'undefined') {\r\n                                this.nonDataValues.set('_TYPE_IDX', []);\r\n                            }\r\n                            this.nonDataValues.get('_TYPE_IDX').push(`${typeCount.get(typeValue)}`);\r\n                        } else {\r\n                            tmpDataItem[`_TYPE${i}`] = av;\r\n                            this.nonDataAttrs.push(`_TYPE${i}`);\r\n                            if (typeof this.nonDataValues.get(`_TYPE${i}`) === 'undefined') {\r\n                                this.nonDataValues.set(`_TYPE${i}`, []);\r\n                            }\r\n                            this.nonDataValues.get(`_TYPE${i}`).push(av);\r\n                        }\r\n                    })\r\n                } else {\r\n                    tmpDataItem[key] = dataDatum[key];\r\n                    this.nonDataAttrs.push(key);\r\n                    if (typeof this.nonDataValues.get(key) === 'undefined') {\r\n                        this.nonDataValues.set(key, []);\r\n                    }\r\n                    this.nonDataValues.get(key).push(dataDatum[key]);\r\n                }\r\n            }\r\n            this.nonDataTable.set(markId, tmpDataItem);\r\n        })\r\n        this.nonDataAttrs = [...new Set(this.nonDataAttrs)];\r\n\r\n        //sort data values\r\n        this.sortAttrValues(this.nonDataValues);\r\n    }\r\n\r\n    public static sortAttrValues(values: Map<string, Array<string | number>>) {\r\n        values.forEach((v: Array<string | number>, aName: string) => {\r\n            v = [...new Set(v)];\r\n            if (this.judgeTimeAttr(v)) {\r\n                this.timeAttrs.push(aName);\r\n            }\r\n            v.sort((a, b) => {\r\n                let aComp: string | number = isNaN(parseFloat(`${a}`)) ? a : parseFloat(`${a}`);\r\n                let bComp: string | number = isNaN(parseFloat(`${b}`)) ? b : parseFloat(`${b}`);\r\n\r\n                if (bComp > aComp) {\r\n                    return -1;\r\n                } else {\r\n                    return 1;\r\n                }\r\n            })\r\n            values.set(aName, v);\r\n        })\r\n    }\r\n\r\n    public static isNonDataAttr(attr: string): boolean {\r\n        return (attr.includes('_TYPE') || attr === 'mShape');\r\n    }\r\n\r\n    public static filterDataSort(dataSort: ISortDataAttr[]): ISortDataAttr[] {\r\n        return dataSort.filter(ds => !Util.EXCLUDED_DATA_ATTR.includes(ds.attr));\r\n    }\r\n\r\n    /**\r\n     * find out to sort with which attr\r\n     */\r\n    public static findUpdatedAttrOrder(sda: ISortDataAttr[]): [boolean, ISortDataAttr] {\r\n        let result: ISortDataAttr = { attr: '', sort: '' };\r\n        let flag = false;\r\n        if (state.sortDataAttrs.length > 0) {\r\n            for (let i = 0, len = state.sortDataAttrs.length; i < len; i++) {\r\n                let found: boolean = false;\r\n                for (let j = 0; j < len; j++) {\r\n                    if (sda[j].attr === state.sortDataAttrs[i].attr) {\r\n                        found = (sda[j].sort !== state.sortDataAttrs[i].sort && sda[j].sort !== AttrSort.INDEX_ORDER);\r\n                        if (found) {\r\n                            result.attr = sda[j].attr;\r\n                            result.sort = sda[j].sort;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                flag = flag || found;\r\n                if (found) {\r\n                    break;\r\n                }\r\n            }\r\n        } else {\r\n            sda.forEach((ds: ISortDataAttr) => {\r\n                if (ds.sort !== AttrSort.INDEX_ORDER) {\r\n                    result.attr = ds.attr;\r\n                    result.sort = ds.sort;\r\n                    flag = true;\r\n                }\r\n            })\r\n        }\r\n\r\n        return [flag, result];\r\n    }\r\n    public static sortDataTable(attrOrder: ISortDataAttr): string[] {\r\n        let result: string[] = [];\r\n        if (attrOrder.attr !== '') {\r\n            switch (attrOrder.sort) {\r\n                case AttrSort.INDEX_ORDER:\r\n                    result = Array.from(state.dataTable.keys());\r\n                    result.sort((a, b) => {\r\n                        const aNum: number = parseInt(a.substring(4));\r\n                        const bNum: number = parseInt(b.substring(4));\r\n                        return aNum < bNum ? -1 : 1;\r\n                    })\r\n                    break;\r\n                case AttrSort.ASSCENDING_ORDER:\r\n                case AttrSort.DESCENDING_ORDER:\r\n                    let arrToOrder: string[][] = [];\r\n                    state.dataTable.forEach((datum, markId) => {\r\n                        if (attrOrder.attr !== 'markId') {\r\n                            arrToOrder.push([markId, datum[attrOrder.attr].toString()]);\r\n                        } else {\r\n                            arrToOrder.push([markId, markId]);\r\n                        }\r\n                    })\r\n                    arrToOrder.sort((a, b) => {\r\n                        let va: string = a[1];\r\n                        let vb: string = b[1];\r\n                        if (attrOrder.attr === 'markId') {\r\n                            va = va.substring(4);\r\n                            vb = vb.substring(4);\r\n                        }\r\n                        const compareA: string | number = !isNaN(Number(va)) ? Number(va) : va;\r\n                        const compareB: string | number = !isNaN(Number(vb)) ? Number(vb) : vb;\r\n                        if (attrOrder.sort === AttrSort.ASSCENDING_ORDER)\r\n                            return compareA < compareB ? -1 : 1;\r\n                        else\r\n                            return compareA > compareB ? -1 : 1;\r\n                    })\r\n                    result = arrToOrder.map(a => a[0]);\r\n                    break;\r\n            }\r\n        }\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * find the first group of keyframes in a keyframe group, for plus button functions\r\n     */\r\n    public static findFirstKfs(kfg: IKeyframeGroup): IKeyframe[] {\r\n        if (kfg.keyframes.length > 0) {\r\n            return kfg.keyframes;\r\n        } else {\r\n            return this.findFirstKfs(kfg.children[0]);\r\n        }\r\n    }\r\n\r\n    public static aniRootToFakeKFGroup(aniunitNode: any, aniId: string, parentChildIdx: number): IKeyframeGroup {\r\n        const keyframes: IKeyframe[] = [];\r\n        state.charts.forEach((chart: string, idx: number) => {\r\n            const tmpKf: IKeyframe = {\r\n                id: idx,\r\n                groupRef: 'id',\r\n                timingRef: TimingSpec.timingRef.previousEnd,\r\n                durationIcon: true,\r\n                hiddenDurationIcon: false,\r\n                duration: aniunitNode.children[0].end - aniunitNode.children[0].start,\r\n                delayIcon: false,\r\n                delay: 0,\r\n                allCurrentMarks: [],\r\n                allGroupMarks: aniunitNode.marks,\r\n                marksThisKf: aniunitNode.marks,\r\n                thumbnail: chart\r\n            }\r\n            keyframes.push(tmpKf);\r\n            KfItem.allKfInfo.set(idx, tmpKf);\r\n        })\r\n        return {\r\n            groupRef: 'root',\r\n            id: 0,\r\n            aniId: aniId,\r\n            marks: aniunitNode.marks,\r\n            children: [],\r\n            keyframes: keyframes,\r\n            timingRef: TimingSpec.timingRef.previousStart,\r\n            delayIcon: false,\r\n            delay: 0,\r\n            newTrack: false\r\n        }\r\n    }\r\n\r\n    public static aniRootToKFGroup(aniunitNode: any, aniId: string, parentChildIdx: number): IKeyframeGroup {\r\n        // console.log('aniunit node: ', aniId, aniunitNode.align, aniunitNode, KfGroup.allAniGroups);\r\n        let kfGroupRoot: IKeyframeGroup = {\r\n            groupRef: aniunitNode.groupRef,\r\n            id: aniunitNode.id,\r\n            aniId: aniId,\r\n            marks: aniunitNode.marks,\r\n            timingRef: aniunitNode.timingRef,\r\n            delay: aniunitNode.delay,\r\n            delayIcon: (typeof aniunitNode.offset !== 'undefined' && aniunitNode.offset !== 0) || (aniunitNode.delay > 0 && parentChildIdx > 0),\r\n            newTrack: (typeof aniunitNode.align === 'undefined' && aniunitNode.groupRef === 'root')\r\n                || (aniunitNode.timingRef === TimingSpec.timingRef.previousStart && parentChildIdx !== 0)\r\n        }\r\n        if (typeof aniunitNode.aniId !== 'undefined') {\r\n            kfGroupRoot.alignId = aniunitNode.aniId;\r\n        }\r\n        if (typeof aniunitNode.offset !== 'undefined') {\r\n            kfGroupRoot.delay = aniunitNode.offset;\r\n        }\r\n        if (typeof aniunitNode.align !== 'undefined') {\r\n            if (aniunitNode.align.type === 'element') {\r\n                kfGroupRoot.newTrack = true;\r\n            }\r\n            kfGroupRoot.alignType = aniunitNode.align.type;\r\n            kfGroupRoot.alignTarget = aniunitNode.align.target;\r\n            // console.log('testing !!!', KfGroup.allAniGroups);\r\n            // KfGroup.allAniGroups.forEach((tmpAniGroup: KfGroup) => {\r\n            //     if (tmpAniGroup.alignId === kfGroupRoot.alignTarget) {\r\n            //         console.log('testing !', tmpAniGroup, kfGroupRoot);\r\n            //     }\r\n            // })\r\n\r\n            kfGroupRoot.merge = aniunitNode.align.merge;\r\n        }\r\n        if (typeof aniunitNode.refValue !== 'undefined') {\r\n            kfGroupRoot.refValue = aniunitNode.refValue;\r\n        }\r\n        kfGroupRoot.children = [];\r\n        kfGroupRoot.keyframes = [];\r\n        if (aniunitNode.children.length > 0) {\r\n            if (aniunitNode.children[0].children.length > 0) {\r\n                let childrenIsGroup: boolean = true;\r\n                if (typeof aniunitNode.children[0].children[0].definedById !== 'undefined') {\r\n                    if (!aniunitNode.children[0].children[0].definedById) {\r\n                        childrenIsGroup = false;\r\n                    }\r\n                }\r\n                if (childrenIsGroup) {\r\n                    aniunitNode.children.forEach((c: any, i: number) => {\r\n                        const kfGroupChild: IKeyframeGroup = this.aniRootToKFGroup(c, aniId, i);\r\n                        kfGroupRoot.children.push(kfGroupChild);\r\n                    })\r\n                } else {\r\n                    const judgeMerge: any = this.mergeNode(aniunitNode.children);\r\n                    if (!judgeMerge.merge) {\r\n                        aniunitNode.children.forEach((k: any, i: number) => kfGroupRoot.keyframes.push(this.aniLeafToKF(k, i, aniId, kfGroupRoot, kfGroupRoot.marks)))\r\n                    } else {\r\n                        kfGroupRoot.keyframes.push(this.aniLeafToKF(judgeMerge.mergedNode, 0, aniId, kfGroupRoot, kfGroupRoot.marks));\r\n                    }\r\n                }\r\n            } else {//children are keyframes\r\n                const judgeMerge: any = this.mergeNode(aniunitNode.children);\r\n                if (!judgeMerge.merge) {\r\n                    aniunitNode.children.forEach((k: any, i: number) => kfGroupRoot.keyframes.push(this.aniLeafToKF(k, i, aniId, kfGroupRoot, kfGroupRoot.marks)))\r\n                } else {\r\n                    kfGroupRoot.keyframes.push(this.aniLeafToKF(judgeMerge.mergedNode, 0, aniId, kfGroupRoot, kfGroupRoot.marks));\r\n                }\r\n            }\r\n        } else {\r\n            // console.log('testing: ', aniunitNode);\r\n        }\r\n        return kfGroupRoot;\r\n    }\r\n\r\n    /**\r\n     * if children start and end at the same time, merge them into one node\r\n     * @param children \r\n     */\r\n    public static mergeNode(children: any[]): { merge: boolean, mergedNode?: any } {\r\n        let merge: boolean = true;\r\n        for (let i = 0, len = children.length; i < len; i++) {\r\n            const c: any = children[i];\r\n            if (c.start !== children[0].start || c.end !== children[0].end) {\r\n                merge = false;\r\n                break;\r\n            }\r\n        }\r\n        if (merge) {\r\n            children.forEach((c: any) => {\r\n                children[0].marks = [...children[0].marks, ...c.marks];\r\n            })\r\n            return { merge: true, mergedNode: children[0] }\r\n        }\r\n        return { merge: false };\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param aniLeaf \r\n     * @param leafIdx : leaf index in its parent, need this to determine whether to draw offset or not\r\n     * @param aniId \r\n     * @param parentId \r\n     */\r\n    public static aniLeafToKF(aniLeaf: any, leafIdx: number, aniId: string, parentObj: IKeyframeGroup, parentMarks: string[]): IKeyframe {\r\n        // console.log('creating kf info: ', aniLeaf, Animation.animations, KfGroup.allActions, aniId);\r\n        //find the min and max duraion of kfs, in order to render kfs\r\n        const tmpDuration: number = aniLeaf.end - aniLeaf.start;\r\n        aniLeaf.marks = [...new Set(aniLeaf.marks)];\r\n        //find all the marks animate before marks in aniLeaf\r\n        const marksInOrder: string[] = Animation.animations.get(aniId).marksInOrder;\r\n        let targetIdx: number = -1;\r\n        let minStartTime: number = 100000;//min start time of marks in this leaf\r\n        aniLeaf.marks.forEach((m: string) => {\r\n            const tmpIdx: number = marksInOrder.indexOf(m);\r\n            if (Animation.allMarkAni.get(m).startTime < minStartTime) {\r\n                minStartTime = Animation.allMarkAni.get(m).startTime;\r\n                targetIdx = tmpIdx;\r\n            }\r\n        })\r\n        let allCurrentMarks: string[] = [];\r\n\r\n        Animation.animations.forEach((ani: any) => {\r\n            const tmpMarksInOrder: string[] = ani.marksInOrder;\r\n            tmpMarksInOrder.forEach((m: string) => {\r\n                if (Animation.allMarkAni.get(m).startTime < minStartTime) {\r\n                    allCurrentMarks.push(m);\r\n                }\r\n            })\r\n        })\r\n\r\n        let drawDelay: boolean = (aniLeaf.delay > 0 && leafIdx > 0 && !(aniLeaf.timingRef === TimingSpec.timingRef.previousEnd && typeof aniLeaf.alignTo !== 'undefined'));\r\n        let drawDuration: boolean = aniLeaf.timingRef === TimingSpec.timingRef.previousEnd || parentObj.marks.length === aniLeaf.marks.length;\r\n        if (typeof aniLeaf.alignTo !== 'undefined') {\r\n            if (typeof KfItem.allKfInfo.get(aniLeaf.alignTo) !== 'undefined') {\r\n                drawDuration = KfItem.allKfInfo.get(aniLeaf.alignTo).durationIcon;\r\n            }\r\n        }\r\n        // console.log('animations:', Animation.animations, aniId);\r\n        if (Animation.animations.get(aniId).actions.length > 0) {\r\n            if (Animation.animations.get(aniId).actions[0].oriActionType === 'appear') {\r\n                drawDuration = false;\r\n            }\r\n        }\r\n        let drawHiddenDuration: boolean = (aniLeaf.timingRef === TimingSpec.timingRef.previousStart && parentMarks.length > aniLeaf.marks.length);\r\n        let tmpKf: IKeyframe = {\r\n            id: aniLeaf.id,\r\n            groupRef: aniLeaf.groupRef,\r\n            refValue: aniLeaf.refValue,\r\n            timingRef: aniLeaf.timingRef,\r\n            delay: aniLeaf.delay,\r\n            delayIcon: drawDelay,\r\n            duration: tmpDuration,\r\n            durationIcon: drawDuration,\r\n            hiddenDurationIcon: drawHiddenDuration,\r\n            allCurrentMarks: allCurrentMarks,\r\n            allGroupMarks: parentMarks,\r\n            marksThisKf: aniLeaf.marks\r\n        }\r\n        if (typeof aniLeaf.alignWith !== 'undefined') {\r\n            tmpKf.alignWith = aniLeaf.alignWith;\r\n        }\r\n        if (typeof aniLeaf.alignWithIds !== 'undefined') {\r\n            tmpKf.alignWithKfs = aniLeaf.alignWithIds;\r\n        }\r\n        if (typeof aniLeaf.alignTo !== 'undefined') {\r\n            tmpKf.alignTo = aniLeaf.alignTo;\r\n            tmpKf.timingRef = parentObj.timingRef;\r\n        }\r\n        KfItem.allKfInfo.set(tmpKf.id, tmpKf);\r\n        // console.log(aniLeaf, tmpKf.delayIcon);\r\n        return tmpKf;\r\n    }\r\n    public static judgeFirstKf(kfg: KfGroup | KfTrack): boolean {\r\n        while (kfg instanceof KfGroup) {\r\n            if (kfg.parentObj instanceof KfTrack) {\r\n                return true\r\n            } else {\r\n                if (typeof kfg.parentObj !== 'undefined') {\r\n                    for (let i = 0; i < kfg.parentObj.children.length; i++) {\r\n                        if (kfg.parentObj.children[i] instanceof KfGroup) {\r\n                            if (kfg.parentObj.children[i].id !== kfg.id) {\r\n                                return false;\r\n                            } else {\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                kfg = kfg.parentObj;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    /*\r\n    \r\n    1\r\n    2n\r\n    */\r\n    public static seek(index: any[], n: number): boolean {\r\n        var flag = false, m = n; //flagm  \r\n        do {\r\n            index[n]++;\r\n            if (index[n] == index.length) //  \r\n                index[n--] = -1; //  \r\n            else if (!(function () {\r\n                for (var i = 0; i < n; i++)\r\n                    if (index[i] == index[n]) return true;\r\n                return false;\r\n            })()) //  \r\n                if (m == n) //  \r\n                    flag = true;\r\n                else\r\n                    n++;\r\n        } while (!flag && n >= 0)\r\n        return flag;\r\n    }\r\n    public static perm(arr: any[]): any[][] {\r\n        let result: any[][] = [];\r\n        var index = new Array(arr.length);\r\n        for (var i = 0; i < index.length; i++) {\r\n            index[i] = -1;\r\n        }\r\n        for (i = 0; i < index.length - 1; i++) {\r\n            this.seek(index, i);\r\n        }\r\n        while (this.seek(index, index.length - 1)) {\r\n            var temp = [];\r\n            for (i = 0; i < index.length; i++) {\r\n                temp.push(arr[index[i]]);\r\n            }\r\n            result.push(temp);\r\n        }\r\n        return result;\r\n    }\r\n\r\n    public static checkConti(attrCombs: string[][], targetAttrs: string[]): string[][] {\r\n        const tmpAttrCombs: string[] = attrCombs.map(x => x.join(','));\r\n        let combTargetAttrs = this.perm(targetAttrs);\r\n        let combTargetAttrStrs: string[] = combTargetAttrs.map(x => x.join(','));\r\n        for (let i = 0; i < tmpAttrCombs.length;) {\r\n            let flag: boolean = false;\r\n            for (let j = 0, len2 = combTargetAttrStrs.length; j < len2; j++) {\r\n                if (tmpAttrCombs[i].includes(combTargetAttrStrs[j])) {\r\n                    flag = true;\r\n                    break;\r\n                }\r\n            }\r\n            if (!flag) {//this combination breaks the continuity of the target attrs\r\n                tmpAttrCombs.splice(i, 1);\r\n            } else {\r\n                i++\r\n            }\r\n        }\r\n        attrCombs = tmpAttrCombs.map(x => x.split(','));\r\n        return attrCombs;\r\n    }\r\n\r\n    /**\r\n     * judge whether one attr is time attr according to its values \r\n     * @param {*} aValues \r\n     */\r\n    public static judgeTimeAttr(aValues: Array<string | number>): boolean {\r\n        for (let i = 0, len = aValues.length; i < len; i++) {\r\n            if (!this.TIME_ATTR_VALUE.includes(`${aValues[i]}`.toLowerCase())) {\r\n                return false;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    public static fetchTimeNum(timeStr: string): number {\r\n        switch (timeStr) {\r\n            case 'jan':\r\n            case 'january':\r\n                return 1;\r\n            case 'feb':\r\n            case 'february':\r\n                return 2;\r\n            case 'mar':\r\n            case 'march':\r\n                return 3;\r\n            case 'apr':\r\n            case 'april':\r\n                return 4;\r\n            case 'may':\r\n                return 5;\r\n            case 'jun':\r\n            case 'june':\r\n                return 6;\r\n            case 'jul':\r\n            case 'july':\r\n                return 7;\r\n            case 'aug':\r\n            case 'august':\r\n                return 8;\r\n            case 'sep':\r\n            case 'september':\r\n                return 9;\r\n            case 'oct':\r\n            case 'october':\r\n                return 10;\r\n            case 'nov':\r\n            case 'november':\r\n                return 11;\r\n            case 'dec':\r\n            case 'december':\r\n                return 12;\r\n            case 'mon':\r\n            case 'monday':\r\n                return 1;\r\n            case 'tue':\r\n            case 'tuesday':\r\n                return 2;\r\n            case 'wed':\r\n            case 'wednesday':\r\n                return 3;\r\n            case 'thr':\r\n            case 'thursday':\r\n                return 4;\r\n            case 'fri':\r\n            case 'friday':\r\n                return 5;\r\n            case 'sat':\r\n            case 'saturday':\r\n                return 6;\r\n            case 'sun':\r\n            case 'sunday':\r\n                return 7;\r\n        }\r\n    }\r\n\r\n    public static extractAttrValueOrder(sortedValues: string[]): string[][] {\r\n        let valueOrderRecord: Map<number, Set<string>> = new Map();\r\n        sortedValues.forEach((valComb: string) => {\r\n            const values: string[] = valComb.split(',');\r\n            values.forEach((v: string, idx: number) => {\r\n                if (v !== '') {\r\n                    if (typeof valueOrderRecord.get(idx) === 'undefined') {\r\n                        valueOrderRecord.set(idx, new Set());\r\n                    }\r\n                    valueOrderRecord.get(idx).add(v);\r\n                }\r\n            })\r\n        })\r\n        let result: string[][] = [];\r\n        valueOrderRecord.forEach((valueSort: Set<string>, idx: number) => {\r\n            result[idx] = [...valueSort];\r\n        })\r\n        return result;\r\n    }\r\n\r\n    /**\r\n     * extract class names from the given marks\r\n     * @param markArr \r\n     */\r\n    public static extractClsFromMarks(markArr: string[]): [string[], boolean] {\r\n        const clsOfMarks: Set<string> = new Set();\r\n        let nonDataCls: boolean = false;\r\n        // console.log('Animation.markClass', Animation.markClass);\r\n        markArr.forEach((mId: string) => {\r\n            const clsToAdd: string = Animation.markClass.get(mId);\r\n            if (clsToAdd.includes('axis') || clsToAdd.includes('legend') || clsToAdd.includes('title')) {\r\n                nonDataCls = true;\r\n            }\r\n            clsOfMarks.add(Animation.markClass.get(mId));\r\n        })\r\n        return [[...clsOfMarks], nonDataCls];\r\n    }\r\n\r\n    public static cloneObj(obj: any): any {\r\n        let objStr: string = JSON.stringify(obj);\r\n        return JSON.parse(objStr);\r\n    }\r\n\r\n    public static addAttrValue(valueSet: Set<string>, val: string): void {\r\n        if (!valueSet.has(val) && !valueSet.has(`000_${val}`) && !valueSet.has(`zzz_${val}`)) {\r\n            valueSet.add(val);\r\n        }\r\n    }\r\n\r\n    public static extractNumInStr(str: string): string | number {\r\n        const firstStr: string = str.split(/[^0-9]/ig)[0];\r\n        const num: number = parseFloat(firstStr);\r\n        if (!isNaN(num)) {\r\n            return num;\r\n        }\r\n        return str;\r\n    }\r\n}","import { state, State } from './state'\r\nimport { IDataItem, ISortDataAttr, IKeyframeGroup, IKfGroupSize, IPath, IKeyframe, IActivatePlusBtn } from './core/ds'\r\nimport * as action from './action'\r\nimport Util from './core/util'\r\nimport { AnimationItem } from 'lottie-web/build/player/lottie'\r\nimport KfItem from '../components/widgets/kfItem'\r\nimport KfGroup from '../components/widgets/kfGroup'\r\nimport CanisGenerator, { IChartSpec, ICanisSpec, IAnimationSpec, IGrouping } from './core/canisGenerator'\r\nimport PlusBtn from '../components/widgets/plusBtn'\r\nimport Renderer from './renderer'\r\nimport { KfContainer } from '../components/kfContainer'\r\nimport { suggestBox } from '../components/widgets/suggestBox'\r\nimport { TimingSpec, Animation } from '../canis/moduleIdx'\r\n\r\nexport default class Reducer {\r\n    static list: any = {};\r\n\r\n    public static listen(key: string, fn: any): void {\r\n        if (!this.list[key]) {\r\n            this.list[key] = [];\r\n        }\r\n        this.list[key].push(fn);\r\n    }\r\n\r\n    public static triger(key: string, prop: any): void {\r\n        let fns = this.list[key];\r\n        if (!fns || fns.length == 0) {\r\n            return;\r\n        }\r\n        for (var i = 0, fn; fn = fns[i++];) {\r\n            fn.apply(this, [prop]);\r\n        }\r\n    }\r\n\r\n    public static updateAniAlign(actionType: string, actionInfo: { targetAniId: string, currentAniId: string }) {\r\n        const animations: IAnimationSpec[] = state.spec.animations;\r\n        let currentAni: IAnimationSpec;\r\n        let currentAniIdx: number;\r\n        let targetAni: IAnimationSpec;\r\n        let targetAniIdx: number;\r\n        for (let i = 0, len = animations.length; i < len; i++) {\r\n            let a: IAnimationSpec = animations[i];\r\n            if (`${a.chartIdx}_${a.selector}` === actionInfo.currentAniId) {\r\n                currentAni = a;\r\n                currentAniIdx = i;\r\n            } else if (`${a.chartIdx}_${a.selector}` === actionInfo.targetAniId) {\r\n                targetAni = a;\r\n                targetAniIdx = i;\r\n            }\r\n        }\r\n        // if (actionType === action.UPDATE_ANI_ALIGN_AFTER_KF || actionType === action.UPDATE_ANI_ALIGN_WITH_KF) {\r\n        //     if (currentAni.selector.split(',').length > targetAni.selector.split(',').length) {\r\n        //         [currentAni, targetAni] = [targetAni, currentAni];\r\n        //         targetAni.grouping = currentAni.grouping;\r\n        //         delete currentAni.grouping;\r\n        //         [currentAniIdx, targetAniIdx] = [targetAniIdx, currentAniIdx];\r\n        //         [actionInfo.currentAniId, actionInfo.targetAniId] = [actionInfo.targetAniId, actionInfo.currentAniId];\r\n        //     }\r\n        // }\r\n        let targetAniId: string;\r\n        switch (actionType) {\r\n            case action.UPDATE_ANI_ALIGN_AFTER_ANI_WITH_DELAY:\r\n                if (typeof currentAni.align !== 'undefined') {\r\n                    const alignedOnData: boolean = typeof Animation.animations.get(actionInfo.currentAniId).alignOnData === 'undefined' ? false : Animation.animations.get(actionInfo.currentAniId).alignOnData;\r\n                    //remove align and set grouping for this ani\r\n                    delete currentAni.align;\r\n                    if (alignedOnData) {\r\n                        currentAni.grouping = targetAni.grouping;\r\n                    } else {\r\n                        currentAni.grouping = {\r\n                            groupBy: 'id',\r\n                            reference: TimingSpec.timingRef.previousEnd\r\n                        }\r\n                    }\r\n                }\r\n                currentAni.reference = TimingSpec.timingRef.previousEnd;\r\n                currentAni.offset = 300;\r\n                break;\r\n            case action.UPDATE_ANI_ALIGN_AFTER_ANI:\r\n                if (typeof currentAni.align !== 'undefined') {\r\n                    const alignedOnData: boolean = typeof Animation.animations.get(actionInfo.currentAniId).alignOnData === 'undefined' ? false : Animation.animations.get(actionInfo.currentAniId).alignOnData;\r\n                    //remove align and set grouping for this ani\r\n                    delete currentAni.align;\r\n                    if (alignedOnData) {\r\n                        currentAni.grouping = targetAni.grouping;\r\n                    } else {\r\n                        currentAni.grouping = {\r\n                            groupBy: 'id',\r\n                            reference: TimingSpec.timingRef.previousEnd\r\n                        }\r\n                    }\r\n                }\r\n                currentAni.reference = TimingSpec.timingRef.previousEnd;\r\n                currentAni.offset = 0;\r\n                break;\r\n            case action.UPDATE_ANI_ALIGN_WITH_ANI:\r\n                currentAni.reference = TimingSpec.timingRef.previousStart;\r\n                if (typeof currentAni.align !== 'undefined') {\r\n                    delete currentAni.align;\r\n                    currentAni.grouping = targetAni.grouping;\r\n                }\r\n                break;\r\n            case action.UPDATE_ANI_ALIGN_AFTER_KF:\r\n                if (typeof targetAni.id === 'undefined') {\r\n                    targetAni.id = actionInfo.targetAniId\r\n                }\r\n                animations[targetAniIdx] = targetAni;\r\n                targetAniId = targetAni.id;\r\n                currentAni.align = { type: 'element', target: targetAniId, merge: false };\r\n                currentAni.reference = TimingSpec.timingRef.previousEnd;\r\n                break;\r\n            case action.UPDATE_ANI_ALIGN_WITH_KF:\r\n                if (typeof targetAni.id === 'undefined') {\r\n                    targetAni.id = actionInfo.targetAniId\r\n                }\r\n                animations[targetAniIdx] = targetAni;\r\n                targetAniId = targetAni.id;\r\n                currentAni.align = { type: 'element', target: targetAniId, merge: false };\r\n                currentAni.reference = TimingSpec.timingRef.previousStart;\r\n                break;\r\n        }\r\n        animations.splice(currentAniIdx, 1);\r\n        for (let i = 0, len = animations.length; i < len; i++) {\r\n            let a: IAnimationSpec = animations[i];\r\n            if (`${a.chartIdx}_${a.selector}` === actionInfo.targetAniId) {\r\n                animations.splice(i + 1, 0, currentAni);\r\n                break;\r\n            }\r\n        }\r\n        state.spec = { ...state.spec, animations: animations };\r\n    }\r\n}\r\n\r\nReducer.listen(action.RESET_STATE, () => {\r\n    Reducer.triger(action.UPDATE_SELECTION, []);\r\n    state.spec = { charts: state.spec.charts, animations: [] };\r\n    suggestBox.removeSuggestBox();\r\n})\r\n\r\nReducer.listen(action.UPDATE_LOADING_STATUS, (actionInfo: { il: boolean, srcDom: HTMLElement, content: string }) => {\r\n    state.isLoading = actionInfo.il;\r\n    if (actionInfo.il) {\r\n        Renderer.renderLoading(actionInfo.srcDom, actionInfo.content);\r\n    } else {\r\n        Renderer.removeLoading();\r\n    }\r\n})\r\n\r\nReducer.listen(action.KEYFRAME_ZOOM_LEVEL, (zl: number) => {\r\n    state.zoomLevel = zl;\r\n})\r\n\r\nReducer.listen(action.UPDATE_DATA_SORT, (sdaArr: ISortDataAttr[]) => {\r\n    state.sortDataAttrs = Util.filterDataSort(sdaArr);\r\n})\r\nReducer.listen(action.UPDATE_DATA_ORDER, (dord: string[]) => {\r\n    state.dataOrder = dord;\r\n})\r\nReducer.listen(action.UPDATE_DATA_TABLE, (dt: Map<string, IDataItem>) => {\r\n    state.dataTable = dt;\r\n})\r\nReducer.listen(action.LOAD_CHARTS, (chartContent: string[]) => {\r\n    State.tmpStateBusket.push({\r\n        historyAction: { actionType: action.UPDATE_SELECTION, actionVal: state.selection },\r\n        currentAction: { actionType: action.UPDATE_SELECTION, actionVal: [] }\r\n    });\r\n    Reducer.triger(action.UPDATE_SELECTION, []);\r\n    // document.getElementById('chartContainer').innerHTML = '';\r\n    state.charts = chartContent;\r\n})\r\nReducer.listen(action.TOGGLE_SUGGESTION, (suggestion: boolean) => {\r\n    state.suggestion = suggestion;\r\n})\r\nReducer.listen(action.UPDATE_SELECTION, (selection: string[]) => {\r\n    selection = [...new Set(selection)];\r\n    state.selection = selection;\r\n})\r\nReducer.listen(action.UPDATE_LOTTIE, (lai: AnimationItem) => {\r\n    state.lottieAni = lai;\r\n})\r\nReducer.listen(action.UPDATE_LOTTIE_SPEC, (ls: any) => {\r\n    state.lottieSpec = ls;\r\n})\r\nReducer.listen(action.UPDATE_STATIC_KEYFRAME, (staticMarks: string[]) => {\r\n    state.staticMarks = staticMarks;\r\n})\r\nReducer.listen(action.UPDATE_KEYFRAME_TRACKS, (animations: Map<string, any>) => {\r\n    //reset the min and max duration of KfItem\r\n    PlusBtn.allPlusBtn = [];\r\n    // PlusBtn.plusBtnMapping.clear();\r\n    KfItem.allKfItems.clear();\r\n    KfItem.allKfInfo.clear();\r\n    KfGroup.allActions.clear();\r\n    KfGroup.allAniGroups.clear();\r\n    KfGroup.allAniGroupInfo.clear();\r\n    const rootGroup: IKeyframeGroup[] = [];\r\n    if (state.charts.length === 1) {\r\n        [...animations].forEach((a: any) => {\r\n            let aniId: string = a[0];\r\n            KfGroup.allActions.set(aniId, a[1].actions[0]);\r\n            rootGroup.push(Util.aniRootToKFGroup(a[1].root, aniId, -1));\r\n        });\r\n    } else {\r\n        let aniId: string = [...animations][0][0];\r\n        KfGroup.allActions.set(aniId, [...animations][0][1].actions[0]);\r\n        rootGroup.push(Util.aniRootToFakeKFGroup([...animations][0][1].root, aniId, -1));\r\n    }\r\n    if (rootGroup.length > 0) {\r\n        rootGroup[0].newTrack = false;\r\n    }\r\n    state.keyframeGroups = rootGroup;\r\n})\r\nReducer.listen(action.ACTIVATE_PLUS_BTN, (plusBtnInfo: IActivatePlusBtn) => {\r\n    state.activatePlusBtn = plusBtnInfo;\r\n})\r\nReducer.listen(action.UPDATE_KEYFRAME_CONTAINER_SLIDER, (kfGroupSize: IKfGroupSize) => {\r\n    state.kfGroupSize = kfGroupSize;\r\n})\r\n\r\nReducer.listen(action.UPDATE_SPEC_ANIMATIONS, (animationSpec: IAnimationSpec[] | string) => {\r\n    state.spec = { ...state.spec, animations: typeof animationSpec === 'string' ? JSON.parse(animationSpec) : animationSpec };\r\n})\r\n\r\nReducer.listen(action.UPDATE_SPEC_CHARTS, (charts: string[]) => {\r\n    document.getElementById(KfContainer.KF_POPUP).innerHTML = '';\r\n    suggestBox.removeSuggestBox();\r\n    const chartSpecs: IChartSpec[] = CanisGenerator.generateChartSpec(charts);\r\n    let tmpSpec: ICanisSpec = { charts: chartSpecs, animations: [] };\r\n    state.spec = tmpSpec;\r\n})\r\n\r\n\r\n\r\nReducer.listen(action.LOAD_CANIS_SPEC, (spec: ICanisSpec | string) => {\r\n    state.spec = typeof spec === 'string' ? JSON.parse(spec) : spec;\r\n})\r\n\r\nReducer.listen(action.UPDATE_MOUSE_MOVING, (mm: boolean) => {\r\n    state.mousemoving = mm;\r\n})\r\n\r\n\r\n\r\nReducer.listen(action.UDPATE_GROUPING_SORT, (actionInfo: { aniId: string, groupRef: string, order: string[] }) => {\r\n    console.log('actioninfl: ', actionInfo);\r\n    const animations: IAnimationSpec[] = state.spec.animations;\r\n    for (let i = 0, len = animations.length; i < len; i++) {\r\n        const a: IAnimationSpec = Util.cloneObj(animations[i]);\r\n        if (`${a.chartIdx}_${a.selector}` === actionInfo.aniId) {\r\n            // let flag: boolean = true;\r\n            // let tmpGrouping: IGrouping = a.grouping;\r\n            // while (flag) {\r\n            //     if (typeof tmpGrouping !== 'undefined') {\r\n            //         if (tmpGrouping.groupBy === actionInfo.groupRef) {\r\n            //             tmpGrouping.sort = {\r\n            //                 order: actionInfo.order\r\n            //             }\r\n            //             console.log('tmp Group: ', tmpGrouping);\r\n            //             flag = false;\r\n            //         } else if (typeof tmpGrouping.grouping !== 'undefined') {\r\n            //             tmpGrouping = tmpGrouping.grouping;\r\n            //         } else {\r\n            //             flag = false;\r\n            //         }\r\n            //     }\r\n            // }\r\n            let updated: boolean = CanisGenerator.updateGroupingSort(a, actionInfo.groupRef, actionInfo.order);\r\n            if (updated) {\r\n                animations[i] = a;\r\n                break;\r\n            }\r\n        }\r\n    }\r\n    // console.log('ordered: ', tmp);\r\n    state.spec = { ...state.spec, animations: animations };\r\n})\r\n\r\nReducer.listen(action.UPDATE_DELAY_BETWEEN_KF, (actionInfo: { aniId: string, delay: number }) => {\r\n    const animations: IAnimationSpec[] = state.spec.animations;\r\n    animations.forEach((a: IAnimationSpec) => {\r\n        if (`${a.chartIdx}_${a.selector}` === actionInfo.aniId) {\r\n            if (typeof a.grouping === 'undefined') {\r\n                a.grouping = {\r\n                    groupBy: 'id',\r\n                    delay: actionInfo.delay\r\n                }\r\n            } else {\r\n                let oriDelay: number = CanisGenerator.updateKfDelay(a.grouping, actionInfo.delay);\r\n                //save history\r\n\r\n            }\r\n        }\r\n    })\r\n    state.spec = { ...state.spec, animations: animations };\r\n})\r\n\r\nReducer.listen(action.REMOVE_DELAY_BETWEEN_KF, (actionInfo: { aniId: string }) => {\r\n    const animations: IAnimationSpec[] = state.spec.animations;\r\n    animations.forEach((a: IAnimationSpec) => {\r\n        if (`${a.chartIdx}_${a.selector}` === actionInfo.aniId) {\r\n            CanisGenerator.removeKfDelay(a.grouping);\r\n        }\r\n    })\r\n    state.spec = { ...state.spec, animations: animations };\r\n})\r\n\r\nReducer.listen(action.UPDATE_KF_TIMING_REF, (actionInfo: { aniId: string, ref: string }) => {\r\n    const animations: IAnimationSpec[] = state.spec.animations;\r\n    animations.forEach((a: IAnimationSpec) => {\r\n        if (`${a.chartIdx}_${a.selector}` === actionInfo.aniId) {\r\n            CanisGenerator.updateKfRef(a.grouping, actionInfo.ref);\r\n        }\r\n    })\r\n    state.spec = { ...state.spec, animations: animations };\r\n})\r\n\r\nReducer.listen(action.UPDATE_TIMING_REF_DELAY_KF, (actionInfo: { aniId: string, ref: string, delay: number }) => {\r\n    const animations: IAnimationSpec[] = state.spec.animations;\r\n    animations.forEach((a: IAnimationSpec) => {\r\n        if (`${a.chartIdx}_${a.selector}` === actionInfo.aniId) {\r\n            CanisGenerator.updateKfRefAndDelay(a.grouping, actionInfo.ref, actionInfo.delay);\r\n        }\r\n    })\r\n    state.spec = { ...state.spec, animations: animations };\r\n})\r\n\r\nReducer.listen(action.REMOVE_LOWESTGROUP, (actionInfo: { aniId: string }) => {\r\n    const animations: IAnimationSpec[] = state.spec.animations;\r\n    animations.forEach((a: IAnimationSpec) => {\r\n        if (`${a.chartIdx}_${a.selector}` === actionInfo.aniId) {\r\n            //if there is only one level grouping, change timing to start with previous\r\n            let oneLevelGrouping: boolean = false;\r\n            if (typeof a.grouping === 'undefined') {\r\n                oneLevelGrouping = true;\r\n            } else {\r\n                if (typeof a.grouping.grouping === 'undefined') {\r\n                    oneLevelGrouping = true;\r\n                }\r\n            }\r\n            if (oneLevelGrouping) {\r\n                // Reducer.triger(action.UPDATE_KF_TIMING_REF, { aniId: actionInfo.aniId, ref: TimingSpec.timingRef.previousStart })\r\n                delete a.grouping;\r\n            } else {\r\n                CanisGenerator.removeLowestGrouping(a.grouping);\r\n            }\r\n        }\r\n    })\r\n    state.spec = { ...state.spec, animations: animations };\r\n})\r\n\r\nReducer.listen(action.UPDATE_TIMEING_REF_BETWEEN_GROUP, (actionInfo: { aniId: string, groupRef: string, ref: string }) => {\r\n    const animations: IAnimationSpec[] = state.spec.animations;\r\n    animations.forEach((a: IAnimationSpec) => {\r\n        if (`${a.chartIdx}_${a.selector}` === actionInfo.aniId) {\r\n            CanisGenerator.updateGroupTiming(a.grouping, actionInfo.groupRef, actionInfo.ref);\r\n        }\r\n    })\r\n    state.spec = { ...state.spec, animations: animations };\r\n})\r\n\r\nReducer.listen(action.UPDATE_DELAY_BETWEEN_GROUP, (actionInfo: { aniId: string, groupRef: string, delay: number }) => {\r\n    const animations: IAnimationSpec[] = state.spec.animations;\r\n    animations.forEach((a: IAnimationSpec) => {\r\n        if (`${a.chartIdx}_${a.selector}` === actionInfo.aniId) {\r\n            CanisGenerator.updateGroupDelay(a.grouping, actionInfo.groupRef, actionInfo.delay);\r\n        }\r\n    })\r\n    state.spec = { ...state.spec, animations: animations };\r\n})\r\n\r\nReducer.listen(action.UPDATE_DELAY_TIMING_REF_BETWEEN_GROUP, (actionInfo: { aniId: string, groupRef: string, delay: number, ref: string }) => {\r\n    const animations: IAnimationSpec[] = state.spec.animations;\r\n    animations.forEach((a: IAnimationSpec) => {\r\n        if (`${a.chartIdx}_${a.selector}` === actionInfo.aniId) {\r\n            CanisGenerator.updateGroupDelayTiming(a.grouping, actionInfo.groupRef, actionInfo.delay, actionInfo.ref);\r\n        }\r\n    })\r\n    state.spec = { ...state.spec, animations: animations };\r\n})\r\n\r\nReducer.listen(action.REMOVE_DELAY_BETWEEN_GROUP, (actionInfo: { aniId: string, groupRef: string }) => {\r\n    const animations: IAnimationSpec[] = state.spec.animations;\r\n    animations.forEach((a: IAnimationSpec) => {\r\n        if (`${a.chartIdx}_${a.selector}` === actionInfo.aniId) {\r\n            CanisGenerator.removeGroupDelay(a.grouping, actionInfo.groupRef);\r\n        }\r\n    })\r\n    state.spec = { ...state.spec, animations: animations };\r\n})\r\n\r\nReducer.listen(action.REMOVE_DELAY_UPDATE_TIMING_REF_GROUP, (actionInfo: { aniId: string, groupRef: string, ref: string }) => {\r\n    const animations: IAnimationSpec[] = state.spec.animations;\r\n    animations.forEach((a: IAnimationSpec) => {\r\n        if (`${a.chartIdx}_${a.selector}` === actionInfo.aniId) {\r\n            CanisGenerator.removeGroupDelayUpdateTiming(a.grouping, actionInfo.groupRef, actionInfo.ref);\r\n        }\r\n    })\r\n    state.spec = { ...state.spec, animations: animations };\r\n})\r\n\r\nReducer.listen(action.MERGE_GROUP, (actionInfo: { aniId: string, groupRef: string }) => {\r\n    const animations: IAnimationSpec[] = state.spec.animations;\r\n    animations.forEach((a: IAnimationSpec) => {\r\n        if (`${a.chartIdx}_${a.selector}` === actionInfo.aniId) {\r\n            a.grouping = CanisGenerator.mergeGroup(a.grouping, actionInfo.groupRef);\r\n        }\r\n    })\r\n    state.spec = { ...state.spec, animations: animations };\r\n})\r\n\r\nReducer.listen(action.UPDATE_DURATION, (actionInfo: { aniId: string, duration: number }) => {\r\n    console.log('update duration: ', actionInfo);\r\n    const animations: IAnimationSpec[] = state.spec.animations;\r\n    const animationsNeedToUpdate: string[] = [];\r\n    animations.forEach((a: IAnimationSpec) => {\r\n        if (`${a.chartIdx}_${a.selector}` === actionInfo.aniId) {\r\n            animationsNeedToUpdate.push(a.selector);\r\n            //find merged aligned animations\r\n            if (typeof a.id !== 'undefined') {\r\n                const [alignWithAni, alignToAnis] = CanisGenerator.findMergedAlignAnis(a.id);\r\n                console.log('alignto anis: ', alignToAnis);\r\n                animationsNeedToUpdate.push(...alignToAnis);\r\n            } else if (typeof a.align !== 'undefined') {\r\n                console.log('a align not undefined: ', a);\r\n                if (a.align.type === Animation.alignTarget.withEle && a.align.merge) {\r\n                    const [alignWithAni, alignToAnis] = CanisGenerator.findMergedAlignAnis(a.align.target);\r\n                    animationsNeedToUpdate.push(...[alignWithAni, ...alignToAnis]);\r\n                }\r\n            }\r\n        }\r\n    })\r\n    animations.forEach((a: IAnimationSpec) => {\r\n        if (animationsNeedToUpdate.includes(a.selector)) {\r\n            let tmpEffect = Util.cloneObj(a.effects[0]);\r\n            CanisGenerator.updateDuration(tmpEffect, actionInfo.duration);\r\n            a.effects = [tmpEffect];\r\n        }\r\n    })\r\n    state.spec = { ...state.spec, animations: animations };\r\n})\r\n\r\nReducer.listen(action.UPDATE_ANI_OFFSET, (actionInfo: { aniId: string, offset: number }) => {\r\n    const animations: IAnimationSpec[] = state.spec.animations;\r\n    animations.forEach((a: IAnimationSpec) => {\r\n        if (`${a.chartIdx}_${a.selector}` === actionInfo.aniId) {\r\n            CanisGenerator.updateAniOffset(a, actionInfo.offset);\r\n        }\r\n    })\r\n    state.spec = { ...state.spec, animations: animations };\r\n})\r\n\r\nReducer.listen(action.UPDATE_SUGGESTION_PATH, (ap: IPath[]) => {\r\n    // Reducer.listen(action.UPDATE_SUGGESTION_PATH, (actionInfo: { ap: IPath[], kfIdxInPath: number, startKf: KfItem, kfGroup: KfGroup, suggestOnFirstKf: boolean, selectedMarks: string[] }) => {\r\n    state.allPaths = ap;\r\n    // Renderer.renderSuggestionBox(actionInfo.kfIdxInPath, actionInfo.startKf, actionInfo.kfGroup, actionInfo.suggestOnFirstKf, actionInfo.selectedMarks);\r\n    // Renderer.renderSuggestKfs(actionInfo.kfIdxInPath, actionInfo.startKf, actionInfo.kfGroup, actionInfo.suggestOnFirstKf, actionInfo.selectedMarks);\r\n})\r\n\r\n// Reducer.listen(action.UPDATE_SPEC_SELECTOR, (actionInfo: { aniId: string, selector: string }) => {\r\n//     const animations: IAnimationSpec[] = state.spec.animations;\r\n//     animations.forEach((a: IAnimationSpec) => {\r\n//         if (`${a.chartIdx}_${a.selector}` === actionInfo.aniId) {\r\n//             a.selector = actionInfo.selector;\r\n//         }\r\n//     })\r\n//     state.spec = { ...state.spec, animations: animations };\r\n// })\r\n\r\nReducer.listen(action.UPDATE_SPEC_GROUPING, (actionInfo: { aniId: string, attrComb: string[], attrValueSort: string[][] }) => {\r\n    if (actionInfo.attrComb.length > 0) {\r\n        const animations: IAnimationSpec[] = state.spec.animations;\r\n        animations.forEach((a: IAnimationSpec) => {\r\n            if (`${a.chartIdx}_${a.selector}` === actionInfo.aniId) {\r\n                CanisGenerator.updateGrouping(a, actionInfo.attrComb, actionInfo.attrValueSort);\r\n            }\r\n        })\r\n        state.spec = { ...state.spec, animations: animations };\r\n    }\r\n})\r\n\r\nReducer.listen(action.REMOVE_CREATE_MULTI_ANI, (actionInfo: { aniId: string, path: IPath, attrValueSort: string[][] }) => {\r\n    //extract marks with same shape\r\n    const shapeAttrIdx: number = actionInfo.path.attrComb.indexOf('mShape');\r\n    actionInfo.path.attrComb.splice(shapeAttrIdx, 1);\r\n    actionInfo.attrValueSort.splice(shapeAttrIdx, 1);\r\n    const shapeMarkMap: Map<string, string[]> = new Map();\r\n    const kfMarks: string[][] = [actionInfo.path.firstKfMarks, ...actionInfo.path.kfMarks];\r\n    actionInfo.path.sortedAttrValueComb.forEach((attrValueComb: string, idx: number) => {\r\n        const shape: string = attrValueComb.split(',')[shapeAttrIdx];\r\n        if (typeof shapeMarkMap.get(shape) === 'undefined') {\r\n            shapeMarkMap.set(shape, []);\r\n        }\r\n        shapeMarkMap.get(shape).push(...kfMarks[idx]);\r\n    })\r\n\r\n    const animations: IAnimationSpec[] = state.spec.animations;\r\n    for (let i = 0, len = animations.length; i < len; i++) {\r\n        let a: IAnimationSpec = animations[i];\r\n        let insertIdx: number = i;\r\n        if (`${a.chartIdx}_${a.selector}` === actionInfo.aniId) {\r\n            //create multiple animations\r\n            let selectorRecorder: string[] = [];\r\n            [...shapeMarkMap].forEach((shapeMarks: [string, string[]], idx: number) => {\r\n                const newSelector: string = `#${shapeMarks[1].join(', #')}`;\r\n                selectorRecorder.push(...newSelector.split(', '));\r\n                const newAni: IAnimationSpec = {\r\n                    selector: newSelector,\r\n                    effects: a.effects,\r\n                    chartIdx: a.chartIdx\r\n                }\r\n                if (idx === 0) {\r\n                    if (typeof a.reference !== 'undefined') {\r\n                        newAni.reference = a.reference;\r\n                    }\r\n                    if (typeof a.offset !== 'undefined') {\r\n                        newAni.offset = a.offset;\r\n                    }\r\n                    newAni.id = actionInfo.aniId;\r\n                } else {\r\n                    newAni.reference = TimingSpec.timingRef.previousEnd;\r\n                    if (shapeAttrIdx > 0) {\r\n                        newAni.align = { target: actionInfo.aniId, type: 'element', merge: true };\r\n                    }\r\n                }\r\n                if (actionInfo.path.attrComb.length > 0) {\r\n                    CanisGenerator.createGrouping(newAni, actionInfo.path.attrComb, actionInfo.attrValueSort);\r\n                }\r\n                animations.splice(insertIdx, 0, newAni);\r\n                insertIdx++;\r\n            })\r\n\r\n            // a.reference = TimingSpec.timingRef.previousEnd;\r\n\r\n            // CanisGenerator.removeMarksFromSelector(a, selectorRecorder);\r\n            animations.splice(insertIdx, 1);\r\n            break;\r\n        }\r\n    }\r\n    state.spec = { ...state.spec, animations: animations };\r\n})\r\n\r\nReducer.listen(action.SPLIT_CREATE_MULTI_ANI, (actionInfo: { aniId: string, path: IPath, attrValueSort: string[][] }) => {\r\n    //extract marks with same shape\r\n    const shapeAttrIdx: number = actionInfo.path.attrComb.indexOf('mShape');\r\n    actionInfo.path.attrComb.splice(shapeAttrIdx, 1);\r\n    actionInfo.attrValueSort.splice(shapeAttrIdx, 1);\r\n    const shapeMarkMap: Map<string, string[]> = new Map();\r\n    const kfMarks: string[][] = [actionInfo.path.firstKfMarks, ...actionInfo.path.kfMarks];\r\n    actionInfo.path.sortedAttrValueComb.forEach((attrValueComb: string, idx: number) => {\r\n        const shape: string = attrValueComb.split(',')[shapeAttrIdx];\r\n        if (typeof shapeMarkMap.get(shape) === 'undefined') {\r\n            shapeMarkMap.set(shape, []);\r\n        }\r\n        shapeMarkMap.get(shape).push(...kfMarks[idx]);\r\n    })\r\n\r\n    const animations: IAnimationSpec[] = state.spec.animations;\r\n    for (let i = 0, len = animations.length; i < len; i++) {\r\n        let a: IAnimationSpec = animations[i];\r\n        let insertIdx: number = i;\r\n        if (`${a.chartIdx}_${a.selector}` === actionInfo.aniId) {\r\n            //create multiple animations\r\n            let selectorRecorder: string[] = [];\r\n            let alignTarget: string;\r\n            [...shapeMarkMap].forEach((shapeMarks: [string, string[]], idx: number) => {\r\n                const newSelector: string = `#${shapeMarks[1].join(', #')}`;\r\n                selectorRecorder.push(...newSelector.split(', '));\r\n                const newAni: IAnimationSpec = {\r\n                    selector: newSelector,\r\n                    effects: a.effects,\r\n                    chartIdx: a.chartIdx\r\n                }\r\n                if (idx === 0) {\r\n                    alignTarget = `${newAni.chartIdx}_${newAni.selector}`;\r\n                    if (typeof a.reference !== 'undefined') {\r\n                        newAni.reference = a.reference;\r\n                    }\r\n                    if (typeof a.offset !== 'undefined') {\r\n                        newAni.offset = a.offset;\r\n                    }\r\n                    newAni.id = actionInfo.aniId;\r\n                } else {\r\n                    newAni.reference = TimingSpec.timingRef.previousEnd;\r\n                    if (shapeAttrIdx !== 0) {\r\n                        newAni.align = { target: actionInfo.aniId, type: 'element', merge: true };\r\n                    }\r\n                    // newAni.align = { target: alignTarget, type: 'element', merge: true };\r\n                }\r\n                if (actionInfo.path.attrComb.length > 0) {\r\n                    CanisGenerator.createGrouping(newAni, actionInfo.path.attrComb, actionInfo.attrValueSort);\r\n                }\r\n                animations.splice(insertIdx, 0, newAni);\r\n                insertIdx++;\r\n            })\r\n\r\n            a.reference = TimingSpec.timingRef.previousEnd;\r\n            CanisGenerator.removeMarksFromSelector(a, selectorRecorder);\r\n            break;\r\n        }\r\n    }\r\n    state.spec = { ...state.spec, animations: animations };\r\n})\r\n\r\nReducer.listen(action.SPLIT_CREATE_ONE_ANI, (actionInfo: { aniId: string, newAniSelector: string, attrComb: string[], attrValueSort: string[][] }) => {\r\n    const animations: IAnimationSpec[] = state.spec.animations;\r\n    for (let i = 0, len = animations.length; i < len; i++) {\r\n        let a: IAnimationSpec = animations[i];\r\n        if (`${a.chartIdx}_${a.selector}` === actionInfo.aniId) {\r\n            const newAni: IAnimationSpec = {\r\n                selector: actionInfo.newAniSelector,\r\n                effects: a.effects,\r\n                chartIdx: a.chartIdx\r\n            }\r\n            if (typeof a.reference !== 'undefined') {\r\n                newAni.reference = a.reference;\r\n            }\r\n            if (typeof a.offset !== 'undefined') {\r\n                newAni.offset = a.offset;\r\n            }\r\n            if (actionInfo.attrComb.length > 0) {\r\n                CanisGenerator.createGrouping(newAni, actionInfo.attrComb, actionInfo.attrValueSort);\r\n            }\r\n            a.reference = TimingSpec.timingRef.previousEnd;\r\n            CanisGenerator.removeMarksFromSelector(a, actionInfo.newAniSelector.split(', '));\r\n            animations.splice(i, 0, newAni);\r\n            break;\r\n        }\r\n    }\r\n    state.spec = { ...state.spec, animations: animations };\r\n})\r\n\r\nReducer.listen(action.APPEND_SPEC_GROUPING, (actionInfo: { aniId: string, attrComb: string[], attrValueSort: string[][] }) => {\r\n    const animations: IAnimationSpec[] = state.spec.animations;\r\n    for (let i = 0, len = animations.length; i < len; i++) {\r\n        let a: IAnimationSpec = animations[i];\r\n        if (`${a.chartIdx}_${a.selector}` === actionInfo.aniId) {\r\n            CanisGenerator.appendGrouping(a, actionInfo.attrComb, actionInfo.attrValueSort);\r\n            break;\r\n        }\r\n    }\r\n    state.spec = { ...state.spec, animations: animations };\r\n})\r\n\r\nReducer.listen(action.UPDATE_ALIGN_MERGE, (actionInfo: { aniId: string, merge: boolean }) => {\r\n    const animations: IAnimationSpec[] = state.spec.animations;\r\n    for (let i = 0, len = animations.length; i < len; i++) {\r\n        let a: IAnimationSpec = animations[i];\r\n        if (`${a.chartIdx}_${a.selector}` === actionInfo.aniId) {\r\n            CanisGenerator.updateMerge(a, actionInfo.merge);\r\n\r\n            let targetDuration: number = 0;\r\n            for (let j = 0; j < len; j++) {\r\n                if (state.spec.animations[j].id === a.align.target) {\r\n                    targetDuration = <number>state.spec.animations[j].effects[0].duration;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            let tmpEffect = Util.cloneObj(a.effects[0]);\r\n            CanisGenerator.updateDuration(tmpEffect, targetDuration);\r\n            a.effects = [tmpEffect];\r\n            break;\r\n        }\r\n    }\r\n    state.spec = { ...state.spec, animations: animations };\r\n})\r\n\r\nReducer.listen(action.UPDATE_EFFECT_TYPE, (actionInfo: { aniIds: string[], effectPropValue: string }) => {\r\n    const animations: IAnimationSpec[] = state.spec.animations;\r\n    animations.forEach((a: IAnimationSpec) => {\r\n        if (actionInfo.aniIds.includes(`${a.chartIdx}_${a.selector}`)) {\r\n            // if (`${a.chartIdx}_${a.selector}` === actionInfo.aniId) {\r\n            let tmpEffect = Util.cloneObj(a.effects[0]);\r\n            CanisGenerator.updateEffectType(tmpEffect, actionInfo.effectPropValue);\r\n            a.effects = [tmpEffect];\r\n        }\r\n    })\r\n    state.spec = { ...state.spec, animations: animations };\r\n})\r\n\r\nReducer.listen(action.UPDATE_EFFECT_EASING, (actionInfo: { aniId: string, effectPropValue: string }) => {\r\n    const animations: IAnimationSpec[] = state.spec.animations;\r\n    animations.forEach((a: IAnimationSpec) => {\r\n        if (`${a.chartIdx}_${a.selector}` === actionInfo.aniId) {\r\n            let tmpEffect = Util.cloneObj(a.effects[0]);\r\n            CanisGenerator.updateEffectEasing(tmpEffect, actionInfo.effectPropValue);\r\n            a.effects = [tmpEffect];\r\n        }\r\n    })\r\n    state.spec = { ...state.spec, animations: animations };\r\n})\r\n\r\nReducer.listen(action.UPDATE_ANI_ALIGN_AFTER_ANI_WITH_DELAY, (actionInfo: { targetAniId: string, currentAniId: string }) => {\r\n    Reducer.updateAniAlign(action.UPDATE_ANI_ALIGN_AFTER_ANI_WITH_DELAY, actionInfo);\r\n})\r\n\r\nReducer.listen(action.UPDATE_ANI_ALIGN_AFTER_ANI, (actionInfo: { targetAniId: string, currentAniId: string }) => {\r\n    Reducer.updateAniAlign(action.UPDATE_ANI_ALIGN_AFTER_ANI, actionInfo);\r\n})\r\n\r\nReducer.listen(action.UPDATE_ANI_ALIGN_WITH_ANI, (actionInfo: { targetAniId: string, currentAniId: string }) => {\r\n    Reducer.updateAniAlign(action.UPDATE_ANI_ALIGN_WITH_ANI, actionInfo);\r\n})\r\n\r\nReducer.listen(action.UPDATE_ANI_ALIGN_AFTER_KF, (actionInfo: { targetAniId: string, currentAniId: string }) => {\r\n    Reducer.updateAniAlign(action.UPDATE_ANI_ALIGN_AFTER_KF, actionInfo);\r\n})\r\n\r\nReducer.listen(action.UPDATE_ANI_ALIGN_WITH_KF, (actionInfo: { targetAniId: string, currentAniId: string }) => {\r\n    Reducer.updateAniAlign(action.UPDATE_ANI_ALIGN_WITH_KF, actionInfo);\r\n})","import { state, IState, State } from './state'\r\nimport { IDataItem, ISortDataAttr, IKeyframeGroup, IKeyframe, IKfGroupSize, IPath, IOmitPattern } from './core/ds'\r\nimport CanisGenerator, { canis, ICanisSpec } from './core/canisGenerator'\r\nimport ViewWindow, { ViewToolBtn, ViewContent } from '../components/viewWindow'\r\nimport AttrSort from '../components/widgets/attrSort'\r\nimport Util from './core/util'\r\nimport Reducer from './reducer'\r\nimport * as action from './action'\r\nimport SelectableTable from '../components/widgets/selectableTable'\r\nimport Lottie from 'lottie-web/build/player/lottie'\r\nimport { Player, player } from '../components/player'\r\nimport KfItem from '../components/widgets/kfItem'\r\nimport KfTrack from '../components/widgets/kfTrack'\r\nimport KfGroup from '../components/widgets/kfGroup'\r\nimport { KfContainer, kfContainer } from '../components/kfContainer'\r\nimport KfOmit from '../components/widgets/kfOmit'\r\nimport PlusBtn from '../components/widgets/plusBtn'\r\nimport { suggestBox } from '../components/widgets/suggestBox'\r\nimport { Loading } from '../components/widgets/loading'\r\nimport { ChartSpec, Animation } from '../canis/moduleIdx'\r\n\r\n/**\r\n * render html according to the state\r\n */\r\nexport default class Renderer {\r\n    /**\r\n     * test rendering spec\r\n     * @param spec \r\n     */\r\n    public static async renderSpec(spec: ICanisSpec, callback: any = () => { }) {\r\n        console.log('going to render spec: ', spec.animations);\r\n        const lottieSpec = await canis.renderSpec(spec, () => {\r\n            if (spec.animations[0].selector === '.mark') {//special triger, can not triger action\r\n                state.spec.animations[0].selector = `#${Animation.allMarks.join(', #')}`;\r\n            }\r\n            Util.extractAttrValueAndDeterminType(ChartSpec.dataMarkDatum);\r\n            Util.extractNonDataAttrValue(ChartSpec.nonDataMarkDatum);\r\n\r\n            const dataOrder: string[] = Array.from(Util.filteredDataTable.keys());\r\n            const dataTable: Map<string, IDataItem> = Util.filteredDataTable;\r\n            const sortDataAttrs: ISortDataAttr[] = ['markId', ...Object.keys(Util.attrType)].map(attrName => {\r\n                const sortType: string = attrName === 'markId' ? AttrSort.ASSCENDING_ORDER : AttrSort.INDEX_ORDER;\r\n                return {\r\n                    attr: attrName,\r\n                    sort: sortType\r\n                }\r\n            })\r\n            //these actions are coupling with others, so they are not recorded in history\r\n            Reducer.triger(action.UPDATE_DATA_ORDER, dataOrder);\r\n            Reducer.triger(action.UPDATE_DATA_TABLE, dataTable);\r\n            Reducer.triger(action.UPDATE_DATA_SORT, sortDataAttrs);\r\n        });\r\n        //add highlight box on the chart\r\n        const svg: HTMLElement = document.getElementById('visChart');\r\n        if (svg) {\r\n            //create the highlight box\r\n            const highlightBox: SVGRectElement = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n            highlightBox.setAttributeNS(null, 'id', 'highlightSelectionFrame');\r\n            highlightBox.setAttributeNS(null, 'fill', 'none');\r\n            highlightBox.setAttributeNS(null, 'stroke', '#2196f3');\r\n            highlightBox.setAttributeNS(null, 'stroke-width', '2');\r\n            svg.appendChild(highlightBox);\r\n        }\r\n        //render video view\r\n        Reducer.triger(action.UPDATE_LOTTIE_SPEC, lottieSpec);\r\n        player.resetPlayer({\r\n            frameRate: canis.frameRate,\r\n            currentTime: 0,\r\n            totalTime: canis.duration()\r\n        })\r\n\r\n        if (state.charts.length > 1) {//remove the visChart and add multi-charts\r\n            if (document.getElementById('visChart')) {\r\n                document.getElementById('visChart').remove();\r\n            }\r\n            this.renderMultiCharts();\r\n        }\r\n\r\n        callback();\r\n    }\r\n\r\n    public static renderMultiCharts() {\r\n        //create container\r\n        const multiChartContainer: HTMLDivElement = ViewContent.createMultiChartContainer();\r\n        //render charts, remove the visChart id in each chart since it might confuse the compiler\r\n        let currentRow: HTMLDivElement;\r\n        for (let i = 0, len = state.charts.length; i < len && i < 9; i++) {\r\n            const chartItemContainer: HTMLDivElement = document.createElement('div');\r\n            chartItemContainer.className = 'chart-item-container';\r\n            if (i < 8) {\r\n                const chart: string = state.charts[i].replace('id=\"visChart\"', '');\r\n                chartItemContainer.innerHTML = chart;\r\n            } else {\r\n                chartItemContainer.innerHTML = `<p>+${state.charts.length - 8} charts<br>...</p>`;\r\n            }\r\n            if (i % 3 === 0) {\r\n                currentRow = document.createElement('div');\r\n                currentRow.className = 'row-chart-container';\r\n                multiChartContainer.appendChild(currentRow);\r\n            }\r\n            currentRow.appendChild(chartItemContainer);\r\n        }\r\n    }\r\n\r\n    public static renderLoading(wrapper: HTMLElement, content: string) {\r\n        const loadingBlock: Loading = new Loading();\r\n        loadingBlock.createLoading(wrapper, content);\r\n    }\r\n\r\n    public static removeLoading() {\r\n        Loading.removeLoading();\r\n    }\r\n\r\n    public static renderVideo(lottieSpec: any): void {\r\n        document.getElementById(ViewContent.VIDEO_VIEW_CONTENT_ID).innerHTML = '';\r\n\r\n        Reducer.triger(action.UPDATE_LOTTIE, Lottie.loadAnimation({\r\n            container: document.getElementById(ViewContent.VIDEO_VIEW_CONTENT_ID),\r\n            renderer: 'svg',\r\n            loop: false,\r\n            autoplay: false,\r\n            animationData: lottieSpec // the animation data\r\n        }));\r\n        //start to play animation\r\n        document.getElementById(Player.PLAY_BTN_ID).click();\r\n\r\n        const staticMarks: string[] = [];\r\n        Reducer.triger(action.UPDATE_STATIC_KEYFRAME, staticMarks);\r\n        Reducer.triger(action.UPDATE_KEYFRAME_TRACKS, Animation.animations);\r\n    }\r\n\r\n    public static renderKfContainerSliders(kfgSize: IKfGroupSize) {\r\n        //reset the transform of kfcontainer\r\n        kfContainer.resetContainerTrans();\r\n        kfContainer.updateKfSlider(kfgSize);\r\n    }\r\n\r\n    public static renderStaticKf(staticMarks: string[]) {\r\n        //reset\r\n        document.getElementById(KfContainer.KF_BG).innerHTML = '';\r\n        document.getElementById(KfContainer.KF_FG).innerHTML = '';\r\n        document.getElementById(KfContainer.KF_OMIT).innerHTML = '';\r\n        const placeHolder: SVGRectElement = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n        placeHolder.setAttributeNS(null, 'width', '1');\r\n        placeHolder.setAttributeNS(null, 'height', '18');\r\n        placeHolder.setAttributeNS(null, 'fill', '#00000000');\r\n        document.getElementById(KfContainer.KF_FG).appendChild(placeHolder);\r\n        KfTrack.reset();\r\n        KfGroup.reset();\r\n        KfOmit.reset();\r\n\r\n        const firstTrack: KfTrack = new KfTrack();\r\n        firstTrack.createTrack();\r\n    }\r\n\r\n    public static renderKeyframeTracks(kfgs: IKeyframeGroup[]): void {\r\n        if (state.charts.length === 1) {\r\n            //save kf group info\r\n            kfgs.forEach((kfg: IKeyframeGroup) => {\r\n                KfGroup.allAniGroupInfo.set(kfg.aniId, kfg);\r\n            })\r\n\r\n            kfgs.forEach((kfg: IKeyframeGroup, i: number) => {\r\n                KfGroup.leafLevel = 0;\r\n                let treeLevel = 0;//use this to decide the background color of each group\r\n                //top-down to init group and kf\r\n                const rootGroup: KfGroup = this.renderKeyframeGroup(0, kfgs[i - 1], 1, kfg, treeLevel);\r\n                //bottom-up to update size and position\r\n                rootGroup.updateGroupPosiAndSize([...KfTrack.aniTrackMapping.get(rootGroup.aniId)][0].availableInsert, 0, false, true);\r\n                KfGroup.allAniGroups.set(rootGroup.aniId, rootGroup);\r\n            })\r\n        } else {\r\n            const rootGroup: KfGroup = this.renderKeyframeGroup(0, undefined, 1, kfgs[0], 0);\r\n            rootGroup.updateGroupPosiAndSize([...KfTrack.aniTrackMapping.get(rootGroup.aniId)][0].availableInsert, 0, false, true);\r\n            KfGroup.allAniGroups.set(rootGroup.aniId, rootGroup);\r\n        }\r\n\r\n        //update align id\r\n        // KfGroup.allAniGroups.forEach((tmpAniGroup: KfGroup, tmpAniId: string) => {\r\n        //     if (typeof tmpAniGroup.alignTarget !== 'undefined') {\r\n        //         KfGroup.allAniGroups.forEach((tmpAniGroup2: KfGroup, tmpAniId2: string) => {\r\n        //             if (tmpAniGroup2.alignId === tmpAniGroup.alignTarget) {\r\n        //                 KfGroup.allAniGroups.get(tmpAniId2).alignId = tmpAniGroup2.aniId;\r\n        //                 KfGroup.allAniGroups.get(tmpAniId).alignTarget = tmpAniGroup2.aniId;\r\n        //             }\r\n        //         })\r\n        //     }\r\n        // })\r\n\r\n        const rootGroupBBox: DOMRect = document.getElementById(KfContainer.KF_FG).getBoundingClientRect();\r\n        Reducer.triger(action.UPDATE_KEYFRAME_CONTAINER_SLIDER, { width: rootGroupBBox.width, height: rootGroupBBox.height });\r\n        Reducer.triger(action.KEYFRAME_ZOOM_LEVEL, state.zoomLevel);\r\n        Reducer.triger(action.UPDATE_LOADING_STATUS, { il: false });\r\n    }\r\n\r\n    public static renderKeyframeGroup(kfgIdx: number, previousKfg: IKeyframeGroup, totalKfgNum: number, kfg: IKeyframeGroup, treeLevel: number, parentObj?: KfGroup): KfGroup {\r\n        //draw group container\r\n        let kfGroup: KfGroup = new KfGroup();\r\n        if (kfgIdx === 0 || kfgIdx === 1 || kfgIdx === totalKfgNum - 1) {\r\n            let targetTrack: KfTrack; //foreground of the track used to put the keyframe group\r\n            if (kfg.newTrack) {\r\n                //judge whether the new track is already in this animation\r\n                if (typeof parentObj !== 'undefined') {\r\n                    let lastChild: KfGroup;\r\n                    for (let i = parentObj.children.length - 1; i >= 0; i--) {\r\n                        if (parentObj.children[i] instanceof KfGroup) {\r\n                            lastChild = <KfGroup>parentObj.children[i];\r\n                            break;\r\n                        }\r\n                    }\r\n                    let allTracksThisAni: KfTrack[] = [...KfTrack.aniTrackMapping.get(kfg.aniId)];\r\n                    let lastTrack: KfTrack = KfTrack.allTracks.get(lastChild.targetTrackId);\r\n                    if (typeof lastTrack !== 'undefined') {\r\n                        allTracksThisAni.forEach((kft: KfTrack) => {\r\n                            if (kft.trackPosiY - lastTrack.trackPosiY > 0 && kft.trackPosiY - lastTrack.trackPosiY <= KfTrack.TRACK_HEIGHT) {\r\n                                targetTrack = kft;\r\n                            }\r\n                        })\r\n                    }\r\n                    if (typeof targetTrack === 'undefined') {\r\n                        targetTrack = new KfTrack();\r\n                        let createFakeTrack: boolean = false;\r\n                        if (typeof kfg.merge !== 'undefined') {\r\n                            createFakeTrack = kfg.merge;\r\n                        }\r\n                        targetTrack.createTrack(createFakeTrack);\r\n                    }\r\n                } else {\r\n                    targetTrack = new KfTrack();\r\n                    let createFakeTrack: boolean = false;\r\n                    if (typeof kfg.merge !== 'undefined') {\r\n                        createFakeTrack = kfg.merge;\r\n                    }\r\n                    targetTrack.createTrack(createFakeTrack);\r\n                }\r\n            } else {\r\n                if (typeof KfTrack.aniTrackMapping.get(kfg.aniId) !== 'undefined') {\r\n                    targetTrack = [...KfTrack.aniTrackMapping.get(kfg.aniId)][0];//this is the group within an existing animation\r\n                } else {\r\n                    // //target track is the last track\r\n                    // let maxTrackPosiY: number = 0;\r\n                    // KfTrack.allTracks.forEach((kft: KfTrack, trackId: string) => {\r\n                    //     if (kft.trackPosiY >= maxTrackPosiY) {\r\n                    //         maxTrackPosiY = kft.trackPosiY;\r\n                    //         targetTrack = kft;\r\n                    //     }\r\n                    // })\r\n                    //target track is the one with the max available insert\r\n                    let maxAvailableInsert: number = 0;\r\n                    KfTrack.allTracks.forEach((kft: KfTrack, trackId: string) => {\r\n                        if (kft.availableInsert >= maxAvailableInsert) {\r\n                            maxAvailableInsert = kft.availableInsert;\r\n                            targetTrack = kft;\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n            if (typeof KfTrack.aniTrackMapping.get(kfg.aniId) === 'undefined') {\r\n                KfTrack.aniTrackMapping.set(kfg.aniId, new Set());\r\n            }\r\n            KfTrack.aniTrackMapping.get(kfg.aniId).add(targetTrack);\r\n            let minTrackPosiYThisGroup: number = [...KfTrack.aniTrackMapping.get(kfg.aniId)][0].trackPosiY;\r\n\r\n            //check whether this is the group of animation, and whether to add a plus button or not\r\n            let plusBtn: PlusBtn, addedPlusBtn: boolean = false;\r\n            if (treeLevel === 0) {//this is the root group\r\n                //find the keyframes of the first group\r\n                const tmpKfs: IKeyframe[] = Util.findFirstKfs(kfg);\r\n                let [addingPlusBtn, acceptableMarkClasses] = PlusBtn.detectAdding(kfg, tmpKfs);\r\n                if (addingPlusBtn) {\r\n                    addedPlusBtn = addingPlusBtn;\r\n                    plusBtn = new PlusBtn()\r\n                    plusBtn.createBtn(kfGroup, tmpKfs, targetTrack, targetTrack.availableInsert, { w: KfItem.KF_WIDTH - KfItem.KF_W_STEP, h: KfItem.KF_HEIGHT - 2 * KfItem.KF_H_STEP }, acceptableMarkClasses);\r\n                    targetTrack.availableInsert += PlusBtn.PADDING * 4 + PlusBtn.BTN_SIZE;\r\n                }\r\n            }\r\n            const previousAniId: string = typeof previousKfg === 'undefined' ? '' : previousKfg.aniId\r\n            kfGroup.createGroup(kfg, previousAniId, parentObj ? parentObj : targetTrack, targetTrack.trackPosiY - minTrackPosiYThisGroup, treeLevel, targetTrack.trackId);\r\n            if (addedPlusBtn) {\r\n                plusBtn.aniId = kfGroup.aniId;\r\n                PlusBtn.plusBtnMapping.set(plusBtn.aniId, plusBtn);\r\n                if (treeLevel === 0) {\r\n                    plusBtn.fakeKfg.marks = kfGroup.marks;\r\n                    plusBtn.fakeKfg.aniId = kfGroup.aniId;\r\n                }\r\n            }\r\n        } else if (totalKfgNum > 3 && kfgIdx === totalKfgNum - 2) {\r\n            let kfOmit: KfOmit = new KfOmit();\r\n            kfOmit.createOmit(KfOmit.KF_GROUP_OMIT, 0, totalKfgNum - 3, parentObj, false, false, 0);\r\n            parentObj.children.push(kfOmit);//why comment this out!!!!\r\n            kfOmit.idxInGroup = parentObj.children.length - 1;\r\n            parentObj.kfOmits.push(kfOmit);\r\n        }\r\n\r\n        treeLevel++;\r\n        if (treeLevel > KfGroup.leafLevel) {\r\n            KfGroup.leafLevel = treeLevel;\r\n        }\r\n        if (kfg.keyframes.length > 0) {\r\n            kfGroup.kfNum = kfg.keyframes.length;\r\n            //choose the keyframes to draw\r\n            let alignWithAnis: Map<string, number[]> = new Map();\r\n            let alignToAni: number[] = [];\r\n            kfg.keyframes.forEach((k: any, i: number) => {\r\n                if (typeof k.alignWith !== 'undefined') {\r\n                    k.alignWith.forEach((aniId: string) => {\r\n                        if (typeof alignWithAnis.get(aniId) === 'undefined') {\r\n                            alignWithAnis.set(aniId, [100000, 0]);\r\n                        }\r\n                        if (i < alignWithAnis.get(aniId)[0]) {\r\n                            alignWithAnis.get(aniId)[0] = i;\r\n                        }\r\n                        if (i > alignWithAnis.get(aniId)[1]) {\r\n                            alignWithAnis.get(aniId)[1] = i;\r\n                        }\r\n                    })\r\n                } else if (typeof k.alignTo !== 'undefined') {\r\n                    if (typeof KfItem.allKfItems.get(k.alignTo) !== 'undefined') {\r\n                        if (KfItem.allKfItems.get(k.alignTo).rendered) {\r\n                            alignToAni.push(i);\r\n                        }\r\n                    }\r\n                }\r\n            })\r\n            let kfIdxToDraw: number[] = [0, 1, kfg.keyframes.length - 1];\r\n            let isAlignWith: number = 0;//0 -> neither align with nor align to, 1 -> align with, 2 -> align to \r\n            let kfOmitType: string = KfOmit.KF_OMIT;\r\n            let omitPattern: IOmitPattern[] = [];\r\n            //this group is the align target\r\n            if (alignWithAnis.size > 0) {\r\n                isAlignWith = 1;\r\n                kfOmitType = KfOmit.KF_ALIGN;\r\n                omitPattern.push({\r\n                    merge: typeof kfg.merge === 'undefined' ? false : kfg.merge,\r\n                    timing: kfg.timingRef,\r\n                    hasOffset: kfg.offsetIcon,\r\n                    hasDuration: true\r\n                })\r\n\r\n                alignWithAnis.forEach((se: number[], aniId: string) => {\r\n                    const tmpKfg: IKeyframeGroup = KfGroup.allAniGroupInfo.get(aniId);\r\n                    omitPattern.push({\r\n                        merge: typeof tmpKfg.merge === 'undefined' ? false : tmpKfg.merge,\r\n                        timing: tmpKfg.timingRef,\r\n                        hasOffset: tmpKfg.offsetIcon,\r\n                        hasDuration: true\r\n                    });\r\n                    kfIdxToDraw.push(se[0]);\r\n                    kfIdxToDraw.push(se[1]);\r\n                    if (se[0] + 1 < se[1]) {\r\n                        kfIdxToDraw.push(se[0] + 1);\r\n                    }\r\n                })\r\n            } else if (alignToAni.length > 0) {\r\n                //this group aligns to other group\r\n                isAlignWith = 2;\r\n                kfIdxToDraw = [...kfIdxToDraw, ...alignToAni];\r\n            }\r\n            kfIdxToDraw = [...new Set(kfIdxToDraw)].sort((a: number, b: number) => a - b);\r\n\r\n            //rendering kf\r\n            //check whether there should be a plus btn\r\n            let kfPosiX = kfGroup.offsetWidth;\r\n            kfg.keyframes.forEach((k: IKeyframe, i: number) => {\r\n                //whether to draw this kf or not\r\n                let kfOmit: KfOmit;\r\n                if (kfIdxToDraw.includes(i) || state.charts.length > 1) {\r\n                    //whether to draw '...'\r\n                    if (i > 0 && kfIdxToDraw[kfIdxToDraw.indexOf(i) - 1] !== i - 1 && state.charts.length === 1) {\r\n                        const omitNum: number = i - kfIdxToDraw[kfIdxToDraw.indexOf(i) - 1] - 1;\r\n                        if (omitNum > 0) {\r\n                            kfOmit = new KfOmit();\r\n                            if (kfOmitType === KfOmit.KF_ALIGN) {\r\n                                kfOmit.omitPattern = omitPattern;\r\n                            }\r\n                            if (kfg.keyframes[1].hiddenDurationIcon) {\r\n                                kfPosiX += (<KfItem>kfGroup.children[kfGroup.children.length - 1]).durationWidth;\r\n                            }\r\n                            console.log('creating omit: ', kfPosiX);\r\n                            kfOmit.createOmit(kfOmitType, kfPosiX, omitNum, kfGroup, kfg.keyframes[1].delayIcon, kfg.keyframes[1].durationIcon, (<KfItem>kfGroup.children[1]).kfHeight / 2);\r\n                            kfGroup.children.push(kfOmit);\r\n                            kfOmit.idxInGroup = kfGroup.children.length - 1;\r\n                            kfGroup.kfOmits.push(kfOmit);\r\n                            kfPosiX += kfOmit.oWidth;\r\n                        }\r\n                    }\r\n                    //draw render\r\n                    const kfItem: KfItem = new KfItem();\r\n                    let targetSize: { w: number, h: number } = { w: 0, h: 0 }\r\n                    if (isAlignWith === 2) {\r\n                        const tmpAlignToKf: KfItem = KfItem.allKfItems.get(k.alignTo);\r\n                        if (typeof tmpAlignToKf !== 'undefined') {\r\n                            if (tmpAlignToKf.rendered) {\r\n                                const alignedKf: DOMRect = tmpAlignToKf.kfBg.getBoundingClientRect();//fixed\r\n                                targetSize.w = alignedKf.width / state.zoomLevel;\r\n                                targetSize.h = alignedKf.height / state.zoomLevel;\r\n                            }\r\n                        }\r\n                        kfItem.createItem(k, treeLevel, kfGroup, kfPosiX, targetSize);\r\n                    } else {\r\n                        kfItem.createItem(k, treeLevel, kfGroup, kfPosiX);\r\n                    }\r\n                    if (typeof kfOmit !== 'undefined') {\r\n                        kfItem.preOmit = kfOmit;\r\n                    }\r\n\r\n                    // KfItem.allKfItems.set(k.id, kfItem);\r\n                    kfGroup.children.push(kfItem);\r\n                    kfItem.idxInGroup = kfGroup.children.length - 1;\r\n                    kfPosiX += kfItem.totalWidth;\r\n                    console.log('updateing kfposix: ', kfPosiX, kfItem.totalWidth);\r\n                }\r\n            })\r\n        } else if (kfg.children.length > 0) {\r\n            //rendering kf group\r\n            kfg.children.forEach((c: any, i: number) => {\r\n                const tmpKfGroup: KfGroup = this.renderKeyframeGroup(i, kfg.children[i - 1], kfg.children.length, c, treeLevel, kfGroup);\r\n                kfGroup.children.push(tmpKfGroup);\r\n                tmpKfGroup.idxInGroup = kfGroup.children.length - 1;\r\n                kfGroup.kfNum += tmpKfGroup.kfNum;\r\n            });\r\n        }\r\n        return kfGroup;\r\n    }\r\n\r\n    // public static renderDataAttrs(sdaArr: ISortDataAttr[]): void {\r\n    //     if (sdaArr.length > 0) {\r\n    //         // document.getElementById('attrBtnContainer').innerHTML = '';\r\n    //         // document.getElementById('sortInputContainer').innerHTML = '';\r\n    //         // sdaArr.forEach(sda => {\r\n    //         //     if (sda.attr !== 'markId') {\r\n    //         //         const attrBtn: AttrBtn = new AttrBtn();\r\n    //         //         attrBtn.createAttrBtn(sda.attr);\r\n    //         //         document.getElementById('attrBtnContainer').appendChild(attrBtn.btn);\r\n    //         //         const attrSort: AttrSort = new AttrSort();\r\n    //         //         attrSort.createAttrSort(sda.attr);\r\n    //         //         document.getElementById('sortInputContainer').appendChild(attrSort.selectInput);\r\n    //         //     }\r\n    //         // })\r\n    //     }\r\n    // }\r\n\r\n    public static renderDataTable(dt: Map<string, IDataItem>): void {\r\n        if (dt.size > 0) {\r\n            const dataTable: SelectableTable = new SelectableTable();\r\n            document.getElementById('dataTabelContainer').innerHTML = '';\r\n            document.getElementById('dataTabelContainer').appendChild(dataTable.createTable(dt));\r\n            SelectableTable.renderSelection(state.selection);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * set the selection tool status\r\n     * @param t \r\n     */\r\n    public static renderChartTool(t: string): void {\r\n        switch (t) {\r\n            case ViewToolBtn.SINGLE:\r\n                (<HTMLElement>document.getElementsByClassName('arrow-icon')[0]).click();\r\n                break;\r\n            case ViewToolBtn.LASSO:\r\n                (<HTMLElement>document.getElementsByClassName('lasso-icon')[0]).click();\r\n                break;\r\n            case ViewToolBtn.DATA:\r\n                (<HTMLElement>document.getElementsByClassName('table-icon')[0]).click();\r\n                break;\r\n        }\r\n    }\r\n\r\n    public static zoomKfContainer(zl: number): void {\r\n        kfContainer.kfTrackScaleContainer.setAttributeNS(null, 'transform', `scale(${zl}, ${zl})`);\r\n        //set visbility of chart thumbnails\r\n        if (zl === ViewWindow.MAX_ZOOM_LEVEL) {\r\n            zl -= 0.001;\r\n        }\r\n        const shownThumbnail: number = Math.floor((zl - ViewWindow.MIN_ZOOM_LEVEL) / ((ViewWindow.MAX_ZOOM_LEVEL - ViewWindow.MIN_ZOOM_LEVEL) / (state.chartThumbNailZoomLevels / 2)));\r\n        const kfZoomLevel: number = Math.floor((zl - ViewWindow.MIN_ZOOM_LEVEL) / ((ViewWindow.MAX_ZOOM_LEVEL - ViewWindow.MIN_ZOOM_LEVEL) / state.chartThumbNailZoomLevels));\r\n        // KfItem.allKfItems.forEach((kfItem: KfItem) => {\r\n        //     kfItem.chartThumbnails.forEach((ct: SVGImageElement, i: number) => {\r\n        //         if (i === shownThumbnail) {\r\n        //             ct.classList.remove('no-display-ele');\r\n        //         } else {\r\n        //             ct.classList.add('no-display-ele');\r\n        //         }\r\n        //     })\r\n        // })\r\n\r\n        let sortedAniGroupAniIds: string[] = [...KfGroup.allAniGroups.keys()].sort((a: string, b: string) => {\r\n            if (KfGroup.allAniGroups.get(a).alignType === Animation.alignTarget.withEle && KfGroup.allAniGroups.get(b).alignType !== Animation.alignTarget.withEle) {\r\n                return 1;\r\n            } else if (KfGroup.allAniGroups.get(a).alignType !== Animation.alignTarget.withEle && KfGroup.allAniGroups.get(b).alignType === Animation.alignTarget.withEle) {\r\n                return -1;\r\n            } else if (KfGroup.allAniGroups.get(a).alignType === Animation.alignTarget.withEle && KfGroup.allAniGroups.get(b).alignType === Animation.alignTarget.withEle) {\r\n                const bbox1: DOMRect = KfGroup.allAniGroups.get(a).container.getBoundingClientRect();\r\n                const bbox2: DOMRect = KfGroup.allAniGroups.get(b).container.getBoundingClientRect();\r\n                return bbox1.top - bbox2.top;\r\n            } else {\r\n                return 0;\r\n            }\r\n            return -1;\r\n        })\r\n\r\n        //set visibility of kfgroups and kfitems\r\n        // KfGroup.allAniGroups.forEach((aniKfGroup: KfGroup) => {\r\n        sortedAniGroupAniIds.forEach((aniKfGroupAniId: string) => {\r\n            const aniKfGroup: KfGroup = KfGroup.allAniGroups.get(aniKfGroupAniId);\r\n            aniKfGroup.zoomGroup(kfZoomLevel, shownThumbnail);\r\n            if (aniKfGroup.alignType === Animation.alignTarget.withEle) {//check kf positions\r\n                aniKfGroup.updateAlignGroupKfPosis();\r\n            }\r\n\r\n        })\r\n    }\r\n\r\n    /**\r\n     * set the style of the selected marks and the highlight box\r\n     * @param selection \r\n     */\r\n    public static renderSelectedMarks(selection: string[]): void {\r\n        const svg = document.getElementById('visChart');\r\n        //remove the dragAreas\r\n        Array.from(document.getElementsByClassName('highlight-selection-frame')).forEach((da: HTMLElement) => {\r\n            da.remove();\r\n        })\r\n\r\n        let highlightSelectionBox: HTMLElement = document.getElementById('highlightSelectionFrame');\r\n        //highlight selection in data table\r\n        SelectableTable.renderSelection(selection);\r\n        if (selection.length === 0) {//no mark is selected\r\n            if (highlightSelectionBox) {\r\n                //reset highlightselectionbox\r\n                highlightSelectionBox.setAttributeNS(null, 'x', '0');\r\n                highlightSelectionBox.setAttributeNS(null, 'y', '0');\r\n                highlightSelectionBox.setAttributeNS(null, 'width', '0');\r\n                highlightSelectionBox.setAttributeNS(null, 'height', '0');\r\n            }\r\n            //reset all marks to un-selected\r\n            Array.from(document.getElementsByClassName('non-framed-mark')).forEach((m: HTMLElement) => m.classList.remove('non-framed-mark'))\r\n        } else {\r\n            //find the boundary of the selected marks\r\n            let minX = 10000, minY = 10000, maxX = -10000, maxY = -10000;\r\n            Array.from(document.getElementsByClassName('mark')).forEach((m: HTMLElement) => {\r\n                const markId: string = m.id;\r\n                if (selection.includes(markId)) {//this is a selected mark\r\n                    m.classList.remove('non-framed-mark');\r\n                    const tmpBBox = (<SVGGraphicsElement><unknown>m).getBBox();\r\n                    minX = tmpBBox.x < minX ? tmpBBox.x : minX;\r\n                    minY = tmpBBox.y < minY ? tmpBBox.y : minY;\r\n                    maxX = tmpBBox.x + tmpBBox.width > maxX ? (tmpBBox.x + tmpBBox.width) : maxX;\r\n                    maxY = tmpBBox.y + tmpBBox.height > maxY ? (tmpBBox.y + tmpBBox.height) : maxY;\r\n\r\n                    //render a dragable area\r\n                    const mDragArea = <SVGElement>m.cloneNode(true);\r\n                    mDragArea.setAttributeNS(null, 'class', 'highlight-selection-frame');\r\n                    mDragArea.id = null;\r\n                    mDragArea.setAttributeNS(null, 'fill', '#000');\r\n                    mDragArea.setAttributeNS(null, 'stroke', '#000');\r\n                    mDragArea.setAttributeNS(null, 'stroke-width', '4');\r\n                    mDragArea.setAttributeNS(null, 'opacity', '0');\r\n                    svg.appendChild(mDragArea);\r\n                } else {//this is not a selected mark\r\n                    m.classList.add('non-framed-mark');\r\n                }\r\n            })\r\n            if (highlightSelectionBox) {\r\n                //set the highlightSelectionFrame\r\n                highlightSelectionBox.setAttributeNS(null, 'x', (minX - 5).toString());\r\n                highlightSelectionBox.setAttributeNS(null, 'y', (minY - 5).toString());\r\n                highlightSelectionBox.setAttributeNS(null, 'width', (maxX - minX + 10).toString());\r\n                highlightSelectionBox.setAttributeNS(null, 'height', (maxY - minY + 10).toString());\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    public static renderActivatedPlusBtn() {\r\n        this.renderStaticKf([]);\r\n        this.renderKeyframeTracks(state.keyframeGroups);\r\n        suggestBox.removeSuggestBox();\r\n        const activatedPlusBtn: PlusBtn = PlusBtn.plusBtnMapping.get(state.activatePlusBtn.aniId);\r\n        if (typeof activatedPlusBtn !== 'undefined') {\r\n            activatedPlusBtn.dropSelOn();\r\n        }\r\n    }\r\n}","import { ViewToolBtn } from '../components/viewWindow'\r\nimport Renderer from './renderer'\r\nimport Tool from '../util/tool'\r\nimport { ISortDataAttr, IDataItem, IKeyframeGroup, IKfGroupSize, IPath, IInteractionRecord, IActivatePlusBtn } from './core/ds'\r\nimport Util from './core/util'\r\nimport Reducer from './reducer'\r\nimport * as action from './action'\r\nimport { AnimationItem } from 'lottie-web/build/player/lottie';\r\nimport CanisGenerator, { ICanisSpec } from './core/canisGenerator'\r\n\r\n\r\nexport interface IState {\r\n    sortDataAttrs: ISortDataAttr[]\r\n    dataTable: Map<string, IDataItem>\r\n    dataOrder: string[]\r\n\r\n    //chart status\r\n    charts: string[]\r\n    tool: string\r\n    selection: string[]\r\n    suggestion: boolean\r\n    isLoading: boolean\r\n\r\n    spec: ICanisSpec\r\n    activatePlusBtn: IActivatePlusBtn\r\n    // activatePlusBtnAniId: string\r\n    // selectedMarksForPlusBtn: string[]\r\n    // renderedSuggestionUniqueIdx: number\r\n    allPaths: IPath[]//for kf suggestion\r\n    //keyframe status\r\n    kfGroupSize: IKfGroupSize // size of all kf groups\r\n\r\n    //video\r\n    lottieAni: AnimationItem\r\n    lottieSpec: any\r\n    keyframeGroups: IKeyframeGroup[]//each keyframe group correspond to one root from one aniunit\r\n    staticMarks: string[]\r\n\r\n    //status\r\n    mousemoving: boolean\r\n    zoomLevel: number\r\n    chartThumbNailZoomLevels: number\r\n}\r\n\r\n/**\r\n * re-render parts when the state changes\r\n */\r\nexport class State implements IState {\r\n    _sortDataAttrs: ISortDataAttr[] = [];\r\n    _dataTable: Map<string, IDataItem> = new Map();\r\n    _dataOrder: string[]\r\n\r\n    _charts: string[]\r\n    _tool: string\r\n    _selection: string[]\r\n    _suggestion: boolean\r\n    _isLoading: boolean\r\n    _spec: ICanisSpec\r\n    _activatePlusBtn: IActivatePlusBtn\r\n    _allPaths: IPath[]\r\n    _kfGroupSize: IKfGroupSize\r\n\r\n    _lottieAni: AnimationItem\r\n    _lottieSpec: any\r\n    _keyframeGroups: IKeyframeGroup[]\r\n    _staticMarks: string[]\r\n    // _groupingAndTiming: any\r\n\r\n    _mousemoving: boolean = false\r\n    _zoomLevel: number = 1;\r\n    chartThumbNailZoomLevels: number = 4;\r\n\r\n    set sortDataAttrs(sda: ISortDataAttr[]) {\r\n        //compare incoming\r\n        let sameAttrs: boolean = true;\r\n        if (this._sortDataAttrs.length !== 0) {\r\n            if (sda.length !== this._sortDataAttrs.length) {\r\n                sameAttrs = false;\r\n            } else {\r\n                let oriAttrs: string[] = this._sortDataAttrs.map(a => { return a.attr });\r\n                let newAttrs: string[] = sda.map(a => { return a.attr });\r\n                sameAttrs = Tool.identicalArrays(oriAttrs, newAttrs);\r\n            }\r\n        }\r\n        if (!sameAttrs) {\r\n            // Renderer.renderDataAttrs(sda);//for data binding\r\n        } else {\r\n            //find sort reference\r\n            const [found, attrAndOrder] = Util.findUpdatedAttrOrder(sda);\r\n            //reorder data items\r\n            if (found) {\r\n                this._sortDataAttrs = sda;\r\n                Reducer.triger(action.UPDATE_DATA_ORDER, Util.sortDataTable(attrAndOrder));\r\n                Renderer.renderDataTable(this.dataTable);\r\n            }\r\n        }\r\n        this._sortDataAttrs = sda;\r\n    }\r\n    get sortDataAttrs(): ISortDataAttr[] {\r\n        return this._sortDataAttrs;\r\n    }\r\n    set dataTable(dt: Map<string, IDataItem>) {\r\n        //State.saveHistory(action.UPDATE_DATA_TABLE, this._dataTable);\r\n        this._dataTable = dt;\r\n        Renderer.renderDataTable(this.dataTable);\r\n    }\r\n    get dataTable(): Map<string, IDataItem> {\r\n        return this._dataTable;\r\n    }\r\n    set dataOrder(dord: string[]) {\r\n        this._dataOrder = dord;\r\n    }\r\n    get dataOrder(): string[] {\r\n        return this._dataOrder;\r\n    }\r\n    set charts(cs: string[]) {\r\n        //State.saveHistory(action.LOAD_CHARTS, this._charts);\r\n        this._charts = cs;\r\n        Reducer.triger(action.UPDATE_SPEC_CHARTS, this.charts);\r\n        // Renderer.generateAndRenderSpec(this);\r\n    }\r\n    get charts(): string[] {\r\n        return this._charts;\r\n    }\r\n    set tool(t: string) {\r\n        this._tool = t;\r\n        Renderer.renderChartTool(this.tool);\r\n    }\r\n    get tool(): string {\r\n        return this._tool;\r\n    }\r\n    set selection(sel: string[]) {\r\n        //State.saveHistory(action.UPDATE_SELECTION, this._selection);\r\n        this._selection = sel;\r\n        Renderer.renderSelectedMarks(this.selection);\r\n    }\r\n    get selection(): string[] {\r\n        return this._selection;\r\n    }\r\n    set suggestion(sug: boolean) {\r\n        //State.saveHistory(action.TOGGLE_SUGGESTION, this._suggestion);\r\n        this._suggestion = sug;\r\n        // Renderer.renderSuggestionCheckbox(this.suggestion);\r\n    }\r\n    get suggestion(): boolean {\r\n        return this._suggestion;\r\n    }\r\n    set kfGroupSize(kfgSize: IKfGroupSize) {\r\n        this._kfGroupSize = kfgSize;\r\n        Renderer.renderKfContainerSliders(this.kfGroupSize);\r\n    }\r\n    get kfGroupSize(): IKfGroupSize {\r\n        return this._kfGroupSize;\r\n    }\r\n    set lottieAni(lai: AnimationItem) {\r\n        this._lottieAni = lai;\r\n    }\r\n    get lottieAni(): AnimationItem {\r\n        return this._lottieAni;\r\n    }\r\n    set lottieSpec(ls: any) {\r\n        this._lottieSpec = ls;\r\n        Renderer.renderVideo(ls);\r\n    }\r\n    get lottieSpec(): any {\r\n        return this._lottieSpec;\r\n    }\r\n    set keyframeGroups(kfts: IKeyframeGroup[]) {\r\n        if (kfts) {\r\n            this._keyframeGroups = kfts;\r\n            //render keyframes\r\n            Renderer.renderKeyframeTracks(this.keyframeGroups);\r\n        }\r\n    }\r\n    get keyframeGroups(): IKeyframeGroup[] {\r\n        return this._keyframeGroups;\r\n    }\r\n    set staticMarks(sm: string[]) {\r\n        this._staticMarks = sm;\r\n        Renderer.renderStaticKf(this.staticMarks);\r\n    }\r\n    get staticMarks(): string[] {\r\n        return this._staticMarks;\r\n    }\r\n    set isLoading(il: boolean) {\r\n        this._isLoading = il;\r\n    }\r\n    get isLoading(): boolean {\r\n        return this._isLoading;\r\n    }\r\n    set spec(canisSpec: ICanisSpec) {\r\n        //add loading\r\n        console.log('going to validate spec: ', canisSpec);\r\n        //validate spec before render\r\n        const validSpec: boolean = CanisGenerator.validate(canisSpec);\r\n        if (validSpec) {\r\n            this._spec = canisSpec;\r\n            Renderer.renderSpec(this.spec);\r\n        }\r\n    }\r\n    get spec(): ICanisSpec {\r\n        return this._spec;\r\n    }\r\n    set activatePlusBtn(plusBtnInfo: IActivatePlusBtn) {\r\n        this._activatePlusBtn = plusBtnInfo;\r\n        Renderer.renderActivatedPlusBtn();\r\n    }\r\n    get activatePlusBtn(): IActivatePlusBtn {\r\n        return this._activatePlusBtn;\r\n    }\r\n\r\n    set allPaths(ap: IPath[]) {\r\n        this._allPaths = ap;\r\n    }\r\n    get allPaths(): IPath[] {\r\n        return this._allPaths;\r\n    }\r\n    set mousemoving(mm: boolean) {\r\n        this._mousemoving = mm;\r\n    }\r\n    get mousemoving(): boolean {\r\n        return this._mousemoving;\r\n    }\r\n    set zoomLevel(zl: number) {\r\n        this._zoomLevel = zl;\r\n        Renderer.zoomKfContainer(zl);\r\n    }\r\n    get zoomLevel(): number {\r\n        return this._zoomLevel;\r\n    }\r\n\r\n    public reset(): void {\r\n        this.sortDataAttrs = [];\r\n        this.dataTable = new Map();\r\n        this.dataOrder = [];\r\n\r\n        this.charts = [];\r\n        this.tool = ViewToolBtn.SINGLE;\r\n        this.selection = [];\r\n        this.suggestion = true;\r\n\r\n        this.keyframeGroups = null;\r\n        // this.groupingAndTiming = null;\r\n    }\r\n\r\n    /*\r\n     * each interaction node is an array of interaction records, each record contains the history value and current value,\r\n     * revert: rerender the history value in the record where the pointer points at then move the pointer to the previous record\r\n     * redo: move the pointer back to the next record and render the current value in the record\r\n     */\r\n    static stateHistory: IInteractionRecord[][] = [];//each step might triger multiple actions, thus each step correspond to one Array<[actionType, stateAttrValue]>\r\n    static stateHistoryIdx: number = -1;\r\n    static tmpStateBusket: IInteractionRecord[] = [];\r\n    public static saveHistory(insertHistory: boolean = false) {\r\n        if (insertHistory) {\r\n            this.stateHistory[this.stateHistoryIdx] = [...this.stateHistory[this.stateHistoryIdx], ...this.tmpStateBusket];\r\n        } else {\r\n            this.stateHistoryIdx++;\r\n            this.stateHistory = this.stateHistory.slice(0, this.stateHistoryIdx);\r\n            this.stateHistory.push(this.tmpStateBusket);\r\n            console.log('saving history: ', this.stateHistory, this.tmpStateBusket, this.stateHistoryIdx);\r\n        }\r\n        this.tmpStateBusket = [];\r\n    }\r\n\r\n    public static revertHistory() {\r\n        if (this.stateHistoryIdx >= 0) {\r\n            const actionAndValues: IInteractionRecord[] = this.stateHistory[this.stateHistoryIdx];\r\n            let i = actionAndValues.length - 1;\r\n            this.runRevertHistory(actionAndValues, i);\r\n            this.stateHistoryIdx--;\r\n        }\r\n    }\r\n\r\n    public static runRevertHistory(actionAndValues: IInteractionRecord[], i: number) {\r\n        if (i >= 0) {\r\n            new Promise<void>((resolve, reject) => {\r\n                Reducer.triger(actionAndValues[i].historyAction.actionType, actionAndValues[i].historyAction.actionVal);\r\n                setTimeout(() => {\r\n                    resolve();\r\n                }, 1);\r\n            }).then(() => {\r\n                i--;\r\n                this.runRevertHistory(actionAndValues, i);\r\n            })\r\n        }\r\n    }\r\n\r\n    public static redoHistory() {\r\n        if (this.stateHistoryIdx < this.stateHistory.length - 1) {\r\n            this.stateHistoryIdx++;\r\n            const actionAndValues: IInteractionRecord[] = this.stateHistory[this.stateHistoryIdx];\r\n            let i = 0;\r\n            this.runRedoHistory(actionAndValues, i);\r\n            // actionAndValues.forEach((interactionRecord: IInteractionRecord) => {\r\n            //     console.log('redo history: ', interactionRecord.currentAction.actionType, interactionRecord.currentAction.actionVal);\r\n            //     Reducer.triger(interactionRecord.currentAction.actionType, interactionRecord.currentAction.actionVal);\r\n            // })\r\n\r\n        }\r\n    }\r\n\r\n    public static runRedoHistory(actionAndValues: IInteractionRecord[], i: number) {\r\n        if (i < actionAndValues.length) {\r\n            new Promise<void>((resolve, reject) => {\r\n                Reducer.triger(actionAndValues[i].currentAction.actionType, actionAndValues[i].currentAction.actionVal);\r\n                setTimeout(() => {\r\n                    resolve();\r\n                }, 1);\r\n            }).then(() => {\r\n                i++;\r\n                this.runRedoHistory(actionAndValues, i);\r\n            })\r\n        }\r\n    }\r\n\r\n}\r\n\r\nexport let state = new State();","import '../assets/style/floating-window.scss'\r\nimport MushroomImg from '../assets/img/examples/mushroom.png'\r\nimport MushroomChart from '../assets/charts/mushrooms.svg'\r\nimport OsImg from '../assets/img/examples/os.png'\r\nimport OsChart from '../assets/charts/os.svg'\r\nimport PurchasesImg from '../assets/img/examples/purchases.png'\r\nimport PurchasesChart from '../assets/charts/purchases.svg'\r\nimport NightingaleImg from '../assets/img/examples/nightingale.png'\r\nimport NightingaleChart from '../assets/charts/nightingale.svg'\r\nimport Co2Img from '../assets/img/examples/co2.png'\r\nimport Co2Chart from '../assets/charts/co2.svg'\r\nimport DessertImg from '../assets/img/examples/dessert.png'\r\nimport DessertChart from '../assets/charts/desserts.svg'\r\nimport BostonImg from '../assets/img/examples/bostonWeather.png'\r\nimport BostonChart from '../assets/charts/bostonWeather.svg'\r\nimport WorldPopuImg from '../assets/img/examples/worldPopulation.png'\r\nimport WorldPopuChart from '../assets/charts/worldPopulation.svg'\r\nimport PolioImg from '../assets/img/examples/polio.png'\r\nimport PolioChart from '../assets/charts/polio_black.svg'\r\nimport DrivingImg from '../assets/img/examples/driving.png'\r\nimport DrivingChart from '../assets/charts/driving.svg'\r\nimport FlareImg from '../assets/img/examples/flare.png'\r\nimport FlareChart from '../assets/charts/flare.svg'\r\nimport GanttImg from '../assets/img/examples/gantt.png'\r\nimport GanttChart from '../assets/charts/gantt.svg'\r\nimport UsPopulationImg from '../assets/img/examples/usPopulation.png'\r\nimport UsPopulationChart from '../assets/charts/usPopulation.svg'\r\nimport ChinaPmImg from '../assets/img/examples/chinapm.png'\r\nimport ChinaPmChart from '../assets/charts/chinapm.svg'\r\nimport HiringImg from '../assets/img/examples/hiring.png'\r\nimport HiringChart from '../assets/charts/hiring.svg'\r\nimport TScoreImg from '../assets/img/examples/tscore.png'\r\nimport TScoreChart from '../assets/charts/tScore.svg'\r\nimport FruitSaleImg from '../assets/img/examples/fruitsale.png'\r\nimport FruitSaleChart from '../assets/charts/fruit.svg'\r\nimport WeatherImg from '../assets/img/examples/weather.png'\r\nimport WeatherChart from '../assets/charts/weather.svg'\r\nimport EducationImg from '../assets/img/examples/education.png'\r\nimport EducationChart from '../assets/charts/education.svg'\r\nimport GdpChart from '../assets/charts/GDPofRegions.svg'\r\nimport GdpImg from '../assets/img/examples/GDPofRegions.png'\r\nimport StackedChart from '../assets/charts/food_supply.svg'\r\nimport StackedImg from '../assets/img/examples/food_supply.png'\r\nimport { ViewContent } from './viewWindow'\r\nimport { Loading } from './widgets/loading'\r\nimport { chartManager } from '../app/chartManager'\r\n\r\nexport default class FloatingWindow {\r\n    static TYPE_EXAMPLE: string = 'exampleContainer';//type of the floating window is example\r\n    // static TYPE_SPEC: string = 'SpecContainer';//type of the floating window is spec test\r\n    static CLICKABLE_AREA_CHART: string = 'inputChart';\r\n    static CLICKABLE_AREA_PROJECT: string = 'inputProject';\r\n\r\n    static MUSHROOM_CHART: string = 'mushroom';\r\n    static GANTT_CHART: string = 'gantt';\r\n    static OS_CHART: string = 'mobileOS';\r\n    static PURCHASE_CHART: string = 'purchases';\r\n    static NIGHTINGALE_CHART: string = 'nightingale';\r\n    static CO2_CHART: string = 'co2';\r\n    static DESSERT_CHART: string = 'dessert';\r\n    static BOSTON_CHART: string = 'boston';\r\n    static CHINAPM_CHART: string = 'chinapm';\r\n    static WORLDPOPULATION_CHART: string = 'worldPopulation';\r\n    static POLIO_CHART: string = 'polio';\r\n    static DRIVING_CHART: string = 'driving';\r\n    static FLARE_CHART: string = 'flare';\r\n    static USPOPULATION_CHART: string = 'uspopulation';\r\n    static HIRING_CHART: string = 'hiring';\r\n    static TSCORE_CHART: string = 'tscore';\r\n    static FRUITSALE_CHART: string = 'fruitSale';\r\n    static WEATHER_CHART: string = 'weather';\r\n    static EDUCATION_CHART: string = 'education';\r\n    static GDP_CHART: string = 'gdp';\r\n    static STACKED_CHART: string = 'stacked';\r\n    floatingWindow: HTMLDivElement;\r\n\r\n    public createFloatingWindow(id: string) {\r\n        //create the background container\r\n        this.floatingWindow = document.createElement('div');\r\n        this.floatingWindow.id = id;\r\n        this.floatingWindow.className = 'floating-container';\r\n        const windowBg: HTMLDivElement = document.createElement('div');\r\n        windowBg.className = 'floating-bg';\r\n        this.floatingWindow.appendChild(windowBg);\r\n\r\n        //create window\r\n        const fWindow: HTMLDivElement = document.createElement('div');\r\n        fWindow.className = 'f-window';\r\n        const windowTitle: HTMLDivElement = document.createElement('div');\r\n        windowTitle.className = 'title-wrapper';\r\n        const titleContent: HTMLDivElement = document.createElement('div');\r\n        titleContent.className = 'title-content';\r\n\r\n        windowTitle.appendChild(titleContent);\r\n        const closeBtn: HTMLSpanElement = document.createElement('span');\r\n        closeBtn.className = 'title-btn';\r\n        const closeIcon: HTMLSpanElement = document.createElement('span');\r\n        closeIcon.className = 'btn-icon close-icon';\r\n        closeBtn.appendChild(closeIcon);\r\n        closeBtn.onclick = () => {\r\n            this.floatingWindow.remove();\r\n        }\r\n        windowTitle.appendChild(closeBtn);\r\n        fWindow.appendChild(windowTitle);\r\n        //create window content\r\n        const windowContent: HTMLDivElement = document.createElement('div');\r\n        windowContent.className = 'content-wrapper';\r\n        switch (id) {\r\n            case FloatingWindow.TYPE_EXAMPLE:\r\n                titleContent.innerHTML = '';\r\n                windowContent.appendChild(this.createExampleList());\r\n                break;\r\n            // case FloatingWindow.TYPE_SPEC:\r\n            //     titleContent.innerHTML = 'spec';\r\n            //     windowContent.appendChild(this.createSpecPanel());\r\n            //     break;\r\n            default:\r\n                break;\r\n        }\r\n\r\n        fWindow.appendChild(windowContent);\r\n        this.floatingWindow.appendChild(fWindow);\r\n    }\r\n\r\n    public createExampleList(): HTMLDivElement {\r\n        const exampleList: HTMLDivElement = document.createElement('div');\r\n        exampleList.className = 'example-list';\r\n\r\n        const clickableAreaContainer: HTMLDivElement = document.createElement('div');\r\n        clickableAreaContainer.className = 'click-to-open-area-container';\r\n\r\n        const clickableAreaSubContainerChart: HTMLDivElement = document.createElement('div');\r\n        clickableAreaSubContainerChart.className = 'click-to-open-area-subcontainer';\r\n        const openchartTitle: HTMLHeadingElement = document.createElement('h3');\r\n        openchartTitle.innerText = 'Load Charts';\r\n        clickableAreaSubContainerChart.appendChild(openchartTitle);\r\n        clickableAreaSubContainerChart.appendChild(this.createClickableArea(FloatingWindow.CLICKABLE_AREA_CHART));\r\n        clickableAreaContainer.appendChild(clickableAreaSubContainerChart);\r\n\r\n        const clickableAreaSubContainerProj: HTMLDivElement = document.createElement('div');\r\n        clickableAreaSubContainerProj.className = 'click-to-open-area-subcontainer';\r\n        const projectTitle: HTMLHeadingElement = document.createElement('h3');\r\n        projectTitle.innerText = 'Open Project';\r\n        clickableAreaSubContainerProj.appendChild(projectTitle);\r\n        clickableAreaSubContainerProj.appendChild(this.createClickableArea(FloatingWindow.CLICKABLE_AREA_PROJECT));\r\n        clickableAreaContainer.appendChild(clickableAreaSubContainerProj);\r\n        exampleList.appendChild(clickableAreaContainer);\r\n\r\n        const sep: HTMLHRElement = document.createElement('hr');\r\n        sep.className = 'floating-window-sep';\r\n        exampleList.appendChild(sep);\r\n\r\n        const chartTitle: HTMLHeadingElement = document.createElement('h3');\r\n        chartTitle.innerText = 'Load Example Project';\r\n        exampleList.appendChild(chartTitle);\r\n        //add chart examples\r\n        const exampleItemContainer1: HTMLDivElement = document.createElement('div');\r\n        exampleItemContainer1.className = 'list-item-container';\r\n        exampleItemContainer1.appendChild(this.createExampleItem(FloatingWindow.NIGHTINGALE_CHART, 'Nightingale'));\r\n        exampleItemContainer1.appendChild(this.createExampleItem(FloatingWindow.HIRING_CHART, 'hiring'));\r\n        exampleItemContainer1.appendChild(this.createExampleItem(FloatingWindow.OS_CHART, 'Mobile OS'));\r\n        exampleItemContainer1.appendChild(this.createExampleItem(FloatingWindow.GANTT_CHART, 'eventPlan'));\r\n        exampleList.appendChild(exampleItemContainer1);\r\n        const exampleItemContainer2: HTMLDivElement = document.createElement('div');\r\n        exampleItemContainer2.className = 'list-item-container';\r\n        exampleItemContainer2.appendChild(this.createExampleItem(FloatingWindow.GDP_CHART, 'gdp of region'));\r\n        exampleItemContainer2.appendChild(this.createExampleItem(FloatingWindow.MUSHROOM_CHART, 'Mushroom'));\r\n        exampleItemContainer2.appendChild(this.createExampleItem(FloatingWindow.DESSERT_CHART, 'Dessert'))\r\n        exampleItemContainer2.appendChild(this.createExampleItem(FloatingWindow.DRIVING_CHART, 'Driving'));\r\n        exampleList.appendChild(exampleItemContainer2);\r\n        const exampleItemContainer3: HTMLDivElement = document.createElement(\"div\");\r\n        exampleItemContainer3.className = 'list-item-container';\r\n        exampleItemContainer3.appendChild(this.createExampleItem(FloatingWindow.FRUITSALE_CHART, 'fruitSale'));\r\n        exampleItemContainer3.appendChild(this.createExampleItem(FloatingWindow.WEATHER_CHART, 'september weather'));\r\n        exampleItemContainer3.appendChild(this.createExampleItem(FloatingWindow.STACKED_CHART, 'Food Supply'));\r\n        exampleItemContainer3.appendChild(this.createExampleItem(FloatingWindow.PURCHASE_CHART, 'Doughnut Purchases'));\r\n        exampleList.appendChild(exampleItemContainer3);\r\n        const exampleItemContainer4: HTMLDivElement = document.createElement('div');\r\n        exampleItemContainer4.className = 'list-item-container';\r\n        exampleItemContainer4.appendChild(this.createExampleItem(FloatingWindow.USPOPULATION_CHART, 'usPopulation'));\r\n        exampleItemContainer4.appendChild(this.createExampleItem(FloatingWindow.CHINAPM_CHART, 'chinaPm'));\r\n        exampleItemContainer4.appendChild(this.createExampleItem(FloatingWindow.CO2_CHART, 'CO2 Emissions'));\r\n        exampleItemContainer4.appendChild(this.createExampleItem(FloatingWindow.EDUCATION_CHART, 'Higher Education v.s. Obesity'))\r\n        exampleList.appendChild(exampleItemContainer4);\r\n        const exampleItemContainer5: HTMLDivElement = document.createElement('div');\r\n        exampleItemContainer5.className = 'list-item-container';\r\n        exampleItemContainer5.appendChild(this.createExampleItem(FloatingWindow.WORLDPOPULATION_CHART, 'World Population Pyramid'));\r\n        exampleItemContainer5.appendChild(this.createExampleItem(FloatingWindow.TSCORE_CHART, 'tScore'));\r\n        exampleItemContainer5.appendChild(this.createExampleItem(FloatingWindow.FLARE_CHART, 'Flare'));\r\n        exampleItemContainer5.appendChild(this.createExampleItem(FloatingWindow.POLIO_CHART, 'Polio Incidence Rates'));\r\n        // exampleItemContainer5.appendChild(this.createExampleItem(FloatingWindow.BOSTON_CHART, 'Boston Weather'));\r\n        exampleList.appendChild(exampleItemContainer5);\r\n        return exampleList;\r\n    }\r\n\r\n    public createClickableArea(type: string): HTMLDivElement {\r\n        const clickableArea: HTMLDivElement = document.createElement('div');\r\n        clickableArea.className = 'click-to-open-area';\r\n        clickableArea.ondragover = (overEvt) => {\r\n            overEvt.preventDefault();\r\n        }\r\n        clickableArea.ondragenter = () => {\r\n            clickableArea.classList.add('drag-over-area');\r\n        }\r\n        clickableArea.ondragleave = () => {\r\n            clickableArea.classList.remove('drag-over-area');\r\n        }\r\n\r\n        switch (type) {\r\n            case FloatingWindow.CLICKABLE_AREA_CHART:\r\n                clickableArea.innerHTML = 'Drop or Open File (.dsvg)';\r\n                clickableArea.ondrop = (dropEvt) => {\r\n                    const that = this;\r\n                    dropEvt.preventDefault();\r\n                    let projectFile = dropEvt.dataTransfer.files[0];\r\n                    const fr = new FileReader();\r\n                    fr.readAsText(projectFile);\r\n                    fr.onload = function () {\r\n                        const chart: string = <string>fr.result;\r\n                        that.loadExampleChart(chart);\r\n                    }\r\n                }\r\n                clickableArea.onclick = (clickEvt) => {\r\n                    const that = this;\r\n                    const input: HTMLInputElement = document.createElement(\"input\");\r\n                    input.setAttribute('type', 'file');\r\n                    input.setAttribute('multiple', 'multiple');\r\n                    input.onchange = (changeEvt) => {\r\n                        let charts: string[] = [];\r\n                        for (let i = 0, len = input.files.length; i < len; i++) {\r\n                            const chartFile: File = input.files[i];\r\n                            const fr = new FileReader();\r\n                            fr.readAsText(chartFile);\r\n                            fr.onload = function () {\r\n                                const chart: string = <string>fr.result;\r\n                                that.loadExampleChart(chart);\r\n                            }\r\n                        }\r\n\r\n\r\n                    }\r\n                    input.click();\r\n                    return false;\r\n                }\r\n                break;\r\n            case FloatingWindow.CLICKABLE_AREA_PROJECT:\r\n                clickableArea.innerHTML = 'Drop or Open File (.cpro)';\r\n                clickableArea.ondrop = (dropEvt) => {\r\n                    const that = this;\r\n                    dropEvt.preventDefault();\r\n                    let projectFile = dropEvt.dataTransfer.files[0];\r\n                    const fr = new FileReader();\r\n                    fr.readAsText(projectFile);\r\n                    fr.onload = function () {\r\n                        const spec: string = <string>fr.result;\r\n                        // TODO:load canis spec\r\n                        that.floatingWindow.remove();\r\n                    }\r\n                }\r\n                clickableArea.onclick = (clickEvt) => {\r\n                    const that = this;\r\n                    const input: HTMLInputElement = document.createElement(\"input\");\r\n                    input.setAttribute('type', 'file');\r\n                    input.onchange = (changeEvt) => {\r\n                        let projectFile = input.files[0];\r\n                        const fr = new FileReader();\r\n                        fr.readAsText(projectFile);\r\n                        fr.onload = function () {\r\n                            const spec: string = <string>fr.result;\r\n                            // TODO: load canis spec\r\n                            that.floatingWindow.remove();\r\n                        }\r\n                    }\r\n                    input.click();\r\n                    return false;\r\n                }\r\n                break;\r\n        }\r\n        const uploadIcon: HTMLDivElement = document.createElement('div');\r\n        uploadIcon.className = 'upload-icon';\r\n        clickableArea.appendChild(uploadIcon);\r\n\r\n        return clickableArea;\r\n    }\r\n\r\n    public createExampleItem(name: string, caption: string): HTMLDivElement {\r\n        const item: HTMLDivElement = document.createElement('div');\r\n        item.className = 'example-list-item';\r\n        const imgWrapper: HTMLDivElement = document.createElement('div');\r\n        const img: HTMLImageElement = document.createElement('img');\r\n        switch (name) {\r\n            case FloatingWindow.MUSHROOM_CHART:\r\n                img.src = MushroomImg;\r\n                item.onclick = () => this.loadExampleChart(MushroomChart);\r\n                break;\r\n            case FloatingWindow.DRIVING_CHART:\r\n                img.src = DrivingImg;\r\n                item.onclick = () => this.loadExampleChart(DrivingChart);\r\n                break;\r\n            case FloatingWindow.OS_CHART:\r\n                img.src = OsImg;\r\n                item.onclick = () => this.loadExampleChart(OsChart);\r\n                break;\r\n            case FloatingWindow.PURCHASE_CHART:\r\n                img.src = PurchasesImg;\r\n                item.onclick = () => this.loadExampleChart(PurchasesChart);\r\n                break;\r\n            case FloatingWindow.NIGHTINGALE_CHART:\r\n                img.src = NightingaleImg;\r\n                item.onclick = () => this.loadExampleChart(NightingaleChart);\r\n                break;\r\n            case FloatingWindow.CO2_CHART:\r\n                img.src = Co2Img;\r\n                item.onclick = () => this.loadExampleChart(Co2Chart);\r\n                break;\r\n            case FloatingWindow.DESSERT_CHART:\r\n                img.src = DessertImg;\r\n                item.onclick = () => this.loadExampleChart(DessertChart);\r\n                break;\r\n            case FloatingWindow.BOSTON_CHART:\r\n                img.src = BostonImg;\r\n                item.onclick = () => this.loadExampleChart(BostonChart);\r\n                break;\r\n            case FloatingWindow.WORLDPOPULATION_CHART:\r\n                img.src = WorldPopuImg;\r\n                item.onclick = () => this.loadExampleChart(WorldPopuChart);\r\n                break;\r\n            case FloatingWindow.POLIO_CHART:\r\n                img.src = PolioImg;\r\n                item.onclick = () => this.loadExampleChart(PolioChart);\r\n                break;\r\n            case FloatingWindow.FLARE_CHART:\r\n                img.src = FlareImg;\r\n                item.onclick = () => this.loadExampleChart(FlareChart);\r\n                break;\r\n            case FloatingWindow.USPOPULATION_CHART:\r\n                img.src = UsPopulationImg;\r\n                item.onclick = () => this.loadExampleChart(UsPopulationChart);\r\n                break;\r\n            case FloatingWindow.CHINAPM_CHART:\r\n                img.src = ChinaPmImg;\r\n                item.onclick = () => this.loadExampleChart(ChinaPmChart);\r\n                break;\r\n            case FloatingWindow.HIRING_CHART:\r\n                img.src = HiringImg;\r\n                item.onclick = () => this.loadExampleChart(HiringChart);\r\n                break;\r\n            case FloatingWindow.TSCORE_CHART:\r\n                img.src = TScoreImg;\r\n                item.onclick = () => this.loadExampleChart(TScoreChart);\r\n                break;\r\n            case FloatingWindow.GANTT_CHART:\r\n                img.src = GanttImg;\r\n                item.onclick = () => this.loadExampleChart(GanttChart);\r\n                break;\r\n            case FloatingWindow.FRUITSALE_CHART:\r\n                img.src = FruitSaleImg;\r\n                item.onclick = () => this.loadExampleChart(FruitSaleChart);\r\n                break;\r\n            case FloatingWindow.WEATHER_CHART:\r\n                img.src = WeatherImg;\r\n                item.onclick = () => this.loadExampleChart(WeatherChart);\r\n                break;\r\n            case FloatingWindow.EDUCATION_CHART:\r\n                img.src = EducationImg;\r\n                item.onclick = () => this.loadExampleChart(EducationChart);\r\n                break;\r\n            case FloatingWindow.GDP_CHART:\r\n                img.src = GdpImg;\r\n                item.onclick = () => this.loadExampleChart(GdpChart);\r\n                break;\r\n            case FloatingWindow.STACKED_CHART:\r\n                img.src = StackedImg;\r\n                item.onclick = () => this.loadExampleChart(StackedChart);\r\n                break;\r\n        }\r\n        imgWrapper.appendChild(img);\r\n        item.appendChild(imgWrapper);\r\n        const captionWrapper: HTMLParagraphElement = document.createElement('p');\r\n        captionWrapper.innerText = caption;\r\n        item.appendChild(captionWrapper);\r\n        return item;\r\n    }\r\n\r\n    public loadExampleChart(chart: any) {\r\n        chartManager.loadChart(chart);\r\n        this.floatingWindow.remove();\r\n    }\r\n}","import '../assets/style/keyframeContainer.scss'\r\nimport Tool from '../util/tool';\r\nimport { IKfGroupSize } from '../app_backup/core/ds';\r\nimport { ICoord, ISize } from '../util/ds';\r\nimport Reducer from '../app_backup/reducer';\r\nimport * as action from '../app_backup/action';\r\nimport { state } from '../app_backup/state';\r\nimport KfTrack from './widgets/kfTrack';\r\nimport { kfTrack } from '../app/kfTrack';\r\n\r\nexport class KfContainer {\r\n    static KF_CONTAINER: string = 'kfTracksContainer';\r\n    static KF_SCALE_ID: string = 'kfScaleWrapper';\r\n    static KF_LIST_ID: string = 'kfList';\r\n    // static MASK: string = 'markContainer';\r\n    static DURATION_GRADIENT: string = 'durationGradient';\r\n    static SHADOW: string = 'hoverShadow';\r\n    static KF_BG: string = 'kfBgG';\r\n    static KF_FG: string = 'kfFgG';\r\n    static KF_POPUP: string = 'kfPopupG';\r\n    static KF_POPCOVER: string = 'kfPopCover';\r\n    static KF_OMIT: string = 'kfOmits';\r\n    static KF_HINT: string = 'kfHintG';\r\n    static KF_MENU: string = 'kfMenuG';\r\n    static SLIDER_W: number = 10;\r\n    static WHEEL_STEP: number = 20;\r\n\r\n    public kfWidgetContainer: HTMLDivElement;\r\n    public kfTrackScaleContainer: SVGGElement;\r\n    public kfTrackContainer: SVGGElement;\r\n    public xSliderContainer: SVGElement;\r\n    public xSliderBg: SVGRectElement;\r\n    public xSlider: SVGRectElement;\r\n    public xSliderContainerW: number = 1000;\r\n    public xSliderPercent: number = 1.0;\r\n    public ySliderContainer: SVGElement;\r\n    public ySliderBg: SVGRectElement;\r\n    public ySlider: SVGRectElement;\r\n    public ySliderContainerH: number = 200;\r\n    public ySliderPercent: number = 1.0;\r\n    public transDistance: ISize = { w: 0, h: 0 };\r\n\r\n    public static showPopCover() {\r\n        document.getElementById(this.KF_POPCOVER).setAttribute('display', '');\r\n    }\r\n\r\n    public static hidePopCover() {\r\n        document.getElementById(this.KF_POPCOVER).setAttribute('display', 'none');\r\n    }\r\n\r\n    public createKfContainer() {\r\n        this.kfWidgetContainer = document.createElement('div');\r\n        this.kfWidgetContainer.setAttribute('class', 'kf-widget-container');\r\n\r\n        //create kf container\r\n        const keyframeTrackSVG: SVGElement = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n        keyframeTrackSVG.setAttributeNS(null, 'id', KfContainer.KF_CONTAINER);\r\n        keyframeTrackSVG.setAttributeNS(null, 'class', 'kf-tracks-container');\r\n\r\n        //add gradient \r\n        const defs: SVGDefsElement = document.createElementNS('http://www.w3.org/2000/svg', 'defs');\r\n        const linearGradient: SVGLinearGradientElement = document.createElementNS('http://www.w3.org/2000/svg', 'linearGradient');\r\n        linearGradient.id = KfContainer.DURATION_GRADIENT;\r\n        const stop1: SVGStopElement = document.createElementNS('http://www.w3.org/2000/svg', 'stop');\r\n        stop1.setAttributeNS(null, 'offset', '0%');\r\n        stop1.setAttributeNS(null, 'stop-color', 'rgba(119, 168, 214, 0)');\r\n        linearGradient.appendChild(stop1);\r\n        const stop2: SVGStopElement = document.createElementNS('http://www.w3.org/2000/svg', 'stop');\r\n        stop2.setAttributeNS(null, 'offset', '100%');\r\n        stop2.setAttributeNS(null, 'stop-color', 'rgba(119, 168, 214, 255)');\r\n        linearGradient.appendChild(stop2);\r\n        defs.appendChild(linearGradient);\r\n        //add shadow \r\n        const shadowFilter: SVGFilterElement = document.createElementNS('http://www.w3.org/2000/svg', 'filter');\r\n        shadowFilter.id = KfContainer.SHADOW;\r\n        const feGaussianBlur: SVGFEGaussianBlurElement = document.createElementNS('http://www.w3.org/2000/svg', 'feGaussianBlur');\r\n        feGaussianBlur.setAttributeNS(null, 'in', 'SourceAlpha');\r\n        feGaussianBlur.setAttributeNS(null, 'stdDeviation', '3');\r\n        shadowFilter.appendChild(feGaussianBlur);\r\n        const feOffset: SVGFEOffsetElement = document.createElementNS('http://www.w3.org/2000/svg', 'feOffset');\r\n        feOffset.setAttributeNS(null, 'dx', '0.5');\r\n        feOffset.setAttributeNS(null, 'dy', '2');\r\n        shadowFilter.appendChild(feOffset);\r\n        const feComponentTransfer: SVGFEComponentTransferElement = document.createElementNS('http://www.w3.org/2000/svg', 'feComponentTransfer');\r\n        const feFuncA: SVGFEFuncAElement = document.createElementNS('http://www.w3.org/2000/svg', 'feFuncA');\r\n        feFuncA.setAttributeNS(null, 'type', 'linear');\r\n        feFuncA.setAttributeNS(null, 'slope', '0.3');\r\n        feComponentTransfer.appendChild(feFuncA);\r\n        shadowFilter.appendChild(feComponentTransfer);\r\n        const feMerge: SVGFEMergeElement = document.createElementNS('http://www.w3.org/2000/svg', 'feMerge');\r\n        const feMergeNode: SVGFEMergeNodeElement = document.createElementNS('http://www.w3.org/2000/svg', 'feMergeNode');\r\n        feMerge.appendChild(feMergeNode);\r\n        const feMergeNode2: SVGFEMergeNodeElement = document.createElementNS('http://www.w3.org/2000/svg', 'feMergeNode');\r\n        feMergeNode2.setAttributeNS(null, 'in', 'SourceGraphic');\r\n        feMerge.appendChild(feMergeNode2);\r\n        shadowFilter.appendChild(feMerge);\r\n        defs.appendChild(shadowFilter);\r\n        keyframeTrackSVG.appendChild(defs);\r\n\r\n        this.kfTrackScaleContainer = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n        this.kfTrackScaleContainer.id = KfContainer.KF_SCALE_ID;\r\n        this.kfTrackScaleContainer.setAttributeNS(null, 'transform', `scale(${state.zoomLevel}, ${state.zoomLevel})`);\r\n\r\n        this.kfTrackContainer = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n        this.kfTrackContainer.id = KfContainer.KF_LIST_ID;\r\n        this.kfTrackContainer.setAttributeNS(null, 'class', 'kf-tracks-inner-container');\r\n\r\n        const kfBgG: SVGGElement = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n        kfBgG.setAttributeNS(null, 'id', KfContainer.KF_BG);\r\n        this.kfTrackContainer.appendChild(kfBgG);\r\n\r\n        const kfFgG: SVGGElement = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n        kfFgG.setAttributeNS(null, 'id', KfContainer.KF_FG);\r\n        const placeHolder: SVGRectElement = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n        placeHolder.setAttributeNS(null, 'width', '1');\r\n        placeHolder.setAttributeNS(null, 'height', '18');\r\n        placeHolder.setAttributeNS(null, 'fill', '#00000000');\r\n        kfFgG.appendChild(placeHolder);\r\n        this.kfTrackContainer.appendChild(kfFgG);\r\n\r\n        const kfOmitG: SVGGElement = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n        kfOmitG.setAttributeNS(null, 'id', KfContainer.KF_OMIT);\r\n        this.kfTrackContainer.appendChild(kfOmitG);\r\n\r\n        const kfPopCoverG: SVGGElement = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n        kfPopCoverG.setAttributeNS(null, 'id', KfContainer.KF_POPCOVER);\r\n        const coverRect: SVGRectElement = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n        coverRect.setAttributeNS(null, 'x', '0');\r\n        coverRect.setAttributeNS(null, 'y', '0');\r\n        coverRect.setAttributeNS(null, 'fill', 'rgba(0,0,0,0)');\r\n        coverRect.setAttributeNS(null, 'width', `${KfTrack.TRACK_WIDTH}`);\r\n        coverRect.setAttributeNS(null, 'height', `${KfTrack.TRACK_HEIGHT * 20}`);\r\n        kfPopCoverG.appendChild(coverRect);\r\n        kfPopCoverG.setAttributeNS(null, 'display', 'none');\r\n        this.kfTrackContainer.appendChild(kfPopCoverG);\r\n\r\n        const kfPopupG: SVGGElement = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n        kfPopupG.setAttributeNS(null, 'id', KfContainer.KF_POPUP);\r\n        this.kfTrackContainer.appendChild(kfPopupG);\r\n\r\n        const hintG: SVGGElement = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n        hintG.setAttributeNS(null, 'id', KfContainer.KF_HINT);\r\n        this.kfTrackContainer.appendChild(hintG);\r\n\r\n        const menuG: SVGGElement = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n        menuG.setAttributeNS(null, 'id', KfContainer.KF_MENU);\r\n        this.kfTrackContainer.appendChild(menuG);\r\n\r\n        this.kfTrackScaleContainer.appendChild(this.kfTrackContainer);\r\n        keyframeTrackSVG.appendChild(this.kfTrackScaleContainer);\r\n        this.kfWidgetContainer.appendChild(keyframeTrackSVG);\r\n        //create y slider\r\n        this.createYSlider();\r\n        //create x slider\r\n        this.createXSlider();\r\n\r\n        this.kfWidgetContainer.onmouseenter = (enterEvt) => {\r\n            enterEvt.stopPropagation();\r\n            if (!state.mousemoving) {\r\n                this.updateKfSlider({ width: kfTrack.length, height: 200 });\r\n                if (parseFloat(this.xSlider.getAttributeNS(null, 'width')) < parseFloat(this.xSliderBg.getAttributeNS(null, 'width'))) {\r\n                    this.xSliderContainer.setAttribute('style', `height:${KfContainer.SLIDER_W + 4}px; margin-top:${-KfContainer.SLIDER_W}px`);\r\n                }\r\n                if (parseFloat(this.ySlider.getAttributeNS(null, 'height')) < parseFloat(this.ySliderBg.getAttributeNS(null, 'height'))) {\r\n                    this.ySliderContainer.setAttribute('style', `width:${KfContainer.SLIDER_W + 4}px; margin-top:${-this.ySliderContainerH}px;`);\r\n                }\r\n            }\r\n        }\r\n        this.kfWidgetContainer.onmouseleave = (leaveEvt) => {\r\n            leaveEvt.stopPropagation();\r\n            this.xSliderContainer.setAttribute('style', `height:${KfContainer.SLIDER_W + 4}px; margin-top:3px;`);\r\n            this.ySliderContainer.setAttribute('style', `width:${KfContainer.SLIDER_W + 4}px; margin-top:${-this.ySliderContainerH}px; margin-right:${-KfContainer.SLIDER_W - 7}`)\r\n        }\r\n        this.kfWidgetContainer.onwheel = (wheelEvt) => {\r\n            if (parseFloat(this.ySlider.getAttributeNS(null, 'height')) < parseFloat(this.ySliderBg.getAttributeNS(null, 'height'))) {\r\n                let diffY: number = wheelEvt.deltaY < 0 ? -KfContainer.WHEEL_STEP : KfContainer.WHEEL_STEP;\r\n                const currentSliderY: number = parseFloat(this.ySlider.getAttributeNS(null, 'y'));\r\n                const currentSliderH: number = parseFloat(this.ySlider.getAttributeNS(null, 'height'));\r\n                if (0 - currentSliderY > diffY && diffY < 0) {\r\n                    diffY = 0 - currentSliderY;\r\n                }\r\n                if (this.ySliderContainerH - currentSliderY - currentSliderH < diffY && diffY > 0) {\r\n                    diffY = this.ySliderContainerH - currentSliderY - currentSliderH;\r\n                }\r\n                if (currentSliderY + diffY >= 0 && currentSliderY + diffY + currentSliderH <= this.ySliderContainerH) {\r\n                    this.ySlider.setAttributeNS(null, 'y', `${currentSliderY + diffY}`);\r\n\r\n                    //update translate of keyframe\r\n                    if (this.kfTrackContainer.getAttributeNS(null, 'transform')) {\r\n                        let oriTrans: ICoord = Tool.extractTransNums(this.kfTrackContainer.getAttributeNS(null, 'transform'));\r\n                        this.transDistance.h = oriTrans.y - diffY * this.ySliderPercent;\r\n                        this.kfTrackContainer.setAttributeNS(null, 'transform', `translate(${oriTrans.x}, ${oriTrans.y - diffY * this.ySliderPercent})`);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * return whether the kfcontainer is translated\r\n     * @param diffX \r\n     */\r\n    public kfContainerTransX(diffX: number): boolean {\r\n        let translated: boolean = false;\r\n        const currentSliderX: number = parseFloat(this.xSlider.getAttributeNS(null, 'x'));\r\n        const currentSliderW: number = parseFloat(this.xSlider.getAttributeNS(null, 'width'));\r\n        if (currentSliderX + diffX >= 0 && currentSliderX + diffX + currentSliderW <= this.xSliderContainerW) {\r\n            this.xSlider.setAttributeNS(null, 'x', `${currentSliderX + diffX}`);\r\n\r\n            //update viewBox of keyframe\r\n            if (document.getElementById('kfTracksInnerContainer').getAttributeNS(null, 'transform')) {\r\n                let oriTrans: ICoord = Tool.extractTransNums(document.getElementById('kfTracksInnerContainer').getAttributeNS(null, 'transform'));\r\n                // let oriTrans: ICoord = Tool.extractTransNums(this.kfTrackContainer.getAttributeNS(null, 'transform'));\r\n                this.transDistance.w = oriTrans.x - diffX * this.xSliderPercent;\r\n                if (oriTrans.x <=0) {\r\n                    document.getElementById('kfTracksInnerContainer').setAttributeNS(null, 'transform', `translate(${oriTrans.x - diffX * this.xSliderPercent}, 0)`);\r\n                }else{\r\n                    document.getElementById('kfTracksInnerContainer').setAttributeNS(null, 'transform', `translate(0, 0)`);\r\n                }\r\n            }\r\n            translated = true;\r\n        }\r\n        return translated;\r\n    }\r\n\r\n    public kfContainerTransXStep(downEvtX: number) {\r\n        const clickX: number = downEvtX - this.xSliderContainer.getBoundingClientRect().x;\r\n        const currentSliderX: number = parseFloat(this.xSlider.getAttributeNS(null, 'x'));\r\n        const currentSliderW: number = parseFloat(this.xSlider.getAttributeNS(null, 'width'));\r\n        let transDist: number = 0;\r\n        if (clickX > currentSliderX) {\r\n            const diffX: number = clickX - currentSliderX - currentSliderW;\r\n            transDist = diffX > KfContainer.WHEEL_STEP ? KfContainer.WHEEL_STEP : diffX;\r\n        } else {\r\n            const diffX: number = clickX - currentSliderX;\r\n            transDist = diffX < -KfContainer.WHEEL_STEP ? -KfContainer.WHEEL_STEP : diffX;\r\n        }\r\n        this.kfContainerTransX(transDist);\r\n    }\r\n\r\n    /**\r\n     * return whether the kfcontainer is translated\r\n     * @param diffY\r\n     */\r\n    public kfContainerTransY(diffY: number): boolean {\r\n        let translated: boolean = false;\r\n        const currentSliderY: number = parseFloat(this.ySlider.getAttributeNS(null, 'y'));\r\n        const currentSliderH: number = parseFloat(this.ySlider.getAttributeNS(null, 'height'));\r\n        if (currentSliderY + diffY >= 0 && currentSliderY + diffY + currentSliderH <= this.ySliderContainerH) {\r\n            this.ySlider.setAttributeNS(null, 'y', `${currentSliderY + diffY}`);\r\n\r\n            //update translate of keyframe tracks\r\n            if (this.kfTrackContainer.getAttributeNS(null, 'transform')) {\r\n                let oriTrans: ICoord = Tool.extractTransNums(this.kfTrackContainer.getAttributeNS(null, 'transform'));\r\n                this.transDistance.h = oriTrans.y - diffY * this.ySliderPercent;\r\n                this.kfTrackContainer.setAttributeNS(null, 'transform', `translate(${oriTrans.x}, ${this.transDistance.h})`);\r\n            }\r\n            translated = true;\r\n        }\r\n        return translated;\r\n    }\r\n\r\n    public kfContainerTransYStep(downEvtY: number) {\r\n        const clickY: number = downEvtY - this.ySliderContainer.getBoundingClientRect().y;\r\n        const currentSliderY: number = parseFloat(this.xSlider.getAttributeNS(null, 'y'));\r\n        const currentSliderH: number = parseFloat(this.xSlider.getAttributeNS(null, 'height'));\r\n        let transDist: number = 0;\r\n        if (clickY > currentSliderY) {\r\n            const diffY: number = clickY - currentSliderY - currentSliderH;\r\n            transDist = diffY > KfContainer.WHEEL_STEP ? KfContainer.WHEEL_STEP : diffY;\r\n        } else {\r\n            const diffY: number = clickY - currentSliderY;\r\n            transDist = diffY < -KfContainer.WHEEL_STEP ? -KfContainer.WHEEL_STEP : diffY;\r\n        }\r\n        this.kfContainerTransY(transDist);\r\n    }\r\n\r\n    public createYSlider() {\r\n        this.ySliderContainer = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n        this.ySliderContainer.setAttributeNS(null, 'class', 'kf-y-slider-container');\r\n        this.ySliderContainer.setAttribute('style', `width:${KfContainer.SLIDER_W + 4}px; margin-top:${-this.ySliderContainerH}px; margin-right:${-KfContainer.SLIDER_W - 7}`)\r\n        this.ySliderBg = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n        this.ySliderBg.classList.add('sliderContainerBg');\r\n        this.ySliderBg.setAttributeNS(null, 'x', '0');\r\n        this.ySliderBg.setAttributeNS(null, 'y', '0');\r\n        this.ySliderBg.setAttributeNS(null, 'width', `${KfContainer.SLIDER_W + 4}`);\r\n        this.ySliderBg.setAttributeNS(null, 'height', '200');\r\n        this.ySliderBg.setAttributeNS(null, 'fill', '#cdcdcd');\r\n        this.ySliderContainer.appendChild(this.ySliderBg);\r\n        this.ySlider = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n        this.ySlider.setAttributeNS(null, 'class', 'kf-slider');\r\n        this.ySlider.setAttributeNS(null, 'x', '0');\r\n        this.ySlider.setAttributeNS(null, 'y', '0');\r\n        this.ySlider.setAttributeNS(null, 'width', `${KfContainer.SLIDER_W + 4}`);\r\n        this.ySlider.setAttributeNS(null, 'height', '10000');\r\n        this.ySlider.setAttributeNS(null, 'rx', `${KfContainer.SLIDER_W / 2}`);\r\n        this.ySlider.setAttributeNS(null, 'fill', '#f2f2f2');\r\n        this.ySlider.onmousedown = (downEvt) => {\r\n            Reducer.triger(action.UPDATE_MOUSE_MOVING, true);\r\n            let preY: number = downEvt.pageY;\r\n            document.onmousemove = (moveEvt) => {\r\n                const currentY: number = moveEvt.pageY;\r\n                const diffY: number = currentY - preY;\r\n                if (this.kfContainerTransY(diffY)) {\r\n                    preY = currentY;\r\n                }\r\n            }\r\n            document.onmouseup = (upEvt) => {\r\n                document.onmousemove = null;\r\n                document.onmouseup = null;\r\n                Reducer.triger(action.UPDATE_MOUSE_MOVING, false);\r\n            }\r\n        }\r\n        this.ySliderContainer.appendChild(this.ySlider);\r\n        let yTransInterval: NodeJS.Timeout;\r\n        this.ySliderContainer.onmousedown = (downEvt) => {\r\n            if ((<SVGElement>downEvt.target).classList.contains('sliderContainerBg')) {\r\n                this.kfContainerTransYStep(downEvt.pageY);\r\n                yTransInterval = setInterval(() => {\r\n                    this.kfContainerTransYStep(downEvt.pageY);\r\n                }, 200)\r\n            }\r\n        }\r\n        this.ySliderContainer.onmouseup = (upEvt) => {\r\n            if (typeof yTransInterval !== 'undefined') {\r\n                clearInterval(yTransInterval);\r\n            }\r\n        }\r\n        this.kfWidgetContainer.appendChild(this.ySliderContainer);\r\n    }\r\n\r\n    public createXSlider() {\r\n        this.xSliderContainer = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n        this.xSliderContainer.setAttributeNS(null, 'class', 'kf-x-slider-container');\r\n        this.xSliderContainer.setAttribute('style', `height:${KfContainer.SLIDER_W + 4}px; margin-top:3px;`)\r\n        this.xSliderBg = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n        this.xSliderBg.classList.add('sliderContainerBg');\r\n        this.xSliderBg.setAttributeNS(null, 'x', '0');\r\n        this.xSliderBg.setAttributeNS(null, 'y', '0');\r\n        this.xSliderBg.setAttributeNS(null, 'width', '10000');\r\n        this.xSliderBg.setAttributeNS(null, 'height', `${KfContainer.SLIDER_W}`);\r\n        this.xSliderBg.setAttributeNS(null, 'fill', '#cdcdcd');\r\n        this.xSliderContainer.appendChild(this.xSliderBg);\r\n        this.xSlider = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n        this.xSlider.setAttributeNS(null, 'class', 'kf-slider');\r\n        this.xSlider.setAttributeNS(null, 'x', '0');\r\n        this.xSlider.setAttributeNS(null, 'y', '0');\r\n        this.xSlider.setAttributeNS(null, 'width', '10100');\r\n        this.xSlider.setAttributeNS(null, 'height', `${KfContainer.SLIDER_W}`);\r\n        this.xSlider.setAttributeNS(null, 'rx', `${KfContainer.SLIDER_W / 2}`);\r\n        this.xSlider.setAttributeNS(null, 'fill', '#f2f2f2');\r\n        this.xSlider.onmousedown = (downEvt) => {\r\n            // Reducer.triger(action.UPDATE_MOUSE_MOVING, true);\r\n            let preX: number = downEvt.pageX;\r\n            document.onmousemove = (moveEvt) => {\r\n                moveEvt.stopPropagation();\r\n                const currentX: number = moveEvt.pageX;\r\n                const diffX: number = currentX - preX;\r\n                //\r\n                // let oriTrans: ICoord = Tool.extractTransNums(document.getElementById('kfTracksInnerContainer').getAttributeNS(null, 'transform'));\r\n                // kfTrack.updatePanning(diffX * this.xSliderPercent, 0);\r\n                if (this.kfContainerTransX(diffX)) {\r\n                    preX = currentX;\r\n                }\r\n            }\r\n            document.onmouseup = (upEvt) => {\r\n                document.onmousemove = null;\r\n                document.onmouseup = null;\r\n                // Reducer.triger(action.UPDATE_MOUSE_MOVING, false);\r\n            }\r\n        }\r\n        this.xSliderContainer.appendChild(this.xSlider);\r\n\r\n        let xTransInterval: NodeJS.Timeout;\r\n        this.xSliderContainer.onmousedown = (downEvt) => {\r\n            if ((<SVGElement>downEvt.target).classList.contains('sliderContainerBg')) {\r\n                this.kfContainerTransXStep(downEvt.pageX);\r\n                xTransInterval = setInterval(() => {\r\n                    this.kfContainerTransXStep(downEvt.pageX);\r\n                }, 200)\r\n            }\r\n        }\r\n        this.xSliderContainer.onmouseup = (upEvt) => {\r\n            if (typeof xTransInterval !== 'undefined') {\r\n                clearInterval(xTransInterval);\r\n            }\r\n        }\r\n\r\n        this.kfWidgetContainer.appendChild(this.xSliderContainer);\r\n    }\r\n\r\n    public resetContainerTrans(): void {\r\n        this.kfTrackContainer.setAttributeNS(null, 'transform', 'translate(0, 0)');\r\n        this.transDistance = { w: 0, h: 0 };\r\n        this.ySlider.setAttributeNS(null, 'y', '0');\r\n        this.xSlider.setAttributeNS(null, 'x', '0');\r\n    }\r\n\r\n    public updateKfSlider(kfGroupSize: IKfGroupSize) {\r\n        //update xslider and xslider track width\r\n        this.xSliderContainerW = this.kfWidgetContainer.clientWidth;\r\n        this.xSliderBg.setAttributeNS(null, 'width', `${this.xSliderContainerW}`);\r\n\r\n        if (typeof kfGroupSize.width !== 'undefined') {\r\n            const widthWithExtra: number = this.xSliderContainerW - 100;\r\n            this.xSliderPercent = (kfGroupSize.width) / widthWithExtra;\r\n            this.xSlider.setAttributeNS(null, 'width', `${widthWithExtra * (widthWithExtra / kfGroupSize.width)}`);\r\n        }\r\n\r\n        //update yslider and yslider track height\r\n        this.ySliderContainerH = this.kfWidgetContainer.clientHeight;\r\n        this.ySliderContainer.setAttribute('style', `width:${KfContainer.SLIDER_W + 4}px; margin-top:${-this.ySliderContainerH}px; margin-right:${-KfContainer.SLIDER_W - 7}`)\r\n        this.ySliderBg.setAttributeNS(null, 'height', `${this.ySliderContainerH}`);\r\n        if (typeof kfGroupSize.height !== 'undefined') {\r\n            const heightWithExtra: number = this.ySliderContainerH - 60;\r\n            this.ySliderPercent = (kfGroupSize.height) / heightWithExtra;\r\n            this.ySlider.setAttributeNS(null, 'height', `${heightWithExtra * (heightWithExtra / kfGroupSize.height)}`);\r\n        }\r\n    }\r\n}\r\n\r\nexport let kfContainer: KfContainer = new KfContainer();","import '../assets/style/nav.scss'\r\nimport LogoImg from '../assets/img/logo.png'\r\nimport FloatingWindow from './floatingWindow'\r\nimport { ViewContent } from './viewWindow';\r\nimport { Loading } from './widgets/loading';\r\nimport Tool from '../util/tool';\r\nimport { player } from './player';\r\nimport { clearKfTrees, redo, revert } from '../app/kfTree';\r\nimport { chartManager } from '../app/chartManager';\r\nimport Renderer from '../app_backup/renderer';\r\nimport { markTableManager } from '../app/markTableManager';\r\nexport default class Nav {\r\n    navContainer: HTMLDivElement;\r\n\r\n    public createNav() {\r\n        this.navContainer = document.createElement('div');\r\n        this.navContainer.className = 'nav';\r\n\r\n        // create logo contianer\r\n        const logoContainer: HTMLSpanElement = document.createElement('span');\r\n        logoContainer.className = 'logo-container';\r\n        const logo: HTMLImageElement = new Image();\r\n        logo.src = LogoImg;\r\n        logoContainer.appendChild(logo);\r\n        const logoText: HTMLSpanElement = document.createElement('span');\r\n        logoText.textContent = 'CASTPlus';\r\n        logoText.className = 'title-text';\r\n        logoContainer.appendChild(logoText);\r\n        this.navContainer.appendChild(logoContainer);\r\n        this.navContainer.appendChild(logoText)\r\n\r\n        this.navContainer.appendChild(this.createSeparator());\r\n\r\n        // create buttons\r\n        this.navContainer.appendChild(new NavBtn().createNavBtn({\r\n            classNameStr: 'open',\r\n            title: 'open project',\r\n            evtType: NavBtn.OPEN_PROJECT\r\n        }));\r\n        this.navContainer.appendChild(new NavBtn().createNavBtn({\r\n            classNameStr: 'save',\r\n            title: 'save project',\r\n            evtType: NavBtn.SAVE_PROJECT\r\n        }));\r\n        this.navContainer.appendChild(new NavBtn().createNavBtn({\r\n            classNameStr: 'export',\r\n            title: 'export',\r\n            evtType: NavBtn.EXPORT\r\n        }));\r\n        this.navContainer.appendChild(this.createSeparator());\r\n        this.navContainer.appendChild(new NavBtn().createNavBtn({\r\n            classNameStr: 'revert',\r\n            title: 'revert',\r\n            evtType: NavBtn.REVERT\r\n        }));\r\n        this.navContainer.appendChild(new NavBtn().createNavBtn({\r\n            classNameStr: 'redo',\r\n            title: 'redo',\r\n            evtType: NavBtn.REDO\r\n        }));\r\n        this.navContainer.appendChild(this.createSeparator());\r\n        this.navContainer.appendChild(new NavBtn().createNavBtn({\r\n            classNameStr: 'reset',\r\n            title: 'reset',\r\n            evtType: NavBtn.RESET\r\n        }));\r\n        this.navContainer.appendChild(this.createSeparator());\r\n    }\r\n\r\n    public createSeparator() {\r\n        const sep: HTMLSpanElement = document.createElement('span');\r\n        sep.className = 'separator';\r\n        return sep;\r\n    }\r\n}\r\n\r\ninterface INavBtnProps {\r\n    inputId?: string,\r\n    classNameStr: string,\r\n    title: string,\r\n    evtType: string\r\n}\r\n\r\nclass NavBtn {\r\n    // static vars\r\n    // static CREATE_NEW: string = 'createNew';\r\n    static OPEN_PROJECT: string = 'openProject';\r\n    static SAVE_PROJECT: string = 'saveProject';\r\n    static LOAD_EXAMPLES: string = 'loadExamples';\r\n    static EXPORT: string = 'export';\r\n    static REVERT: string = 'revert';\r\n    static REDO: string = 'redo';\r\n    static RESET: string = 'reset';\r\n\r\n    /**\r\n     * create buttons whose event listeners are not file related\r\n     * @param props \r\n     */\r\n    createNavBtn(props: INavBtnProps): HTMLSpanElement {\r\n        const btn: HTMLSpanElement = document.createElement('span');\r\n        btn.className = 'nav-btn';\r\n        btn.setAttribute('title', Tool.firstLetterUppercase(props.title));\r\n        switch (props.evtType) {\r\n            case NavBtn.OPEN_PROJECT:\r\n                btn.onclick = () => this.openProject();\r\n                break;\r\n            case NavBtn.SAVE_PROJECT:\r\n                btn.onclick = () => this.saveProject();\r\n                break;\r\n            case NavBtn.EXPORT:\r\n                // btn.onclick = () => this.exportLottie();\r\n                btn.onclick = () => {\r\n                    this.createSubMenu(NavBtn.EXPORT, btn);\r\n                }\r\n                break;\r\n            case NavBtn.REVERT:\r\n                btn.onclick = () => this.revert();\r\n                break;\r\n            case NavBtn.REDO:\r\n                btn.onclick = () => this.redo();\r\n                break;\r\n            case NavBtn.RESET:\r\n                btn.onclick = () => this.reset();\r\n                break;\r\n        }\r\n\r\n        const icon: HTMLElement = document.createElement('span');\r\n        icon.className = props.classNameStr + '-icon';\r\n        btn.appendChild(icon);\r\n\r\n        return btn;\r\n    }\r\n\r\n    createSubMenu(evtType: string, parentBtn: HTMLSpanElement) {\r\n        switch (evtType) {\r\n            case NavBtn.EXPORT:\r\n                parentBtn.classList.add('active-btn');\r\n                const menuContainer: HTMLDivElement = document.createElement('div');\r\n                const parentBBox: DOMRect = parentBtn.getBoundingClientRect();\r\n                menuContainer.className = 'sub-menu-container';\r\n                menuContainer.style.top = `${parentBBox.bottom}px`;\r\n                menuContainer.style.left = `${parentBBox.left}px`;\r\n                const ul: HTMLUListElement = document.createElement('ul');\r\n                ul.appendChild(this.createSubMenuItem('Export as Lottie', this.exportLottie));\r\n                ul.appendChild(this.createSubMenuItem('Export as mp4', this.exportVideo));\r\n                menuContainer.appendChild(ul);\r\n                document.body.appendChild(menuContainer);\r\n\r\n                menuContainer.onmouseleave = (leaveEvt) => {\r\n                    menuContainer.remove();\r\n                    parentBtn.classList.remove('active-btn');\r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\n    createSubMenuItem(content: string, func: any): HTMLLIElement {\r\n        const item: HTMLLIElement = document.createElement('li');\r\n        item.innerHTML = content;\r\n        item.onclick = () => {\r\n            func();\r\n        }\r\n        return item;\r\n    }\r\n\r\n    /**\r\n     * create buttons whose event listeners are file related\r\n     * @param props\r\n     */\r\n    createNavFileBtn(props: INavBtnProps) {\r\n        const btn: HTMLSpanElement = document.createElement('span');\r\n        btn.className = 'nav-btn';\r\n        btn.setAttribute('title', Tool.firstLetterUppercase(props.title));\r\n        btn.onclick = () => {\r\n            document.getElementById(props.inputId).click();\r\n        }\r\n\r\n        const input: HTMLInputElement = document.createElement('input');\r\n        input.type = 'file';\r\n        input.multiple = true;\r\n        input.id = props.inputId;\r\n        input.style.display = 'none';\r\n        btn.appendChild(input);\r\n\r\n        const icon: HTMLSpanElement = document.createElement('span');\r\n        icon.className = props.classNameStr + '-icon';\r\n        btn.appendChild(icon);\r\n\r\n        return btn;\r\n    }\r\n\r\n    // btn listeners\r\n    public openProject() {\r\n        const floatingWindow: FloatingWindow = new FloatingWindow();\r\n        floatingWindow.createFloatingWindow(FloatingWindow.TYPE_EXAMPLE);\r\n        document.getElementById('appWrapper').appendChild(floatingWindow.floatingWindow);\r\n    }\r\n\r\n    public saveProject() {\r\n        const outputObj = {\r\n            spec: chartManager.lottieSpec\r\n        }\r\n        const file = new Blob([JSON.stringify(outputObj, null, 2)], { type: 'application/json' });\r\n        const fileName = 'cast_project.cpro';\r\n        if (window.navigator.msSaveOrOpenBlob) // IE10+\r\n            window.navigator.msSaveOrOpenBlob(file, fileName);\r\n        else { // Others\r\n            var a = document.createElement(\"a\"),\r\n                url = URL.createObjectURL(file);\r\n            a.href = url;\r\n            a.download = fileName;\r\n            document.body.appendChild(a);\r\n            a.click();\r\n            setTimeout(function () {\r\n                document.body.removeChild(a);\r\n                window.URL.revokeObjectURL(url);\r\n            }, 0);\r\n        }\r\n    }\r\n\r\n    public exportLottie() {\r\n        const file = new Blob([JSON.stringify(chartManager.lottieSpec, null, 2)], { type: 'application/json' });\r\n        const fileName = 'animatedChart.json';\r\n        if (window.navigator.msSaveOrOpenBlob) // IE10+\r\n            window.navigator.msSaveOrOpenBlob(file, fileName);\r\n        else { // Others\r\n            var a = document.createElement(\"a\"),\r\n                url = URL.createObjectURL(file);\r\n            a.href = url;\r\n            a.download = fileName;\r\n            document.body.appendChild(a);\r\n            a.click();\r\n            setTimeout(function () {\r\n                document.body.removeChild(a);\r\n                window.URL.revokeObjectURL(url);\r\n            }, 0);\r\n        }\r\n    }\r\n\r\n    public exportVideo() {\r\n        const targetSVG: any = document.getElementById(ViewContent.VIDEO_VIEW_CONTENT_ID).querySelector('svg');\r\n        if (typeof targetSVG !== 'undefined' && targetSVG) {\r\n            Renderer.renderLoading(document.body, Loading.EXPORTING);\r\n            setTimeout(() => {\r\n                const canvas: any = document.createElement('canvas');\r\n                const cWidth: number = canvas.width = parseFloat(targetSVG.getAttribute('width'));\r\n                const cHeight: number = canvas.height = parseFloat(targetSVG.getAttribute('height'));\r\n                const context = canvas.getContext('2d');\r\n                context.fillStyle = '#fff';\r\n                context.fillRect(0, 0, cWidth, cHeight);\r\n\r\n                const stream = canvas.captureStream();\r\n                const recorder = new MediaRecorder(stream, { mimeType: \"video/webm\" });\r\n                const data: any[] = [];\r\n                recorder.ondataavailable = function (event) {\r\n                    if (event.data && event.data.size) {\r\n                        data.push(event.data);\r\n                    }\r\n                };\r\n\r\n                recorder.onstop = () => {\r\n                    var url = URL.createObjectURL(new Blob(data, { type: \"video/webm\" }));\r\n                    var a = document.createElement(\"a\");\r\n                    a.href = url;\r\n                    a.download = 'animatedChart.mp4';\r\n                    document.body.appendChild(a);\r\n                    a.click();\r\n                    setTimeout(function () {\r\n                        document.body.removeChild(a);\r\n                        window.URL.revokeObjectURL(url);\r\n                        Renderer.removeLoading()\r\n                    }, 0);\r\n                };\r\n\r\n                recorder.start();\r\n                for (let i = 0, p = Promise.resolve(), len = chartManager.lottieAnimation.getDuration() * 1000; i < len; i += 60) {\r\n                    p = p.then(() => new Promise(resolve =>\r\n                        setTimeout(function () {\r\n                            chartManager.lottieAnimation.goToAndStop(Math.ceil(i / (1000 / player.frameRate)), true)\r\n                            const img = new Image(),\r\n                                serialized = new XMLSerializer().serializeToString(targetSVG),\r\n                                url = URL.createObjectURL(new Blob([serialized], { type: \"image/svg+xml\" }));\r\n                            img.onload = function () {\r\n                                context.drawImage(img, 0, 0);\r\n                            };\r\n                            img.src = url;\r\n                            resolve();\r\n                            if (i + 60 > len) {\r\n                                recorder.stop();\r\n                            }\r\n                        }, 60)\r\n                    ))\r\n                }\r\n            }, 1);\r\n        }\r\n    }\r\n\r\n    public revert(): void {\r\n        revert();\r\n    }\r\n\r\n    public redo(): void {\r\n        redo();\r\n    }\r\n\r\n    public reset(): void {\r\n        clearKfTrees();\r\n        markTableManager.reset();\r\n        markTableManager.render();\r\n    }\r\n}","import '../assets/style/player.scss'\r\n\r\nimport Slider from './widgets/slider'\r\nimport { chartManager } from '../app/chartManager'\r\n\r\ninterface IPlayerProps {\r\n    frameRate: number\r\n    currentTime: number\r\n    totalTime: number\r\n}\r\n\r\nexport class Player {\r\n    static PLAY_BTN_ID: string = 'playBtn';\r\n    static TOTAL_TIME_SPAN_ID: string = 'totalTime';\r\n    static CURRENT_TIME_SPAN_ID: string = 'currentTime';\r\n\r\n    //lottieJSON:any\r\n    widget: HTMLDivElement;\r\n    playing: boolean;\r\n    frameRate: number;\r\n    _currentTime: number;\r\n    _totalTime: number;\r\n    animationInterval: any;\r\n\r\n    //component\r\n    slider: Slider;\r\n\r\n    constructor() {\r\n        this._currentTime = 0;\r\n        this._totalTime = 0;\r\n        this.frameRate = 10;\r\n        this.playing = false;\r\n        this.createPlayer();\r\n    }\r\n\r\n    set currentTime(time: number) {\r\n        this._currentTime = time;\r\n        this.renderCurrentTime();\r\n    }\r\n    get currentTime(): number {\r\n        return this._currentTime;\r\n    }\r\n    set totalTime(time: number) {\r\n        this._totalTime = time;\r\n        this.renderTotalTime()\r\n    }\r\n    get totalTime(): number {\r\n        return this._totalTime;\r\n    }\r\n\r\n    public createPlayer(): void {\r\n        this.widget = document.createElement('div');\r\n        // this.widget.style.minWidth = (0.98 * window.innerWidth / 2).toString() + 'px';\r\n        const playBtnWrapper: HTMLDivElement = document.createElement('div');\r\n        playBtnWrapper.id = 'playBtnWrapper';\r\n        playBtnWrapper.className = 'play-btn-wrapper';\r\n        playBtnWrapper.title = 'Play';\r\n        const playCheck: HTMLInputElement = document.createElement('input');\r\n        playCheck.type = 'checkbox';\r\n        playCheck.value = 'None';\r\n        playCheck.id = Player.PLAY_BTN_ID;\r\n        playCheck.name = 'check';\r\n        playCheck.checked = true;\r\n        playBtnWrapper.appendChild(playCheck);\r\n        const playLabel: HTMLLabelElement = document.createElement('label');\r\n        playLabel.setAttribute('for', 'playBtn');\r\n        playLabel.setAttribute('tabindex', '1');\r\n        playBtnWrapper.appendChild(playLabel);\r\n        playCheck.onclick = (e) => {\r\n            if (this.playing) {\r\n                this.pauseAnimation();\r\n            } else {\r\n                this.playAnimation();\r\n            }\r\n        }\r\n        this.widget.appendChild(playBtnWrapper);\r\n\r\n        this.slider = new Slider([0, 1], 0, true, 5, 2, Slider.MIN_WIDTH);\r\n        this.slider.createSlider();\r\n        this.slider.callbackFunc = this.renderFrame;\r\n        this.widget.appendChild(this.slider.sliderContainer);\r\n\r\n        const timeWrapper: HTMLDivElement = document.createElement('div');\r\n        timeWrapper.className = 'time-span-wrapper';\r\n        const currentTimeSpan: HTMLSpanElement = document.createElement('span');\r\n        currentTimeSpan.id = Player.CURRENT_TIME_SPAN_ID;\r\n        currentTimeSpan.innerText = this.formatTime(this.currentTime);\r\n        const splitSpan: HTMLSpanElement = document.createElement('span');\r\n        splitSpan.innerText = '/';\r\n        const totalTimeSpan: HTMLSpanElement = document.createElement('span');\r\n        totalTimeSpan.id = Player.TOTAL_TIME_SPAN_ID;\r\n        totalTimeSpan.innerText = this.formatTime(this.totalTime);\r\n        timeWrapper.appendChild(currentTimeSpan);\r\n        timeWrapper.appendChild(splitSpan);\r\n        timeWrapper.appendChild(totalTimeSpan);\r\n        this.widget.appendChild(timeWrapper);\r\n    }\r\n\r\n    /**\r\n     * 00:00.00\r\n     * @param time : time in ms\r\n     */\r\n    public formatTime(time: number): string {\r\n        const minNum: number = Math.floor(time / 60000);\r\n        const secNum: number = Math.floor((time - minNum * 60000) / 1000);\r\n        const msNum: number = Math.floor((time - minNum * 60000 - secNum * 1000) / 10);\r\n        const minStr: string = minNum < 10 ? '0' + minNum.toString() : minNum.toString();\r\n        const secStr: string = secNum < 10 ? '0' + secNum.toString() : secNum.toString();\r\n        const msStr: string = msNum < 10 ? '0' + msNum.toString() : msNum.toString();\r\n        return minStr + ':' + secStr + '.' + msStr;\r\n    }\r\n\r\n    public renderTotalTime() {\r\n        document.getElementById(Player.TOTAL_TIME_SPAN_ID).innerHTML = (this.formatTime(this.totalTime));\r\n    }\r\n\r\n    public renderCurrentTime() {\r\n        document.getElementById(Player.CURRENT_TIME_SPAN_ID).innerHTML = (this.formatTime(this.currentTime));\r\n    }\r\n\r\n    public resizePlayer(cw: number): void {\r\n        this.slider.containerWidth = cw;\r\n    }\r\n\r\n    public updateTimeDomain() {\r\n        this.slider.updateDomain([0, this.totalTime]);\r\n    }\r\n\r\n    public resetPlayer(props: IPlayerProps) {\r\n        this.frameRate = props.frameRate;\r\n        this.currentTime = props.currentTime;\r\n        this.totalTime = props.totalTime;\r\n        this.updateTimeDomain();\r\n    }\r\n\r\n    public renderFrame(time: number) {\r\n        player.currentTime = time;\r\n        chartManager.lottieAnimation.goToAndStop(Math.ceil(time / (1000 / player.frameRate)), true);\r\n    }\r\n\r\n    public playAnimation() {\r\n        if (this.currentTime === this.totalTime) {\r\n            this.currentTime = 0;\r\n            if (chartManager.lottieAnimation) {\r\n                chartManager.lottieAnimation.stop();\r\n            }\r\n        } else {\r\n            this.currentTime = Math.floor(this.currentTime / (1000 / this.frameRate)) * (1000 / this.frameRate);\r\n        }\r\n        this.playing = true;\r\n        if (chartManager.lottieAnimation) {\r\n            chartManager.lottieAnimation.play();\r\n        }\r\n        if (document.getElementById('playBtnWrapper')) {\r\n            document.getElementById('playBtnWrapper').title = 'Stop';\r\n        }\r\n        this.animationInterval = setInterval(() => {\r\n            this.slider.moveSlider(this.currentTime);\r\n            const nextTimePoint: number = this.currentTime + (1000 / this.frameRate);\r\n            if (nextTimePoint > this.totalTime) {\r\n                this.pauseAnimation();\r\n                (<HTMLInputElement>document.getElementById(Player.PLAY_BTN_ID)).checked = true;\r\n            } else {\r\n                this.currentTime = nextTimePoint;\r\n            }\r\n        }, 1000 / this.frameRate)\r\n    }\r\n\r\n    public pauseAnimation() {\r\n        this.playing = false;\r\n        if (chartManager.lottieAnimation) {\r\n            chartManager.lottieAnimation.pause();\r\n        }\r\n        if (document.getElementById('playBtnWrapper')) {\r\n            document.getElementById('playBtnWrapper').title = 'Play';\r\n        }\r\n        clearInterval(this.animationInterval);\r\n        this.animationInterval = 'undefined';\r\n    }\r\n    public stopAnimation() {\r\n        chartManager.lottieAnimation.stop();\r\n    }\r\n}\r\n\r\nexport let player = new Player();","import '../assets/style/resizablePanel.scss'\r\nimport Tool from '../util/tool';\r\nimport Reducer from '../app_backup/reducer';\r\nimport * as action from '../app_backup/action'\r\n\r\nexport interface IRPanel {\r\n    wrapper: HTMLDivElement,\r\n    panel1: HTMLDivElement,\r\n    panel2: HTMLDivElement\r\n}\r\n\r\nexport interface IResizeProps {\r\n    p1?: number\r\n    p2?: number\r\n    verticle: boolean\r\n}\r\n\r\nexport default class ResizablePanel {\r\n    static panelNum: number = 0;\r\n\r\n    /**\r\n     * create two panels and one resizer\r\n     */\r\n    public static createRPanels(resizable: boolean, props: IResizeProps): IRPanel {\r\n        const wrapper = this.createWrapper(resizable);\r\n        const panel1 = this.createPanel(resizable, props.verticle, props.p1, !resizable);\r\n        const panel2 = this.createPanel(resizable, props.verticle, props.p2);\r\n        if (props.verticle) {\r\n            panel2.style.marginTop = resizable ? '-3px' : '0px';\r\n        } else {\r\n            panel2.style.marginLeft = resizable ? '-3px' : '0px';\r\n        }\r\n\r\n        const resizer = this.createResizer(panel1.id, panel2.id, props.verticle, resizable);\r\n        wrapper.appendChild(panel1);\r\n        wrapper.appendChild(resizer);\r\n        wrapper.appendChild(panel2);\r\n        return {\r\n            wrapper: wrapper,\r\n            panel1: panel1,\r\n            panel2: panel2\r\n        };\r\n    }\r\n\r\n    public static createWrapper(resizable: boolean): HTMLDivElement {\r\n        const wrapper: HTMLDivElement = document.createElement('div');\r\n        wrapper.className = resizable ? 'panel-wrapper' : 'panel-wrapper flex-panel-wrapper';\r\n        return wrapper;\r\n    }\r\n\r\n    /**\r\n     * create one panel\r\n     * @param percent: 0 - 10, size of the panel\r\n     * @param verticle: default creating verticle panels\r\n     */\r\n    public static createPanel(resizable: boolean, verticle: boolean, size: number, fixed: boolean = false): HTMLDivElement {\r\n        const panel: HTMLDivElement = document.createElement('div');\r\n        panel.className = 'panel';\r\n        panel.id = 'panel' + this.panelNum;\r\n        this.panelNum++;\r\n\r\n        if (resizable && verticle) {\r\n            panel.classList.add('v-panel');\r\n            panel.style.height = 'calc(' + size * 10 + '% - 0.5px)';\r\n        } else if (resizable && !verticle) {\r\n            panel.classList.add('h-panel');\r\n            panel.style.width = 'calc(' + size * 10 + '% - 0.5px)';\r\n        } else if (!resizable && verticle) {\r\n            fixed ? panel.classList.add('v-fix-panel') : panel.classList.add('v-flex-panel');\r\n        } else if (!resizable && !verticle) {\r\n            fixed ? panel.classList.add('h-fix-panel') : panel.classList.add('h-flex-panel');\r\n        }\r\n        return panel;\r\n    }\r\n\r\n    public static createResizer(panelId1: string, panelId2: string, verticle: boolean, dragable: boolean): HTMLDivElement {\r\n        const resizer: HTMLDivElement = document.createElement('div');\r\n        const resizeBar: HTMLDivElement = document.createElement('div');\r\n        resizeBar.className = 'resize-bar';\r\n        resizer.appendChild(resizeBar);\r\n\r\n        if (dragable) {\r\n            resizer.className = verticle ? 'v-resizer' : 'h-resizer';\r\n            resizer.setAttribute('title', 'drag to resize');\r\n            resizer.onmousedown = (downEvt) => {\r\n                Reducer.triger(action.UPDATE_MOUSE_MOVING, true);\r\n                const wrapperBBox = {\r\n                    width: resizer.parentElement.offsetWidth,\r\n                    height: resizer.parentElement.offsetHeight\r\n                }\r\n                downEvt.preventDefault();\r\n                let downPosi = {\r\n                    x: downEvt.pageX,\r\n                    y: downEvt.pageY\r\n                }\r\n                document.onmousemove = (moveEvt) => {\r\n                    const movePosi = {\r\n                        x: moveEvt.pageX,\r\n                        y: moveEvt.pageY\r\n                    }\r\n                    const dis = {\r\n                        xDiff: movePosi.x - downPosi.x,\r\n                        yDiff: movePosi.y - downPosi.y\r\n                    }\r\n                    if (verticle) {\r\n                        const disPercent = dis.yDiff / wrapperBBox.height * 100;\r\n                        const height1 = parseFloat(document.getElementById(panelId1).style.height.split('%')[0].split('(')[1]);\r\n                        const height2 = parseFloat(document.getElementById(panelId2).style.height.split('%')[0].split('(')[1]);\r\n                        document.getElementById(panelId1).style.height = 'calc(' + (height1 + disPercent) + '% - 0.5px)';\r\n                        document.getElementById(panelId2).style.height = 'calc(' + (height2 - disPercent) + '% - 0.5px)';\r\n                    } else {\r\n                        const disPercent = dis.xDiff / wrapperBBox.width * 100;\r\n                        const width1 = parseFloat(document.getElementById(panelId1).style.width.split('%')[0].split('(')[1]);\r\n                        const width2 = parseFloat(document.getElementById(panelId2).style.width.split('%')[0].split('(')[1]);\r\n                        document.getElementById(panelId1).style.width = 'calc(' + (width1 + disPercent) + '% - 0.5px)';\r\n                        document.getElementById(panelId2).style.width = 'calc(' + (width2 - disPercent) + '% - 0.5px)';\r\n                    }\r\n                    downPosi = movePosi;\r\n\r\n                    //resize the svg in view-content\r\n                    this.resizeViewContentSVG(panelId1, panelId2);\r\n                }\r\n                document.onmouseup = (upEvt) => {\r\n                    document.onmouseup = null;\r\n                    document.onmousemove = null;\r\n                    Reducer.triger(action.UPDATE_MOUSE_MOVING, false);\r\n\r\n                    //resize the svg in view-content\r\n                    this.resizeViewContentSVG(panelId1, panelId2);\r\n                }\r\n            }\r\n        } else {\r\n            resizer.className = verticle ? 'non-dragable-v-resizerv-resizer' : 'non-dragable-h-resizer';\r\n        }\r\n\r\n        return resizer;\r\n    }\r\n\r\n    public static resizeViewContentSVG(panelId1: string, panelId2: string) {\r\n        // [panelId1, panelId2].forEach((pId) => {\r\n        //     Tool.resizeSvgContainer(pId);\r\n        // })\r\n        Tool.resizePlayerContainer();\r\n    }\r\n\r\n}","import '../assets/style/view-window.scss'\r\nimport { player } from './player'\r\nimport Slider from './widgets/slider'\r\nimport Tool from '../util/tool'\r\nimport { kfContainer } from './kfContainer'\r\nimport { MarkSelector } from '../app/markSelector'\r\nimport { kfTrack } from '../app/kfTrack'\r\n\r\ninterface IViewBtnProp {\r\n    title?: string,\r\n    clickEvtType: string,\r\n    clickEvt?: () => void,\r\n    iconClass: string\r\n}\r\n\r\nexport default class ViewWindow {\r\n    static DATA_VIEW_TITLE: string = 'data';\r\n    static CHART_VIEW_TITLE: string = 'chart';\r\n    static VIDEO_VIEW_TITLE: string = 'animation';\r\n    static HIDDEN_LOTTIE_ID: string = 'hiddenLottie';\r\n    static KF_VIEW_TITLE: string = 'keyframe';\r\n    static MIN_ZOOM_LEVEL: number = 0.5\r\n    static MAX_ZOOM_LEVEL: number = 1\r\n    static ZOOM_STEP: number = 0.05;\r\n\r\n    viewTitle: string;\r\n    view: HTMLDivElement;\r\n    constructor(title: string) {\r\n        this.viewTitle = title;\r\n    }\r\n    public createView() {\r\n        this.view = document.createElement('div');\r\n        this.view.className = 'view';\r\n\r\n        const viewTitleContainer: HTMLDivElement = document.createElement('div');\r\n        viewTitleContainer.className = 'view-title-container';\r\n        if (this.viewTitle !== '') {\r\n            const viewTitleText: HTMLSpanElement = document.createElement('span');\r\n            viewTitleText.className = 'view-title-text';\r\n            let titleText: string = this.viewTitle;\r\n            switch (titleText) {\r\n                case ViewWindow.KF_VIEW_TITLE:\r\n                    titleText = \"Keyrame\";\r\n                    break;\r\n                case ViewWindow.VIDEO_VIEW_TITLE:\r\n                    titleText = \"Animation\";\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n            viewTitleText.innerHTML = Tool.firstLetterUppercase(titleText);\r\n            viewTitleContainer.appendChild(viewTitleText);\r\n        }\r\n\r\n        this.view.appendChild(viewTitleContainer);\r\n\r\n        const viewContent = new ViewContent();\r\n        viewContent.createViewContent(this.viewTitle);\r\n        this.view.appendChild(viewContent.container);\r\n\r\n        //create confirm button\r\n        // if (this.viewTitle == ViewWindow.CHART_VIEW_TITLE) {\r\n        //     this.view.appendChild(this.createConfirmButton());\r\n        // }\r\n\r\n        //create tools on the title\r\n        switch (this.viewTitle) {\r\n            case ViewWindow.CHART_VIEW_TITLE:\r\n                viewTitleContainer.appendChild(this.createSelectionTools());\r\n                break;\r\n            case ViewWindow.VIDEO_VIEW_TITLE:\r\n                this.view.appendChild(this.createPlayerWidget());\r\n                break;\r\n            case ViewWindow.KF_VIEW_TITLE:\r\n                viewTitleContainer.classList.add('keyframe-title-container');\r\n                viewTitleContainer.appendChild(this.createKfTools());\r\n                break;\r\n        }\r\n    }\r\n\r\n    public createConfirmButton() {\r\n        const button = document.createElement(\"div\");\r\n        button.innerHTML = \"Confirm selection\";\r\n        button.classList.add(\"confirm-button\");\r\n        button.id = \"confirmButton\";\r\n        return button;\r\n    }\r\n\r\n    public createSelectionTools(): HTMLDivElement {\r\n        const toolContainer: HTMLDivElement = document.createElement('div');\r\n        toolContainer.className = 'view-tool-container';\r\n        // toolContainer.appendChild(this.createSeparator());\r\n        // toolContainer.appendChild(this.createBtn({\r\n        //     title: 'Selection',\r\n        //     clickEvtType: ViewToolBtn.SINGLE,\r\n        //     iconClass: 'arrow-icon'\r\n        // }));\r\n        // toolContainer.appendChild(this.createBtn({\r\n        //     title: 'Lasso Selection',\r\n        //     clickEvtType: ViewToolBtn.LASSO,\r\n        //     iconClass: 'lasso-icon'\r\n        // }));\r\n        // toolContainer.appendChild(this.createSeparator());\r\n        // toolContainer.appendChild(this.createBtn({\r\n        //     title: 'Selection Suggestion',\r\n        //     clickEvtType: ViewToolBtn.SUGGEST,\r\n        //     iconClass: 'selection-suggestion-icon'\r\n        // }));\r\n\r\n        return toolContainer;\r\n    }\r\n\r\n    public createKfTools(): HTMLDivElement {\r\n        const toolContainer = document.createElement('div');\r\n        toolContainer.className = 'view-tool-container';\r\n        toolContainer.appendChild(this.createBtn({\r\n            clickEvtType: ViewToolBtn.ZOOM,\r\n            iconClass: 'zoom-icon'\r\n        }));\r\n        //create zooming slider\r\n\r\n        const slider: Slider = new Slider([ViewWindow.MIN_ZOOM_LEVEL, ViewWindow.MAX_ZOOM_LEVEL], ViewWindow.MAX_ZOOM_LEVEL);\r\n        slider.createSlider()\r\n        slider.callbackFunc = (zl: number) => {\r\n            kfTrack.updateScale(zl);\r\n            // Reducer.triger(action.KEYFRAME_ZOOM_LEVEL, zl);\r\n        };\r\n        toolContainer.appendChild(this.createBtn({\r\n            title: 'Zoom Out',\r\n            clickEvtType: ViewToolBtn.CUSTOM,\r\n            clickEvt: () => {\r\n                let scale = kfTrack.scale - ViewWindow.ZOOM_STEP;\r\n                if (scale < ViewWindow.MIN_ZOOM_LEVEL) {\r\n                    scale = ViewWindow.MIN_ZOOM_LEVEL;\r\n                }\r\n                slider.moveSlider(scale);\r\n                // if (state.zoomLevel - ViewWindow.ZOOM_STEP >= ViewWindow.MIN_ZOOM_LEVEL) {\r\n                //     slider.moveSlider(state.zoomLevel - ViewWindow.ZOOM_STEP);\r\n                // } else {\r\n                //     slider.moveSlider(ViewWindow.MIN_ZOOM_LEVEL);\r\n                // }\r\n            },\r\n            iconClass: 'zoom-out-icon'\r\n        }));\r\n        toolContainer.appendChild(slider.sliderContainer);\r\n        toolContainer.appendChild(this.createBtn({\r\n            title: 'Zoom In',\r\n            clickEvtType: ViewToolBtn.CUSTOM,\r\n            clickEvt: () => {\r\n                let scale = kfTrack.scale + ViewWindow.ZOOM_STEP;\r\n                if (scale > ViewWindow.MAX_ZOOM_LEVEL) {\r\n                    scale = ViewWindow.MAX_ZOOM_LEVEL;\r\n                }\r\n                slider.moveSlider(scale);\r\n                // if (state.zoomLevel + ViewWindow.ZOOM_STEP <= ViewWindow.MAX_ZOOM_LEVEL) {\r\n                //     slider.moveSlider(state.zoomLevel + ViewWindow.ZOOM_STEP);\r\n                // } else {\r\n                //     slider.moveSlider(ViewWindow.MAX_ZOOM_LEVEL);\r\n                // }\r\n            },\r\n            iconClass: 'zoom-in-icon'\r\n        }));\r\n        return toolContainer;\r\n    }\r\n\r\n    public createSeparator(): HTMLSpanElement {\r\n        const separator: HTMLSpanElement = document.createElement('span');\r\n        separator.className = 'tool-separator';\r\n        return separator;\r\n    }\r\n\r\n    public createBtn(props: IViewBtnProp): HTMLSpanElement {\r\n        const btn: HTMLSpanElement = new ViewToolBtn().btn(props);\r\n        return btn;\r\n    }\r\n\r\n    public createPlayerWidget(): HTMLDivElement {\r\n        const container: HTMLDivElement = document.createElement('div');\r\n        container.className = 'widget';\r\n        container.appendChild(player.widget);\r\n        return container;\r\n    }\r\n}\r\n\r\n\r\nexport class ViewToolBtn {\r\n    //static vars\r\n    static SINGLE: string = 'single';\r\n    static LASSO: string = 'lasso';\r\n    static DATA: string = 'data';\r\n    static ZOOM: string = 'zoom';\r\n    static SUGGEST: string = 'suggest';\r\n    static ZOOM_OUT: string = 'zoomOut';\r\n    static ZOOM_IN: string = 'zoomIn';\r\n    static CUSTOM: string = 'custom';\r\n\r\n    public btn(props: IViewBtnProp): HTMLSpanElement {\r\n        const btn: HTMLSpanElement = document.createElement('span');\r\n        btn.className = 'tool-btn';\r\n        if (props.title) {\r\n            btn.title = props.title;\r\n        }\r\n        const btnIcon: HTMLSpanElement = document.createElement('span');\r\n        btnIcon.className = 'svg-icon ' + props.iconClass;\r\n        btn.appendChild(btnIcon);\r\n\r\n        switch (props.clickEvtType) {\r\n            case ViewToolBtn.SINGLE:\r\n                btn.onclick = MarkSelector.setSingleSelect;\r\n                break;\r\n            case ViewToolBtn.LASSO:\r\n                btn.onclick = MarkSelector.setLassoSelect;\r\n                break;\r\n            case ViewToolBtn.SUGGEST:\r\n                btnIcon.classList.add('no-hover-icon');\r\n                btn.onclick = () => this.suggestSelection(btnIcon);\r\n                break;\r\n            case ViewToolBtn.ZOOM:\r\n                btn.setAttribute('disabled', 'true');\r\n                break;\r\n            case ViewToolBtn.ZOOM_IN:\r\n                btn.classList.add('narrow-tool-btn');\r\n                btn.onclick = () => this.zoomIn();\r\n                break;\r\n            case ViewToolBtn.ZOOM_OUT:\r\n                btn.classList.add('narrow-tool-btn');\r\n                btn.onclick = () => this.zoomOut();\r\n                break;\r\n            case ViewToolBtn.CUSTOM:\r\n                btn.classList.add('narrow-tool-btn');\r\n                btn.onclick = props.clickEvt;\r\n                break;\r\n        }\r\n\r\n        return btn;\r\n    }\r\n\r\n    // btn listeners\r\n    public suggestSelection(btnIcon: HTMLSpanElement): void {\r\n        // TODO:\r\n        // if (state.suggestion) {\r\n        //     btnIcon.classList.add('selection-non-suggestion-icon');\r\n        //     btnIcon.classList.remove('selection-suggestion-icon');\r\n        //     State.tmpStateBusket.push({\r\n        //         historyAction: { actionType: action.TOGGLE_SUGGESTION, actionVal: true },\r\n        //         currentAction: { actionType: action.TOGGLE_SUGGESTION, actionVal: false }\r\n        //     })\r\n        //     State.saveHistory();\r\n        //     Reducer.triger(action.TOGGLE_SUGGESTION, false);\r\n        // } else {\r\n        //     btnIcon.classList.remove('selection-non-suggestion-icon');\r\n        //     btnIcon.classList.add('selection-suggestion-icon');\r\n        //     State.tmpStateBusket.push({\r\n        //         historyAction: { actionType: action.TOGGLE_SUGGESTION, actionVal: false },\r\n        //         currentAction: { actionType: action.TOGGLE_SUGGESTION, actionVal: true }\r\n        //     })\r\n        //     State.saveHistory();\r\n        //     Reducer.triger(action.TOGGLE_SUGGESTION, true);\r\n        // }\r\n    }\r\n\r\n    public singleSelect(): void {\r\n        // markSelector.setMode(markSelectorMode.SINGLE_SELECT);\r\n        // if (!document.getElementById('chartContainer').classList.contains('single-select')) {\r\n        //     //change cursor2\r\n        //     document.getElementById('chartContainer').classList.add('single-select');\r\n        //     document.getElementById('chartContainer').classList.remove('lasso-select');\r\n        //     //change button status\r\n        //     if (document.getElementsByClassName('selected-tool').length > 0) {\r\n        //         document.getElementsByClassName('selected-tool')[0].classList.remove('selected-tool');\r\n        //     }\r\n        //     document.getElementsByClassName('arrow-icon')[0].classList.add('selected-tool');\r\n        //     //init rectangular selection\r\n        //     Tool.initRectangularSelection('chartContainer');\r\n        // }\r\n    }\r\n\r\n    public lassoSelect(): void {\r\n        // markSelector.setMode(markSelectorMode.LASSO_SELECT);\r\n        // if (!document.getElementById('chartContainer').classList.contains('lasso-select')) {\r\n        //     //change cursor\r\n        //     document.getElementById('chartContainer').classList.remove('single-select');\r\n        //     document.getElementById('chartContainer').classList.add('lasso-select');\r\n        //     //change button status\r\n        //     if (document.getElementsByClassName('selected-tool').length > 0) {\r\n        //         document.getElementsByClassName('selected-tool')[0].classList.remove('selected-tool');\r\n        //     }\r\n        //     document.getElementsByClassName('lasso-icon')[0].classList.add('selected-tool');\r\n        //     //init lasso selection\r\n        //     Tool.initLassoSelection('chartContainer');\r\n        // }\r\n    }\r\n\r\n    public zoomIn(): void { }\r\n    public zoomOut(): void { }\r\n}\r\n\r\nexport class ViewContent {\r\n    static VIEW_CONTENT_CLS: string = 'view-content';\r\n    static DATA_VIEW_CONTENT_ID: string = 'dataContainer';\r\n    static DATA_VIEW_CONTENT_CLS: string = 'data-view-content';\r\n    static CHART_VIEW_CONTENT_ID: string = 'chartContainer';\r\n    static CHART_VIEW_CONTENT_CLS: string = 'chart-view-content';\r\n    static VIDEO_VIEW_CONTENT_ID: string = 'videoContainer';\r\n    static VIDEO_VIEW_CONTENT_CLS: string = 'video-view-content';\r\n    static KF_VIEW_CONTENT_ID: string = 'kfContainer';\r\n    static KF_VIEW_CONTENT_CLS: string = 'kf-view-content';\r\n\r\n    container: HTMLDivElement;\r\n\r\n    public static createMultiChartContainer(): HTMLDivElement {\r\n        const chartPanel: HTMLElement = document.getElementById(this.CHART_VIEW_CONTENT_ID);\r\n        const multiChartContainer: HTMLDivElement = document.createElement('div');\r\n        multiChartContainer.className = 'multi-charts-cover';\r\n        chartPanel.innerHTML = '';\r\n        chartPanel.appendChild(multiChartContainer);\r\n        return multiChartContainer;\r\n    }\r\n\r\n    public createViewContent(contentType: string) {\r\n        switch (contentType) {\r\n            case ViewWindow.DATA_VIEW_TITLE:\r\n                this.createViewContainer(ViewContent.DATA_VIEW_CONTENT_ID, ViewContent.DATA_VIEW_CONTENT_CLS);\r\n                this.createDataDashboard();\r\n                break;\r\n            case ViewWindow.CHART_VIEW_TITLE:\r\n                this.createViewContainer(ViewContent.CHART_VIEW_CONTENT_ID, ViewContent.CHART_VIEW_CONTENT_CLS);\r\n                break;\r\n            case ViewWindow.VIDEO_VIEW_TITLE:\r\n                this.createViewContainer(ViewContent.VIDEO_VIEW_CONTENT_ID, ViewContent.VIDEO_VIEW_CONTENT_CLS);\r\n                break;\r\n            case ViewWindow.KF_VIEW_TITLE:\r\n                this.createViewContainer(ViewContent.KF_VIEW_CONTENT_ID, ViewContent.KF_VIEW_CONTENT_CLS);\r\n                this.container.appendChild(this.createKeyframeListContainer());\r\n                break;\r\n        }\r\n    }\r\n\r\n    public createViewContainer(id: string, className: string): void {\r\n        this.container = document.createElement('div');\r\n        this.container.id = id;\r\n        this.container.className = ViewContent.VIEW_CONTENT_CLS + ' ' + className;\r\n        // if (id === ViewContent.CHART_VIEW_CONTENT_ID) {\r\n        //     const multiChartCover: HTMLDivElement = document.createElement('div');\r\n        //     multiChartCover.className = 'multi-charts-cover';\r\n        //     this.container.appendChild(multiChartCover);\r\n        // }\r\n    }\r\n\r\n    public createKeyframeListContainer(): HTMLDivElement {\r\n        const keyframePanel: HTMLDivElement = document.createElement('div');\r\n        keyframePanel.className = 'kf-panel';\r\n        kfContainer.createKfContainer();\r\n        keyframePanel.appendChild(kfContainer.kfWidgetContainer);\r\n\r\n        return keyframePanel;\r\n    }\r\n\r\n    public createDataDashboard() {\r\n        //attribute container, for data binding\r\n        // const attrWrapper: HTMLDivElement = document.createElement('div');\r\n        // attrWrapper.className = 'attr-wrapper non-sortable-attr-wrapper';\r\n        // const attrBtnWrapper: HTMLDivElement = document.createElement('div');\r\n        // const titleColumn: HTMLSpanElement = document.createElement('span');\r\n        // titleColumn.className = 'data-column-title';\r\n        // titleColumn.innerText = 'columns';\r\n        // attrBtnWrapper.appendChild(titleColumn);\r\n        // const attrBtnContainer: HTMLDivElement = document.createElement('div');\r\n        // attrBtnContainer.id = 'attrBtnContainer';\r\n        // attrBtnWrapper.appendChild(attrBtnContainer);\r\n        // attrWrapper.appendChild(attrBtnWrapper);\r\n\r\n        // const sortInputWrapper: HTMLDivElement = document.createElement('div');\r\n        // sortInputWrapper.id = 'sortInputWrapper';\r\n        // const titleSort: HTMLSpanElement = document.createElement('span');\r\n        // titleSort.innerText = 'sort';\r\n        // titleSort.className = 'data-column-title';\r\n        // sortInputWrapper.appendChild(titleSort);\r\n        // const sortInputContainer: HTMLDivElement = document.createElement('div');\r\n        // sortInputContainer.id = 'sortInputContainer';\r\n        // sortInputWrapper.appendChild(sortInputContainer);\r\n        // attrWrapper.appendChild(sortInputWrapper);\r\n        // this.container.appendChild(attrWrapper);\r\n\r\n        //data table container\r\n        const dataTableWrapper: HTMLDivElement = document.createElement('div');\r\n        dataTableWrapper.className = 'data-table-wrapper';\r\n        //for data binding\r\n        // const dataTableTitle: HTMLDivElement = document.createElement('div');\r\n        // dataTableTitle.className = 'data-table-title';\r\n        // const dataTableTitleText: HTMLSpanElement = document.createElement('span');\r\n        // dataTableTitleText.innerText = 'table';\r\n        // dataTableTitleText.className = 'data-table-title-text';\r\n        // dataTableTitle.appendChild(dataTableTitleText);\r\n        // const dataTableTitleDropdown: HTMLSpanElement = document.createElement('span');\r\n        // dataTableTitleDropdown.className = 'drop-down left-up-icon';\r\n        // dataTableTitleDropdown.onclick = () => {\r\n        //     dataTableTitleDropdown.classList.toggle('left-up-icon');\r\n        //     dataTableContainer.classList.toggle('hidden-data-table');\r\n        //     // attrWrapper.classList.toggle('non-sortable-attr-wrapper');\r\n        // }\r\n        // dataTableTitle.appendChild(dataTableTitleDropdown);\r\n        // dataTableWrapper.appendChild(dataTableTitle);\r\n        const dataTableContainer: HTMLDivElement = document.createElement('div');\r\n        dataTableContainer.id = 'dataTabelContainer';\r\n        dataTableContainer.className = 'data-table-container';\r\n        // dataTableContainer.className = 'data-table-container hidden-data-table';//for data binding\r\n        dataTableWrapper.appendChild(dataTableContainer);\r\n        this.container.appendChild(dataTableWrapper);\r\n    }\r\n\r\n\r\n}","import '../../assets/style/attrSort.scss'\r\n\r\nexport default class AttrSort {\r\n    static ASSCENDING_ORDER: string = 'asscending';\r\n    static DESCENDING_ORDER: string = 'descending';\r\n    static INDEX_ORDER: string = 'dataIndex';\r\n    selectInput: HTMLSpanElement;\r\n\r\n    public createAttrSort(attrName: string) {\r\n        this.selectInput = document.createElement('span');\r\n        this.selectInput.className = 'attr-sort';\r\n        const select: HTMLSelectElement = document.createElement('select');\r\n        select.name = attrName;\r\n        [AttrSort.INDEX_ORDER, AttrSort.ASSCENDING_ORDER, AttrSort.DESCENDING_ORDER].forEach(order => {\r\n            const option: HTMLOptionElement = document.createElement('option');\r\n            option.innerText = order;\r\n            option.value = order;\r\n            select.appendChild(option);\r\n        })\r\n        select.onchange = () => {\r\n            \r\n        }\r\n        this.selectInput.appendChild(select);\r\n    }\r\n\r\n\r\n}","import '../../assets/style/dragableCanvas.scss'\r\nimport { ICoord } from '../../util/ds';\r\nimport KfItem from './kfItem';\r\nimport PlusBtn from './plusBtn';\r\nimport { state, State } from '../../app_backup/state';\r\nimport Tool from '../../util/tool';\r\nimport Reducer from '../../app_backup/reducer';\r\nimport * as action from '../../app_backup/action';\r\nimport { ChartSpec, Animation } from '../../canis/moduleIdx'\r\nimport { chartManager } from '../../app/chartManager';\r\nimport { MarkSelector } from '../../app/markSelector';\r\nimport { AddPanel } from '../../app/addPanel';\r\nimport { kfTrack } from '../../app/kfTrack';\r\n\r\nexport default class DragableCanvas {\r\n    /**\r\n     * create a canvas when grabing the selected marks from the chart\r\n     * @param targetSVG : svg chart being selected\r\n     * @param downCoord : mouse down position\r\n     */\r\n    public createCanvas(targetSVG: HTMLElement, downCoord: ICoord) {\r\n        targetSVG.classList.toggle('chart-when-dragging');\r\n        document.getElementById('selectionMask').style.display = 'none';\r\n        chartManager.marks.forEach((mark: Map<string, string>, id: string) => {\r\n            if (!MarkSelector.selection.has(id)) {\r\n                document.getElementById(id).style.display = 'none';\r\n            }\r\n        });\r\n        const canvas: HTMLCanvasElement = document.createElement('canvas');\r\n        canvas.className = 'drag-drop-canvas grab-selection';\r\n        canvas.id = 'dragDropCanvas';\r\n        const ctx = canvas.getContext('2d');\r\n        document.body.appendChild(canvas);\r\n\r\n        const svgW: number = targetSVG.getBoundingClientRect().width, svgH: number = targetSVG.getBoundingClientRect().height;//fixed\r\n        canvas.width = KfItem.KF_WIDTH;\r\n        canvas.height = KfItem.KF_HEIGHT;\r\n        ctx.fillStyle = '#eaeaea';\r\n        ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n        canvas.style.left = `${downCoord.x - canvas.width / 2}px`;\r\n        canvas.style.top = `${downCoord.y - canvas.height / 2}px`;\r\n        let img = new Image();\r\n        img.onload = () => {\r\n            //shrink the svg size to the same size as kf\r\n            let dx: number = 0, dy: number = 0, scaleWidth: number = canvas.width, scaleHeight: number = canvas.width * (svgH / svgW);\r\n            if (scaleHeight <= canvas.height) {\r\n                dy = (canvas.height - scaleHeight) / 2;\r\n            } else {\r\n                scaleHeight = canvas.height;\r\n                scaleWidth = canvas.height * (svgW / svgH);\r\n                dx = (canvas.width - scaleWidth) / 2;\r\n            }\r\n            ctx.drawImage(img, dx, dy, scaleWidth, scaleHeight);\r\n        };\r\n        img.src = 'data:image/svg+xml;base64,' + btoa((new XMLSerializer()).serializeToString(targetSVG));\r\n        document.getElementById('selectionMask').style.display = 'block';\r\n        chartManager.marks.forEach((mark: Map<string, string>, id: string) => {\r\n            if (!MarkSelector.selection.has(id)) {\r\n                document.getElementById(id).style.display = 'block';\r\n            }\r\n        });\r\n\r\n        document.onmousemove = (moveEvt) => {\r\n            canvas.style.left = `${moveEvt.pageX - canvas.width / 2}px`;\r\n            canvas.style.top = `${moveEvt.pageY - canvas.height / 2}px`;\r\n\r\n            const deltaL = AddPanel.show()\r\n            if (deltaL) {\r\n                kfTrack.lastGroup.translate(deltaL, 0);\r\n            }\r\n\r\n            const addPanel: HTMLElement = document.getElementById('addPanel');\r\n            const addPanelRect: ClientRect = addPanel.getBoundingClientRect();\r\n            if (moveEvt.pageX >= addPanelRect.left && moveEvt.pageX <= addPanelRect.right && moveEvt.pageY >= addPanelRect.top && moveEvt.pageY <= addPanelRect.bottom) {\r\n                AddPanel.addHighlight();\r\n            }\r\n            else {\r\n                AddPanel.removeHighlight();\r\n            }\r\n        }\r\n        document.onmouseup = (upEvt) => {\r\n            canvas.remove();\r\n\r\n\r\n            // const kfContainer: HTMLElement = document.getElementById('kfContainer');\r\n            // const kfContainerRect: ClientRect = kfContainer.getBoundingClientRect();\r\n            const addPanel: HTMLElement = document.getElementById('addPanel');\r\n            const addPanelRect: ClientRect = addPanel.getBoundingClientRect();\r\n\r\n            const deltaL = AddPanel.fold();\r\n            kfTrack.lastGroup.translate(deltaL, 0);\r\n\r\n            if (upEvt.pageX >= addPanelRect.left && upEvt.pageX <= addPanelRect.right && upEvt.pageY >= addPanelRect.top && upEvt.pageY <= addPanelRect.bottom) {\r\n                MarkSelector.emitSelection();\r\n            }\r\n\r\n            targetSVG.classList.toggle('chart-when-dragging');\r\n            document.onmouseup = null;\r\n            document.onmousemove = null;\r\n        }\r\n    }\r\n}\r\n\r\nexport const dragableCanvas = new DragableCanvas();","import '../../assets/style/hint.scss'\r\nimport { ICoord } from \"../../util/ds\";\r\nimport { KfContainer } from \"../kfContainer\";\r\nimport Tool from \"../../util/tool\";\r\nimport Reducer from '../../app_backup/reducer';\r\nimport * as action from '../../app_backup/action';\r\nimport { State, state } from '../../app_backup/state';\r\n\r\nexport class Hint {\r\n    static CHAR_LEN: number = 9;\r\n    static HINT_HEIGHT: number = 12;\r\n    static PADDING: number = 2;\r\n    static FILL_COLOR: string = '#fff';\r\n    static STROKE_COLOR: string = '#000';\r\n    static TIMING_FILL_COLOR: string = '#efefef';\r\n    static TIMING_BORDER_COLOR: string = '#383838';\r\n    static TIMING_HINT_HEIGHT: number = 21;\r\n    static TIMING_HINT_ID: string = 'timingHint';\r\n\r\n    public hintContent: string = '';\r\n    public container: SVGGElement;\r\n    public hintBg: SVGRectElement;\r\n    public textWrapper: SVGForeignObjectElement;\r\n    public contentText: SVGTextContentElement;\r\n    public contentInput: HTMLInputElement;\r\n    public pointer: SVGPathElement;\r\n    public content: string = '';\r\n\r\n    public createHint(mousePosi: ICoord, content: string, w: number = -1): void {\r\n        this.removeHint();\r\n        this.removeTimingHint();\r\n        this.content = content;\r\n        const svgHintLayer: HTMLElement = document.getElementById(KfContainer.KF_HINT);\r\n        const hintLayerBBox: DOMRect = svgHintLayer.getBoundingClientRect();//fixed\r\n        this.container = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n        this.container.setAttributeNS(null, 'transform', `translate(${(mousePosi.x - hintLayerBBox.left) / state.zoomLevel + 4}, ${(mousePosi.y - hintLayerBBox.top) / state.zoomLevel + 2})`);\r\n        this.hintBg = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n        this.hintBg.setAttributeNS(null, 'width', `${w === -1 ? Hint.CHAR_LEN * this.content.length : w}`);\r\n        this.hintBg.setAttributeNS(null, 'height', `${Hint.HINT_HEIGHT + 2 * Hint.PADDING}`);\r\n        this.hintBg.setAttributeNS(null, 'fill', `${Hint.FILL_COLOR}`);\r\n        this.hintBg.setAttributeNS(null, 'stroke', `${Hint.STROKE_COLOR}`);\r\n        this.container.appendChild(this.hintBg);\r\n        this.contentText = document.createElementNS('http://www.w3.org/2000/svg', 'text');\r\n        this.contentText.setAttributeNS(null, 'x', `${Hint.PADDING}`);\r\n        this.contentText.setAttributeNS(null, 'y', `${Hint.HINT_HEIGHT}`);\r\n        // this.contentText.setAttributeNS(null, 'font-size', '9pt');\r\n        this.contentText.classList.add('monospace-font', 'small-font');\r\n        this.contentText.innerHTML = this.content;\r\n        this.container.appendChild(this.contentText);\r\n        svgHintLayer.appendChild(this.container);\r\n\r\n        document.onmousemove = (moveEvt) => {\r\n            this.container.setAttributeNS(null, 'transform', `translate(${(moveEvt.pageX - hintLayerBBox.left) / state.zoomLevel + 4}, ${(moveEvt.pageY - hintLayerBBox.top) / state.zoomLevel + 2})`);\r\n        }\r\n    }\r\n\r\n    public removeHint() {\r\n        const svgHintLayer: HTMLElement = document.getElementById(KfContainer.KF_HINT);\r\n        if (svgHintLayer.contains(this.container)) {\r\n            svgHintLayer.removeChild(this.container);\r\n        }\r\n        document.onmousemove = null;\r\n    }\r\n\r\n    public createTimingHint(pointingPosi: ICoord, content: string, actionType: string, actionInfo: any = {}): void {\r\n        this.removeHint();\r\n        this.removeTimingHint();\r\n        this.content = content;\r\n        const textBlocks: string[] = this.content.split(':');\r\n\r\n        const svgHintLayer: HTMLElement = document.getElementById(KfContainer.KF_HINT);\r\n        const hintLayerBBox: DOMRect = svgHintLayer.getBoundingClientRect();//fixed\r\n        // const hintWidth: number = Hint.CHAR_LEN * this.content.length + 2 * Hint.PADDING;\r\n        const hintWidth: number = textBlocks[0] === 'duration' ? 138 : 116;\r\n        this.container = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n        this.container.id = Hint.TIMING_HINT_ID;\r\n        this.container.setAttributeNS(null, 'transform', `translate(${(pointingPosi.x - hintLayerBBox.left) / state.zoomLevel - hintWidth / 2}, ${(pointingPosi.y - hintLayerBBox.top) / state.zoomLevel - Hint.TIMING_HINT_HEIGHT})`);\r\n        this.container.onmouseleave = () => {\r\n            this.removeTimingHint();\r\n        }\r\n\r\n        const fakeBg: SVGRectElement = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n        fakeBg.setAttributeNS(null, 'width', `${hintWidth}`);\r\n        fakeBg.setAttributeNS(null, 'height', `${Hint.HINT_HEIGHT * 2}`);\r\n        fakeBg.setAttributeNS(null, 'fill', '#00000000');\r\n        this.container.appendChild(fakeBg);\r\n\r\n        this.hintBg = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n        this.hintBg.classList.add('drop-shadow-ele');\r\n        this.hintBg.setAttributeNS(null, 'width', `${hintWidth}`);\r\n        this.hintBg.setAttributeNS(null, 'height', `${Hint.HINT_HEIGHT + 2 * Hint.PADDING}`);\r\n        this.hintBg.setAttributeNS(null, 'fill', `${Hint.TIMING_FILL_COLOR}`);\r\n        this.hintBg.setAttributeNS(null, 'stroke', `${Hint.TIMING_BORDER_COLOR}`);\r\n        this.container.appendChild(this.hintBg);\r\n\r\n        //append text\r\n        this.contentText = document.createElementNS('http://www.w3.org/2000/svg', 'text');\r\n        this.contentText.setAttributeNS(null, 'x', `${Hint.PADDING}`);\r\n        this.contentText.setAttributeNS(null, 'y', `${Hint.HINT_HEIGHT}`);\r\n        this.contentText.setAttributeNS(null, 'fill', `${Hint.TIMING_BORDER_COLOR}`);\r\n        this.contentText.innerHTML = `${textBlocks[0]}:&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ms`;\r\n        this.container.appendChild(this.contentText);\r\n        this.textWrapper = document.createElementNS('http://www.w3.org/2000/svg', 'foreignObject');\r\n        this.textWrapper.setAttributeNS(null, 'x', `${(textBlocks[0].length + 1) * 8}`);\r\n        this.textWrapper.setAttributeNS(null, 'width', `${hintWidth - (textBlocks[0].length + 4) * 8}`);\r\n        this.textWrapper.setAttributeNS(null, 'height', `${Hint.HINT_HEIGHT + 2 * Hint.PADDING}`);\r\n        this.contentInput = document.createElement('input');\r\n        this.contentInput.classList.add('monospace-font', 'small-font', 'hint-input');\r\n        this.contentInput.value = textBlocks[1].substring(0, textBlocks[1].length - 2);\r\n        this.contentInput.onfocus = () => {\r\n            this.container.onmouseleave = null;\r\n        }\r\n        this.contentInput.onblur = () => {\r\n            const timingValue: number = parseFloat(this.contentInput.value);\r\n            switch (actionType) {\r\n                case action.UPDATE_DURATION:\r\n                    actionInfo.duration = timingValue;\r\n                    break;\r\n                case action.UPDATE_ANI_OFFSET:\r\n                    actionInfo.offset = timingValue;\r\n                    break;\r\n                case action.UPDATE_DELAY_BETWEEN_GROUP:\r\n                case action.UPDATE_DELAY_BETWEEN_KF:\r\n                    actionInfo.delay = timingValue;\r\n                    break;\r\n            }\r\n            this.removeTimingHint();\r\n            State.tmpStateBusket.push({\r\n                historyAction: { actionType: action.UPDATE_SPEC_ANIMATIONS, actionVal: JSON.stringify(state.spec.animations) },\r\n                currentAction: { actionType: actionType, actionVal: actionInfo }\r\n            })\r\n            State.saveHistory();\r\n            Reducer.triger(actionType, actionInfo);\r\n        }\r\n        this.textWrapper.appendChild(this.contentInput);\r\n        this.container.appendChild(this.textWrapper);\r\n        this.pointer = document.createElementNS('http://www.w3.org/2000/svg', 'path');\r\n        this.pointer.classList.add('drop-shadow-ele');\r\n        this.pointer.setAttributeNS(null, 'd', `M0,0 H6 L3,${Hint.TIMING_HINT_HEIGHT - Hint.HINT_HEIGHT - 2 * Hint.PADDING} Z`);\r\n        this.pointer.setAttributeNS(null, 'transform', `translate(${hintWidth / 2 - 6}, ${Hint.HINT_HEIGHT + 2 * Hint.PADDING})`);\r\n        this.pointer.setAttributeNS(null, 'fill', `${Hint.TIMING_BORDER_COLOR}`);\r\n        this.container.appendChild(this.pointer);\r\n        svgHintLayer.appendChild(this.container);\r\n    }\r\n\r\n    public updateTimingHint(diffX: number, content: string) {\r\n        this.content = content;\r\n        const textBlocks: string[] = this.content.split(':');\r\n        this.contentInput.value = textBlocks[1].substring(0, textBlocks[1].length - 2);\r\n        const containerTrans: ICoord = Tool.extractTransNums(this.container.getAttributeNS(null, 'transform'));\r\n        const newW: number = Hint.CHAR_LEN * this.content.length + 2 * Hint.PADDING;\r\n        const oriW: number = parseFloat(this.hintBg.getAttributeNS(null, 'width'));\r\n        const diffW: number = newW - oriW;\r\n        // this.hintBg.setAttributeNS(null, 'width', `${newW}`);\r\n        this.container.setAttributeNS(null, 'transform', `translate(${containerTrans.x + diffX}, ${containerTrans.y})`);\r\n        // this.pointer.setAttributeNS(null, 'transform', `translate(${newW / 2 - 6}, ${Hint.HINT_HEIGHT + 2 * Hint.PADDING})`);\r\n    }\r\n\r\n    public removeTimingHint() {\r\n        const svgHintLayer: HTMLElement = document.getElementById(KfContainer.KF_HINT);\r\n        if (svgHintLayer.contains(this.container)) {\r\n            svgHintLayer.removeChild(this.container);\r\n            this.contentInput.onfocus = null;\r\n            this.contentInput.onblur = null;\r\n        }\r\n    }\r\n}\r\n\r\nexport let hintTag: Hint = new Hint();","import { KfContainer, kfContainer } from \"../kfContainer\";\r\nimport KfItem from \"./kfItem\";\r\nimport { ICoord } from \"../../util/ds\";\r\nimport { IKeyframe } from \"../../app_backup/core/ds\";\r\nimport KfGroup from \"./kfGroup\";\r\nimport { state } from \"../../app_backup/state\";\r\nimport { TimingSpec } from \"../../canis/moduleIdx\";\r\n\r\nexport default class IntelliRefLine {\r\n    static HIGHLIGHT_STROKE_COLOR: string = '#0e89e5';\r\n    static TRIGER_STROKE_COLOR: string = '#e2640e';\r\n    static STROKE_COLOR: string = '#676767';\r\n    static idx: number = 0;\r\n    static allLines: Map<number, IntelliRefLine> = new Map();//key: line id, value: IntelliRefLine Obj\r\n    static kfLineMapping: Map<number, { theOtherEnd: number, lineId: number }> = new Map();//key: kf id, value: {theOtherEnd: kf on the other end of this line, lineId: id of the IntelliRefLine obj}\r\n\r\n    public id: number;\r\n    public container: HTMLElement;\r\n    public line: SVGLineElement;\r\n    public fakeDuration: SVGRectElement;\r\n\r\n    public createLine(alignWithKfId: number, alignToKfId: number) {\r\n        //judge whether the alignto kfgroup is merged to alignwith group\r\n        const alignToKfGroup: KfGroup = KfItem.allKfItems.get(alignToKfId).parentObj.fetchAniGroup();\r\n        this.container = document.getElementById(KfContainer.KF_FG);\r\n        this.id = IntelliRefLine.idx;\r\n        IntelliRefLine.idx++;\r\n        this.line = document.createElementNS('http://www.w3.org/2000/svg', 'line');\r\n        this.line.setAttributeNS(null, 'stroke', IntelliRefLine.STROKE_COLOR);\r\n        this.line.setAttributeNS(null, 'stroke-dasharray', '4 2');\r\n        this.line.setAttributeNS(null, 'stroke-width', '1');\r\n        this.container.appendChild(this.line);\r\n        IntelliRefLine.allLines.set(this.id, this);\r\n        IntelliRefLine.kfLineMapping.set(alignWithKfId, { theOtherEnd: alignToKfId, lineId: this.id });\r\n        IntelliRefLine.kfLineMapping.set(alignToKfId, { theOtherEnd: alignWithKfId, lineId: this.id });\r\n\r\n        IntelliRefLine.updateLine(alignWithKfId);\r\n        if (alignToKfGroup.alignMerge) {\r\n            this.hideLine();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * update line position and size\r\n     * @param kfId : either alignwith kf or alignto kf\r\n     */\r\n    public static updateLine(kfId: number) {\r\n        if (typeof IntelliRefLine.kfLineMapping.get(kfId) !== 'undefined') {\r\n            const lineItem: IntelliRefLine = IntelliRefLine.allLines.get(IntelliRefLine.kfLineMapping.get(kfId).lineId);\r\n            const containerBBox: DOMRect = lineItem.container.getBoundingClientRect();//fixed\r\n            const alignKf1: IKeyframe = KfItem.allKfInfo.get(kfId);\r\n            const alignKf2: IKeyframe = KfItem.allKfInfo.get(IntelliRefLine.kfLineMapping.get(kfId).theOtherEnd);\r\n            let alignWithKfBBox: DOMRect, alignWithKfInfo: IKeyframe, alignToKfBBox: DOMRect, alignToKfInfo: IKeyframe;\r\n            let alignWithKf: KfItem, alignToKf: KfItem;\r\n            if (typeof alignKf1 !== 'undefined' && typeof alignKf2 !== 'undefined') {\r\n                if (typeof alignKf1.alignTo === 'undefined') {\r\n                    alignWithKf = KfItem.allKfItems.get(alignKf1.id);\r\n                    alignToKf = KfItem.allKfItems.get(alignKf2.id);\r\n                    alignWithKfInfo = alignKf1;\r\n                    alignToKfInfo = alignKf2;\r\n                } else {\r\n                    alignWithKf = KfItem.allKfItems.get(alignKf2.id);\r\n                    alignToKf = KfItem.allKfItems.get(alignKf1.id);\r\n                    alignWithKfInfo = alignKf2;\r\n                    alignToKfInfo = alignKf1;\r\n                }\r\n                if (alignWithKf.rendered && alignToKf.rendered) {\r\n                    alignWithKfBBox = alignWithKf.container.getBoundingClientRect();//fixed\r\n                    alignToKfBBox = alignToKf.container.getBoundingClientRect();//fixed\r\n                    const [minX, maxX]: [number, number] = alignToKf.calAlignRange();\r\n                    if (alignToKfInfo.timingRef === TimingSpec.timingRef.previousEnd) {\r\n                        lineItem.line.setAttributeNS(null, 'x1', `${(maxX - containerBBox.left) / state.zoomLevel}`);\r\n                        lineItem.line.setAttributeNS(null, 'x2', `${(maxX - containerBBox.left) / state.zoomLevel}`);\r\n                    } else {\r\n                        lineItem.line.setAttributeNS(null, 'x1', `${(minX - containerBBox.left) / state.zoomLevel}`);\r\n                        lineItem.line.setAttributeNS(null, 'x2', `${(minX - containerBBox.left) / state.zoomLevel}`);\r\n                    }\r\n\r\n                    // lineItem.line.setAttributeNS(null, 'y1', `${24}`);\r\n                    lineItem.line.setAttributeNS(null, 'y1', `${(alignWithKfBBox.top - containerBBox.top) / state.zoomLevel}`);\r\n                    lineItem.line.setAttributeNS(null, 'y2', `${(alignToKfBBox.bottom - containerBBox.top) / state.zoomLevel}`);\r\n                    lineItem.line.setAttributeNS(null, 'transform', '');\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public static hintAniPosis(kfGroup: KfGroup): IntelliRefLine[] {\r\n        let hintLines: IntelliRefLine[] = [];\r\n        for (let i = 0, len = [...KfGroup.allAniGroups].length; i < len; i++) {\r\n            const aniGroup: KfGroup = [...KfGroup.allAniGroups][i][1];\r\n            let showHintLine: boolean = kfGroup.id !== aniGroup.id;\r\n            if (typeof kfGroup.alignId !== 'undefined' && typeof aniGroup.alignTarget !== 'undefined') {\r\n                if (kfGroup.alignId === aniGroup.alignTarget) {\r\n                    showHintLine = false;\r\n                }\r\n            }\r\n            // if (typeof kfGroup.alignId !== 'undefined' && typeof aniGroup.alignTarget !== 'undefined') {\r\n            //     if (kfGroup.alignId !== aniGroup.alignTarget && kfGroup.id !== aniGroup.id) {\r\n            if (showHintLine) {\r\n                const firstKf: KfItem = aniGroup.fetchFirstKf();\r\n                const aniGroupBBox: DOMRect = aniGroup.groupBg.getBoundingClientRect();//fixed\r\n                const firstKfBBox: DOMRect = firstKf.container.getBoundingClientRect();//fixed\r\n\r\n                console.log('hint position: ', aniGroupBBox, firstKfBBox);\r\n\r\n                const tmpHintLine1: IntelliRefLine = new IntelliRefLine();\r\n                tmpHintLine1.hintInsert({ x: aniGroupBBox.right, y: aniGroupBBox.top }, aniGroupBBox.height / state.zoomLevel, true, false);\r\n                hintLines.push(tmpHintLine1);\r\n                const tmpHintLine2: IntelliRefLine = new IntelliRefLine();\r\n                tmpHintLine2.hintInsert({ x: aniGroupBBox.left, y: aniGroupBBox.top }, aniGroupBBox.height / state.zoomLevel, true, false);\r\n                // tmpHintLine2.hintAlign({ x: aniGroupBBox.left, y: aniGroupBBox.top }, aniGroupBBox.height / state.zoomLevel, false);\r\n                hintLines.push(tmpHintLine2);\r\n                const tmpHintLine3: IntelliRefLine = new IntelliRefLine();\r\n                tmpHintLine3.hintAlign({ x: firstKfBBox.left, y: firstKfBBox.top }, firstKfBBox.height / state.zoomLevel, false);\r\n                hintLines.push(tmpHintLine3);\r\n                const tmpHintLine4: IntelliRefLine = new IntelliRefLine();\r\n                tmpHintLine4.hintAlign({ x: firstKfBBox.right, y: firstKfBBox.top }, firstKfBBox.height / state.zoomLevel, false);\r\n                hintLines.push(tmpHintLine4);\r\n            }\r\n            //     }\r\n            // }\r\n        }\r\n        return hintLines;\r\n    }\r\n\r\n    public zoomHideLine(): void {\r\n        this.line.setAttributeNS(null, 'display', 'none');\r\n    }\r\n\r\n    public zoomShowLine(): void {\r\n        this.line.setAttributeNS(null, 'display', '');\r\n    }\r\n\r\n    public hideLine(): void {\r\n        if (typeof this !== 'undefined') {\r\n            this.line.setAttributeNS(null, 'opacity', '0');\r\n        }\r\n    }\r\n\r\n    public showLine(): void {\r\n        if (typeof this !== 'undefined') {\r\n            this.line.setAttributeNS(null, 'opacity', '1');\r\n        }\r\n    }\r\n\r\n    public hintAlign(targetPosi: ICoord, targetHeight: number, highlight: boolean) {\r\n        this.container = document.getElementById(KfContainer.KF_FG);\r\n        const containerBBox: DOMRect = document.getElementById(KfContainer.KF_CONTAINER).getBoundingClientRect();//fixed\r\n        if (typeof this.line === 'undefined') {\r\n            this.line = document.createElementNS('http://www.w3.org/2000/svg', 'line');\r\n        }\r\n        if (!this.container.contains(this.line)) {\r\n            this.container.appendChild(this.line);\r\n        }\r\n        this.line.setAttributeNS(null, 'stroke', highlight ? IntelliRefLine.TRIGER_STROKE_COLOR : IntelliRefLine.HIGHLIGHT_STROKE_COLOR);\r\n        this.line.setAttributeNS(null, 'stroke-width', '2');\r\n        this.line.setAttributeNS(null, 'stroke-dasharray', '4 2');\r\n        this.line.setAttributeNS(null, 'x1', `${(targetPosi.x - containerBBox.left) / state.zoomLevel - kfContainer.transDistance.w}`);\r\n        this.line.setAttributeNS(null, 'y1', `${(targetPosi.y - containerBBox.top) / state.zoomLevel - kfContainer.transDistance.h}`);\r\n        this.line.setAttributeNS(null, 'x2', `${(targetPosi.x - containerBBox.left) / state.zoomLevel - kfContainer.transDistance.w}`);\r\n        this.line.setAttributeNS(null, 'y2', `${(targetPosi.y - containerBBox.top) / state.zoomLevel + targetHeight - kfContainer.transDistance.h}`);\r\n    }\r\n\r\n    public showFakeDuration(targetPosi: ICoord, targetHeight: number) {\r\n        const containerBBox: DOMRect = document.getElementById(KfContainer.KF_CONTAINER).getBoundingClientRect();//fixed\r\n        if (typeof this.fakeDuration === 'undefined') {\r\n            this.fakeDuration = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n        }\r\n        this.fakeDuration.setAttributeNS(null, 'x', `${(targetPosi.x - containerBBox.left) / state.zoomLevel - kfContainer.transDistance.w - 30}`);\r\n        this.fakeDuration.setAttributeNS(null, 'y', `${(targetPosi.y - containerBBox.top) / state.zoomLevel - kfContainer.transDistance.h}`);\r\n        this.fakeDuration.setAttributeNS(null, 'width', '30');\r\n        this.fakeDuration.setAttributeNS(null, 'height', `${targetHeight - kfContainer.transDistance.h}`);\r\n        this.fakeDuration.setAttributeNS(null, 'fill', `url(#${KfContainer.DURATION_GRADIENT})`);\r\n        this.container.appendChild(this.fakeDuration);\r\n    }\r\n\r\n    public hintInsert(targetPosi: ICoord, targetHeight: number, vertical: boolean, highlight: boolean) {\r\n        this.container = document.getElementById(KfContainer.KF_FG);\r\n        const containerBBox: DOMRect = document.getElementById(KfContainer.KF_CONTAINER).getBoundingClientRect();//fixed\r\n        if (typeof this.line === 'undefined') {\r\n            this.line = document.createElementNS('http://www.w3.org/2000/svg', 'line');\r\n        }\r\n        if (!this.container.contains(this.line)) {\r\n            this.container.appendChild(this.line);\r\n        }\r\n        this.line.setAttributeNS(null, 'stroke', highlight ? IntelliRefLine.TRIGER_STROKE_COLOR : IntelliRefLine.HIGHLIGHT_STROKE_COLOR);\r\n        this.line.setAttributeNS(null, 'stroke-width', '4');\r\n        this.line.setAttributeNS(null, 'stroke-dasharray', '1 0');\r\n        if (vertical) {\r\n            this.line.setAttributeNS(null, 'x1', `${(targetPosi.x - containerBBox.left) / state.zoomLevel - kfContainer.transDistance.w}`);\r\n            this.line.setAttributeNS(null, 'y1', `${(targetPosi.y - containerBBox.top) / state.zoomLevel - kfContainer.transDistance.h}`);\r\n            this.line.setAttributeNS(null, 'x2', `${(targetPosi.x - containerBBox.left) / state.zoomLevel - kfContainer.transDistance.w}`);\r\n            this.line.setAttributeNS(null, 'y2', `${(targetPosi.y - containerBBox.top) / state.zoomLevel + targetHeight - kfContainer.transDistance.h}`);\r\n        }\r\n    }\r\n\r\n    public removeHintLine() {\r\n        if (typeof this.container !== 'undefined') {\r\n            if (this.container.contains(this.line)) {\r\n                this.container.removeChild(this.line);\r\n            }\r\n        }\r\n    }\r\n\r\n    public removeFakeDuration() {\r\n        if (typeof this.container !== 'undefined') {\r\n            if (this.container.contains(this.fakeDuration)) {\r\n                this.container.removeChild(this.fakeDuration);\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport let hintDrop: IntelliRefLine = new IntelliRefLine();","import KfTrack from \"./kfTrack\";\r\nimport { IKeyframeGroup, IKeyframe } from \"../../app_backup/core/ds\";\r\nimport KfOmit from \"./kfOmit\";\r\nimport KfTimingIllus from \"./kfTimingIllus\";\r\nimport KfItem from \"./kfItem\";\r\nimport Tool from \"../../util/tool\";\r\nimport { ICoord } from \"../../util/ds\";\r\nimport IntelliRefLine, { hintDrop } from \"./intelliRefLine\";\r\n\r\n// import '../../assets/style/keyframeGroup.scss'\r\nimport { KfContainer } from \"../kfContainer\";\r\nimport * as action from \"../../app_backup/action\";\r\nimport Reducer from \"../../app_backup/reducer\";\r\nimport PlusBtn from \"./plusBtn\";\r\nimport { hintTag } from \"./hint\";\r\nimport { state, State } from \"../../app_backup/state\";\r\nimport Util from \"../../app_backup/core/util\";\r\nimport { sortableSvgTable } from \"./sortableSvgTable\";\r\nimport { TimingSpec, Animation } from \"../../canis/moduleIdx\";\r\n\r\nexport default class KfGroup extends KfTimingIllus {\r\n    static groupIdx: number = 0;\r\n    static leafLevel: number = 0;\r\n    static BASIC_GRAY: number = 239;\r\n    static GRAY_STEP: number = 20;\r\n    static PADDING: number = 6;\r\n    static GROUP_RX: number = 8;\r\n    static TITLE_CHAR_WIDTH: number = 9;\r\n    static TITLE_PADDING: number = 4;\r\n    static TITLE_HEIHGT: number = 18;\r\n    static allActions: Map<string, any> = new Map();//key: aniId, value: action\r\n    static allAniGroups: Map<string, KfGroup> = new Map();//key: aniId, value: kfgroup corresponds to animation\r\n    static allAniGroupInfo: Map<string, IKeyframeGroup> = new Map();//key: aniId, value: kfg info\r\n\r\n    // public id: number;\r\n    public aniId: string;\r\n    public preAniId: string;\r\n    public newTrack: boolean;\r\n    public posiX: number;\r\n    public posiY: number;\r\n    public delay: number;\r\n    public title: string;\r\n    public fullTitle: string;\r\n    public rendered: boolean = false;\r\n    public targetTrackId: string;\r\n    public idxInGroup: number = 0;\r\n    public groupRef: string = '';\r\n    public refValue: string = '';\r\n    public childrenRef: string;\r\n    public childrenRefValues: string[] = [];\r\n    public timingRef: string = TimingSpec.timingRef.previousStart;\r\n    public kfHasOffset: boolean = false;//for updating omits\r\n    public kfHasDuration: boolean = false;//for updating omits\r\n    public width: number = 0;\r\n    public marks: string[];\r\n    public treeLevel: number;\r\n    public alignTarget: string;\r\n    public alignId: string;\r\n    public alignType: string;\r\n    public alignMerge: boolean = false;\r\n    public isDragging: boolean = false;\r\n\r\n    public groupBg: SVGRectElement;\r\n    public groupMenu: GroupMenu;\r\n    // public groupMenuMask: SVGMaskElement;\r\n    public plusBtn: PlusBtn;\r\n    public groupTitle: SVGGElement;\r\n    public groupTitleBg: SVGRectElement;\r\n    public groupTitleContent: SVGTextContentElement;\r\n    public groupSortBtn: SVGGElement\r\n    public groupTitleCover: SVGRectElement;//same color as the group bg\r\n    public children: (KfGroup | KfItem | KfOmit)[] = [];\r\n    public kfNum: number = 0;\r\n    public kfOmits: KfOmit[] = [];\r\n    public parentObj: KfGroup | KfTrack;\r\n    public alignLines: number[] = [];\r\n    public _renderWhenZooming: boolean = true;\r\n\r\n    set offsetDiff(od: number) {//for dragging the offset stretch bar\r\n        this._offsetDiff = od;\r\n        // this.hideLinesInGroup();\r\n        Tool.transNodeElements(this.container, od, true);\r\n        this.translateWholeGroup(od);\r\n    }\r\n    get offsetDiff(): number {\r\n        return this._offsetDiff;\r\n    }\r\n\r\n    set renderWhenZooming(rwz: boolean) {\r\n        const changed: boolean = rwz !== this.renderWhenZooming;\r\n        this._renderWhenZooming = rwz;\r\n        if (changed) {\r\n            this.showGroupWhenZooming();\r\n        }\r\n    }\r\n\r\n    get renderWhenZooming(): boolean {\r\n        return this._renderWhenZooming;\r\n    }\r\n\r\n    public static reset() {\r\n        this.groupIdx = 0;\r\n        this.leafLevel = 0;\r\n    }\r\n\r\n    public addEasingTransform() {\r\n        this.groupTitle.classList.add('ease-transform');\r\n    }\r\n    public removeEasingTransform() {\r\n        this.groupTitle.classList.remove('ease-transform');\r\n    }\r\n\r\n    /**\r\n     * @param g : container of this group, could be track or another group\r\n     * @param p : init position of the root group\r\n     */\r\n    public createGroup(kfg: IKeyframeGroup, previousAniId: string, parentObj: KfGroup | KfTrack, posiY: number, treeLevel: number, targetTrackId: string): void {\r\n        // console.log('test kfg: ', kfg);\r\n        this.id = kfg.id;\r\n        this.aniId = kfg.aniId;\r\n        this.preAniId = previousAniId;\r\n        this.marks = kfg.marks;\r\n        this.groupRef = kfg.groupRef;\r\n        this.timingRef = kfg.timingRef;\r\n        this.targetTrackId = targetTrackId;\r\n        this.newTrack = kfg.newTrack;\r\n        this.treeLevel = treeLevel;\r\n        this.posiY = posiY;\r\n        this.hasOffset = kfg.delayIcon;\r\n        this.parentObj = parentObj;\r\n        this.delay = kfg.delay;\r\n        this.alignId = kfg.alignId;\r\n        this.alignTarget = kfg.alignTarget;\r\n        this.alignType = kfg.alignType;\r\n        if (typeof kfg.merge !== 'undefined') {\r\n            this.alignMerge = kfg.merge;\r\n        }\r\n        if (typeof kfg.refValue === 'undefined') {\r\n            let classRecorder: Set<string> = new Set();\r\n            this.marks.forEach((m: string) => {\r\n                classRecorder.add(Animation.markClass.get(m));\r\n            })\r\n            let tmpTitle: string = [...classRecorder].join(', ');\r\n            this.fullTitle = tmpTitle;\r\n            if (tmpTitle.length > 23) {\r\n                tmpTitle = tmpTitle.substring(0, 23) + '...';\r\n            }\r\n            this.title = tmpTitle;\r\n        } else {\r\n            this.refValue = kfg.refValue;\r\n            this.fullTitle = kfg.refValue;\r\n            this.title = kfg.refValue;\r\n        }\r\n\r\n        if (kfg.keyframes.length > 0) {\r\n            this.childrenRef = kfg.keyframes[0].groupRef;\r\n            this.childrenRefValues = kfg.keyframes.map((k: IKeyframe) => k.refValue);\r\n        } else {\r\n            if (kfg.children.length > 0) {\r\n                this.childrenRef = kfg.children[0].groupRef;\r\n                this.childrenRefValues = kfg.children.map((c: IKeyframeGroup) => c.refValue);\r\n            }\r\n        }\r\n\r\n        if (typeof parentObj.container !== 'undefined') {\r\n            this.rendered = true;\r\n            this.renderGroup();\r\n        }\r\n    }\r\n\r\n    public createBlankKfg(parentObj: KfTrack, targetGroupAniId: string, startX: number): void {\r\n        this.parentObj = parentObj;\r\n        this.aniId = targetGroupAniId;\r\n        this.treeLevel = 0;\r\n        this.container = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n        this.posiY = 2;\r\n        this.translateContainer(startX, this.posiY);\r\n        this.parentObj.children.push(this);\r\n        this.groupBg = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n        this.groupBg.setAttributeNS(null, 'stroke', '#898989');\r\n\r\n        this.groupBg.setAttributeNS(null, 'fill', `rgb(${KfGroup.BASIC_GRAY - KfGroup.GRAY_STEP},${KfGroup.BASIC_GRAY - KfGroup.GRAY_STEP},${KfGroup.BASIC_GRAY - KfGroup.GRAY_STEP})`);\r\n        this.groupBg.setAttributeNS(null, 'stroke-width', '1');\r\n        this.groupBg.setAttributeNS(null, 'rx', `${KfGroup.GROUP_RX}`);\r\n        this.groupBg.setAttributeNS(null, 'x', '0');\r\n        this.container.appendChild(this.groupBg);\r\n        this.parentObj.container.appendChild(this.container);\r\n    }\r\n\r\n    public restorePlusBtn() {\r\n        if (typeof this.plusBtn !== 'undefined') {\r\n            this.plusBtn.restoreBtn();\r\n        }\r\n    }\r\n\r\n    public renderGroup() {\r\n        this.container = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n        this.container.setAttributeNS(null, 'id', `group${this.id}`);\r\n        if (this.parentObj instanceof KfTrack) {\r\n            this.posiY = 1;\r\n            if (typeof this.alignTarget !== 'undefined' && this.alignType === Animation.alignTarget.withEle) {\r\n                //find the aligned group\r\n                const alignWithGroup: KfGroup = this.fetchAlignWithGroup();\r\n\r\n                if (this.alignMerge) {\r\n                    //align to the lowest group\r\n                    const lowestGroupBBox: DOMRect = alignWithGroup.fetchFirstKf().parentObj.container.getBoundingClientRect();//fixed\r\n                    const transY: number = (this.parentObj.container.getBoundingClientRect().top - lowestGroupBBox.top) / state.zoomLevel + 2;\r\n                    this.posiY -= transY;\r\n                } else {\r\n                    //translate the omit in alignWith group (on the lowest level, like OS example)\r\n                    const lowestBranches: KfGroup[] = [];\r\n                    alignWithGroup.fetchLowestSubBranch(lowestBranches);\r\n                    const heightDiff: number = this.parentObj.trackPosiY - KfTrack.allTracks.get(alignWithGroup.targetTrackId).trackPosiY + KfTrack.TRACK_HEIGHT - KfGroup.TITLE_HEIHGT;\r\n                    lowestBranches.forEach((lowestGroupInAlignWith: KfGroup) => {\r\n                        if (lowestGroupInAlignWith.rendered) {\r\n                            lowestGroupInAlignWith.kfOmits.forEach((omit: KfOmit) => {\r\n                                const oriTrans: ICoord = Tool.extractTransNums(omit.container.getAttributeNS(null, 'transform'));\r\n                                console.log('test0: ', oriTrans.x);\r\n                                omit.updateTrans(oriTrans.x + KfGroup.PADDING, heightDiff / 2);\r\n                                // omit.createUseTag();\r\n                            })\r\n                        }\r\n                    })\r\n                }\r\n            }\r\n            let transX: number = this.parentObj.availableInsert;\r\n            if (this.preAniId !== '' && this.timingRef === TimingSpec.timingRef.previousStart) {\r\n                transX = Tool.extractTransNums(KfGroup.allAniGroups.get(this.preAniId).container.getAttributeNS(null, 'transform')).x;\r\n            }\r\n            this.parentObj.availableInsert = transX;//need to  test!!!!!!!!\r\n            this.translateContainer(transX, this.posiY);\r\n            this.parentObj.children.push(this);\r\n            this.idxInGroup = this.parentObj.children.length - 1;\r\n        }\r\n        if (this.hasOffset) {\r\n            this.drawOffset(this.delay, 100, KfGroup.GROUP_RX);\r\n            this.container.appendChild(this.offsetIllus);\r\n        }\r\n        this.drawGroupBg();\r\n\r\n        if (this.treeLevel === 1 && this.parentObj instanceof KfGroup) {\r\n            this.parentObj.container.insertBefore(this.container, this.parentObj.groupMenu.container);\r\n        } else {\r\n            if (this.treeLevel === 0 && !this.alignMerge) {\r\n                this.drawGroupMenu();\r\n                this.container.appendChild(this.groupMenu.container);\r\n                this.container.onmouseover = () => {\r\n                    if (typeof this.groupMenu !== 'undefined' && !state.mousemoving) {\r\n                        this.groupMenu.showMenu();\r\n                    }\r\n                }\r\n            }\r\n            this.parentObj.container.appendChild(this.container);\r\n        }\r\n\r\n        //update group title width\r\n        this.updateTitleWidth();\r\n\r\n        this.container.onmouseleave = (leaveEvt: any) => {\r\n            let flag: boolean = !this.isDragging\r\n            if (typeof sortableSvgTable.container !== 'undefined') {\r\n                flag = flag && !sortableSvgTable.container.contains(leaveEvt.toElement)\r\n            }\r\n            if (flag) {\r\n                //this is the original element the event handler was assigned to\r\n                var e = leaveEvt.relatedTarget;\r\n\r\n                while (e != null) {\r\n                    if (e == this.container) {\r\n                        return;\r\n                    }\r\n                    e = (<HTMLElement>e).parentNode;\r\n                }\r\n\r\n                this.transHideTitle();\r\n                if (this.treeLevel === 0 && typeof this.groupMenu !== 'undefined') {\r\n                    if (typeof this.groupMenu.menuListContainer === 'undefined') {\r\n                        this.groupMenu.hideMenu();\r\n                    } else {\r\n                        if (!this.groupMenu.menuListContainer.contains(leaveEvt.toElement))\r\n                            this.groupMenu.hideMenu();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public drawGroupMenu(): void {\r\n        this.groupMenu = new GroupMenu(KfGroup.allActions.get(this.aniId), this.id, this.aniId);\r\n        this.groupMenu.createAndRenderMenu();\r\n    }\r\n\r\n    public updateParentKfHasTiming(hasOffset: boolean, hasDuration: boolean): void {\r\n        this.kfHasOffset = hasOffset;\r\n        this.kfHasDuration = hasDuration;\r\n        if (this.parentObj instanceof KfGroup) {\r\n            if (this.parentObj.kfHasOffset !== hasOffset || this.parentObj.kfHasDuration !== hasDuration) {\r\n                this.parentObj.updateParentKfHasTiming(hasOffset, hasDuration);\r\n            }\r\n        }\r\n    }\r\n\r\n    public updateTitleWidth() {\r\n        if (typeof this.groupTitleContent !== 'undefined') {\r\n            const textBBox: DOMRect = this.groupTitleContent.getBoundingClientRect();\r\n            this.groupTitleBg.setAttributeNS(null, 'width', `${textBBox.width + 2 * KfGroup.GROUP_RX + KfGroup.TITLE_HEIHGT + KfGroup.PADDING}`);\r\n            this.groupSortBtn.setAttributeNS(null, 'transform', `translate(${textBBox.width + 2 * KfGroup.GROUP_RX + KfGroup.TITLE_HEIHGT + KfGroup.PADDING - KfGroup.TITLE_HEIHGT + 2},2)`)\r\n        }\r\n    }\r\n\r\n    public transShowTitle(): void {\r\n        if (typeof this.groupTitle !== 'undefined') {\r\n            const oriTransX: number = Tool.extractTransNums(this.groupTitle.getAttributeNS(null, 'transform')).x;\r\n            if (this.parentObj instanceof KfGroup) {\r\n                this.parentObj.transHideTitle();\r\n            }\r\n            this.groupTitle.setAttributeNS(null, 'transform', `translate(${oriTransX}, ${-KfGroup.TITLE_HEIHGT})`);\r\n        }\r\n    }\r\n\r\n    public transHideTitle(): void {\r\n        if (typeof this.groupTitle !== 'undefined') {\r\n            const oriTransX: number = Tool.extractTransNums(this.groupTitle.getAttributeNS(null, 'transform')).x;\r\n            this.groupTitle.setAttributeNS(null, 'transform', `translate(${oriTransX}, 2)`);\r\n        }\r\n        sortableSvgTable.removeTable();\r\n    }\r\n\r\n    public showTitle(): void {\r\n        if (typeof this.groupTitle !== 'undefined') {\r\n            this.groupTitle.setAttributeNS(null, 'opacity', '1');\r\n        }\r\n    }\r\n\r\n    public hideTitle(): void {\r\n        if (typeof this.groupTitle !== 'undefined') {\r\n            this.groupTitle.setAttributeNS(null, 'opacity', '0');\r\n        }\r\n    }\r\n\r\n    public showMenu(): void {\r\n        if (typeof this.groupMenu !== 'undefined') {\r\n            this.groupMenu.showMenu();\r\n        }\r\n    }\r\n\r\n    public hideMenu(): void {\r\n        if (typeof this.groupMenu !== 'undefined') {\r\n            this.groupMenu.hideMenu();\r\n        }\r\n    }\r\n\r\n    public bindTitleHover(): void {\r\n        this.groupTitle.onmouseover = (overEvt) => {\r\n            if (!state.mousemoving) {\r\n                hintTag.createHint({ x: overEvt.pageX, y: overEvt.pageY }, `Marks this group: ${this.fullTitle}`);\r\n            }\r\n        }\r\n        this.groupTitle.onmouseout = () => {\r\n            hintTag.removeHint();\r\n        }\r\n    }\r\n\r\n    public unbindTitleHover() {\r\n        this.groupTitle.onmouseover = null;\r\n        this.groupTitle.onmouseout = null;\r\n    }\r\n\r\n    public addGroupToPopLayerWhenDrag(): KfGroup[] {\r\n        this.container.setAttributeNS(null, '_transform', this.container.getAttributeNS(null, 'transform'));\r\n        const containerBBox: DOMRect = this.container.getBoundingClientRect();//fixed\r\n        this.parentObj.container.removeChild(this.container);\r\n        const popKfContainer: HTMLElement = document.getElementById(KfContainer.KF_POPUP);\r\n        const popKfContainerBbox: DOMRect = document.getElementById(KfContainer.KF_FG).getBoundingClientRect();//fixed\r\n        popKfContainer.appendChild(this.container);\r\n        //set new transform\r\n        this.translateContainer((containerBBox.left - popKfContainerBbox.left) / state.zoomLevel, KfGroup.TITLE_HEIHGT + (containerBBox.top - popKfContainerBbox.top) / state.zoomLevel);\r\n        //check whether there are aligned kf groups\r\n        const groupsAligned: KfGroup[] = [];\r\n        if (typeof this.alignId !== 'undefined') {\r\n            KfGroup.allAniGroups.forEach((aniGroup: KfGroup, tmpAniId: string) => {\r\n                if (tmpAniId !== this.aniId && aniGroup.alignTarget === this.alignId && aniGroup.alignType === Animation.alignTarget.withEle) {\r\n                    groupsAligned.push(aniGroup);\r\n                    aniGroup.container.setAttributeNS(null, '_transform', aniGroup.container.getAttributeNS(null, 'transform'));\r\n                    const tmpContainerBBox: DOMRect = aniGroup.container.getBoundingClientRect();//fixed\r\n                    aniGroup.parentObj.container.removeChild(aniGroup.container);\r\n                    popKfContainer.appendChild(aniGroup.container);\r\n                    aniGroup.translateContainer((tmpContainerBBox.left - popKfContainerBbox.left) / state.zoomLevel, (tmpContainerBBox.top - popKfContainerBbox.top) / state.zoomLevel);\r\n                }\r\n            })\r\n        }\r\n        return groupsAligned;\r\n    }\r\n\r\n    public reinsertGroupToItsParent(alignedGroups: KfGroup[]): void {\r\n        [this, ...alignedGroups].forEach((tmpKfGroup: KfGroup) => {\r\n            tmpKfGroup.container.setAttributeNS(null, 'transform', tmpKfGroup.container.getAttributeNS(null, '_transform'));\r\n            if (tmpKfGroup.treeLevel === 1 && tmpKfGroup.parentObj instanceof KfGroup) {\r\n                tmpKfGroup.parentObj.container.insertBefore(tmpKfGroup.container, tmpKfGroup.parentObj.groupMenu.container);\r\n            } else {\r\n                tmpKfGroup.parentObj.container.appendChild(tmpKfGroup.container);\r\n            }\r\n        })\r\n        this.kfOmits.forEach((omit: KfOmit) => {\r\n            if (typeof omit.useTag !== 'undefined') {\r\n                omit.updateUseTagPosi();\r\n            }\r\n        })\r\n    }\r\n\r\n    public bindGroupTitleDrag() {\r\n        this.groupTitle.onmousedown = (downEvt) => {\r\n            Reducer.triger(action.UPDATE_MOUSE_MOVING, true);\r\n            this.isDragging = true;\r\n            KfContainer.showPopCover();\r\n            hintTag.removeHint();\r\n            this.unbindTitleHover();\r\n            let oriMousePosiRecord: ICoord = { x: downEvt.pageX, y: downEvt.pageY };\r\n            let oriMousePosi: ICoord = { x: downEvt.pageX, y: downEvt.pageY };\r\n            //add the dragged group together with groups aligned to it to the popup layer\r\n            const groupsAligned: KfGroup[] = this.addGroupToPopLayerWhenDrag();\r\n\r\n            let updateSpec: boolean = false;\r\n            let actionType: string = '';\r\n            let actionInfo: any = {};\r\n            const preSibling: KfGroup = <KfGroup>this.parentObj.children[this.idxInGroup - 1];\r\n\r\n            //if dragging ani group, create hint lines\r\n            let hintLines: IntelliRefLine[] = [];\r\n            if (this.groupRef === 'root') {\r\n                hintLines = IntelliRefLine.hintAniPosis(this);\r\n            }\r\n\r\n            document.onmousemove = (moveEvt) => {\r\n                const currentMousePosi: ICoord = { x: moveEvt.pageX, y: moveEvt.pageY };\r\n                const posiDiff: ICoord = { x: (currentMousePosi.x - oriMousePosi.x) / state.zoomLevel, y: (currentMousePosi.y - oriMousePosi.y) / state.zoomLevel };\r\n                const posiDiffToOri: ICoord = { x: (currentMousePosi.x - oriMousePosiRecord.x) / state.zoomLevel, y: (currentMousePosi.y - oriMousePosiRecord.y) / state.zoomLevel };\r\n                const oriTrans: ICoord = Tool.extractTransNums(this.container.getAttributeNS(null, 'transform'));\r\n                this.translateContainer(oriTrans.x + posiDiff.x, oriTrans.y + posiDiff.y);\r\n                groupsAligned.forEach((alignedGroup: KfGroup) => {\r\n                    const tmpOriTrans: ICoord = Tool.extractTransNums(alignedGroup.container.getAttributeNS(null, 'transform'));\r\n                    alignedGroup.translateContainer(tmpOriTrans.x + posiDiff.x, tmpOriTrans.y + posiDiff.y);\r\n                })\r\n                if (this.idxInGroup > 0 && preSibling.rendered && this.groupRef !== 'root') {//group within animation\r\n                    [updateSpec, actionType, actionInfo] = this.dragInnerGroup(preSibling);\r\n                } else {\r\n                    [updateSpec, actionType, actionInfo] = this.dragAniGroup(posiDiffToOri);\r\n                    console.log('testing: ', updateSpec, actionType, actionInfo);\r\n                }\r\n                oriMousePosi = currentMousePosi;\r\n            }\r\n\r\n            document.onmouseup = () => {\r\n                // console.log('mouse up: ', updateSpec, actionType, actionInfo);\r\n                document.onmousemove = null;\r\n                document.onmouseup = null;\r\n                Reducer.triger(action.UPDATE_MOUSE_MOVING, false);\r\n                KfContainer.hidePopCover();\r\n                this.bindTitleHover();\r\n                this.isDragging = false;\r\n                if (!updateSpec) {\r\n                    hintLines.forEach((hl: IntelliRefLine) => {\r\n                        hl.removeHintLine();\r\n                    })\r\n                    this.reinsertGroupToItsParent(groupsAligned);\r\n                } else {\r\n                    //triger action\r\n                    State.tmpStateBusket.push({\r\n                        historyAction: { actionType: action.UPDATE_SPEC_ANIMATIONS, actionVal: JSON.stringify(state.spec.animations) },\r\n                        currentAction: { actionType: actionType, actionVal: actionInfo }\r\n                    })\r\n                    State.saveHistory();\r\n                    Reducer.triger(actionType, actionInfo);\r\n                }\r\n                document.getElementById(KfContainer.KF_POPUP).innerHTML = '';\r\n            }\r\n        }\r\n    }\r\n\r\n    public unbindGroupTitleDrag() {\r\n        this.groupTitle.onmousedown = null;\r\n    }\r\n\r\n    public createGroupTitle(): void {\r\n        const groupTitleWrapper: SVGGElement = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n        groupTitleWrapper.setAttributeNS(null, 'transform', `translate(${this.alignMerge ? this.offsetWidth + KfGroup.PADDING : this.offsetWidth}, 0)`);\r\n        this.groupTitle = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n        this.groupTitle.classList.add('kf-group-title', 'ease-transform', 'draggable-component');\r\n        // this.groupTitle.classList.add();\r\n        this.groupTitle.setAttributeNS(null, 'transform', 'translate(0, 2)');\r\n        this.groupTitleBg = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n        this.groupTitleBg.setAttributeNS(null, 'width', `${KfGroup.TITLE_CHAR_WIDTH * this.title.length + 2 * KfGroup.TITLE_PADDING + KfGroup.TITLE_HEIHGT + KfGroup.PADDING}`);\r\n        this.groupTitleBg.setAttributeNS(null, 'height', `${KfGroup.TITLE_HEIHGT + 2 * KfGroup.PADDING}`);\r\n        this.groupTitleBg.setAttributeNS(null, 'fill', '#676767');\r\n        this.groupTitleBg.setAttributeNS(null, 'rx', `${KfGroup.GROUP_RX}`);\r\n        this.groupTitle.appendChild(this.groupTitleBg);\r\n        this.groupTitleContent = document.createElementNS('http://www.w3.org/2000/svg', 'text');\r\n        this.groupTitleContent.innerHTML = this.title;\r\n        this.groupTitleContent.setAttributeNS(null, 'x', '6');\r\n        this.groupTitleContent.setAttributeNS(null, 'y', `${KfGroup.TITLE_HEIHGT - 4}`);\r\n        this.groupTitleContent.setAttributeNS(null, 'fill', '#fff');\r\n        this.groupTitleContent.classList.add('monospace-font');\r\n        this.groupTitleContent.setAttributeNS(null, 'font-size', '10pt');\r\n        this.groupTitle.appendChild(this.groupTitleContent);\r\n        this.bindTitleHover();\r\n        this.bindGroupTitleDrag();\r\n        groupTitleWrapper.appendChild(this.groupTitle);\r\n\r\n        this.groupSortBtn = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n        this.groupSortBtn.classList.add('clickable-component', 'title-btn');\r\n        this.groupSortBtn.setAttributeNS(null, 'transform', `translate(${KfGroup.TITLE_CHAR_WIDTH * this.title.length + KfGroup.TITLE_PADDING + KfGroup.TITLE_HEIHGT + 2},2)`)\r\n        const titleBtnBg: SVGCircleElement = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\r\n        const btnR: number = (KfGroup.TITLE_HEIHGT - 4) / 2;\r\n        titleBtnBg.setAttributeNS(null, 'cx', `${btnR}`);\r\n        titleBtnBg.setAttributeNS(null, 'cy', `${btnR}`);\r\n        titleBtnBg.setAttributeNS(null, 'r', `${btnR}`);\r\n        this.groupSortBtn.appendChild(titleBtnBg);\r\n        for (let i = 0; i < 3; i++) {\r\n            const tmpLine: SVGLineElement = document.createElementNS('http://www.w3.org/2000/svg', 'line');\r\n            tmpLine.setAttributeNS(null, 'stroke-linecap', 'round');\r\n            tmpLine.setAttributeNS(null, 'stroke', '#fff');\r\n            tmpLine.setAttributeNS(null, 'stroke-width', '1.4');\r\n            tmpLine.setAttributeNS(null, 'x1', `${(i + 2) * btnR / 5}`)\r\n            tmpLine.setAttributeNS(null, 'x2', `${(8 - i) * btnR / 5}`)\r\n            tmpLine.setAttributeNS(null, 'y1', `${(2 + i) * btnR / 3}`)\r\n            tmpLine.setAttributeNS(null, 'y2', `${(2 + i) * btnR / 3}`)\r\n            this.groupSortBtn.appendChild(tmpLine);\r\n        }\r\n        this.groupSortBtn.onmouseenter = (enterEvt) => {\r\n            this.unbindTitleHover();\r\n            this.unbindGroupTitleDrag();\r\n            if (!state.mousemoving) {\r\n                hintTag.createHint({ x: enterEvt.pageX, y: enterEvt.pageY }, 'sort data attributes');\r\n            }\r\n        }\r\n        this.groupSortBtn.onmouseleave = (leaveEvt) => {\r\n            hintTag.removeHint();\r\n            this.bindTitleHover();\r\n            this.bindGroupTitleDrag();\r\n        }\r\n        this.groupSortBtn.onclick = () => {\r\n            const btnBBox: DOMRect = this.groupSortBtn.getBoundingClientRect();\r\n            sortableSvgTable.createTable(\r\n                this.childrenRefValues, {\r\n                x: btnBBox.left,\r\n                y: btnBBox.top\r\n            }, this)\r\n        }\r\n        this.groupTitle.appendChild(this.groupSortBtn);\r\n\r\n\r\n        //add a title cover\r\n        if (this.alignMerge) {\r\n            this.groupTitleCover = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n            this.groupTitleCover.setAttributeNS(null, 'width', `${KfGroup.TITLE_CHAR_WIDTH * this.title.length + 2 * KfGroup.TITLE_PADDING + KfGroup.TITLE_HEIHGT + KfGroup.PADDING}`);\r\n            this.groupTitleCover.setAttributeNS(null, 'height', '34');\r\n            this.groupTitleCover.setAttributeNS(null, 'y', '1');\r\n            this.groupTitleCover.setAttributeNS(null, 'rx', `${KfGroup.GROUP_RX}`);\r\n            groupTitleWrapper.appendChild(this.groupTitleCover);\r\n        }\r\n        this.container.appendChild(groupTitleWrapper);\r\n    }\r\n\r\n    /**\r\n     * draw group bg as well as title\r\n     */\r\n    public drawGroupBg(): void {\r\n        this.createGroupTitle();\r\n        this.groupBg = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n        this.groupBg.setAttributeNS(null, 'stroke', this.alignMerge ? '#00000000' : '#898989');\r\n        this.groupBg.setAttributeNS(null, 'stroke-width', '1');\r\n        this.groupBg.setAttributeNS(null, 'rx', `${KfGroup.GROUP_RX}`);\r\n        this.groupBg.setAttributeNS(null, 'x', `${this.offsetWidth}`);\r\n        this.bindBgHover();\r\n        this.container.appendChild(this.groupBg);\r\n    }\r\n\r\n    public bindBgHover() {\r\n        this.groupBg.onmouseover = () => {\r\n            if (!state.mousemoving) {\r\n                this.transShowTitle();\r\n            }\r\n        }\r\n    }\r\n\r\n    public unbindBgHover() {\r\n        this.groupBg.onmouseover = null;\r\n    }\r\n\r\n    /**\r\n     * returns: updateSpec:boolean, actionType: string, actionInfo: any\r\n     */\r\n    public dragAniGroup(posiDiffToOri: ICoord): [boolean, string, any] {\r\n        const currentAniId: string = this.aniId;\r\n        const sepCurrentAniMarks: { dataMarks: string[], nonDataMarks: string[] } = Util.separateDataAndNonDataMarks(KfGroup.allAniGroupInfo.get(currentAniId).marks);\r\n        const currentGBBox: DOMRect = this.groupBg.getBoundingClientRect();//fixed\r\n        const currentGPosi: ICoord = { x: currentGBBox.left, y: currentGBBox.top };\r\n        let targetAni: { targetAniId: string, currentAniId: string, actionType: string };\r\n        for (let i = 0, len = [...KfGroup.allAniGroups].length; i < len; i++) {\r\n            const aniGroup: KfGroup = [...KfGroup.allAniGroups][i][1];\r\n            if (this.id !== aniGroup.id) {\r\n                const firstKf: KfItem = aniGroup.fetchFirstKf();\r\n                const alignTargetGroup: boolean = typeof KfItem.allKfInfo.get(firstKf.id).alignTo === 'undefined';\r\n                //judge the relative position between this one and aniGroup & the first Kf in aniGroup\r\n                const aniGroupBBox: DOMRect = aniGroup.groupBg.getBoundingClientRect();//fixed\r\n                const firstKfBBox: DOMRect = firstKf.container.getBoundingClientRect();//fixed\r\n                const targetAniId: string = aniGroup.aniId;\r\n                const sepTargetAniMarks: { dataMarks: string[], nonDataMarks: string[] } = Util.separateDataAndNonDataMarks(KfGroup.allAniGroupInfo.get(targetAniId).marks);\r\n                //add orange lines according to drag position\r\n                // const currentKfOffsetW: number = KfGroup.BASIC_OFFSET_DURATION_W > this.offsetWidth ? KfGroup.BASIC_OFFSET_DURATION_W : this.offsetWidth;\r\n                if (typeof this.delay !== 'undefined' && this.delay > 0 && posiDiffToOri.x < 0) {\r\n                    this.hideOffset();\r\n                    targetAni = { targetAniId: targetAniId, currentAniId: currentAniId, actionType: action.UPDATE_ANI_ALIGN_AFTER_ANI };//after group has higher priority\r\n                } else if (typeof this.delay !== 'undefined' && this.delay > 0 && posiDiffToOri.x >= 0) {\r\n                    this.showOffset();\r\n                }\r\n                if (currentGPosi.x >= aniGroupBBox.right && currentGPosi.x <= aniGroupBBox.right + (6 * state.zoomLevel) && currentGPosi.y >= aniGroupBBox.top) {\r\n                    targetAni = { targetAniId: targetAniId, currentAniId: currentAniId, actionType: action.UPDATE_ANI_ALIGN_AFTER_ANI_WITH_DELAY };//after group has higher priority\r\n                    hintDrop.hintInsert({ x: aniGroupBBox.right, y: aniGroupBBox.top }, aniGroupBBox.height / state.zoomLevel, true, true);\r\n                    break;\r\n                } else {\r\n                    if (currentGPosi.x >= aniGroupBBox.left && currentGPosi.x < aniGroupBBox.left + (6 * state.zoomLevel) && currentGPosi.y >= aniGroupBBox.top) {\r\n                        targetAni = { targetAniId: targetAniId, currentAniId: currentAniId, actionType: action.UPDATE_ANI_ALIGN_WITH_ANI };\r\n                        hintDrop.hintInsert({ x: aniGroupBBox.left, y: aniGroupBBox.top }, aniGroupBBox.height / state.zoomLevel, true, true);\r\n                    } else if (currentGPosi.x >= firstKfBBox.left && currentGPosi.x < firstKfBBox.left + (30 * state.zoomLevel) && alignTargetGroup) {\r\n                        targetAni = { targetAniId: targetAniId, currentAniId: currentAniId, actionType: (sepCurrentAniMarks.nonDataMarks.length > 0 || sepTargetAniMarks.nonDataMarks.length > 0) ? action.UPDATE_ANI_ALIGN_WITH_ANI : action.UPDATE_ANI_ALIGN_WITH_KF };\r\n                        hintDrop.hintAlign({ x: firstKfBBox.left, y: firstKfBBox.top }, firstKfBBox.height / state.zoomLevel, true);\r\n                    } else if (currentGPosi.x >= firstKfBBox.right && currentGPosi.x < firstKfBBox.right + (30 * state.zoomLevel) && alignTargetGroup) {\r\n                        targetAni = { targetAniId: targetAniId, currentAniId: currentAniId, actionType: (sepCurrentAniMarks.nonDataMarks.length > 0 || sepTargetAniMarks.nonDataMarks.length > 0) ? action.UPDATE_ANI_ALIGN_AFTER_ANI_WITH_DELAY : action.UPDATE_ANI_ALIGN_AFTER_KF };\r\n                        hintDrop.hintAlign({ x: firstKfBBox.right, y: firstKfBBox.top }, firstKfBBox.height / state.zoomLevel, true);\r\n                    }\r\n                }\r\n                // }\r\n            }\r\n        }\r\n        if (typeof targetAni === 'undefined') {\r\n            hintDrop.removeHintLine();\r\n            return [false, '', {}];\r\n        } else {//triger action\r\n            return [true, targetAni.actionType, { targetAniId: targetAni.targetAniId, currentAniId: targetAni.currentAniId }];\r\n        }\r\n    }\r\n\r\n    public dragInnerGroup(preSibling: KfGroup): [boolean, string, any] {\r\n        let updateSpec: boolean = false;\r\n        let actionType: string = '';\r\n        let actionInfo: any = {};\r\n        const currentGroupBBox: DOMRect = this.groupBg.getBoundingClientRect();//fixed\r\n        const preGroupBBox: DOMRect = preSibling.groupBg.getBoundingClientRect();//fixed\r\n        const posiYDiff: number = currentGroupBBox.top - preGroupBBox.top;\r\n        const posiXRightDiff: number = (currentGroupBBox.left - preGroupBBox.right) / state.zoomLevel;\r\n        const posiXLeftDiff: number = (currentGroupBBox.left - preGroupBBox.left) / state.zoomLevel;\r\n        const currentKfOffsetW: number = KfGroup.BASIC_OFFSET_DURATION_W > this.offsetWidth ? KfGroup.BASIC_OFFSET_DURATION_W : this.offsetWidth;\r\n        let correctTimingRef: boolean = true;\r\n        let compareXDiff: number = posiXRightDiff;\r\n        let updateTimingRef: string = '';\r\n        if (posiYDiff <= currentGroupBBox.height) {//timing ref should be start after\r\n            if (this.timingRef !== TimingSpec.timingRef.previousEnd) {\r\n                correctTimingRef = false;\r\n                updateTimingRef = TimingSpec.timingRef.previousEnd;\r\n            }\r\n        } else {//create new track and change timing ref to start with\r\n            if (this.timingRef !== TimingSpec.timingRef.previousStart) {\r\n                correctTimingRef = false;\r\n                updateTimingRef = TimingSpec.timingRef.previousStart;\r\n            }\r\n            compareXDiff = posiXLeftDiff;\r\n        }\r\n        if (compareXDiff >= currentKfOffsetW) {//show delay\r\n            preSibling.cancelHighlightGroup();\r\n            if (!this.hasOffset) {//add default delay\r\n                if (typeof this.offsetIllus === 'undefined') {\r\n                    this.drawOffset(KfGroup.minOffset, currentGroupBBox.height / state.zoomLevel, KfGroup.GROUP_RX, true);\r\n                }\r\n                this.container.prepend(this.offsetIllus);\r\n\r\n                updateSpec = true;\r\n                actionInfo.aniId = this.aniId;\r\n                actionInfo.groupRef = this.groupRef;\r\n                actionInfo.delay = 300;\r\n                if (correctTimingRef) {\r\n                    actionType = action.UPDATE_DELAY_BETWEEN_GROUP;\r\n                } else {\r\n                    actionType = action.UPDATE_DELAY_TIMING_REF_BETWEEN_GROUP;\r\n                    actionInfo.ref = updateTimingRef;\r\n                }\r\n            } else {\r\n                this.showOffset();\r\n                if (correctTimingRef) {\r\n                    updateSpec = false\r\n                    actionInfo = {};\r\n                } else {\r\n                    updateSpec = true;\r\n                    actionType = action.UPDATE_TIMEING_REF_BETWEEN_GROUP;\r\n                    actionInfo.aniId = this.aniId;\r\n                    actionInfo.groupRef = this.groupRef;\r\n                    actionInfo.ref = updateTimingRef;\r\n                }\r\n            }\r\n        } else if (compareXDiff < currentKfOffsetW && compareXDiff >= 0) {//remove delay\r\n            preSibling.cancelHighlightGroup();\r\n            if (this.hasOffset) {//remove delay\r\n                this.hideOffset();\r\n\r\n                updateSpec = true;\r\n                actionInfo.aniId = this.aniId;\r\n                actionInfo.groupRef = this.groupRef;\r\n                if (correctTimingRef) {\r\n                    actionType = action.REMOVE_DELAY_BETWEEN_GROUP;\r\n                } else {\r\n                    actionType = action.REMOVE_DELAY_UPDATE_TIMING_REF_GROUP;\r\n                    actionInfo.ref = updateTimingRef;\r\n                }\r\n            } else {\r\n                if (typeof this.offsetIllus !== 'undefined' && this.container.contains(this.offsetIllus)) {\r\n                    this.container.removeChild(this.offsetIllus);\r\n                }\r\n                if (correctTimingRef) {\r\n                    updateSpec = false\r\n                    actionInfo = {};\r\n                } else {\r\n                    updateSpec = true;\r\n                    actionType = action.UPDATE_TIMEING_REF_BETWEEN_GROUP;\r\n                    actionInfo.aniId = this.aniId;\r\n                    actionInfo.groupRef = this.groupRef;\r\n                    actionInfo.ref = updateTimingRef;\r\n                }\r\n            }\r\n        } else {//\r\n            if (posiYDiff <= currentGroupBBox.height) {//timing ref should be start after\r\n                preSibling.highlightGroup();\r\n                updateSpec = true;\r\n                actionType = action.MERGE_GROUP;\r\n                actionInfo.aniId = this.aniId;\r\n                actionInfo.groupRef = this.groupRef;\r\n            } else {//create new track and change timing ref to start with\r\n                preSibling.cancelHighlightGroup();\r\n                if (this.hasOffset) {//remove delay\r\n                    this.hideOffset();\r\n\r\n                    updateSpec = true;\r\n                    actionInfo.aniId = this.aniId;\r\n                    actionInfo.groupRef = this.groupRef;\r\n                    if (correctTimingRef) {\r\n                        actionType = action.REMOVE_DELAY_BETWEEN_GROUP;\r\n                    } else {\r\n                        actionType = action.REMOVE_DELAY_UPDATE_TIMING_REF_GROUP;\r\n                        actionInfo.ref = updateTimingRef;\r\n                    }\r\n                } else {\r\n                    if (typeof this.offsetIllus !== 'undefined' && this.container.contains(this.offsetIllus)) {\r\n                        this.container.removeChild(this.offsetIllus);\r\n                    }\r\n                    if (correctTimingRef) {\r\n                        updateSpec = false\r\n                        actionInfo = {};\r\n                    } else {\r\n                        updateSpec = true;\r\n                        actionType = action.UPDATE_TIMEING_REF_BETWEEN_GROUP;\r\n                        actionInfo.aniId = this.aniId;\r\n                        actionInfo.groupRef = this.groupRef;\r\n                        actionInfo.ref = updateTimingRef;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return [updateSpec, actionType, actionInfo];\r\n    }\r\n\r\n    public fetchAlignWithGroup(): KfGroup {\r\n        let alignWithGroup: KfGroup;\r\n        KfGroup.allAniGroups.forEach((aniGroup: KfGroup, aniId: string) => {\r\n            if (aniGroup.alignId === this.alignTarget) {\r\n                alignWithGroup = aniGroup;\r\n            }\r\n            // if (Tool.arrayContained(aniGroup.alignLines, this.alignLines)) {\r\n            //     alignWithGroup = aniGroup;\r\n            // }\r\n        })\r\n        return alignWithGroup;\r\n    }\r\n\r\n    public fetchAllKfs(): KfItem[] {\r\n        const allKfs: KfItem[] = [];\r\n        this.children.forEach((c: KfItem | KfOmit) => {\r\n            if (c instanceof KfItem) {\r\n                allKfs.push(c);\r\n            }\r\n        })\r\n        return allKfs;\r\n    }\r\n\r\n    public fetchFirstKf(): KfItem {\r\n        if (this.children[0] instanceof KfItem) {\r\n            return this.children[0];\r\n        } else {\r\n            return (<KfGroup>this.children[0]).fetchFirstKf();\r\n        }\r\n    }\r\n    public fetchAniGroup(): KfGroup {\r\n        if (this.parentObj instanceof KfTrack) {\r\n            return this;\r\n        } else {\r\n            return this.parentObj.fetchAniGroup();\r\n        }\r\n    }\r\n\r\n    public hideOffset() {\r\n        this.offsetIllus.setAttributeNS(null, 'opacity', '0');\r\n    }\r\n\r\n    public showOffset() {\r\n        this.offsetIllus.setAttributeNS(null, 'opacity', '1');\r\n    }\r\n\r\n    public highlightGroup() {\r\n        this.groupBg.classList.add('highlight-kf');\r\n    }\r\n\r\n    public cancelHighlightGroup() {\r\n        this.groupBg.classList.remove('highlight-kf');\r\n    }\r\n\r\n    public showGroupBg() {\r\n        this.groupBg.setAttributeNS(null, 'stroke', '#898989');\r\n        if (this.groupBg.getAttributeNS(null, 'fill') === 'none') {\r\n            this.groupBg.setAttributeNS(null, 'fill', this.groupBg.getAttributeNS(null, '_fill'));\r\n        }\r\n        this.groupBg.setAttributeNS(null, 'fill-opacity', '0.4');\r\n    }\r\n\r\n    public hideGroupBg() {\r\n        this.groupBg.setAttributeNS(null, 'stroke', '#00000000');\r\n        this.groupBg.setAttributeNS(null, '_fill', this.groupBg.getAttributeNS(null, 'fill'));\r\n        this.groupBg.setAttributeNS(null, 'fill', 'none');\r\n        this.groupBg.setAttributeNS(null, 'fill-opacity', undefined);\r\n    }\r\n\r\n    public rerenderGroupBg() {\r\n        this.groupBg.setAttributeNS(null, 'fill-opacity', '1');\r\n    }\r\n\r\n    /**\r\n     * when this group translates, translate the aligned elements: refLine, kfs and their group\r\n     * @param transX \r\n     */\r\n    public translateWholeGroup(transX: number, currentOneIncluded: boolean = false) {\r\n        if (currentOneIncluded) {\r\n            const oriTrans: ICoord = Tool.extractTransNums(this.container.getAttributeNS(null, 'transform'));\r\n            this.translateContainer(oriTrans.x + transX, oriTrans.y);\r\n        }\r\n        //find all group ids in current group\r\n        let allGroupIds: number[] = [];\r\n        this.findAllGroups(allGroupIds);\r\n\r\n        //according to reflines in this group, find all related kfs, then find their groups, then translate those groups\r\n        const allAlignedKfs: Set<number> = new Set();\r\n        this.alignLines.forEach((lId: number) => {\r\n            const refLine: IntelliRefLine = IntelliRefLine.allLines.get(lId);\r\n            //translate the line\r\n            Tool.updateTranslate(refLine.line, { x: transX, y: 0 });\r\n            IntelliRefLine.kfLineMapping.forEach((value: { theOtherEnd: number, lineId: number }, kfId: number) => {\r\n                if (value.lineId === lId) {\r\n                    allAlignedKfs.add(kfId);\r\n                    allAlignedKfs.add(value.theOtherEnd);\r\n                }\r\n            })\r\n        })\r\n\r\n        //find their kfgroups\r\n        let targetTransGroupIds: number[] = [];\r\n        [...allAlignedKfs].forEach((kfId: number) => {\r\n            const tmpGroup: KfGroup = KfItem.allKfItems.get(kfId).parentObj;\r\n            const tmpGroupId: number = tmpGroup.id;\r\n            if (!allGroupIds.includes(tmpGroupId) && !targetTransGroupIds.includes(tmpGroupId)) {\r\n                targetTransGroupIds.push(tmpGroupId);\r\n                // targetTransGroups.push(tmpGroup);\r\n                Tool.updateTranslate(tmpGroup.container, { x: transX, y: 0 });\r\n            }\r\n        })\r\n    }\r\n\r\n    public findAllGroups(idArr: number[]): void {\r\n        idArr.push(this.id);\r\n        this.children.forEach((c: any) => {\r\n            if (c instanceof KfGroup) {\r\n                c.findAllGroups(idArr);\r\n            }\r\n        })\r\n    }\r\n\r\n    public findLastKf(): KfItem {\r\n        let lastKf: KfItem;\r\n        if (this.children[0] instanceof KfItem) {\r\n            this.children.forEach((c: KfItem | KfOmit) => {\r\n                if (c instanceof KfItem) {\r\n                    lastKf = c;\r\n                }\r\n            })\r\n        }\r\n        return lastKf;\r\n    }\r\n\r\n    /**\r\n     * set the translate value of the group container, translate the use tag of the omit if there is one\r\n     * @param x \r\n     * @param y \r\n     */\r\n    public translateContainer(x: number, y: number) {\r\n        this.container.setAttributeNS(null, 'transform', `translate(${x} ${y})`);\r\n        this.kfOmits.forEach((omit: KfOmit) => {\r\n            if (typeof omit.useTag !== 'undefined') {\r\n                omit.updateUseTagPosi();\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * translate from a given kf in group, update size of this group, and size and position of siblings and parents\r\n     * @param startTransItem \r\n     * @param transX \r\n     * @param updateAlignedKfs \r\n     */\r\n    public translateGroup(startTransItem: KfItem | KfOmit, transX: number, updateAlignedKfs: boolean, updateStartItem: boolean, updateStartItemAligned: boolean, extraInfo: { lastItem: boolean, extraWidth: number } = { lastItem: false, extraWidth: 0 }): void {\r\n        // console.log('translating group: ', this.container, this.children, startTransItem.container, transX, extraInfo);\r\n        //translate kfitems after the input one within the same group\r\n        let currentTransX: number = 0;\r\n        const currentIdxInGroup: number = startTransItem.idxInGroup;\r\n        if (!extraInfo.lastItem) {\r\n            currentTransX = Tool.extractTransNums(startTransItem.container.getAttributeNS(null, 'transform')).x;\r\n        } else {\r\n            currentTransX = Tool.extractTransNums(startTransItem.container.getAttributeNS(null, 'transform')).x + (startTransItem.container.getBoundingClientRect().width / state.zoomLevel);//fixed\r\n        }\r\n        let count: number = 0;\r\n        let comingThroughOmit: boolean = false;\r\n        let cameThroughOmit: KfOmit;\r\n        this.children.forEach((k: KfItem | KfOmit) => {\r\n            // console.log('testing translate : ', k.container, k);\r\n            if (k.rendered) {\r\n                const tmpTrans: ICoord = Tool.extractTransNums(k.container.getAttributeNS(null, 'transform'));\r\n                const tmpIdxInGroup: number = k.idxInGroup;\r\n                if (updateStartItem) {//need to update startitem and its aligned elements too\r\n                    if ((tmpTrans.x >= currentTransX || tmpIdxInGroup >= currentIdxInGroup) && !(count === 0 && k instanceof KfOmit)) {\r\n                        k.translateContainer(tmpTrans.x + transX, tmpTrans.y);\r\n                        if (k instanceof KfItem) {\r\n                            k.transOmitsWithItem();\r\n                        }\r\n                        if (k instanceof KfItem && updateAlignedKfs) {\r\n                            k.translateAlignedGroups(transX, updateAlignedKfs);\r\n                        }\r\n                        count++;\r\n                    }\r\n                } else {//dont update startitem\r\n                    if (updateStartItemAligned) {//update its aligned elements\r\n                        if ((tmpTrans.x >= currentTransX || tmpIdxInGroup >= currentIdxInGroup) && !(count === 0 && k instanceof KfOmit)) {\r\n                            if (k.id !== startTransItem.id) {\r\n                                k.translateContainer(tmpTrans.x + transX, tmpTrans.y);\r\n                                if (k instanceof KfItem) {\r\n                                    k.transOmitsWithItem();\r\n                                }\r\n                            }\r\n                            if (k instanceof KfItem && updateAlignedKfs) {\r\n                                k.translateAlignedGroups(transX, updateAlignedKfs);\r\n                            }\r\n                            count++;\r\n                        }\r\n                    } else {\r\n                        if (k.id !== startTransItem.id && (tmpTrans.x >= currentTransX || tmpIdxInGroup >= currentIdxInGroup)) {\r\n                            // console.log('translating kf: ', k.container, tmpTrans.x + transX, transX, tmpTrans.x);\r\n                            k.translateContainer(tmpTrans.x + transX, tmpTrans.y);\r\n                            if (k instanceof KfItem) {\r\n                                k.transOmitsWithItem();\r\n                                if (updateAlignedKfs) {\r\n                                    k.translateAlignedGroups(transX, updateAlignedKfs);\r\n                                }\r\n                            }\r\n                            count++;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (updateStartItem) {\r\n                if (k instanceof KfOmit) {\r\n                    comingThroughOmit = true;\r\n                    cameThroughOmit = k;\r\n                    transX += k.oWidth + KfGroup.PADDING;\r\n                } else if (k instanceof KfItem && comingThroughOmit) {\r\n                    comingThroughOmit = false;\r\n                    const omitWidth: number = typeof cameThroughOmit === 'undefined' ? KfOmit.OMIT_WIDTH : cameThroughOmit.oWidth;\r\n                    transX -= (omitWidth + KfGroup.PADDING);\r\n                }\r\n            }\r\n\r\n        })\r\n        // }\r\n        //update the group size and position\r\n        let extraWidth: number = extraInfo.lastItem ? extraInfo.extraWidth : 0;\r\n        let [diffX, currentGroupWidth, childHeight] = this.updateSize(extraWidth);\r\n        const oriTrans: ICoord = Tool.extractTransNums(this.container.getAttributeNS(null, 'transform'));\r\n        this.translateContainer(oriTrans.x + diffX, oriTrans.y);\r\n\r\n        //update parent group and siblings\r\n        this.updateSiblingAndParentSizePosi(transX, updateAlignedKfs);\r\n    }\r\n\r\n    public updateSiblingAndParentSizePosi(transX: number, updateAlignedKfs: boolean) {\r\n        const currentGroupBBox: DOMRect = this.container.getBoundingClientRect();//fixed\r\n        this.parentObj.children.forEach((c: KfGroup | KfOmit) => {\r\n            if (c.rendered) {\r\n                const tmpGroupBBox: DOMRect = c.container.getBoundingClientRect();//fixed\r\n                if (tmpGroupBBox.left >= currentGroupBBox.left && c.id !== this.id) {\r\n                    if (c instanceof KfOmit || (c instanceof KfGroup && c.rendered)) {\r\n                        const tmpTrans: ICoord = Tool.extractTransNums(c.container.getAttributeNS(null, 'transform'));\r\n                        // console.log('trans child in sibling: ', c.container, tmpTrans.x + transX, transX);\r\n                        c.translateContainer(tmpTrans.x + transX, tmpTrans.y);\r\n\r\n                        if (c instanceof KfGroup) {\r\n                            //translate plus btn is there is one\r\n                            // console.log('translating sibling: ', c, c.plusBtn, typeof c.plusBtn);\r\n                            if (typeof c.plusBtn !== 'undefined') {\r\n                                c.plusBtn.translateBtn(transX);\r\n                            }\r\n                            if (c.children[0] instanceof KfItem && updateAlignedKfs) {//need to update the aligned kfs and their group\r\n                                c.children.forEach((cc: KfItem | KfOmit) => {\r\n                                    if (cc instanceof KfItem) {\r\n                                        const tmpAlignTargetLeft: number = cc.kfBg.getBoundingClientRect().left;//fixed\r\n                                        const tmpAlignTargetRight: number = cc.container.getBoundingClientRect().right;//fixed\r\n                                        if (typeof KfItem.allKfInfo.get(cc.id).alignWithKfs !== 'undefined') {\r\n                                            KfItem.allKfInfo.get(cc.id).alignWithKfs.forEach((kfId: number) => {\r\n                                                const tmpKfItem: KfItem = KfItem.allKfItems.get(kfId);\r\n                                                const tmpKfItemInfo: IKeyframe = KfItem.allKfInfo.get(kfId);\r\n                                                if (typeof tmpKfItem !== 'undefined') {\r\n                                                    const tmpKfItemBBox: DOMRect = tmpKfItem.container.getBoundingClientRect();//fixed\r\n                                                    if (tmpKfItemInfo.timingRef === TimingSpec.timingRef.previousEnd) {\r\n                                                        if (tmpKfItemBBox.left !== tmpAlignTargetRight) {//this kf together with its group need to be updated\r\n                                                            tmpKfItem.parentObj.translateGroup(tmpKfItem, (tmpAlignTargetRight - tmpKfItemBBox.left) / state.zoomLevel, false, true, true);\r\n                                                        }\r\n                                                    } else {\r\n                                                        if (tmpKfItemBBox.left !== tmpAlignTargetLeft) {//this kf together with its group need to be updated\r\n                                                            tmpKfItem.parentObj.translateGroup(tmpKfItem, (tmpAlignTargetLeft - tmpKfItemBBox.left) / state.zoomLevel, false, true, true);\r\n                                                        }\r\n                                                    }\r\n                                                }\r\n                                            })\r\n                                            IntelliRefLine.updateLine(cc.id);//cc is a alignwith kf, update refline\r\n                                        }\r\n                                    }\r\n                                })\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        })\r\n        //update size and position of parent\r\n        if (this.parentObj instanceof KfGroup) {\r\n            this.parentObj.updateSize();\r\n            this.parentObj.updateSiblingAndParentSizePosi(transX, updateAlignedKfs);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * for merged aligned groups\r\n     * @param extraWidth : width in visual pixel level\r\n     */\r\n    public extendSize(extraWidth: number): void {\r\n        this.groupBg.setAttributeNS(null, 'width', `${parseFloat(this.groupBg.getAttributeNS(null, 'width')) + (extraWidth / state.zoomLevel)}`);\r\n        //update available insert and groups in the tracks which current group prossesses\r\n        if (this.parentObj instanceof KfTrack) {\r\n            this.updateParentTrackInsert();\r\n        }\r\n    }\r\n\r\n    public updateSize(extraWidth: number = 0): [number, number, number] {\r\n        // console.log('updating size: ', this.container, extraWidth);\r\n        //get size of all children (kfgroup or kfitem)\r\n        let maxBoundry: {\r\n            top: number\r\n            right: number\r\n            bottom: number\r\n            left: number\r\n        } = { top: 100000, right: 0, bottom: 0, left: 100000 }\r\n        //the first child within group should have the translate as KfGroup.PADDING\r\n        let diffX: number = 0;\r\n        if (this.children[0] instanceof KfItem) {\r\n            const currentTransX: number = Tool.extractTransNums(this.children[0].container.getAttributeNS(null, 'transform')).x;\r\n            diffX = this.hasOffset ? currentTransX - KfGroup.PADDING - this.offsetWidth : currentTransX - KfGroup.PADDING;\r\n        }\r\n        let childHasHiddenDuration: boolean = false;\r\n        // let tmpRightBoundary: number = 0;\r\n        this.children.forEach((c: KfGroup | KfItem | KfOmit, idx: number) => {\r\n            if (typeof c.container !== 'undefined') {\r\n                if (c instanceof KfItem || c instanceof KfOmit) {\r\n                    if (c instanceof KfItem && c.hasHiddenDuration) {\r\n                        childHasHiddenDuration = true;\r\n                    }\r\n                    const currentTrans: ICoord = Tool.extractTransNums(c.container.getAttributeNS(null, 'transform'));\r\n                    // console.log('trasnlateing in update size: ', c.container, currentTrans.x, diffX, currentTrans.x - diffX);\r\n                    console.log('t5');\r\n                    // if(c instanceof KfOmit){\r\n                    //     diffX -= KfGroup.PADDING;\r\n                    // }\r\n                    c.translateContainer(currentTrans.x - diffX, currentTrans.y);\r\n                    if (c instanceof KfItem) {\r\n                        c.transOmitsWithItem();\r\n                    }\r\n                }\r\n                let countingBBox: boolean = true;//check whether this child is counted for calculating bbox\r\n                let kfsAlignToCurrentKf: KfItem[] = [];\r\n                if (c instanceof KfItem) {\r\n                    countingBBox = c.renderWhenZooming;\r\n                    if (typeof KfItem.allKfInfo.get(c.id) !== 'undefined') {\r\n                        if (typeof KfItem.allKfInfo.get(c.id).alignWithKfs !== 'undefined' && idx === this.children.length - 1) {\r\n                            KfItem.allKfInfo.get(c.id).alignWithKfs.forEach((kfId: number) => {\r\n                                const kfAligned: KfItem = KfItem.allKfItems.get(kfId);\r\n                                if (typeof kfId !== 'undefined' && typeof kfAligned !== 'undefined') {\r\n                                    if (kfAligned.parentObj.alignMerge) {\r\n                                        kfsAlignToCurrentKf.push(kfAligned);\r\n                                    }\r\n                                }\r\n                            })\r\n                        }\r\n                    }\r\n                }\r\n                if (countingBBox) {\r\n                    const tmpBBox: DOMRect = c instanceof KfGroup ? c.groupBg.getBoundingClientRect() : c.container.getBoundingClientRect();//fixed\r\n                    if (tmpBBox.top < maxBoundry.top && !(c instanceof KfOmit)) {\r\n                        maxBoundry.top = tmpBBox.top;\r\n                    }\r\n                    if (tmpBBox.right > maxBoundry.right) {\r\n                        maxBoundry.right = tmpBBox.right;\r\n                        // tmpRightBoundary = tmpBBox.right;\r\n                        if (idx === this.children.length - 1) {\r\n                            kfsAlignToCurrentKf.forEach((kfAligned: KfItem) => {\r\n                                maxBoundry.right += kfAligned.container.getBoundingClientRect().width;\r\n                            })\r\n                        }\r\n                    }\r\n                    if (tmpBBox.bottom > maxBoundry.bottom && !(c instanceof KfOmit)) {\r\n                        maxBoundry.bottom = tmpBBox.bottom;\r\n                    }\r\n                    if (tmpBBox.left < maxBoundry.left) {\r\n                        maxBoundry.left = tmpBBox.left;\r\n                    }\r\n                }\r\n            }\r\n        })\r\n\r\n        //check for merged alignto kfs\r\n\r\n        let currentGroupWidth: number = (maxBoundry.right - maxBoundry.left) / state.zoomLevel + 2 * KfGroup.PADDING + extraWidth;\r\n        let childHeight: number = (maxBoundry.bottom - maxBoundry.top) / state.zoomLevel + 2 * KfGroup.PADDING;\r\n        if (childHasHiddenDuration) {\r\n            childHeight -= KfTimingIllus.EXTRA_HEIGHT;\r\n        }\r\n        if (childHeight < 0) {\r\n            childHeight = 0;\r\n        }\r\n        if (currentGroupWidth < 0) {\r\n            currentGroupWidth = 0;\r\n        }\r\n\r\n        //update size\r\n        this.groupBg.setAttributeNS(null, 'height', `${childHeight}`);\r\n        this.groupBg.setAttributeNS(null, 'width', `${currentGroupWidth}`);\r\n        if (this.hasOffset) {\r\n            this.updateOffset(childHeight);\r\n            currentGroupWidth += this.offsetWidth;\r\n        }\r\n\r\n        //update available insert and groups in the tracks which current group prossesses\r\n        if (this.parentObj instanceof KfTrack) {\r\n            this.updateParentTrackInsert();\r\n        }\r\n\r\n        return [diffX, currentGroupWidth, childHeight];\r\n    }\r\n\r\n    public updateParentTrackInsert() {\r\n        if (typeof KfTrack.aniTrackMapping.get(this.aniId) !== 'undefined') {\r\n            [...KfTrack.aniTrackMapping.get(this.aniId)].forEach((kfTrack: KfTrack) => {\r\n                const tmpBBox: DOMRect = this.container.getBoundingClientRect();//fixed\r\n                const rightBoundary: number = tmpBBox.right;\r\n                const kftStart: number = document.getElementById(KfContainer.KF_BG).getBoundingClientRect().left;//fixed\r\n                if ((rightBoundary - kftStart) / state.zoomLevel > kfTrack.availableInsert) {\r\n                    kfTrack.availableInsert = (rightBoundary - kftStart) / state.zoomLevel;\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    public updateGroupPosiAndSize(lastGroupStart: number, lastGroupWidth: number, lastGroup: boolean, rootGroup: boolean = false): void {\r\n        if (this.children) {\r\n            if (this.children[0] instanceof KfGroup) {//children are kfgroups\r\n                this.children.forEach((c: KfGroup, i: number) => {\r\n                    if (i === 0 || i === 1 || i === this.children.length - 1) {\r\n                        if (i === 0) {\r\n                            (<KfGroup>this.children[i]).updateGroupPosiAndSize(KfGroup.PADDING + this.offsetWidth, 0, false);\r\n                        } else {\r\n                            if (this.children.length > 3 && i === this.children.length - 1) {\r\n                                (<KfGroup>this.children[i]).updateGroupPosiAndSize((<KfGroup>this.children[1]).posiX, (<KfGroup>this.children[1]).width + this.kfOmits[0].oWidth, true);\r\n                            } else {\r\n                                (<KfGroup>this.children[i]).updateGroupPosiAndSize((<KfGroup>this.children[i - 1]).posiX, (<KfGroup>this.children[i - 1]).width, false);\r\n                            }\r\n                        }\r\n                    } else if (this.children.length > 3 && i === this.children.length - 2) {\r\n                        this.kfOmits.forEach((kfO: KfOmit) => {\r\n                            kfO.updateThumbnail(this.kfHasOffset, this.kfHasDuration);\r\n                            // kfO.updateNum(this.kfNum - 3);\r\n                            kfO.updateTrans((<KfGroup>this.children[1]).posiX + (<KfGroup>this.children[1]).width, KfGroup.PADDING + (<KfGroup>this.children[1]).posiY + (this.children[1].container.getBoundingClientRect().height / state.zoomLevel / 2));//fixed\r\n                        })\r\n                    }\r\n                    if (c instanceof KfGroup) {\r\n                        this.alignLines = [...this.alignLines, ...c.alignLines];\r\n                    }\r\n                })\r\n            }\r\n\r\n            //update size\r\n            const oriW: number = this.width;\r\n            let [diffX, currentGroupWidth, gHeight] = this.updateSize();\r\n\r\n\r\n            //update position of menu if there is one\r\n            if (typeof this.groupMenu !== 'undefined') {\r\n                this.groupMenu.updatePosition(this.offsetWidth, gHeight);\r\n            }\r\n\r\n            //update position\r\n            const transPosiY = rootGroup ? this.posiY + 1 : this.posiY + KfGroup.PADDING;\r\n            if (this.newTrack) {\r\n                this.translateContainer(lastGroupStart + diffX, transPosiY);\r\n                this.posiX = lastGroupStart + this.offsetWidth;\r\n                this.width = currentGroupWidth > lastGroupWidth ? currentGroupWidth : lastGroupWidth;\r\n            } else {\r\n                this.translateContainer(lastGroupStart + lastGroupWidth + diffX, transPosiY);\r\n                this.posiX = lastGroupStart + lastGroupWidth;\r\n                this.width = currentGroupWidth;\r\n            }\r\n\r\n            //check whther need to update the available insert of kftrack\r\n            if (this.parentObj instanceof KfTrack && typeof this.alignTarget !== 'undefined' && !this.alignMerge) {\r\n                this.updateParentTrackInsert();\r\n            }\r\n\r\n            //update background color\r\n            const grayColor: number = KfGroup.BASIC_GRAY - KfGroup.GRAY_STEP * (KfGroup.leafLevel - this.treeLevel);\r\n            if (typeof this.groupTitleCover !== 'undefined') {\r\n                this.groupTitleCover.setAttributeNS(null, 'fill', `rgb(${grayColor}, ${grayColor}, ${grayColor})`);\r\n            }\r\n            if (this.alignMerge) {\r\n                this.groupBg.setAttributeNS(null, 'fill', 'none');\r\n                this.groupBg.setAttributeNS(null, '_fill', `rgb(${grayColor}, ${grayColor}, ${grayColor})`);\r\n                //extend the gorup with of the alignWith group\r\n                const alignWithGroup: KfGroup = this.fetchAlignWithGroup();\r\n                const alignWithGroupBBox: DOMRect = alignWithGroup.container.getBoundingClientRect();\r\n                const currentBBox: DOMRect = this.container.getBoundingClientRect();\r\n                const diffW: number = currentBBox.right - alignWithGroupBBox.right;\r\n                // console.log('extending group size: ', alignWithGroup, this, currentBBox, alignWithGroupBBox, diffW);\r\n                if (diffW > 0) {\r\n                    alignWithGroup.extendSize(diffW);\r\n                }\r\n\r\n            } else {\r\n                this.groupBg.setAttributeNS(null, 'fill', `rgb(${grayColor}, ${grayColor}, ${grayColor})`);\r\n            }\r\n        }\r\n    }\r\n\r\n    public marksThisAni(): string[] {\r\n        if (this.parentObj instanceof KfGroup) {\r\n            return this.parentObj.marksThisAni();\r\n        } else {\r\n            return this.marks;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * check whether the index of omits are correct within group\r\n     */\r\n    public checkChildrenOrder(): boolean {\r\n        let omitRightPosi: boolean = true, omitCount: number = 0;\r\n        for (let i = 0, len = this.children.length; i < len; i++) {\r\n            if (this.children[i] instanceof KfOmit) {\r\n                omitRightPosi = i === (2 + omitCount * 4);\r\n                if (!omitRightPosi) {\r\n                    break;\r\n                }\r\n                omitCount++;\r\n            }\r\n        }\r\n        return omitRightPosi;\r\n    }\r\n\r\n    /**\r\n     * if the omits within group are not in the right position, re-insert the omits into the group\r\n     */\r\n    public reorderKfChildren() {\r\n        //delete all omits in the group \r\n        for (let i = 0, len = this.children.length; i < len;) {\r\n            if (this.children[i] instanceof KfOmit) {\r\n                this.children.splice(i, 1);\r\n            } else {\r\n                i++;\r\n            }\r\n        }\r\n        //re-insert omits \r\n        this.kfOmits.forEach((omit: KfOmit, idx: number) => {\r\n            this.children.splice(2 + idx * 4, 0, omit);\r\n        })\r\n\r\n        //reset idxInGroup\r\n        this.children.forEach((c: KfItem | KfOmit, idx: number) => {\r\n            c.idxInGroup = idx;\r\n        })\r\n    }\r\n\r\n    public insertChild(child: KfGroup | KfItem | KfOmit, idx: number): void {\r\n        //update ori idx\r\n        for (let i = idx, len = this.children.length; i < len; i++) {\r\n            this.children[i].idxInGroup++;\r\n        }\r\n        this.children.splice(idx, 0, child);\r\n    }\r\n\r\n    public removeChild(idx: number): void {\r\n        //update ori idx\r\n        for (let i = idx + 1, len = this.children.length; i < len; i++) {\r\n            this.children[i].idxInGroup--;\r\n        }\r\n        this.children.splice(idx, 1);\r\n    }\r\n\r\n    /**\r\n     * current group align to others \r\n     */\r\n    public updateAlignGroupKfPosis() {\r\n        this.children.forEach((c: KfItem | KfOmit) => {\r\n            if (c instanceof KfItem) {\r\n                const alignRange: [number, number] = c.calAlignRange();\r\n                const currentBBox: DOMRect = c.container.getBoundingClientRect();\r\n                // const timingRef: string = c.timingType;\r\n                const timingRef: string = KfGroup.allAniGroups.get(c.aniId).timingRef;\r\n                const diffX: number = timingRef === TimingSpec.timingRef.previousEnd ? (alignRange[1] - currentBBox.left) / state.zoomLevel : (alignRange[0] - currentBBox.left) / state.zoomLevel;\r\n                if (diffX !== 0) {\r\n                    const oriTrans: ICoord = Tool.extractTransNums(c.container.getAttributeNS(null, 'transform'));\r\n                    c.translateContainer(oriTrans.x + diffX, oriTrans.y);\r\n                }\r\n            }\r\n        })\r\n        let diffX = this.updateSize()[0];\r\n        const oriTrans: ICoord = Tool.extractTransNums(this.container.getAttributeNS(null, 'transform'));\r\n        // console.log('going to translating group conatiner: ', this.container, oriTrans.x + diffX, oriTrans.x, diffX);\r\n\r\n        this.translateContainer(oriTrans.x + diffX, oriTrans.y);\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param kzl : levels deeper than kzl will be simplified\r\n     */\r\n    public zoomGroup(kzl: number, showThumbnail: number) {\r\n        if (this.children.length > 0) {\r\n            if (this.children[0] instanceof KfGroup) {\r\n                let kfGroupCount: number = 0;\r\n                this.children.forEach((c: KfGroup | KfOmit, idx: number) => {\r\n                    if (c instanceof KfGroup && c.rendered) {\r\n                        // console.log('current group: ', c.container, )\r\n                        if (c.treeLevel > kzl) {//hide kfs whose level is deeper than level of this group\r\n                            if (kfGroupCount === 1 && idx !== this.children.length - 1) {\r\n                                c.renderWhenZooming = false;\r\n                            } else {\r\n                                c.zoomGroup(kzl, showThumbnail);\r\n                            }\r\n                        } else {\r\n                            if (!c.renderWhenZooming) {\r\n                                c.renderWhenZooming = true;\r\n                            }\r\n                            c.zoomGroup(kzl, showThumbnail);\r\n                        }\r\n                        kfGroupCount++;\r\n                    }\r\n                })\r\n            } else {//children are kfitems\r\n                let leafLevel: number = this.treeLevel + 1;\r\n                //check whther the position of the kfomits are correct \r\n                const omitRightPosi: boolean = this.checkChildrenOrder();\r\n                if (!omitRightPosi) {\r\n                    this.reorderKfChildren();\r\n                }\r\n\r\n                const kfItemsInChildren: number[] = [];\r\n                this.children.forEach((c: KfItem | KfOmit, idx: number) => {\r\n                    if (c instanceof KfItem) {\r\n                        kfItemsInChildren.push(c.id);\r\n                    }\r\n                })\r\n                kfItemsInChildren.forEach((cId: number, idx: number) => {\r\n                    const tmpKf: KfItem = KfItem.allKfItems.get(cId);\r\n                    //whether this kf is aligned to other kfs\r\n                    const alignToOthers: boolean = (typeof KfGroup.allAniGroups.get(tmpKf.aniId).alignTarget !== 'undefined' && KfGroup.allAniGroups.get(tmpKf.aniId).alignType === Animation.alignTarget.withEle);\r\n                    let hidingThisKf = false;\r\n                    if (alignToOthers) {\r\n                        const alignTargetKf: KfItem = KfItem.allKfItems.get(KfItem.allKfInfo.get(cId).alignTo);\r\n                        hidingThisKf = !alignTargetKf.renderWhenZooming || !alignTargetKf.checkParentRenderedWhenZooming();\r\n                        leafLevel = KfItem.allKfItems.get(KfItem.allKfInfo.get(cId).alignTo).parentObj.treeLevel + 1;\r\n                    } else {\r\n                        hidingThisKf = ((idx === 1 || idx === 2) && idx !== kfItemsInChildren.length - 1);\r\n                    }\r\n                    // console.log('test hiding kf: ', tmpKf.container, hidingThisKf);\r\n\r\n                    if (leafLevel > kzl) {//hide kfs whose level is deeper than leafLevel\r\n                        if (hidingThisKf) {\r\n                            tmpKf.renderWhenZooming = false;\r\n                        } else {\r\n                            tmpKf.renderWhenZooming = true;\r\n                        }\r\n                    } else {\r\n                        if (!tmpKf.renderWhenZooming) {\r\n                            tmpKf.renderWhenZooming = true;\r\n                        }\r\n                    }\r\n\r\n                    //show the corresponding thumbnail of this level\r\n                    if (tmpKf.rendered && tmpKf.renderWhenZooming) {\r\n                        tmpKf.zoomItem(showThumbnail);\r\n                    }\r\n                })\r\n\r\n                //update kfomit position, cause there might be newly added omits, so need to go through the children again \r\n                let preVisibleKfs: KfItem[] = [], visKfRecorder: KfItem;\r\n                let numVisKfAfterLastOmit: number = 0;\r\n                this.children.forEach((c: KfItem | KfOmit, idx: number) => {\r\n                    // omitIsLast = (idx === this.children.length - 1 && c instanceof KfOmit);\r\n                    if (c instanceof KfOmit) {\r\n                        numVisKfAfterLastOmit = 0;\r\n                        preVisibleKfs.push(visKfRecorder);\r\n                    } else if (c instanceof KfItem && c.rendered && c.renderWhenZooming) {\r\n                        visKfRecorder = c;\r\n                        numVisKfAfterLastOmit++;\r\n                        // c.checkMalposition();\r\n                    }\r\n                })\r\n\r\n                if (this.kfOmits.length > 0) {\r\n                    let diffX: number = 0;\r\n                    if (numVisKfAfterLastOmit === 0) {//omit becomes the last child\r\n                        this.kfOmits.forEach((omit: KfOmit, idx: number) => {\r\n                            omit.correctTrans(preVisibleKfs[idx]);\r\n                        })\r\n                        //calculate the distance difference between omits of this group and the group it aligns to\r\n                        // console.log(this, KfGroup.allAniGroupInfo.get(this.aniId), KfGroup.allAniGroups);\r\n                        // const alignWithGroup: KfGroup = this.fetchAlignWithGroup();\r\n                        // console.log('group this group aligned to : ', this.container, alignWithGroup.container);\r\n                        // const currentGroupOmitPosiX: number = this.kfOmits[this.kfOmits.length - 1].container.getBoundingClientRect().right;\r\n                        // const lastSubBranchInAlignWith: KfGroup = alignWithGroup.fetchLastSubBranch();\r\n                        // const alignWithGroupOmitPosiX: number = lastSubBranchInAlignWith.kfOmits[lastSubBranchInAlignWith.kfOmits.length - 1].container.getBoundingClientRect().right;\r\n                        // this.updateSize((alignWithGroupOmitPosiX - currentGroupOmitPosiX) / state.zoomLevel);\r\n                        diffX = this.updateSize(KfOmit.maxOmitWidth - this.kfOmits[0].oWidth)[0];\r\n                    } else {\r\n                        diffX = this.updateSize()[0];\r\n                    }\r\n\r\n                    // let [diffX, currentGroupWidth, childHeight] = this.updateSize(extraWidth);\r\n                    const oriTrans: ICoord = Tool.extractTransNums(this.container.getAttributeNS(null, 'transform'));\r\n                    // console.log('translating in zoom group: ', this.container, diffX, oriTrans.x + diffX);\r\n                    this.translateContainer(oriTrans.x + diffX, oriTrans.y);\r\n\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    public fetchLastSubBranch(): KfGroup {\r\n        if (this.children.length > 0) {\r\n            if (this.children[this.children.length - 1] instanceof KfGroup) {\r\n                return (<KfGroup>this.children[this.children.length - 1]).fetchLastSubBranch();\r\n            } else {\r\n                return this;\r\n            }\r\n        }\r\n    }\r\n\r\n    public fetchLowestSubBranch(lowestLevelBranch: KfGroup[]): void {\r\n        if (this.children.length > 0) {\r\n            if (this.children[0] instanceof KfGroup) {\r\n                this.children.forEach((c: KfGroup | KfOmit) => {\r\n                    if (c instanceof KfGroup) {\r\n                        c.fetchLowestSubBranch(lowestLevelBranch);\r\n                    }\r\n                })\r\n            } else {\r\n                lowestLevelBranch.push(this);\r\n            }\r\n        }\r\n    }\r\n\r\n    public showGroupWhenZooming() {\r\n        if (this.rendered) {\r\n            const groupWidth: number = parseFloat(this.groupBg.getAttributeNS(null, 'width'));\r\n            if (!this.renderWhenZooming) {//rendered -> not rendered\r\n                if ((<KfGroup>this.parentObj).kfOmits.length === 0) {\r\n                    const groupTrans: ICoord = Tool.extractTransNums(this.container.getAttributeNS(null, 'transform'));\r\n                    const kfOmit: KfOmit = new KfOmit();\r\n                    kfOmit.createOmit(KfOmit.KF_GROUP_OMIT, groupTrans.x + groupWidth, 1, <KfGroup>this.parentObj, false, false, parseFloat(this.groupBg.getAttributeNS(null, 'height')) / 2, this.idxInGroup);\r\n                    (<KfGroup>this.parentObj).insertChild(kfOmit, this.idxInGroup + 1);\r\n                    kfOmit.idxInGroup = this.idxInGroup + 1;\r\n                    (<KfGroup>this.parentObj).kfOmits.push(kfOmit);\r\n                    this.translateGroup(kfOmit, -groupWidth + kfOmit.oWidth, false, false, false);\r\n                    //update the position of omits\r\n                    const oriOmitTrans: ICoord = Tool.extractTransNums(kfOmit.container.getAttributeNS(null, 'transform'));\r\n                    kfOmit.updateTrans(oriOmitTrans.x - kfOmit.oWidth - KfGroup.PADDING, oriOmitTrans.y + kfOmit.oHeight / 2);\r\n                } else {\r\n                    (<KfGroup>this.parentObj).kfOmits[0].updateNum((<KfGroup>this.parentObj).kfOmits[0].omittedNum + 1);\r\n\r\n                    this.translateGroup((<KfGroup>this.parentObj).kfOmits[0], -groupWidth, true, false, false);\r\n                }\r\n                this.container.setAttributeNS(null, 'display', 'none');\r\n                this.kfOmits.forEach((omit: KfOmit) => {\r\n                    omit.container.setAttributeNS(null, 'display', 'none');\r\n                })\r\n            } else {//not rendered -> rendered\r\n                this.container.setAttributeNS(null, 'display', '');\r\n                this.kfOmits.forEach((omit: KfOmit) => {\r\n                    omit.container.setAttributeNS(null, 'display', '');\r\n                })\r\n                if ((<KfGroup>this.parentObj).kfOmits[0].omittedNum === 1) {//remove kfOmit\r\n                    // console.log('removing group omit: ', this.container, groupWidth - (<KfGroup>this.parentObj).kfOmits[0].oWidth, groupWidth, (<KfGroup>this.parentObj).kfOmits[0].oWidth)\r\n                    const tmpOmit: KfOmit = (<KfGroup>this.parentObj).kfOmits[0];\r\n                    // this.translateGroup(tmpOmit, groupWidth - (<KfGroup>this.parentObj).kfOmits[0].oWidth, false, false, false);//this doesn't work on mushroom example \r\n                    this.translateGroup(tmpOmit, groupWidth - KfGroup.PADDING, false, false, false);\r\n                    tmpOmit.removeOmit(this.parentObj);\r\n                    (<KfGroup>this.parentObj).removeChild((<KfGroup>this.parentObj).kfOmits[0].idxInGroup);//test if it is +1\r\n                    (<KfGroup>this.parentObj).kfOmits.splice(0, 1);\r\n                } else {//update number\r\n                    (<KfGroup>this.parentObj).kfOmits[0].updateNum((<KfGroup>this.parentObj).kfOmits[0].omittedNum - 1);\r\n                    //restore the omit position to the right side of its preItem\r\n                    this.translateGroup((<KfGroup>this.parentObj).kfOmits[0], groupWidth, false, false, false);\r\n                    // console.log('pre item is: ', (<KfGroup>this.parentObj).kfOmits[0].container, (<KfGroup>this.parentObj).kfOmits[0].preItem);\r\n                    const preItemTrans: ICoord = Tool.extractTransNums((<KfGroup>this.parentObj).kfOmits[0].preItem.container.getAttributeNS(null, 'transform'));\r\n                    const oriOmitTrans: ICoord = Tool.extractTransNums((<KfGroup>this.parentObj).kfOmits[0].container.getAttributeNS(null, 'transform'));\r\n                    const preKfWidth: number = (<KfGroup>(<KfGroup>this.parentObj).kfOmits[0].preItem).container.getBoundingClientRect().width / state.zoomLevel;\r\n                    (<KfGroup>this.parentObj).kfOmits[0].updateTrans(preItemTrans.x + preKfWidth, oriOmitTrans.y + (<KfGroup>this.parentObj).kfOmits[0].oHeight / 2);\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n\r\n}\r\n\r\nexport class GroupMenu {\r\n    static BTN_SIZE: number = 16;\r\n    static PADDING: number = 4;\r\n    static PADDING_LEFT: number = 6;\r\n    static MENU_RX: number = 8;\r\n    static MENU_BG_COLOR: string = '#676767';\r\n    static MENU_ICON_COLOR: string = '#a3a3a3';\r\n    static MENU_ITEM_ICON_COLOR: string = '#a3a3a3';\r\n    static MENU_ICON_HIGHLIGHT_COLOR: string = '#ededed';\r\n    static MENU_LIST_WIDTH: number = 120;\r\n    static EASING_MENU_LIST_WIDTH: number = 156;\r\n    static MENU_LIST_ITEM_HEIGHT: number = 20;\r\n    static EFFECT_FADE: string = 'fade';\r\n    static EFFECT_WIPE_LEFT: string = 'wipe left';\r\n    static EFFECT_WIPE_RIGHT: string = 'wipe right';\r\n    static EFFECT_WIPE_TOP: string = 'wipe top';\r\n    static EFFECT_WIPE_BOTTOM: string = 'wipe bottom';\r\n    static EFFECT_WHEEL: string = 'wheel';\r\n    static EFFECT_CIRCLE: string = 'circle';\r\n    static EFFECT_GROW: string = 'grow';\r\n    static EFFECT_TRANSITION: string = 'custom';\r\n    static EASING_LINEAR: string = 'easeLinear';\r\n    static EASING_IN_QUAD: string = 'easeInQuad';\r\n    static EASING_OUT_QUAD: string = 'easeOutQuad';\r\n    static EASING_INOUT_QUAD: string = 'easeInOutQuad';\r\n    static EASING_IN_CUBIC: string = 'easeInCubic';\r\n    static EASING_OUT_CUBIC: string = 'easeOutCubic';\r\n    static EASING_INOUT_CUBIC: string = 'easeInOutCubic';\r\n    static DURATION: string = 'duration';\r\n    static EFFECTS: string[] = [GroupMenu.EFFECT_FADE, GroupMenu.EFFECT_CIRCLE, GroupMenu.EFFECT_GROW, GroupMenu.EFFECT_WHEEL, GroupMenu.EFFECT_WIPE_LEFT, GroupMenu.EFFECT_WIPE_RIGHT, GroupMenu.EFFECT_WIPE_TOP, GroupMenu.EFFECT_WIPE_BOTTOM];\r\n    static EASINGS: string[] = [GroupMenu.EASING_LINEAR, GroupMenu.EASING_IN_CUBIC, GroupMenu.EASING_OUT_CUBIC, GroupMenu.EASING_INOUT_CUBIC, GroupMenu.EASING_IN_QUAD, GroupMenu.EASING_OUT_QUAD, GroupMenu.EASING_INOUT_QUAD];\r\n\r\n    public action: any;\r\n    public groupId: number;\r\n    public aniId: string;\r\n    public container: SVGGElement;\r\n    public menuListContainer: SVGGElement;\r\n    // public mask: SVGRectElement;\r\n\r\n    constructor(action: any, groupId: number, aniId: string) {\r\n        this.action = action;\r\n        this.groupId = groupId;\r\n        this.aniId = aniId;\r\n    }\r\n\r\n    public createAndRenderMenu(): SVGGElement {\r\n        this.container = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n        this.container.classList.add('ease-fade');\r\n        this.container.setAttributeNS(null, 'opacity', '0');\r\n        const menuBg: SVGPathElement = document.createElementNS('http://www.w3.org/2000/svg', 'path');\r\n        menuBg.setAttributeNS(null, 'fill', GroupMenu.MENU_BG_COLOR);\r\n        menuBg.setAttributeNS(null, 'd', `M0,0 H${GroupMenu.BTN_SIZE + GroupMenu.PADDING_LEFT + GroupMenu.PADDING - GroupMenu.MENU_RX} A${GroupMenu.MENU_RX} ${GroupMenu.MENU_RX} ${Math.PI / 2} 0 1 ${GroupMenu.BTN_SIZE + GroupMenu.PADDING_LEFT + GroupMenu.PADDING},${GroupMenu.MENU_RX} V${2 * GroupMenu.BTN_SIZE + 4 * GroupMenu.PADDING - GroupMenu.MENU_RX} A${GroupMenu.MENU_RX} ${GroupMenu.MENU_RX} ${Math.PI / 2} 0 1 ${GroupMenu.BTN_SIZE + GroupMenu.PADDING_LEFT + GroupMenu.PADDING - GroupMenu.MENU_RX},${2 * GroupMenu.BTN_SIZE + 4 * GroupMenu.PADDING} H0 Z`)\r\n        // menuBg.setAttributeNS(null, 'd', `M0,0 H${GroupMenu.BTN_SIZE + GroupMenu.PADDING_LEFT + GroupMenu.PADDING - GroupMenu.MENU_RX} A${GroupMenu.MENU_RX} ${GroupMenu.MENU_RX} ${Math.PI / 2} 0 1 ${GroupMenu.BTN_SIZE + GroupMenu.PADDING_LEFT + GroupMenu.PADDING},${GroupMenu.MENU_RX} V${3 * GroupMenu.BTN_SIZE + 6 * GroupMenu.PADDING - GroupMenu.MENU_RX} A${GroupMenu.MENU_RX} ${GroupMenu.MENU_RX} ${Math.PI / 2} 0 1 ${GroupMenu.BTN_SIZE + GroupMenu.PADDING_LEFT + GroupMenu.PADDING - GroupMenu.MENU_RX},${3 * GroupMenu.BTN_SIZE + 6 * GroupMenu.PADDING} H0 Z`)\r\n        this.container.appendChild(menuBg);\r\n\r\n        if (typeof this.action !== 'undefined') {\r\n            const effectTypeBtn: SVGGElement = this.createBtn(this.action.oriActionType);\r\n            effectTypeBtn.setAttributeNS(null, 'transform', `translate(${GroupMenu.PADDING_LEFT}, ${GroupMenu.PADDING})`);\r\n            this.container.appendChild(effectTypeBtn);\r\n            this.container.appendChild(this.createSplit(1));\r\n            const easingBtn: SVGGElement = this.createBtn(this.action.easing);\r\n            easingBtn.setAttributeNS(null, 'transform', `translate(${GroupMenu.PADDING_LEFT}, ${3 * GroupMenu.PADDING + GroupMenu.BTN_SIZE})`);\r\n            this.container.appendChild(easingBtn);\r\n        }\r\n        // this.container.appendChild(this.createSplit(2));\r\n        // const durationBtn: SVGGElement = this.createBtn(GroupMenu.DURATION, this.action.duration);\r\n        // durationBtn.setAttributeNS(null, 'transform', `translate(${GroupMenu.PADDING_LEFT}, ${5 * GroupMenu.PADDING + 2 * GroupMenu.BTN_SIZE})`);\r\n        // this.container.appendChild(durationBtn);\r\n\r\n        this.showMenu();\r\n        return this.container;\r\n    }\r\n\r\n    public showMenu() {\r\n        if (typeof this.container !== 'undefined') {\r\n            this.container.setAttributeNS(null, 'opacity', '1');\r\n        }\r\n    }\r\n\r\n    public hideMenu() {\r\n        // if (typeof this.container !== 'undefined') {\r\n        //     this.container.setAttributeNS(null, 'opacity', '0');\r\n        // }\r\n    }\r\n\r\n    public updatePosition(parentOffset: number, parentHeight: number) {\r\n        this.container.setAttributeNS(null, 'transform', `translate(${parentOffset}, ${parentHeight / 2 - (2 * GroupMenu.BTN_SIZE + 4 * GroupMenu.PADDING) / 2})`);\r\n    }\r\n\r\n    public createBtn(btnType: string, duration?: number): SVGGElement {\r\n        const btnContainer: SVGGElement = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n        btnContainer.classList.add('menu-btn');\r\n        const btnBg: SVGRectElement = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n        btnBg.setAttributeNS(null, 'width', `${GroupMenu.BTN_SIZE}`);\r\n        btnBg.setAttributeNS(null, 'height', `${GroupMenu.BTN_SIZE}`);\r\n        btnBg.setAttributeNS(null, 'fill', GroupMenu.MENU_BG_COLOR);\r\n        btnContainer.appendChild(btnBg);\r\n        const icon: SVGPathElement = this.createBtnIcon(btnType);\r\n        btnContainer.appendChild(icon);\r\n        btnContainer.onmouseenter = () => {\r\n            if (!state.mousemoving) {\r\n                icon.setAttributeNS(null, 'fill', GroupMenu.MENU_ICON_HIGHLIGHT_COLOR);\r\n            }\r\n        }\r\n        btnContainer.onmouseleave = (leaveEvt: any) => {\r\n            icon.setAttributeNS(null, 'fill', GroupMenu.MENU_ICON_COLOR);\r\n            if (typeof this.menuListContainer !== 'undefined') {\r\n                if (!this.menuListContainer.contains(leaveEvt.toElement)) {\r\n                    document.getElementById(KfContainer.KF_MENU).innerHTML = '';\r\n                }\r\n            }\r\n        }\r\n        btnContainer.onclick = () => {\r\n            const btnContainerBBox: DOMRect = btnContainer.getBoundingClientRect();//fixed\r\n            this.createMenuList({ x: btnContainerBBox.left + btnContainerBBox.width, y: btnContainerBBox.top + btnContainerBBox.height / 2 }, btnType);\r\n        }\r\n        return btnContainer;\r\n    }\r\n\r\n    public createBtnIcon(btnType: string): SVGPathElement {\r\n        const icon: SVGPathElement = document.createElementNS('http://www.w3.org/2000/svg', 'path');\r\n        icon.setAttributeNS(null, 'fill', GroupMenu.MENU_ICON_COLOR);\r\n        switch (btnType) {\r\n            case GroupMenu.EFFECT_FADE:\r\n                icon.setAttributeNS(null, 'd', 'M7.37,0.29C7.09,0.31,6.82,0.35,6.55,0.41v15.19c0.27,0.05,0.54,0.09,0.82,0.12V0.29z M3.45,14.18c0.26,0.2,0.53,0.38,0.82,0.54V1.27C3.98,1.44,3.71,1.62,3.45,1.82V14.18z M5.82,0.59C5.54,0.68,5.26,0.79,5,0.9v14.2c0.27,0.12,0.54,0.22,0.82,0.31V0.59z M1.17,4.56C0.65,5.6,0.35,6.76,0.35,8s0.3,2.4,0.82,3.44V4.56z M8.1,0.25C8.1,0.25,8.1,0.25,8.1,0.25l0,15.5c0,0,0,0,0,0c4.27,0,7.75-3.48,7.75-7.75S12.37,0.25,8.1,0.25z M2.72,2.44c-0.3,0.29-0.57,0.6-0.82,0.93v9.26c0.25,0.33,0.52,0.65,0.82,0.93V2.44z');\r\n                break;\r\n            case GroupMenu.EFFECT_WIPE_LEFT:\r\n                icon.setAttributeNS(null, 'd', 'M8,0.25C3.73,0.25,0.25,3.73,0.25,8c0,4.27,3.48,7.75,7.75,7.75c4.27,0,7.75-3.48,7.75-7.75C15.75,3.73,12.27,0.25,8,0.25z M8,15c-1.01,0-1.97-0.22-2.84-0.61V8.38c0,0,0,0,0,0h5.44l-2.58,2.39l0.56,0.6L12.21,8L8.58,4.63l-0.56,0.6l2.58,2.39H5.16c0,0,0,0,0,0V1.61C6.03,1.22,6.99,1,8,1c3.86,0,7,3.14,7,7S11.86,15,8,15z');\r\n                break;\r\n            case GroupMenu.EFFECT_WIPE_RIGHT:\r\n                icon.setAttributeNS(null, 'd', 'M0.25,8c0,4.27,3.48,7.75,7.75,7.75s7.75-3.48,7.75-7.75S12.27,0.25,8,0.25S0.25,3.73,0.25,8z M1,8 c0-3.86,3.14-7,7-7c1.01,0,1.97,0.22,2.84,0.61v6.01l0,0H5.4l2.58-2.39l-0.56-0.6L3.79,8l3.63,3.37l0.56-0.6L5.4,8.38h5.44l0,0v6.01 C9.97,14.78,9.01,15,8,15C4.14,15,1,11.86,1,8z');\r\n                break;\r\n            case GroupMenu.EFFECT_WIPE_TOP:\r\n                icon.setAttributeNS(null, 'd', 'M8,15.75c4.27,0,7.75-3.48,7.75-7.75S12.27,0.25,8,0.25S0.25,3.73,0.25,8S3.73,15.75,8,15.75z M8,15 c-3.86,0-7-3.14-7-7c0-1.01,0.22-1.97,0.61-2.84h6.01l0,0v5.44L5.23,8.02l-0.6,0.56L8,12.21l3.37-3.63l-0.6-0.56L8.38,10.6V5.16l0,0 h6.01C14.78,6.03,15,6.99,15,8C15,11.86,11.86,15,8,15z');\r\n                break;\r\n            case GroupMenu.EFFECT_WIPE_BOTTOM:\r\n                icon.setAttributeNS(null, 'd', 'M8,0.25C3.73,0.25,0.25,3.73,0.25,8S3.73,15.75,8,15.75s7.75-3.48,7.75-7.75S12.27,0.25,8,0.25z M8,1 c3.86,0,7,3.14,7,7c0,1.01-0.22,1.97-0.61,2.84H8.38l0,0V5.4l2.39,2.58l0.6-0.56L8,3.79L4.63,7.42l0.6,0.56L7.62,5.4v5.44l0,0H1.61 C1.22,9.97,1,9.01,1,8C1,4.14,4.14,1,8,1z');\r\n                break;\r\n            case GroupMenu.EFFECT_GROW:\r\n                icon.setAttributeNS(null, 'd', 'M8,0.25C3.73,0.25,0.25,3.73,0.25,8c0,4.27,3.48,7.75,7.75,7.75c4.27,0,7.75-3.48,7.75-7.75C15.75,3.73,12.27,0.25,8,0.25z M8,15c-3.86,0-7-3.14-7-7s3.14-7,7-7s7,3.14,7,7S11.86,15,8,15z M13.99,7.91c0-0.13-0.12-0.24-0.25-0.24H8.17c-0.14,0-0.25,0.11-0.25,0.25V9.9c0,0.14,0.11,0.25,0.25,0.25h2.79c-0.25,0.43-0.56,0.75-0.93,0.97C9.58,11.41,9,11.55,8.32,11.55c-1.06,0-1.93-0.34-2.65-1.04C5.1,9.95,4.78,9.31,4.66,8.57l0.8,0.65l0.17-0.21L4.57,8.14C4.54,8.1,4.5,8.07,4.46,8.05l-0.1-0.08L4.3,8.04c-0.11,0.03-0.2,0.13-0.19,0.25c0,0.01,0,0.01,0,0.02L3.41,9.32l0.23,0.16l0.55-0.78c0.14,0.82,0.52,1.56,1.14,2.17c0.81,0.79,1.82,1.18,3,1.18c0.77,0,1.44-0.17,1.97-0.5c0.54-0.33,0.98-0.85,1.31-1.54c0.04-0.08,0.03-0.17-0.02-0.24s-0.13-0.12-0.21-0.12H8.42V8.17h5.08l0.01,0.22c0,0.92-0.24,1.8-0.72,2.63c-0.48,0.82-1.1,1.46-1.86,1.9c-0.76,0.43-1.66,0.65-2.68,0.65c-1.1,0-2.09-0.24-2.95-0.72c-0.86-0.47-1.54-1.16-2.04-2.04C2.75,9.93,2.5,8.96,2.5,7.94c0-1.4,0.47-2.63,1.39-3.66c1.09-1.23,2.54-1.85,4.3-1.85c0.92,0,1.8,0.17,2.6,0.51c0.61,0.26,1.23,0.7,1.83,1.32l-1.13,1.12C10.54,4.46,9.43,4,8.2,4C8.06,4,7.95,4.11,7.95,4.25S8.06,4.5,8.2,4.5c1.19,0,2.2,0.46,3.1,1.41c0.05,0.05,0.11,0.08,0.18,0.08c0.09,0,0.13-0.02,0.18-0.07l1.48-1.47c0.1-0.09,0.1-0.25,0.01-0.35c-0.7-0.76-1.43-1.3-2.16-1.61c-0.87-0.37-1.81-0.55-2.8-0.55c-1.91,0-3.48,0.68-4.67,2.02C2.51,5.08,2,6.42,2,7.94c0,1.11,0.28,2.16,0.82,3.11c0.54,0.96,1.3,1.71,2.23,2.23c0.93,0.52,2.01,0.78,3.2,0.78c1.11,0,2.1-0.24,2.93-0.72c0.83-0.48,1.52-1.18,2.04-2.08C13.74,10.36,14,9.4,14,8.38L13.99,7.91z');\r\n                break;\r\n            case GroupMenu.EFFECT_CIRCLE:\r\n                icon.setAttributeNS(null, 'd', 'M8.08,0.29c-4.27,0-7.73,3.46-7.73,7.73s3.47,7.73,7.73,7.73s7.73-3.46,7.73-7.73S12.35,0.29,8.08,0.29z M8.08,13.79c-3.18,0-5.77-2.58-5.77-5.77S4.9,2.25,8.08,2.25s5.77,2.58,5.77,5.77S11.27,13.79,8.08,13.79z M8.08,3.14 c-2.7,0-4.88,2.19-4.88,4.88s2.19,4.88,4.88,4.88c2.7,0,4.88-2.19,4.88-4.88S10.78,3.14,8.08,3.14z M8.08,11.66 c-2.01,0-3.64-1.63-3.64-3.64s1.63-3.64,3.64-3.64S11.73,6,11.73,8.02S10.1,11.66,8.08,11.66z M8.08,5.18 c-1.56,0-2.83,1.27-2.83,2.83s1.27,2.83,2.83,2.83s2.83-1.27,2.83-2.83S9.65,5.18,8.08,5.18z M8.08,10.13 c-1.17,0-2.11-0.94-2.11-2.11S6.91,5.9,8.08,5.9s2.11,0.94,2.11,2.11S9.25,10.13,8.08,10.13z')\r\n                break;\r\n            case GroupMenu.EFFECT_WHEEL:\r\n                icon.setAttributeNS(null, 'd', 'M8,0.25C3.73,0.25,0.25,3.73,0.25,8c0,4.27,3.48,7.75,7.75,7.75c4.27,0,7.75-3.48,7.75-7.75C15.75,3.73,12.27,0.25,8,0.25z M8,1c0,2.33,0,4.67,0,7c-1.91,1.33-3.83,2.66-5.74,4C1.47,10.86,1,9.49,1,8C1,4.14,4.14,1,8,1z M4.04,10.45c0.04,0,0.08-0.01,0.12-0.03c0.12-0.07,0.16-0.22,0.1-0.34C3.9,9.44,3.71,8.72,3.71,8c0-1.87,1.25-3.52,3.01-4.08L5.98,5.21L6.29,5.4L7.4,3.5L7.16,3.39C7.14,3.37,7.12,3.36,7.09,3.35L5.43,2.54L5.27,2.87L6.5,3.47C4.58,4.11,3.21,5.94,3.21,8c0,0.81,0.21,1.61,0.6,2.32C3.87,10.4,3.95,10.45,4.04,10.45z');\r\n                break;\r\n            case GroupMenu.EFFECT_TRANSITION:\r\n                icon.setAttributeNS(null, 'd', 'M11.71,7.98L8.9,5.17L8.9,7.21L5,7.21L5,8.69L8.9,8.69L8.9,10.79z M8.88,0.27v4.22l3.49,3.49l-3.49,3.49v4.22c3.92-0.39,6.98-3.69,6.98-7.71C15.85,3.96,12.79,0.66,8.88,0.27z M7.71,9.38H4.22V6.59h3.49V0.25c-4.1,0.2-7.36,3.58-7.36,7.73c0,4.15,3.26,7.53,7.36,7.73V9.38z');\r\n                break;\r\n            case GroupMenu.EASING_LINEAR:\r\n                icon.setAttributeNS(null, 'd', 'M4.02,12.92c-0.09,0-0.19-0.04-0.26-0.11c-0.15-0.14-0.15-0.38-0.01-0.53l8.18-8.38c0.15-0.15,0.38-0.15,0.53-0.01c0.15,0.14,0.15,0.38,0.01,0.53l-8.18,8.38C4.22,12.89,4.12,12.92,4.02,12.92z M11.93,14.87H4.29c-1.74,0-3.15-1.42-3.15-3.15V4.07c0-1.74,1.41-3.15,3.15-3.15h7.64c1.74,0,3.15,1.41,3.15,3.15v7.64C15.09,13.46,13.67,14.87,11.93,14.87z M4.29,1.67c-1.33,0-2.4,1.08-2.4,2.4v7.64c0,1.33,1.08,2.4,2.4,2.4h7.64c1.33,0,2.4-1.08,2.4-2.4V4.07c0-1.33-1.08-2.4-2.4-2.4H4.29z');\r\n                break;\r\n            case GroupMenu.EASING_IN_QUAD:\r\n                icon.setAttributeNS(null, 'd', 'M12.21,3.79c0.03,0,0.06,0,0.08,0.01c0.2,0.05,0.33,0.25,0.28,0.45c-0.32,1.4-1.68,6.13-5.89,7.98 c-0.82,0.36-1.7,0.59-2.62,0.69c-0.22,0.02-0.39-0.13-0.41-0.33s0.13-0.39,0.33-0.41c0.84-0.09,1.65-0.3,2.4-0.63 c3.89-1.71,5.16-6.14,5.46-7.46C11.88,3.9,12.04,3.79,12.21,3.79z M11.93,0.92H4.29c-1.74,0-3.15,1.41-3.15,3.15v7.65c0,1.73,1.41,3.15,3.15,3.15h7.64 c1.74,0,3.16-1.41,3.15-3.16V4.07C15.08,2.33,13.67,0.92,11.93,0.92z M14.33,11.71c0,1.32-1.07,2.4-2.4,2.4H4.29 c-1.32,0-2.4-1.07-2.4-2.4V4.07c0-1.32,1.07-2.4,2.4-2.4h7.64c1.32,0,2.4,1.07,2.4,2.4V11.71z');\r\n                break;\r\n            case GroupMenu.EASING_OUT_QUAD:\r\n                icon.setAttributeNS(null, 'd', 'M4.02,12.92c-0.03,0-0.06,0-0.08-0.01c-0.2-0.05-0.33-0.25-0.28-0.45c0.32-1.4,1.68-6.13,5.89-7.98c0.82-0.36,1.7-0.59,2.62-0.69c0.22-0.02,0.39,0.13,0.41,0.33s-0.13,0.39-0.33,0.41c-0.84,0.09-1.65,0.3-2.4,0.63c-3.89,1.71-5.16,6.14-5.46,7.46C4.35,12.81,4.19,12.92,4.02,12.92z M11.93,14.87H4.29c-1.74,0-3.15-1.42-3.15-3.15V4.07c0-1.74,1.41-3.15,3.15-3.15h7.64c1.74,0,3.15,1.41,3.15,3.15v7.64C15.09,13.46,13.67,14.87,11.93,14.87z M4.29,1.67c-1.33,0-2.4,1.08-2.4,2.4v7.64c0,1.33,1.08,2.4,2.4,2.4h7.64c1.33,0,2.4-1.08,2.4-2.4V4.07c0-1.33-1.08-2.4-2.4-2.4H4.29z');\r\n                break;\r\n            case GroupMenu.EASING_INOUT_QUAD:\r\n                icon.setAttributeNS(null, 'd', 'M4.02,12.92c-0.18,0-0.35-0.14-0.37-0.32c-0.03-0.21,0.12-0.39,0.32-0.42c1.02-0.14,1.84-0.5,2.46-1.08c0.93-0.87,1.17-2.06,1.4-3.2c0.25-1.25,0.51-2.53,1.64-3.37C10.18,4,11.1,3.76,12.22,3.79c0.21,0.01,0.37,0.18,0.36,0.39c-0.01,0.21-0.2,0.36-0.39,0.36c-0.96-0.03-1.71,0.16-2.27,0.58C9.02,5.8,8.81,6.84,8.56,8.05c-0.24,1.21-0.52,2.57-1.63,3.6c-0.73,0.68-1.69,1.11-2.87,1.27C4.05,12.92,4.04,12.92,4.02,12.92z M11.93,14.87H4.29c-1.74,0-3.15-1.42-3.15-3.15V4.07c0-1.74,1.41-3.15,3.15-3.15h7.64c1.74,0,3.15,1.41,3.15,3.15v7.64C15.09,13.46,13.67,14.87,11.93,14.87z M4.29,1.67c-1.33,0-2.4,1.08-2.4,2.4v7.64c0,1.33,1.08,2.4,2.4,2.4h7.64c1.33,0,2.4-1.08,2.4-2.4V4.07c0-1.33-1.08-2.4-2.4-2.4H4.29z');\r\n                break;\r\n            case GroupMenu.EASING_IN_CUBIC:\r\n                icon.setAttributeNS(null, 'd', 'M12.21,3.79c0.03,0,0.06,0,0.08,0.01c0.2,0.05,0.33,0.25,0.28,0.45c-0.32,1.4-1.68,6.13-5.89,7.98 c-0.82,0.36-1.7,0.59-2.62,0.69c-0.22,0.02-0.39-0.13-0.41-0.33s0.13-0.39,0.33-0.41c0.84-0.09,1.65-0.3,2.4-0.63 c3.89-1.71,5.16-6.14,5.46-7.46C11.88,3.9,12.04,3.79,12.21,3.79z M11.93,0.92H4.29c-1.74,0-3.15,1.41-3.15,3.15v7.65c0,1.73,1.41,3.15,3.15,3.15h7.64 c1.74,0,3.16-1.41,3.15-3.16V4.07C15.08,2.33,13.67,0.92,11.93,0.92z M14.33,11.71c0,1.32-1.07,2.4-2.4,2.4H4.29 c-1.32,0-2.4-1.07-2.4-2.4V4.07c0-1.32,1.07-2.4,2.4-2.4h7.64c1.32,0,2.4,1.07,2.4,2.4V11.71z');\r\n                break;\r\n            case GroupMenu.EASING_OUT_CUBIC:\r\n                icon.setAttributeNS(null, 'd', 'M4.02,12.92c-0.03,0-0.06,0-0.08-0.01c-0.2-0.05-0.33-0.25-0.28-0.45c0.32-1.4,1.68-6.13,5.89-7.98c0.82-0.36,1.7-0.59,2.62-0.69c0.22-0.02,0.39,0.13,0.41,0.33s-0.13,0.39-0.33,0.41c-0.84,0.09-1.65,0.3-2.4,0.63c-3.89,1.71-5.16,6.14-5.46,7.46C4.35,12.81,4.19,12.92,4.02,12.92z M11.93,14.87H4.29c-1.74,0-3.15-1.42-3.15-3.15V4.07c0-1.74,1.41-3.15,3.15-3.15h7.64c1.74,0,3.15,1.41,3.15,3.15v7.64C15.09,13.46,13.67,14.87,11.93,14.87z M4.29,1.67c-1.33,0-2.4,1.08-2.4,2.4v7.64c0,1.33,1.08,2.4,2.4,2.4h7.64c1.33,0,2.4-1.08,2.4-2.4V4.07c0-1.33-1.08-2.4-2.4-2.4H4.29z');\r\n                break;\r\n            case GroupMenu.EASING_INOUT_CUBIC:\r\n                icon.setAttributeNS(null, 'd', 'M4.02,12.92c-0.18,0-0.35-0.14-0.37-0.32c-0.03-0.21,0.12-0.39,0.32-0.42c1.02-0.14,1.84-0.5,2.46-1.08c0.93-0.87,1.17-2.06,1.4-3.2c0.25-1.25,0.51-2.53,1.64-3.37C10.18,4,11.1,3.76,12.22,3.79c0.21,0.01,0.37,0.18,0.36,0.39c-0.01,0.21-0.2,0.36-0.39,0.36c-0.96-0.03-1.71,0.16-2.27,0.58C9.02,5.8,8.81,6.84,8.56,8.05c-0.24,1.21-0.52,2.57-1.63,3.6c-0.73,0.68-1.69,1.11-2.87,1.27C4.05,12.92,4.04,12.92,4.02,12.92z M11.93,14.87H4.29c-1.74,0-3.15-1.42-3.15-3.15V4.07c0-1.74,1.41-3.15,3.15-3.15h7.64c1.74,0,3.15,1.41,3.15,3.15v7.64C15.09,13.46,13.67,14.87,11.93,14.87z M4.29,1.67c-1.33,0-2.4,1.08-2.4,2.4v7.64c0,1.33,1.08,2.4,2.4,2.4h7.64c1.33,0,2.4-1.08,2.4-2.4V4.07c0-1.33-1.08-2.4-2.4-2.4H4.29z');\r\n                break;\r\n            case GroupMenu.DURATION:\r\n                icon.setAttributeNS(null, 'd', 'M8.26,0.68C8.17,0.67,8.09,0.65,8,0.65c-4.12,0-7.46,3.34-7.46,7.46c0,4.12,3.34,7.46,7.46,7.46c2.54,0,4.78-1.28,6.12-3.22c0.84-1.2,1.33-2.66,1.33-4.24C15.46,4.08,12.26,0.82,8.26,0.68z M8,14.81c-3.7,0-6.71-3.01-6.71-6.71c0-3.53,2.75-6.44,6.22-6.69v6.7V8.5l0.31,0.22l1.41,1.02l3.82,2.76C11.79,13.96,9.95,14.81,8,14.81z M13.32,11.8c-0.07,0.1-0.19,0.16-0.3,0.16c-0.08,0-0.15-0.02-0.22-0.07L7.84,8.31V2.03c0-0.21,0.17-0.38,0.38-0.38s0.38,0.17,0.38,0.38v5.9l4.64,3.35C13.4,11.39,13.44,11.63,13.32,11.8z');\r\n                break;\r\n            default:\r\n        }\r\n        return icon;\r\n    }\r\n\r\n    public createSplit(idx: number): SVGLineElement {\r\n        const splitLine: SVGLineElement = document.createElementNS('http://www.w3.org/2000/svg', 'line');\r\n        splitLine.setAttributeNS(null, 'stroke', GroupMenu.MENU_ITEM_ICON_COLOR);\r\n        splitLine.setAttributeNS(null, 'stroke-width', '.6');\r\n        splitLine.setAttributeNS(null, 'x1', `${GroupMenu.PADDING_LEFT}`);\r\n        splitLine.setAttributeNS(null, 'x2', `${GroupMenu.PADDING_LEFT + GroupMenu.BTN_SIZE}`);\r\n        splitLine.setAttributeNS(null, 'y1', `${idx * (2 * GroupMenu.PADDING + GroupMenu.BTN_SIZE)}`);\r\n        splitLine.setAttributeNS(null, 'y2', `${idx * (2 * GroupMenu.PADDING + GroupMenu.BTN_SIZE)} `);\r\n        return splitLine;\r\n    }\r\n\r\n    public createMenuList(posi: ICoord, btnType: string) {\r\n        const menuLayer: HTMLElement = document.getElementById(KfContainer.KF_MENU);\r\n        menuLayer.innerHTML = '';\r\n        const menuLayerBBox: DOMRect = menuLayer.getBoundingClientRect();//fixed\r\n        this.menuListContainer = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n        this.menuListContainer.onmouseleave = () => {\r\n            menuLayer.innerHTML = '';\r\n        }\r\n\r\n        const pointer: SVGPathElement = document.createElementNS('http://www.w3.org/2000/svg', 'path');\r\n        pointer.setAttributeNS(null, 'd', `M0,3 L5,6 V0 Z`);\r\n        // pointer.setAttributeNS(null, 'transform', `translate(${hintWidth / 2 - 6}, ${Hint.HINT_HEIGHT + 2 * Hint.PADDING})`);\r\n        pointer.setAttributeNS(null, 'fill', GroupMenu.MENU_BG_COLOR);\r\n        this.menuListContainer.appendChild(pointer);\r\n        menuLayer.appendChild(this.menuListContainer);\r\n\r\n        let menuListHeight: number = 0;\r\n        let menuContent: string[] = [];\r\n        let itemWidth: number = 0;\r\n        let actionType: string = '';\r\n        if (GroupMenu.EFFECTS.includes(btnType)) {\r\n            menuListHeight = GroupMenu.EFFECTS.length * GroupMenu.MENU_LIST_ITEM_HEIGHT;\r\n            menuContent = GroupMenu.EFFECTS;\r\n            itemWidth = GroupMenu.MENU_LIST_WIDTH;\r\n            actionType = action.UPDATE_EFFECT_TYPE;\r\n        } else if (GroupMenu.EASINGS.includes(btnType)) {\r\n            menuListHeight = GroupMenu.EASINGS.length * GroupMenu.MENU_LIST_ITEM_HEIGHT;\r\n            menuContent = GroupMenu.EASINGS;\r\n            itemWidth = GroupMenu.EASING_MENU_LIST_WIDTH;\r\n            actionType = action.UPDATE_EFFECT_EASING;\r\n        }\r\n        this.menuListContainer.setAttributeNS(null, 'transform', `translate(${(posi.x - menuLayerBBox.left) / state.zoomLevel + 4}, ${(posi.y - menuLayerBBox.top) / state.zoomLevel - menuListHeight / 2})`);\r\n        pointer.setAttributeNS(null, 'transform', `translate(0, ${menuListHeight / 2 - 3})`);\r\n\r\n        const fakeBg: SVGRectElement = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n        fakeBg.setAttributeNS(null, 'fill', '#00000000');\r\n        fakeBg.setAttributeNS(null, 'width', '10');\r\n        fakeBg.setAttributeNS(null, 'height', `${menuListHeight}`);\r\n        fakeBg.setAttributeNS(null, 'transform', 'translate(-6, 0)');\r\n        this.menuListContainer.appendChild(fakeBg);\r\n\r\n        menuContent.forEach((content: string, idx: number) => {\r\n            const listItem: SVGGElement = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n            listItem.classList.add('clickable-component');\r\n            listItem.setAttributeNS(null, 'transform', `translate(3, ${idx * GroupMenu.MENU_LIST_ITEM_HEIGHT})`);\r\n\r\n            const itemBg: SVGRectElement = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n            itemBg.setAttributeNS(null, 'width', `${itemWidth}`);\r\n            itemBg.setAttributeNS(null, 'height', `${GroupMenu.MENU_LIST_ITEM_HEIGHT}`);\r\n            itemBg.setAttributeNS(null, 'fill', GroupMenu.MENU_BG_COLOR);\r\n            listItem.appendChild(itemBg);\r\n\r\n\r\n            listItem.onclick = () => {\r\n                menuLayer.innerHTML = '';\r\n                const aniIds: string[] = [this.aniId];\r\n                KfGroup.allAniGroups.forEach((tmpAniGroup: KfGroup, tmpAniId: string) => {\r\n                    if (tmpAniGroup.alignTarget === KfGroup.allAniGroups.get(this.aniId).alignId && typeof tmpAniGroup.alignTarget !== 'undefined' && tmpAniGroup.alignMerge) {\r\n                        aniIds.push(tmpAniId);\r\n                    }\r\n                })\r\n                const actionInfo: any = { aniIds: aniIds, effectPropValue: content };\r\n                State.tmpStateBusket.push({\r\n                    historyAction: { actionType: action.UPDATE_SPEC_ANIMATIONS, actionVal: JSON.stringify(state.spec.animations) },\r\n                    currentAction: { actionType: actionType, actionVal: actionInfo }\r\n                })\r\n                State.saveHistory();\r\n                Reducer.triger(actionType, actionInfo);\r\n            }\r\n\r\n            if (idx > 0) {\r\n                const splitLine: SVGLineElement = document.createElementNS('http://www.w3.org/2000/svg', 'line');\r\n                splitLine.setAttributeNS(null, 'x1', '0');\r\n                splitLine.setAttributeNS(null, 'x2', `${itemWidth}`);\r\n                splitLine.setAttributeNS(null, 'y1', '0');\r\n                splitLine.setAttributeNS(null, 'y2', '0');\r\n                listItem.appendChild(splitLine);\r\n            }\r\n\r\n            const icon: SVGPathElement = this.createBtnIcon(content);\r\n            icon.setAttributeNS(null, 'fill', GroupMenu.MENU_ITEM_ICON_COLOR);\r\n            icon.setAttributeNS(null, 'transform', `translate(2, 2)`);\r\n            listItem.appendChild(icon);\r\n\r\n            const text: SVGTextContentElement = document.createElementNS('http://www.w3.org/2000/svg', 'text');\r\n            text.setAttributeNS(null, 'x', '26');\r\n            text.setAttributeNS(null, 'y', `${GroupMenu.MENU_LIST_ITEM_HEIGHT - 4}`);\r\n            text.setAttributeNS(null, 'fill', GroupMenu.MENU_ITEM_ICON_COLOR);\r\n            text.classList.add('monospace-font');\r\n            text.setAttributeNS(null, 'font-size', '10pt');\r\n            text.innerHTML = GroupMenu.EASINGS.includes(btnType) ? Tool.translateEasing(content) : content;\r\n            listItem.appendChild(text);\r\n            this.menuListContainer.appendChild(listItem);\r\n\r\n            listItem.onmouseenter = () => {\r\n                text.setAttributeNS(null, 'fill', GroupMenu.MENU_ICON_HIGHLIGHT_COLOR);\r\n                icon.setAttributeNS(null, 'fill', GroupMenu.MENU_ICON_HIGHLIGHT_COLOR);\r\n            }\r\n            listItem.onmouseleave = () => {\r\n                text.setAttributeNS(null, 'fill', GroupMenu.MENU_ITEM_ICON_COLOR);\r\n                icon.setAttributeNS(null, 'fill', GroupMenu.MENU_ITEM_ICON_COLOR);\r\n            }\r\n        })\r\n    }\r\n}","// import '../../assets/style/keyframeItem.scss'\r\nimport Tool from '../../util/tool'\r\nimport { IKeyframe, IOmitPattern } from '../../app_backup/core/ds';\r\nimport KfGroup from './kfGroup';\r\nimport KfTimingIllus from './kfTimingIllus';\r\nimport KfOmit from './kfOmit';\r\nimport { ICoord, ISize } from '../../util/ds';\r\nimport IntelliRefLine from './intelliRefLine';\r\nimport { KfContainer, kfContainer } from '../kfContainer';\r\nimport * as action from '../../app_backup/action';\r\nimport Reducer from '../../app_backup/reducer';\r\nimport { state, State } from '../../app_backup/state';\r\nimport KfTrack from './kfTrack';\r\nimport { hintTag } from './hint';\r\nimport { player } from '../player';\r\nimport ViewWindow from '../viewWindow';\r\nimport { ValueKeyIteratee } from 'lodash';\r\nimport { TimingSpec, Animation } from '../../canis/moduleIdx';\r\n\r\nexport default class KfItem extends KfTimingIllus {\r\n    static KF_HEIGHT: number = 178;\r\n    static KF_WIDTH: number = 240;\r\n    static KF_H_STEP: number = 6;\r\n    static KF_W_STEP: number = 8;\r\n    static PADDING: number = 6;\r\n    static STATIC_KF_ID: number = -100;\r\n    static FRAME_COLOR: string = '#676767';\r\n    static allKfInfo: Map<number, IKeyframe> = new Map();//contains both fake and real info\r\n    static allKfItems: Map<number, KfItem> = new Map();//contains both fake and real kf\r\n    static staticKf: KfItem;\r\n    static dragoverKf: KfItem;\r\n    static fakeKfIdx: number = 10000;\r\n\r\n    // public id: number;\r\n    public treeLevel: number;\r\n    public parentObj: KfGroup;\r\n    public rendered: boolean = false;\r\n    public idxInGroup: number = 0;\r\n    public isHighlighted: boolean = false;\r\n    public kfInfo: {\r\n        delay: number\r\n        groupRef: string\r\n        refValue: string\r\n        duration: number\r\n        allCurrentMarks: string[]\r\n        allGroupMarks: string[]\r\n        marksThisKf: string[]\r\n        alignTo?: number\r\n    }\r\n    public preOmit: KfOmit;\r\n\r\n    //widgets\r\n    // public container: SVGGElement\r\n    public kfHeight: number\r\n    public hoverBtnContainer: SVGGElement\r\n    public hoverBtnBg: SVGRectElement\r\n    public hoverBtnTxt: SVGTextContentElement\r\n    public playBtn: SVGGElement\r\n    public playIcon: SVGPathElement\r\n    public dragBtn: SVGGElement\r\n    public kfBg: SVGRectElement\r\n    public kfWidth: number\r\n    public alignFrame: SVGRectElement\r\n    public totalWidth: number = 0\r\n    public chartThumbnails: SVGImageElement[] = []\r\n    public _renderWhenZooming: boolean = true;\r\n\r\n    set offsetDiff(od: number) {\r\n        this._offsetDiff = od;\r\n        Tool.transNodeElements(this.container, od, true);\r\n        this.parentObj.translateGroup(this, od, true, false, true);\r\n    }\r\n\r\n    get offsetDiff(): number {\r\n        return this._offsetDiff;\r\n    }\r\n\r\n    set durationDiff(dd: number) {\r\n        this._durationDiff = dd;\r\n        this.parentObj.translateGroup(this, dd, true, false, true);\r\n    }\r\n\r\n    get durationDiff(): number {\r\n        return this._durationDiff;\r\n    }\r\n\r\n    set renderWhenZooming(rwz: boolean) {\r\n        const changed: boolean = rwz !== this.renderWhenZooming;\r\n        this._renderWhenZooming = rwz;\r\n        if (changed) {\r\n            this.showItemWhenZooming();\r\n        }\r\n    }\r\n\r\n    get renderWhenZooming(): boolean {\r\n        return this._renderWhenZooming;\r\n    }\r\n\r\n    public static highlightKfs(selectedCls: string[]) {\r\n        //highlight static kf\r\n        // if (typeof KfItem.staticKf !== 'undefined') {\r\n        //     KfItem.staticKf.highlightKf();\r\n        // }\r\n        //filter which kf to highlight\r\n    }\r\n\r\n    public static cancelHighlightKfs() {\r\n        this.allKfItems.forEach((kf: KfItem) => {\r\n            if (kf.isHighlighted) {\r\n                kf.cancelHighlightKf();\r\n            }\r\n        })\r\n    }\r\n\r\n    public static createKfInfo(selectedMarks: string[], basicInfo: { duration: number, allCurrentMarks: string[], allGroupMarks: string[] }): IKeyframe {\r\n        KfItem.fakeKfIdx++;\r\n        return {\r\n            id: KfItem.fakeKfIdx,\r\n            groupRef: 'id',\r\n            timingRef: TimingSpec.timingRef.previousEnd,\r\n            duration: basicInfo.duration,\r\n            allCurrentMarks: [...basicInfo.allCurrentMarks, ...selectedMarks],\r\n            allGroupMarks: basicInfo.allGroupMarks,\r\n            marksThisKf: selectedMarks,\r\n            durationIcon: true,\r\n            hiddenDurationIcon: false,\r\n            delay: 0,\r\n            delayIcon: false\r\n        }\r\n    }\r\n\r\n    // /**\r\n    //  * \r\n    //  */\r\n    // public static recordZoomPosis(kfZoomLevel: number) {\r\n    //     // if (typeof this.allKfItems.get([...this.allKfItems.keys()][0]).zoomPosis.get(kfZoomLevel) === 'undefined') {\r\n    //     this.allKfItems.forEach((kf: KfItem, kfId: number) => {\r\n    //         const tmpTrans: ICoord = Tool.extractTransNums(kf.container.getAttributeNS(null, 'transform'));\r\n    //         this.allKfItems.get(kfId).zoomPosis.set(kfZoomLevel, {\r\n    //             posi: tmpTrans,\r\n    //             size: { w: 0, h: 0 }\r\n    //         });\r\n    //     })\r\n    //     // }\r\n    // }\r\n\r\n    // public static restoreZoomPosis(kfZoomLevel: number) {\r\n    //     this.allKfItems.forEach((kf: KfItem, kfId: number) => {\r\n    //         this.allKfItems.get(kfId).container.setAttributeNS(null, 'transform', `translate(${kf.zoomPosis.get(kfZoomLevel).posi.x} ${kf.zoomPosis.get(kfZoomLevel).posi.y})`);\r\n    //     })\r\n    // }\r\n\r\n    public createOptionKfItem(allCurrentMarks: string[], allGroupMarks: string[], marksThisKf: string[], kfWidth: number, kfHeight: number) {\r\n        this.kfWidth = kfWidth;\r\n        this.kfHeight = kfHeight;\r\n        this.container = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n        this.translateContainer(KfItem.PADDING, KfItem.PADDING);\r\n        this.drawKfBg(-1, { w: kfWidth, h: kfHeight });\r\n        this.container.appendChild(this.kfBg);\r\n        this.drawChart(allCurrentMarks, allGroupMarks, marksThisKf);\r\n    }\r\n\r\n    public createItem(kf: IKeyframe, treeLevel: number, parentObj: KfGroup, startX: number, size?: ISize): void {\r\n        this.hasOffset = kf.delayIcon;\r\n        this.hasDuration = kf.durationIcon;\r\n        this.hasHiddenDuration = kf.hiddenDurationIcon;\r\n        this.parentObj = parentObj;\r\n        this.aniId = this.parentObj.aniId;\r\n        if (this.parentObj.kfHasOffset !== this.hasOffset || this.parentObj.kfHasDuration !== this.hasDuration) {\r\n            this.parentObj.updateParentKfHasTiming(this.hasOffset, this.hasDuration);\r\n        }\r\n        this.id = kf.id;\r\n        this.treeLevel = treeLevel;\r\n\r\n        if (typeof size !== 'undefined') {\r\n            this.kfHeight = size.h;\r\n        } else {\r\n            this.kfHeight = KfItem.KF_HEIGHT - 2 * treeLevel * KfItem.KF_H_STEP;\r\n        }\r\n        this.kfInfo = {\r\n            delay: kf.delay,\r\n            groupRef: typeof kf.groupRef === 'undefined' ? 'id' : kf.groupRef,\r\n            refValue: typeof kf.refValue === 'undefined' ? '' : kf.refValue,\r\n            duration: kf.duration,\r\n            allCurrentMarks: kf.allCurrentMarks,\r\n            allGroupMarks: kf.allGroupMarks,\r\n            marksThisKf: kf.marksThisKf,\r\n        }\r\n        if (typeof kf.alignTo !== 'undefined') {\r\n            this.kfInfo.alignTo = kf.alignTo;\r\n        }\r\n        if (typeof parentObj.container !== 'undefined') {\r\n            this.rendered = true;\r\n            this.renderItem(startX, size);\r\n            if (typeof this.kfInfo.alignTo !== 'undefined') {//this kf is align to others\r\n                const aniGroup: KfGroup = this.parentObj.fetchAniGroup();\r\n                if (aniGroup.alignMerge) {\r\n                    this.showAlignFrame();\r\n                }\r\n            }\r\n        } else {\r\n            KfItem.allKfItems.set(this.id, this);\r\n        }\r\n    }\r\n\r\n    public bindHoverBtn() {\r\n        this.container.onmouseenter = () => {\r\n            this.container.classList.add('drop-shadow-ele');\r\n            this.hoverBtnContainer.setAttributeNS(null, 'opacity', '1');\r\n            if (!state.mousemoving) {\r\n                if (typeof this.kfInfo.alignTo !== 'undefined') {//this kf is align to others\r\n                    const aniGroup: KfGroup = this.parentObj.fetchAniGroup();\r\n                    aniGroup.transShowTitle();\r\n                } else {\r\n                    this.parentObj.transShowTitle();\r\n                }\r\n            }\r\n        }\r\n        this.container.onmouseleave = () => {\r\n            this.container.classList.remove('drop-shadow-ele');\r\n            this.hoverBtnContainer.setAttributeNS(null, 'opacity', '0');\r\n        }\r\n    }\r\n\r\n    public unbindHoverBtn() {\r\n        this.container.classList.remove('drop-shadow-ele');\r\n        this.hoverBtnContainer.setAttributeNS(null, 'opacity', '0');\r\n        this.container.onmouseenter = null;\r\n        this.container.onmouseleave = null;\r\n    }\r\n\r\n    public renderItem(startX: number, size?: ISize) {\r\n        this.container = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n        this.translateContainer(startX + KfItem.PADDING, KfItem.PADDING);\r\n        this.bindHoverBtn();\r\n\r\n        if (this.hasOffset) {\r\n            this.drawOffset(this.kfInfo.delay, this.kfHeight, 0);\r\n            this.container.appendChild(this.offsetIllus);\r\n            this.totalWidth += this.offsetWidth;\r\n        }\r\n        this.drawKfBg(this.treeLevel, size);\r\n        this.container.appendChild(this.kfBg);\r\n        if (this.hasDuration) {\r\n            this.drawDuration(this.kfInfo.duration, this.kfWidth, this.kfHeight, false);\r\n            this.container.appendChild(this.durationIllus);\r\n            this.totalWidth += this.durationWidth;\r\n        } else if (this.hasHiddenDuration) {\r\n            this.drawDuration(this.kfInfo.duration, this.kfWidth, this.kfHeight, true);\r\n            this.container.appendChild(this.durationIllus);\r\n        }\r\n\r\n        this.drawChart(this.kfInfo.allCurrentMarks, this.kfInfo.allGroupMarks, this.kfInfo.marksThisKf, KfItem.allKfInfo.get(this.id).thumbnail);\r\n        // this.container.appendChild(this.chartThumbnail);\r\n        // this.container.appendChild(this.chartSmallThumbnail);\r\n        if (this.treeLevel === 1) {\r\n            if (typeof this.parentObj.groupMenu === 'undefined') {//fake groups\r\n                this.parentObj.container.appendChild(this.container);\r\n            } else {\r\n                this.parentObj.container.insertBefore(this.container, this.parentObj.groupMenu.container);\r\n            }\r\n        } else {\r\n            this.parentObj.container.appendChild(this.container);\r\n        }\r\n\r\n        //create play button and draggable button\r\n        this.drawHoverBtns();\r\n\r\n\r\n\r\n        //if this kfItem is aligned to previous kfItems, update positions\r\n        KfItem.allKfItems.set(this.id, this);\r\n        if (typeof this.kfInfo.alignTo !== 'undefined') {\r\n            this.updateAlignPosi(this.kfInfo.alignTo);\r\n            // KfItem.allKfItems.set(this.id, this);\r\n            //check whether there is already a line\r\n            if (typeof IntelliRefLine.kfLineMapping.get(this.id) !== 'undefined') {//already a line\r\n                // if (typeof IntelliRefLine.kfLineMapping.get(this.kfInfo.alignTo) !== 'undefined') {//already a line\r\n                const refLineId: number = IntelliRefLine.kfLineMapping.get(this.kfInfo.alignTo).lineId;\r\n                const oriToKf: number = IntelliRefLine.kfLineMapping.get(this.kfInfo.alignTo).theOtherEnd;\r\n                const oriToKfBottom: number = KfItem.allKfItems.get(oriToKf).container.getBoundingClientRect().bottom;//fixed\r\n                const currentKfBottom: number = this.container.getBoundingClientRect().bottom;//fixed\r\n                if (currentKfBottom > oriToKfBottom) {//update the line info\r\n                    IntelliRefLine.kfLineMapping.get(this.kfInfo.alignTo).theOtherEnd = this.id;\r\n                    IntelliRefLine.kfLineMapping.delete(oriToKf);\r\n                    IntelliRefLine.kfLineMapping.set(this.id, { theOtherEnd: this.kfInfo.alignTo, lineId: refLineId });\r\n                    IntelliRefLine.updateLine(this.kfInfo.alignTo);\r\n                }\r\n            } else {// create a line\r\n                let refLine: IntelliRefLine = new IntelliRefLine();\r\n                refLine.createLine(this.kfInfo.alignTo, this.id);\r\n                KfItem.allKfItems.get(this.kfInfo.alignTo).parentObj.alignLines.push(refLine.id);\r\n                this.parentObj.alignLines.push(refLine.id);\r\n            }\r\n        } else {\r\n            // KfItem.allKfItems.set(this.id, this);\r\n        }\r\n    }\r\n\r\n    public showAlignFrame() {\r\n        if (typeof this.alignFrame === 'undefined') {\r\n            const itemBBox: DOMRect = this.container.getBoundingClientRect();//fixed\r\n            this.alignFrame = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n            this.alignFrame.setAttributeNS(null, 'width', `${itemBBox.width / state.zoomLevel}`);\r\n            this.alignFrame.setAttributeNS(null, 'height', `${itemBBox.height / state.zoomLevel}`);\r\n            this.alignFrame.setAttributeNS(null, 'stroke', KfItem.FRAME_COLOR);\r\n            this.alignFrame.setAttributeNS(null, 'stroke-width', '1');\r\n            this.alignFrame.setAttributeNS(null, 'stroke-dasharray', '4 2');\r\n            this.alignFrame.setAttributeNS(null, 'fill', 'none');\r\n            this.container.appendChild(this.alignFrame);\r\n        } else {\r\n            this.alignFrame.setAttributeNS(null, 'opacity', '1');\r\n        }\r\n    }\r\n\r\n    public hideAlignFrame() {\r\n        if (typeof this.alignFrame !== 'undefined') {\r\n            this.alignFrame.setAttributeNS(null, 'opacity', '0');\r\n        }\r\n    }\r\n\r\n    public hideDuration() {\r\n        this.durationIllus.setAttributeNS(null, 'opacity', '0');\r\n    }\r\n\r\n    public showDuration() {\r\n        this.durationIllus.setAttributeNS(null, 'opacity', '1');\r\n    }\r\n\r\n    public hideOffset() {\r\n        this.offsetIllus.setAttributeNS(null, 'opacity', '0');\r\n    }\r\n\r\n    public showOffset() {\r\n        this.offsetIllus.setAttributeNS(null, 'opacity', '1');\r\n    }\r\n\r\n    public kfDragoverKf() {\r\n        this.kfBg.classList.add('dragover-kf');\r\n    }\r\n\r\n    public cancelKfDragoverKf() {\r\n        this.kfBg.classList.remove('dragover-kf');\r\n    }\r\n\r\n    public updateAlignPosi(alignTo: number) {\r\n        //use bbox to compare position\r\n        const currentPosiX: number = this.container.getBoundingClientRect().left;//fixed\r\n        const currentKfInfo: IKeyframe = KfItem.allKfInfo.get(this.id);\r\n        const alignedKfInfo: IKeyframe = KfItem.allKfInfo.get(alignTo);\r\n        const alignedKfItem: KfItem = KfItem.allKfItems.get(alignTo);\r\n        if (typeof alignedKfItem !== 'undefined') {\r\n\r\n            if (alignedKfItem.rendered) {\r\n                let alignedKfBgX: number = 0;\r\n                if (currentKfInfo.timingRef === TimingSpec.timingRef.previousStart) {\r\n                    alignedKfBgX = alignedKfItem.kfBg.getBoundingClientRect().left;//fixed\r\n                } else {\r\n                    alignedKfBgX = alignedKfItem.container.getBoundingClientRect().right;//fixed\r\n                    KfItem.allKfInfo.get(alignedKfItem.id).alignWithKfs.forEach((kfId: number) => {\r\n                        if (kfId !== this.id) {\r\n                            const tmpKf: KfItem = KfItem.allKfItems.get(kfId);\r\n                            if (typeof tmpKf !== 'undefined' && tmpKf.rendered) {\r\n                                const tmpKfBBox: DOMRect = tmpKf.container.getBoundingClientRect();//fixed\r\n                                if (tmpKfBBox.right > alignedKfBgX) {\r\n                                    alignedKfBgX = tmpKfBBox.right;\r\n                                }\r\n                            }\r\n                        }\r\n                    })\r\n                }\r\n                const bgDiffX: number = Math.abs((currentPosiX - alignedKfBgX) / state.zoomLevel);\r\n                if (currentPosiX > alignedKfBgX) { //translate aligned kf and its group\r\n                    // if (currentPosiX > alignedKfBgX && (currentPosiX - alignedKfBgX >= 1)) { //translate aligned kf and its group\r\n                    let posiXForNextKf: number = this.container.getBoundingClientRect().right;//fixed\r\n\r\n                    //update aligned kfs, together with those kfs after it, and those in its parent group\r\n                    const currentAlignedKfTransX: number = Tool.extractTransNums(alignedKfItem.container.getAttributeNS(null, 'transform')).x;\r\n                    alignedKfItem.translateContainer(currentAlignedKfTransX + bgDiffX, KfItem.PADDING);\r\n                    const alignedKfItemBBox: DOMRect = alignedKfItem.container.getBoundingClientRect();//fixed\r\n                    if (alignedKfItemBBox.right > posiXForNextKf) {\r\n                        posiXForNextKf = alignedKfItemBBox.right;\r\n                    }\r\n\r\n                    //find the next kf in aligned group\r\n                    let flag: boolean = false;\r\n                    let transXForNextKf: number = 0;\r\n                    let nextKf: KfItem;\r\n                    for (let i: number = 0, len: number = alignedKfItem.parentObj.children.length; i < len; i++) {\r\n                        const c: KfItem | KfOmit = <KfItem | KfOmit>alignedKfItem.parentObj.children[i];\r\n                        if (flag) {\r\n                            if (c instanceof KfOmit) {\r\n                                transXForNextKf = bgDiffX;\r\n                                const tmpTrans: ICoord = Tool.extractTransNums(c.container.getAttributeNS(null, 'transform'));\r\n                                c.translateContainer(tmpTrans.x + transXForNextKf, tmpTrans.y);\r\n                            } else {\r\n                                const tmpBBox: DOMRect = c.container.getBoundingClientRect();//fixed\r\n                                if (tmpBBox.left + transXForNextKf * state.zoomLevel < posiXForNextKf) {\r\n                                    transXForNextKf = (posiXForNextKf - tmpBBox.left) / state.zoomLevel;\r\n                                }\r\n                                nextKf = c;\r\n                                break;\r\n                            }\r\n                        }\r\n                        if (c instanceof KfItem) {\r\n                            flag = c.id === alignedKfItem.id\r\n                        }\r\n                    }\r\n\r\n                    //update position of next kf in aligned group\r\n                    if (transXForNextKf > 0) {\r\n                        nextKf.parentObj.translateGroup(nextKf, transXForNextKf, true, true, true);\r\n                    }\r\n                } else if (currentPosiX <= alignedKfBgX) {//translate current kf\r\n                    const currentTransX: number = Tool.extractTransNums(this.container.getAttributeNS(null, 'transform')).x;\r\n                    this.translateContainer(currentTransX + bgDiffX, KfItem.PADDING);\r\n                    this.transOmitsWithItem();\r\n                    this.totalWidth += bgDiffX;\r\n\r\n                    //find the next kf in aligned group\r\n                    let reachTarget: boolean = false;\r\n                    let transXForNextKf: number = 0;\r\n                    let nextKf: KfItem;\r\n                    let passedOmit: KfOmit;\r\n                    for (let i: number = 0, len: number = alignedKfItem.parentObj.children.length; i < len; i++) {\r\n                        const c: KfItem | KfOmit = <KfItem | KfOmit>alignedKfItem.parentObj.children[i];\r\n                        if (reachTarget) {\r\n                            if (c instanceof KfOmit) {\r\n                                // transXForNextKf += KfOmit.OMIT_W + KfGroup.PADDING;\r\n                                passedOmit = c;\r\n                            } else {\r\n                                const currentBBox: DOMRect = this.container.getBoundingClientRect();//fixed\r\n                                const tmpBBox: DOMRect = c.container.getBoundingClientRect();//fixed\r\n                                if (tmpBBox.left < currentBBox.right) {\r\n                                    transXForNextKf = (currentBBox.right - tmpBBox.left) / state.zoomLevel;\r\n                                }\r\n                                nextKf = c;\r\n                                break;\r\n                            }\r\n                        }\r\n                        if (c instanceof KfItem) {\r\n                            reachTarget = c.id === alignedKfItem.id\r\n                        }\r\n                    }\r\n\r\n                    //update position of next kf in aligned group\r\n                    if (transXForNextKf > 0) {\r\n                        alignedKfItem.parentObj.translateGroup(nextKf, transXForNextKf, true, true, true);\r\n                    }\r\n                }\r\n                //update the refline\r\n                IntelliRefLine.updateLine(alignTo);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * reset the omit position to the left side of the kf\r\n     */\r\n    public transOmitsWithItem(): void {\r\n        if (typeof this.preOmit !== 'undefined' && this.rendered && this.renderWhenZooming) {\r\n            // if (typeof this.preOmit !== 'undefined') {\r\n            const currentKfTrans: ICoord = Tool.extractTransNums(this.container.getAttributeNS(null, 'transform'));\r\n            const oriTrans: ICoord = Tool.extractTransNums(this.preOmit.container.getAttributeNS(null, 'transform'));\r\n            this.preOmit.translateContainer(this.preOmit.omitType === KfOmit.KF_ALIGN ? currentKfTrans.x - this.preOmit.oWidth - KfGroup.PADDING : currentKfTrans.x - this.preOmit.oWidth, oriTrans.y);\r\n            // this.preOmit.updateTrans(oriTrans.x + transX, oriTrans.y + KfOmit.OMIT_H / 1);\r\n        }\r\n    }\r\n\r\n    public translateContainer(x: number, y: number) {\r\n        this.container.setAttributeNS(null, 'transform', `translate(${x}, ${y})`);\r\n        //translate the refline if there is one\r\n        IntelliRefLine.updateLine(this.id);\r\n    }\r\n\r\n    /**\r\n     * calcualte the align range based on the alignwith kf and kfs aligned to this kf which are before the current kf\r\n     */\r\n    public calAlignRange(): [number, number] {\r\n        const currentKfInfo: IKeyframe = KfItem.allKfInfo.get(this.id);\r\n        const currentKfBBox: DOMRect = this.container.getBoundingClientRect();\r\n        let minX: number = 10000000, maxX: number = -1;\r\n        if (typeof currentKfInfo !== 'undefined') {\r\n            const alignTargetKf: KfItem = KfItem.allKfItems.get(currentKfInfo.alignTo);\r\n            const alignTargetKfInfo: IKeyframe = KfItem.allKfInfo.get(alignTargetKf.id);\r\n            if (typeof alignTargetKf !== 'undefined') {\r\n                if (alignTargetKf.rendered && alignTargetKf.renderWhenZooming) {//this kf is visible\r\n                    const alignTargetKfBBox: DOMRect = alignTargetKf.container.getBoundingClientRect();\r\n                    const alignTargetKfThumbnailBBox: DOMRect = alignTargetKf.kfBg.getBoundingClientRect();\r\n                    minX = alignTargetKfThumbnailBBox.left;\r\n                    maxX = alignTargetKfBBox.right;\r\n                    for (let i = 0, len = alignTargetKfInfo.alignWithKfs.length; i < len; i++) {\r\n                        const kfId: number = alignTargetKfInfo.alignWithKfs[i];\r\n                        if (kfId === this.id) {\r\n                            break;\r\n                        }\r\n                        const tmpKf: KfItem = KfItem.allKfItems.get(kfId);\r\n                        if (typeof tmpKf !== 'undefined') {\r\n                            if (tmpKf.rendered && tmpKf.renderWhenZooming && tmpKf.id !== this.id) {\r\n                                const tmpBBox: DOMRect = tmpKf.container.getBoundingClientRect();\r\n                                // if (tmpBBox.y <= currentKfBBox.y) {//kfs above this one\r\n                                if (tmpBBox.right > maxX) {\r\n                                    maxX = tmpBBox.right;\r\n                                }\r\n                                // }\r\n                            }\r\n                        }\r\n                    }\r\n                    // alignTargetKfInfo.alignWithKfs.forEach((kfId: number) => {\r\n                    //     const tmpKf: KfItem = KfItem.allKfItems.get(kfId);\r\n                    //     if (typeof tmpKf !== 'undefined') {\r\n                    //         if (tmpKf.rendered && tmpKf.renderWhenZooming && tmpKf.id !== this.id) {\r\n                    //             const tmpBBox: DOMRect = tmpKf.container.getBoundingClientRect();\r\n                    //             if (tmpBBox.y <= currentKfBBox.y && ) {//kfs above this one\r\n                    //                 if (tmpBBox.right > maxX) {\r\n                    //                     maxX = tmpBBox.right;\r\n                    //                 }\r\n                    //             }\r\n                    //         }\r\n                    //     }\r\n                    // })\r\n                }\r\n            }\r\n        }\r\n        return [minX, maxX];\r\n    }\r\n\r\n    public findNextSibling(): KfItem | KfOmit {\r\n        return <KfItem | KfOmit>this.parentObj.children[this.idxInGroup + 1];\r\n    }\r\n\r\n    public bindDragBarHover() {\r\n        this.dragBtn.onmouseenter = (enterEvt: MouseEvent) => {\r\n            if (!state.mousemoving) {\r\n                hintTag.createHint({ x: enterEvt.pageX, y: enterEvt.pageY }, 'Drag to change the relative starting time', 240);\r\n            }\r\n        }\r\n        this.dragBtn.onmouseleave = () => {\r\n            hintTag.removeHint();\r\n        }\r\n    }\r\n\r\n    public unbindDragBarHover() {\r\n        this.dragBtn.onmouseenter = null;\r\n        this.dragBtn.onmouseleave = null;\r\n    }\r\n\r\n    public drawHoverBtns(): void {\r\n        this.hoverBtnContainer = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n        this.hoverBtnContainer.classList.add('ease-fade');\r\n        this.hoverBtnContainer.setAttributeNS(null, 'opacity', '0');\r\n        this.hoverBtnTxt = document.createElementNS('http://www.w3.org/2000/svg', 'text');\r\n        this.hoverBtnTxt.setAttributeNS(null, 'x', `${this.kfWidth / 2 - 90 + this.offsetWidth}`);\r\n        this.hoverBtnTxt.setAttributeNS(null, 'y', `${this.kfHeight / 2}`);\r\n        this.hoverBtnTxt.setAttributeNS(null, 'font-size', '12pt');\r\n        this.hoverBtnTxt.setAttributeNS(null, 'font-weight', 'bold');\r\n        this.hoverBtnTxt.setAttributeNS(null, 'fill', '#484848');\r\n        this.hoverBtnTxt.innerHTML = 'Click to preview from here';\r\n        this.hoverBtnContainer.appendChild(this.hoverBtnTxt);\r\n        this.hoverBtnBg = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n        this.hoverBtnBg.setAttributeNS(null, 'x', `${typeof this.offsetIllus === 'undefined' ? 0 : this.offsetWidth}`);\r\n        this.hoverBtnBg.setAttributeNS(null, 'y', '0');\r\n        this.hoverBtnBg.setAttributeNS(null, 'width', `${this.kfWidth}`);\r\n        this.hoverBtnBg.setAttributeNS(null, 'height', `${this.kfHeight}`);\r\n        this.hoverBtnBg.setAttributeNS(null, 'fill', 'rgba(200,200,200,0.3)');\r\n        this.hoverBtnBg.classList.add('clickable-component');\r\n        // this.bindHoverBgHover();\r\n        this.hoverBtnBg.onclick = () => {\r\n            //play animation from this keyframe\r\n            if (state.charts.length === 1) {\r\n                const startTimeThisKf: number = Animation.allMarkAni.get(this.kfInfo.marksThisKf[0]).startTime;\r\n                player.currentTime = startTimeThisKf;\r\n                player.playAnimation();\r\n            } else {\r\n                const tmpIdx: number = this.idxInGroup;\r\n                player.currentTime = this.durationNum * tmpIdx;\r\n                player.playAnimation();\r\n            }\r\n        }\r\n        this.hoverBtnContainer.appendChild(this.hoverBtnBg);\r\n\r\n        //draggable button\r\n        this.dragBtn = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n        this.dragBtn.setAttributeNS(null, 'transform', `translate(0 ${this.kfHeight - 20})`);\r\n        this.dragBtn.classList.add('draggable-component');\r\n        const btnBg: SVGRectElement = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n        btnBg.classList.add('ease-fill', 'drag-bar');\r\n        btnBg.setAttributeNS(null, 'x', '0');\r\n        btnBg.setAttributeNS(null, 'y', '0');\r\n        btnBg.setAttributeNS(null, 'width', `${this.totalWidth}`);\r\n        btnBg.setAttributeNS(null, 'height', '20');\r\n        btnBg.setAttributeNS(null, 'fill', 'rgb(180, 180, 180)');\r\n        btnBg.setAttributeNS(null, 'opacity', '0.9');\r\n        this.bindDragBarHover();\r\n        this.dragBtn.appendChild(btnBg);\r\n        let dotR: number = 1.5;\r\n        let dotMargin: number = 1.5 * 2 * dotR;\r\n        for (let i = 0; i < 8; i++) {\r\n            const circle: SVGCircleElement = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\r\n            circle.setAttributeNS(null, 'cx', `${this.kfWidth / 2 - 4 * dotR - 1.5 * dotMargin + dotR + (i % 4) * (dotR + dotMargin)}`);\r\n            circle.setAttributeNS(null, 'cy', `${(20 - 4 * dotR - dotMargin) / 2 + Math.floor(i / 4) * (dotR + dotMargin) + dotR}`);\r\n            circle.setAttributeNS(null, 'r', `${dotR}`);\r\n            circle.setAttributeNS(null, 'fill', '#484848');\r\n            this.dragBtn.appendChild(circle);\r\n        }\r\n\r\n        if (state.charts.length === 1) {//cant drag kfitem when the animation is transition\r\n            this.dragBtn.onmousedown = (downEvt) => {\r\n                Reducer.triger(action.UPDATE_MOUSE_MOVING, true);\r\n                this.parentObj.transHideTitle();\r\n                this.unbindDragBarHover();\r\n                let oriMousePosi: ICoord = { x: downEvt.pageX, y: downEvt.pageY };\r\n                hintTag.removeHint();\r\n                const targetMoveItem: KfGroup | KfItem = typeof this.kfInfo.alignTo !== 'undefined' ? this.parentObj.fetchAniGroup() : this;\r\n                //move the entire group\r\n                targetMoveItem.container.setAttributeNS(null, '_transform', targetMoveItem.container.getAttributeNS(null, 'transform'));\r\n                const tmpContainerBBox: DOMRect = targetMoveItem.container.getBoundingClientRect();//fixed\r\n                const containerBBox: any = {\r\n                    top: targetMoveItem instanceof KfItem ? targetMoveItem.kfBg.getBoundingClientRect().top : tmpContainerBBox.top,\r\n                    left: tmpContainerBBox.left,\r\n                    right: tmpContainerBBox.right,\r\n                    width: tmpContainerBBox.width,\r\n                    height: tmpContainerBBox.height,\r\n                    x: tmpContainerBBox.x,\r\n                    y: tmpContainerBBox.y\r\n                }\r\n                if (targetMoveItem.parentObj.container.contains(targetMoveItem.container)) {\r\n                    targetMoveItem.parentObj.container.removeChild(targetMoveItem.container);\r\n                }\r\n                const popKfContainer: HTMLElement = document.getElementById(KfContainer.KF_POPUP);\r\n                const popKfContainerBbox: DOMRect = popKfContainer.getBoundingClientRect();//fixed\r\n                popKfContainer.appendChild(targetMoveItem.container);\r\n\r\n                //add hint line if moving a single kf\r\n                let hintPosiLine: IntelliRefLine = new IntelliRefLine();\r\n                if (targetMoveItem instanceof KfItem) {\r\n                    hintPosiLine.hintAlign({ x: containerBBox.left, y: containerBBox.top }, containerBBox.height, false);\r\n                }\r\n\r\n                //set new transform\r\n                if (targetMoveItem instanceof KfGroup) {\r\n                    targetMoveItem.translateContainer((containerBBox.left - popKfContainerBbox.left) / state.zoomLevel, (containerBBox.top - popKfContainerBbox.top + KfGroup.TITLE_HEIHGT) / state.zoomLevel);\r\n                } else {\r\n                    targetMoveItem.translateContainer((containerBBox.left - popKfContainerBbox.left) / state.zoomLevel, (containerBBox.top - popKfContainerBbox.top) / state.zoomLevel);\r\n                }\r\n\r\n                let updateSpec: boolean = false;\r\n                let actionType: string = '';\r\n                let actionInfo: any = {};\r\n                const preSibling: KfItem | KfOmit = <KfItem | KfOmit>this.parentObj.children[this.idxInGroup - 1];\r\n                const nextSibling: KfItem | KfOmit = <KfItem | KfOmit>this.parentObj.children[this.idxInGroup + 1];\r\n                const firstSibling: KfItem = <KfItem>this.parentObj.children[0];\r\n                let preKfRight: number = containerBBox.left;\r\n                // let visualPresiblingDurationW: number = 0;\r\n                if (typeof preSibling !== 'undefined' && typeof firstSibling !== 'undefined') {\r\n                    // visualPresiblingDurationW = preSibling.container.getBoundingClientRect().right - preSibling.kfBg.getBoundingClientRect().right;\r\n                    if (preSibling instanceof KfItem) {\r\n                        preKfRight = preSibling.kfBg.getBoundingClientRect().right;\r\n                    } else {\r\n                        preKfRight = containerBBox.left - (firstSibling.container.getBoundingClientRect().right - firstSibling.kfBg.getBoundingClientRect().right);\r\n                    }\r\n                }\r\n                if (targetMoveItem instanceof KfGroup) {//this kf is align to others\r\n                    //find all kfs in this kfgroup\r\n                    const allKfItems: KfItem[] = targetMoveItem.fetchAllKfs();\r\n\r\n                    //set visible\r\n                    targetMoveItem.showGroupBg();\r\n                    targetMoveItem.hideTitle();\r\n                    targetMoveItem.hideMenu();\r\n                    targetMoveItem.unbindBgHover();\r\n                    document.onmousemove = (moveEvt) => {\r\n                        const alignWithGroupBBox: DOMRect = targetMoveItem.fetchAlignWithGroup().container.getBoundingClientRect();//fixed\r\n                        const currentMousePosi: ICoord = { x: moveEvt.pageX, y: moveEvt.pageY };\r\n                        const posiDiff: ICoord = { x: (currentMousePosi.x - oriMousePosi.x) / state.zoomLevel, y: (currentMousePosi.y - oriMousePosi.y) / state.zoomLevel };\r\n                        const oriTrans: ICoord = Tool.extractTransNums(targetMoveItem.container.getAttributeNS(null, 'transform'));\r\n                        targetMoveItem.translateContainer(oriTrans.x, oriTrans.y + posiDiff.y);\r\n\r\n                        const currentBBox: DOMRect = targetMoveItem.container.getBoundingClientRect();//fixed\r\n                        if ((currentBBox.top - alignWithGroupBBox.top) / state.zoomLevel <= KfTrack.TRACK_HEIGHT * 0.6 && (currentBBox.top - alignWithGroupBBox.top) / state.zoomLevel >= 0) {//set merge to true\r\n                            //change ref line to align frame\r\n                            allKfItems.forEach((kf: KfItem) => {\r\n                                kf.showAlignFrame();\r\n                                if (typeof IntelliRefLine.kfLineMapping.get(kf.id) !== 'undefined') {\r\n                                    const corresRefLine: IntelliRefLine = IntelliRefLine.allLines.get(IntelliRefLine.kfLineMapping.get(kf.id).lineId);\r\n                                    if (typeof corresRefLine !== 'undefined') {\r\n                                        corresRefLine.hideLine();\r\n                                    }\r\n                                }\r\n                            })\r\n                            //triger action\r\n                            if (targetMoveItem.alignMerge) {\r\n                                updateSpec = false;\r\n                            } else {\r\n                                updateSpec = true;\r\n                                actionType = action.UPDATE_ALIGN_MERGE;\r\n                                actionInfo = { aniId: this.aniId, merge: true }\r\n                            }\r\n                        } else if ((currentBBox.top - alignWithGroupBBox.top) / state.zoomLevel >= KfTrack.TRACK_HEIGHT * 0.6) {//set merge to false\r\n                            //change align frame to ref line\r\n                            allKfItems.forEach((kf: KfItem) => {\r\n                                kf.hideAlignFrame();\r\n                                if (typeof IntelliRefLine.kfLineMapping.get(kf.id) !== 'undefined') {\r\n                                    const corresRefLine: IntelliRefLine = IntelliRefLine.allLines.get(IntelliRefLine.kfLineMapping.get(kf.id).lineId);\r\n                                    if (typeof corresRefLine !== 'undefined') {\r\n                                        corresRefLine.showLine();\r\n                                    }\r\n                                }\r\n                            })\r\n                            //triger action\r\n                            if (targetMoveItem.alignMerge) {\r\n                                updateSpec = true;\r\n                                actionType = action.UPDATE_ALIGN_MERGE;\r\n                                actionInfo = { aniId: this.aniId, merge: false }\r\n                            } else {\r\n                                updateSpec = false;\r\n                            }\r\n                        }\r\n\r\n                        oriMousePosi = currentMousePosi;\r\n                    }\r\n                    document.onmouseup = () => {\r\n                        document.onmousemove = null;\r\n                        document.onmouseup = null;\r\n                        this.bindDragBarHover();\r\n                        Reducer.triger(action.UPDATE_MOUSE_MOVING, false);\r\n                        if (!updateSpec) {\r\n                            targetMoveItem.container.setAttributeNS(null, 'transform', targetMoveItem.container.getAttributeNS(null, '_transform'));\r\n                            targetMoveItem.parentObj.container.appendChild(targetMoveItem.container);\r\n                            if (targetMoveItem.alignMerge) {\r\n                                targetMoveItem.hideGroupBg();\r\n                                targetMoveItem.showTitle();\r\n                            } else {\r\n                                targetMoveItem.rerenderGroupBg();\r\n                                targetMoveItem.showTitle();\r\n                                targetMoveItem.showMenu();\r\n                            }\r\n                            targetMoveItem.bindBgHover();\r\n                        } else {\r\n                            Reducer.triger(actionType, actionInfo);\r\n                            popKfContainer.removeChild(targetMoveItem.container);\r\n                        }\r\n                    }\r\n                } else {//this kf is not aligned to others\r\n                    let looseFocus: boolean = false;\r\n                    document.onmousemove = (moveEvt) => {\r\n                        const currentMousePosi: ICoord = { x: moveEvt.pageX, y: moveEvt.pageY };\r\n                        const posiDiff: ICoord = { x: (currentMousePosi.x - oriMousePosi.x) / state.zoomLevel, y: (currentMousePosi.y - oriMousePosi.y) / state.zoomLevel };\r\n\r\n                        //check whether the kf is still inside its group\r\n                        looseFocus = this.checkDragOutOfGroup(posiDiff);\r\n\r\n                        if (!looseFocus) {\r\n                            const oriTrans: ICoord = Tool.extractTransNums(this.container.getAttributeNS(null, 'transform'));\r\n                            this.translateContainer(oriTrans.x + posiDiff.x, oriTrans.y);\r\n                            if (this.idxInGroup > 0) {//this is not the first kf in group, need to check the position relation with previous kf\r\n                                // if (this.idxInGroup > 0 && preSibling instanceof KfItem) {//this is not the first kf in group, need to check the position relation with previous kf\r\n                                const currentKfLeft: number = this.kfBg.getBoundingClientRect().left;//fixed\r\n                                // const preKfRight: number = preSibling.kfBg.getBoundingClientRect().right;//fixed\r\n                                const preKfDurationW: number = KfItem.BASIC_OFFSET_DURATION_W > this.durationWidth ? KfItem.BASIC_OFFSET_DURATION_W : this.durationWidth;\r\n                                const posiXDiff: number = (currentKfLeft - preKfRight) / state.zoomLevel;\r\n                                const currentKfOffsetW: number = KfItem.BASIC_OFFSET_DURATION_W > this.offsetWidth ? KfItem.BASIC_OFFSET_DURATION_W : this.offsetWidth;\r\n                                if (posiXDiff >= currentKfOffsetW + preKfDurationW) {//show both pre duration and current offset\r\n                                    if (this.hasOffset) {\r\n                                        this.showOffset();\r\n                                    } else {\r\n                                        if (typeof this.offsetIllus === 'undefined') {\r\n                                            this.drawOffset(KfItem.minOffset, this.kfHeight, 0, true);\r\n                                        }\r\n                                        this.container.appendChild(this.offsetIllus);\r\n                                    }\r\n                                    //show pre duration\r\n                                    if (preSibling instanceof KfItem) {\r\n                                        preSibling.cancelKfDragoverKf();\r\n                                        this.cancelKfDragoverKf();\r\n                                        if (preSibling.hasDuration || preSibling.hasHiddenDuration) {\r\n                                            preSibling.showDuration();\r\n                                        } else {\r\n                                            if (typeof preSibling.durationIllus === 'undefined') {\r\n                                                preSibling.drawDuration(KfItem.minDuration, this.kfWidth, this.kfHeight, false);\r\n                                            }\r\n                                            preSibling.container.appendChild(preSibling.durationIllus);\r\n                                        }\r\n                                    } else if (preSibling instanceof KfOmit) {\r\n                                        //show fake duration\r\n                                        hintPosiLine.showFakeDuration({ x: containerBBox.left, y: containerBBox.top }, containerBBox.height);\r\n                                    }\r\n\r\n                                    //target actions\r\n                                    if (!this.hasOffset && preSibling.hasDuration) {\r\n                                        updateSpec = true;//add default offset between kfs\r\n                                        actionType = action.UPDATE_DELAY_BETWEEN_KF;\r\n                                        actionInfo.aniId = this.parentObj.aniId;\r\n                                        actionInfo.delay = 300;\r\n                                    } else if (!preSibling.hasDuration && this.hasOffset) {\r\n                                        updateSpec = true;//change timing ref from with to after\r\n                                        actionType = action.UPDATE_KF_TIMING_REF;\r\n                                        actionInfo.aniId = this.parentObj.aniId;\r\n                                        actionInfo.ref = TimingSpec.timingRef.previousEnd;\r\n                                    } else {\r\n                                        updateSpec = false;\r\n                                        actionInfo = {};\r\n                                    }\r\n                                } else if (posiXDiff >= preKfDurationW && posiXDiff < currentKfOffsetW + preKfDurationW) {//show pre duration\r\n                                    if (this.hasOffset) {\r\n                                        this.hideOffset();\r\n                                    } else {\r\n                                        if (typeof this.offsetIllus !== 'undefined' && this.container.contains(this.offsetIllus)) {\r\n                                            this.container.removeChild(this.offsetIllus);\r\n                                        }\r\n                                    }\r\n                                    //show pre duration \r\n                                    if (preSibling instanceof KfItem) {\r\n                                        preSibling.cancelKfDragoverKf();\r\n                                        this.cancelKfDragoverKf();\r\n                                        if (preSibling.hasDuration || preSibling.hasHiddenDuration) {\r\n                                            preSibling.showDuration();\r\n                                        } else {\r\n                                            if (typeof preSibling.durationIllus === 'undefined') {\r\n                                                preSibling.drawDuration(KfItem.minDuration, this.kfWidth, this.kfHeight, false);\r\n                                            }\r\n                                            preSibling.container.appendChild(preSibling.durationIllus);\r\n                                        }\r\n                                    } else if (preSibling instanceof KfOmit) {\r\n                                        //show fake duration\r\n                                        hintPosiLine.showFakeDuration({ x: containerBBox.left, y: containerBBox.top }, containerBBox.height);\r\n                                    }\r\n\r\n                                    //target actions\r\n                                    if (this.hasOffset && preSibling.hasDuration) {\r\n                                        updateSpec = true;//remove offset between kfs\r\n                                        actionType = action.REMOVE_DELAY_BETWEEN_KF;\r\n                                        actionInfo.aniId = this.parentObj.aniId;\r\n                                    } else if (this.hasOffset && !preSibling.hasDuration) {\r\n                                        updateSpec = true;//change timing ref from with to after and remove offset\r\n                                        actionType = action.UPDATE_TIMING_REF_DELAY_KF;\r\n                                        actionInfo.aniId = this.parentObj.aniId;\r\n                                        actionInfo.ref = TimingSpec.timingRef.previousEnd;\r\n                                        // actionInfo.delay = 300;\r\n                                    } else {\r\n                                        updateSpec = false;\r\n                                        actionInfo = {};\r\n                                    }\r\n                                } else if (posiXDiff < preKfDurationW && posiXDiff >= 0) {//show current offset and hide pre duration\r\n                                    if (this.hasOffset) {\r\n                                        this.showOffset();\r\n                                    } else {\r\n                                        if (typeof this.offsetIllus === 'undefined') {\r\n                                            this.drawOffset(KfItem.minOffset, this.kfHeight, 0, true);\r\n                                        }\r\n                                        this.container.appendChild(this.offsetIllus);\r\n                                    }\r\n                                    //hide pre duration\r\n                                    if (preSibling instanceof KfItem) {\r\n                                        preSibling.cancelKfDragoverKf();\r\n                                        this.cancelKfDragoverKf();\r\n                                        if (preSibling.hasDuration || preSibling.hasHiddenDuration) {\r\n                                            preSibling.hideDuration();\r\n                                        } else {\r\n                                            if (typeof preSibling.durationIllus !== 'undefined' && preSibling.container.contains(preSibling.durationIllus)) {\r\n                                                preSibling.container.removeChild(preSibling.durationIllus);\r\n                                            }\r\n                                        }\r\n                                    } else if (preSibling instanceof KfOmit) {\r\n                                        //hide fake duration\r\n                                        hintPosiLine.removeFakeDuration();\r\n                                    }\r\n\r\n                                    //target actions\r\n                                    if (!this.hasOffset && preSibling.hasDuration) {\r\n                                        updateSpec = true;//change timing ref from after to with, and add default offset\r\n                                        actionType = action.UPDATE_TIMING_REF_DELAY_KF;\r\n                                        actionInfo.aniId = this.parentObj.aniId;\r\n                                        actionInfo.ref = TimingSpec.timingRef.previousStart;\r\n                                        actionInfo.delay = 300;\r\n                                    } else if (this.hasOffset && preSibling.hasDuration) {\r\n                                        updateSpec = true; //change timing ref from after to with\r\n                                        actionType = action.UPDATE_KF_TIMING_REF;\r\n                                        actionInfo.aniId = this.parentObj.aniId;\r\n                                        actionInfo.ref = TimingSpec.timingRef.previousStart;\r\n                                    } else {\r\n                                        updateSpec = false;\r\n                                        actionInfo = {};\r\n                                    }\r\n                                } else {//hide pre duration, this offset and highlight them\r\n                                    if (this.hasOffset) {\r\n                                        this.hideOffset();\r\n                                    } else {\r\n                                        if (typeof this.offsetIllus !== 'undefined' && this.container.contains(this.offsetIllus)) {\r\n                                            this.container.removeChild(this.offsetIllus);\r\n                                        }\r\n                                    }\r\n\r\n                                    //hide pre duration\r\n                                    if (preSibling instanceof KfItem) {\r\n                                        preSibling.kfDragoverKf();\r\n                                        this.kfDragoverKf();\r\n                                        if (preSibling.hasDuration || preSibling.hasHiddenDuration) {\r\n                                            preSibling.hideDuration();\r\n                                        } else {\r\n                                            if (typeof preSibling.durationIllus !== 'undefined' && preSibling.container.contains(preSibling.durationIllus)) {\r\n                                                preSibling.container.removeChild(preSibling.durationIllus);\r\n                                            }\r\n                                        }\r\n                                    } else if (preSibling instanceof KfOmit) {\r\n                                        //hide fake duration\r\n                                        this.kfDragoverKf();\r\n                                        hintPosiLine.removeFakeDuration();\r\n                                    }\r\n\r\n                                    //target actions\r\n                                    updateSpec = true;//remove lowest level grouping\r\n                                    actionType = action.REMOVE_LOWESTGROUP;\r\n                                    actionInfo.aniId = this.parentObj.aniId;\r\n                                }\r\n                            }\r\n                            oriMousePosi = currentMousePosi;\r\n                        }\r\n                    }\r\n                    document.onmouseup = () => {\r\n                        document.onmousemove = null;\r\n                        document.onmouseup = null;\r\n                        this.bindDragBarHover();\r\n                        hintPosiLine.removeHintLine();\r\n                        hintPosiLine.removeFakeDuration();\r\n                        Reducer.triger(action.UPDATE_MOUSE_MOVING, false);\r\n                        if (!updateSpec || looseFocus) {\r\n                            if (typeof preSibling !== 'undefined' && preSibling instanceof KfItem) {\r\n                                preSibling.cancelKfDragoverKf();\r\n                                this.cancelKfDragoverKf();\r\n                                preSibling.showDuration();\r\n                            }\r\n                            this.container.setAttributeNS(null, 'transform', this.container.getAttributeNS(null, '_transform'));\r\n                            if (this.treeLevel === 1) {\r\n                                // this.parentObj.container.insertBefore(this.container, this.parentObj.groupMenu.container);\r\n                                if (typeof nextSibling !== 'undefined') {\r\n                                    this.parentObj.container.insertBefore(this.container, nextSibling.container);\r\n                                } else {\r\n                                    this.parentObj.container.insertBefore(this.container, this.parentObj.groupMenu.container);\r\n                                }\r\n                            } else {\r\n                                if (typeof nextSibling !== 'undefined') {\r\n                                    this.parentObj.container.insertBefore(this.container, nextSibling.container);\r\n                                } else {\r\n                                    this.parentObj.container.appendChild(this.container);\r\n                                }\r\n                            }\r\n                        } else {\r\n                            State.tmpStateBusket.push({\r\n                                historyAction: { actionType: action.UPDATE_SPEC_ANIMATIONS, actionVal: JSON.stringify(state.spec.animations) },\r\n                                currentAction: { actionType: actionType, actionVal: actionInfo }\r\n                            })\r\n                            State.saveHistory();\r\n                            Reducer.triger(actionType, actionInfo);\r\n                            popKfContainer.removeChild(this.container);\r\n                        }\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n\r\n        this.hoverBtnContainer.appendChild(this.dragBtn);\r\n\r\n        this.container.appendChild(this.hoverBtnContainer);\r\n    }\r\n\r\n    /**\r\n     * when dragging a group, check whether it is outside its parent group\r\n     */\r\n    public checkDragOutOfGroup(posiDiff: ICoord): boolean {\r\n        const parentBBox: DOMRect = this.parentObj.container.getBoundingClientRect();\r\n        const tmpCurrentBBox: DOMRect = this.container.getBoundingClientRect();\r\n\r\n        if (tmpCurrentBBox.top + posiDiff.y < parentBBox.top ||\r\n            tmpCurrentBBox.bottom + posiDiff.y > parentBBox.bottom ||\r\n            tmpCurrentBBox.left + posiDiff.x < parentBBox.left ||\r\n            tmpCurrentBBox.right + posiDiff.x > parentBBox.right) {\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n\r\n    public drawKfBg(treeLevel: number, size?: ISize): void {\r\n        if (typeof size !== 'undefined') {\r\n            this.kfWidth = size.w;\r\n        } else {\r\n            this.kfWidth = KfItem.KF_WIDTH - treeLevel * KfItem.KF_W_STEP;\r\n        }\r\n        this.kfBg = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n        this.kfBg.setAttributeNS(null, 'fill', '#fff');\r\n        this.kfBg.setAttributeNS(null, 'x', `${typeof this.offsetIllus === 'undefined' ? 0 : this.offsetWidth}`);\r\n        this.kfBg.setAttributeNS(null, 'y', '0');\r\n        this.kfBg.setAttributeNS(null, 'width', `${this.kfWidth}`);\r\n        this.kfBg.setAttributeNS(null, 'height', `${this.kfHeight}`);\r\n        this.totalWidth += this.kfWidth;\r\n    }\r\n\r\n    public drawChart(allMarks: string[], allGroupMarks: string[], marksThisKf: string[], chartThumbnail?: string): void {\r\n        if (typeof chartThumbnail === 'undefined') {\r\n            const svg: HTMLElement = document.getElementById('visChart');\r\n            Array.from(svg.getElementsByClassName('mark')).forEach((m: HTMLElement) => {\r\n                if (!allMarks.includes(m.id) && !marksThisKf.includes(m.id)) {\r\n                    m.setAttributeNS(null, '_opacity', m.getAttributeNS(null, 'opacity') ? m.getAttributeNS(null, 'opacity') : '1');\r\n                    m.setAttributeNS(null, 'opacity', '0');\r\n                    m.classList.add('translucent-mark');\r\n                } else if (allMarks.includes(m.id) && !marksThisKf.includes(m.id) && !allGroupMarks.includes(m.id)) {\r\n                    m.setAttributeNS(null, '_opacity', m.getAttributeNS(null, 'opacity') ? m.getAttributeNS(null, 'opacity') : '1');\r\n                    m.setAttributeNS(null, 'opacity', '0.4');\r\n                    m.classList.add('translucent-mark');\r\n                }\r\n            })\r\n            this.renderChartToCanvas(svg, true);\r\n            Array.from(svg.getElementsByClassName('translucent-mark')).forEach((m: HTMLElement) => {\r\n                m.classList.remove('translucent-mark');\r\n                m.setAttributeNS(null, 'opacity', m.getAttributeNS(null, '_opacity'));\r\n            })\r\n        } else {\r\n            const tmpContainer: HTMLDivElement = document.createElement('div');\r\n            tmpContainer.innerHTML = chartThumbnail;\r\n            this.renderChartToCanvas(<HTMLElement>tmpContainer.children[0], false);\r\n        }\r\n    }\r\n\r\n    public renderChartToCanvas(svg: HTMLElement, doEnlarge: boolean): void {\r\n        const shownThumbnail: number = Math.floor((state.zoomLevel - ViewWindow.MIN_ZOOM_LEVEL) / ((ViewWindow.MAX_ZOOM_LEVEL - ViewWindow.MIN_ZOOM_LEVEL) / (state.chartThumbNailZoomLevels / 2)));\r\n        for (let i = 0; i < state.chartThumbNailZoomLevels / 2; i++) {\r\n            if (doEnlarge) {\r\n                Tool.enlargeMarks(svg, 'translucent-mark', state.chartThumbNailZoomLevels / 2 - i, false);\r\n            }\r\n            this.chartThumbnails.push(this.createImage(svg, shownThumbnail - 1 === i));\r\n            if (doEnlarge) {\r\n                Tool.resetTxtCover(svg);\r\n            }\r\n        }\r\n        if (doEnlarge) {\r\n            Tool.resetMarkSize(svg, 'translucent-mark', false);\r\n        }\r\n    }\r\n\r\n    public createImage(svg: HTMLElement, shown: boolean): SVGImageElement {\r\n        const imgSrc: string = Tool.svg2url(svg);\r\n        const chartThumbnail: SVGImageElement = document.createElementNS('http://www.w3.org/2000/svg', 'image');\r\n        if (!shown) {\r\n            chartThumbnail.classList.add('no-display-ele');\r\n        }\r\n        chartThumbnail.setAttributeNS(null, 'x', `${typeof this.offsetIllus === 'undefined' ? 0 : this.offsetWidth}`);\r\n        chartThumbnail.setAttributeNS(null, 'y', '0');\r\n        chartThumbnail.setAttributeNS(null, 'width', `${this.kfWidth}`);\r\n        chartThumbnail.setAttributeNS(null, 'height', `${this.kfHeight}`);\r\n        chartThumbnail.setAttributeNS(null, 'href', imgSrc);\r\n        this.container.appendChild(chartThumbnail);\r\n        return chartThumbnail;\r\n    }\r\n\r\n    public highlightKf() {\r\n        this.isHighlighted = true;\r\n        this.kfBg.setAttributeNS(null, 'class', 'highlight-kf');\r\n    }\r\n\r\n    public cancelHighlightKf() {\r\n        this.isHighlighted = false;\r\n        this.kfBg.classList.remove('highlight-kf');\r\n    }\r\n\r\n    public transNextKf(transX: number) {\r\n        let nextKf: KfItem | KfOmit;\r\n        for (let i = 0, len = this.parentObj.children.length; i < len; i++) {\r\n            if (this.parentObj.children[i].id === this.id) {\r\n                nextKf = <KfItem | KfOmit>this.parentObj.children[i + 1];\r\n                break;\r\n            }\r\n        }\r\n        // this.parentObj.translateGroup(nextKf, transX, true);\r\n        const oriTrans: ICoord = Tool.extractTransNums(nextKf.container.getAttributeNS(null, 'transform'));\r\n        nextKf.translateContainer(oriTrans.x + transX, oriTrans.y);\r\n        this.parentObj.updateSize();\r\n    }\r\n\r\n    public startAdjustingTime() {\r\n        this.parentObj.transHideTitle();\r\n    }\r\n\r\n    public dragSelOver() {\r\n        Tool.clearDragOver();\r\n        this.kfBg.setAttributeNS(null, 'class', 'dragover-kf');\r\n        KfItem.dragoverKf = this;\r\n    }\r\n\r\n    public dragSelOut() {\r\n        this.kfBg.classList.remove('dragover-kf');\r\n        KfItem.dragoverKf = undefined;\r\n    }\r\n\r\n    public dropSelOn() { }\r\n\r\n    /**\r\n     * translate kfs and groups aligned to this kf\r\n     * @param transX \r\n     * @param updateAlignedKfs: might further influence other aligned elements \r\n     */\r\n    public translateAlignedGroups(transX: number, updateAlignedKfs: boolean): void {\r\n        if (typeof KfItem.allKfInfo.get(this.id).alignWithKfs !== 'undefined') {\r\n            IntelliRefLine.updateLine(this.id);//k is a alignwith kf, update refline\r\n            KfItem.allKfInfo.get(this.id).alignWithKfs.forEach((kfId: number) => {\r\n                const tmpKfItem = KfItem.allKfItems.get(kfId);\r\n                if (typeof tmpKfItem !== 'undefined') {\r\n                    // tmpKfItem.parentObj.translateGroup(tmpKfItem, transX, updateAlignedKfs, true, true);\r\n                    const tmpTrans: ICoord = Tool.extractTransNums(tmpKfItem.container.getAttributeNS(null, 'transform'));\r\n                    tmpKfItem.translateContainer(tmpTrans.x + transX, tmpTrans.y);\r\n                    let [diffX, currentGroupWidth, childHeight] = tmpKfItem.parentObj.updateSize();\r\n                    const oriTrans: ICoord = Tool.extractTransNums(tmpKfItem.parentObj.container.getAttributeNS(null, 'transform'));\r\n                    tmpKfItem.parentObj.translateContainer(oriTrans.x + diffX, oriTrans.y);\r\n                    //check whether need to update omit\r\n                    tmpKfItem.parentObj.kfOmits.forEach((kfo: KfOmit) => {\r\n                        const omitTrans: ICoord = Tool.extractTransNums(kfo.container.getAttributeNS(null, 'transform'));\r\n                        if (omitTrans.x >= tmpTrans.x) {\r\n                            let omitTransX: number = diffX === 0 ? transX : 0;\r\n                            kfo.translateContainer(omitTrans.x + omitTransX, omitTrans.y);\r\n                        }\r\n                    })\r\n                }\r\n            })\r\n        }\r\n    }\r\n\r\n    public zoomItem(shownThumbnail: number): void {\r\n        this.chartThumbnails.forEach((ct: SVGImageElement, i: number) => {\r\n            if (i === shownThumbnail) {\r\n                ct.classList.remove('no-display-ele');\r\n            } else {\r\n                ct.classList.add('no-display-ele');\r\n            }\r\n        })\r\n    }\r\n\r\n    /**\r\n     * check whether there are ancessters which are not rendered when zoomming\r\n     */\r\n    public checkParentRenderedWhenZooming(): boolean {\r\n        let parent: KfGroup | KfTrack = this.parentObj;\r\n        while (true) {\r\n            if (parent instanceof KfTrack) {\r\n                break;\r\n            } else {\r\n                if (!parent.renderWhenZooming || !parent.rendered) {\r\n                    return false;\r\n                }\r\n                parent = parent.parentObj;\r\n            }\r\n        }\r\n        return true;\r\n    }\r\n\r\n    /**\r\n     * return omit pattern and total height, currnet kf is the alignwith kf\r\n     */\r\n    public findOmitPattern(): [IOmitPattern[], number] {\r\n        const currentKfInfo: IKeyframe = KfItem.allKfInfo.get(this.id);\r\n        const omitPattern: IOmitPattern[] = [];\r\n        let totalHeight: number = 0;\r\n        if (typeof currentKfInfo !== 'undefined') {\r\n            omitPattern.push({\r\n                merge: false,\r\n                timing: TimingSpec.timingRef.previousStart,\r\n                hasOffset: this.hasOffset,\r\n                hasDuration: true\r\n            })\r\n            totalHeight = KfTrack.TRACK_HEIGHT;\r\n            currentKfInfo.alignWithKfs.forEach((tmpKfId: number) => {\r\n                const tmpKf: KfItem = KfItem.allKfItems.get(tmpKfId);\r\n                const tmpKfInfo: IKeyframe = KfItem.allKfInfo.get(tmpKfId);\r\n                const tmpKfGroup: KfGroup = tmpKf.parentObj;\r\n                if (!tmpKfGroup.alignMerge) {\r\n                    totalHeight += KfTrack.TRACK_HEIGHT;\r\n                }\r\n                omitPattern.push({\r\n                    merge: tmpKfGroup.alignMerge,\r\n                    timing: tmpKfInfo.timingRef,\r\n                    hasOffset: tmpKf.hasOffset,\r\n                    hasDuration: true\r\n                })\r\n            })\r\n        }\r\n        return [omitPattern, totalHeight];\r\n    }\r\n\r\n    public showItemWhenZooming(): void {\r\n        if (this.rendered && state.charts.length === 1) {\r\n            const currentKfWidth: number = this.container.getBoundingClientRect().width / state.zoomLevel;//current width with no white space (when align to others, the white space is included in the totalWidth attrbute)\r\n            let kfWidthWithWhiteSpace: number = currentKfWidth;\r\n            const currentKfTrans: ICoord = Tool.extractTransNums(this.container.getAttributeNS(null, 'transform'));\r\n            let currentKfIdx: number = this.idxInGroup;\r\n            let passedOmits: number = 0;\r\n            let omitWidth: number = KfOmit.OMIT_WIDTH;\r\n\r\n            while (true) {\r\n                if (currentKfIdx - 1 >= 0) {\r\n                    const preChild: KfItem | KfOmit = <KfItem | KfOmit>this.parentObj.children[currentKfIdx - 1];\r\n                    let preChildWidth: number = preChild.container.getBoundingClientRect().width / state.zoomLevel;\r\n                    let preChildTrans: ICoord = Tool.extractTransNums(preChild.container.getAttributeNS(null, 'transform'));\r\n                    if (preChild instanceof KfItem) {\r\n                        if (preChildTrans.x + preChildWidth + passedOmits * (KfGroup.PADDING * 2 + omitWidth) === currentKfTrans.x) {\r\n                            break;\r\n                        } else if (currentKfTrans.x > preChildTrans.x + preChildWidth + passedOmits * (KfGroup.PADDING * 2 + omitWidth)) {\r\n                            kfWidthWithWhiteSpace += (currentKfTrans.x - preChildTrans.x - preChildWidth - passedOmits * (KfGroup.PADDING * 2 + omitWidth));\r\n                            break;\r\n                        }\r\n                    } else if (preChild instanceof KfOmit) {\r\n                        omitWidth = KfOmit.maxOmitWidth;\r\n                        // omitWidth = preChild.oWidth;\r\n                        passedOmits++;\r\n                    }\r\n                    currentKfIdx--;\r\n                } else {\r\n                    break;\r\n                }\r\n            }\r\n\r\n            //if this kf is aligned to or with some kf, fetch the line\r\n            let refLine: IntelliRefLine;\r\n            if (typeof IntelliRefLine.kfLineMapping.get(this.id) !== 'undefined') {\r\n                refLine = IntelliRefLine.allLines.get(IntelliRefLine.kfLineMapping.get(this.id).lineId);\r\n            } else {\r\n                //check whether this is an alignto kf\r\n                if (typeof KfItem.allKfInfo.get(this.id).alignTo !== 'undefined' && typeof IntelliRefLine.kfLineMapping.get(KfItem.allKfInfo.get(this.id).alignTo) !== 'undefined') {\r\n                    refLine = IntelliRefLine.allLines.get(IntelliRefLine.kfLineMapping.get(KfItem.allKfInfo.get(this.id).alignTo).lineId);\r\n                }\r\n            }\r\n            const kfZoomLevel: number = Tool.calKfZoomLevel();\r\n            if (!this.renderWhenZooming) {//rendered -> not rendered : scale down\r\n                this.container.setAttributeNS(null, 'display', 'none');\r\n                if (typeof refLine !== 'undefined') {\r\n                    refLine.zoomHideLine();\r\n                }\r\n                if (this.parentObj.kfOmits.length === 0) {\r\n                    const kfTrans: ICoord = Tool.extractTransNums(this.container.getAttributeNS(null, 'transform'));\r\n                    const kfOmit: KfOmit = new KfOmit();\r\n                    //decide the omit pattern\r\n                    let omitType: string = KfOmit.KF_OMIT;\r\n                    let omitStartY: number = this.kfHeight / 2;\r\n                    if (typeof KfItem.allKfInfo.get(this.id).alignWithKfs !== 'undefined') {\r\n                        if (KfItem.allKfInfo.get(this.id).alignWithKfs.length > 0) {\r\n                            omitType = KfOmit.KF_ALIGN;\r\n                            [kfOmit.omitPattern, omitStartY] = this.findOmitPattern();\r\n                            omitStartY /= 2;\r\n                        }\r\n                    }\r\n                    kfOmit.createOmit(omitType, kfTrans.x + kfWidthWithWhiteSpace - KfGroup.PADDING, 1, this.parentObj, this.hasOffset, this.hasDuration, omitStartY, this.idxInGroup);\r\n                    this.parentObj.insertChild(kfOmit, this.idxInGroup + 1)\r\n                    kfOmit.idxInGroup = this.idxInGroup + 1;\r\n                    this.parentObj.kfOmits.push(kfOmit);\r\n                    this.parentObj.translateGroup(this, -kfWidthWithWhiteSpace + KfOmit.maxOmitWidth, false, false, false);\r\n                    //update the position of omits\r\n                    const oriOmitTrans: ICoord = Tool.extractTransNums(kfOmit.container.getAttributeNS(null, 'transform'));\r\n                    kfOmit.updateTrans(oriOmitTrans.x - KfOmit.maxOmitWidth, oriOmitTrans.y + kfOmit.oHeight / 2);\r\n                } else {\r\n                    this.parentObj.kfOmits[0].updateNum(this.parentObj.kfOmits[0].omittedNum + 1);\r\n                    this.parentObj.translateGroup(this, -kfWidthWithWhiteSpace, false, false, false);\r\n                }\r\n            } else {//not rendered -> rendered: scale up\r\n                this.container.setAttributeNS(null, 'display', '');\r\n                if (typeof refLine !== 'undefined') {\r\n                    refLine.zoomShowLine();\r\n                }\r\n                if (this.parentObj.kfOmits[0].omittedNum === 1) {//remove kfOmit\r\n                    const tmpOmit: KfOmit = this.parentObj.kfOmits[0];\r\n                    tmpOmit.removeOmit(this.parentObj);\r\n                    this.parentObj.removeChild(this.parentObj.kfOmits[0].idxInGroup);\r\n                    this.parentObj.translateGroup(<KfItem | KfOmit>this.parentObj.children[this.idxInGroup - 1], -omitWidth, false, false, false);\r\n                    this.parentObj.translateGroup(this, kfWidthWithWhiteSpace, false, false, false);\r\n                    this.parentObj.kfOmits.splice(0, 1);\r\n                } else {//update number\r\n                    this.parentObj.kfOmits[0].updateNum(this.parentObj.kfOmits[0].omittedNum - 1);\r\n                    this.parentObj.translateGroup(this, kfWidthWithWhiteSpace, false, false, false);\r\n                    //restore the omit position to the right side of its preItem\r\n                    // const preItemTrans: ICoord = Tool.extractTransNums(this.parentObj.kfOmits[0].preItem.container.getAttributeNS(null, 'transform'));\r\n                    // const oriOmitTrans: ICoord = Tool.extractTransNums(this.parentObj.kfOmits[0].container.getAttributeNS(null, 'transform'));\r\n                    // const preKfWidth: number = (<KfItem>this.parentObj.kfOmits[0].preItem).container.getBoundingClientRect().width / state.zoomLevel;\r\n                    // this.parentObj.kfOmits[0].updateTrans(preItemTrans.x + preKfWidth, oriOmitTrans.y + this.parentObj.kfOmits[0].oHeight / 2);\r\n                    this.transOmitsWithItem();\r\n                }\r\n            }\r\n        }\r\n    }\r\n}","import KfGroup from \"./kfGroup\";\r\nimport KfItem from \"./kfItem\";\r\nimport { ICoord } from \"../../util/ds\";\r\nimport Tool from \"../../util/tool\";\r\nimport { state } from \"../../app_backup/state\";\r\nimport { IOmitPattern } from \"../../app_backup/core/ds\";\r\nimport IntelliRefLine from \"./intelliRefLine\";\r\nimport { KfContainer } from \"../kfContainer\";\r\nimport KfTrack from \"./kfTrack\";\r\nimport { TimingSpec, Animation } from \"../../canis/moduleIdx\";\r\n\r\nexport default class KfOmit {\r\n    static OMIT_WIDTH: number = 36;\r\n    static OMIT_W_UNIT: number = KfOmit.OMIT_WIDTH / 6;\r\n    static OMIT_SUB_WIDTH: number = 24;\r\n    static OMIT_SUB_W_UNIT: number = KfOmit.OMIT_SUB_WIDTH / 6;\r\n    static OMIT_HEIGHT: number = 20;\r\n    static OMIT_SUB_HEIGHT: number = 14;\r\n    static KF_OMIT: string = 'kfOmit';\r\n    static KF_GROUP_OMIT: string = 'kfGroupOmit';\r\n    static KF_ALIGN: string = 'kfAlign';\r\n    static omitIdx: number = 0;\r\n    static maxOmitWidth: number = KfOmit.OMIT_WIDTH;\r\n\r\n    public id: string;\r\n    public idxInGroup: number = -1;\r\n    public isHidden: boolean = false;\r\n    public oWidth: number = KfOmit.OMIT_WIDTH;\r\n    public oHeight: number = KfOmit.OMIT_HEIGHT;\r\n    public container: SVGGElement;\r\n    public num: SVGTextElement;\r\n    public hasOffset: boolean;\r\n    public hasDuration: boolean;\r\n    public iconContainer: SVGGElement;\r\n    public parentObj: KfGroup;\r\n    public preItem: KfItem | KfGroup;\r\n    public startX: number;\r\n    public startY: number;\r\n    public omitType: string;\r\n    public omitPattern: {\r\n        merge: boolean\r\n        timing: string\r\n        hasOffset: boolean\r\n        hasDuration: boolean\r\n    }[] = [];\r\n    public omittedNum: number;//could be kfitem or kfgroup\r\n    public kfIcon: SVGRectElement;\r\n    public offsetIcon: SVGRectElement;\r\n    public durationIcon: SVGRectElement;\r\n    public IconComb: SVGGElement;\r\n    public rendered: boolean = true;\r\n    public useTag: SVGUseElement;\r\n\r\n    public static reset() {\r\n        this.omitIdx = 0;\r\n        this.maxOmitWidth = KfOmit.OMIT_WIDTH;\r\n    }\r\n\r\n    public createOmit(omitType: string, startX: number, omittedNum: number, parentObj: KfGroup, hasOffset: boolean, hasDuration: boolean, startY: number, preItemIdx: number = -1): void {\r\n        this.omitType = omitType;\r\n        this.hasOffset = hasOffset;\r\n        this.hasDuration = hasDuration;\r\n        this.parentObj = parentObj;\r\n        // this.preItem = preItemIdx === -1 ? <KfGroup | KfItem>this.parentObj.children[this.parentObj.children.length - 1] : <KfGroup | KfItem>this.parentObj.children[preItemIdx];\r\n        this.omittedNum = omittedNum;\r\n        this.startX = startX;\r\n        this.startY = startY;\r\n        this.id = `kfOmit${KfOmit.omitIdx}`;\r\n        KfOmit.omitIdx++;\r\n\r\n        //assign pre item\r\n        if (preItemIdx !== -1 && this.parentObj.children[preItemIdx].rendered) {\r\n            this.preItem = <KfGroup | KfItem>this.parentObj.children[preItemIdx];\r\n        } else {\r\n            let lastRenderedItem: KfGroup | KfItem;\r\n            this.parentObj.children.forEach((c: KfGroup | KfItem | KfOmit) => {\r\n                if ((c instanceof KfGroup || c instanceof KfItem) && c.rendered) {\r\n                    lastRenderedItem = c;\r\n                }\r\n            })\r\n            this.preItem = lastRenderedItem;\r\n        }\r\n\r\n        if (this.preItem instanceof KfItem) {\r\n            if (this.preItem.hasHiddenDuration) {\r\n                this.startX -= this.preItem.durationWidth;\r\n            }\r\n        }\r\n\r\n        if (typeof this.parentObj.container !== 'undefined') {\r\n            this.renderOmit();\r\n        }\r\n    }\r\n\r\n    public renderOmit() {\r\n        this.container = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n        this.container.id = this.id;\r\n        //create thumbnail\r\n        this.createThumbnail(this.omittedNum);\r\n        //create dots\r\n        this.createDots();\r\n        this.parentObj.container.appendChild(this.container);\r\n        // if (this.parentObj.children[this.parentObj.children.length - 1] instanceof KfItem) {\r\n        // this.correctTrans(this.startY - this.oHeight / 2);\r\n        // }\r\n        if (typeof this.parentObj.alignTarget !== 'undefined' && this.parentObj.alignType === Animation.alignTarget.withEle) {\r\n            this.hideOmit();\r\n        }\r\n        console.log('init omit position: ', this.startX+KfGroup.PADDING);\r\n        this.translateContainer(this.startX + KfGroup.PADDING, this.startY - this.oHeight / 2);\r\n        if (this.omitType === KfOmit.KF_ALIGN) {\r\n            this.createUseTag();\r\n        }\r\n    }\r\n\r\n    public createUseTag() {\r\n        this.useTag = document.createElementNS('http://www.w3.org/2000/svg', 'use');\r\n        this.useTag.setAttributeNS('http://www.w3.org/1999/xlink', 'href', `#${this.id}`);\r\n        document.getElementById(KfContainer.KF_OMIT).appendChild(this.useTag);\r\n        this.updateUseTagPosi();\r\n        // this.hideOmit();\r\n    }\r\n\r\n    public updateUseTagPosi() {\r\n        const kfFgBbox: DOMRect = document.getElementById(KfContainer.KF_FG).getBoundingClientRect();\r\n        const parentBbox: DOMRect = this.parentObj.groupBg.getBoundingClientRect();\r\n        this.useTag.setAttributeNS(null, 'x', `${(parentBbox.x - kfFgBbox.x) / state.zoomLevel}`);\r\n        this.useTag.setAttributeNS(null, 'y', `${(parentBbox.y - kfFgBbox.y) / state.zoomLevel}`);\r\n    }\r\n\r\n    public createThumbnail(omittedNum: number): void {\r\n        this.iconContainer = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n        this.iconContainer.setAttributeNS(null, 'transform', `translate(${KfOmit.OMIT_W_UNIT / 2}, 0)`);\r\n        switch (this.omitType) {\r\n            case KfOmit.KF_OMIT:\r\n                this.kfIcon = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n                this.kfIcon.setAttributeNS(null, 'y', '0');\r\n                this.kfIcon.setAttributeNS(null, 'fill', '#fff');\r\n                this.kfIcon.setAttributeNS(null, 'height', `${this.oHeight}`);\r\n                this.iconContainer.appendChild(this.kfIcon);\r\n                break;\r\n            case KfOmit.KF_ALIGN:\r\n                this.createThumbnailComb();\r\n                this.iconContainer.appendChild(this.IconComb);\r\n                break;\r\n            case KfOmit.KF_GROUP_OMIT:\r\n                this.kfIcon = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n                this.kfIcon.setAttributeNS(null, 'y', '0');\r\n                this.kfIcon.setAttributeNS(null, 'fill', 'rgb(239, 239, 239)');\r\n                this.kfIcon.setAttributeNS(null, 'stroke', '#898989');\r\n                this.kfIcon.setAttributeNS(null, 'height', `${this.oHeight}`);\r\n                this.kfIcon.setAttributeNS(null, 'width', `${KfOmit.OMIT_W_UNIT * 5}`);\r\n                this.kfIcon.setAttributeNS(null, 'rx', `${KfGroup.GROUP_RX / 2}`);\r\n                this.iconContainer.appendChild(this.kfIcon);\r\n                break;\r\n        }\r\n\r\n        this.offsetIcon = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n        this.offsetIcon.setAttributeNS(null, 'x', '0');\r\n        this.offsetIcon.setAttributeNS(null, 'y', '0');\r\n        this.offsetIcon.setAttributeNS(null, 'fill', KfItem.OFFSET_COLOR);\r\n        this.offsetIcon.setAttributeNS(null, 'height', `${this.oHeight}`);\r\n        this.durationIcon = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n        console.log('omit pattern: ', this.preItem)\r\n        if (typeof this.preItem !== 'undefined') {\r\n            this.durationIcon.setAttributeNS(null, 'y', this.preItem.hasHiddenDuration ? `${-this.oHeight / 4}` : '0');\r\n            this.durationIcon.setAttributeNS(null, 'height', this.preItem.hasHiddenDuration ? `${5 * this.oHeight / 4}` : `${this.oHeight}`);\r\n        } else {\r\n            this.durationIcon.setAttributeNS(null, 'y', '0');\r\n            this.durationIcon.setAttributeNS(null, 'height', `${this.oHeight}`);\r\n        }\r\n        this.durationIcon.setAttributeNS(null, 'fill', KfItem.DURATION_COLOR);\r\n        this.iconContainer.appendChild(this.offsetIcon);\r\n        this.iconContainer.appendChild(this.durationIcon);\r\n        this.updateThumbnail(this.hasOffset, this.hasDuration);\r\n        this.createNum(omittedNum);\r\n        this.container.appendChild(this.iconContainer);\r\n    }\r\n\r\n    public createThumbnailComb() {\r\n        this.IconComb = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n        let trackCount: number = 0;\r\n        this.oWidth = KfOmit.OMIT_SUB_WIDTH;\r\n        this.oHeight = KfOmit.OMIT_SUB_HEIGHT;\r\n        this.omitPattern.forEach((ommittedKf: IOmitPattern, idx: number) => {\r\n            let trackNum: number = 1;\r\n            if (ommittedKf.timing === TimingSpec.timingRef.previousStart || !ommittedKf.merge) {\r\n                trackCount++;\r\n                trackNum = trackCount;\r\n            }\r\n            // const trackNum: number = ((!ommittedKf.merge && ommittedKf.timing === TimingSpec.timingRef.previousEnd) || ommittedKf.timing === TimingSpec.timingRef.previousStart) ? trackCount : 0;\r\n            this.IconComb.appendChild(this.createSubThumbnail(\r\n                ommittedKf.hasOffset,\r\n                trackNum,\r\n                idx,\r\n                ommittedKf.timing === TimingSpec.timingRef.previousEnd,\r\n                ommittedKf.merge\r\n            ))\r\n        })\r\n        if (this.oWidth > KfOmit.maxOmitWidth) {\r\n            KfOmit.maxOmitWidth = this.oWidth;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * create single thumbnail in the combination\r\n     * @param hasOffset \r\n     * @param index \r\n     */\r\n    public createSubThumbnail(hasOffset: boolean, trackNum: number, index: number, afterPre: boolean, merge: boolean): SVGGElement {\r\n        const tmpContainer: SVGGElement = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n        tmpContainer.setAttributeNS(null, 'transform', `translate(${(afterPre && index > 0) ? this.oWidth : 0}, ${trackNum * (KfOmit.OMIT_SUB_HEIGHT + 2)})`);\r\n        //update the omit size \r\n        this.oWidth = (afterPre && index > 0) ? this.oWidth + KfOmit.OMIT_SUB_WIDTH : this.oWidth;\r\n        this.oHeight = (trackNum + 1) * KfOmit.OMIT_SUB_HEIGHT > this.oHeight ? (trackNum + 1) * (KfOmit.OMIT_SUB_HEIGHT + 2) : this.oHeight;\r\n        if (hasOffset) {\r\n            const offsetBg: SVGRectElement = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n            offsetBg.setAttributeNS(null, 'fill', KfItem.OFFSET_COLOR);\r\n            offsetBg.setAttributeNS(null, 'width', `${KfOmit.OMIT_SUB_W_UNIT}`);\r\n            offsetBg.setAttributeNS(null, 'height', `${KfOmit.OMIT_SUB_HEIGHT}`);\r\n            tmpContainer.appendChild(offsetBg);\r\n        }\r\n        const kfBg: SVGRectElement = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n        kfBg.setAttributeNS(null, 'fill', '#ffffff');\r\n        kfBg.setAttributeNS(null, 'x', `${hasOffset ? KfOmit.OMIT_SUB_W_UNIT : 0}`);\r\n        kfBg.setAttributeNS(null, 'width', `${hasOffset ? KfOmit.OMIT_SUB_W_UNIT * 4 : KfOmit.OMIT_SUB_W_UNIT * 5}`);\r\n        kfBg.setAttributeNS(null, 'height', `${KfOmit.OMIT_SUB_HEIGHT}`);\r\n        tmpContainer.appendChild(kfBg);\r\n        const duraitonBg: SVGRectElement = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n        duraitonBg.setAttributeNS(null, 'fill', KfItem.DURATION_COLOR);\r\n        duraitonBg.setAttributeNS(null, 'x', `${KfOmit.OMIT_SUB_W_UNIT * 5}`);\r\n        duraitonBg.setAttributeNS(null, 'height', `${KfOmit.OMIT_SUB_HEIGHT}`);\r\n        duraitonBg.setAttributeNS(null, 'width', `${KfOmit.OMIT_SUB_W_UNIT}`);\r\n        tmpContainer.appendChild(duraitonBg);\r\n\r\n        if (index > 0 && afterPre && merge) {\r\n            const frame: SVGRectElement = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n            frame.setAttributeNS(null, 'width', `${KfOmit.OMIT_SUB_WIDTH}`);\r\n            frame.setAttributeNS(null, 'height', `${KfOmit.OMIT_SUB_HEIGHT}`);\r\n            frame.setAttributeNS(null, 'fill', 'none');\r\n            frame.setAttributeNS(null, 'stroke', IntelliRefLine.STROKE_COLOR);\r\n            frame.setAttributeNS(null, 'stroke-dasharray', '2 1');\r\n            tmpContainer.appendChild(frame);\r\n        } else if (index > 0 && afterPre && !merge) {\r\n            const lineStartY: number = -(trackNum - 1) * KfOmit.OMIT_SUB_HEIGHT;\r\n            const lineHeight: number = (trackNum + 1) * KfOmit.OMIT_SUB_HEIGHT;\r\n            const refLine: SVGLineElement = document.createElementNS('http://www.w3.org/2000/svg', 'line');\r\n            refLine.setAttributeNS(null, 'x1', '0');\r\n            refLine.setAttributeNS(null, 'x2', '0');\r\n            refLine.setAttributeNS(null, 'y1', `${lineStartY}`);\r\n            refLine.setAttributeNS(null, 'y2', `${KfOmit.OMIT_SUB_HEIGHT}`);\r\n            refLine.setAttributeNS(null, 'stroke', IntelliRefLine.STROKE_COLOR);\r\n            refLine.setAttributeNS(null, 'stroke-dasharray', '2 1');\r\n            tmpContainer.appendChild(refLine);\r\n        }\r\n        return tmpContainer;\r\n    }\r\n\r\n    public updateThumbnail(hasOffset: boolean, hasDuration: boolean): void {\r\n        switch (this.omitType) {\r\n            case KfOmit.KF_OMIT:\r\n                this.hasOffset = hasOffset;\r\n                this.hasDuration = hasDuration;\r\n                if (this.hasOffset) {\r\n                    this.offsetIcon.setAttributeNS(null, 'width', `${KfOmit.OMIT_W_UNIT}`);\r\n                    this.kfIcon.setAttributeNS(null, 'x', `${KfOmit.OMIT_W_UNIT}`);\r\n                    // if (this.hasDuration) {\r\n                        this.kfIcon.setAttributeNS(null, 'width', `${KfOmit.OMIT_W_UNIT * 3}`);\r\n                        this.durationIcon.setAttributeNS(null, 'x', `${KfOmit.OMIT_W_UNIT * 4}`);\r\n                        this.durationIcon.setAttributeNS(null, 'width', `${KfOmit.OMIT_W_UNIT}`);\r\n                    // } else {\r\n                    //     this.kfIcon.setAttributeNS(null, 'width', `${KfOmit.OMIT_W_UNIT * 4}`);\r\n                    //     this.durationIcon.setAttributeNS(null, 'width', '0');\r\n                    // }\r\n                } else {\r\n                    this.offsetIcon.setAttributeNS(null, 'width', '0');\r\n                    this.kfIcon.setAttributeNS(null, 'x', '0');\r\n                    // if (this.hasDuration) {\r\n                        this.kfIcon.setAttributeNS(null, 'width', `${KfOmit.OMIT_W_UNIT * 4}`);\r\n                        this.durationIcon.setAttributeNS(null, 'x', `${KfOmit.OMIT_W_UNIT * 4}`);\r\n                        this.durationIcon.setAttributeNS(null, 'width', `${KfOmit.OMIT_W_UNIT}`);\r\n                    // } else {\r\n                    //     this.kfIcon.setAttributeNS(null, 'width', `${KfOmit.OMIT_W_UNIT * 5}`);\r\n                    //     this.durationIcon.setAttributeNS(null, 'width', '0');\r\n                    // }\r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\n    /**\r\n     * when this group is aligned to other groups, then the startX is not correct\r\n     */\r\n    public correctTrans(targetKf: KfItem): void {\r\n        const targetKfTrans: ICoord = Tool.extractTransNums(targetKf.container.getAttributeNS(null, 'transform'));\r\n        const targetKfBBox: DOMRect = targetKf.container.getBoundingClientRect();\r\n        const currentOmitBbox: ICoord = Tool.extractTransNums(this.container.getAttributeNS(null, 'transform'));\r\n        console.log('updateing omit x1: ', targetKfTrans.x + targetKfBBox.width / state.zoomLevel + KfGroup.PADDING);\r\n        this.translateContainer(targetKfTrans.x + targetKfBBox.width / state.zoomLevel + KfGroup.PADDING, currentOmitBbox.y);\r\n    }\r\n\r\n    public updateTrans(startX: number, startY: number): void {\r\n        console.log('updateing omit x2: ', startX);\r\n        this.translateContainer(startX, startY - this.oHeight / 2);\r\n    }\r\n\r\n    public translateContainer(x: number, y: number) {\r\n        console.log('fuck: ', x);\r\n        this.container.setAttributeNS(null, 'transform', `translate(${x}, ${y})`);\r\n    }\r\n\r\n    public createNum(omittedNum: number): void {\r\n        this.num = document.createElementNS('http://www.w3.org/2000/svg', 'text');\r\n        this.num.setAttributeNS(null, 'x', `${this.oWidth / 2}`);\r\n        this.num.setAttributeNS(null, 'y', `${this.omitType === KfOmit.KF_ALIGN ? this.oHeight + 15 : 15}`);\r\n        this.num.setAttributeNS(null, 'font-size', '12px');\r\n        this.num.setAttributeNS(null, 'text-anchor', 'middle');\r\n        this.num.innerHTML = `x${omittedNum}`;\r\n        this.iconContainer.appendChild(this.num);\r\n    }\r\n\r\n    public updateNum(omittedNum: number): void {\r\n        this.omittedNum = omittedNum;\r\n        this.num.innerHTML = `x${omittedNum}`;\r\n    }\r\n\r\n    public createDots(): void {\r\n        const dots: SVGTextElement = document.createElementNS('http://www.w3.org/2000/svg', 'text');\r\n        dots.setAttributeNS(null, 'x', `${this.oWidth / 2}`);\r\n        dots.setAttributeNS(null, 'y', `${this.omitType === KfOmit.KF_ALIGN ? this.oHeight + 25 : this.oHeight + 10}`);\r\n        dots.setAttributeNS(null, 'font-size', '32px');\r\n        dots.setAttributeNS(null, 'text-anchor', 'middle');\r\n        dots.innerHTML = '...';\r\n        this.container.appendChild(dots);\r\n    }\r\n\r\n    public showOmit(): void {\r\n        if (typeof this.container !== 'undefined') {\r\n            this.isHidden = false;\r\n            this.container.setAttributeNS(null, 'opacity', '1');\r\n        }\r\n    }\r\n\r\n    public hideOmit(): void {\r\n        if (typeof this.container !== 'undefined') {\r\n            this.isHidden = true;\r\n            this.container.setAttributeNS(null, 'opacity', '0');\r\n        }\r\n    }\r\n\r\n    public removeOmit(parentObj: KfGroup | KfTrack): void {\r\n        if (parentObj.container.contains(this.container)) {\r\n            parentObj.container.removeChild(this.container);\r\n        }\r\n    }\r\n}","// import '../../assets/style/kfTimingIllus.scss'\r\nimport { hintTag } from \"./hint\";\r\nimport { ICoord } from \"../../util/ds\";\r\nimport Reducer from \"../../app_backup/reducer\";\r\nimport * as action from \"../../app_backup/action\";\r\nimport KfTrack from \"./kfTrack\";\r\nimport Tool from \"../../util/tool\";\r\nimport { state, State } from \"../../app_backup/state\";\r\nimport KfItem from './kfItem';\r\nimport KfOmit from './kfOmit';\r\n\r\nexport default class KfTimingIllus {\r\n    static SCALE_DOWN: string = 'scaleDown';\r\n    static SCALE_UP: string = 'scaleUp';\r\n\r\n    static BASIC_OFFSET_DURATION_W: number = 20;\r\n    static OFFSET_COLOR: string = '#ff9246';\r\n    static OFFSET_STRETCH_COLOR: string = '#ea5514';\r\n    static DURATION_COLOR: string = '#71b1ed';\r\n    static DURATION_STRETCH_COLOR: string = '#358bcb';\r\n    static TIMING_TYPE_OFFSET: string = 'offset';\r\n    static TIMING_TYPE_DURATION: string = 'duration';\r\n    static EXTRA_HEIGHT: number = 7;//for hidden duration\r\n    static minDuration: number = 300;\r\n    static maxDuration: number = 0;\r\n    static minOffset: number = 300;\r\n    static maxOffset: number = 0;\r\n\r\n    public isDragging: boolean = false;\r\n    public aniId: string;\r\n    public parentObj: any;\r\n    public id: number;\r\n    public groupRef: string;\r\n    public timingType: string;\r\n\r\n    public mouseIsOver: boolean = false;\r\n\r\n    public hasOffset: boolean = false;\r\n    public offsetNum: number = 0;\r\n    public _offsetDiff: number = 0;\r\n    public offsetIllus: SVGGElement\r\n    public offsetBg: SVGRectElement\r\n    public offsetWidth: number = 0\r\n    public groupRx: number = 0;\r\n    public offsetIcon: SVGGElement\r\n\r\n    public hasHiddenDuration: boolean = false;//previous start + delay\r\n    public hasDuration: boolean = false;\r\n    public durationNum: number = 0;\r\n    public _durationDiff: number = 0;\r\n    public durationIllus: SVGGElement\r\n    public durationBg: SVGRectElement\r\n    public durationIcon: SVGGElement\r\n    public textWrapper: SVGGElement\r\n    public textInput: HTMLInputElement\r\n    public durationWidth: number = 0\r\n\r\n    public container: SVGGElement;\r\n    public stretchBar: SVGRectElement;\r\n\r\n    set offsetDiff(od: number) {\r\n        this._offsetDiff = od;\r\n        Tool.transNodeElements(this.container, od, true);\r\n    }\r\n    get offsetDiff(): number {\r\n        return this._offsetDiff;\r\n    }\r\n\r\n    set durationDiff(dd: number) {\r\n        this._durationDiff = dd;\r\n    }\r\n\r\n    get durationDiff(): number {\r\n        return this._durationDiff;\r\n    }\r\n\r\n    public addEasingTransform() { }\r\n    public removeEasingTransform() { }\r\n\r\n    public bindOffsetHover(type: string, groupRef: string) {\r\n        this.offsetIllus.onmouseenter = (enterEvt) => {\r\n            if (!state.mousemoving && !this.mouseIsOver) {\r\n                hintTag.removeTimingHint();\r\n                const timingBBox: DOMRect = this.offsetBg.getBoundingClientRect();//fixed\r\n                let actionType: string = '';\r\n                let actionInfo: any = {};\r\n                switch (type) {\r\n                    case 'offset-animation':\r\n                        actionType = action.UPDATE_ANI_OFFSET;\r\n                        actionInfo = { aniId: this.aniId }\r\n                        break;\r\n                    case 'offset-group':\r\n                        actionType = action.UPDATE_DELAY_BETWEEN_GROUP;\r\n                        actionInfo = { aniId: this.aniId, groupRef: groupRef }\r\n                        break;\r\n                    case 'offset-kf':\r\n                        actionType = action.UPDATE_DELAY_BETWEEN_KF;\r\n                        actionInfo = { aniId: this.aniId }\r\n                        break;\r\n                }\r\n                hintTag.createTimingHint({ x: timingBBox.left + timingBBox.width / 2, y: timingBBox.top }, `delay:${this.offsetNum}ms`, actionType, actionInfo);\r\n            }\r\n            this.mouseIsOver = true;\r\n        }\r\n        this.offsetIllus.onmouseleave = (leaveEvt: any) => {\r\n            if (!hintTag.container.contains(leaveEvt.toElement)) {\r\n                hintTag.removeTimingHint();\r\n            }\r\n            this.mouseIsOver = false;\r\n        }\r\n    }\r\n\r\n    public unbindOffsetHover() {\r\n        this.offsetIllus.onmouseenter = null;\r\n        this.offsetIllus.onmouseleave = null;\r\n    }\r\n\r\n    public drawOffset(offset: number, widgetHeight: number, groupRx: number, fake: boolean = false): void {\r\n        this.timingType = KfTimingIllus.TIMING_TYPE_OFFSET;\r\n        this.offsetNum = offset;\r\n        this.groupRx = groupRx;\r\n        if (KfTimingIllus.minOffset === 0) {\r\n            this.offsetWidth = KfTimingIllus.BASIC_OFFSET_DURATION_W;\r\n        } else {\r\n            this.offsetWidth = KfTimingIllus.BASIC_OFFSET_DURATION_W * this.offsetNum / KfTimingIllus.minOffset;\r\n        }\r\n        this.offsetIllus = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n        this.offsetBg = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n        if (fake) {\r\n            this.offsetBg.setAttributeNS(null, 'x', `${-KfTimingIllus.BASIC_OFFSET_DURATION_W}`);\r\n        } else {\r\n            this.offsetBg.setAttributeNS(null, 'x', '0');\r\n        }\r\n        this.offsetBg.setAttributeNS(null, 'y', '0');\r\n        this.offsetBg.setAttributeNS(null, 'width', `${this.offsetWidth + this.groupRx}`);\r\n        this.offsetBg.setAttributeNS(null, 'height', `${widgetHeight}`);\r\n        this.offsetBg.setAttributeNS(null, 'fill', KfTimingIllus.OFFSET_COLOR);\r\n        this.offsetIllus.appendChild(this.offsetBg);\r\n        if (this.offsetWidth / 2 - 6 >= 0 && !fake) {\r\n            this.drawArrowIcon({ x: this.offsetWidth / 2 - 6, y: widgetHeight / 2 - 6 }, KfTimingIllus.TIMING_TYPE_OFFSET);\r\n            this.offsetIllus.appendChild(this.offsetIcon);\r\n        }\r\n\r\n        //create stretchable bar\r\n        let offsetType: string = 'offset';\r\n        let actionInfo: any = {};\r\n        if (this.parentObj instanceof KfTrack) {\r\n            offsetType += '-animation';\r\n        } else {\r\n            if (typeof this.groupRef !== 'undefined') {//this is kfgroup\r\n                offsetType += '-group';\r\n                actionInfo.groupRef = this.groupRef;\r\n            } else {//this is kfitem\r\n                offsetType += '-kf';\r\n            }\r\n        }\r\n        this.stretchBar = this.createStretchBar(widgetHeight, offsetType, false, actionInfo);\r\n        this.offsetIllus.appendChild(this.stretchBar);\r\n        this.bindOffsetHover(offsetType, actionInfo.groupRef);\r\n    }\r\n\r\n    public updateOffset(widgetHeight: number): void {\r\n        this.offsetBg.setAttributeNS(null, 'height', `${widgetHeight}`);\r\n        this.stretchBar.setAttributeNS(null, 'height', `${widgetHeight}`);\r\n        if (typeof this.offsetIcon !== 'undefined') {\r\n            this.offsetIcon.setAttributeNS(null, 'transform', `translate(${this.offsetWidth / 2 - 6}, ${widgetHeight / 2 - 6})`)\r\n        }\r\n    }\r\n\r\n    public bindDurationHover() {\r\n        this.durationIllus.onmouseenter = (enterEvt) => {\r\n            if (!state.mousemoving && !this.mouseIsOver) {\r\n                hintTag.removeTimingHint();\r\n                const timingBBox: DOMRect = this.durationBg.getBoundingClientRect();//fixed\r\n                hintTag.createTimingHint({ x: timingBBox.left + timingBBox.width / 2, y: timingBBox.top }, `duration:${this.durationNum}ms`, action.UPDATE_DURATION, { aniId: this.aniId });\r\n            }\r\n            this.mouseIsOver = true;\r\n        }\r\n        this.durationIllus.onmouseleave = (leaveEvt: any) => {\r\n            if (typeof hintTag.container !== 'undefined') {\r\n                if (!hintTag.container.contains(leaveEvt.toElement)) {\r\n                    hintTag.removeTimingHint();\r\n                }\r\n            }\r\n            this.mouseIsOver = false;\r\n        }\r\n    }\r\n\r\n    public unbindDurationHover() {\r\n        this.durationIllus.onmouseenter = null;\r\n        this.durationIllus.onmouseleave = null;\r\n    }\r\n\r\n    public drawDuration(duration: number, widgetX: number, widgetHeight: number, hiddenDuration: boolean): void {\r\n        this.timingType = KfTimingIllus.TIMING_TYPE_DURATION;\r\n        this.durationNum = duration\r\n        if (KfTimingIllus.minDuration === 0) {\r\n            this.durationWidth = KfTimingIllus.BASIC_OFFSET_DURATION_W;\r\n        } else {\r\n            this.durationWidth = KfTimingIllus.BASIC_OFFSET_DURATION_W * this.durationNum / KfTimingIllus.minDuration;\r\n        }\r\n        this.durationIllus = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n        const transX: number = typeof this.offsetIllus === 'undefined' ? widgetX : widgetX + this.offsetWidth;\r\n        this.durationIllus.setAttributeNS(null, 'transform', `translate(${transX}, 0)`);\r\n        this.durationBg = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n        this.durationBg.setAttributeNS(null, 'x', '0');\r\n        this.durationBg.setAttributeNS(null, 'y', hiddenDuration ? `${-KfTimingIllus.EXTRA_HEIGHT}` : '0');\r\n        this.durationBg.setAttributeNS(null, 'fill', KfTimingIllus.DURATION_COLOR);\r\n        this.durationBg.setAttributeNS(null, 'width', `${this.durationWidth}`);\r\n        this.durationBg.setAttributeNS(null, 'height', `${hiddenDuration ? widgetHeight + KfTimingIllus.EXTRA_HEIGHT : widgetHeight}`);\r\n        this.durationIllus.appendChild(this.durationBg);\r\n        if (this.durationWidth / 2 - 6 >= 0) {\r\n            this.drawArrowIcon({ x: this.durationWidth / 2 - 6, y: widgetHeight / 2 - 6 }, KfTimingIllus.TIMING_TYPE_DURATION);\r\n            this.durationIllus.appendChild(this.durationIcon);\r\n        }\r\n\r\n        // this.createTimeText({ x: this.durationWidth / 2 - 6, y: widgetHeight / 2 - 26 });\r\n        // this.durationIllus.appendChild(this.textWrapper);\r\n\r\n        this.stretchBar = this.createStretchBar(widgetHeight, 'duration', hiddenDuration);\r\n        this.durationIllus.appendChild(this.stretchBar);\r\n\r\n        this.bindDurationHover();\r\n    }\r\n\r\n    public startAdjustingTime() { }\r\n    public findNextSibling(): KfItem | KfOmit { return }\r\n    public bindHoverBtn() { }\r\n    public unbindHoverBtn() { }\r\n\r\n    public hideArrow() {\r\n        switch (this.timingType) {\r\n            case KfTimingIllus.TIMING_TYPE_OFFSET:\r\n                if (typeof this.offsetIcon !== 'undefined') {\r\n                    this.offsetIcon.setAttributeNS(null, 'opacity', '0');\r\n                }\r\n                break;\r\n            case KfTimingIllus.TIMING_TYPE_DURATION:\r\n                if (typeof this.durationIcon !== 'undefined') {\r\n                    this.durationIcon.setAttributeNS(null, 'opacity', '0');\r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\n    public showArrow() {\r\n        switch (this.timingType) {\r\n            case KfTimingIllus.TIMING_TYPE_OFFSET:\r\n                if (typeof this.offsetIcon !== 'undefined') {\r\n                    this.offsetIcon.setAttributeNS(null, 'opacity', '1');\r\n                }\r\n                break;\r\n            case KfTimingIllus.TIMING_TYPE_DURATION:\r\n                if (typeof this.durationIcon !== 'undefined') {\r\n                    this.durationIcon.setAttributeNS(null, 'opacity', '1');\r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\n    public createStretchBar(barHeight: number, type: string, hiddenDuration: boolean, actionInfo: any = {}): SVGRectElement {\r\n        //create stretchable bar\r\n        const stretchBar: SVGRectElement = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n        stretchBar.setAttributeNS(null, 'x', type === 'duration' ? `${this.durationWidth - 4}` : `${this.offsetWidth - 4}`);\r\n        stretchBar.setAttributeNS(null, 'y', hiddenDuration ? `${-KfTimingIllus.EXTRA_HEIGHT}` : '0');\r\n        stretchBar.setAttributeNS(null, 'width', '4');\r\n        stretchBar.setAttributeNS(null, 'height', hiddenDuration ? `${barHeight + KfTimingIllus.EXTRA_HEIGHT}` : `${barHeight}`);\r\n        stretchBar.setAttributeNS(null, 'fill', type === 'duration' ? KfTimingIllus.DURATION_STRETCH_COLOR : KfTimingIllus.OFFSET_STRETCH_COLOR);\r\n        stretchBar.classList.add('ease-fade', 'stretchable-component', 'fadein-ele');\r\n\r\n        stretchBar.onmousedown = (downEvt) => {\r\n            Reducer.triger(action.UPDATE_MOUSE_MOVING, true);\r\n            hintTag.removeHint();\r\n            this.startAdjustingTime();\r\n            this.removeEasingTransform();//eg: groupTitle\r\n            this.unbindHoverBtn();\r\n            this.hideArrow();//hide the arrow\r\n            const strectchBarBBox: DOMRect = stretchBar.getBoundingClientRect();//fixed\r\n            const timingBBox: DOMRect = type === 'duration' ? this.durationBg.getBoundingClientRect() : this.offsetBg.getBoundingClientRect();//fixed\r\n            const timingWidth: number = timingBBox.width;\r\n            let currentTiming: number = this.widthToTiming(timingWidth);\r\n            if (type === 'duration') {\r\n                hintTag.createTimingHint({ x: timingBBox.left + timingBBox.width / 2, y: strectchBarBBox.top }, `duration:${this.durationNum}ms`, action.UPDATE_DURATION, { aniId: this.aniId });\r\n                this.unbindDurationHover();\r\n            } else {\r\n                let actionType: string = '';\r\n                let aInfo: any = {};\r\n                switch (type) {\r\n                    case 'offset-animation':\r\n                        actionType = action.UPDATE_ANI_OFFSET;\r\n                        aInfo = { aniId: this.aniId }\r\n                        break;\r\n                    case 'offset-group':\r\n                        actionType = action.UPDATE_DELAY_BETWEEN_GROUP;\r\n                        aInfo = { aniId: this.aniId, groupRef: actionInfo.groupRef }\r\n                        break;\r\n                    case 'offset-kf':\r\n                        actionType = action.UPDATE_DELAY_BETWEEN_KF;\r\n                        aInfo = { aniId: this.aniId }\r\n                        break;\r\n                }\r\n                hintTag.createTimingHint({ x: timingBBox.left + timingBBox.width / 2, y: strectchBarBBox.top }, `delay:${this.offsetNum}ms`, actionType, aInfo);\r\n                this.unbindOffsetHover();\r\n                //remove the extra width of the offset\r\n                this.offsetBg.setAttributeNS(null, 'width', `${this.offsetWidth}`);\r\n            }\r\n            downEvt.stopPropagation();\r\n            let oriPosiX: number = downEvt.pageX;\r\n            document.onmousemove = (moveEvt) => {\r\n                moveEvt.stopPropagation();\r\n                const currentPosiX: number = moveEvt.pageX;\r\n                const diffX: number = (currentPosiX - oriPosiX) / state.zoomLevel;\r\n                const barX: number = parseFloat(stretchBar.getAttributeNS(null, 'x'));\r\n\r\n                const timingWidth: number = type === 'duration' ? parseFloat(this.durationBg.getAttributeNS(null, 'width')) : parseFloat(this.offsetBg.getAttributeNS(null, 'width'));\r\n                if (timingWidth + diffX > 0) {\r\n                    if (type === 'duration') {\r\n                        currentTiming = this.widthToTiming(timingWidth + diffX);\r\n                        hintTag.updateTimingHint(diffX / 2, `duration:${currentTiming}ms`)\r\n                        this.durationBg.setAttributeNS(null, 'width', `${timingWidth + diffX}`);\r\n                        this.durationDiff = diffX;\r\n                    } else {\r\n                        currentTiming = this.widthToTiming(timingWidth + diffX);\r\n                        hintTag.updateTimingHint(diffX / 2, `delay:${currentTiming}ms`)\r\n                        this.offsetBg.setAttributeNS(null, 'width', `${timingWidth + diffX}`);\r\n                        //translate corresponding group or item\r\n                        this.offsetDiff = diffX;\r\n                    }\r\n                    stretchBar.setAttributeNS(null, 'x', `${diffX + barX}`);\r\n                    oriPosiX = currentPosiX;\r\n                }\r\n            }\r\n            document.onmouseup = () => {\r\n                Reducer.triger(action.UPDATE_MOUSE_MOVING, false);\r\n                hintTag.removeTimingHint();\r\n                document.onmousemove = null;\r\n                document.onmouseup = null;\r\n                this.addEasingTransform();\r\n                this.bindHoverBtn();\r\n                this.showArrow();//show the arrow\r\n                //triger action to update spec\r\n                if (type === 'duration') {\r\n                    this.bindDurationHover();\r\n                    const durationTime: number = this.widthToTiming(parseFloat(this.durationBg.getAttributeNS(null, 'width')));\r\n                    State.tmpStateBusket.push({\r\n                        historyAction: { actionType: action.UPDATE_SPEC_ANIMATIONS, actionVal: JSON.stringify(state.spec.animations) },\r\n                        currentAction: { actionType: action.UPDATE_DURATION, actionVal: { aniId: this.aniId, duration: durationTime } }\r\n                    })\r\n                    State.saveHistory();\r\n                    Reducer.triger(action.UPDATE_DURATION, { aniId: this.aniId, duration: durationTime });\r\n                } else {\r\n                    this.bindOffsetHover(type, actionInfo.groupRef);\r\n                    const delayTime: number = this.widthToTiming(parseFloat(this.offsetBg.getAttributeNS(null, 'width')));\r\n                    switch (type) {\r\n                        case 'offset-animation':\r\n                            State.tmpStateBusket.push({\r\n                                historyAction: { actionType: action.UPDATE_SPEC_ANIMATIONS, actionVal: JSON.stringify(state.spec.animations) },\r\n                                currentAction: { actionType: action.UPDATE_ANI_OFFSET, actionVal: { aniId: this.aniId, offset: delayTime } }\r\n                            })\r\n                            State.saveHistory();\r\n                            Reducer.triger(action.UPDATE_ANI_OFFSET, { aniId: this.aniId, offset: delayTime });\r\n                            break;\r\n                        case 'offset-group':\r\n                            State.tmpStateBusket.push({\r\n                                historyAction: { actionType: action.UPDATE_SPEC_ANIMATIONS, actionVal: JSON.stringify(state.spec.animations) },\r\n                                currentAction: { actionType: action.UPDATE_DELAY_BETWEEN_GROUP, actionVal: { aniId: this.aniId, groupRef: actionInfo.groupRef, delay: delayTime } }\r\n                            })\r\n                            State.saveHistory();\r\n                            Reducer.triger(action.UPDATE_DELAY_BETWEEN_GROUP, { aniId: this.aniId, groupRef: actionInfo.groupRef, delay: delayTime });\r\n                            break;\r\n                        case 'offset-kf':\r\n                            State.tmpStateBusket.push({\r\n                                historyAction: { actionType: action.UPDATE_SPEC_ANIMATIONS, actionVal: JSON.stringify(state.spec.animations) },\r\n                                currentAction: { actionType: action.UPDATE_DELAY_BETWEEN_KF, actionVal: { aniId: this.aniId, delay: delayTime } }\r\n                            })\r\n                            State.saveHistory();\r\n                            Reducer.triger(action.UPDATE_DELAY_BETWEEN_KF, { aniId: this.aniId, delay: delayTime });\r\n                            break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        return stretchBar;\r\n    }\r\n\r\n    public widthToTiming(w: number): number {\r\n        return Math.floor(KfTimingIllus.minDuration * 100 * w / KfTimingIllus.BASIC_OFFSET_DURATION_W) / 100;\r\n    }\r\n\r\n    public drawArrowIcon(trans: ICoord, type: string): void {\r\n        const iconPolygon: SVGPolygonElement = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');\r\n        iconPolygon.setAttributeNS(null, 'fill', '#fff');\r\n        iconPolygon.setAttributeNS(null, 'points', '10.1,0 10.1,4.1 5.6,0.1 4.3,1.5 8.3,5.1 0,5.1 0,6.9 8.3,6.9 4.3,10.5 5.6,11.9 10.1,7.9 10.1,12 12,12 12,0 ');\r\n\r\n        switch (type) {\r\n            case KfTimingIllus.TIMING_TYPE_OFFSET:\r\n                this.offsetIcon = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n                this.offsetIcon.classList.add('ease-fade');\r\n                this.offsetIcon.setAttributeNS(null, 'transform', `translate(${trans.x}, ${trans.y})`);\r\n                this.offsetIcon.appendChild(iconPolygon);\r\n                break;\r\n            case KfTimingIllus.TIMING_TYPE_DURATION:\r\n                this.durationIcon = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n                this.durationIcon.classList.add('ease-fade');\r\n                this.durationIcon.setAttributeNS(null, 'transform', `translate(${trans.x}, ${trans.y})`);\r\n                this.durationIcon.appendChild(iconPolygon);\r\n                break;\r\n        }\r\n\r\n    }\r\n\r\n\r\n}","import { KfContainer } from \"../kfContainer\";\r\nimport KfGroup from \"./kfGroup\";\r\nimport KfItem from \"./kfItem\";\r\n\r\nexport default class KfTrack {\r\n    static TRACK_PADDING_TOP: number = 16;\r\n    static TRACK_WIDTH: number = 20000;\r\n    static TRACK_HEIGHT: number = 180;\r\n    static trackIdx: number = 0;\r\n    static allTracks: Map<string, KfTrack> = new Map();//key:id, value: kftrack\r\n    static aniTrackMapping: Map<string, Set<KfTrack>> = new Map();//key: aniId, value: tracks this animation possesses\r\n\r\n    public trackId: string;\r\n    public trackBgContainer: SVGGElement;\r\n    public trackPosiY: number;\r\n    public container: SVGGElement;\r\n    public trackBg: SVGRectElement;\r\n    public splitLineTop: SVGLineElement;\r\n    public splitLineBottom: SVGLineElement;\r\n    public availableInsert: number = KfItem.PADDING;\r\n    // public availableInsert: number = KfItem.KF_WIDTH + KfItem.PADDING;\r\n    public children: KfGroup[] = [];\r\n\r\n    public static reset() {\r\n        this.trackIdx = 0;\r\n        this.allTracks.clear();\r\n        this.aniTrackMapping.clear();\r\n    }\r\n\r\n    public createTrack(fake: boolean = false): void {\r\n        //TODO: consider insert new tracks\r\n        const numExistTracks: number = document.querySelectorAll('.kf-track:not(.fake-track)').length;\r\n        // const numExistTracks: number = document.getElementsByClassName('kf-track').length;\r\n        this.trackPosiY = numExistTracks * KfTrack.TRACK_HEIGHT + KfTrack.TRACK_PADDING_TOP;\r\n        this.trackBgContainer = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n        this.trackBgContainer.setAttributeNS(null, 'transform', `translate(0, ${this.trackPosiY})`);\r\n        this.trackBgContainer.setAttributeNS(null, 'id', `trackBg${KfTrack.trackIdx}`);\r\n        document.getElementById(KfContainer.KF_BG).appendChild(this.trackBgContainer);\r\n\r\n        this.trackId = `trackFg${KfTrack.trackIdx}`;\r\n        this.container = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n        this.container.setAttributeNS(null, 'transform', `translate(0, ${numExistTracks * KfTrack.TRACK_HEIGHT + KfTrack.TRACK_PADDING_TOP})`);\r\n        this.container.setAttributeNS(null, 'id', this.trackId);\r\n        this.container.setAttributeNS(null, 'class', `kf-track ${fake ? 'fake-track' : ''}`);\r\n        document.getElementById(KfContainer.KF_FG).appendChild(this.container);\r\n\r\n        KfTrack.trackIdx++;\r\n\r\n        //draw track bg\r\n        this.trackBg = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n        this.trackBg.setAttributeNS(null, 'x', '0');\r\n        this.trackBg.setAttributeNS(null, 'y', '0');\r\n        this.trackBg.setAttributeNS(null, 'width', `${KfTrack.TRACK_WIDTH}`);\r\n        this.trackBg.setAttributeNS(null, 'height', fake ? '0' : `${KfTrack.TRACK_HEIGHT}`);\r\n        this.trackBg.setAttributeNS(null, 'fill', '#efefef');\r\n        this.trackBgContainer.appendChild(this.trackBg);\r\n\r\n        if (!fake) {\r\n            //draw split line\r\n            this.splitLineTop = document.createElementNS('http://www.w3.org/2000/svg', 'line');\r\n            this.splitLineTop.setAttributeNS(null, 'x1', '0');\r\n            this.splitLineTop.setAttributeNS(null, 'x2', '20000');\r\n            this.splitLineTop.setAttributeNS(null, 'y1', '0');\r\n            this.splitLineTop.setAttributeNS(null, 'y2', '0');\r\n            this.splitLineTop.setAttributeNS(null, 'stroke', '#c9c9c9');\r\n            this.trackBgContainer.appendChild(this.splitLineTop);\r\n            this.splitLineBottom = document.createElementNS('http://www.w3.org/2000/svg', 'line');\r\n            this.splitLineBottom.setAttributeNS(null, 'x1', '0');\r\n            this.splitLineBottom.setAttributeNS(null, 'x2', '20000');\r\n            this.splitLineBottom.setAttributeNS(null, 'y1', `${KfTrack.TRACK_HEIGHT}`);\r\n            this.splitLineBottom.setAttributeNS(null, 'y2', `${KfTrack.TRACK_HEIGHT}`);\r\n            this.splitLineBottom.setAttributeNS(null, 'stroke', '#c9c9c9');\r\n            this.trackBgContainer.appendChild(this.splitLineBottom);\r\n\r\n            KfTrack.allTracks.set(this.trackId, this);\r\n        }\r\n\r\n    }\r\n\r\n    // public hightLightTrack() {\r\n    //     this.trackBg.setAttributeNS(null, 'fill', 'blue');\r\n    //     this.splitLine.setAttributeNS(null, 'stroke', 'blue');\r\n    // }\r\n}","import '../../assets/style/loading.scss'\r\n\r\nexport class Loading {\r\n    static LOADING: string = 'Preparing Animation';\r\n    static EXPORTING: string = 'Exporting Animation';\r\n    static SUGGESTING: string = 'Targeting Animation';\r\n    static allLoadings: Loading[] = [];\r\n\r\n    public container: HTMLDivElement;\r\n    public createLoading(wrapper: HTMLElement, content: string) {\r\n        //change cursor\r\n        document.body.classList.add('wait');\r\n\r\n        const wrapperBBox: DOMRect = wrapper.getBoundingClientRect();//fixed\r\n        if (typeof this.container === 'undefined') {\r\n            this.container = document.createElement('div');\r\n            this.container.className = 'loading-container';\r\n\r\n            const loadingWrapper: HTMLDivElement = document.createElement('div');\r\n            loadingWrapper.className = 'loading-wrapper';\r\n            const text: HTMLSpanElement = document.createElement('span');\r\n            text.innerHTML = content;\r\n            loadingWrapper.appendChild(text);\r\n\r\n            const loadingIcon: HTMLDivElement = document.createElement('div');\r\n            loadingIcon.className = 'lds-ellipsis';\r\n            loadingIcon.appendChild(document.createElement('div'));\r\n            loadingIcon.appendChild(document.createElement('div'));\r\n            loadingIcon.appendChild(document.createElement('div'));\r\n            loadingIcon.appendChild(document.createElement('div'));\r\n            loadingWrapper.appendChild(loadingIcon);\r\n            this.container.appendChild(loadingWrapper);\r\n        }\r\n        this.container.style.left = `${wrapperBBox.left}px`;\r\n        this.container.style.top = `${wrapperBBox.top}px`;\r\n        this.container.style.width = `${wrapperBBox.width}px`;\r\n        this.container.style.paddingTop = `${wrapperBBox.height * 0.4}px`;\r\n        this.container.style.height = `${wrapperBBox.height}px`;\r\n\r\n        document.body.appendChild(this.container);\r\n        Loading.allLoadings.push(this);\r\n    }\r\n    public static removeLoading() {\r\n        //change cursor\r\n        document.body.classList.remove('wait');\r\n        this.allLoadings.forEach((l: Loading) => {\r\n            if (document.body.contains(l.container)) {\r\n                document.body.removeChild(l.container);\r\n            }\r\n        })\r\n        this.allLoadings = [];\r\n    }\r\n}\r\n\r\nexport let loadingBlock: Loading = new Loading();","import KfGroup from \"./kfGroup\";\r\nimport Tool from \"../../util/tool\";\r\nimport KfItem from \"./kfItem\";\r\nimport { state, State } from \"../../app_backup/state\";\r\nimport { IKeyframe, IKeyframeGroup } from \"../../app_backup/core/ds\";\r\nimport Suggest from \"../../app_backup/core/suggest\";\r\nimport KfTrack from \"./kfTrack\";\r\nimport { ICoord, ISize } from \"../../util/ds\";\r\nimport { suggestBox } from \"./suggestBox\";\r\nimport KfOmit from \"./kfOmit\";\r\nimport { ChartSpec, Animation } from \"../../canis/moduleIdx\";\r\n\r\nexport default class PlusBtn {\r\n    static BTN_SIZE: number = 16;\r\n    static PADDING: number = 6;\r\n    static BTN_COLOR: string = '#9fa0a0';\r\n    static BTN_HIGHLIGHT_COLOR: string = '#358bcb';\r\n    static BTN_DRAGOVER_COLOR: string = '#ea5514';\r\n    static allPlusBtn: PlusBtn[] = [];\r\n    static plusBtnMapping: Map<string, PlusBtn> = new Map();//key: aniId, value: index in allPlusBtn\r\n    static dragoverBtn: PlusBtn;\r\n    static BTN_IDX: number = 0;\r\n\r\n    // public parentObj: KfGroup;\r\n    public onShow: boolean = true;\r\n    public parentTrack: KfTrack;\r\n    public targetKfg: KfGroup;\r\n    public firstKfArrInTargetKfg: IKeyframe[];\r\n    public fakeKfg: KfGroup;\r\n    public id: number;\r\n    public aniId: string;\r\n    public kfSize: ISize;\r\n    public acceptableCls: string[];\r\n    public isHighlighted: boolean = false;\r\n    public container: SVGGElement;\r\n    public btnBg: SVGRectElement;\r\n    public btnIcon: SVGTextElement;\r\n\r\n    public static highlightPlusBtns(selectedCls: string[]): void {\r\n        //filter which button to highlight (has the same accepatable classes)\r\n        this.allPlusBtn.forEach((pb: PlusBtn) => {\r\n            if (Tool.arrayContained(pb.acceptableCls, selectedCls) && pb.onShow) {\r\n                pb.highlightBtn();\r\n                let transX: number = pb.kfSize.w - this.BTN_SIZE;\r\n                // pb.targetKfg.translateWholeGroup(transX, true);\r\n                const firstKf: KfItem = pb.targetKfg.fetchFirstKf();\r\n                pb.targetKfg.translateGroup(firstKf, transX, true, true, true);\r\n            }\r\n        })\r\n    }\r\n\r\n    public static cancelHighlightPlusBtns(): void {\r\n        this.allPlusBtn.forEach((pb: PlusBtn) => {\r\n            if (pb.isHighlighted && pb.onShow) {\r\n                pb.cancelHighlightBtn();\r\n                let transX: number = pb.kfSize.w - this.BTN_SIZE;\r\n                // pb.targetKfg.translateWholeGroup(-transX, true);\r\n                const firstKf: KfItem = pb.targetKfg.fetchFirstKf();\r\n                pb.targetKfg.translateGroup(firstKf, -transX, true, true, true);\r\n            }\r\n        })\r\n    }\r\n\r\n    public static detectAdding(kfg: IKeyframeGroup, kfs: IKeyframe[]): [boolean, string[]] {\r\n        const kf0Marks = kfs[0].marksThisKf;\r\n        let mClassCount: string[] = [];\r\n        kf0Marks.forEach((mId: string) => {\r\n            mClassCount.push(Animation.markClass.get(mId));\r\n        })\r\n        mClassCount = [...new Set(mClassCount)];\r\n        if (state.charts.length > 1) {\r\n            return [false, []]\r\n        } else {\r\n            if (typeof kfg.merge !== 'undefined' && kfg.merge) {\r\n                return [false, []];\r\n            } else {\r\n                if (mClassCount.length === 1) {\r\n                    let allDataEncoded: boolean = true;\r\n                    let hasDiffAttrValue: boolean = false;\r\n                    let datum0: any = ChartSpec.dataMarkDatum.get(kf0Marks[0]);\r\n                    for (let i = 1, len = kf0Marks.length; i < len; i++) {\r\n                        if (typeof ChartSpec.dataMarkDatum.get(kf0Marks[i]) === 'undefined') {\r\n                            allDataEncoded = false;\r\n                            break;\r\n                        } else {\r\n                            const datum: any = ChartSpec.dataMarkDatum.get(kf0Marks[i]);\r\n                            for (let key in datum) {\r\n                                if (datum[key] !== datum0[key] && typeof datum0[key] !== 'undefined') {\r\n                                    hasDiffAttrValue = true;\r\n                                }\r\n                            }\r\n                            if (hasDiffAttrValue) {\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                    if (hasDiffAttrValue || (kfs.length === 1 && kf0Marks.length > 1)) {\r\n                        return [true, mClassCount];\r\n                    } else {\r\n                        return [false, []]\r\n                    }\r\n                } else {\r\n                    return [true, mClassCount];\r\n                }\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param targetKfg : root group\r\n     * @param parentTrack \r\n     * @param startX \r\n     * @param kfSize \r\n     * @param acceptableCls \r\n     */\r\n    public createBtn(targetKfg: KfGroup, firstKfArrInTargetKfg: IKeyframe[], parentTrack: KfTrack, startX: number, kfSize: ISize, acceptableCls: string[]): void {\r\n        //create a blank kfg\r\n        this.fakeKfg = new KfGroup();\r\n        this.fakeKfg.createBlankKfg(parentTrack, targetKfg.aniId, startX + KfGroup.PADDING);\r\n        this.aniId = targetKfg.aniId;\r\n        this.targetKfg = targetKfg;\r\n        this.targetKfg.plusBtn = this;\r\n        this.firstKfArrInTargetKfg = firstKfArrInTargetKfg;\r\n        this.parentTrack = parentTrack;\r\n        this.kfSize = kfSize;\r\n        this.id = PlusBtn.BTN_IDX;\r\n        PlusBtn.BTN_IDX++;\r\n        this.acceptableCls = acceptableCls;\r\n        this.container = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n        this.container.setAttributeNS(null, 'transform', `translate(${PlusBtn.PADDING},${PlusBtn.PADDING + this.kfSize.h / 2 - PlusBtn.BTN_SIZE / 2})`);\r\n        this.btnBg = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n        this.btnBg.setAttributeNS(null, 'x', '0');\r\n        this.btnBg.setAttributeNS(null, 'y', '0');\r\n        this.btnBg.setAttributeNS(null, 'width', `${PlusBtn.BTN_SIZE}`);\r\n        this.btnBg.setAttributeNS(null, 'height', `${PlusBtn.BTN_SIZE}`);\r\n        this.btnBg.setAttributeNS(null, 'rx', `${PlusBtn.BTN_SIZE / 2}`);\r\n        this.btnBg.setAttributeNS(null, 'fill', 'none');\r\n        this.btnBg.setAttributeNS(null, 'stroke', `${PlusBtn.BTN_COLOR}`);\r\n        this.btnBg.setAttributeNS(null, 'stroke-dasharray', '4 3');\r\n        this.container.appendChild(this.btnBg);\r\n        this.btnIcon = document.createElementNS('http://www.w3.org/2000/svg', 'text');\r\n        this.btnIcon.setAttributeNS(null, 'text-anchor', 'middle');\r\n        this.btnIcon.setAttributeNS(null, 'x', `${PlusBtn.BTN_SIZE / 2}`);\r\n        this.btnIcon.setAttributeNS(null, 'y', `${PlusBtn.BTN_SIZE / 2 + 7}`);\r\n        this.btnIcon.setAttributeNS(null, 'fill', `${PlusBtn.BTN_COLOR}`);\r\n        this.btnIcon.setAttributeNS(null, 'font-size', '16pt');\r\n        this.btnIcon.innerHTML = '+';\r\n        this.container.appendChild(this.btnIcon);\r\n        this.fakeKfg.container.appendChild(this.container);\r\n        this.fakeKfg.plusBtn = this;\r\n\r\n        PlusBtn.allPlusBtn.push(this);\r\n    }\r\n\r\n    public removeBtn(): void {\r\n        for (let i = 0, len = PlusBtn.allPlusBtn.length; i < len; i++) {\r\n            if (PlusBtn.allPlusBtn[i].id === this.id) {\r\n                PlusBtn.allPlusBtn[i].onShow = false;\r\n                break;\r\n            }\r\n        }\r\n        if (this.fakeKfg.container.contains(this.container)) {\r\n            this.fakeKfg.container.removeChild(this.container);\r\n        }\r\n    }\r\n\r\n    public restoreBtn(): void {\r\n        this.onShow = true;\r\n        this.fakeKfg.container.appendChild(this.container);\r\n    }\r\n\r\n    public translateBtn(transX: number): void {\r\n        const oriTrans: ICoord = Tool.extractTransNums(this.container.getAttributeNS(null, 'transform'));\r\n        this.container.setAttributeNS(null, 'transform', `translate(${oriTrans.x + transX}, ${oriTrans.y})`);\r\n    }\r\n\r\n    public highlightBtn(): void {\r\n        this.isHighlighted = true;\r\n        const oriTrans: ICoord = Tool.extractTransNums(this.container.getAttributeNS(null, 'transform'));\r\n        this.container.setAttributeNS(null, 'transform', `translate(${oriTrans.x},${PlusBtn.PADDING + 2})`);\r\n        this.btnBg.setAttributeNS(null, 'width', `${this.kfSize.w}`);\r\n        this.btnBg.setAttributeNS(null, 'height', `${this.kfSize.h}`);\r\n        this.btnBg.setAttributeNS(null, 'stroke', `${PlusBtn.BTN_HIGHLIGHT_COLOR}`);\r\n        this.btnIcon.setAttributeNS(null, 'x', `${this.kfSize.w / 2}`);\r\n        this.btnIcon.setAttributeNS(null, 'y', `${this.kfSize.h / 2 + 6}`);\r\n        this.btnIcon.setAttributeNS(null, 'fill', `${PlusBtn.BTN_HIGHLIGHT_COLOR}`);\r\n    }\r\n\r\n    public cancelHighlightBtn(): void {\r\n        this.isHighlighted = false;\r\n        const oriTrans: ICoord = Tool.extractTransNums(this.container.getAttributeNS(null, 'transform'));\r\n        this.container.setAttributeNS(null, 'transform', `translate(${oriTrans.x},${PlusBtn.PADDING + this.kfSize.h / 2 - PlusBtn.BTN_SIZE / 2})`);\r\n        this.btnBg.setAttributeNS(null, 'width', `${PlusBtn.BTN_SIZE}`);\r\n        this.btnBg.setAttributeNS(null, 'height', `${PlusBtn.BTN_SIZE}`);\r\n        this.btnBg.setAttributeNS(null, 'stroke', `${PlusBtn.BTN_COLOR}`);\r\n        this.btnIcon.setAttributeNS(null, 'x', `${PlusBtn.BTN_SIZE / 2}`);\r\n        this.btnIcon.setAttributeNS(null, 'y', `${PlusBtn.BTN_SIZE / 2 + 6}`);\r\n        this.btnIcon.setAttributeNS(null, 'fill', `${PlusBtn.BTN_COLOR}`);\r\n    }\r\n\r\n    public dragSelOver(): void {\r\n        this.btnBg.setAttributeNS(null, 'stroke', `${PlusBtn.BTN_DRAGOVER_COLOR}`);\r\n        this.btnIcon.setAttributeNS(null, 'fill', `${PlusBtn.BTN_DRAGOVER_COLOR}`);\r\n        Tool.clearDragOver();\r\n        PlusBtn.dragoverBtn = this;\r\n    }\r\n\r\n    public dragSelOut(): void {\r\n        this.btnBg.setAttributeNS(null, 'stroke', `${PlusBtn.BTN_HIGHLIGHT_COLOR}`);\r\n        this.btnIcon.setAttributeNS(null, 'fill', `${PlusBtn.BTN_HIGHLIGHT_COLOR}`);\r\n        PlusBtn.dragoverBtn = undefined;\r\n    }\r\n\r\n    public dropSelOn(): void {\r\n        const selectedMarks: string[] = state.activatePlusBtn.selection;\r\n        let firstKfInfoInParent: IKeyframe = this.firstKfArrInTargetKfg[0];\r\n        const tmpKfInfo: IKeyframe = KfItem.createKfInfo(selectedMarks,\r\n            {\r\n                duration: firstKfInfoInParent.duration,\r\n                allCurrentMarks: firstKfInfoInParent.allCurrentMarks,\r\n                allGroupMarks: firstKfInfoInParent.allGroupMarks\r\n            });\r\n        KfItem.allKfInfo.set(tmpKfInfo.id, tmpKfInfo);\r\n\r\n        //create a kf and replace the plus btn\r\n        const btnX: number = Tool.extractTransNums(this.container.getAttributeNS(null, 'transform')).x;\r\n        this.removeBtn();\r\n        let tmpKf: KfItem = new KfItem();\r\n        tmpKf.createItem(tmpKfInfo, 1, this.fakeKfg, btnX);\r\n        //update other idxInGroup\r\n        this.fakeKfg.children.forEach((c: KfGroup | KfItem | KfOmit) => {\r\n            c.idxInGroup++;\r\n        })\r\n        this.fakeKfg.children.unshift(tmpKf);\r\n        tmpKf.idxInGroup = 0;\r\n        this.fakeKfg.updateSize();\r\n\r\n        const suggestOnFirstKf: boolean = Suggest.generateSuggestionPath(selectedMarks, firstKfInfoInParent, this.targetKfg);\r\n        // const actionInfo: any = { ap: Suggest.allPaths, kfIdxInPath: state.activatePlusBtn.renderedUniqueIdx, startKf: tmpKf, kfGroup: this.fakeKfg, suggestOnFirstKf: suggestOnFirstKf, selectedMarks: selectedMarks };\r\n        // State.tmpStateBusket.push({\r\n        //     historyAction: { actionType: action.UPDATE_SUGGESTION_PATH, actionVal: { ap: undefined, kfIdxInPath: -1, startKf: tmpKf, suggestOnFirstKf: false, selectedMarks: [] } },\r\n        //     currentAction: { actionType: action.UPDATE_SUGGESTION_PATH, actionVal: actionInfo }\r\n        // })\r\n        // State.saveHistory();\r\n        // Reducer.triger(action.UPDATE_SUGGESTION_PATH, actionInfo);\r\n        // Reducer.triger(action.UPDATE_SUGGESTION_PATH, Suggest.allPaths);\r\n        suggestBox.renderKfOnPathAndSuggestionBox(Suggest.allPaths, tmpKf, this.fakeKfg, suggestOnFirstKf);\r\n        // suggestBox.lastUpdateSuggestionPathActionInfo = actionInfo;\r\n    }\r\n}","import '../../assets/style/selectableTable.scss'\r\nimport { state, State } from '../../app_backup/state'\r\nimport { IDataItem, ISortDataAttr } from '../../app_backup/core/ds';\r\nimport Reducer from '../../app_backup/reducer';\r\nimport * as action from '../../app_backup/action'\r\nimport AttrSort from './attrSort';\r\nimport Util from '../../app_backup/core/util';\r\nimport PlusBtn from './plusBtn';\r\nimport KfItem from './kfItem';\r\nimport Tool from '../../util/tool';\r\nimport {Animation} from '../../canis/moduleIdx';\r\n\r\nexport default class SelectableTable {\r\n    startRowIdx: string;\r\n    selectedRows: string[];\r\n    constructor() {\r\n        this.startRowIdx = state.dataOrder[0];\r\n        this.selectedRows = [];\r\n    }\r\n\r\n    public static renderSelection(selection: string[]) {\r\n        Array.from(document.getElementsByClassName('selected-td')).forEach(std => {\r\n            (<HTMLElement>std).classList.remove('selected-td');\r\n        })\r\n        selection.forEach(rowDataId => {\r\n            const targetTr: HTMLElement = document.querySelector('[dataItem=\"' + rowDataId + '\"]');\r\n            if (targetTr) {\r\n                Array.from(targetTr.children).forEach(td => {\r\n                    td.classList.add('selected-td');\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    public createTable(dt: Map<string, IDataItem>): HTMLTableElement {\r\n        const dataTable: HTMLTableElement = document.createElement('table');\r\n        dataTable.className = 'selectable-table';\r\n        let count = 0;\r\n        state.dataOrder.forEach(markId => {\r\n            const dataItem = dt.get(markId);\r\n            if (count === 0) {\r\n                //create title\r\n                const headerTr: HTMLTableRowElement = document.createElement('tr');\r\n                ['markId', ...Object.keys(dataItem)].forEach(key => {\r\n                    const th: HTMLTableHeaderCellElement = document.createElement('th');\r\n                    th.className = 'non-activate-th';\r\n                    const thContainer: HTMLDivElement = document.createElement('div');\r\n                    thContainer.className = 'th-container';\r\n                    const titleContent: HTMLParagraphElement = document.createElement('p');\r\n                    titleContent.innerHTML = key;\r\n                    titleContent.className = 'non-activate-p';\r\n                    thContainer.appendChild(titleContent);\r\n                    //create sort btn\r\n                    const sortBtn: HTMLSpanElement = document.createElement('span');\r\n                    let iconCls: string = '';\r\n                    state.sortDataAttrs.forEach(sda => {\r\n                        if (sda.attr === key) {\r\n                            if (sda.sort === AttrSort.DESCENDING_ORDER) {\r\n                                iconCls = `${AttrSort.DESCENDING_ORDER}-icon activate-sort-btn`;\r\n                                th.title = `${key} in descending order`;\r\n                                titleContent.classList.remove('non-activate-p');\r\n                                th.classList.remove('non-activate-th');\r\n                            } else if (sda.sort === AttrSort.ASSCENDING_ORDER) {\r\n                                iconCls = `${AttrSort.ASSCENDING_ORDER}-icon activate-sort-btn`;\r\n                                th.title = `${key} in asscending order`;\r\n                                titleContent.classList.remove('non-activate-p');\r\n                                th.classList.remove('non-activate-th');\r\n                            } else {\r\n                                th.title = `Click to sort by ${key}`;\r\n                            }\r\n                        }\r\n                    })\r\n                    sortBtn.className = 'sort-btn ' + iconCls;\r\n\r\n                    th.onclick = () => {\r\n                        let sort: string = AttrSort.ASSCENDING_ORDER;\r\n                        if (!sortBtn.classList.contains('asscending-icon') && !sortBtn.classList.contains('descending-icon')) {\r\n                            th.title = `${key} in asscending order`;\r\n                            sort = AttrSort.ASSCENDING_ORDER;\r\n                        } else if (sortBtn.classList.contains('asscending-icon')) {\r\n                            th.title = `${key} in descending order`;\r\n                            sort = AttrSort.DESCENDING_ORDER;\r\n                        } else if (sortBtn.classList.contains('descending-icon')) {\r\n                            th.title = `${key} in asscending order`;\r\n                            sort = AttrSort.ASSCENDING_ORDER;\r\n                        }\r\n                        //triger action\r\n                        let sortDataAttrArr: ISortDataAttr[] = [];\r\n                        state.sortDataAttrs.forEach(sda => {\r\n                            if (sda.attr === key) {\r\n                                sortDataAttrArr.push({\r\n                                    attr: key,\r\n                                    sort: sort\r\n                                })\r\n                            } else {\r\n                                sortDataAttrArr.push({\r\n                                    attr: sda.attr,\r\n                                    sort: AttrSort.INDEX_ORDER\r\n                                });\r\n                            }\r\n                        })\r\n                        //save histroy before update state\r\n                        State.tmpStateBusket.push({\r\n                            historyAction: { actionType: action.UPDATE_DATA_SORT, actionVal: state.sortDataAttrs },\r\n                            currentAction: { actionType: action.UPDATE_DATA_SORT, actionVal: sortDataAttrArr }\r\n                        })\r\n                        State.saveHistory();\r\n                        Reducer.triger(action.UPDATE_DATA_SORT, sortDataAttrArr);\r\n                    }\r\n                    thContainer.appendChild(sortBtn);\r\n                    th.appendChild(thContainer);\r\n\r\n                    headerTr.appendChild(th);\r\n                })\r\n                dataTable.appendChild(headerTr);\r\n            }\r\n            //create content\r\n            const tr: HTMLTableRowElement = document.createElement('tr');\r\n            tr.setAttribute('dataItem', markId);\r\n            [markId, ...Object.values(dataItem)].forEach(value => {\r\n                const td: HTMLTableCellElement = document.createElement('td');\r\n                td.setAttribute('draggable', 'true');\r\n                td.innerText = value.toString();\r\n                td.onmousedown = (downEvt) => {\r\n                    this.mouseDownCell(downEvt);\r\n                }\r\n                // td.onclick = (clickEvt) => {\r\n                //     this.clickCell(clickEvt);\r\n                // }\r\n                // td.ondragstart = (dragStartEvt) => {\r\n                //     this.dragCell(dragStartEvt);\r\n                // }\r\n                tr.appendChild(td);\r\n            })\r\n            dataTable.appendChild(tr);\r\n            count++;\r\n        })\r\n        return dataTable;\r\n    }\r\n\r\n    public resetSelection() {\r\n        this.selectedRows = [];\r\n    }\r\n\r\n    // public dragCell(evt: any) {\r\n    //     console.log('dragging');\r\n    //     evt.currentTarget.classList.add(\"ghost-div\");\r\n    //     var elem = document.createElement('div');\r\n    //     elem.id = 'drag-ghost';\r\n    //     elem.className = 'ghost-div'\r\n    //     elem.innerHTML = \"Dragging\";\r\n    //     elem.style.position = \"absolute\";\r\n    //     elem.style.top = \"-1000px\";\r\n    //     document.body.appendChild(elem);\r\n    //     evt.dataTransfer.setDragImage(elem, 0, 0);\r\n    // }\r\n\r\n    // public clickCell(evt: MouseEvent) {\r\n    //     evt.preventDefault();\r\n    //     const targetTd: HTMLElement = <HTMLElement>evt.target;\r\n    //     if (evt.shiftKey) {\r\n    //         if (this.selectedRows.length >= 0) {\r\n    //             this.selectRange(targetTd);\r\n    //         }\r\n    //     } else if (evt.ctrlKey) {\r\n    //         if (this.selectedRows.length >= 0) {\r\n    //             this.addSelection(targetTd);\r\n    //         }\r\n    //     } else {\r\n    //         this.startRowIdx = targetTd.parentElement.getAttribute('dataItem');\r\n    //         this.resetSelection();\r\n    //         this.selectedRows.push(this.startRowIdx);\r\n    //         SelectableTable.renderSelection(this.selectedRows);\r\n    //         //save histroy before update state\r\n    //         State.tmpStateBusket.push({\r\n    //             historyAction: { actionType: action.UPDATE_SELECTION, actionVal: state.selection },\r\n    //             currentAction: { actionType: action.UPDATE_SELECTION, actionVal: this.selectedRows }\r\n    //         })\r\n    //         State.saveHistory();\r\n    //         Reducer.triger(action.UPDATE_SELECTION, state.suggestion ? Util.suggestSelection(this.selectedRows) : this.selectedRows);\r\n    //     }\r\n    // }\r\n\r\n    public mouseDownCell(evt: MouseEvent) {\r\n        evt.preventDefault();\r\n        Reducer.triger(action.UPDATE_MOUSE_MOVING, true);\r\n        const targetTd: HTMLElement = <HTMLElement>evt.target;\r\n        if (evt.shiftKey) {\r\n            if (this.selectedRows.length >= 0) {\r\n                this.selectRange(targetTd);\r\n            }\r\n        } else if (evt.ctrlKey) {\r\n            if (this.selectedRows.length >= 0) {\r\n                this.addSelection(targetTd);\r\n            }\r\n        } else {\r\n            this.startRowIdx = targetTd.parentElement.getAttribute('dataItem');\r\n            if (state.selection.includes(this.startRowIdx)) {//do grabbing\r\n                console.log('drag start');\r\n                const elem = document.createElement('div');\r\n                elem.id = 'dragGhost';\r\n                elem.className = 'ghost-div dragging-ghost-div'\r\n                elem.innerHTML = `${state.selection.length} Marks`;\r\n                elem.style.left = `${(evt.pageX || (evt.clientX + document.body.scrollLeft)) - 35}px`;\r\n                elem.style.top = `${(evt.pageY || (evt.clientY + document.body.scrollTop)) - 15}px`;\r\n                document.body.appendChild(elem);\r\n\r\n                const selectedCls: string[] = state.selection.map((mId: string) => Animation.markClass.get(mId));//find the classes of selected marks\r\n                PlusBtn.highlightPlusBtns([...new Set(selectedCls)]);//highlight kfs which can be dropped on\r\n                document.onmousemove = (moveEvt) => {\r\n                    this.mouseMoveCell(moveEvt);\r\n                }\r\n            } else {\r\n                this.resetSelection();\r\n                this.selectedRows.push(this.startRowIdx);\r\n                SelectableTable.renderSelection(this.selectedRows);\r\n                //save histroy before update state\r\n                State.tmpStateBusket.push({\r\n                    historyAction: { actionType: action.UPDATE_SELECTION, actionVal: state.selection },\r\n                    currentAction: { actionType: action.UPDATE_SELECTION, actionVal: this.selectedRows }\r\n                })\r\n                State.saveHistory();\r\n                Reducer.triger(action.UPDATE_SELECTION, state.suggestion ? Util.suggestSelection(this.selectedRows) : this.selectedRows);\r\n            }\r\n        }\r\n\r\n        document.onmouseup = (upEvt) => {\r\n            Reducer.triger(action.UPDATE_MOUSE_MOVING, false);\r\n            this.mouseUpCell(upEvt);\r\n        }\r\n    }\r\n    public mouseMoveCell(evt: MouseEvent) {\r\n        // evt.preventDefault();\r\n        // const targetTd: HTMLElement = <HTMLElement>evt.target;\r\n        // this.selectRange(targetTd);\r\n        if (document.getElementById('dragGhost')) {\r\n            const ghostDiv: HTMLElement = document.getElementById('dragGhost');\r\n            // ghostDiv.classList.add('dragging-ghost-div');\r\n            ghostDiv.style.left = `${(evt.pageX || (evt.clientX + document.body.scrollLeft)) - 35}px`;\r\n            ghostDiv.style.top = `${(evt.pageY || (evt.clientY + document.body.scrollTop)) - 15}px`;\r\n        }\r\n        // (<HTMLElement>evt.target).classList.add('dragging-ghost-div');\r\n        // (<HTMLElement>evt.target).style.left = `${(evt.pageX || (evt.clientX + document.body.scrollLeft)) - 35}px`;\r\n        // (<HTMLElement>evt.target).style.top = `${(evt.pageY || (evt.clientY + document.body.scrollTop)) - 15}px`;\r\n\r\n        const dragOverItem: PlusBtn | KfItem = Tool.judgeDragOver({ x: evt.pageX, y: evt.pageY });\r\n        if (typeof dragOverItem !== 'undefined') {\r\n            dragOverItem.dragSelOver();\r\n        } else {\r\n            if (typeof PlusBtn.dragoverBtn !== 'undefined') {\r\n                PlusBtn.dragoverBtn.dragSelOut();\r\n            } else if (typeof KfItem.dragoverKf !== 'undefined') {\r\n                KfItem.dragoverKf.dragSelOut();\r\n            }\r\n        }\r\n    }\r\n    public mouseUpCell(evt: MouseEvent) {\r\n        evt.preventDefault();\r\n        if (document.getElementById('dragGhost')) {\r\n            document.getElementById('dragGhost').remove();\r\n        }\r\n        if (typeof PlusBtn.dragoverBtn !== 'undefined') {\r\n            const selectedMarks: string[] = state.selection;\r\n            Reducer.triger(action.UPDATE_SELECTION, []);//reset state selection\r\n\r\n            State.tmpStateBusket.push({\r\n                historyAction: { actionType: action.ACTIVATE_PLUS_BTN, actionVal: { aniId: '', selection: [], renderedUniqueIdx: -10 } },\r\n                currentAction: { actionType: action.ACTIVATE_PLUS_BTN, actionVal: { aniId: PlusBtn.dragoverBtn.aniId, selection: selectedMarks, renderedUniqueIdx: -1 } }\r\n            })\r\n            State.saveHistory();\r\n            Reducer.triger(action.ACTIVATE_PLUS_BTN, { aniId: PlusBtn.dragoverBtn.aniId, selection: selectedMarks, renderedUniqueIdx: -1 });\r\n        }\r\n        PlusBtn.dragoverBtn = undefined;\r\n        KfItem.dragoverKf = undefined;\r\n        PlusBtn.cancelHighlightPlusBtns();\r\n        document.onmousemove = null;\r\n        document.onmouseup = null;\r\n    }\r\n\r\n    public addSelection(targetTd: HTMLElement) {\r\n        const tmpRowIdx: string = targetTd.parentElement.getAttribute('dataItem');\r\n        const tmpIdx: number = state.dataOrder.indexOf(tmpRowIdx);\r\n        this.selectedRows = [...this.selectedRows, state.dataOrder[tmpIdx]];\r\n        SelectableTable.renderSelection(this.selectedRows);\r\n        //save histroy before update state\r\n        State.tmpStateBusket.push({\r\n            historyAction: { actionType: action.UPDATE_SELECTION, actionVal: state.selection },\r\n            currentAction: { actionType: action.UPDATE_SELECTION, actionVal: this.selectedRows }\r\n        })\r\n        State.saveHistory();\r\n        Reducer.triger(action.UPDATE_SELECTION, state.suggestion ? Util.suggestSelection(this.selectedRows) : this.selectedRows);\r\n    }\r\n\r\n    public selectRange(targetTd: HTMLElement) {\r\n        const tmpRowIdx: string = targetTd.parentElement.getAttribute('dataItem');\r\n        const startIdx: number = state.dataOrder.indexOf(this.startRowIdx);\r\n        const tmpIdx: number = state.dataOrder.indexOf(tmpRowIdx);\r\n        let selectionStartIdx: number, selectionEndIdx: number;\r\n        if (startIdx <= tmpIdx) {\r\n            selectionStartIdx = startIdx;\r\n            selectionEndIdx = tmpIdx;\r\n        } else {\r\n            this.startRowIdx = tmpRowIdx;\r\n            selectionStartIdx = tmpIdx;\r\n            selectionEndIdx = startIdx;\r\n        }\r\n        this.selectedRows = state.dataOrder.slice(selectionStartIdx, selectionEndIdx + 1);\r\n        SelectableTable.renderSelection(this.selectedRows);\r\n        //save histroy before update state\r\n        State.tmpStateBusket.push({\r\n            historyAction: { actionType: action.UPDATE_SELECTION, actionVal: state.selection },\r\n            currentAction: { actionType: action.UPDATE_SELECTION, actionVal: this.selectedRows }\r\n        })\r\n        State.saveHistory();\r\n        Reducer.triger(action.UPDATE_SELECTION, state.suggestion ? Util.suggestSelection(this.selectedRows) : this.selectedRows);\r\n    }\r\n}","import '../../assets/style/slider.scss'\r\nimport Reducer from '../../app_backup/reducer';\r\nimport * as action from '../../app_backup/action';\r\nimport { kfTrack } from '../../app/kfTrack';\r\n\r\nexport default class Slider {\r\n    static SLIDER_HEIGHT = 26;\r\n    static SLIDER_WIDTH = 100;\r\n    static SLIDER_RADIUS = 5;\r\n    static TRACK_WIDTH = 2;\r\n    static MIN_WIDTH = 100;\r\n\r\n    domain: number[];//value this slider covers\r\n    currentValue: number;\r\n    hideSlider: boolean;\r\n\r\n    //properties of the slider\r\n    containerHeight: number;\r\n    _containerWidth: number;\r\n    sliderRadius: number;\r\n    sliderMargin: number;\r\n    trackWidth: number;\r\n    reverseScale: (a: number) => number;//return the data value which the slider currently encodes\r\n    scale: (a: number) => number;//return position of the slider with the input data value\r\n    created: boolean = false;//whether this slide bar is added\r\n    callbackFunc: (v: number) => void;//function to call on mouse up\r\n\r\n    //components in the slider\r\n    sliderContainer: SVGSVGElement;\r\n    slider: SVGCircleElement;\r\n    trackBg: SVGLineElement;\r\n    trackPassed: SVGLineElement;\r\n\r\n    set containerWidth(cw: number) {\r\n        this._containerWidth = cw >= Slider.MIN_WIDTH ? cw : Slider.MIN_WIDTH;\r\n        if (this.created) {\r\n            this.sliderContainer.setAttributeNS(null, 'width', (this._containerWidth + 2 * this.sliderMargin).toString());\r\n            this.trackBg.setAttributeNS(null, 'x2', (this.containerWidth + this.sliderMargin).toString());\r\n            this.slider.setAttributeNS(null, 'cx', this.scale(this.currentValue).toString());\r\n            this.trackPassed.setAttributeNS(null, 'x2', this.scale(this.currentValue).toString());\r\n        }\r\n    }\r\n    get containerWidth() {\r\n        return this._containerWidth;\r\n    }\r\n\r\n    constructor(domain: number[], defaultValue: number = 0, hideSlider: boolean = false, sliderRadius: number = Slider.SLIDER_RADIUS, trackWidth: number = Slider.TRACK_WIDTH, sliderWidth: number = Slider.SLIDER_WIDTH, sliderHeight: number = Slider.SLIDER_HEIGHT) {\r\n        this.domain = domain;\r\n        this.currentValue = defaultValue;\r\n        this.hideSlider = hideSlider;\r\n        this.sliderRadius = sliderRadius;\r\n        this.sliderMargin = this.sliderRadius + 2;\r\n        this.trackWidth = trackWidth;\r\n        this.containerHeight = sliderHeight;\r\n        this.containerWidth = sliderWidth - 2 * this.sliderMargin;\r\n        this.reverseScale = (a: number) => {\r\n            return Math.floor(100 * (((a - this.sliderMargin) / this.containerWidth) * (this.domain[1] - this.domain[0]) + this.domain[0])) / 100;\r\n        }\r\n        this.scale = (a: number) => {\r\n            if (this.domain[1] !== this.domain[0]) {\r\n                return Math.floor(100 * (this.containerWidth * (a - this.domain[0]) / (this.domain[1] - this.domain[0]) + this.sliderMargin)) / 100;\r\n            }\r\n            return this.sliderMargin;\r\n        }\r\n    }\r\n\r\n    public createSlider(): void {\r\n        this.sliderContainer = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n        this.sliderContainer.setAttributeNS(null, 'class', 'slider-container');\r\n        this.sliderContainer.setAttributeNS(null, 'width', (this.containerWidth + 2 * this.sliderMargin).toString());\r\n        this.sliderContainer.setAttributeNS(null, 'height', this.containerHeight.toString());\r\n        //create track background\r\n        this.trackBg = document.createElementNS('http://www.w3.org/2000/svg', 'line');\r\n        this.trackBg.setAttributeNS(null, 'x1', this.sliderMargin.toString());\r\n        this.trackBg.setAttributeNS(null, 'y1', (this.containerHeight / 2).toString());\r\n        this.trackBg.setAttributeNS(null, 'x2', (this.containerWidth + this.sliderMargin).toString());\r\n        this.trackBg.setAttributeNS(null, 'y2', (this.containerHeight / 2).toString());\r\n        this.trackBg.setAttributeNS(null, 'stroke', '#c2c2c2');\r\n        this.trackBg.setAttributeNS(null, 'stroke-width', this.trackWidth.toString());\r\n        this.sliderContainer.appendChild(this.trackBg);\r\n\r\n        //create track for the passed time\r\n        this.trackPassed = document.createElementNS('http://www.w3.org/2000/svg', 'line');\r\n        this.trackPassed.setAttributeNS(null, 'class', 'track-passed');\r\n        this.trackPassed.setAttributeNS(null, 'x1', this.sliderMargin.toString());\r\n        this.trackPassed.setAttributeNS(null, 'y1', (this.containerHeight / 2).toString());\r\n        this.trackPassed.setAttributeNS(null, 'x2', this.scale(this.currentValue).toString());\r\n        this.trackPassed.setAttributeNS(null, 'y2', (this.containerHeight / 2).toString());\r\n        this.trackPassed.setAttributeNS(null, 'stroke-width', this.trackWidth.toString());\r\n        this.sliderContainer.appendChild(this.trackPassed);\r\n\r\n        //create slider\r\n        this.slider = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\r\n        this.slider.setAttributeNS(null, 'class', 'slider ' + (this.hideSlider ? 'hidden-slider' : ''));\r\n        this.slider.setAttributeNS(null, 'r', this.sliderRadius.toString());\r\n        this.slider.setAttributeNS(null, 'cx', this.scale(this.currentValue).toString());\r\n        this.slider.setAttributeNS(null, 'cy', (this.containerHeight / 2).toString());\r\n\r\n        //bind dragging event to the slider\r\n        this.slider.onmousedown = (downEvt) => {\r\n            Reducer.triger(action.UPDATE_MOUSE_MOVING, true);\r\n            let preX: number = downEvt.pageX;\r\n            document.onmousemove = (moveEvt) => {\r\n                const currentX: number = moveEvt.pageX;\r\n                const diffX: number = currentX - preX;\r\n                const currentSliderX: number = parseFloat(this.slider.getAttributeNS(null, 'cx'));\r\n                if (currentSliderX + diffX <= this.containerWidth + this.sliderMargin && currentSliderX + diffX >= this.sliderMargin) {\r\n                    this.slider.setAttributeNS(null, 'cx', (currentSliderX + diffX).toString());\r\n                    this.trackPassed.setAttributeNS(null, 'x2', (currentSliderX + diffX).toString());\r\n                    preX = currentX;\r\n                }\r\n                if (this.callbackFunc && typeof this.callbackFunc !== 'undefined') {\r\n                    this.callbackFunc(this.reverseScale(currentSliderX));\r\n                }\r\n            }\r\n            document.onmouseup = () => {\r\n                Reducer.triger(action.UPDATE_MOUSE_MOVING, false);\r\n                const currentSliderX: number = parseFloat(this.slider.getAttributeNS(null, 'cx'));\r\n                this.currentValue = this.reverseScale(currentSliderX);\r\n                if (this.callbackFunc && typeof this.callbackFunc !== 'undefined') {\r\n                    this.callbackFunc(this.currentValue);\r\n                }\r\n                document.onmousemove = null;\r\n                document.onmouseup = null;\r\n            }\r\n        }\r\n        this.sliderContainer.appendChild(this.slider);\r\n        this.created = true;\r\n        // return sliderContainer;\r\n    }\r\n\r\n    public moveSlider(value: number): void {\r\n        this.currentValue = value;\r\n        this.slider.setAttributeNS(null, 'cx', this.scale(value).toString());\r\n        this.trackPassed.setAttributeNS(null, 'x2', this.scale(value).toString());\r\n        if (this.callbackFunc && typeof this.callbackFunc !== 'undefined') {\r\n            this.callbackFunc(value);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param cw new container width\r\n     */\r\n    public updateSlider(cw: number) {\r\n        this.containerWidth = cw;\r\n    }\r\n\r\n    public updateDomain(domain: [number, number]) {\r\n        this.domain = domain;\r\n    }\r\n}","import '../../assets/style/sortableSvgTable.scss'\r\nimport { ICoord } from \"../../util/ds\";\r\nimport { KfContainer } from \"../kfContainer\";\r\nimport { state, State } from \"../../app_backup/state\";\r\nimport KfGroup from \"./kfGroup\";\r\nimport * as action from \"../../app_backup/action\";\r\nimport Tool from '../../util/tool';\r\nimport Reducer from '../../app_backup/reducer';\r\nimport KfItem from './kfItem';\r\nimport CanisGenerator from '../../app_backup/core/canisGenerator';\r\n\r\nexport default class SortableSvgTable {\r\n    static TABLE_WIDTH: number = 200;\r\n    static TABLE_PADDING: number = 6;\r\n    static CELL_HEIGHT: number = 24;\r\n    private data: string[];\r\n    private correspondingKfg: KfGroup;\r\n    private position: ICoord;\r\n\r\n    public container: SVGGElement;\r\n    public useTag: SVGGElement;\r\n\r\n    /**\r\n     * @param data : attribtue names used to do sorting \r\n     */\r\n    public createTable(data: string[], position: ICoord, kfg: KfGroup) {\r\n        this.data = data;\r\n        this.position = position;\r\n        this.correspondingKfg = kfg;\r\n        this.renderTable();\r\n    }\r\n\r\n    private renderTable() {\r\n        const svgHintLayer: HTMLElement = document.getElementById(KfContainer.KF_HINT);\r\n        const layerBBox: DOMRect = document.getElementById(KfContainer.KF_FG).getBoundingClientRect();//fixed\r\n        this.container = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n        this.container.setAttributeNS(null, 'transform', `translate(${(this.position.x - layerBBox.left) / state.zoomLevel}, ${(this.position.y - layerBBox.top) / state.zoomLevel})`);\r\n        this.container.onmouseleave = () => {\r\n            this.removeTable();\r\n            this.correspondingKfg.transHideTitle();\r\n        }\r\n        const fakeBg: SVGRectElement = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n        fakeBg.setAttributeNS(null, 'x', '0');\r\n        fakeBg.setAttributeNS(null, 'y', '0');\r\n        fakeBg.setAttributeNS(null, 'width', `${SortableSvgTable.TABLE_WIDTH}`);\r\n        fakeBg.setAttributeNS(null, 'height', `${SortableSvgTable.TABLE_WIDTH}`);\r\n        fakeBg.setAttributeNS(null, 'fill', 'rgba(0,0,0,0)');\r\n        this.container.appendChild(fakeBg);\r\n\r\n        const pointer: SVGPathElement = document.createElementNS('http://www.w3.org/2000/svg', 'path');\r\n        pointer.classList.add('drop-shadow-ele');\r\n        pointer.setAttributeNS(null, 'd', 'M8,0 V12 L0,6 Z');\r\n        pointer.setAttributeNS(null, 'transform', `translate(${KfGroup.TITLE_HEIHGT - 4}, 2)`);\r\n        pointer.setAttributeNS(null, 'fill', '#383838');\r\n        this.container.appendChild(pointer);\r\n\r\n        const bg: SVGRectElement = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n        bg.classList.add('drop-shadow-ele');\r\n        bg.setAttributeNS(null, 'x', `${KfGroup.TITLE_HEIHGT + 4}`);\r\n        bg.setAttributeNS(null, 'y', '0');\r\n        bg.setAttributeNS(null, 'width', `${SortableSvgTable.TABLE_WIDTH - KfGroup.TITLE_HEIHGT - 4}`);\r\n        bg.setAttributeNS(null, 'height', `${SortableSvgTable.TABLE_WIDTH}`);\r\n        bg.setAttributeNS(null, 'stroke', '#383838');\r\n        bg.setAttributeNS(null, 'fill', '#e6e6e6');\r\n        bg.setAttributeNS(null, 'stroke-width', '1');\r\n        this.container.appendChild(bg);\r\n\r\n        //create list\r\n        const itemList: SVGGElement[] = [];\r\n        const itemContentList: string[] = [];\r\n        this.data.forEach((d: string, idx: number) => {\r\n            const itemContainer: SVGGElement = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n            itemContainer.classList.add('ease-transform');\r\n            itemContainer.setAttributeNS(null, 'id', `sortAttr${idx}`);\r\n            itemContainer.setAttributeNS(null, 'transform', `translate(${SortableSvgTable.TABLE_PADDING + KfGroup.TITLE_HEIHGT + 4}, ${SortableSvgTable.TABLE_PADDING + idx * SortableSvgTable.CELL_HEIGHT})`);\r\n            itemContainer.classList.add('svg-table-cell-container');\r\n            const itemBg: SVGRectElement = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n            itemBg.setAttributeNS(null, 'width', `${SortableSvgTable.TABLE_WIDTH - 2 * SortableSvgTable.TABLE_PADDING - KfGroup.TITLE_HEIHGT - 4}`);\r\n            itemBg.setAttributeNS(null, 'height', `${SortableSvgTable.CELL_HEIGHT}`);\r\n            itemContainer.appendChild(itemBg);\r\n            const itemContent: SVGTextContentElement = document.createElementNS('http://www.w3.org/2000/svg', 'text');\r\n            itemContent.innerHTML = d;\r\n            itemContentList.push(d);\r\n            itemContent.setAttributeNS(null, 'x', '10');\r\n            itemContent.setAttributeNS(null, 'y', `${SortableSvgTable.CELL_HEIGHT - 7}`);\r\n            itemContainer.appendChild(itemContent);\r\n            this.container.appendChild(itemContainer);\r\n\r\n            itemContainer.onmousedown = (downEvt) => {\r\n                Reducer.triger(action.UPDATE_MOUSE_MOVING, true);\r\n                itemContainer.classList.add('being-selected');\r\n                const cloneItem: Node = itemContainer.cloneNode(true);\r\n                this.useTag = <SVGGElement>cloneItem;\r\n                this.useTag.classList.add('being-dragging');\r\n                this.useTag.classList.remove('ease-transform');\r\n                this.useTag.setAttributeNS(null, 'opacity', '0.5');\r\n                this.container.appendChild(this.useTag);\r\n                let oriMousePosi: ICoord = {\r\n                    x: 0,\r\n                    y: downEvt.pageY\r\n                }\r\n                let currentItemPosi: ICoord = Tool.extractTransNums(itemContainer.getAttributeNS(null, 'transform'));\r\n                document.onmousemove = (moveEvt) => {\r\n                    let tmpMousePosi: ICoord = {\r\n                        x: 0,\r\n                        y: moveEvt.pageY\r\n                    }\r\n                    let diffPosi: ICoord = {\r\n                        x: 0,\r\n                        y: (tmpMousePosi.y - oriMousePosi.y) / state.zoomLevel,\r\n                    }\r\n                    //drag use tag\r\n                    const oriTrans: ICoord = Tool.extractTransNums(this.useTag.getAttributeNS(null, 'transform'));\r\n                    this.useTag.setAttributeNS(null, 'transform', `translate(${oriTrans.x}, ${oriTrans.y + diffPosi.y})`);\r\n\r\n                    //switch\r\n                    if (oriTrans.y + diffPosi.y < currentItemPosi.y - SortableSvgTable.CELL_HEIGHT / 2) {\r\n                        for (let i = 0, len = itemList.length; i < len; i++) {\r\n                            const tmpTrans: ICoord = Tool.extractTransNums(itemList[i].getAttributeNS(null, 'transform'));\r\n                            if (currentItemPosi.y - SortableSvgTable.CELL_HEIGHT === tmpTrans.y) {\r\n                                itemContainer.setAttributeNS(null, 'transform', `translate(${currentItemPosi.x}, ${currentItemPosi.y - SortableSvgTable.CELL_HEIGHT})`);\r\n                                itemList[i].setAttributeNS(null, 'transform', `translate(${tmpTrans.x}, ${tmpTrans.y + SortableSvgTable.CELL_HEIGHT})`);\r\n                                currentItemPosi = tmpTrans;\r\n                                break;\r\n                            }\r\n                        }\r\n                    } else if (oriTrans.y + diffPosi.y > currentItemPosi.y + SortableSvgTable.CELL_HEIGHT / 2) {\r\n                        for (let i = 0, len = itemList.length; i < len; i++) {\r\n                            const tmpTrans: ICoord = Tool.extractTransNums(itemList[i].getAttributeNS(null, 'transform'));\r\n                            if (currentItemPosi.y + SortableSvgTable.CELL_HEIGHT === tmpTrans.y) {\r\n                                itemContainer.setAttributeNS(null, 'transform', `translate(${currentItemPosi.x}, ${currentItemPosi.y + SortableSvgTable.CELL_HEIGHT})`);\r\n                                itemList[i].setAttributeNS(null, 'transform', `translate(${tmpTrans.x}, ${tmpTrans.y - SortableSvgTable.CELL_HEIGHT})`);\r\n                                currentItemPosi = tmpTrans;\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    oriMousePosi = tmpMousePosi;\r\n                }\r\n                document.onmouseup = () => {\r\n                    Reducer.triger(action.UPDATE_MOUSE_MOVING, false);\r\n                    this.useTag.remove();\r\n                    itemContainer.classList.remove('being-selected');\r\n                    document.onmousemove = null;\r\n                    document.onmouseup = null;\r\n                    const tmpRecorder: ([number, string])[] = itemList.map((tmpItemContainer: SVGGElement, idx) => {\r\n                        return [Tool.extractTransNums(tmpItemContainer.getAttributeNS(null, 'transform')).y, itemContentList[idx]];\r\n                    })\r\n                    tmpRecorder.sort((a: [number, string], b: [number, string]) => {\r\n                        return a[0] - b[0];\r\n                    })\r\n                    const attrOrder: string[] = tmpRecorder.map((tr: [number, string]) => tr[1]);\r\n                    this.removeTable();\r\n                    const oriOrder: string[] = CanisGenerator.fetchGroupingSort(this.correspondingKfg.aniId, this.correspondingKfg.childrenRef);\r\n                    State.tmpStateBusket.push({\r\n                        historyAction: { actionType: action.UDPATE_GROUPING_SORT, actionVal: { aniId: this.correspondingKfg.aniId, groupRef: this.correspondingKfg.childrenRef, order: oriOrder } },\r\n                        currentAction: { actionType: action.UDPATE_GROUPING_SORT, actionVal: { aniId: this.correspondingKfg.aniId, groupRef: this.correspondingKfg.childrenRef, order: attrOrder } }\r\n                    })\r\n                    State.saveHistory();\r\n                    Reducer.triger(action.UDPATE_GROUPING_SORT, { aniId: this.correspondingKfg.aniId, groupRef: this.correspondingKfg.childrenRef, order: attrOrder });\r\n                }\r\n            }\r\n            itemList.push(itemContainer);\r\n        })\r\n\r\n        svgHintLayer.appendChild(this.container);\r\n    }\r\n\r\n    public removeTable() {\r\n        const svgHintLayer: HTMLElement = document.getElementById(KfContainer.KF_HINT);\r\n        if (svgHintLayer.contains(this.container)) {\r\n            svgHintLayer.removeChild(this.container);\r\n        }\r\n    }\r\n}\r\n\r\nexport const sortableSvgTable: SortableSvgTable = new SortableSvgTable();","import '../../assets/style/suggestBox.scss'\r\nimport KfItem from \"./kfItem\";\r\nimport { KfContainer } from \"../kfContainer\";\r\nimport { state, State } from \"../../app_backup/state\";\r\nimport { IPath, IKeyframe, IActivatePlusBtn } from \"../../app_backup/core/ds\";\r\nimport KfGroup from \"./kfGroup\";\r\nimport Tool from \"../../util/tool\";\r\nimport { ICoord } from \"../../util/ds\";\r\nimport Reducer from \"../../app_backup/reducer\";\r\nimport * as action from \"../../app_backup/action\";\r\nimport { Loading } from './loading';\r\nimport Util from '../../app_backup/core/util';\r\nimport Suggest from '../../app_backup/core/suggest';\r\nimport PlusBtn from './plusBtn';\r\nimport KfOmit from './kfOmit';\r\n\r\ninterface IOptionInfo {\r\n    kfIdx: number;\r\n    attrs: string[]\r\n    values: string[]\r\n    marks: string[]\r\n    allCurrentMarks: string[]\r\n    allGroupMarks: string[]\r\n    kfWidth: number\r\n    kfHeight: number\r\n    suggestOnFirstKf: boolean\r\n    ordering?: {\r\n        attr: string\r\n        order: string\r\n    }\r\n}\r\n\r\nexport class SuggestBox {\r\n    static PADDING: number = 6;\r\n    static SHOWN_NUM: number = 2;\r\n    static MENU_WIDTH: number = 20;\r\n\r\n    public lastUpdateSuggestionPathActionInfo: {\r\n        ap: IPath[],\r\n        kfIdxInPath: number,\r\n        startKf: KfItem,\r\n        suggestOnFirstKf: boolean,\r\n        selectedMarks: string[]\r\n    }\r\n    public kfBeforeSuggestBox: KfItem;\r\n    public uniqueKfIdx: number;\r\n    public kfWidth: number = 240;\r\n    public kfHeight: number = 178;\r\n    public boxWidth: number = 240;\r\n    public suggestMenu: SuggestMenu;\r\n    public menuWidth: number = 0;\r\n    public preMenuWidth: number = 0;//TODO: remove this \r\n    public numShown: number = SuggestBox.SHOWN_NUM;\r\n    public container: SVGGElement;\r\n    public itemContainer: SVGGElement;\r\n    public options: OptionItem[] = [];\r\n\r\n    public createSuggestBox(kfBeforeSuggestBox: KfItem, allCurrentPaths: IPath[], uniqueKfIdx: number, suggestOnFirstKf: boolean) {\r\n        this.kfBeforeSuggestBox = kfBeforeSuggestBox;\r\n        this.uniqueKfIdx = uniqueKfIdx;\r\n        this.kfWidth = this.kfBeforeSuggestBox.kfWidth - 2 * SuggestBox.PADDING * this.kfBeforeSuggestBox.kfWidth / this.kfBeforeSuggestBox.kfHeight;\r\n        this.kfHeight = this.kfBeforeSuggestBox.kfHeight - 2 * SuggestBox.PADDING;\r\n        this.boxWidth = this.kfWidth + 3 * SuggestBox.PADDING + OptionItem.TEXT_PANEL_WIDTH;\r\n        const tmpKfInfo: IKeyframe = KfItem.allKfInfo.get(this.kfBeforeSuggestBox.id);\r\n        this.createOptionKfs(allCurrentPaths, [...tmpKfInfo.allCurrentMarks, ...tmpKfInfo.marksThisKf], tmpKfInfo.allGroupMarks, suggestOnFirstKf);\r\n        if (typeof this.container === 'undefined') {\r\n            this.container = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n        }\r\n        if (this.options.length <= this.numShown) {\r\n            this.numShown = this.options.length;\r\n            this.preMenuWidth = this.menuWidth;\r\n            this.menuWidth = 0;\r\n            if (typeof this.suggestMenu !== 'undefined') {\r\n                this.container.removeChild(this.suggestMenu.container);\r\n                this.suggestMenu = undefined;\r\n            }\r\n        } else {\r\n            this.numShown = SuggestBox.SHOWN_NUM;\r\n            this.preMenuWidth = this.menuWidth;\r\n            this.menuWidth = SuggestBox.MENU_WIDTH;\r\n            this.suggestMenu = new SuggestMenu();\r\n            this.suggestMenu.createMenu({ x: this.boxWidth, y: this.kfHeight / 2 + SuggestBox.PADDING }, this);\r\n            this.container.appendChild(this.suggestMenu.container);\r\n        }\r\n\r\n        const bgLayerBBox: DOMRect = document.getElementById(KfContainer.KF_FG).getBoundingClientRect();//fixed\r\n        const preKfBBox: DOMRect = this.kfBeforeSuggestBox.container.getBoundingClientRect();//fixed\r\n        this.container.setAttributeNS(null, 'transform', `translate(${SuggestBox.PADDING + (preKfBBox.right - bgLayerBBox.left) / state.zoomLevel}, ${(preKfBBox.top - bgLayerBBox.top) / state.zoomLevel})`);\r\n        const bg: SVGRectElement = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n        bg.setAttributeNS(null, 'width', `${this.boxWidth}`);\r\n        bg.setAttributeNS(null, 'height', `${(this.kfHeight + 2 * SuggestBox.PADDING) * this.numShown}`);\r\n        bg.setAttributeNS(null, 'fill', '#c9caca');\r\n        bg.setAttributeNS(null, 'stroke', '#676767');\r\n        bg.setAttributeNS(null, 'rx', `${KfGroup.GROUP_RX}`);\r\n        this.container.appendChild(bg);\r\n\r\n        this.itemContainer = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n        this.container.appendChild(this.itemContainer);\r\n        for (let i = 0; i < this.numShown; i++) {\r\n            this.options[i].updateTrans(i);\r\n            this.itemContainer.appendChild(this.options[i].container);\r\n        }\r\n\r\n        const popupLayer: HTMLElement = document.getElementById(KfContainer.KF_POPUP);\r\n        popupLayer.appendChild(this.container);\r\n    }\r\n\r\n    public removeSuggestBox() {\r\n        if (typeof this.container !== 'undefined') {\r\n            this.container.innerHTML = '';\r\n        }\r\n        const popupLayer: HTMLElement = document.getElementById(KfContainer.KF_POPUP);\r\n        if (popupLayer.contains(this.container)) {\r\n            popupLayer.removeChild(this.container);\r\n        }\r\n        this.options = [];\r\n        this.menuWidth = 0;\r\n        this.suggestMenu = undefined;\r\n    }\r\n\r\n    public pathToSpec(allSuggestedPaths: IPath[], startKf: KfItem, selectedMarks: string[], suggestOnFirstKf: boolean) {\r\n        // console.log('rendering path to spec: ', allSuggestedPaths, suggestOnFirstKf);\r\n        suggestBox.resetProps();\r\n        const targetPath: IPath = allSuggestedPaths[0];\r\n\r\n        let actionType: string = '';\r\n        let actionInfo: any = {};\r\n        if (typeof targetPath === 'undefined') {\r\n            //create one animation\r\n            actionType = action.SPLIT_CREATE_ONE_ANI;\r\n            actionInfo = { aniId: startKf.aniId, newAniSelector: `#${selectedMarks.join(', #')}`, attrComb: [], attrValueSort: [] };\r\n            // Reducer.triger(action.SPLIT_CREATE_ONE_ANI, { aniId: startKf.aniId, newAniSelector: `#${selectedMarks.join(', #')}`, attrComb: [], attrValueSort: [] });\r\n        } else {\r\n            //extract attr value order\r\n            const attrValueSort: string[][] = Util.extractAttrValueOrder(targetPath.sortedAttrValueComb);\r\n            const [clsOfMarksInPath, containsNonDataMarkInPath] = Util.extractClsFromMarks(targetPath.lastKfMarks);\r\n            const [clsOfMarksThisAni, containsNonDataMarkInAni] = Util.extractClsFromMarks(startKf.parentObj.marksThisAni());\r\n            if (!suggestOnFirstKf) {//the suggestion is based on all marks in this animation as the last kf\r\n                if (Tool.identicalArrays(clsOfMarksInPath, clsOfMarksThisAni)) {//marks in current path have the same classes as those in current animation \r\n                    if (clsOfMarksInPath.length > 1 && !containsNonDataMarkInPath) {//create multiple animations\r\n                        // console.log('same create multi ani');\r\n                        actionType = action.REMOVE_CREATE_MULTI_ANI;\r\n                        actionInfo = { aniId: startKf.aniId, path: targetPath, attrValueSort: attrValueSort }\r\n                    } else {//create grouping\r\n                        actionType = action.UPDATE_SPEC_GROUPING;\r\n                        actionInfo = { aniId: startKf.aniId, attrComb: targetPath.attrComb, attrValueSort: attrValueSort }\r\n                    }\r\n                } else {//marks in current path don't have the same classes as those in current animation \r\n                    if (clsOfMarksInPath.length > 1 && !containsNonDataMarkInPath) {//create multiple animations\r\n                        // console.log('not same create multi ani');\r\n                        actionType = action.SPLIT_CREATE_MULTI_ANI;\r\n                        actionInfo = { aniId: startKf.aniId, path: targetPath, attrValueSort: attrValueSort };\r\n                    } else {//create one animation\r\n                        // console.log('not same create one ani');\r\n                        actionType = action.SPLIT_CREATE_ONE_ANI;\r\n                        actionInfo = { aniId: startKf.aniId, newAniSelector: `#${targetPath.lastKfMarks.join(', #')}`, attrComb: targetPath.attrComb, attrValueSort: attrValueSort };\r\n                    }\r\n                }\r\n            } else {//the suggestion is based on all marks in current first  kf as the last kf\r\n                if (clsOfMarksInPath.length > 1) {//change timing of marks of different classes\r\n                    // console.log('diff cls first kf as last: ', targetPath, targetPath.attrComb, attrValueSort);\r\n                    actionType = action.APPEND_SPEC_GROUPING;\r\n                    actionInfo = { aniId: startKf.aniId, attrComb: targetPath.attrComb, attrValueSort: attrValueSort }\r\n                } else {//append grouping to current animation\r\n                    actionType = action.APPEND_SPEC_GROUPING;\r\n                    actionInfo = { aniId: startKf.aniId, attrComb: targetPath.attrComb, attrValueSort: attrValueSort };\r\n                }\r\n            }\r\n        }\r\n\r\n        State.tmpStateBusket.push({\r\n            historyAction: { actionType: action.LOAD_CANIS_SPEC, actionVal: JSON.stringify(state.spec) },\r\n            currentAction: { actionType: actionType, actionVal: actionInfo }\r\n        })\r\n        let insertHistory: boolean = false;\r\n        if (State.stateHistory[State.stateHistory.length - 1][0].currentAction.actionType === action.ACTIVATE_PLUS_BTN) {\r\n            insertHistory = true;\r\n        }\r\n        State.saveHistory(insertHistory);\r\n        Reducer.triger(actionType, actionInfo);\r\n    }\r\n\r\n    public createKfOnPath(marksThisStep: string[], preKfInfo: IKeyframe, startKf: KfItem, transX: number): [IKeyframe, KfItem] {\r\n        const tmpKfInfo: IKeyframe = KfItem.createKfInfo(marksThisStep,\r\n            {\r\n                duration: preKfInfo.duration,\r\n                allCurrentMarks: preKfInfo.allCurrentMarks,\r\n                allGroupMarks: preKfInfo.allGroupMarks\r\n            });\r\n        KfItem.allKfInfo.set(tmpKfInfo.id, tmpKfInfo);\r\n        let tmpKf: KfItem = new KfItem();\r\n        const startX: number = Tool.extractTransNums(startKf.container.getAttributeNS(null, 'transform')).x + transX - KfGroup.PADDING;\r\n        tmpKf.createItem(tmpKfInfo, startKf.parentObj.treeLevel + 1, startKf.parentObj, startX);\r\n        startKf.parentObj.children.push(tmpKf);\r\n        tmpKf.idxInGroup = startKf.parentObj.children.length - 1;\r\n        return [tmpKfInfo, tmpKf];\r\n    }\r\n\r\n    public renderKfOnPathAndSuggestionBox(allSuggestedPaths: IPath[], startKf: KfItem, startKfGroup: KfGroup, suggestOnFirstKf: boolean) {\r\n        const selectedMarks: string[] = state.activatePlusBtn.selection;//marks dropped on the plus button\r\n        const kfIdxInPath: number = state.activatePlusBtn.renderedUniqueIdx;\r\n        const marksEachStep: Map<number, string[]> = state.activatePlusBtn.selectedMarksEachStep;\r\n\r\n        let insertIdx: number = 0;\r\n        let kfBeforeSuggestBox: KfItem = startKf;\r\n        let transX: number = startKf.totalWidth;\r\n        let lastKf: KfItem;\r\n        const startKfInfo: IKeyframe = KfItem.allKfInfo.get(startKf.id);\r\n        let preKfInfo: IKeyframe = startKfInfo;\r\n        let preKf: KfItem = startKf;\r\n        let preStepIdx: number = -1;\r\n        if (typeof marksEachStep !== 'undefined') {\r\n            const marksEachStepArr: ([number, string[]])[] = [...marksEachStep];\r\n            for (let i = 0, len = marksEachStepArr.length; i < len; i++) {\r\n                let stepIdx: number = marksEachStepArr[i][0];\r\n                let marksThisStep: string[] = marksEachStepArr[i][1];\r\n\r\n                //render kfs in between\r\n                if (stepIdx - preStepIdx - 1 > 0) {\r\n                    for (let j = preStepIdx + 1; j < stepIdx; j++) {\r\n                        let omittedMarksRecord: string[] = [];\r\n                        if (stepIdx - preStepIdx - 1 > 2) {\r\n                            if (j === stepIdx - 1) {//put omit\r\n                                const kfOmit: KfOmit = new KfOmit();\r\n                                const omitStartX: number = Tool.extractTransNums(preKf.container.getAttributeNS(null, 'transform')).x + preKf.kfWidth + transX;\r\n                                kfOmit.createOmit(KfOmit.KF_OMIT, omitStartX, stepIdx - preStepIdx - 3, startKf.parentObj, false, true, startKf.kfHeight / 2);\r\n                                startKf.parentObj.children.push(kfOmit);\r\n                                startKf.parentObj.kfOmits.push(kfOmit);\r\n                                insertIdx++;\r\n                                transX += kfOmit.oWidth + 2 * KfItem.PADDING;\r\n                            } else if (j > preStepIdx + 1 && j < stepIdx - 1) {\r\n                                omittedMarksRecord = [...omittedMarksRecord, ...allSuggestedPaths[0].kfMarks[j]];\r\n                            }\r\n                        }\r\n\r\n                        //render kf\r\n                        const [tmpKfInfo, tmpKf] = this.createKfOnPath([...allSuggestedPaths[0].kfMarks[j], ...omittedMarksRecord], preKfInfo, startKf, transX)\r\n                        lastKf = tmpKf;\r\n                        insertIdx++;\r\n                        transX += tmpKf.totalWidth;\r\n                        kfBeforeSuggestBox = tmpKf;\r\n                        preKfInfo = tmpKfInfo;\r\n                        preKf = tmpKf;\r\n                    }\r\n                }\r\n\r\n                //render this kf\r\n                const [tmpKfInfo, tmpKf] = this.createKfOnPath(marksThisStep, preKfInfo, startKf, transX)\r\n                lastKf = tmpKf;\r\n                insertIdx++;\r\n                transX += tmpKf.totalWidth;\r\n                kfBeforeSuggestBox = tmpKf;\r\n                preKfInfo = tmpKfInfo;\r\n                preKf = tmpKf;\r\n\r\n                //filter all paths\r\n                let tmpAllPaths: IPath[] = [];\r\n                allSuggestedPaths.forEach((p: IPath) => {\r\n                    if (Tool.identicalArrays(p.kfMarks[stepIdx], marksThisStep)) {\r\n                        tmpAllPaths.push(p);\r\n                    }\r\n                })\r\n                allSuggestedPaths = tmpAllPaths;\r\n                preStepIdx = stepIdx;\r\n            }\r\n        }\r\n\r\n        const nextUniqueKfIdx: number = Suggest.findNextUniqueKf(allSuggestedPaths, preStepIdx);\r\n        // console.log('next unique idx in path: ', nextUniqueKfIdx);\r\n        if (nextUniqueKfIdx === -1) {\r\n            this.pathToSpec(allSuggestedPaths, startKf, selectedMarks, suggestOnFirstKf);\r\n        } else {\r\n            // State.saveHistory();\r\n            //render kfs before\r\n            for (let j = preStepIdx + 1; j < nextUniqueKfIdx; j++) {\r\n                let omittedMarksRecord: string[] = [];\r\n                if (nextUniqueKfIdx - preStepIdx - 1 > 2) {\r\n                    if (j === nextUniqueKfIdx - 1) {//put omit\r\n                        const kfOmit: KfOmit = new KfOmit();\r\n                        const omitStartX: number = Tool.extractTransNums(preKf.container.getAttributeNS(null, 'transform')).x + preKf.kfWidth + transX;\r\n                        kfOmit.createOmit(KfOmit.KF_OMIT, omitStartX, nextUniqueKfIdx - preStepIdx - 3, startKf.parentObj, false, true, startKf.kfHeight / 2);\r\n                        startKf.parentObj.children.push(kfOmit);\r\n                        startKf.parentObj.kfOmits.push(kfOmit);\r\n                        insertIdx++;\r\n                        transX += kfOmit.oWidth + 2 * KfItem.PADDING;\r\n                    } else if (j > preStepIdx + 1 && j < nextUniqueKfIdx - 1) {\r\n                        omittedMarksRecord = [...omittedMarksRecord, ...allSuggestedPaths[0].kfMarks[j]];\r\n                    }\r\n                }\r\n\r\n                //render kf\r\n                const [tmpKfInfo, tmpKf] = this.createKfOnPath([...allSuggestedPaths[0].kfMarks[j], ...omittedMarksRecord], preKfInfo, startKf, transX)\r\n                lastKf = tmpKf;\r\n                insertIdx++;\r\n                transX += tmpKf.totalWidth;\r\n                kfBeforeSuggestBox = tmpKf;\r\n                preKfInfo = tmpKfInfo;\r\n                preKf = tmpKf;\r\n            }\r\n\r\n            suggestBox.createSuggestBox(kfBeforeSuggestBox, allSuggestedPaths, nextUniqueKfIdx, suggestOnFirstKf);\r\n            transX += (suggestBox.boxWidth + suggestBox.menuWidth - PlusBtn.BTN_SIZE);\r\n            let transStartKf: KfItem = typeof lastKf === 'undefined' ? startKf : lastKf;\r\n            startKf.parentObj.translateGroup(transStartKf, transX, false, false, false, { lastItem: true, extraWidth: suggestBox.boxWidth + SuggestBox.PADDING + suggestBox.menuWidth });\r\n\r\n            //update the container slider\r\n            const rootGroupBBox: DOMRect = document.getElementById(KfContainer.KF_FG).getBoundingClientRect();\r\n            Reducer.triger(action.UPDATE_KEYFRAME_CONTAINER_SLIDER, { width: rootGroupBBox.width, height: rootGroupBBox.height });\r\n        }\r\n    }\r\n\r\n    public resetProps() {\r\n        this.lastUpdateSuggestionPathActionInfo = undefined;\r\n        this.menuWidth = 0;\r\n        this.preMenuWidth = 0;\r\n    }\r\n\r\n    public createOptionKfs(allCurrentPaths: IPath[], allCurrentMarks: string[], allGroupMarks: string[], suggestOnFirstKf: boolean): void {\r\n        // console.log('all paths right now: ', allCurrentPaths);\r\n        this.options = [];\r\n        let uniqueKfRecorder: string[][] = [];//record unique kfs\r\n        allCurrentPaths.forEach((path: IPath) => {\r\n            const marksThisKf: string[] = path.kfMarks[this.uniqueKfIdx];\r\n            if (!Tool.Array2DItem(uniqueKfRecorder, marksThisKf)) {\r\n                uniqueKfRecorder.push(marksThisKf);\r\n                let optionInfo: IOptionInfo = {\r\n                    kfIdx: this.uniqueKfIdx,\r\n                    attrs: path.attrComb,\r\n                    values: path.sortedAttrValueComb[this.uniqueKfIdx + 1].split(','),\r\n                    marks: marksThisKf,\r\n                    allCurrentMarks: allCurrentMarks,\r\n                    allGroupMarks: allGroupMarks,\r\n                    kfWidth: this.kfWidth,\r\n                    kfHeight: this.kfHeight,\r\n                    suggestOnFirstKf: suggestOnFirstKf,\r\n                    ordering: path.ordering\r\n                }\r\n\r\n                let optionItem: OptionItem = new OptionItem();\r\n                optionItem.createaItem(optionInfo);\r\n                this.options.push(optionItem);\r\n            }\r\n        })\r\n    }\r\n}\r\n\r\nexport class SuggestMenu {\r\n    static MENU_WIDTH: number = 20\r\n    static MENU_RX: number = KfGroup.GROUP_RX;\r\n    static MENU_ICON_COLOR: string = '#e5e5e5';\r\n    static MENU_ICON_HIGHLIGHT_COLOR: string = '#494949';\r\n    static BTN_SIZE: number = 20;\r\n    static PADDING: number = 2;\r\n    static DOT_SIZE: number = 10;\r\n    static UP_DIRECT: string = 'up';\r\n    static DOWN_DIRECT: string = 'down';\r\n\r\n    public container: SVGGElement;\r\n    public parentSuggestBox: SuggestBox;\r\n    public numPages: number = 0;\r\n    public pageIdx: number = 0;\r\n    public dots: SVGCircleElement[] = [];\r\n    public createMenu(startCoord: ICoord, suggestBox: SuggestBox) {\r\n        this.parentSuggestBox = suggestBox;\r\n        this.numPages = Math.ceil(this.parentSuggestBox.options.length / this.parentSuggestBox.numShown);\r\n        const menuHeight: number = (SuggestMenu.BTN_SIZE + 2 * SuggestMenu.PADDING) * 2 + this.numPages * (SuggestMenu.DOT_SIZE + 2 * SuggestMenu.PADDING);\r\n        this.container = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n        this.container.setAttributeNS(null, 'transform', `translate(${startCoord.x - SuggestMenu.MENU_RX}, ${startCoord.y - menuHeight / 2})`);\r\n        const bg: SVGRectElement = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n        bg.setAttributeNS(null, 'width', `${SuggestMenu.MENU_RX + SuggestMenu.MENU_WIDTH}`);\r\n        bg.setAttributeNS(null, 'height', `${menuHeight}`);\r\n        bg.setAttributeNS(null, 'fill', '#676767');\r\n        bg.setAttributeNS(null, 'rx', `${SuggestMenu.MENU_RX}`);\r\n        this.container.appendChild(bg);\r\n\r\n        const upArrow: SVGPolygonElement = this.createArrowBtn(SuggestMenu.UP_DIRECT, menuHeight);\r\n        this.container.appendChild(upArrow);\r\n        const downArrow: SVGPolygonElement = this.createArrowBtn(SuggestMenu.DOWN_DIRECT, menuHeight);\r\n        this.container.appendChild(downArrow);\r\n\r\n        this.dots = [];\r\n        for (let i = 0; i < this.numPages; i++) {\r\n            const tmpDot: SVGCircleElement = this.createDot(i);\r\n            this.container.appendChild(tmpDot);\r\n            this.dots.push(tmpDot);\r\n        }\r\n    }\r\n\r\n    public createArrowBtn(direct: string, menuHeight: number): SVGPolygonElement {\r\n        let arrow: SVGPolygonElement = document.createElementNS('http://www.w3.org/2000/svg', 'polygon');\r\n        // arrow.setAttributeNS(null, 'fill', SuggestMenu.MENU_ICON_COLOR);\r\n        arrow.classList.add('clickable-component', 'normal-btn');\r\n        switch (direct) {\r\n            case SuggestMenu.UP_DIRECT:\r\n                arrow.setAttributeNS(null, 'points', '9.76,2.41 16.46,17.59 9.76,14.68 3.12,17.59');\r\n                arrow.setAttributeNS(null, 'transform', `translate(${SuggestMenu.MENU_RX}, ${SuggestMenu.PADDING})`);\r\n                arrow.onclick = () => {\r\n                    if (this.pageIdx > 0) {\r\n                        this.pageIdx--;\r\n                        this.arrowClickListener();\r\n                    }\r\n                }\r\n                break;\r\n            case SuggestMenu.DOWN_DIRECT:\r\n                arrow.setAttributeNS(null, 'points', '3.12,2.41 9.76,5.32 16.46,2.41 9.76,17.59');\r\n                arrow.setAttributeNS(null, 'transform', `translate(${SuggestMenu.MENU_RX}, ${menuHeight - SuggestMenu.BTN_SIZE - SuggestMenu.PADDING})`);\r\n                arrow.onclick = () => {\r\n                    if (this.pageIdx < this.numPages - 1) {\r\n                        this.pageIdx++;\r\n                        this.arrowClickListener();\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n\r\n        return arrow;\r\n    }\r\n\r\n    public arrowClickListener() {\r\n        this.parentSuggestBox.itemContainer.innerHTML = '';\r\n        for (let i = this.pageIdx * this.parentSuggestBox.numShown; i < (this.pageIdx + 1) * this.parentSuggestBox.numShown; i++) {\r\n            if (typeof this.parentSuggestBox.options[i] !== 'undefined') {\r\n                this.parentSuggestBox.options[i].updateTrans(i - this.pageIdx * this.parentSuggestBox.numShown);\r\n                this.parentSuggestBox.itemContainer.appendChild(this.parentSuggestBox.options[i].container);\r\n            }\r\n        }\r\n        this.dots.forEach((dot: SVGCircleElement, idx: number) => {\r\n            if (idx === this.pageIdx) {\r\n                dot.classList.add('highlight-btn')\r\n            } else {\r\n                dot.classList.remove('highlight-btn')\r\n            }\r\n        })\r\n    }\r\n\r\n    public createDot(idx: number): SVGCircleElement {\r\n        let dot: SVGCircleElement = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\r\n        dot.classList.add('clickable-component', 'normal-btn');\r\n        if (idx === 0) {\r\n            dot.classList.add('clickable-component', 'highlight-btn');\r\n        }\r\n        dot.setAttributeNS(null, 'fill', SuggestMenu.MENU_ICON_COLOR);\r\n        dot.setAttributeNS(null, 'r', `${SuggestMenu.BTN_SIZE / 2 - 6}`);\r\n        dot.setAttributeNS(null, 'cx', `${SuggestMenu.MENU_RX + SuggestMenu.BTN_SIZE / 2}`);\r\n        dot.setAttributeNS(null, 'cy', `${SuggestMenu.BTN_SIZE + SuggestMenu.PADDING * 3 + SuggestMenu.DOT_SIZE / 2 + (SuggestMenu.DOT_SIZE + 2 * SuggestMenu.PADDING) * idx}`);\r\n        dot.onclick = () => {\r\n            this.pageIdx = idx;\r\n            this.arrowClickListener();\r\n        }\r\n\r\n        return dot;\r\n    }\r\n}\r\n\r\nexport class OptionItem {\r\n    static PADDING: number = 6;\r\n    static TEXT_PANEL_WIDTH: number = 60;\r\n\r\n    public container: SVGGElement;\r\n    public optionKf: KfItem;\r\n    public createaItem(optionInfo: IOptionInfo) {\r\n        this.container = document.createElementNS('http://www.w3.org/2000/svg', 'g');\r\n        this.container.classList.add('clickable-component');\r\n        this.optionKf = new KfItem();\r\n        this.optionKf.createOptionKfItem(optionInfo.allCurrentMarks, optionInfo.allGroupMarks, optionInfo.marks, optionInfo.kfWidth, optionInfo.kfHeight);\r\n        const text: SVGTextElement = this.createText(optionInfo.attrs, optionInfo.values, optionInfo.ordering);\r\n        const bg: SVGRectElement = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n        bg.classList.add('ease-fade', 'hide-ele');\r\n        bg.setAttributeNS(null, 'width', `${this.optionKf.kfWidth + 3 * OptionItem.PADDING + OptionItem.TEXT_PANEL_WIDTH}`);\r\n        bg.setAttributeNS(null, 'height', `${this.optionKf.kfHeight + 2 * OptionItem.PADDING}`);\r\n        bg.setAttributeNS(null, 'rx', `${KfGroup.GROUP_RX}`);\r\n        bg.setAttributeNS(null, 'fill', '#b6b6b6');\r\n        this.container.appendChild(bg);\r\n        this.container.appendChild(this.optionKf.container);\r\n        this.container.appendChild(text);\r\n        this.container.onmouseover = () => {\r\n            if (!state.mousemoving) {\r\n                bg.classList.remove('hide-ele');\r\n            }\r\n        }\r\n        this.container.onmouseout = () => {\r\n            bg.classList.add('hide-ele');\r\n        }\r\n        this.container.onclick = () => {\r\n            Reducer.triger(action.UPDATE_LOADING_STATUS, { il: true, srcDom: this.container, content: Loading.SUGGESTING });\r\n            setTimeout(() => {\r\n                let currentSelectedMarksEachStep: Map<number, string[]> = typeof state.activatePlusBtn.selectedMarksEachStep === 'undefined' ? new Map() : new Map(state.activatePlusBtn.selectedMarksEachStep);\r\n                const currentActionInfo: IActivatePlusBtn = {\r\n                    aniId: state.activatePlusBtn.aniId,\r\n                    selection: state.activatePlusBtn.selection,\r\n                    selectedMarksEachStep: currentSelectedMarksEachStep.set(optionInfo.kfIdx, optionInfo.marks),\r\n                    renderedUniqueIdx: suggestBox.uniqueKfIdx\r\n                }\r\n                State.tmpStateBusket.push({\r\n                    historyAction: { actionType: action.ACTIVATE_PLUS_BTN, actionVal: state.activatePlusBtn },\r\n                    currentAction: { actionType: action.ACTIVATE_PLUS_BTN, actionVal: currentActionInfo }\r\n                })\r\n                State.saveHistory();\r\n                Reducer.triger(action.ACTIVATE_PLUS_BTN, currentActionInfo);\r\n\r\n                // //filter paths\r\n                // let tmpAllPaths: IPath[] = [];\r\n                // state.allPaths.forEach((p: IPath) => {\r\n                //     if (Tool.identicalArrays(p.kfMarks[optionInfo.kfIdx], optionInfo.marks)) {\r\n                //         tmpAllPaths.push(p);\r\n                //     }\r\n                // })\r\n\r\n                // //remove suggest box and create a new kf\r\n                // const startKfInfo: IKeyframe = KfItem.allKfInfo.get(suggestBox.kfBeforeSuggestBox.id);\r\n                // const tmpKfInfo: IKeyframe = KfItem.createKfInfo(optionInfo.marks,\r\n                //     {\r\n                //         duration: startKfInfo.duration,\r\n                //         allCurrentMarks: [...startKfInfo.allCurrentMarks, ...startKfInfo.marksThisKf],\r\n                //         allGroupMarks: startKfInfo.allGroupMarks\r\n                //     });\r\n                // KfItem.allKfInfo.set(tmpKfInfo.id, tmpKfInfo);\r\n                // let tmpKf: KfItem = new KfItem();\r\n                // const startX: number = Tool.extractTransNums(suggestBox.kfBeforeSuggestBox.container.getAttributeNS(null, 'transform')).x + suggestBox.kfBeforeSuggestBox.totalWidth - KfItem.PADDING;\r\n                // tmpKf.createItem(tmpKfInfo, suggestBox.kfBeforeSuggestBox.parentObj.treeLevel + 1, suggestBox.kfBeforeSuggestBox.parentObj, startX);\r\n                // let insertIdx: number = 0;\r\n                // for (let i = 0, len = suggestBox.kfBeforeSuggestBox.parentObj.children.length; i < len; i++) {\r\n                //     if (suggestBox.kfBeforeSuggestBox.parentObj.children[i] instanceof KfItem && suggestBox.kfBeforeSuggestBox.parentObj.children[i].id === suggestBox.kfBeforeSuggestBox.id) {\r\n                //         insertIdx = i + 1;\r\n                //         break;\r\n                //     }\r\n                // }\r\n                // // let nextKf: KfItem = suggestBox.kfBeforeSuggestBox.parentObj.children[insertIdx];\r\n                // suggestBox.kfBeforeSuggestBox.parentObj.children.splice(insertIdx, 0, tmpKf);\r\n                // // let transX: number = tmpKf.totalWidth - (suggestBox.boxWidth + 3 * SuggestBox.PADDING + suggestBox.menuWidth + 2);\r\n                // // let transX: number = tmpKf.totalWidth;\r\n                // // console.log('in suggest box translate: ', transX);\r\n                // // if (typeof nextKf === 'undefined') {\r\n                // // suggestBox.kfBeforeSuggestBox.parentObj.translateGroup(tmpKf, transX, false, false, false, { lastItem: true, extraWidth: suggestBox.boxWidth + SuggestBox.PADDING + suggestBox.menuWidth });\r\n                // // } else {\r\n                // // suggestBox.kfBeforeSuggestBox.parentObj.translateGroup(nextKf, transX, false, false, false);\r\n                // // }\r\n                // suggestBox.removeSuggestBox();\r\n\r\n                // //triger actions to render again\r\n                // const actionInfo: any = { ap: tmpAllPaths, kfIdxInPath: suggestBox.uniqueKfIdx, startKf: tmpKf, kfGroup: suggestBox.kfBeforeSuggestBox.parentObj, suggestOnFirstKf: optionInfo.suggestOnFirstKf, selectedMarks: optionInfo.marks };\r\n                // State.tmpStateBusket.push({\r\n                //     historyAction: { actionType: action.UPDATE_SUGGESTION_PATH, actionVal: suggestBox.lastUpdateSuggestionPathActionInfo },\r\n                //     currentAction: { actionType: action.UPDATE_SUGGESTION_PATH, actionVal: actionInfo }\r\n                // })\r\n                // State.saveHistory();\r\n                // Reducer.triger(action.UPDATE_SUGGESTION_PATH, actionInfo);\r\n                // suggestBox.lastUpdateSuggestionPathActionInfo = actionInfo;\r\n            }, 1);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param index : index of this item in the shown items\r\n     */\r\n    public updateTrans(index: number) {\r\n        this.container.setAttributeNS(null, 'transform', `translate(0, ${index * (this.optionKf.kfHeight + 2 * OptionItem.PADDING)})`);\r\n    }\r\n\r\n    public createText(attrs: string[], values: string[], ordering?: { attr: string, order: string }): SVGTextElement {\r\n        const text: SVGTextElement = document.createElementNS('http://www.w3.org/2000/svg', 'text');\r\n        text.setAttributeNS(null, 'transform', `translate(${this.optionKf.kfWidth + 2 * OptionItem.PADDING}, ${3 * OptionItem.PADDING})`)\r\n        text.classList.add('monospace-font', 'small-font');\r\n        if (typeof ordering === 'undefined') {\r\n            attrs.forEach((aName: string, idx: number) => {\r\n                const aNameTspan: SVGTSpanElement = document.createElementNS('http://www.w3.org/2000/svg', 'tspan');\r\n                aNameTspan.innerHTML = `${aName}:`;\r\n                aNameTspan.setAttributeNS(null, 'font-weight', 'bold');\r\n                aNameTspan.setAttributeNS(null, 'x', '0');\r\n                aNameTspan.setAttributeNS(null, 'y', `${idx * 38}`);\r\n                text.appendChild(aNameTspan);\r\n                const aValueTspan: SVGTSpanElement = document.createElementNS('http://www.w3.org/2000/svg', 'tspan');\r\n                aValueTspan.innerHTML = values[idx];\r\n                aValueTspan.setAttributeNS(null, 'x', '0');\r\n                aValueTspan.setAttributeNS(null, 'y', `${idx * 38 + 16}`);\r\n                text.appendChild(aValueTspan);\r\n            })\r\n        } else {\r\n            const aNameTspan: SVGTSpanElement = document.createElementNS('http://www.w3.org/2000/svg', 'tspan');\r\n            aNameTspan.innerHTML = `${ordering.attr}:`;\r\n            aNameTspan.setAttributeNS(null, 'font-weight', 'bold');\r\n            aNameTspan.setAttributeNS(null, 'x', '0');\r\n            aNameTspan.setAttributeNS(null, 'y', '0');\r\n            text.appendChild(aNameTspan);\r\n            const aValueTspan: SVGTSpanElement = document.createElementNS('http://www.w3.org/2000/svg', 'tspan');\r\n            aValueTspan.innerHTML = `${ordering.order}`;\r\n            aValueTspan.setAttributeNS(null, 'x', '0');\r\n            aValueTspan.setAttributeNS(null, 'y', '16');\r\n            text.appendChild(aValueTspan);\r\n        }\r\n        return text;\r\n    }\r\n}\r\n\r\nexport let suggestBox: SuggestBox = new SuggestBox();","import classifyPoint from 'robust-point-in-polygon'\r\nimport { ICoord } from './ds'\r\nimport Tool from './tool'\r\n\r\ntype Point = [number, number];\r\n\r\nexport default class Lasso {\r\n    static CLOSE_DIS: number = 75;\r\n    static ORIGIN_RADIUS: number = 5;\r\n    static LASSO_ORIGIN_ID = 'lassoOrigin';\r\n    static LASSO_PATH_ID = 'lassoPath';\r\n    static LASSO_CLOSEPATH_ID = 'lassoClosePath';\r\n\r\n    svg: HTMLElement;\r\n    origin: ICoord;\r\n    polygon: Point[];\r\n    constructor() {\r\n        this.polygon = [];\r\n    }\r\n\r\n    public createSelectionFrame(svg: HTMLElement, origin: ICoord) {\r\n        this.svg = svg;\r\n        this.origin = origin;\r\n        this.svg.appendChild(this.createPath(origin));\r\n        this.svg.appendChild(this.createOrigin(origin));\r\n    }\r\n\r\n    public createOrigin(origin: ICoord): SVGCircleElement {\r\n        const originCircle: SVGCircleElement = document.createElementNS('http://www.w3.org/2000/svg', 'circle');\r\n        originCircle.setAttributeNS(null, 'id', Lasso.LASSO_ORIGIN_ID);\r\n        originCircle.setAttributeNS(null, 'cx', origin.x.toString());\r\n        originCircle.setAttributeNS(null, 'cy', origin.y.toString());\r\n        originCircle.setAttributeNS(null, 'r', Lasso.ORIGIN_RADIUS.toString());\r\n        originCircle.setAttributeNS(null, 'opacity', '.5');\r\n        originCircle.setAttributeNS(null, 'fill', '#3399FF');\r\n        return originCircle;\r\n    }\r\n\r\n    public createPath(origin: ICoord): SVGPathElement {\r\n        const lassoPath: SVGPathElement = document.createElementNS('http://www.w3.org/2000/svg', 'path');\r\n        lassoPath.setAttributeNS(null, 'id', Lasso.LASSO_PATH_ID);\r\n        lassoPath.setAttributeNS(null, 'stroke', '#505050');\r\n        lassoPath.setAttributeNS(null, 'fill-opacity', '.05');\r\n        lassoPath.setAttributeNS(null, 'd', 'M' + origin.x + ',' + origin.y);\r\n        this.polygon.push([origin.x, origin.y]);\r\n        return lassoPath;\r\n    }\r\n\r\n    public updatePath(coord: ICoord): void {\r\n        const oriPath: HTMLElement = document.getElementById(Lasso.LASSO_PATH_ID);\r\n        (<SVGPathElement><unknown>oriPath).setAttributeNS(null, 'd', oriPath.getAttribute('d') + 'L' + coord.x + ',' + coord.y);\r\n        this.polygon.push([coord.x, coord.y]);\r\n        if (Tool.pointDist(coord.x, this.origin.x, coord.y, this.origin.y) <= Lasso.CLOSE_DIS) {\r\n            if (document.getElementById(Lasso.LASSO_CLOSEPATH_ID)) {\r\n                this.updateClosePath(coord);\r\n            } else {\r\n                this.createClosePath(coord);\r\n            }\r\n        } else {\r\n            this.removeClosePath();\r\n        }\r\n    }\r\n\r\n    public createClosePath(coord: ICoord): void {\r\n        const closePath: SVGLineElement = document.createElementNS('http://www.w3.org/2000/svg', 'line');\r\n        closePath.setAttributeNS(null, 'id', Lasso.LASSO_CLOSEPATH_ID);\r\n        closePath.setAttributeNS(null, 'stroke', '#505050');\r\n        closePath.setAttributeNS(null, 'stroke-dasharray', '4,4');\r\n        closePath.setAttributeNS(null, 'x1', this.origin.x.toString());\r\n        closePath.setAttributeNS(null, 'y1', this.origin.y.toString());\r\n        closePath.setAttributeNS(null, 'x2', coord.x.toString());\r\n        closePath.setAttributeNS(null, 'y2', coord.y.toString());\r\n        this.svg.appendChild(closePath);\r\n    }\r\n\r\n    public updateClosePath(coord: ICoord): void {\r\n        const closePath: SVGLineElement = <SVGLineElement><unknown>document.getElementById(Lasso.LASSO_CLOSEPATH_ID);\r\n        closePath.setAttributeNS(null, 'x2', coord.x.toString());\r\n        closePath.setAttributeNS(null, 'y2', coord.y.toString());\r\n    }\r\n\r\n    public removeClosePath(): void {\r\n        if (document.getElementById(Lasso.LASSO_CLOSEPATH_ID)) {\r\n            document.getElementById(Lasso.LASSO_CLOSEPATH_ID).remove();\r\n        }\r\n    }\r\n\r\n    public removeSelectionFrame(): void {\r\n        if (document.getElementById(Lasso.LASSO_ORIGIN_ID)) {\r\n            document.getElementById(Lasso.LASSO_ORIGIN_ID).remove();\r\n        }\r\n        if (document.getElementById(Lasso.LASSO_PATH_ID)) {\r\n            document.getElementById(Lasso.LASSO_PATH_ID).remove();\r\n        }\r\n        this.removeClosePath();\r\n    }\r\n\r\n    public lassoSelect(framedMarks: string[]): string[] {\r\n        let result: string[] = [];\r\n        //filter marks\r\n        Array.from(document.getElementsByClassName('mark')).forEach((m: HTMLElement) => {\r\n            const markBBox = m.getBoundingClientRect();\r\n            \r\n            const coord1: ICoord = Tool.screenToSvgCoords(this.svg, markBBox.left, markBBox.top);\r\n            const coord2: ICoord = Tool.screenToSvgCoords(this.svg, markBBox.left + markBBox.width, markBBox.top + markBBox.height);\r\n            const pnt1 = <Point>[coord1.x, coord1.y],\r\n                pnt2 = <Point>[coord1.x, coord2.y],\r\n                pnt3 = <Point>[coord2.x, coord1.y],\r\n                pnt4 = <Point>[coord2.x, coord2.y],\r\n                pnt5 = <Point>[coord1.x + (coord2.x - coord1.x) / 2, coord1.y + (coord2.y - coord1.y) / 2];\r\n\r\n            let framed: boolean = false;\r\n            if (classifyPoint(this.polygon, pnt5) <= 0) {\r\n                let framedPnt: number = 0;\r\n                [pnt1, pnt2, pnt3, pnt4].forEach((pnt) => {\r\n                    if (classifyPoint(this.polygon, pnt) <= 0) {\r\n                        framedPnt++;\r\n                    }\r\n                })\r\n                framed = framedPnt >= 2;\r\n            }\r\n\r\n            //update the appearance of marks\r\n            if ((framedMarks.includes(m.id) && framed) || (!framedMarks.includes(m.id) && !framed)) {\r\n                m.classList.add('non-framed-mark');\r\n            } else if ((framedMarks.includes(m.id) && !framed) || (!framedMarks.includes(m.id) && framed)) {\r\n                m.classList.remove('non-framed-mark');\r\n                result.push(m.id);\r\n            }\r\n        })\r\n        return result;\r\n    }\r\n}","import { IBoundary, ICoord } from './ds'\r\n\r\nexport default class Rectangular {\r\n    svg: any;\r\n    /**\r\n     * create the dashed selection frame when mouse down\r\n     * @param svg \r\n     */\r\n    public createSelectionFrame(svg: HTMLElement) {\r\n        this.svg = svg;\r\n        const selectionFrame: SVGRectElement = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n        selectionFrame.setAttributeNS(null, 'id', 'rectSelectFrame');\r\n        selectionFrame.setAttributeNS(null, 'fill', 'rgba(255, 255, 255, 0)');\r\n        selectionFrame.setAttributeNS(null, 'stroke', '#505050');\r\n        selectionFrame.setAttributeNS(null, 'stroke-dasharray', '2,2');\r\n        svg.appendChild(selectionFrame);\r\n    }\r\n    /**\r\n     * update the dashed selection frame when mouse move\r\n     */\r\n    public updateSelectionFrame(boundary: IBoundary) {\r\n        \r\n        const selectionFrame: SVGRectElement = <SVGRectElement><unknown>document.getElementById('rectSelectFrame');\r\n        selectionFrame.setAttributeNS(null, 'x', boundary.x1.toString());\r\n        selectionFrame.setAttributeNS(null, 'y', boundary.y1.toString());\r\n        selectionFrame.setAttributeNS(null, 'width', Math.abs(boundary.x2 - boundary.x1).toString());\r\n        selectionFrame.setAttributeNS(null, 'height', Math.abs(boundary.y2 - boundary.y1).toString());\r\n    }\r\n\r\n    /**\r\n     * remove the dashed selection frame when mouse up\r\n     */\r\n    public removeSelectionFrame() {\r\n        if (document.getElementById('rectSelectFrame')) {\r\n            document.getElementById('rectSelectFrame').remove();\r\n        }\r\n    }\r\n\r\n    /**\r\n     * \r\n     * @param boundary \r\n     * @param framedMarks \r\n     * @param svgId \r\n     */\r\n    public rectangularSelect(boundary: IBoundary, framedMarks: string[]): string[] {\r\n        let result: string[] = [];\r\n        //filter marks\r\n        Array.from(document.getElementsByClassName('mark')).forEach((m: HTMLElement) => {\r\n            const markBBox = m.getBoundingClientRect();\r\n            let coord1 = this.svg.createSVGPoint();\r\n            coord1.x = markBBox.left;\r\n            coord1.y = markBBox.top;\r\n            const svgCoord1: ICoord = coord1.matrixTransform(this.svg.getScreenCTM().inverse());\r\n            let coord2 = this.svg.createSVGPoint();\r\n            coord2.x = markBBox.left + markBBox.width;\r\n            coord2.y = markBBox.top + markBBox.height;\r\n            const svgCoord2: ICoord = coord2.matrixTransform(this.svg.getScreenCTM().inverse());\r\n\r\n            const framed: boolean = this.pointInRect(boundary, { x1: svgCoord1.x, y1: svgCoord1.y, x2: svgCoord2.x, y2: svgCoord2.y });\r\n            //update the appearance of marks\r\n            if ((framedMarks.includes(m.id) && framed) || (!framedMarks.includes(m.id) && !framed)) {\r\n                m.classList.add('non-framed-mark');\r\n            } else if ((framedMarks.includes(m.id) && !framed) || (!framedMarks.includes(m.id) && framed)) {\r\n                m.classList.remove('non-framed-mark');\r\n                result.push(m.id);\r\n            }\r\n        })\r\n\r\n        return result;\r\n    }\r\n    public pointInRect(boundary: IBoundary, markBoundary: IBoundary): boolean {\r\n        const [minX, maxX] = boundary.x1 < boundary.x2 ? [boundary.x1, boundary.x2] : [boundary.x2, boundary.x1];\r\n        const [minY, maxY] = boundary.y1 < boundary.y2 ? [boundary.y1, boundary.y2] : [boundary.y2, boundary.y1];\r\n        let framed = false;\r\n        if (markBoundary.x1 >= minX && markBoundary.x2 <= maxX && markBoundary.y1 >= minY && markBoundary.y2 <= maxY) {\r\n            framed = true;\r\n        }\r\n        return framed;\r\n    }\r\n\r\n}","import { ICoord } from './ds'\r\nimport { state, State } from '../app_backup/state'\r\nimport { player } from '../components/player'\r\nimport Rectangular from './rectangular'\r\nimport Lasso from './lasso'\r\nimport Reducer from '../app_backup/reducer'\r\nimport { dragableCanvas } from '../components/widgets/dragableCanvas'\r\nimport * as action from '../app_backup/action'\r\nimport PlusBtn from '../components/widgets/plusBtn'\r\nimport KfItem from '../components/widgets/kfItem'\r\nimport { GroupMenu } from '../components/widgets/kfGroup'\r\nimport Util from '../app_backup/core/util'\r\nimport ViewWindow from '../components/viewWindow'\r\n\r\nexport default class Tool {\r\n    static ENLARGE_THRESHOLD: number = 200;\r\n\r\n    public static extractTransNums(translateStr: string): ICoord {\r\n        const transNums = translateStr.match(/[+-]?\\d+(?:\\.\\d+)?/g).map(x => parseFloat(x));\r\n        return { x: transNums[0], y: transNums[1] };\r\n    }\r\n    public static firstLetterUppercase(str: string): string {\r\n        return str.charAt(0).toUpperCase() + str.slice(1);\r\n    }\r\n    public static pointDist(x1: number, x2: number, y1: number, y2: number): number {\r\n        return Math.sqrt((x1 - x2) * (x1 - x2) + (y1 - y2) * (y1 - y2));\r\n    }\r\n    /**\r\n     * whether a contains b\r\n     * @param a \r\n     * @param b \r\n     */\r\n    public static arrayContained(a: any[], b: any[]): boolean {\r\n        if (a.length < b.length) return false;\r\n        for (var i = 0, len = b.length; i < len; i++) {\r\n            if (a.indexOf(b[i]) == -1) return false;\r\n        }\r\n        return true;\r\n    }\r\n    /**\r\n     * check whether b is an item in a\r\n     * @param a \r\n     * @param b \r\n     */\r\n    public static Array2DItem(a: any[][], b: any[]): boolean {\r\n        for (let i = 0, len = a.length; i < len; i++) {\r\n            if (Tool.identicalArrays(a[i], b)) {\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    public static diffLessThan(a: number, b: number, threshold: number): boolean {\r\n        return Math.abs(a - b) < threshold;\r\n    }\r\n\r\n    public static formatTime(time: number): string {\r\n        const minute: number = Math.floor(time / 60000);\r\n        const second: number = Math.floor((time - minute * 60000) / 1000);\r\n        const ms: number = Math.floor((time - minute * 60000 - second * 1000) / 1);\r\n        const minStr: string = minute < 10 ? '0' + minute : '' + minute;\r\n        const secStr: string = second < 10 ? '0' + second : '' + second;\r\n        const msStr = ms < 100 ? (ms < 10 ? '00' + ms : '0' + ms) : '' + ms;\r\n        return minStr + ':' + secStr + '.' + msStr;\r\n    }\r\n    public static svg2url(svgElement: HTMLElement): string {\r\n        const svgString = svgElement.outerHTML;\r\n        const svg = new Blob([svgString], { type: \"image/svg+xml;charset=utf-8\" });\r\n        const url = URL.createObjectURL(svg);\r\n        return url;\r\n    }\r\n\r\n    // public static svg2url(svgElement: HTMLElement, canvas: HTMLCanvasElement): string {\r\n    //     // const svgString = new XMLSerializer().serializeToString(svgElement);\r\n    //     const svgString = svgElement.outerHTML;\r\n    //     const ctx = canvas.getContext(\"2d\");\r\n    //     const img = new Image();\r\n    //     const svg = new Blob([svgString], { type: \"image/svg+xml;charset=utf-8\" });\r\n    //     const url = URL.createObjectURL(svg);\r\n    //     img.onload = function () {\r\n    //         let dx = 0, dy = 0, scaleWidth = canvas.width, scaleHeight = canvas.width * (img.height / img.width);\r\n    //         if (scaleHeight <= canvas.height) {\r\n    //             dy = (canvas.height - scaleHeight) / 2;\r\n    //         } else {\r\n    //             scaleHeight = canvas.height;\r\n    //             scaleWidth = canvas.height * (img.width / img.height);\r\n    //             dx = (canvas.width - scaleWidth) / 2;\r\n    //         }\r\n    //         ctx.drawImage(img, dx, dy, scaleWidth, scaleHeight);\r\n    //         URL.revokeObjectURL(url);\r\n    //     };\r\n    //     img.src = url;\r\n    //     return url;\r\n    // }\r\n\r\n    public static identicalArrays(arr1: any[], arr2: any[]): boolean {\r\n        let same: boolean = true;\r\n        if (arr1.length !== arr2.length) {\r\n            same = false;\r\n        }\r\n        for (let i = 0; i < arr1.length; i++) {\r\n            if (arr2.indexOf(arr1[i]) < 0) {\r\n                same = false;\r\n                break;\r\n            }\r\n        }\r\n        return same;\r\n    }\r\n    public static resizeWidgets(svgContainerId: string = ''): void {\r\n        // this.resizeSvgContainer(svgContainerId);\r\n        this.resizePlayerContainer();\r\n    }\r\n\r\n    public static resizePlayerContainer(): void {\r\n        //resize player\r\n        player.resizePlayer(player.widget.clientWidth - 160);\r\n    }\r\n\r\n    public static screenToSvgCoords(svg: any, x: number, y: number): ICoord {\r\n        let rectPosiPoint1 = svg.createSVGPoint();\r\n        rectPosiPoint1.x = x;\r\n        rectPosiPoint1.y = y;\r\n        return rectPosiPoint1.matrixTransform(svg.getScreenCTM().inverse());\r\n    }\r\n\r\n    //TODO: coord problem\r\n    public static initLassoSelection(containerId: string): void {\r\n        document.getElementById(containerId).onmousedown = (downEvt) => {\r\n            Reducer.triger(action.UPDATE_MOUSE_MOVING, true);\r\n            const lassoSelection = new Lasso();\r\n            // const evtTarget: HTMLElement = <HTMLElement>downEvt.target;\r\n            // if (evtTarget.classList.contains('highlight-selection-frame') ||\r\n            //     (evtTarget.classList.contains('mark') && state.selection.includes(evtTarget.id) && state.selection.length > 0)) {//clicked within the selection frame\r\n            //     dragableCanvas.createCanvas(document.querySelector('#' + containerId + ' > svg:first-of-type'), { x: downEvt.pageX, y: downEvt.pageY });\r\n            // } else {//doing selection\r\n                const svg: HTMLElement = document.getElementById('visChart');\r\n                if (svg) {\r\n                    const svgBBox = svg.getBoundingClientRect();\r\n                    const startPoint: ICoord = this.screenToSvgCoords(svg, downEvt.pageX, downEvt.pageY);\r\n                    const originX = downEvt.pageX - svgBBox.x, originY = downEvt.pageY - svgBBox.y;\r\n                    let isDragging: boolean = true;\r\n                    //create selection frame\r\n                    lassoSelection.createSelectionFrame(svg, { x: startPoint.x, y: startPoint.y });\r\n                    // lassoSelection.createSelectionFrame(svg, { x: originX, y: originY });\r\n                    document.onmousemove = (moveEvt) => {\r\n                        if (isDragging) {\r\n                            const pathCoord: ICoord = this.screenToSvgCoords(svg, moveEvt.pageX, moveEvt.pageY);\r\n                            const boundaryCheck: ICoord = { x: moveEvt.pageX - svgBBox.x, y: moveEvt.pageY - svgBBox.y };\r\n                            const possibleMarks: string[] = lassoSelection.lassoSelect(state.selection);\r\n                            //can't move outside the view\r\n                            if (boundaryCheck.x >= 0 && boundaryCheck.x <= document.getElementById('chartContainer').offsetWidth && boundaryCheck.y >= 0 && boundaryCheck.y <= document.getElementById('chartContainer').offsetHeight) {\r\n                                lassoSelection.updatePath(pathCoord);\r\n                            }\r\n                        }\r\n                    }\r\n                    document.onmouseup = (upEvt) => {\r\n                        Reducer.triger(action.UPDATE_MOUSE_MOVING, false);\r\n                        isDragging = false;\r\n                        const selectedMarks: string[] = lassoSelection.lassoSelect(state.selection);\r\n                        //save histroy before update state\r\n                        if (this.identicalArrays(selectedMarks, state.selection)) {\r\n                            State.tmpStateBusket.push({\r\n                                historyAction: { actionType: action.UPDATE_SELECTION, actionVal: state.selection },\r\n                                currentAction: { actionType: action.UPDATE_SELECTION, actionVal: [] }\r\n                            })\r\n                            State.saveHistory();\r\n                            Reducer.triger(action.UPDATE_SELECTION, []);\r\n                        } else {\r\n                            State.tmpStateBusket.push({\r\n                                historyAction: { actionType: action.UPDATE_SELECTION, actionVal: state.selection },\r\n                                currentAction: { actionType: action.UPDATE_SELECTION, actionVal: selectedMarks }\r\n                            })\r\n                            State.saveHistory();\r\n                            Reducer.triger(action.UPDATE_SELECTION, state.suggestion ? Util.suggestSelection(selectedMarks) : selectedMarks);\r\n                        }\r\n\r\n                        lassoSelection.removeSelectionFrame();\r\n                        document.onmousemove = null;\r\n                        document.onmouseup = null;\r\n                    }\r\n                }\r\n            // }\r\n        }\r\n    }\r\n    public static initRectangularSelection(containerId: string): void {\r\n        const rectangularSelection = new Rectangular();\r\n        document.getElementById(containerId).onmousedown = (downEvt) => {\r\n            Reducer.triger(action.UPDATE_MOUSE_MOVING, true);\r\n            downEvt.preventDefault();\r\n            //get the scale of the chart since the size of the svg container is different from that of the chart\r\n            // let scaleW: number = 1, scaleH: number = 1;\r\n            const svg: any = document.getElementById('visChart');\r\n            // if (svg) {\r\n            //     scaleW = parseFloat(svg.getAttribute('width')) / document.getElementById('chartContainer').offsetWidth;\r\n            //     scaleH = parseFloat(svg.getAttribute('height')) / document.getElementById('chartContainer').offsetHeight;\r\n            // }\r\n\r\n            // const evtTarget: HTMLElement = <HTMLElement>downEvt.target;\r\n            // if (evtTarget.classList.contains('highlight-selection-frame') ||\r\n            //     (evtTarget.classList.contains('mark') && state.selection.includes(evtTarget.id) && state.selection.length > 0)) {//clicked within the selection frame\r\n            //     dragableCanvas.createCanvas(document.querySelector('#' + containerId + ' > svg:first-of-type'), { x: downEvt.pageX, y: downEvt.pageY });\r\n            // } else {//doing selection\r\n                if (svg) {\r\n                    const svgBBox = svg.getBoundingClientRect();\r\n                    const rectPosi1: ICoord = this.screenToSvgCoords(svg, downEvt.pageX, downEvt.pageY);\r\n                    let lastMouseX = downEvt.pageX, lastMouseY = downEvt.pageY;\r\n                    let isDragging: boolean = true;\r\n                    //create the selection frame\r\n                    rectangularSelection.createSelectionFrame(svg);\r\n                    document.onmousemove = (moveEvt) => {\r\n                        if (isDragging) {\r\n                            const rectPosi2: ICoord = this.screenToSvgCoords(svg, moveEvt.pageX, moveEvt.pageY);\r\n                            // // const possibleMarks: string[] = rectangularSelection.rectangularSelect({\r\n                            //     x1: rectPosi1.x,\r\n                            //     y1: rectPosi1.y,\r\n                            //     x2: rectPosi2.x,\r\n                            //     y2: rectPosi2.y\r\n                            // }, state.selection);\r\n\r\n                            //can't move outside the view\r\n                            if ((moveEvt.pageX - svgBBox.x) >= 0 &&\r\n                                (moveEvt.pageX - svgBBox.x) <= document.getElementById('chartContainer').offsetWidth &&\r\n                                (moveEvt.pageY - svgBBox.y) >= 0 &&\r\n                                (moveEvt.pageY - svgBBox.y) <= document.getElementById('chartContainer').offsetHeight) {\r\n                                const tmpX = (rectPosi2.x < rectPosi1.x ? rectPosi2.x : rectPosi1.x);\r\n                                const tmpY = (rectPosi2.y < rectPosi1.y ? rectPosi2.y : rectPosi1.y);\r\n                                const tmpWidth = Math.abs(rectPosi1.x - rectPosi2.x);\r\n                                const tmpHeight = Math.abs(rectPosi1.y - rectPosi2.y);\r\n\r\n                                /* update the selection frame */\r\n                                rectangularSelection.updateSelectionFrame({ x1: tmpX, y1: tmpY, x2: tmpX + tmpWidth, y2: tmpY + tmpHeight });\r\n                            }\r\n                        }\r\n                    }\r\n                    document.onmouseup = (upEvt) => {\r\n                        Reducer.triger(action.UPDATE_MOUSE_MOVING, false);\r\n                        isDragging = false;\r\n                        const mouseMoveThsh: number = 3;//mouse move less than 3px -> single selection; bigger than 3px -> rect selection\r\n                        //save histroy before update state\r\n                        if (Tool.pointDist(lastMouseX, upEvt.pageX, lastMouseY, upEvt.pageY) > mouseMoveThsh) {//doing rect selection\r\n                            const rectPosi2: ICoord = this.screenToSvgCoords(svg, upEvt.pageX, upEvt.pageY);\r\n                            const selectedMarks: string[] = rectangularSelection.rectangularSelect({\r\n                                x1: rectPosi1.x,\r\n                                y1: rectPosi1.y,\r\n                                x2: rectPosi2.x,\r\n                                y2: rectPosi2.y\r\n                            }, state.selection);\r\n                            State.tmpStateBusket.push({\r\n                                historyAction: { actionType: action.UPDATE_SELECTION, actionVal: state.selection },\r\n                                currentAction: { actionType: action.UPDATE_SELECTION, actionVal: selectedMarks }\r\n                            })\r\n                            State.saveHistory();\r\n                            Reducer.triger(action.UPDATE_SELECTION, state.suggestion ? Util.suggestSelection(selectedMarks) : selectedMarks);\r\n                        } else {//single selection\r\n                            const clickedItem: HTMLElement = <HTMLElement>upEvt.target;\r\n                            if (clickedItem.classList.contains('mark')) {//clicked on a mark\r\n                                const clickedMarkId: string = clickedItem.id;\r\n                                const selectedMarks: string[] = state.selection.includes(clickedMarkId) ? [...state.selection].splice(state.selection.indexOf(clickedMarkId), 1) : [...state.selection, clickedMarkId];\r\n                                State.tmpStateBusket.push({\r\n                                    historyAction: { actionType: action.UPDATE_SELECTION, actionVal: state.selection },\r\n                                    currentAction: { actionType: action.UPDATE_SELECTION, actionVal: selectedMarks }\r\n                                })\r\n                                State.saveHistory();\r\n                                Reducer.triger(action.UPDATE_SELECTION, state.suggestion ? Util.suggestSelection(selectedMarks) : selectedMarks);\r\n                            } else {//didnt select any mark\r\n                                State.tmpStateBusket.push({\r\n                                    historyAction: { actionType: action.UPDATE_SELECTION, actionVal: state.selection },\r\n                                    currentAction: { actionType: action.UPDATE_SELECTION, actionVal: [] }\r\n                                })\r\n                                State.saveHistory();\r\n                                Reducer.triger(action.UPDATE_SELECTION, []);\r\n                            }\r\n                        }\r\n                        rectangularSelection.removeSelectionFrame();\r\n                        document.onmousemove = null;\r\n                        document.onmouseup = null;\r\n                    }\r\n                }\r\n            // }\r\n        }\r\n    }\r\n\r\n    public static updateTranslate(node: any, targetTrans: ICoord) {\r\n        if (node.getAttributeNS(null, 'transform') && typeof node.getAttributeNS(null, 'transform') !== 'undefined') {\r\n            const trans: ICoord = this.extractTransNums(node.getAttributeNS(null, 'transform'));\r\n            node.setAttributeNS(null, 'transform', `translate(${trans.x + targetTrans.x}, ${trans.y + targetTrans.y})`);\r\n        } else {\r\n            node.setAttributeNS(null, 'transform', `translate(${targetTrans.x}, ${targetTrans.y})`);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * judge which plus button or kf is dragged over\r\n     * @param mousemovePosi \r\n     */\r\n    public static judgeDragOver(mousePosi: ICoord): PlusBtn | KfItem {\r\n        let dragOverItem: PlusBtn | KfItem;\r\n        PlusBtn.allPlusBtn.forEach((pb: PlusBtn) => {\r\n            if (pb.isHighlighted && pb.onShow) {\r\n                const pbBBox: DOMRect = pb.container.getBoundingClientRect();\r\n                if (mousePosi.x >= pbBBox.left && mousePosi.x <= pbBBox.right && mousePosi.y >= pbBBox.top && mousePosi.y <= pbBBox.bottom) {\r\n                    dragOverItem = pb;\r\n                }\r\n            }\r\n        })\r\n        // KfItem.allKfItems.forEach((kf: KfItem) => {\r\n        //     if (kf.isHighlighted) {\r\n        //         const kfBBox: DOMRect = kf.container.getBoundingClientRect();\r\n        //         if (mousePosi.x >= kfBBox.left && mousePosi.x <= kfBBox.right && mousePosi.y >= kfBBox.top && mousePosi.y <= kfBBox.bottom) {\r\n        //             dragOverItem = kf;\r\n        //         }\r\n        //     }\r\n        // })\r\n\r\n        return dragOverItem;\r\n    }\r\n\r\n    public static clearDragOver() {\r\n        PlusBtn.dragoverBtn = undefined;\r\n        KfItem.dragoverKf = undefined;\r\n    }\r\n\r\n    /**\r\n     * translate the elements in kf or kfgroup\r\n     * @param rootNode : root dom node\r\n     * @param transX \r\n     * @param transOffset : whether this is called when dragging offset\r\n     */\r\n    public static transNodeElements(rootNode: any, transX: number, transOffset: boolean = false) {\r\n        const allNodeElements: any[] = transOffset ? Array.from(rootNode.childNodes).slice(1) : Array.from(rootNode.childNodes);\r\n        allNodeElements.forEach((c: any) => {\r\n            let isEasingNode: boolean = false;\r\n            if (c.classList.contains('ease-transform')) {\r\n                isEasingNode = true;\r\n                c.classList.remove('ease-transform');\r\n            }\r\n            if (c.getAttributeNS(null, 'transform')) {\r\n                const oriTrans: ICoord = Tool.extractTransNums(c.getAttributeNS(null, 'transform'));\r\n                c.setAttributeNS(null, 'transform', `translate(${oriTrans.x + transX}, ${oriTrans.y})`);\r\n            } else {\r\n                c.setAttributeNS(null, 'transform', `translate(${transX}, 0)`);\r\n            }\r\n            if (isEasingNode) {\r\n                c.classList.add('ease-transform');\r\n            }\r\n        })\r\n    }\r\n\r\n    public static translateEasing(easing: string): string {\r\n        switch (easing) {\r\n            case GroupMenu.EASING_LINEAR:\r\n                return 'ease linear';\r\n            case GroupMenu.EASING_IN_CUBIC:\r\n                return 'ease in cubic';\r\n            case GroupMenu.EASING_OUT_CUBIC:\r\n                return 'ease out cubic';\r\n            case GroupMenu.EASING_INOUT_CUBIC:\r\n                return 'ease in & out cubic';\r\n            case GroupMenu.EASING_IN_QUAD:\r\n                return 'ease in quad';\r\n            case GroupMenu.EASING_OUT_QUAD:\r\n                return 'ease out quad';\r\n            case GroupMenu.EASING_INOUT_QUAD:\r\n                return 'ease in & out quad';\r\n        }\r\n    }\r\n\r\n    /**\r\n     * enlarge those marks with the given classname\r\n     * @param svg \r\n     * @param clsName \r\n     */\r\n    public static enlargeMarks(svg: HTMLElement, clsName: string, scale: number, includeCls: boolean) {\r\n        const targetMarks: Element[] = includeCls ? Array.from(svg.getElementsByClassName(clsName)) : Array.from(svg.querySelectorAll(`.mark:not(.${clsName})`));\r\n\r\n        targetMarks.forEach((m: HTMLElement) => {\r\n            const oriStrokeWidth: string = m.getAttributeNS(null, 'stroke-width');\r\n            const strokeWidthRecord: string = m.getAttributeNS(null, 'tmp-stroke-width');\r\n            let strokeWidthToScale: number = 0;\r\n            if (typeof m.getAttributeNS(null, 'stroke') === 'undefined' || !m.getAttributeNS(null, 'stroke') || m.getAttributeNS(null, 'stroke') === 'none') {\r\n                m.setAttributeNS(null, 'stroke', typeof m.getAttributeNS(null, 'fill') === 'undefined' ? '#fff' : m.getAttributeNS(null, 'fill'));\r\n            }\r\n            if (typeof strokeWidthRecord !== 'undefined' && strokeWidthRecord) {\r\n                strokeWidthToScale = parseFloat(strokeWidthRecord);\r\n            } else {\r\n                if (typeof oriStrokeWidth !== 'undefined' && oriStrokeWidth) {\r\n                    m.setAttributeNS(null, 'tmp-stroke-width', `${oriStrokeWidth}`);\r\n                    strokeWidthToScale = parseFloat(oriStrokeWidth);\r\n                } else {\r\n                    m.setAttributeNS(null, 'tmp-stroke-width', '0');\r\n                    strokeWidthToScale = 0;\r\n                }\r\n            }\r\n\r\n            if (m.tagName === 'text' && scale >= state.chartThumbNailZoomLevels / 2) {\r\n                const txtBBox: DOMRect = m.getBoundingClientRect();\r\n                const txtCover: SVGRectElement = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n                txtCover.setAttributeNS(null, 'class', 'txt-cover');\r\n                txtCover.setAttributeNS(null, 'x', m.getAttributeNS(null, 'x'));\r\n                txtCover.setAttributeNS(null, 'y', `${parseFloat(m.getAttributeNS(null, 'y')) - txtBBox.height / state.zoomLevel}`);\r\n                txtCover.setAttributeNS(null, 'width', `${txtBBox.width * 1.4 / state.zoomLevel}`);\r\n                txtCover.setAttributeNS(null, 'height', `${txtBBox.height * 1.4 / state.zoomLevel}`);\r\n                txtCover.setAttributeNS(null, 'opacity', '0.7');\r\n                txtCover.setAttributeNS(null, 'fill', m.getAttributeNS(null, 'fill'));\r\n                if (m.getAttributeNS(null, 'transform')) {\r\n                    txtCover.setAttributeNS(null, 'transform', m.getAttributeNS(null, 'transform'));\r\n                }\r\n                m.parentElement.appendChild(txtCover);\r\n                m.classList.add('fadeout-text');\r\n                m.setAttributeNS(null, 'opacity', '0');\r\n            }\r\n            m.setAttributeNS(null, 'stroke-width', `${scale * 2 + strokeWidthToScale}`);\r\n\r\n        })\r\n    }\r\n\r\n    public static resetTxtCover(svg: HTMLElement) {\r\n        //remove all text covers\r\n        Array.from(document.getElementsByClassName('txt-cover')).forEach((txtCover: HTMLElement) => {\r\n            txtCover.remove();\r\n        })\r\n        Array.from(document.getElementsByClassName('fadeout-text')).forEach((txt: HTMLElement) => {\r\n            txt.classList.remove('fadeout-text');\r\n            txt.setAttributeNS(null, 'opacity', null);\r\n        })\r\n    }\r\n\r\n    public static resetMarkSize(svg: HTMLElement, clsName: string, includeCls: boolean) {\r\n        const targetMarks: Element[] = includeCls ? Array.from(svg.getElementsByClassName(clsName)) : Array.from(svg.querySelectorAll(`.mark:not(.${clsName})`));\r\n        targetMarks.forEach((m: HTMLElement) => {\r\n            if (typeof m.getAttributeNS(null, 'tmp-stroke-width') !== 'undefined') {\r\n                m.setAttributeNS(null, 'stroke-width', m.getAttributeNS(null, 'tmp-stroke-width'));\r\n            }\r\n        })\r\n    }\r\n\r\n    public static calKfZoomLevel(): number {\r\n        let currentZoomNum: number = state.zoomLevel;\r\n        if (currentZoomNum === ViewWindow.MAX_ZOOM_LEVEL) {\r\n            currentZoomNum -= 0.001;\r\n        }\r\n        return Math.floor((currentZoomNum - ViewWindow.MIN_ZOOM_LEVEL) / ((ViewWindow.MAX_ZOOM_LEVEL - ViewWindow.MIN_ZOOM_LEVEL) / state.chartThumbNailZoomLevels));\r\n    }\r\n}","\"use strict\"\n\nmodule.exports = twoProduct\n\nvar SPLITTER = +(Math.pow(2, 27) + 1.0)\n\nfunction twoProduct(a, b, result) {\n  var x = a * b\n\n  var c = SPLITTER * a\n  var abig = c - a\n  var ahi = c - abig\n  var alo = a - ahi\n\n  var d = SPLITTER * b\n  var bbig = d - b\n  var bhi = d - bbig\n  var blo = b - bhi\n\n  var err1 = x - (ahi * bhi)\n  var err2 = err1 - (alo * bhi)\n  var err3 = err2 - (ahi * blo)\n\n  var y = alo * blo - err3\n\n  if(result) {\n    result[0] = y\n    result[1] = x\n    return result\n  }\n\n  return [ y, x ]\n}","\"use strict\"\n\nmodule.exports = fastTwoSum\n\nfunction fastTwoSum(a, b, result) {\n\tvar x = a + b\n\tvar bv = x - a\n\tvar av = x - bv\n\tvar br = b - bv\n\tvar ar = a - av\n\tif(result) {\n\t\tresult[0] = ar + br\n\t\tresult[1] = x\n\t\treturn result\n\t}\n\treturn [ar+br, x]\n}","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  // join used to fix memory issue caused by concatenation: https://bugs.chromium.org/p/v8/issues/detail?id=3175#c4\n  return ([\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]], '-',\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]],\n    bth[buf[i++]], bth[buf[i++]]\n  ]).join('');\n}\n\nmodule.exports = bytesToUuid;\n","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\n\n// getRandomValues needs to be invoked in a context where \"this\" is a Crypto\n// implementation. Also, find the complete implementation of crypto on IE11.\nvar getRandomValues = (typeof(crypto) != 'undefined' && crypto.getRandomValues && crypto.getRandomValues.bind(crypto)) ||\n                      (typeof(msCrypto) != 'undefined' && typeof window.msCrypto.getRandomValues == 'function' && msCrypto.getRandomValues.bind(msCrypto));\n\nif (getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16); // eslint-disable-line no-undef\n\n  module.exports = function whatwgRNG() {\n    getRandomValues(rnds8);\n    return rnds8;\n  };\n} else {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n\n  module.exports = function mathRNG() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options === 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n","import TimingSpec from './TimingSpec.js';\nimport { globalVar } from './util/GlobalVar.js';\nimport { EasingFactory, MaskType } from 'jsmovin';\n\nclass ActionSpec extends TimingSpec {\n    constructor() {\n        super();\n        this.chartIdx = 0;\n        this._extend = '';\n        this._type = ActionSpec.actionTypes.appear;\n        this.animationType = '';//not set by the user\n        this._easing = ActionSpec.easingType.easeLinear;\n        this._duration = 0;\n        this.startTime;//not set by the user\n        this.attribute = [];\n        this.oriActionType;\n    }\n\n    /***** getters and setters *****/\n    // set \n    set type(tp) {\n        if (typeof tp !== 'undefined') {\n            if (Object.keys(ActionSpec.actionTypes).includes(tp)) {\n                this._type = tp;\n            } else {\n                alert('the \\'type\\' of action is not defined. ')\n            }\n        }\n    }\n\n    get type() {\n        return this._type;\n    }\n\n    set easing(es) {\n        if (typeof es !== 'undefined') {\n            if (Object.keys(ActionSpec.easingType).includes(es)) {\n                this._easing = es;\n            } else {\n                alert('the \\'easing\\' of action is not defined. ')\n            }\n        }\n    }\n\n    get easing() {\n        return this._easing;\n    }\n\n    set duration(drtn) {\n        if (typeof drtn === 'number') {\n            this._duration = Math.floor(drtn / (1000 / TimingSpec.FRAME_RATE)) * (1000 / TimingSpec.FRAME_RATE);\n        } else if (typeof drtn === 'string' || typeof drtn === 'object') {\n            this._duration = drtn;\n        }\n    }\n\n    get duration() {\n        return this._duration;\n    }\n    /***** end getters and setters *****/\n\n    /**\n     * init action using json obj\n     * @param {JSON obj} actionJson\n     */\n    initAction(actionJson) {\n        this.chartIdx = actionJson.chartIdx;\n        this.type = actionJson.type;//action type\n        this.animationType = actionJson.animationType;//animation type\n        this.maskType = typeof actionJson.maskType === 'undefined' ? MaskType.Alpha : actionJson.maskType;\n        this.reference = actionJson.reference;//timingSpec reference\n        this.offset = actionJson.offset;//timingSpec delay\n        this.duration = actionJson.duration;//action duration\n        this.easing = actionJson.easing;\n        this.oriActionType = actionJson.oriActionType;\n\n        //attributes only take effect when type is custom\n        if (typeof actionJson.attribute !== 'undefined') {\n            actionJson.attribute.forEach((attr) => {\n                let tmpAttr = {\n                    attrName: attr.attrName,\n                    from: attr.from,\n                    to: attr.to\n                };\n                this.attribute.push(tmpAttr);\n            })\n        }\n    }\n\n    replaceDurationConst(constants, status = {}) {\n        if (typeof this.duration === 'string') {\n            if (typeof constants.get(this.duration) === 'undefined') {//check error in animation timing\n                //check if it is an equation\n                if (this.duration.indexOf(\"calc\") === 0) {\n                    this.duration = this.duration.substring(0, this.duration.length - 1).substring(5);\n                    constants.forEach((value, key, map) => {\n                        if (this.duration.includes(key)) {\n                            if (typeof value === 'number') {\n                                this.duration = this.duration.replace(new RegExp(key, 'gm'), '' + value);\n                            } else {\n                                status.info = { type: 'error', msg: 'Duration must be a number or a numeric type constant.', errSpec: '\"duration\":\"' + this.duration.replace(/\\s/g, '') + '\"' };\n                            }\n                        }\n                    })\n                    if (CanisUtil.checkEquation(this.duration, constants)) {\n                        this.duration = eval(this.duration);\n                    } else {\n                        status.info = { type: 'error', msg: 'Wrong equation.', errSpec: '\"duration\":\"' + this.duration.replace(/\\s/g, '') + '\"' };\n                    }\n                } else {\n                    status.info = { type: 'error', msg: 'Wrong reference of the constant variables.', errSpec: '\"duration\":\"' + this.duration.replace(/\\s/g, '') + '\"' };\n                }\n            } else {//replace\n                if (typeof constants.get(this.duration) === 'number') {\n                    this.duration = constants.get(this.duration);\n                } else {\n                    status.info = { type: 'error', msg: 'Duration must be a number or a numeric type constant.', errSpec: '\"duration\":\"' + this.duration.replace(/\\s/g, '') + '\"' };\n                }\n            }\n        } else if (this.duration && typeof this.duration === 'object') {\n            if (typeof this.duration.minDuration === 'string') {\n                if (typeof constants.get(this.duration.minDuration) === 'undefined') {//check error in animation timing\n                    //check if it is an equation\n                    if (this.duration.minDuration.indexOf(\"calc\") === 0) {\n                        this.duration.minDuration = this.duration.minDuration.substring(0, this.duration.minDuration.length - 1).substring(5);\n                        constants.forEach((value, key, map) => {\n                            if (this.duration.minDuration.includes(key)) {\n                                if (typeof value === 'number') {\n                                    this.duration.minDuration = this.duration.minDuration.replace(new RegExp(key, 'gm'), '' + value);\n                                } else {\n                                    status.info = { type: 'error', msg: 'Duration must be a number or a numeric type constant.', errSpec: '\"minDuration\":\"' + this.duration.minDuration.replace(/\\s/g, '') + '\"' };\n                                }\n                            }\n                        })\n                        if (CanisUtil.checkEquation(this.duration.minDuration, constants)) {\n                            this.duration.minDuration = eval(this.duration.minDuration);\n                        } else {\n                            status.info = { type: 'error', msg: 'Wrong equation.', errSpec: '\"minDuration\":\"' + this.duration.minDuration.replace(/\\s/g, '') + '\"' };\n                        }\n                    } else {\n                        status.info = { type: 'error', msg: 'Wrong reference of the constant variables.', errSpec: '\"minDuration\":\"' + this.duration.minDuration.replace(/\\s/g, '') + '\"' };\n                    }\n                } else {//replace\n                    if (typeof constants.get(this.duration.minDuration) === 'number') {\n                        this.duration.minDuration = constants.get(this.duration.minDuration);\n                    } else {\n                        status.info = { type: 'error', msg: 'MinDuration must be a number or a numeric type constant.', errSpec: '\"minDuration\":\"' + this.duration.minDuration.replace(/\\s/g, '') + '\"' };\n                    }\n                }\n            }\n        }\n    }\n\n    static assignActionTmpls(actionTmplJson, status = {}) {\n        //assign Animation action templates\n        this.actionTmpls.clear();\n        actionTmplJson.forEach(a => {\n            if (!a.name || typeof a.name === 'undefined') {\n                a.name = '';\n            }\n            this.actionTmpls.set(a.name, a);\n        })\n        //replace the templates reference inside the templates\n        this.actionTmpls.forEach((currentTmpl, currentName) => {\n            const extendName = currentTmpl.extend;\n            if (extendName && typeof extendName !== 'undefined') {\n                const extendTmpl = this.actionTmpls.get(extendName);\n                if (typeof extendTmpl !== 'undefined') {\n                    Object.keys(extendTmpl).forEach(k => {\n                        if (k !== 'name' && typeof currentTmpl[k] === 'undefined') {\n                            currentTmpl[k] = extendTmpl[k];\n                        }\n                    })\n                    delete currentTmpl.extend;\n                    this.actionTmpls.set(currentName, currentTmpl);\n                } else {\n                    status.info = { type: 'error', msg: 'cannot find the inherited template.', errSpec: '\"extend\":\"' + extendName + '\"' };\n                }\n            }\n        })\n    }\n\n    static replaceActionTmpls(actionJson, status = {}) {\n        if (actionJson.extend && typeof actionJson.extend !== 'undefined') {\n            const extendTmpl = this.actionTmpls.get(actionJson.extend);\n            if (typeof extendTmpl !== 'undefined') {\n                Object.keys(extendTmpl).forEach(k => {\n                    if (k !== 'name' && typeof actionJson[k] === 'undefined') {\n                        actionJson[k] = extendTmpl[k];\n                    }\n                })\n                delete actionJson.extend;\n                return actionJson;\n            } else {\n                status.info = { type: 'error', msg: 'cannot find the inherited template.', errSpec: '\"extend\":\"' + actionJson.extend + '\"' };\n                return actionJson;\n            }\n        }\n        return actionJson;\n    }\n\n    /**\n     * translate template animations to 'custom' type with the transition on some visual attributes\n     */\n    static transToVisualAttrAction(actionJson, chartIdx, changedAttrs, dataTrans, status = {}) {\n        //repalce action templates if there is any\n        console.log('action tmpls: ', this.actionTmpls, actionJson);\n        actionJson = this.replaceActionTmpls(actionJson);\n        console.log('replaced action: ', actionJson);\n\n        //trans to visual attrs\n        let actionJsonArr = [];\n\n        //generate pre-render actions\n        for (let i = 0; i < changedAttrs.length; i++) {\n            let changedAttr = changedAttrs[i];\n            let fromArr = [], toArr = [];\n            dataTrans.forEach(function (transArr, markId) {\n                if (chartIdx + 1 < transArr.length) {\n                    if (changedAttr === 'd' || changedAttr === 'textContent' || changedAttr === 'fill' || changedAttr === 'stroke') {\n                        let tmpFromItem = [markId, !transArr[chartIdx][changedAttr] ? (changedAttr === 'd' ? 'm0,0' : transArr[chartIdx][changedAttr]) : transArr[chartIdx][changedAttr]],\n                            tmpToItem = [markId, !transArr[chartIdx + 1][changedAttr] ? (changedAttr === 'd' ? 'm0,0' : transArr[chartIdx + 1][changedAttr]) : transArr[chartIdx + 1][changedAttr]];\n                        if (changedAttr === 'd') {\n                            let tmpFromPath = document.createElementNS('http://www.w3.org/2000/svg', 'path'),\n                                tmpToPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n                            tmpFromPath.setAttributeNS(null, 'd', !transArr[chartIdx][changedAttr] ? 'm0,0' : transArr[chartIdx][changedAttr]);\n                            tmpToPath.setAttributeNS(null, 'd', !transArr[chartIdx + 1][changedAttr] ? 'm0,0' : transArr[chartIdx + 1][changedAttr]);\n                            let tmpFromPathLen = tmpFromPath.getTotalLength(),\n                                tmpToPathLen = tmpToPath.getTotalLength();\n                            let stepNum = 300, fromPathStepLen = tmpFromPathLen / stepNum, toPathStepLen = tmpToPathLen / stepNum;\n                            let fromDiscritPath = [], toDiscritPath = [];\n                            for (let i = 0; i < stepNum; i++) {\n                                let tmpFromPnt = tmpFromPath.getPointAtLength(fromPathStepLen * i),\n                                    tmpToPnt = tmpToPath.getPointAtLength(toPathStepLen * i);\n                                fromDiscritPath.push([tmpFromPnt.x, tmpFromPnt.y]);\n                                toDiscritPath.push([tmpToPnt.x, tmpToPnt.y]);\n                            }\n                            tmpFromItem.push(fromDiscritPath);\n                            tmpToItem.push(toDiscritPath);\n                        }\n                        fromArr.push(tmpFromItem);\n                        toArr.push(tmpToItem);\n                    } else {\n                        fromArr.push([markId, parseFloat(transArr[chartIdx][changedAttr])]);\n                        toArr.push([markId, parseFloat(transArr[chartIdx + 1][changedAttr])]);\n                    }\n                }\n            })\n            let preObj = {\n                chartIdx: actionJson.chartIdx,\n                reference: TimingSpec.timingRef.previousStart,\n                offset: 0,\n                duration: actionJson.type === ActionSpec.actionTypes.transition ? actionJson.duration : 0,\n                type: ActionSpec.actionTargets.mark,\n                oriActionType: ActionSpec.actionTypes.custom,\n                animationType: ActionSpec.targetAnimationType.custom,\n                attribute: [{\n                    attrName: changedAttr,\n                    from: fromArr,\n                    to: toArr\n                }]\n            }\n\n            actionJsonArr.push(preObj);\n        }\n\n        if (actionJson.type !== ActionSpec.actionTypes.transition) {\n            let tmpObj = {\n                chartIdx: actionJson.chartIdx,\n                reference: actionJson.reference,//timingSpec offset reference\n                offset: actionJson.offset,\n                easing: actionJson.easing,\n                duration: typeof actionJson.duration === 'undefined' ? TimingSpec.FRAME_RATE : actionJson.duration,\n                type: ActionSpec.actionTargets.mask,\n                oriActionType: actionJson.type\n            };\n            // let tmpObj2;\n\n            switch (actionJson.type) {\n                case ActionSpec.actionTypes.appear:\n                    tmpObj.duration = 1000 / TimingSpec.FRAME_RATE;\n                    tmpObj.animationType = ActionSpec.targetAnimationType.fade;\n                    tmpObj.type = ActionSpec.actionTargets.mark;\n                    tmpObj.attribute = [\n                        {\n                            attrName: 'opacity',\n                            from: 0,\n                            to: 1\n                        }\n                    ];\n                    break;\n                case ActionSpec.actionTypes.disappear:\n                    tmpObj.duration = 1000 / TimingSpec.FRAME_RATE;\n                    tmpObj.animationType = ActionSpec.targetAnimationType.fade;\n                    tmpObj.type = ActionSpec.actionTargets.mark;\n                    tmpObj.attribute = [\n                        {\n                            attrName: 'opacity',\n                            from: 1,\n                            to: 0\n                        }\n                    ];\n                    break;\n                case ActionSpec.actionTypes.fade:\n                    tmpObj.animationType = ActionSpec.targetAnimationType.fade;\n                    tmpObj.type = ActionSpec.actionTargets.mark;\n                    tmpObj.attribute = [{\n                        attrName: 'opacity',\n                        from: 0,\n                        to: 1\n                    }];\n                    break;\n                case ActionSpec.actionTypes.fadeOut:\n                    tmpObj.animationType = ActionSpec.targetAnimationType.fade;\n                    tmpObj.type = ActionSpec.actionTargets.mark;\n                    tmpObj.attribute = [{\n                        attrName: 'opacity',\n                        from: 1,\n                        to: 0\n                    }];\n                    break;\n                case ActionSpec.actionTypes.grow:\n                    tmpObj.type = ActionSpec.actionTargets.mark;\n                    tmpObj.animationType = ActionSpec.targetAnimationType.grow;\n                    tmpObj.attribute = [{\n                        attrName: 'trimEnd',\n                        from: 0,\n                        to: 1\n                    }];\n                    break;\n                case ActionSpec.actionTypes.degrow:\n                    tmpObj.type = ActionSpec.actionTargets.mark;\n                    tmpObj.animationType = ActionSpec.targetAnimationType.grow;\n                    tmpObj.attribute = [{\n                        attrName: 'trimEnd',\n                        from: 1,\n                        to: 0\n                    }];\n                    break;\n                case ActionSpec.actionTypes.wipeBottom:\n                    tmpObj.animationType = ActionSpec.targetAnimationType.wipe;\n                    tmpObj.maskType = MaskType.InvertAlpha;\n                    tmpObj.attribute = [{\n                        attrName: 'scaleY',\n                        from: 1,\n                        to: 0\n                    }];\n                    break;\n                case ActionSpec.actionTypes.wipeOutFromTop:\n                    tmpObj.animationType = ActionSpec.targetAnimationType.wipe;\n                    tmpObj.maskType = MaskType.InvertAlpha;\n                    tmpObj.attribute = [{\n                        attrName: 'scaleY',\n                        from: 0,\n                        to: 1\n                    }];\n                    break;\n                case ActionSpec.actionTypes.wipeTop:\n                    tmpObj.animationType = ActionSpec.targetAnimationType.wipe;\n                    tmpObj.maskType = MaskType.Alpha;\n                    tmpObj.attribute = [{\n                        attrName: 'scaleY',\n                        from: 0,\n                        to: 1\n                    }];\n                    break;\n                case ActionSpec.actionTypes.wipeOutFromBottom:\n                    tmpObj.animationType = ActionSpec.targetAnimationType.wipe;\n                    tmpObj.maskType = MaskType.Alpha;\n                    tmpObj.attribute = [{\n                        attrName: 'scaleY',\n                        from: 1,\n                        to: 0\n                    }];\n                    break;\n                case ActionSpec.actionTypes.wipeLeft:\n                    tmpObj.animationType = ActionSpec.targetAnimationType.wipe;\n                    tmpObj.maskType = MaskType.Alpha;\n                    tmpObj.attribute = [{\n                        attrName: 'scaleX',\n                        from: 0,\n                        to: 1\n                    }];\n                    break;\n                case ActionSpec.actionTypes.wipeOutFromRight:\n                    tmpObj.animationType = ActionSpec.targetAnimationType.wipe;\n                    tmpObj.maskType = MaskType.Alpha;\n                    tmpObj.attribute = [{\n                        attrName: 'scaleX',\n                        from: 1,\n                        to: 0\n                    }];\n                    break;\n                case ActionSpec.actionTypes.wipeRight:\n                    tmpObj.animationType = ActionSpec.targetAnimationType.wipe;\n                    tmpObj.maskType = MaskType.InvertAlpha;\n                    tmpObj.attribute = [{\n                        attrName: 'scaleX',\n                        from: 1,\n                        to: 0\n                    }];\n                    break;\n                case ActionSpec.actionTypes.wipeOutFromLeft:\n                    tmpObj.animationType = ActionSpec.targetAnimationType.wipe;\n                    tmpObj.maskType = MaskType.InvertAlpha;\n                    tmpObj.attribute = [{\n                        attrName: 'scaleX',\n                        from: 0,\n                        to: 1\n                    }];\n                    break;\n                case ActionSpec.actionTypes.circle:\n                    tmpObj.animationType = ActionSpec.targetAnimationType.circle;\n                    tmpObj.maskType = MaskType.Alpha;\n                    tmpObj.attribute = [\n                        {\n                            attrName: 'scaleX',\n                            from: 0,\n                            to: 1\n                        },\n                        {\n                            attrName: 'scaleY',\n                            from: 0,\n                            to: 1\n                        }\n                    ];\n                    break;\n                case ActionSpec.actionTypes.circleOut:\n                    tmpObj.animationType = ActionSpec.targetAnimationType.circle;\n                    tmpObj.maskType = MaskType.Alpha;\n                    tmpObj.attribute = [\n                        {\n                            attrName: 'scaleX',\n                            from: 1,\n                            to: 0\n                        },\n                        {\n                            attrName: 'scaleY',\n                            from: 1,\n                            to: 0\n                        }\n                    ];\n                    break;\n\n                case ActionSpec.actionTypes.wheel:\n                    tmpObj.animationType = ActionSpec.targetAnimationType.wheel;\n                    tmpObj.maskType = MaskType.InvertAlpha;\n                    tmpObj.attribute = [{\n                        attrName: 'trimEnd',\n                        from: 1,\n                        to: 0\n                    }];\n                    break;\n                case ActionSpec.actionTypes.wheelOut:\n                    tmpObj.animationType = ActionSpec.targetAnimationType.wheel;\n                    tmpObj.maskType = MaskType.InvertAlpha;\n                    tmpObj.attribute = [{\n                        attrName: 'trimEnd',\n                        from: 0,\n                        to: 1\n                    }];\n                    break;\n                // case ActionSpec.actionTypes.custom:\n                //     tmpObj.type = ActionSpec.actionTargets.mark;\n                //     tmpObj.animationType = ActionSpec.targetAnimationType.custom;\n                //     tmpObj.attribute = {};\n                //     if (typeof actionJson.attribute !== 'undefined') {\n                //         tmpObj.attribute = [{\n                //             attrName: actionJson.attribute.attrName,\n                //             from: actionJson.attribute.from,\n                //             to: actionJson.attribute.to\n                //         }]\n                //     }\n                //     break;\n            }\n            actionJsonArr.push(tmpObj);\n        }\n\n        return actionJsonArr;\n    }\n\n\n    /**\n     * calculate the total duration of all the actions\n     * @param {Array<ActionSpec>} actionArr \n     * @param {Map} durationAttrValues: key: data attr name, value Map{key: markId, value: attr value}\n     */\n    static calActionDuration(actionArr, durationAttrValues, domMarks) {\n        let wholeStart = 0, wholeEnd = -100000;//start time of the earliest action and end time of the lastst action\n        let lastStart = 0, lastEnd = 0;\n        let durationWithAttr = false;\n\n        for (let i = 0; i < actionArr.length; i++) {\n            let tmpStartMap, tmpEndMap = new Map();\n            tmpStartMap = actionArr[i].calOffsetTime(lastStart, lastEnd, 0, domMarks);//change to retunr value of Map\n\n            //ignore the influence of the animation for the boundary of the mask\n            if (i > 0) {\n                if (actionArr[i - 1].animationType === ActionSpec.targetAnimationType.mistake) {\n                    tmpStartMap.forEach(function (tmpStart, markId) {\n                        tmpStartMap.set(markId, tmpStart - actionArr[i - 1].offset);\n                    })\n                }\n            }\n\n            let minTmpStart = 1000000, maxTmpEnd = -100000;\n            actionArr[i].offsetStart = new Map();\n            tmpStartMap.forEach(function (tmpStart, markId) {\n                let tmpEnd = 0;\n                if (typeof actionArr[i].duration === 'object') {\n                    durationWithAttr = true;\n                    tmpEnd = tmpStart;\n                } else if (typeof actionArr[i].duration === 'number') {\n                    tmpEnd = tmpStart + actionArr[i].duration;\n                }\n                tmpEndMap.set(markId, tmpEnd);\n                actionArr[i].offsetStart.set(markId, tmpStart);\n\n                if (tmpStart < minTmpStart) {\n                    minTmpStart = tmpStart;\n                }\n                if (tmpEnd > maxTmpEnd) {\n                    maxTmpEnd = tmpEnd;\n                }\n                if (tmpStart < wholeStart) {\n                    wholeStart = tmpStart;\n                }\n                if (tmpEnd > wholeEnd) {\n                    wholeEnd = tmpEnd;\n                }\n            })\n\n            lastStart = minTmpStart;\n            lastEnd = maxTmpEnd;\n        }\n\n        let tmpResultDuration = wholeEnd - wholeStart;\n        let resultDurations = new Map();//key: markId, value: duraiton of this mark\n        let minValueEachAttr = new Map();\n        if (durationWithAttr) {//add duration with the attribute values\n            //find the min value for each attr\n            durationAttrValues.forEach(function (attrs, markId) {\n                attrs.forEach(function (attrValue, attrName) {\n                    if (typeof minValueEachAttr.get(attrName) === 'undefined' || attrValue[0] < minValueEachAttr.get(attrName)) {\n                        minValueEachAttr.set(attrName, attrValue[0]);\n                    }\n                })\n            })\n            durationAttrValues.forEach(function (attrs, markId) {\n                let tmpExtraDuration = 0;\n                attrs.forEach(function (attrValue, attrName) {\n                    let minAttrValue = minValueEachAttr.get(attrName);\n\n                    tmpExtraDuration += attrValue[1] * attrValue[0] / minAttrValue;\n                })\n                resultDurations.set(markId, tmpResultDuration + tmpExtraDuration);\n            })\n        } else {//directly set the duration of each mark with tmpResultDuration\n            durationAttrValues.forEach(function (value, markId) {\n                resultDurations.set(markId, tmpResultDuration);\n            })\n        }\n        return [resultDurations, minValueEachAttr, actionArr];\n    }\n\n    static transToLottieAction(easingName) {\n        switch (easingName) {\n            case ActionSpec.easingType.easeLinear:\n                return EasingFactory.linear();\n            case ActionSpec.easingType.easeInQuad:\n                return EasingFactory.easeInQuad();\n            case ActionSpec.easingType.easeOutQuad:\n                return EasingFactory.easeOutQuad();\n            case ActionSpec.easingType.easeInOutQuad:\n                return EasingFactory.easeInOutQuad();\n            case ActionSpec.easingType.easeInCubic:\n                return EasingFactory.easeInCubic();\n            case ActionSpec.easingType.easeOutCubic:\n                return EasingFactory.easeOutCubic();\n            case ActionSpec.easingType.easeInOutCubic:\n                return EasingFactory.easeInOutCubic();\n            // case ActionSpec.easingType.easeOutBounce:\n            //     return EasingFactory.easeOutB;\n        }\n    }\n}\n\nActionSpec.actionTmpls = new Map();//record all action templates, key: tmplate name, value: action obj\nActionSpec.attrs = ['type', 'offset', 'reference', 'easing', 'duration'];\n\nActionSpec.actionTypes = {\n    fade: 'fade',\n    wipeBottom: 'wipe bottom',\n    wipeTop: 'wipe top',\n    wipeLeft: 'wipe left',\n    wipeRight: 'wipe right',\n    wheel: 'wheel',\n    appear: 'appear',\n    disappear: 'disappear',\n    circle: 'circle',\n    grow: 'grow',\n    custom: 'custom',\n    fadeOut: 'fade out',\n    wipeOutFromLeft: 'wipe out from left',\n    wipeOutFromTop: 'wipe out from top',\n    wipeOutFromRight: 'wipe out from right',\n    wipeOutFromBottom: 'wipe out from bottom',\n    wheelOut: 'wheel out',\n    circleOut: 'circle out',\n    degrow: 'degrow',\n    transition: 'magic move',\n    zoom: 'zoom',\n    mark: 'mask',\n    mask: 'mark'\n}\n\nActionSpec.actionTargets = {\n    mark: 'mark',\n    mask: 'mask'\n}\n\nActionSpec.targetAnimationType = {\n    fade: 'fade',\n    wipe: 'wipe',\n    move: 'move',\n    wheel: 'wheel',\n    circle: 'circle',\n    appear: 'appear',\n    grow: 'grow',\n    custom: 'custom',\n    mistake: 'mistake'\n}\n\nActionSpec.easingType = {\n    easeLinear: 'easeLinear',\n    easeInQuad: 'easeInQuad',\n    easeOutQuad: 'easeOutQuad',\n    easeInOutQuad: 'easeInOutQuad',\n    easeInCubic: 'easeInCubic',\n    easeOutCubic: 'easeOutCubic',\n    easeInOutCubic: 'easeInOutCubic',\n    easeOutBounce: 'easeOutBounce'\n}\n\nexport default ActionSpec;","import TimingSpec from './TimingSpec.js';\nimport { CanisUtil } from './util/Util.js';\n\nclass GroupingSpec extends TimingSpec {\n    constructor() {\n        super();\n        this._groupBy = 'id'; //optional\n        this._reference = TimingSpec.timingRef.previousStart;\n        this._delay = 0;\n        this.definedById = false;//true defined by user, false: not defined by user\n        this.sort = {};\n        // this.root = {};\n        this.grouping;//optional, another GroupingSpec object indicating more groupings\n    }\n\n    /***** getters and setters *****/\n    set groupBy(gb) {\n        if (typeof gb !== 'undefined')\n            this._groupBy = gb;\n    }\n\n    get groupBy() {\n        return this._groupBy;\n    }\n\n    set reference(ref) {\n        if (typeof ref !== 'undefined') {\n            let tmpRefStr = TimingSpec.transRef(ref);\n            if (Object.keys(TimingSpec.timingRef).includes(tmpRefStr)) {\n                this._reference = ref;\n            } else {\n                alert('the \\'reference\\' of TimingSpec has to be one of \\'previousStart\\', \\'previousEnd\\' or \\'absolute\\'. ')\n            }\n        }\n    }\n\n    get reference() {\n        return this._reference;\n    }\n\n    set delay(dly) {\n        if (typeof dly === 'number') {\n            if (dly >= 1000 / TimingSpec.FRAME_RATE || dly === 0) {\n                this._delay = dly;\n            } else {\n                this._delay = 1000 / TimingSpec.FRAME_RATE;\n            }\n        } else if (typeof dly === 'string') {\n            this._delay = dly;\n        }\n    }\n\n    get delay() {\n        return this._delay;\n    }\n    /***** end getters and setters *****/\n    replaceDelayConst(constants, status = {}) {\n        if (typeof this.delay === 'string') {\n            if (typeof constants.get(this.delay) === 'undefined') {//check error in animation timing\n                //check if it is an equation\n                if (this.delay.indexOf(\"calc\") === 0) {\n                    this.delay = this.delay.substring(0, this.delay.length - 1).substring(5);\n                    constants.forEach((value, key, map) => {\n                        if (this.delay.includes(key)) {\n                            if (typeof value === 'number') {\n                                this.delay = this.delay.replace(new RegExp(key, 'gm'), '' + value);\n                            } else {\n                                status.info = { type: 'error', msg: 'Delay must be a number or a numeric type constant.', errSpec: '\"delay\":\"' + this.delay.replace(/\\s/g, '') + '\"' };\n                            }\n                        }\n                    })\n                    if (CanisUtil.checkEquation(this.delay, constants)) {\n                        this.delay = eval(this.delay);\n                    } else {\n                        status.info = { type: 'error', msg: 'Wrong equation.', errSpec: '\"delay\":\"' + this.delay.replace(/\\s/g, '') + '\"' };\n                    }\n                } else {\n                    status.info = { type: 'error', msg: 'Wrong reference of the constant variables.', errSpec: '\"delay\":\"' + this.delay.replace(/\\s/g, '') + '\"' };\n                }\n            } else {//replace\n                if (typeof constants.get(this.delay) === 'number') {\n                    this.delay = constants.get(this.delay);\n                } else {\n                    status.info = { type: 'error', msg: 'Delay must be a number or a numeric type constant.', errSpec: '\"delay\":\"' + this.delay.replace(/\\s/g, '') + '\"' };\n                }\n            }\n        }\n        if (typeof this.grouping !== 'undefined') {\n            this.grouping.replaceDelayConst(constants, status);\n        }\n    }\n\n    /**\n     * init nested grouping and actions using json obj\n     * @param {JSON obj} groupingJson \n     */\n    initGrouping(groupingJson) {\n        this.groupBy = groupingJson.groupBy;\n        if (groupingJson.groupBy === 'id') {\n            this.definedById = true;\n        }\n        this.reference = groupingJson.reference;\n        this.delay = groupingJson.delay;\n\n        if (typeof groupingJson.sort !== 'undefined') {\n            this.sort.field = groupingJson.sort.field;\n            this.sort.order = groupingJson.sort.order;\n            this.sort.expr = groupingJson.sort.expr;\n        }\n\n        if (typeof groupingJson.grouping !== 'undefined') {\n            this.grouping = new GroupingSpec();\n            this.grouping.initGrouping(groupingJson.grouping);\n        } else if (typeof groupingJson.grouping === 'undefined' && groupingJson.groupBy !== 'id') {\n            //didnot goruping to id, add extra grouping by id\n            this.grouping = new GroupingSpec();\n            this.grouping.groupBy = 'id';\n            this.grouping.definedById = false;\n        }\n    }\n\n    arrangeOrder(markIds, domMarks, root, timingRef, aligning) {\n        GroupingSpec.frames.clear();\n        GroupingSpec.framesMark.clear();\n        if (Object.keys(root).length === 0) {// generate new tree\n            root.groupRef = 'root';\n            root.id = GroupingSpec.nodeId;\n            GroupingSpec.frames.set(GroupingSpec.nodeId, true);\n            GroupingSpec.nodeId++;\n            root.children = [];\n            root.marks = markIds;\n            root.timingRef = typeof timingRef === 'undefined' ? TimingSpec.timingRef.previousStart : timingRef;\n            root.delay = 0;\n            this.generateTree(root, domMarks);\n        } else {// update the current tree\n            this.updateTree(root, domMarks);\n        }\n        return this.getMarkOrderAndLeaves(root, aligning);\n    }\n\n    updateTree(t, domMarks) {\n        // console.log('updating tree!');\n        if (typeof t !== 'undefined') {\n            const groupByRef = this.groupBy;\n            const timingRef = this.reference;\n            const delay = this.delay;\n            if (typeof this.grouping !== 'undefined') {\n                let sameGrouping = false;//whether this is the same grouping\n                if (typeof t.children[0] !== 'undefined') {\n                    sameGrouping = t.children[0].groupRef === groupByRef;\n                }\n\n                if (sameGrouping) {\n                    let nodesThisLevel = new Map();\n                    for (let i = 0, tmpNode; i < t.children.length | (tmpNode = t.children[i]); i++) {\n                        this.grouping.updateTree(tmpNode, domMarks);\n                        nodesThisLevel.set(tmpNode.refValue, tmpNode);\n                        tmpNode.timingRef = timingRef;\n                        tmpNode.delay = delay;\n                    }\n                    //re-sort the children of t\n                    this.sortNodes(this.sort, t, nodesThisLevel, domMarks);\n                } else {\n                    t.children = [];\n                    this.generateTree(t, domMarks);\n                }\n            } else if (typeof this.grouping === 'undefined' && t.children.length > 0) {//no more grouping is defined, but the ori tree has deeper hierarchy\n                t.children = [];\n            }\n        }\n    }\n\n    generateTree(t, domMarks) {\n        // console.log('generating tree!!');\n        const groupByRef = this.groupBy;\n        const timingRef = this.reference;\n        const delay = this.delay;\n        let nodesThisLevel = new Map();\n        for (let i = 0, markId; i < t.marks.length | (markId = t.marks[i]); i++) {\n            let datum = domMarks.get(markId)['data-datum'];//datum stored in the tag\n            let refValue;\n            if (typeof domMarks.get(markId)[groupByRef] !== 'undefined') {\n                refValue = domMarks.get(markId)[groupByRef];\n            } else if (typeof domMarks.get(markId)[groupByRef] === 'undefined' && typeof datum[groupByRef] !== 'undefined') {\n                refValue = datum[groupByRef];\n            } else {\n                console.warn('error: grouping by an unknown attribute');\n                return;\n            }\n\n            if (typeof nodesThisLevel.get(refValue) !== 'undefined') {\n                nodesThisLevel.get(refValue).marks.push(markId);\n            } else {\n                let tmpObj = {};\n                tmpObj.id = GroupingSpec.nodeId;\n                GroupingSpec.nodeId++;\n                tmpObj.groupRef = groupByRef;\n                if (tmpObj.groupRef === 'id') {\n                    tmpObj.definedById = this.definedById;\n                }\n                tmpObj.refValue = refValue;\n                tmpObj.timingRef = timingRef;\n                tmpObj.delay = delay;\n                tmpObj.children = [];\n                tmpObj.marks = [markId];\n                nodesThisLevel.set(refValue, tmpObj);\n            }\n        }\n        //order nodes of this level according to the 'sort' spec\n        this.sortNodes(this.sort, t, nodesThisLevel, domMarks);\n        // console.log('nodes this level: ', this.sort, nodesThisLevel, t);\n        if (typeof this.grouping !== 'undefined') {\n            for (let i = 0, tmpNode; i < t.children.length | (tmpNode = t.children[i]); i++) {\n                this.grouping.generateTree(tmpNode, domMarks);\n            }\n        }\n    }\n\n    sortNodes(specSort, t, nodesThisLevel, domMarks) {\n        const that = this;\n        t.children = [];\n        switch (typeof specSort.order) {\n            case 'object'://Array\n                // console.log('generating children: ', t, nodesThisLevel, specSort.order);\n                let appendNum = 0;\n                for (let i = 0, refValue; i < specSort.order.length | (refValue = specSort.order[i]); i++) {\n                    if (!isNaN(Number(refValue))) {// this refvalue is not number\n                        let refValueNum = Number(refValue);\n                        if (typeof nodesThisLevel.get(refValueNum) !== 'undefined') {\n                            t.children.push(nodesThisLevel.get(refValueNum));\n                            appendNum++;\n                        }\n                    }\n\n                    if (typeof nodesThisLevel.get(refValue) !== 'undefined') {\n                        t.children.push(nodesThisLevel.get(refValue));\n                        appendNum++;\n                    }\n                }\n                break;\n            case 'string'://'ascending' | 'descending'\n                //check whether have come to the lowest level\n                let hasSingleMark = true;\n                nodesThisLevel.forEach(function (value, ref) {\n                    if (value.marks.length > 1) {\n                        hasSingleMark = false;\n                    }\n                })\n\n                //only take effect when a specific field is specified and are on the lowest level\n                if (typeof specSort.field !== 'undefined' && hasSingleMark) {\n                    let orderRef = specSort.field;\n                    let nodesThisLevelArr = [...nodesThisLevel];\n                    let orderType = specSort.order;\n                    nodesThisLevelArr.sort(function (a, b) {\n                        let markId1 = a[1].marks[0];\n                        let markId2 = b[1].marks[0];\n                        let orderRefValue1 = '', orderRefValue2 = '';\n                        let datum1 = domMarks.get(markId1)['data-datum'];\n                        let datum2 = domMarks.get(markId2)['data-datum'];\n                        if (typeof domMarks.get(markId1)[orderRef] !== 'undefined' && domMarks.get(markId2)[orderRef] !== 'undefined') {\n                            orderRefValue1 = domMarks.get(markId1)[orderRef];\n                            orderRefValue2 = domMarks.get(markId2)[orderRef];\n                        } else if (typeof domMarks.get(markId1)[orderRef] === 'undefined'\n                            && typeof datum1[orderRef] !== 'undefined'\n                            && typeof domMarks.get(markId2)[orderRef] === 'undefined'\n                            && typeof datum2[orderRef] !== 'undefined') {\n                            orderRefValue1 = datum1[orderRef];\n                            orderRefValue2 = datum2[orderRef];\n                        }\n\n                        if (!isNaN(parseFloat(orderRefValue1))) {\n                            orderRefValue1 = parseFloat(orderRefValue1);\n                        }\n                        if (!isNaN(parseFloat(orderRefValue2))) {\n                            orderRefValue2 = parseFloat(orderRefValue2);\n                        }\n\n                        if (orderType === GroupingSpec.orderTypes.ascending) {\n                            if (orderRefValue1 >= orderRefValue2) {\n                                return 1;\n                            } else {\n                                return -1;\n                            }\n                        } else if (orderType === GroupingSpec.orderTypes.descending) {\n                            if (orderRefValue2 >= orderRefValue1) {\n                                return 1;\n                            } else {\n                                return -1;\n                            }\n                        } else if (orderType === GroupingSpec.orderTypes.random) {\n                            return Math.random() >= 0.5 ? 1 : -1;\n                        }\n\n                    })\n                    for (let i = 0, tmpNode; i < nodesThisLevelArr.length | (tmpNode = nodesThisLevelArr[i]); i++) {\n                        // that.appendFrame(t.id, tmpNode.id, i, nodesThisLevelArr.length);\n                        t.children.push(tmpNode[1]);\n                    }\n                } else {\n                    let nodesThisLevelArr = [...nodesThisLevel];\n                    if (specSort.order === GroupingSpec.orderTypes.ascending) {\n                        nodesThisLevelArr.sort(function (a, b) {\n                            if (a[0] >= b[0]) {\n                                return 1;\n                            } else {\n                                return -1;\n                            }\n                        })\n                    } else if (specSort.order === GroupingSpec.orderTypes.descending) {\n                        nodesThisLevelArr.sort(function (a, b) {\n                            if (b[0] >= a[0]) {\n                                return 1;\n                            } else {\n                                return -1;\n                            }\n                        })\n                    } else if (specSort.order === GroupingSpec.orderTypes.random) {\n                        nodesThisLevelArr.sort(function (a, b) {\n                            return Math.random() >= 0.5 ? 1 : -1;\n                        })\n                    }\n                    for (let i = 0, tmpNode; i < nodesThisLevelArr.length | (tmpNode = nodesThisLevelArr[i]); i++) {\n                        // that.appendFrame(t.id, tmpNode.id, i, nodesThisLevelArr.length);\n                        t.children.push(tmpNode[1]);\n                    }\n                }\n\n                break;\n            default:\n                let count = 0;\n                nodesThisLevel.forEach(function (tmpNode, ref) {\n                    t.children.push(tmpNode);\n                    // that.appendFrame(t.id, tmpNode.id, count, nodesThisLevel.size);\n                    count++;\n                })\n        }\n    }\n\n    appendFrame(parentId, nodeId, nodeIdx, nodesNum) {\n        if (GroupingSpec.frames.get(parentId) && (nodeIdx === 0 || nodeIdx === nodesNum - 1)) {\n            GroupingSpec.frames.set(nodeId, true);\n        } else {\n            GroupingSpec.frames.set(nodeId, false);\n        }\n    }\n\n    /**\n     * get the animation order of marks\n     * @param {Object} t\n     * @param {Array} arr \n     */\n    getMarkOrderAndLeaves(t, aligning) {\n        // console.log('getting leaves: ', t);\n        let orderedMarks = [], leaves = [];\n        if (t != null) {\n            let queue = [];\n            t.parentGroupRef = [];\n            t.parentGroupRefValue = [];\n            queue.unshift(t);\n            while (queue.length != 0) {\n                let item = queue.shift();\n                // console.log('current item: ', item);\n                let children = item.children;\n                if (children.length <= 0) {\n                    if (item.definedById || (!item.definedById && item.parentGroupRef.length === 1)) {\n                        if (aligning) {\n                            item.children = [];\n                            item.parentGroupRef = [item.parentGroupRef[0]];\n                            item.parentGroupRefValue = [item.parentGroupRefValue[0]];\n                            item.groupRef = 'id';\n                            item.refValue = item.marks[0];\n                        }\n                        leaves.push(item);\n                    }\n                    orderedMarks = [...orderedMarks, ...item.marks];\n                } else {\n                    if (item.children[0].groupRef === 'id' && item.groupRef !== 'root' && !item.children[0].definedById) {\n                        if (aligning) {\n                            item.children = [];\n                            item.parentGroupRef = [item.parentGroupRef[0]];\n                            item.parentGroupRefValue = [item.parentGroupRefValue[0]];\n                            item.groupRef = 'id';\n                            item.refValue = item.marks[0];\n                        }\n                        leaves.push(item);\n                    }\n                    for (let i = 0; i < children.length; i++) {\n                        children[i].parentGroupRef = [...item.parentGroupRef, item.groupRef];\n                        children[i].parentGroupRefValue = [...item.parentGroupRefValue, item.refValue];\n                        queue.push(children[i]);\n                    }\n                }\n\n            }\n        }\n        return [orderedMarks, leaves];\n    }\n\n    /**\n     * calculate the time of each mark based on the grouping structure\n     * @param {*} t \n     * @param {*} lastGroupStart \n     * @param {*} lastGroupEnd \n     * @param {*} markAni \n     */\n    calTimeWithTree(t, lastGroupStart, lastGroupEnd, markAni) {\n        if (t.children.length > 0) {\n            for (let i = 0; i < t.children.length; i++) {\n                if (i > 0) {\n                    this.calTimeWithTree(t.children[i], t.children[i - 1].start, t.children[i - 1].end, markAni);\n                } else {\n                    this.calTimeWithTree(t.children[i], -1, -1, markAni);\n                }\n            }\n        }\n        switch (t.timingRef) {\n            case TimingSpec.timingRef.previousStart:\n                t.start = lastGroupStart + t.delay;\n                break;\n            case TimingSpec.timingRef.previousEnd:\n                t.start = lastGroupEnd + t.delay;\n                break;\n            case TimingSpec.timingRef.absolute:\n                t.start = t.delay;\n                break;\n            default:\n                t.start = lastGroupStart + t.delay;\n        }\n        if (lastGroupStart === -1) {\n            t.start = 0;\n        }\n        t.end = 0;\n        for (let i = 0; i < t.marks.length; i++) {\n            markAni.get(t.marks[i]).startTime += t.start;\n            if (markAni.get(t.marks[i]).startTime + markAni.get(t.marks[i]).totalDuration > t.end) {\n                t.end = markAni.get(t.marks[i]).startTime + markAni.get(t.marks[i]).totalDuration;\n            }\n        }\n\n        if (t.marks.length === 1) {\n            const tmpMarkId = t.marks[0];\n            if (GroupingSpec.frames.get(t.id)) {\n                GroupingSpec.framesMark.set(tmpMarkId, true);\n            } else {\n                if (typeof GroupingSpec.framesMark.get(tmpMarkId) === 'undefined') {\n                    GroupingSpec.framesMark.set(tmpMarkId, false);\n                }\n            }\n        }\n    }\n}\n\nGroupingSpec.attrs = ['groupBy', 'reference', 'delay', 'sort', 'grouping'];\nGroupingSpec.sortAttrs = ['order', 'field'];\nGroupingSpec.orderTypes = {\n    ascending: 'ascending',\n    descending: 'descending',\n    random: 'random'\n}\n\nGroupingSpec.nodeId = 0;\nGroupingSpec.frames = new Map();//key: nodeId, value: whether this is a keyframe\nGroupingSpec.framesMark = new Map();//keyframe: markid, value: whether this time point is a keyframe\n\n\nexport default GroupingSpec;","class TimingSpec {\n    constructor() {\n        this._offset = 0;//default offfset is 0\n        this._reference = TimingSpec.timingRef.previousStart;//default offset reference is 'previous_start'\n    }\n\n    /***** getters and setters *****/\n    set reference(offsetRef) {\n        if (typeof offsetRef !== 'undefined') {\n            let tmpOffsetRefStr = TimingSpec.transRef(offsetRef);\n            if (Object.keys(TimingSpec.timingRef).includes(tmpOffsetRefStr)) {\n                this._reference = offsetRef;\n            }\n        }\n    }\n\n    get reference() {\n        return this._reference;\n    }\n\n    set offset(ofst) {\n        if (typeof ofst !== 'undefined') {\n            if (typeof ofst === 'number') {\n                this._offset = Math.floor(ofst / (1000 / TimingSpec.FRAME_RATE)) * (1000 / TimingSpec.FRAME_RATE);\n            } else if (typeof ofst === 'object' || typeof ofst === 'string') {\n                this._offset = ofst;\n            }\n\n        }\n    }\n\n    get offset() {\n        return this._offset;\n    }\n    /***** end getters and setters *****/\n\n    replaceOffsetConst(constants, status = {}) {\n        if (typeof this.offset === 'string') {\n            if (typeof constants.get(this.offset) === 'undefined') {//check error in animation timing\n                //check if it is an equation\n                if (this.offset.indexOf(\"calc\") === 0) {\n                    this.offset = this.offset.substring(0, this.offset.length - 1).substring(5);\n                    constants.forEach((value, key, map) => {\n                        if (this.offset.includes(key)) {\n                            if (typeof value === 'number') {\n                                this.offset = this.offset.replace(new RegExp(key, 'gm'), '' + value);\n                            } else {\n                                status.info = { type: 'error', msg: 'Offset must be a number or a numeric type constant.', errSpec: '\"offset\":\"' + this.offset.replace(/\\s/g, '') + '\"' };\n                            }\n                        }\n                    })\n                    if (CanisUtil.checkEquation(this.offset, constants)) {\n                        this.offset = eval(this.offset);\n                    } else {\n                        status.info = { type: 'error', msg: 'Wrong equation.', errSpec: '\"offset\":\"' + this.offset.replace(/\\s/g, '') + '\"' };\n                    }\n                } else {\n                    status.info = { type: 'error', msg: 'Wrong reference of the constant variables.', errSpec: '\"offset\":\"' + this.offset.replace(/\\s/g, '') + '\"' };\n                }\n            } else {//replace\n                if (typeof constants.get(this.offset) === 'number') {\n                    this.offset = constants.get(this.offset);\n                } else {\n                    status.info = { type: 'error', msg: 'Offset must be a number or a numeric type constant.', errSpec: '\"offset\":\"' + this.offset.replace(/\\s/g, '') + '\"' };\n                }\n            }\n        } else if (this.offset && typeof this.offset === 'object') {\n            if (typeof this.offset.minOffset === 'string') {\n                if (typeof constants.get(this.offset.minOffset) === 'undefined') {//check error in animation timing\n                    //check if it is an equation\n                    if (this.offset.minOffset.indexOf(\"calc\") === 0) {\n                        this.offset.minOffset = this.offset.minOffset.substring(0, this.offset.minOffset.length - 1).substring(5);\n                        constants.forEach((value, key, map) => {\n                            if (this.offset.minOffset.includes(key)) {\n                                if (typeof value === 'number') {\n                                    this.offset.minOffset = this.offset.minOffset.replace(new RegExp(key, 'gm'), '' + value);\n                                } else {\n                                    status.info = { type: 'error', msg: 'MinOffset must be a number or a numeric type constant.', errSpec: '\"minOffset\":\"' + this.offset.minOffset.replace(/\\s/g, '') + '\"' };\n                                }\n                            }\n                        })\n                        if (CanisUtil.checkEquation(this.offset.minOffset, constants)) {\n                            this.offset.minOffset = eval(this.offset.minOffset);\n                        } else {\n                            status.info = { type: 'error', msg: 'Wrong equation.', errSpec: '\"minOffset\":\"' + this.offset.minOffset.replace(/\\s/g, '') + '\"' };\n                        }\n                    } else {\n                        status.info = { type: 'error', msg: 'Wrong reference of the constant variables.', errSpec: '\"minOffset\":\"' + this.offset.minOffset.replace(/\\s/g, '') + '\"' };\n                    }\n                } else {//replace\n                    if (typeof constants.get(this.offset.minOffset) === 'number') {\n                        this.offset.minOffset = constants.get(this.offset.minOffset);\n                    } else {\n                        status.info = { type: 'error', msg: 'MinOffset must be a number or a numeric type constant.', errSpec: '\"minOffset\":\"' + this.offset.minOffset.replace(/\\s/g, '') + '\"' };\n                    }\n                }\n            }\n        }\n    }\n\n    calELeOffsetTime(domMarks) {\n        let that = this;\n        let itemsStart = new Map();\n\n        //if the offset is an object, find the min value of the field in offset\n        let minAttrValue = 1000000;\n        if (typeof this.offset === 'object') {\n            domMarks.forEach(function (attrs, markId) {\n                if (minAttrValue > parseFloat(attrs['data-datum'][that.offset.field])) {\n                    minAttrValue = parseFloat(attrs['data-datum'][that.offset.field]);\n                }\n            })\n        }\n\n        domMarks.forEach(function (attrs, markId) {\n            let offsetValue = 0;\n            //judge the type of offset: number or object\n            if (typeof that.offset === 'number') {\n                offsetValue = that.offset;\n            } else if (typeof that.offset === 'object') {\n                offsetValue = that.offset.minOffset * parseFloat(attrs['data-datum'][that.offset.field]) / minAttrValue;\n            }\n            itemsStart.set(markId, offsetValue);\n\n            // switch (that.reference) {\n            //     case TimingSpec.timingRef.previousStart:\n            //         itemsStart.set(markId, lastStart + offsetValue - allItemsStart);\n            //         break;\n            //     case TimingSpec.timingRef.previousEnd:\n            //         itemsStart.set(markId, lastEnd + offsetValue - allItemsStart);\n            //         break;\n            //     case TimingSpec.timingRef.absolute:\n            //         itemsStart.set(markId, offsetValue + allItemsStart);\n            //         break;\n            //     default:\n            //         itemsStart.set(markId, lastStart + offsetValue - allItemsStart);\n            // }\n        })\n        return itemsStart;\n    }\n\n    /**\n     * add offset start time\n     * @param {number} lastStart : start time of the last item\n     * @param {number} lastEnd : end time of the last item\n     * @param {number} allItemsStart : start time of all the items \n     * @param {Map} domMarks : key: markId, value: attrs\n     */\n    calOffsetTime(lastStart, lastEnd, allItemsStart = 0, domMarks = new Map()) {\n        if (domMarks.size === 0) {//computing action offset time, return a number\n            let itemStart = 0;\n            switch (this.reference) {\n                case TimingSpec.timingRef.previousStart:\n                    itemStart = lastStart + this.offset - allItemsStart;\n                    break;\n                case TimingSpec.timingRef.previousEnd:\n                    itemStart = lastEnd + this.offset - allItemsStart;\n                    break;\n                case TimingSpec.timingRef.absolute:\n                    itemStart = this.offset + allItemsStart;\n                    break;\n                default:\n                    itemStart = lastStart + this.offset - allItemsStart;\n            }\n            return itemStart;\n        } else {//computing animation offset time, return a map\n            let that = this;\n            let itemsStart = new Map();\n\n            //if the offset is an object, find the min value of the field in offset\n            let minAttrValue = 1000000;\n            if (typeof this.offset === 'object') {\n                domMarks.forEach(function (attrs, markId) {\n                    if (minAttrValue > parseFloat(attrs['data-datum'][that.offset.field])) {\n                        minAttrValue = parseFloat(attrs['data-datum'][that.offset.field]);\n                    }\n                })\n            }\n\n            domMarks.forEach(function (attrs, markId) {\n                let offsetValue = 0;\n                //judge the type of offset: number or object\n                if (typeof that.offset === 'number') {\n                    offsetValue = that.offset;\n                } else if (typeof that.offset === 'object') {\n                    offsetValue = that.offset.minOffset * parseFloat(attrs['data-datum'][that.offset.field]) / minAttrValue;\n                }\n\n                switch (that.reference) {\n                    case TimingSpec.timingRef.previousStart:\n                        itemsStart.set(markId, lastStart + offsetValue - allItemsStart);\n                        break;\n                    case TimingSpec.timingRef.previousEnd:\n                        itemsStart.set(markId, lastEnd + offsetValue - allItemsStart);\n                        break;\n                    case TimingSpec.timingRef.absolute:\n                        itemsStart.set(markId, offsetValue + allItemsStart);\n                        break;\n                    default:\n                        itemsStart.set(markId, lastStart + offsetValue - allItemsStart);\n                }\n            })\n            return itemsStart;\n        }\n\n    }\n\n    static transRef(refStr) {\n        switch (refStr) {\n            case this.timingRef.previousStart:\n                return 'previousStart';\n            case this.timingRef.previousEnd:\n                return 'previousEnd';\n            case this.timingRef.absolute:\n                return 'absolute';\n        }\n    }\n}\n\nTimingSpec.FRAME_RATE = 50;\nTimingSpec.timingRef = {\n    previousStart: 'start with previous',\n    previousEnd: 'start after previous',\n    absolute: 'absolute'\n};\nTimingSpec.dataBindAttrs = ['field', 'minOffset', 'minDuration'];\n\nexport default TimingSpec;","class FacetSpec {\n    constructor(type, views) {\n        this._type;\n        this._views;\n        this.views = views;\n        this.type = type;\n    }\n\n    set type(type) {\n        if (typeof type !== 'undefined') {\n            if (Object.keys(FacetSpec.facetType).includes(type)) {\n                this._type = type;\n            } else {\n                console.warn('the facet type has to be one of \"row\" or \"column\", setting to default value \"column\".')\n                this._type = FacetSpec.facetType.col;\n            }\n        }\n    }\n\n    get type() {\n        return this._type;\n    }\n\n    set views(views) {\n        if (typeof views !== 'undefined') {\n            //translate \"range\" to \"frames\"\n            let frameViews = views.map(view => {\n                if (typeof view.range !== 'undefined') {\n                    //check range \n                    let regend = new RegExp(\"\\\\d+$\"); \n                    let rangeStartName = view.range[0].replace(regend, ''),\n                        rangeEndName = view.range[1].replace(regend, ''),\n                        rangeStart = view.range[0].match(regend),\n                        rangeEnd = view.range[1].match(regend);\n                    if (rangeStartName === rangeEndName) {\n                        view.frames = [];\n                        for (let i = rangeStart; i <= rangeEnd; i++) {\n                            view.frames.push(rangeStartName + i);\n                        }\n                    } else {\n                        view.frames = [view.range[0], view.range[1]];\n                        console.warn('range start and end mismatch');\n                    }\n                }\n                return view;\n            })\n\n            //find the max number of charts in views\n            let maxLen = 0;\n            for (let i = 0; i < frameViews.length; i++) {\n                if (frameViews[i].frames.length > maxLen) {\n                    maxLen = frameViews[i].frames.length;\n                }\n            }\n            for (let i = 0; i < frameViews.length; i++) {\n                if (frameViews[i].frames.length < maxLen) {\n                    let lastItem = frameViews[i].frames[frameViews[i].frames.length - 1];\n                    let numDiff = maxLen - frameViews[i].frames.length;\n                    while (numDiff > 0) {\n                        frameViews[i].frames.push(lastItem);\n                        numDiff--;\n                    }\n                }\n            }\n            this._views = frameViews;\n        }\n    }\n\n    get views() {\n        return this._views;\n    }\n}\n\nFacetSpec.facetType = {\n    row: 'row',\n    col: 'column'\n}\n\nexport default FacetSpec;","import { CanisUtil, Viewport } from \"./util/Util\";\nimport FacetSpec from \"./FacetSpec\";\nimport { globalVar } from './util/GlobalVar.js';\n\nclass ChartSpec {\n    constructor(id, type, source) {\n        this.id = id;\n        this.type = type;\n        this.source = source;\n    }\n\n    static chartPreProcessing(chartSpecs, status) {\n        let inputSpecs = [];\n        let hasError = false;\n        for (let i = 0; i < chartSpecs.length; i++) {\n            let inputSpec = chartSpecs[i];\n            if (typeof inputSpec.start !== 'undefined' && typeof inputSpec.end !== 'undefined') {\n                let startIdx = parseInt(inputSpec.start), endIdx = parseInt(inputSpec.end);\n                if (endIdx < startIdx) {\n                    hasError = true;\n                    status.info = { type: 'error', msg: 'Wrong start and end chart index.', errSpec: JSON.stringify(inputSpecs).replace(/\\s/g, '') };\n                    continue;\n                } else {\n                    let tmpBlocks = inputSpec.source.split('/');\n                    let chartName = typeof inputSpec.id === 'undefined' ? tmpBlocks[tmpBlocks.length - 1] : inputSpec.id;\n                    for (let j = startIdx; j <= endIdx; j++) {\n                        inputSpecs.push({\n                            \"id\": chartName + j,\n                            \"source\": inputSpec.source + j + '.dsvg'\n                        })\n                    }\n                }\n            } else {\n                inputSpecs.push(inputSpec);\n            }\n        }\n        return [inputSpecs, hasError];\n    }\n\n    static loadCharts(chartSpecs, facet, status) {\n        let nameCharts = new Map();\n        ChartSpec.charts = [];\n        let nullCharts = [];\n        let defaultWidth = 0;\n        let defaultHeight = 0;\n        let hasError = false;\n        for (let i = 0; i < chartSpecs.length; i++) {\n            if (chartSpecs[i].type === ChartSpec.CHART_URL) {//load chart with url\n                let xhr = new XMLHttpRequest(),\n                    okStatus = document.location.protocol === \"file:\" ? 0 : 200,\n                    svgContent;\n                xhr.open('GET', chartSpecs[i].source, false);\n                xhr.overrideMimeType(\"text/html;charset=utf-8\");\n                xhr.send(null);\n                if (xhr.status === okStatus) {\n                    let tmpDiv = document.createElement('div');\n                    tmpDiv.innerHTML = xhr.responseText;\n                    svgContent = tmpDiv.children[0];\n                    let viewBoxNums = svgContent.getAttribute('viewBox').split(' ');\n                    defaultWidth = parseFloat(viewBoxNums[2]);\n                    defaultHeight = parseFloat(viewBoxNums[3]);\n                    ChartSpec.charts.push(svgContent);\n                    nameCharts.set(chartSpecs[i].id, ChartSpec.charts.length - 1);\n                } else if (xhr.status === 404) {\n                    nullCharts.unshift(i);\n                    hasError = true;\n                    // console.log('\"source\":' + chartSpecs[i].source);\n                    status.info = { type: 'error', msg: 'Can not find ' + chartSpecs[i].source + ' ! Please check the url.', errSpec: '\"source\":\"' + chartSpecs[i].source.replace(/\\s/g, '') + '\"' };\n                }\n            } else {\n                // console.log('test chart source: ', chartSpecs[i], chartSpecs[i].source, typeof chartSpecs[i].source);\n                const tmpDiv = document.createElement('div');\n                tmpDiv.innerHTML = chartSpecs[i].source;\n                const svgContent = tmpDiv.children[0];\n                let viewBoxNums = svgContent.getAttribute('viewBox').split(' ');\n                defaultWidth = parseFloat(viewBoxNums[2]);\n                defaultHeight = parseFloat(viewBoxNums[3]);\n                ChartSpec.charts.push(svgContent);\n                nameCharts.set(chartSpecs[i].id, ChartSpec.charts.length - 1);\n            }\n        }\n\n        //remove the empty charts \n        for (let i = 0; i < nullCharts.length; i++) {\n            chartSpecs.slice(nullCharts[i], 1);\n        }\n\n        //generate chart facets\n        typeof facet !== 'undefined' ? ChartSpec.facetViews(nameCharts, facet) : this.viewport.setViewport(defaultWidth, defaultHeight);\n\n        return hasError;\n    }\n\n    static removeTransAndMerge() {\n        const that = this;\n        const datumMarkMapping = new Map();\n        for (let i = 0; i < ChartSpec.charts.length; i++) {\n            ChartSpec.charts[i].setAttribute('trans', '0,0');\n            ChartSpec.removeTransitions(ChartSpec.charts[i].children[0], datumMarkMapping);\n        }\n        const datumMarkArr = Array.from(datumMarkMapping).map(item => item[1]);\n        datumMarkArr.forEach(mArr => {\n            mArr.forEach(mId => {\n                that.marksWithSameDatum.set(mId, mArr);\n            })\n        })\n        this.svgChart = ChartSpec.mergeCharts();\n        // console.log('merged chart: ', this.svgChart);\n    }\n\n    static facetViews(nameCharts, facet) {\n        if (facet.views.length > 0) {\n            let chartsToCombine = [];\n            for (let i = 0; i < facet.views[0].frames.length; i++) {\n                let tmpRecorder = [];\n                for (let j = 0; j < facet.views.length; j++) {\n                    let chartName = facet.views[j].frames[i];\n                    if (typeof nameCharts.get(chartName) !== 'undefined') {\n                        tmpRecorder.push(ChartSpec.charts[nameCharts.get(chartName)].cloneNode(true));\n                    } else {\n                        console.warn('chart name ' + chartName + ' is undefined !');\n                    }\n                }\n                if (tmpRecorder.length === facet.views.length) {\n                    chartsToCombine.push(tmpRecorder);\n                }\n            }\n            ChartSpec.combineCharts(facet.type, facet.views.length, chartsToCombine);\n        }\n    }\n\n    static combineCharts(facetType, facetNum, chartsToCombine) {\n        let resultCharts = [],\n            chartMargin = 20,\n            oriWidth = 0, oriHeight = 0,\n            widthAfterFacet = oriWidth,\n            heightAfterFacet = oriHeight;\n        for (let i = 0; i < chartsToCombine.length; i++) {\n            let tmpCharts = chartsToCombine[i];\n            oriWidth = parseFloat(tmpCharts[0].getAttribute('width'));\n            oriHeight = parseFloat(tmpCharts[0].getAttribute('height'));\n            widthAfterFacet = oriWidth;\n            heightAfterFacet = oriHeight;\n            let viewBoxNums = tmpCharts[0].getAttribute('viewBox').split(' ');\n            let viewBoxW = parseFloat(viewBoxNums[2]);\n            let viewBoxH = parseFloat(viewBoxNums[3]);\n\n            let chartTransForm = CanisUtil.getTransformAttrs(tmpCharts[0].children[0]);\n            tmpCharts[0].children[0].setAttribute('transform', 'translate(' + chartTransForm.transNums[0] + ',' + chartTransForm.transNums[1] + ')');\n            switch (facetType) {\n                case FacetSpec.facetType.row:\n                    heightAfterFacet *= tmpCharts.length;\n                    tmpCharts[0].setAttribute('height', oriHeight * tmpCharts.length);\n                    tmpCharts[0].setAttribute('viewBox', '0 0 ' + viewBoxW + ' ' + oriHeight * tmpCharts.length);\n                    break;\n                case FacetSpec.facetType.col:\n                    widthAfterFacet *= tmpCharts.length;\n                    tmpCharts[0].setAttribute('width', oriWidth * tmpCharts.length);\n                    tmpCharts[0].setAttribute('viewBox', '0 0 ' + oriWidth * tmpCharts.length + ' ' + viewBoxH);\n                    break;\n            }\n\n            for (let j = 0; j < tmpCharts.length; j++) {\n                let tmpChart = tmpCharts[j];\n                let tmpMarks = tmpChart.querySelectorAll('.mark');\n                [].forEach.call(tmpMarks, (m) => {\n                    let idNum = parseInt(m.getAttribute('id').substring(4));\n                    m.setAttribute('id', 'mark' + (idNum + j * 100000));\n                    m.classList.add('facet' + j);\n                })\n                if (j > 0) {//put the marks in the following charts to the 1st chart\n                    let chartContentG = tmpChart.children[0];\n                    let chartChildren = chartContentG.children;\n                    for (let m = 0; m < chartChildren.length; m++) {\n                        let tmpDom = chartChildren[m];\n                        let transformAttrs = CanisUtil.getTransformAttrs(tmpDom);\n                        switch (facetType) {\n                            case FacetSpec.facetType.row:\n                                tmpDom.setAttribute('transform', 'translate(' + transformAttrs.transNums[0] + ',' + (transformAttrs.transNums[1] + (oriHeight + chartMargin) * j) + ') ' + 'scale(' + transformAttrs.scaleNum + ')');\n                                break;\n                            case FacetSpec.facetType.col:\n                                tmpDom.setAttribute('transform', 'translate(' + (transformAttrs.transNums[0] + (oriWidth + chartMargin) * j) + ',' + transformAttrs.transNums[1] + ') ' + 'scale(' + transformAttrs.scaleNum + ')');\n                                break;\n                        }\n                        tmpCharts[0].children[0].appendChild(tmpDom);\n                    }\n                }\n            }\n            resultCharts.push(tmpCharts[0]);\n        }\n        ChartSpec.charts = resultCharts;\n        this.viewport.setViewport(widthAfterFacet, heightAfterFacet);\n    }\n\n    static mergeCharts() {\n        let allMarks = new Set();\n        let markStatus = new Map();\n        let markTempletes = new Map();\n        let attrNames = ['x', 'y', 'cx', 'cy', 'x1', 'y1', 'x2', 'y2', 'd', 'r', 'width', 'height', 'textContent', 'fill', 'stroke', 'opacity'];\n        let nullStatus = {};\n        for (let j = 0; j < attrNames.length; j++) {\n            nullStatus[attrNames[j]] = null;\n        }\n        // console.log('current charts to merge: ', ChartSpec.charts);\n\n        for (let i = 0; i < ChartSpec.charts.length; i++) {\n            let tmpChart = ChartSpec.charts[i];\n            let marks = tmpChart.querySelectorAll('.mark');\n            if (marks.length > 0) {\n                [].forEach.call(marks, (m) => {\n                    let markId = m.getAttribute('id');\n\n                    allMarks.add(markId);\n                    let statusObj = {};//status of one mark in chart i\n                    for (let j = 0; j < attrNames.length; j++) {\n                        if (attrNames[j] === 'textContent') {\n                            statusObj[attrNames[j]] = m.innerHTML;\n                        } else {\n                            statusObj[attrNames[j]] = m.getAttribute(attrNames[j]);\n                        }\n                    }\n                    if (typeof markStatus.get(markId) === 'undefined') {\n                        markStatus.set(markId, new Array(ChartSpec.charts.length).fill(nullStatus));\n                    }\n\n                    markStatus.get(markId)[i] = statusObj;\n                    markTempletes.set(markId, m.outerHTML);\n                })\n            }\n        }\n\n        // console.log('mark status used to check changed attrs: ', markStatus);\n\n        //find the changed attributes\n        ChartSpec.changedAttrs = [];\n        let attrNamesCopy = CanisUtil.deepClone(attrNames);\n        markStatus.forEach(function (statusArr, markId) {\n            for (let i = 0; i < attrNamesCopy.length; i++) {\n                let flag = true;\n                let compareStatus;\n                for (let j = 0; j < statusArr.length; j++) {\n                    if (typeof statusArr[j] !== 'undefined') {\n                        compareStatus = statusArr[j];\n                        break;\n                    }\n                }\n                for (let j = 0; j < statusArr.length; j++) {\n                    if (typeof statusArr[j] !== 'undefined') {\n                        if (statusArr[j][attrNamesCopy[i]] !== compareStatus[attrNamesCopy[i]]) {\n                            ChartSpec.changedAttrs.push(attrNamesCopy[i]);\n                            flag = false;\n                            break;\n                        }\n                    }\n                }\n                if (!flag) {\n                    attrNamesCopy.splice(i, 1);\n                    continue;\n                }\n            }\n        })\n\n        //find different cmds if there is d in changedAttrs\n        let diffCmds = new Map();//key:cmd name, value: {cmdIdx, diffAttrIdxs}\n        if (ChartSpec.changedAttrs.indexOf('d') >= 0) {\n            diffCmds = CanisUtil.findDiffCmds(markStatus);\n        }\n        // console.log('changed attributes: ', ChartSpec.changedAttrs);\n\n        //add missing marks to each chart\n        allMarks = Array.from(allMarks);\n        for (let i = 0; i < ChartSpec.charts.length; i++) {\n            for (let j = 0; j < allMarks.length; j++) {\n                if (ChartSpec.charts[i].querySelectorAll('#' + allMarks[j]).length === 0) {//chart i does not have mark j\n                    let markStr = markTempletes.get(allMarks[j]);\n                    let tmpDiv = document.createElement('div');\n                    tmpDiv.innerHTML = markStr;\n                    let mark = tmpDiv.children[0];\n                    let statusObj = {};\n                    //set the changed attributes to the init state\n                    for (let a = 0; a < ChartSpec.changedAttrs.length; a++) {\n                        if (ChartSpec.changedAttrs[a] === 'y' && ChartSpec.changedAttrs.indexOf('height') >= 0) {\n                            let markY = !mark.getAttribute('y') ? 0 : parseFloat(mark.getAttribute('y'));\n                            let markHeight = !mark.getAttribute('height') ? 0 : parseFloat(mark.getAttribute('height'));\n                            let targetValue = markY + markHeight;\n                            mark.setAttribute('y', targetValue);\n                            statusObj.y = targetValue;\n                        } else if (ChartSpec.changedAttrs[a] === 'd') {\n                            let resultD;\n                            if (mark.getAttribute('d')) {\n                                resultD = CanisUtil.setPathDValue(mark.getAttribute('d'), true, 0, 0, diffCmds);\n                            }\n                            mark.setAttribute('d', resultD);\n                            statusObj.d = resultD;\n                        } else if (ChartSpec.changedAttrs[a] === 'textContent') {\n                            mark.innerHTML = '';\n                            statusObj.textContent = '';\n                        } else if (ChartSpec.changedAttrs[a] === 'fill' || ChartSpec.changedAttrs[a] === 'stroke') {\n                            if (typeof mark.getAttribute(ChartSpec.changedAttrs[a]) === 'undefined') {\n                                mark.setAttribute(ChartSpec.changedAttrs[a], '#FFFFFF');\n                            }\n                            statusObj[ChartSpec.changedAttrs[a]] = mark.getAttribute(ChartSpec.changedAttrs[a]);\n                        } else {\n                            if (['x', 'y', 'cx', 'cy', 'x1', 'y1', 'x2', 'y2'].includes(ChartSpec.changedAttrs[a])) {\n                                if (ChartSpec.changedAttrs[a] === 'x2') {\n                                    mark.setAttribute('x2', parseFloat(mark.getAttribute('x1')));\n                                    statusObj['x2'] = parseFloat(mark.getAttribute('x1'));\n                                } else if (ChartSpec.changedAttrs[a] === 'y2') {\n                                    mark.setAttribute('y2', parseFloat(mark.getAttribute('y1')));\n                                    statusObj['y2'] = parseFloat(mark.getAttribute('y1'));\n                                } else {\n                                    statusObj[ChartSpec.changedAttrs[a]] = parseFloat(mark.getAttribute(ChartSpec.changedAttrs[a]));\n                                }\n                            } else {\n                                mark.setAttribute(ChartSpec.changedAttrs[a], 0);\n                                statusObj[ChartSpec.changedAttrs[a]] = 0;\n                            }\n\n                        }\n                    }\n                    markStr = '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"500\" height=\"500\">' + mark.outerHTML + '</svg>';\n                    let parser = new DOMParser();\n                    let svgMark = parser.parseFromString(markStr, \"image/svg+xml\").lastChild.children[0];\n                    ChartSpec.charts[i].querySelector('#chartContent').appendChild(svgMark);\n                    markStatus.get(allMarks[j])[i] = statusObj;\n                }\n\n            }\n        }\n\n        // console.log('changed attrs to recored in data trans: ', ChartSpec.changedAttrs);\n\n        //set data-trans of chart 0\n        ChartSpec.dataTrans = new Map();\n        for (let j = 0; j < allMarks.length; j++) {\n            let statusArr = markStatus.get(allMarks[j]);\n            let dataTransArr = [];\n\n            for (let si = 0; si < statusArr.length; si++) {\n                let tmpStatus = {};\n                for (let a = 0; a < ChartSpec.changedAttrs.length; a++) {\n                    if (['width', 'height', 'r'].includes(ChartSpec.changedAttrs[a])) {\n                        tmpStatus[ChartSpec.changedAttrs[a]] = 100 * statusArr[si][ChartSpec.changedAttrs[a]] / statusArr[0][ChartSpec.changedAttrs[a]];\n                    } else {\n                        tmpStatus[ChartSpec.changedAttrs[a]] = statusArr[si][ChartSpec.changedAttrs[a]];\n                    }\n                }\n                dataTransArr.push(tmpStatus);//mark status in charts\n            }\n            //copy the status of the 1st chart as the init status\n            ChartSpec.dataTrans.set(allMarks[j], dataTransArr);\n            let markDom = ChartSpec.charts[0].querySelector('#' + allMarks[j]);\n            markDom.setAttribute('data-transition', JSON.stringify({ \"dataTrans\": dataTransArr }, null, '\\t'))\n            // console.log('merged mark: ', markDom);\n        }\n\n        return ChartSpec.charts[0];\n    }\n\n    static getBBoxes() {\n        // let svg = document.getElementById('chartContainer').children[0];\n        let svg = document.getElementById('visChart');\n        let marks = svg.querySelectorAll('[id^=\"mark\"]');\n        let bBoxes = new Map();\n        if (marks.length > 0) {\n            [].forEach.call(marks, (m) => {\n                let markId = m.getAttribute('id');\n\n                let bBox;\n                if (m.tagName === 'text') {\n                    bBox = m.getBBox();\n                    bBox.width += 10;\n                } else {\n                    bBox = m.getBBox();\n                }\n                bBoxes.set(markId, bBox);\n            })\n        }\n        return bBoxes;\n    }\n\n    static removeTransitions(t, datumMarkMapping) {\n        //extract fill, stroke and stroke-width out\n        if (typeof t.style.fill !== 'undefined' && t.style.fill) {\n            if (typeof t.getAttribute('fill') === 'undefined' || !t.getAttribute('fill')) {\n                t.setAttribute('fill', t.style.fill);\n            }\n            t.style.fill = null;\n        }\n        if (typeof t.style.stroke !== 'undefined' && t.style.stroke) {\n            if (typeof t.getAttribute('stroke') === 'undefined' || !t.getAttribute('stroke')) {\n                t.setAttribute('stroke', t.style.stroke);\n            }\n            t.style.stroke = null;\n        }\n        if (typeof t.style.strokeWidth !== 'undefined' && t.style.strokeWidth) {\n            if (typeof t.getAttribute('stroke-width') === 'undefined' || !t.getAttribute('stroke-width')) {\n                t.setAttribute('stroke-width', t.style.strokeWidth);\n            }\n            t.style.strokeWidth = null;\n        }\n        if (t.getAttribute('stroke') === 'none') {\n            t.setAttribute('stroke-width', 0);\n        }\n\n        let tr = t.getAttribute('transform');\n        let parentTrans = t.parentNode.getAttribute('trans').split(',');\n        if (t.classList.contains('mark')) {\n            const dataDatumAttrValueStr = t.getAttribute('data-datum');\n            let dataDatumAttrValue = JSON.parse(dataDatumAttrValueStr);\n            if (Array.isArray(dataDatumAttrValue)) {\n                dataDatumAttrValue = dataDatumAttrValue[0];\n            }\n            //get mshape using the type in class like Shape1, Symbol1\n            const tClass = t.getAttribute('class');\n            const blocks = tClass.split(' ');\n            let shapeName = '';\n            for (let i = 0, len = blocks.length; i < len; i++) {\n                if (blocks[i] === 'mark') {\n                    shapeName = blocks[i + 1];\n                    break;\n                }\n            }\n            dataDatumAttrValue['mShape'] = shapeName;\n            let isNonDataMark = false;\n            Array.from(t.classList).forEach((c) => {\n                c = c.toLowerCase();\n                if (c.includes('axis') || c.includes('legend') || c.includes('title')) {\n                    // isNonDataMark = true;\n                }\n            })\n            const tmpId = t.getAttribute('id');\n            if (isNonDataMark) {\n                this.nonDataMarkDatum.set(tmpId, dataDatumAttrValue);\n            } else {\n                this.dataMarkDatum.set(tmpId, dataDatumAttrValue);\n                let pureDatum = {};\n                Object.keys(dataDatumAttrValue).forEach(key => {\n                    if (key.indexOf('_') !== 0) {\n                        pureDatum[key] = dataDatumAttrValue[key];\n                    }\n                })\n                pureDatum.mShape = '';//ignore the difference of shape, this is for alignment\n                let pureDatumStr = JSON.stringify(pureDatum);\n                if (typeof datumMarkMapping.get(pureDatumStr) === 'undefined') {\n                    datumMarkMapping.set(pureDatumStr, []);\n                }\n                datumMarkMapping.get(pureDatumStr).push(tmpId);\n            }\n        }\n\n        if (t.classList.contains('axis') || t.classList.contains('legend')) {\n            const tmpDataDatum = JSON.parse(t.getAttribute('data-datum'));\n            if (Array.isArray(tmpDataDatum)) {\n                tmpDataDatum = tmpDataDatum[0];\n            }\n            if (t.classList.contains('axis')) {\n                if (typeof this.chartUnderstanding[tmpDataDatum.position] === 'undefined') {\n                    this.chartUnderstanding[tmpDataDatum.position] = [];\n                }\n                this.chartUnderstanding[tmpDataDatum.position].push('position');\n            } else if (t.classList.contains('legend')) {\n                for (let channel in tmpDataDatum) {\n                    if (typeof this.chartUnderstanding[tmpDataDatum[channel]] === 'undefined') {\n                        this.chartUnderstanding[tmpDataDatum[channel]] = [];\n                    }\n                    this.chartUnderstanding[tmpDataDatum[channel]].push(channel);\n                }\n            }\n        }\n\n        if (tr) {\n            tr = tr.replace(/translate|scale|rotate|\\s/g, (m) => {\n                return m === ' ' ? '' : '@' + m;\n            });\n            tr = tr.replace(/(^@*)|(@*$)/g, '').split('@');\n            let scaleStr = '', transStr = '';\n            for (let i = 0; i < tr.length; i++) {\n                if (tr[i].indexOf('translate') >= 0) {\n                    transStr = tr[i];\n                } else if (tr[i].indexOf('scale') >= 0) {\n                    scaleStr = tr[i];\n                }\n            }\n            let transPosiStr = transStr.replace(/translate\\(| |\\)/g, '').split(',');\n            t.setAttribute('transform', scaleStr);\n            if (t.tagName === 'g') {\n                t.setAttribute('trans', (parseFloat(transPosiStr[0]) + parseFloat(parentTrans[0])) + ',' + (parseFloat(transPosiStr[1]) + parseFloat(parentTrans[1])));\n            } else {\n                CanisUtil.transShape(t, parseFloat(transPosiStr[0]) + parseFloat(parentTrans[0]), parseFloat(transPosiStr[1]) + parseFloat(parentTrans[1]));\n            }\n        } else {\n            if (t.tagName === 'g') {\n                t.setAttribute('trans', parentTrans.join(','));\n            } else {\n                CanisUtil.transShape(t, parseFloat(parentTrans[0]), parseFloat(parentTrans[1]));\n            }\n        }\n        if (t.children.length > 0) {\n            for (let i = 0; i < t.children.length; i++) {\n                ChartSpec.removeTransitions(t.children[i], datumMarkMapping);\n            }\n        }\n    }\n\n    static addLottieMarkLayers(t) {\n        if (t.tagName !== 'g' && t.tagName !== 'svg') {\n            if (t.classList.contains('mark')) {\n                globalVar.markLayers.set(t.getAttribute('id'), globalVar.jsMovin.addLayer(t));\n            } else {\n                globalVar.jsMovin.addLayer(t)\n            }\n        }\n        if (t.children.length > 0) {\n            for (let i = 0; i < t.children.length; i++) {\n                ChartSpec.addLottieMarkLayers(t.children[i]);\n            }\n        }\n\n    }\n\n}\n\nChartSpec.CHART_URL = 'url';\nChartSpec.CHART_CONTENT = 'content';\nChartSpec.charts = [];\nChartSpec.attrs = ['id', 'source', 'start', 'end'];\nChartSpec.changedAttrs = [];\nChartSpec.viewport = new Viewport();\nChartSpec.dataTrans = new Map();\nChartSpec.svgChart;\nChartSpec.chartUnderstanding = { mShape: ['shape'] };\nChartSpec.dataMarkDatum = new Map();\nChartSpec.marksWithSameDatum = new Map();\nChartSpec.nonDataMarkDatum = new Map();\n\nexport default ChartSpec;","import ChartSpec from './ChartSpec.js';\nimport ActionSpec from './ActionSpec.js';\nimport GroupingSpec from './GroupingSpec.js';\nimport TimingSpec from './TimingSpec.js';\nimport { CanisUtil } from './util/Util.js';\nimport { globalVar } from './util/GlobalVar.js';\nimport { getBoundingBox } from 'jsmovin/bin/helper';\nimport { LayerFactory } from 'jsmovin';\n\nclass Animation extends TimingSpec {\n    constructor() {\n        super();\n        this._id;\n        this.chartIdx;\n        this.selector;\n        this._align = Animation.alignTarget.object;\n        this.grouping = new GroupingSpec();\n        this.actions = [];\n\n        //save all dom attrs of the marks selected in this animation\n        // Animation.domMarks = new Map();//key: markId, value: dom attrs\n        this.animationStartTime = 1000000;\n        this.animationEndTime = 0;\n        this.root = {};\n        this.leaves = [];\n        this.allMarksThisAni = [];\n        this.marksInOrder = [];\n        this.anisAligned = [];\n        this.alignOnData = false;\n    }\n\n    /***** getters and setters *****/\n    set id(id) {\n        if (typeof this._id === 'undefined') {\n            if (typeof id !== 'undefined') {\n                this._id = id;\n            } else {//add default id\n                this._id = 'ani' + Animation.aniIdx;\n                Animation.aniIdx++;\n            }\n        } else {\n            // console.log('animation ' + this._id + ' already has an id.');\n        }\n    }\n\n    get id() {\n        return this._id;\n    }\n\n    set align(align) {\n        if (typeof align !== 'undefined' && typeof align === 'object') {\n            this._align = align;\n        }\n    }\n\n    get align() {\n        return this._align;\n    }\n    /***** end getters and setters *****/\n\n    replaceConstants(constants, status = {}) {\n        //replace constants in animation timing\n        this.replaceOffsetConst(constants, status);\n\n        //replace constants in grouping timing\n        if (this.grouping !== 'undefined') {\n            this.grouping.replaceDelayConst(constants, status);\n        }\n\n        //replace constants in action timing\n        this.actions.forEach(a => {\n            a.replaceOffsetConst(constants, status);\n            a.replaceDurationConst(constants, status);\n        })\n    }\n\n    /**\n     * translate from json object to Animation object\n     * @param {JSON obj} animationJson \n     */\n    translate(animationJson, usedChangedAttrs, updating, status={}) {\n        this.chartIdx = animationJson.chartIdx;\n        if (!updating) {\n            this.selector = animationJson.selector;//init selector\n        }\n        this.id = animationJson.id;\n        this.reference = animationJson.reference;\n        this.offset = animationJson.offset;\n        this.align = animationJson.align;\n        if (typeof animationJson.grouping !== 'undefined') {//init grouping\n            this.grouping.initGrouping(animationJson.grouping);\n        }\n\n        //translate action specs in the animation Json\n        if (typeof animationJson.effects !== 'undefined') {//init actions\n            if (updating) {\n                this.actions = [];\n            }\n            for (let i = 0, actionJson; i < animationJson.effects.length | (actionJson = animationJson.effects[i]); i++) {\n                actionJson.chartIdx = animationJson.chartIdx;\n                let visAttrActionJsonArr = ActionSpec.transToVisualAttrAction(actionJson, animationJson.chartIdx, usedChangedAttrs, ChartSpec.dataTrans, status);//translate templates to no-templates\n                // console.log('translated visual action: ', visAttrActionJsonArr);\n                for (let j = 0, visAttrActionJson; j < visAttrActionJsonArr.length | (visAttrActionJson = visAttrActionJsonArr[j]); j++) {\n                    let tmpAction = new ActionSpec();\n                    tmpAction.initAction(visAttrActionJson);\n                    this.actions.push(tmpAction);\n                }\n            }\n        }\n\n    }\n\n    /**\n     * calculate timing for each mark;\n     * @param {Array} markIds : array of mark ids\n     * @param {Animation} lastAnimation : last animation in order to calculate time\n     */\n    // calAniTime(markIds, lastAnimation) {\n    calAniTime(markIds) {\n        let lastAnimation, aligning = false;\n        if (typeof this.align !== 'undefined') {\n            Animation.animations.forEach((value, key) => {\n                if (this.align.target === value.id) {\n                    lastAnimation = value;\n                    if (this.align.type === Animation.alignTarget.withEle) {\n                        aligning = true;\n                        this._grouping = value.grouping;\n                        // this.grouping = value.grouping;\n                    }\n\n                }\n            })\n        }\n        if (typeof lastAnimation != 'undefined') {\n            lastAnimation.anisAligned.push(`${this.chartIdx}_${this.selector}`);\n        }\n\n        let that = this;\n        //check whether the durations of the actions are set with the data variables\n        let durationAttrValues = new Map();\n        for (let i = 0, markId; i < markIds.length | (markId = markIds[i]); i++) {\n            let tmpAttrValues = new Map();\n            for (let j = 0, action; j < this.actions.length | (action = this.actions[j]); j++) {\n                if (typeof action.duration === 'object') {\n                    let datum = Animation.domMarks.get(markId)['data-datum'];\n                    let value = parseFloat(datum[action.duration.field]);\n                    let minDuration = typeof action.duration.minDuration == 'undefined' ? 300 : action.duration.minDuration;\n                    tmpAttrValues.set(action.duration.field, [value, minDuration]);\n                }\n            }\n            durationAttrValues.set(markId, tmpAttrValues);\n        }\n        //calculate the duration of all actions\n        let [actionsDurations, minValueEachAttr, processedActions] = ActionSpec.calActionDuration(this.actions, durationAttrValues, Animation.domMarks);\n        //construct tree while order the marks according to \"sort\"\n        // console.log('current groupig: ', this.grouping);\n        let tmpMarksInOrder = [], leavesOfAnimation = [];\n        if (aligning) {\n            [tmpMarksInOrder, leavesOfAnimation] = this._grouping.arrangeOrder(markIds, Animation.domMarks, this.root, this.reference, aligning);\n        } else {\n            [tmpMarksInOrder, leavesOfAnimation] = this.grouping.arrangeOrder(markIds, Animation.domMarks, this.root, this.reference, aligning);\n        }\n        if (aligning) {\n            this.root.children = leavesOfAnimation;\n        }\n        // console.log('after grouping: ', this.grouping);\n        this.marksInOrder = tmpMarksInOrder;\n        this.leaves = leavesOfAnimation;\n\n        let markAni = new Map();//the time specs and action specs of each mark, for now using Map, check later to see whether it is worthy to change to Array\n        for (let i = 0, markId; i < this.marksInOrder.length | (markId = this.marksInOrder[i]); i++) {\n            //record visual status of all marks\n            let tmpObj = {};\n            for (let j = 0, vAttr; j < Animation.visualAttrs.length | (vAttr = Animation.visualAttrs[j]); j++) {\n                if (typeof Animation.domMarks.get(markId)[vAttr] === 'undefined') {\n                    switch (vAttr) {\n                        case 'opacity'://give default opacity 1\n                            tmpObj[vAttr] = 1;\n                            break;\n                        case 'width'://use the width of the bounding box \n                            tmpObj[vAttr] = Animation.domMarks.get(markId)['bbWidth'];\n                            break;\n                        case 'height'://use the height of the bounding box \n                            tmpObj[vAttr] = Animation.domMarks.get(markId)['bbHeight'];\n                            break;\n                        case 'x'://use the position x of the bounding box \n                            tmpObj[vAttr] = Animation.domMarks.get(markId)['bbX'];\n                            break;\n                        case 'y'://use the position y of the bounding box \n                            tmpObj[vAttr] = Animation.domMarks.get(markId)['bbY'];\n                            break;\n                        case 'cx'://use the center of the bounding box \n                            if (typeof Animation.domMarks.get(markId)['cx'] !== 'undefined') {\n                                tmpObj[vAttr] = Animation.domMarks.get(markId)['cx'];\n                            } else {\n                                tmpObj[vAttr] = Animation.domMarks.get(markId)['bbX'] + Animation.domMarks.get(markId)['bbWidth'] / 2;\n                            }\n                            break;\n                        case 'cy'://use the center of the bounding box \n                            if (typeof Animation.domMarks.get(markId)['cy'] !== 'undefined') {\n                                tmpObj[vAttr] = Animation.domMarks.get(markId)['cy'];\n                            } else {\n                                tmpObj[vAttr] = Animation.domMarks.get(markId)['bbY'] + Animation.domMarks.get(markId)['bbHeight'] / 2;\n                            }\n                            break;\n                        case 'innerRadius'://give default inner radius 0\n                            if (typeof Animation.domMarks.get(markId)['innerRadius'] !== 'undefined') {\n                                tmpObj[vAttr] = Animation.domMarks.get(markId)['innerRadius'];\n                            } else {\n                                tmpObj[vAttr] = 0\n                            }\n                            break;\n                        case 'outterRadius'://use half of the diagonal line of the bounding box\n                            if (typeof Animation.domMarks.get(markId)['outterRadius'] !== 'undefined') {\n                                tmpObj[vAttr] = Animation.domMarks.get(markId)['outterRadius'];\n                            } else {\n                                tmpObj[vAttr] = Math.sqrt(Math.pow(Animation.domMarks.get(markId)['bbWidth'] / 2, 2) + Math.pow(Animation.domMarks.get(markId)['bbHeight'] / 2, 2)) + 1;\n                            }\n                            break;\n                        case 'startAngle':\n                            if (typeof Animation.domMarks.get(markId)['startAngle'] !== 'undefined') {\n                                tmpObj[vAttr] = Animation.domMarks.get(markId)['startAngle'];\n                            } else {\n                                tmpObj[vAttr] = 0;\n                            }\n                            break;\n                        case 'endAngle':\n                            if (typeof Animation.domMarks.get(markId)['endAngle'] !== 'undefined') {\n                                tmpObj[vAttr] = Animation.domMarks.get(markId)['endAngle'];\n                            } else {\n                                tmpObj[vAttr] = Math.PI * 2;\n                            }\n                            break;\n                    }\n                } else {\n                    tmpObj[vAttr] = Animation.domMarks.get(markId)[vAttr];\n                }\n            }\n            if (typeof Animation.finalStatus.get(markId) === 'undefined') {\n                Animation.finalStatus.set(markId, []);\n            }\n            Animation.finalStatus.get(markId).push(tmpObj);\n\n            markAni.set(markId, {\n                'startTime': 0, //start time of this mark \n                'totalDuration': actionsDurations.get(markId), //total duration of all the actions of this mark\n                'actionAttrs': [] //action attributes of this mark\n            });\n        }\n        //calculate time according to grouping\n        let timeDiff = new Map();\n        if (typeof this.align !== 'undefined') {\n            switch (this.align.type) {\n                case Animation.alignTarget.withEle:\n                    timeDiff = this.calTimeAsEle(markAni, lastAnimation);\n                    break;\n                case Animation.alignTarget.withObj:\n                    timeDiff = this.calTimeAsObj(markAni, lastAnimation);\n                    break;\n            }\n        } else {//first animation unit\n            timeDiff = this.calTimeAsObj(markAni, lastAnimation);\n        }\n\n        markAni.forEach(function (value, markId) {\n            let tmpObj = { 'startTime': value.startTime + timeDiff.get(markId), 'totalDuration': value.totalDuration, 'actionAttrs': [] };\n            that.updateAniStartAndEndTime(tmpObj);\n            for (let i = 0, a; i < processedActions.length | (a = processedActions[i]); i++) {\n                let tmpActionSpec = new ActionSpec();\n                let keys = Object.keys(a);\n                for (let j = 0, attr; j < keys.length | (attr = keys[j]); j++) {\n                    tmpActionSpec[attr] = a[attr];\n                    if (attr === '_duration' && typeof a[attr] === 'object') {\n                        let datum = Animation.domMarks.get(markId)['data-datum'];\n                        let minAttrValue = minValueEachAttr.get(a[attr].field);\n                        tmpActionSpec[attr] = a[attr].minDuration * parseFloat(datum[a[attr].field]) / minAttrValue;\n                    } else if (attr === 'offsetStart') {\n                        tmpActionSpec[attr] = a[attr].get(markId);\n                    }\n                }\n                //if the animation type is custom then judge if the attribute in the action about to add is a valid property of the target mark\n                if (tmpActionSpec.animationType === ActionSpec.targetAnimationType.custom) {\n                    if (CanisUtil.checkValidProp(Animation.domMarks.get(markId)['tagName'], tmpActionSpec.attribute[0].attrName)) {\n                        tmpObj.actionAttrs.push(tmpActionSpec);\n                    }\n                } else {\n                    tmpObj.actionAttrs.push(tmpActionSpec);\n                }\n            }\n\n            markAni.set(markId, tmpObj);\n        })\n\n        markAni.forEach(function (value, markId) {\n            //update the start time of actions\n            let frameTimePoint = 0;\n            for (let i = 0; i < value.actionAttrs.length; i++) {\n                value.actionAttrs[i].startTime = value.startTime + value.actionAttrs[i].offsetStart;//absolute start time\n                if (value.actionAttrs[i].startTime + value.actionAttrs[i].duration > frameTimePoint) {\n                    frameTimePoint = value.actionAttrs[i].startTime + value.actionAttrs[i].duration;\n                }\n            }\n            if (typeof Animation.allMarkAni.get(markId) === 'undefined') {\n                Animation.allMarkAni.set(markId, value);\n            } else {//merge animation specs for the same mark\n                let currentStartTime = Animation.allMarkAni.get(markId).startTime;\n                let currentEndTime = currentStartTime + Animation.allMarkAni.get(markId).totalDuration;\n                Animation.allMarkAni.get(markId).startTime = currentStartTime < value.startTime ? currentStartTime : value.startTime;\n                let tmpEndTime = value.startTime + value.totalDuration;\n                currentEndTime = currentEndTime > tmpEndTime ? currentEndTime : tmpEndTime;\n                Animation.allMarkAni.get(markId).totalDuration = currentEndTime - Animation.allMarkAni.get(markId).startTime;\n                Animation.allMarkAni.get(markId).actionAttrs = [...Animation.allMarkAni.get(markId).actionAttrs, ...value.actionAttrs];\n            }\n        })\n    }\n\n    calTimeAsEle(markAni, lastAnimation) {\n        const that = this;\n        this.root.align = this.align;\n        //record the start time and duration of the leaves in last animation\n        lastAnimation.leaves.forEach(l => {\n            const marksInLeaf = l.marks;\n            l.leafStart = 100000;\n            l.leafEnd = 0;\n            marksInLeaf.forEach(mId => {\n                const tmpMAni = Animation.allMarkAni.get(mId);\n                tmpMAni.startTime < l.leafStart ? l.leafStart = tmpMAni.startTime : null;\n                (tmpMAni.startTime + tmpMAni.totalDuration) > l.leafEnd ? l.leafEnd = (tmpMAni.startTime + tmpMAni.totalDuration) : null;\n            })\n        })\n        //check whether can align based on data\n        // let alignOnData = false;\n        let leafMapping = new Map();//key: leaf index in current animation, value: index of the corresponding leaf in last animation\n        lastAnimation.leaves.forEach((l, leafIdx) => {\n            let marksSameDatum = [];\n            l.marks.forEach(mId => {\n                if (typeof ChartSpec.marksWithSameDatum.get(mId) !== 'undefined') {\n                    marksSameDatum.push(...ChartSpec.marksWithSameDatum.get(mId));\n                }\n            })\n            marksSameDatum = [...new Set(marksSameDatum)];\n            // console.log('marks same datum: ', marksSameDatum, that.leaves);\n            for (let i = 0, len = that.leaves.length, tmpL; i < len | (tmpL = that.leaves[i]); i++) {\n                if (typeof leafMapping.get(i) === 'undefined') {\n                    leafMapping.set(i, []);\n                }\n                // console.log('checking: ', marksSameDatum, tmpL.marks);\n                if (CanisUtil.arrIsContained(marksSameDatum, tmpL.marks)) {\n                    // console.log('contained');\n                    leafMapping.get(i).push(leafIdx);\n                    that.alignOnData = true;\n                }\n            }\n        })\n        // console.log('whether align on data: ', this, this.alignOnData, this.leaves);\n        if (!this.alignOnData) {//align one after another\n            const leafNum = this.leaves.length > lastAnimation.leaves.length ? this.leaves.length : lastAnimation.leaves.length;\n            let ofstTime = 0;//record the time offset for each leaf of the last \n            for (let i = 0; i < leafNum; i++) {\n                let currentLeafLastAni = lastAnimation.leaves[i];\n                let lastleafCurrentAni = this.leaves[i - 1];\n                let currentLeafCurrentAni = this.leaves[i];\n                let alignToId = '', alignWithId = '';\n                //update timig of the current leaf from current animation\n                if (typeof currentLeafCurrentAni !== 'undefined') {\n                    alignWithId = currentLeafCurrentAni.id;\n                    if (typeof currentLeafLastAni === 'undefined') {//cannot find the correspnding leaf from last animation\n                        if (typeof lastleafCurrentAni !== 'undefined') {//align with last leaf\n                            //find start and end of last leaf\n                            lastleafCurrentAni.leafStart = 100000;\n                            lastleafCurrentAni.leafEnd = 0;\n                            lastleafCurrentAni.marks.forEach(mId => {\n                                const tmpMAni = Animation.allMarkAni.get(mId);\n                                tmpMAni.startTime < lastleafCurrentAni.leafStart ? lastleafCurrentAni.leafStart = tmpMAni.startTime : null;\n                                (tmpMAni.startTime + tmpMAni.totalDuration) > lastleafCurrentAni.leafEnd ? lastleafCurrentAni.leafEnd = (tmpMAni.startTime + tmpMAni.totalDuration) : null;\n                            })\n\n                            ofstTime = this.calOfstTimeForLastAni(currentLeafCurrentAni, lastleafCurrentAni, markAni);\n                        }\n                    } else {//align with the corresponding leaf from last animation\n                        currentLeafCurrentAni.alignTo = currentLeafLastAni.id;\n                        if (typeof currentLeafLastAni.alignWithLeaves === 'undefined') {\n                            currentLeafLastAni.alignWithLeaves = [];\n                        }\n                        currentLeafLastAni.alignWithLeaves.push(currentLeafCurrentAni);\n                        alignToId = currentLeafLastAni.id;\n                        ofstTime = this.calOfstTimeForLastAni(currentLeafCurrentAni, currentLeafLastAni, markAni);\n                    }\n                } else {\n                    ofstTime = 0;\n                }\n\n                //update timing of the current leaf from last animation\n                // const tmpAniId = `${this.chartIdx}_#${this.marksInOrder.join(', #')}`;\n                const tmpAniId = `${this.chartIdx}_${this.selector}`;\n                // console.log('align on nondata: aniId', tmpAniId);\n                this.updateLastAnimationTiming(lastAnimation, currentLeafLastAni, ofstTime, alignToId, alignWithId, tmpAniId);\n                // this.updateLastAnimationTiming(lastAnimation, currentLeafLastAni, ofstTime, alignToId, alignWithId, this.id);\n            }\n        } else {\n            const leafNum = this.leaves.length;\n            let ofstTime = 0;//record the time offset for each leaf of the last \n            for (let i = 0; i < leafNum; i++) {\n                let currentLeafLastAni = lastAnimation.leaves[leafMapping.get(i)[0]];\n                let lastleafCurrentAni = this.leaves[i - 1];\n                let currentLeafCurrentAni = this.leaves[i];\n                // console.log('align realion: ', currentLeafCurrentAni, lastleafCurrentAni, currentLeafLastAni);\n                let alignToId = '', alignWithId = '';\n                //update timig of the current leaf from current animation\n                if (typeof currentLeafCurrentAni !== 'undefined') {\n                    alignWithId = currentLeafCurrentAni.id;\n                    if (typeof currentLeafLastAni === 'undefined') {//cannot find the correspnding leaf from last animation\n                        if (typeof lastleafCurrentAni !== 'undefined') {//align with last leaf\n                            //find start and end of last leaf\n                            lastleafCurrentAni.leafStart = 100000;\n                            lastleafCurrentAni.leafEnd = 0;\n                            lastleafCurrentAni.marks.forEach(mId => {\n                                const tmpMAni = markAni.get(mId);\n                                tmpMAni.startTime < lastleafCurrentAni.leafStart ? lastleafCurrentAni.leafStart = tmpMAni.startTime : null;\n                                (tmpMAni.startTime + tmpMAni.totalDuration) > lastleafCurrentAni.leafEnd ? lastleafCurrentAni.leafEnd = (tmpMAni.startTime + tmpMAni.totalDuration) : null;\n                            })\n\n                            ofstTime = this.calOfstTimeForLastAni(currentLeafCurrentAni, lastleafCurrentAni, markAni);\n                        }\n                    } else {//align with the corresponding leaf from last animation\n                        currentLeafCurrentAni.alignTo = currentLeafLastAni.id;\n                        if (typeof currentLeafLastAni.alignWithLeaves === 'undefined') {\n                            currentLeafLastAni.alignWithLeaves = [];\n                        }\n                        currentLeafLastAni.alignWithLeaves.push(currentLeafCurrentAni);\n                        alignToId = currentLeafLastAni.id;\n                        ofstTime = this.calOfstTimeForLastAni(currentLeafCurrentAni, currentLeafLastAni, markAni);\n                    }\n                } else {\n                    ofstTime = 0;\n                }\n\n                //update timing of the current leaf from last animation\n                // const tmpAniId = `${this.chartIdx}_#${this.marksInOrder.join(', #')}`;\n                const tmpAniId = `${this.chartIdx}_${this.selector}`;\n                // console.log('align on data: aniId', tmpAniId);\n                this.updateLastAnimationTiming(lastAnimation, currentLeafLastAni, ofstTime, alignToId, alignWithId, tmpAniId);\n                // this.updateLastAnimationTiming(lastAnimation, currentLeafLastAni, ofstTime, alignToId, alignWithId, this.id);\n            }\n        }\n\n        return this.calAniOffset(markAni, undefined, Animation.alignTarget.withEle);\n    }\n\n    calOfstTimeForLastAni(leaf, leafToAlign, markAni) {\n        // console.log('cal offset time: ', leaf, leafToAlign);\n        let tmpOfstTime = 0;\n        leaf.start = 1000000;\n        leaf.end = 0;\n        let mStartTime = 0;\n        switch (this.reference) {\n            case TimingSpec.timingRef.previousStart:\n                mStartTime = leafToAlign.leafStart;\n                leaf.marks.forEach(mId => {\n                    const mDuration = markAni.get(mId).totalDuration;\n                    markAni.get(mId).startTime = mStartTime;\n                    if (mStartTime + mDuration - leafToAlign.leafEnd > tmpOfstTime) {\n                        tmpOfstTime = mStartTime + mDuration - leafToAlign.leafEnd;\n                    }\n                    if (mStartTime < leaf.start) {\n                        leaf.start = mStartTime;\n                    }\n                    if (mStartTime + mDuration > leaf.end) {\n                        leaf.end = mStartTime + mDuration;\n                    }\n                })\n                return tmpOfstTime;\n            case TimingSpec.timingRef.previousEnd:\n                mStartTime = leafToAlign.leafEnd;\n                leafToAlign.alignWithLeaves.forEach(l => {\n                    if (typeof l.leafEnd !== 'undefined') {\n                        if (l.leafEnd > mStartTime) {\n                            mStartTime = l.leafEnd;\n                        }\n                    } else {\n                        l.marks.forEach(mId => {\n                            if (typeof Animation.allMarkAni.get(mId) !== 'undefined') {\n                                const mEndTime = Animation.allMarkAni.get(mId).startTime + Animation.allMarkAni.get(mId).totalDuration;\n                                if (mEndTime > mStartTime) {\n                                    mStartTime = mEndTime;\n                                }\n                            }\n                        })\n                    }\n                })\n\n                leaf.marks.forEach(mId => {\n                    const mDuration = markAni.get(mId).totalDuration;\n                    markAni.get(mId).startTime = mStartTime;\n                    if (mStartTime + mDuration > tmpOfstTime) {\n                        tmpOfstTime = mDuration;\n                    }\n                    if (mStartTime < leaf.start) {\n                        leaf.start = mStartTime;\n                    }\n                    if (mStartTime + mDuration > leaf.end) {\n                        leaf.end = mStartTime + mDuration;\n                    }\n                })\n                return tmpOfstTime;\n            default:\n        }\n    }\n\n    updateLastAnimationTiming(lastAnimation, currentLeafLastAni, ofstTime, alignToId, alignWithId, alignWithAniId, keepUpdating = true) {\n        const that = this;\n        // let tmpAlignToId = '';\n        if (alignToId !== '') {\n            lastAnimation.leaves.forEach(l => {\n                if (l.id === alignToId) {\n                    if (typeof l.alignWith === 'undefined') {\n                        l.alignWith = [];\n                    }\n                    l.alignWith.push(alignWithAniId);\n                    if (typeof l.alignWithIds === 'undefined') {\n                        l.alignWithIds = [];\n                    }\n                    l.alignWithIds.push(alignWithId);\n                }\n            })\n        }\n        if (typeof currentLeafLastAni !== 'undefined') {\n            const that = this;\n            //find the leaves from last animation with the same start time as currentLeafLastAni\n            lastAnimation.leaves.forEach(l => {\n                let currentLeafLastAniStart = currentLeafLastAni.leafStart;\n                if (typeof currentLeafLastAniStart === 'undefined') {\n                    currentLeafLastAniStart = 10000000;\n                    currentLeafLastAni.marks.forEach(mId => {\n                        if (Animation.allMarkAni.get(mId).startTime < currentLeafLastAniStart) {\n                            currentLeafLastAniStart = Animation.allMarkAni.get(mId).startTime;\n                        }\n                    })\n                }\n                if (typeof l.leafStart !== 'undefined') {\n                    if (l.leafStart > currentLeafLastAniStart) {\n                        let tmpLeafStart = 100000;\n                        l.marks.forEach(mId => {\n                            Animation.allMarkAni.get(mId).startTime += ofstTime;\n                            if (Animation.allMarkAni.get(mId).startTime < tmpLeafStart) {\n                                tmpLeafStart = Animation.allMarkAni.get(mId).startTime;\n                            }\n                            if (Animation.allMarkAni.get(mId).startTime + Animation.allMarkAni.get(mId).totalDuration > l.leafEnd) {\n                                l.leafEnd = Animation.allMarkAni.get(mId).startTime + Animation.allMarkAni.get(mId).totalDuration\n                            }\n                            if (l.leafEnd > lastAnimation.animationEndTime) {\n                                lastAnimation.animationEndTime = l.leafEnd;\n                            }\n                            Animation.allMarkAni.get(mId).actionAttrs.forEach(a => {\n                                a.startTime += ofstTime;\n                            })\n                        })\n                        l.leafStart = tmpLeafStart;\n                    }\n                } else {\n                    l.marks.forEach(mId => {\n                        if (Animation.allMarkAni.get(mId).startTime > currentLeafLastAniStart) {\n                            Animation.allMarkAni.get(mId).startTime += ofstTime;\n                            if (Animation.allMarkAni.get(mId).startTime + Animation.allMarkAni.get(mId).totalDuration > lastAnimation.animationEndTime) {\n                                lastAnimation.animationEndTime = Animation.allMarkAni.get(mId).startTime + Animation.allMarkAni.get(mId).totalDuration;\n                            }\n                            Animation.allMarkAni.get(mId).actionAttrs.forEach(a => {\n                                a.startTime += ofstTime;\n                            })\n                        }\n                    })\n                }\n\n            })\n            //check whether there are other anis aligned to this one\n            if (lastAnimation.anisAligned.length > 0) {\n                lastAnimation.anisAligned.forEach(aniId => {\n                    if (aniId !== `${that.chartIdx}_${that.selector}`) {\n                        const aniAligned = Animation.animations.get(aniId);\n                        let currentleafAlignedAni;\n                        for (let i = 0, len = currentLeafLastAni.alignWithLeaves.length; i < len; i++) {\n                            let tmpLeaf = currentLeafLastAni.alignWithLeaves[i];\n                            for (let j = 0, len2 = aniAligned.leaves.length; j < len2; j++) {\n                                if (tmpLeaf.id === aniAligned.leaves[j].id) {\n                                    currentleafAlignedAni = tmpLeaf;\n                                    break;\n                                }\n                            }\n                            if (typeof currentleafAlignedAni !== 'undefined') {\n                                break;\n                            }\n                        }\n                        that.updateLastAnimationTiming(aniAligned, currentleafAlignedAni, ofstTime, '', '', '', false);\n                    }\n                })\n            }\n\n            //check whether need to keep updating \n            if (typeof lastAnimation.align !== 'undefined' && keepUpdating) {\n                if (lastAnimation.align.type === Animation.alignTarget.withEle) {\n                    let tmpAni;\n                    Animation.animations.forEach((value, key) => {\n                        if (lastAnimation.align.target === value.id) {\n                            tmpAni = value;\n                        }\n                    })\n                    that.updateLastAnimationTiming(tmpAni, currentLeafLastAni, ofstTime, '', '', '');\n                }\n            }\n        }\n    }\n\n    calTimeAsObj(markAni, lastAnimation) {\n        this.grouping.calTimeWithTree(this.root, -1, -1, markAni);\n        this.root.timingRef = this.reference;\n        this.root.offset = this.offset;\n        this.root.align = this.align;\n        this.root.aniId = this.id;\n        //update time according to the time spec of animation\n        return this.calAniOffset(markAni, lastAnimation, Animation.alignTarget.withObj);\n    }\n\n    calAniOffset(markAni, lastAnimation, type) {\n        let tmpAllStart = 10000;\n        markAni.forEach(function (value, markId) {\n            if (value.startTime < tmpAllStart) {\n                tmpAllStart = value.startTime;\n            }\n        })\n        if (type === Animation.alignTarget.withEle) {\n            return this.calELeOffsetTime(Animation.domMarks);\n        } else {\n            return typeof lastAnimation === 'undefined' ? this.calOffsetTime(0, 0, tmpAllStart, Animation.domMarks) : this.calOffsetTime(lastAnimation.animationStartTime, lastAnimation.animationEndTime, tmpAllStart, Animation.domMarks);\n        }\n    }\n\n    updateAniStartAndEndTime(aniObj) {\n        if (aniObj.startTime < this.animationStartTime) {\n            this.animationStartTime = aniObj.startTime;\n        }\n        if (aniObj.startTime + aniObj.totalDuration > this.animationEndTime) {\n            this.animationEndTime = aniObj.startTime + aniObj.totalDuration;\n        }\n    }\n\n    /**\n     * calculate timing for each action then render animation by slicing the action specs into frames\n     */\n    static renderAnimation(status = {}) {\n        let that = this;\n        this.allMarkAni.forEach((value, markId) => {\n            //record the end time of the entire animation, and record the init status of each mark\n            if (that.wholeEndTime < value.startTime + value.totalDuration) {\n                that.wholeEndTime = value.startTime + value.totalDuration;\n            }\n        })\n        status.info = 'The duration of the generated animation is: ' + this.wholeEndTime + 'ms';\n\n        //replace the 'wholeEnd' place holder in duration\n        this.allMarkAni.forEach((value, a) => {\n            for (let i = 0, item; i < value.actionAttrs.length | (item = value.actionAttrs[i]); i++) {\n                if (item.duration === 'wholeEnd') {\n                    item.duration = that.wholeEndTime - item.startTime;\n                }\n            }\n        })\n    }\n\n    static translateToLottieChannel(attrName) {\n        switch (attrName) {\n            case 'opacity':\n                return ['opacity']\n            case 'x':\n            case 'cx':\n                return ['x'];\n            case 'y':\n            case 'cy':\n                return ['y'];\n            case 'r':\n                return ['scaleX', 'scaleY'];\n            case 'width':\n                return ['scaleX'];\n            case 'height':\n                return ['scaleY'];\n            case 'd':\n            case 'x1':\n            case 'x2':\n            case 'y1':\n            case 'y2':\n                return ['shape'];\n            case 'textContent':\n                return ['text'];\n            case 'fill':\n                return ['fillColor'];\n            case 'stroke':\n                return ['strokeColor'];\n        }\n    }\n\n    static mapToLottieSpec() {\n        let that = this;\n        this.allMarkAni.forEach(function (value, markId) {\n            for (let i = 0; i < value.actionAttrs.length; i++) {\n                let tmpActionSpec = value.actionAttrs[i];\n                if (tmpActionSpec.duration > 0) {\n                    let targetMark = document.getElementById(markId);//TODO: pass dom here\n                    if (tmpActionSpec.type === ActionSpec.actionTargets.mark) {\n                        //TODO: consider 'custom'\n                        let startFrame = Math.ceil(tmpActionSpec.startTime / (1000 / TimingSpec.FRAME_RATE));\n                        let endFrame = Math.ceil((tmpActionSpec.startTime + tmpActionSpec.duration) / (1000 / TimingSpec.FRAME_RATE));\n                        tmpActionSpec.attribute.forEach((attr) => {\n                            if (tmpActionSpec.animationType === ActionSpec.targetAnimationType.custom) {\n                                //set anchor for r and text position changings\n                                if (attr.attrName === 'r') {\n                                    const tmpBbox = getBoundingBox(targetMark);\n                                    globalVar.markLayers.get(markId).setStaticProperty('anchorX', tmpBbox[2] / 2);\n                                    globalVar.markLayers.get(markId).setStaticProperty('anchorY', tmpBbox[3] / 2);\n                                } else if (document.getElementById(markId).tagName === 'text') {\n                                    globalVar.markLayers.get(markId).setStaticProperty('anchorY', 0);\n                                }\n\n                                //translate visual channels to lottie channels\n                                let lottieChannels = Animation.translateToLottieChannel(attr.attrName);\n                                if (Array.isArray(attr.to)) {//doing transition\n                                    let fromValue = 0, toValue = 0;\n                                    for (let j = 0; j < attr.to.length; j++) {\n                                        if (attr.to[j][0] === markId) {\n                                            fromValue = attr.from[j][1];\n                                            toValue = attr.to[j][1];\n                                            break;\n                                        }\n                                    }\n\n                                    lottieChannels.forEach((lc) => {\n                                        if (lc === 'shape') {\n                                            //transform the start d and end d to shape specification\n                                            let fromPosi = [0, 0], toPosi = [0, 0];\n                                            // console.log('translating d to lottie spec: ', fromValue, toValue);\n                                            [fromPosi, fromValue] = CanisUtil.transDToLottieSpec(fromValue);\n                                            [toPosi, toValue] = CanisUtil.transDToLottieSpec(toValue);\n                                            globalVar.markLayers.get(markId).setAnimatableProperty(\n                                                'x',\n                                                startFrame,\n                                                endFrame,\n                                                fromPosi[0],\n                                                toPosi[0],\n                                                ActionSpec.transToLottieAction(tmpActionSpec.easing)\n                                            );\n                                            globalVar.markLayers.get(markId).setAnimatableProperty(\n                                                'y',\n                                                startFrame,\n                                                endFrame,\n                                                fromPosi[1],\n                                                toPosi[1],\n                                                ActionSpec.transToLottieAction(tmpActionSpec.easing)\n                                            );\n                                        } else if (lc === 'fillColor' || lc === 'strokeColor') {\n                                            if (fromValue && toValue && fromValue !== 'none' && toValue !== 'none') {\n                                                fromValue = CanisUtil.toLottieRGBA(fromValue);\n                                                toValue = CanisUtil.toLottieRGBA(toValue);\n                                            } else {\n                                                fromValue = toValue = [0, 0, 0, 0];\n                                            }\n\n                                        } else if (lc === 'opacity') {\n                                            fromValue *= 100;\n                                            toValue *= 100;\n                                        }\n\n                                        globalVar.markLayers.get(markId).setAnimatableProperty(\n                                            lc,\n                                            startFrame,\n                                            endFrame,\n                                            fromValue,\n                                            toValue,\n                                            ActionSpec.transToLottieAction(tmpActionSpec.easing)\n                                        );\n                                    })\n                                } else {\n                                    lottieChannels.forEach((lc) => {//TODO: difference from and to strategy with positions and channels like opacity\n                                        globalVar.markLayers.get(markId).setAnimatableProperty(\n                                            lc,\n                                            startFrame,\n                                            endFrame,\n                                            attr.from * 100,\n                                            attr.to * 100,\n                                            ActionSpec.transToLottieAction(tmpActionSpec.easing)\n                                        );\n                                    })\n                                }\n                            } else {//if not custom, then attrName is already lottie channels\n                                globalVar.markLayers.get(markId).setAnimatableProperty(\n                                    attr.attrName,\n                                    startFrame,\n                                    endFrame,\n                                    attr.from * 100,\n                                    attr.to * 100,\n                                    ActionSpec.transToLottieAction(tmpActionSpec.easing)\n                                );\n                            }\n                        })\n                    } else if (tmpActionSpec.type === ActionSpec.actionTargets.mask) {\n                        let maskLayer;\n                        const tmpBbox = getBoundingBox(targetMark);\n                        let r = that.finalStatus.get(markId)[tmpActionSpec.chartIdx]['outterRadius'];\n                        switch (tmpActionSpec.animationType) {\n                            //create rect mask\n                            case ActionSpec.targetAnimationType.wipe:\n                            case ActionSpec.targetAnimationType.move:\n                            case ActionSpec.targetAnimationType.appear:\n                                maskLayer = LayerFactory.boundingBox(targetMark);\n                                break;\n                            //create circle mask\n                            case ActionSpec.targetAnimationType.circle:\n                                maskLayer = LayerFactory.ellipse(tmpBbox[0] + tmpBbox[2], tmpBbox[1] + tmpBbox[3], r, r);\n                                maskLayer.setStaticProperty('anchorX', tmpBbox[2] / 2);\n                                maskLayer.setStaticProperty('anchorY', tmpBbox[3] / 2);\n                                break;\n                            //create circle mask with thick border\n                            case ActionSpec.targetAnimationType.wheel:\n                                // console.log('going to get path offset: ', d);\n                                let pathOffset = CanisUtil.getPathOffset(targetMark.getAttribute('d'));\n                                let tmpOffsetX = that.finalStatus.get(markId)[tmpActionSpec.chartIdx]['cx'] + tmpBbox[0] - pathOffset[0];\n                                let tmpOffsetY = that.finalStatus.get(markId)[tmpActionSpec.chartIdx]['cy'] + tmpBbox[1] - pathOffset[1];\n                                maskLayer = LayerFactory.ellipse(tmpOffsetX, tmpOffsetY, r, r);\n\n                                let tmpStartAngle = that.finalStatus.get(markId)[tmpActionSpec.chartIdx]['startAngle'];\n                                let tmpEndAngle = that.finalStatus.get(markId)[tmpActionSpec.chartIdx]['endAngle'];\n                                maskLayer.setStaticProperty('trimOffset', -tmpStartAngle / Math.PI / 2 * 360 - 360 / 4);\n                                tmpActionSpec.attribute[0].to = 1 - ((tmpEndAngle - tmpStartAngle) % (Math.PI * 2)) / (Math.PI * 2);\n\n                                maskLayer.setStaticProperty('strokeWidth', 2 * r);\n                                maskLayer.setStaticProperty('fillOpacity', 0);\n                                break;\n                            //create path mask\n                        }\n                        let startFrame = Math.ceil(tmpActionSpec.startTime / (1000 / TimingSpec.FRAME_RATE));\n                        let endFrame = Math.ceil((tmpActionSpec.startTime + tmpActionSpec.duration) / (1000 / TimingSpec.FRAME_RATE));\n                        tmpActionSpec.attribute.forEach((attr) => {\n                            maskLayer.setAnimatableProperty(\n                                attr.attrName,\n                                startFrame,\n                                endFrame,\n                                attr.from * 100,\n                                attr.to * 100,\n                                ActionSpec.transToLottieAction(tmpActionSpec.easing)\n                            );\n                        })\n                        globalVar.jsMovin.addMask(maskLayer, globalVar.markLayers.get(markId), tmpActionSpec.maskType);\n                    } else {\n                        console.error('unkonwn actions target: ', tmpActionSpec.type);\n                    }\n                }\n            }\n        })\n    }\n\n    static transAlign(alignStr) {\n        switch (alignStr) {\n            case this.alignTarget.withEle:\n                return 'withEle';\n            case this.alignTarget.withObj:\n                return 'withObj';\n        }\n    }\n\n    //if the charts changed, then do reset\n    static resetAll() {\n        this.wholeEndTime = 0;\n        this.allMarkAni.clear();\n        this.frameTime.clear();\n        // this.domMarks.clear();\n        this.finalStatus.clear();\n        this.animations.clear();\n        Animation.aniIdx = 0;\n    }\n\n}\n\nAnimation.FIRST_ANI_ID = 'ani0';\nAnimation.aniIdx = 0;\nAnimation.alignTarget = {\n    withEle: 'element',\n    withObj: 'object'\n}\nAnimation.alignAttrs = ['target', 'type'];//for error check\nAnimation.visualAttrs = ['x', 'y', 'cx', 'cy', 'innerRadius', 'outterRadius', 'startAngle', 'endAngle', 'width', 'height', 'opacity', 'fill', 'stroke', 'content', 'stroke-dasharray', 'stroke-dashoffset'];\nAnimation.domMarks = new Map();\nAnimation.markClass = new Map();//key: markId, value: class\nAnimation.allMarks = [];\nAnimation.attrs = ['id', 'selector', 'grouping', 'effects', 'offset', 'reference', 'align']\nAnimation.wholeEndTime = 0;\nAnimation.frameTime = new Map();//key: time, value: whether this time point is a keyframe\nAnimation.animations = new Map();//record all animations, key:, value: animation obj\nAnimation.finalStatus = new Map();//record the final visual status of each mark, eg: key:mark1, value: {opacity: 1, height: 226}\nAnimation.allMarkAni = new Map();\n// Animation.easeFuncs = {\n//     easeInQuad: (p) => {\n//         return p * p;\n//     },\n//     easeOutQuad: (p) => {\n//         return - p * (p - 2);\n//     },\n//     easeInOutQuad: (p) => {\n//         if ((p / 2) < 1) return 1 / 2 * p * p;\n//         return - ((--p) * (p - 2) - 1) / 2;\n//     },\n//     easeInCubic: (p) => {\n//         return p * p * p;\n//     },\n//     easeOutCubic: (p) => {\n//         return (p = p - 1) * p * p + 1;\n//     },\n//     easeInOutCubic: (p) => {\n//         if ((p /= 0.5) < 1) return p * p * p / 2;\n//         return ((p -= 2) * p * p + 2) / 2;\n//     },\n//     easeOutBounce: (p) => {\n//         let ratio = 0;\n//         if (p < (1 / 2.75)) {\n//             ratio = 7.5625 * p * p;\n//         } else if (p < (2 / 2.75)) {\n//             ratio = 7.5625 * (p -= (1.5 / 2.75)) * p + 0.75;\n//         } else if (p < (2.5 / 2.75)) {\n//             ratio = 7.5625 * (p -= (2.25 / 2.75)) * p + 0.9375;\n//         } else {\n//             ratio = 7.5625 * (p -= (2.625 / 2.75)) * p + 0.984375;\n//         }\n//         return ratio;\n//     }\n// }\n\nexport default Animation;\n","import ChartSpec from './ChartSpec.js';\nimport FacetSpec from './FacetSpec.js';\nimport TimingSpec from './TimingSpec.js';\nimport Animation from \"./AnimationSpec.js\";\nimport { CanisUtil } from './util/Util.js';\nimport { globalVar } from './util/GlobalVar.js';\n// import 'babel-polyfill';\nimport GroupingSpec from './GroupingSpec.js';\nimport ActionSpec from './ActionSpec.js';\n\nclass CanisSpec {\n    constructor() {\n        this.currentSpec = {};\n        this.canisObj = {};\n        this._constants = new Map();\n        // this._actionTmpls = new Map();\n        this.chartSpecs;\n        this.facet;\n        this._animations;\n        this.chartWidth;\n        this.chartHeight;\n        this.hasError = false;\n    }\n\n    set constants(conArr) {\n        this._constants.clear();\n        conArr.forEach(c => {\n            this._constants.set(c.name, c.value);\n        })\n    }\n\n    get constants() {\n        return this._constants;\n    }\n\n    set animations(aniJson) {\n        // console.log('assigning animations: ', this.chartSpecs, aniJson);\n        let idxAniJson = aniJson.map(tmpAni => {\n            tmpAni.chartIdx = 0\n            return tmpAni;\n        });\n        let chartNum = 0;//number of charts\n        if (this.facet) {\n            chartNum = this.facet.views[0].frames.length;\n        } else {\n            chartNum = this.chartSpecs.length;\n        }\n        if (chartNum > 1) {//more than 1 input chart\n            // console.log('going to clone animations: ', chartNum, aniJson);\n            for (let i = 1; i < chartNum - 1; i++) {\n                let tmpAniJson = CanisUtil.deepClone(aniJson);\n                tmpAniJson[0].reference = TimingSpec.timingRef.previousEnd;\n                //record animation id and replace it in align property\n                let tmpAniIdx = 0;\n                let idMapping = new Map(); //key: previous animation id, value: new animation id\n                let tmpIdxAniJson = tmpAniJson.map(tmpAni => {\n                    tmpAni.chartIdx = i;\n                    if (typeof tmpAni.id !== 'undefined') {\n                        const newId = '_ani_' + i + '_' + tmpAniIdx;\n                        idMapping.set(tmpAni.id, newId);\n                    }\n                    if (typeof tmpAni.align !== 'undefined') {\n                        if (typeof idMapping.get(tmpAni.align.target) !== 'undefined') {\n                            tmpAni.align.target = idMapping.get(tmpAni.align.target);\n                        } else {\n                            console.warn('aligning with an id that does not exist!');\n                        }\n                    }\n                    return tmpAni;\n                })\n                idxAniJson.push(...tmpIdxAniJson);\n            }\n        }\n        this._animations = idxAniJson;\n    }\n\n    get animations() {\n        return this._animations;\n    }\n\n    preprocessCharts(spec, diffChart, status = {}) {\n        // console.time('prepeocess charts');\n        let canisObj = spec;\n\n        // if (diffChart) {//using different chart, processing charts\n        this.chartSpecs = [];\n        [canisObj.charts, this.hasError] = ChartSpec.chartPreProcessing(canisObj.charts, status);\n        if (this.hasError) return canisObj;\n        //deal with input charts\n        for (let i = 0; i < canisObj.charts.length; i++) {\n            const chartName = typeof canisObj.charts[i].id === 'undefined' ? 'chart' + i : canisObj.charts[i].id;\n            const chartType = typeof canisObj.charts[i].type === 'undefined' ? ChartSpec.CHART_URL : canisObj.charts[i].type;\n            const tmpChart = new ChartSpec(chartName, chartType, canisObj.charts[i].source);\n            this.chartSpecs.push(tmpChart);\n        }\n        //init facet\n        if (canisObj.facet) {\n            this.facet = new FacetSpec(canisObj.facet.type, canisObj.facet.views);\n        }\n        this.hasError = ChartSpec.loadCharts(this.chartSpecs, this.facet, status);\n        if (this.hasError) return canisObj;\n\n        //set viewport for jsmovin\n        globalVar.jsMovin.setViewport(ChartSpec.viewport.chartWidth, ChartSpec.viewport.chartHeight);\n\n        ChartSpec.removeTransAndMerge();\n        document.getElementById('chartContainer').innerHTML = '';\n        document.getElementById('chartContainer').appendChild(ChartSpec.svgChart);\n        // }\n        globalVar.jsMovin.clearLayers();\n        ChartSpec.addLottieMarkLayers(ChartSpec.svgChart);\n\n        // console.timeEnd('prepeocess charts');\n        return canisObj;\n    }\n    preprocessChartsPreview(spec, diffChart, status = {}) {\n        // console.time('prepeocess charts');\n        let canisObj = spec;\n\n        // if (diffChart) {//using different chart, processing charts\n        this.chartSpecs = [];\n        [canisObj.charts, this.hasError] = ChartSpec.chartPreProcessing(canisObj.charts, status);\n        if (this.hasError) return canisObj;\n        //deal with input charts\n        for (let i = 0; i < canisObj.charts.length; i++) {\n            const chartName = typeof canisObj.charts[i].id === 'undefined' ? 'chart' + i : canisObj.charts[i].id;\n            const chartType = typeof canisObj.charts[i].type === 'undefined' ? ChartSpec.CHART_URL : canisObj.charts[i].type;\n            const tmpChart = new ChartSpec(chartName, chartType, canisObj.charts[i].source);\n            this.chartSpecs.push(tmpChart);\n        }\n        //init facet\n        if (canisObj.facet) {\n            this.facet = new FacetSpec(canisObj.facet.type, canisObj.facet.views);\n        }\n        this.hasError = ChartSpec.loadCharts(this.chartSpecs, this.facet, status);\n        if (this.hasError) return canisObj;\n\n        //set viewport for jsmovin\n        globalVar.jsMovin.setViewport(ChartSpec.viewport.chartWidth, ChartSpec.viewport.chartHeight);\n\n        ChartSpec.removeTransAndMerge();\n        document.getElementById('chartContainer').innerHTML = '';\n        document.getElementById('chartContainer').appendChild(ChartSpec.svgChart);\n        // }\n        globalVar.jsMovin.clearLayers();\n        ChartSpec.addLottieMarkLayers(ChartSpec.svgChart);\n        return canisObj;\n    }\n\n    compareSpec(spec) {\n        let diffChart = false;\n        // console.log('comparing: ', this.currentSpec.charts, spec.charst);\n        if ((typeof this.currentSpec.constants !== 'undefined' && JSON.stringify(spec.constants) !== JSON.stringify(this.currentSpec.constants)) ||\n            (typeof this.currentSpec.charts !== 'undefined' && JSON.stringify(spec.charts) !== JSON.stringify(this.currentSpec.charts)) ||\n            typeof this.currentSpec.charts === 'undefined' ||\n            (typeof spec.facet !== 'undefined' && typeof this.currentSpec.facet !== 'undefined' && JSON.stringify(spec.facet) !== JSON.stringify(this.currentSpec.facet)) ||\n            ((typeof this.currentSpec.facet === 'undefined' || typeof spec.facet === 'undefined') && !(typeof this.currentSpec.facet === 'undefined' && typeof spec.facet === 'undefined'))\n        ) {\n            diffChart = true;\n        }\n        if (diffChart) {\n            // console.log('charts are different');\n            Animation.domMarks.clear();\n            Animation.allMarks = [];\n            ChartSpec.dataMarkDatum.clear();\n            ChartSpec.marksWithSameDatum.clear();\n            ChartSpec.nonDataMarkDatum.clear();\n            ChartSpec.chartUnderstanding = { mShape: ['shape'] };\n            Animation.animations.clear();\n            Animation.markClass.clear();\n            ActionSpec.actionTmpls.clear();\n        }\n        this.currentSpec = spec;\n        return diffChart;\n    }\n\n    checkAttrs(legalAttrs, obj, status) {\n        const attrs = Object.keys(obj);\n        let hasError = false;\n        for (let j = 0, len2 = attrs.length; j < len2; j++) {\n            if (!legalAttrs.includes(attrs[j])) {\n                hasError = true;\n                const tmpValue = obj[attrs[j]];\n                let errSpecStr = '\"' + attrs[j] + '\":';\n                if (!isNaN(Number(tmpValue))) {//the value is a number\n                    errSpecStr += '' + tmpValue;\n                } else if (typeof tmpValue === 'object') {//the value is array\n                    errSpecStr += JSON.stringify(tmpValue);\n                } else {//the value is string\n                    errSpecStr += '\"' + tmpValue + '\"';\n                }\n                status.info = { type: 'error', msg: 'Illegal attribute name \"' + attrs[j] + '\".', errSpec: errSpecStr.replace(/\\s/g, '') };\n                break;\n            }\n        }\n        return hasError;\n    }\n\n    /**\n     * check the validaty of the spec\n     * @param {*} spec \n     */\n    checkSpec(spec, status) {\n        let hasError = false;\n        //check charts\n        if (spec.charts.length === 0) {\n            hasError = true;\n            status.info = { type: 'error', msg: 'There are no input charts.', errSpec: '\"charts\":[]' };\n        }\n        //check chart source\n        for (let i = 0, len = spec.charts.length; i < len; i++) {\n            //check for wrong attributes\n            hasError = this.checkAttrs(ChartSpec.attrs, spec.charts[i], status);\n            if (hasError) {\n                break;\n            }\n\n            if (!spec.charts[i].source) {\n                hasError = true;\n                status.info = { type: 'error', msg: 'No chart source found in chart item.', errSpec: JSON.stringify(spec.charts[i]).replace(/\\s/g, '') };\n                break;\n            } else {\n                const sourceStr = spec.charts[i].source;\n                if (sourceStr.indexOf('.dsvg') < 0 && !(spec.charts[i].start && spec.charts[i].end)) {\n                    hasError = true;\n                    status.info = { type: 'error', msg: 'No range specification found for input chart index .', errSpec: JSON.stringify(spec.charts[i]).replace(/\\s/g, '') };\n                    break;\n                }\n            }\n        }\n        //check animation\n        for (let i = 0, len = spec.animations.length; i < len; i++) {\n            //check for wrong attributes\n            hasError = this.checkAttrs(Animation.attrs, spec.animations[i], status);\n            if (hasError) {\n                break;\n            }\n\n            if (!spec.animations[i].selector) {\n                hasError = true;\n                status.info = { type: 'error', msg: 'No selector found in animation unit.', errSpec: JSON.stringify(spec.animations[i]).replace(/\\s/g, '') };\n                break;\n            } else if (!spec.animations[i].effects) {\n                hasError = true;\n                status.info = { type: 'error', msg: 'No effects found in animation unit.', errSpec: JSON.stringify(spec.animations[i]).replace(/\\s/g, '') };\n                break;\n            } else {\n                //check reference\n                if (spec.animations[i].reference) {\n                    if (!Object.keys(TimingSpec.timingRef).includes(TimingSpec.transRef(spec.animations[i].reference))) {\n                        hasError = true;\n                        status.info = { type: 'error', msg: 'The value of the reference has to be one of: start with previous or start after previous.', errSpec: '\"reference\":\"' + spec.animations[i].reference.replace(/\\s/g, '') + '\"' };\n                        break;\n                    }\n                }\n                if (spec.animations[i].align && typeof spec.animations[i].align === 'object') {\n                    hasError = this.checkAttrs(Animation.alignAttrs, spec.animations[i].align, status);\n                    if (hasError) {\n                        break;\n                    }\n                    //check align type\n                    if (typeof spec.animations[i].align.type !== 'undefined') {\n                        if (!Object.keys(Animation.alignTarget).includes(Animation.transAlign(spec.animations[i].align.type))) {\n                            hasError = true;\n                            status.info = { type: 'error', msg: 'The value of align has to be one of: element or object.', errSpec: '\"type\":\"' + spec.animations[i].align.type.replace(/\\s/g, '') + '\"' };\n                            break;\n                        }\n                    }\n                }\n                //check offset object\n                if (spec.animations[i].offset && typeof spec.animations[i].offset === 'object') {\n                    hasError = this.checkAttrs(TimingSpec.dataBindAttrs, spec.animations[i].offset, status);\n                    if (hasError) {\n                        break;\n                    }\n                }\n                //check grouping\n                if (spec.animations[i].grouping) {\n                    hasError = this.checkGroupingSpec(spec.animations[i].grouping, status);\n                    if (hasError) {\n                        break;\n                    }\n                }\n                //check effects\n                for (let j = 0, len2 = spec.animations[i].effects.length; j < len2; j++) {\n                    //check for wrong attributes\n                    hasError = this.checkAttrs(ActionSpec.attrs, spec.animations[i].effects[j], status);\n                    if (hasError) {\n                        break;\n                    }\n\n                    if (!spec.animations[i].effects[j].type) {\n                        hasError = true;\n                        status.info = { type: 'error', msg: 'No effect type found in effect item.', errSpec: JSON.stringify(spec.animations[i].effects[j]).replace(/\\s/g, '') };\n                        break;\n                    } else if (!Object.values(ActionSpec.actionTypes).includes(spec.animations[i].effects[j].type)) {\n                        hasError = true;\n                        status.info = { type: 'error', msg: 'Invalid effect type \"' + spec.animations[i].effects[j].type + '\".', errSpec: '\"type\":\"' + spec.animations[i].effects[j].type.replace(/\\s/g, '') + '\"' };\n                        break;\n                    }\n                    if (spec.animations[i].effects[j].offset && typeof spec.animations[i].effects[j].offset === 'object') {\n                        hasError = this.checkAttrs(TimingSpec.dataBindAttrs, spec.animations[i].effects[j].offset, status);\n                        if (hasError) {\n                            break;\n                        }\n                    }\n                    if (spec.animations[i].effects[j].duration && typeof spec.animations[i].effects[j].duration === 'object') {\n                        hasError = this.checkAttrs(TimingSpec.dataBindAttrs, spec.animations[i].effects[j].duration, status);\n                        if (hasError) {\n                            break;\n                        }\n                    }\n                    if (spec.animations[i].effects[j].easing && !Object.values(ActionSpec.easingType).includes(spec.animations[i].effects[j].easing)) {\n                        hasError = true;\n                        status.info = { type: 'error', msg: 'Invalid easing type \"' + spec.animations[i].effects[j].easing + '\".', errSpec: '\"easing\":\"' + spec.animations[i].effects[j].easing.replace(/\\s/g, '') + '\"' };\n                        break;\n                    }\n                }\n            }\n        }\n        return hasError;\n    }\n\n    checkGroupingSpec(groupingSpec, status) {\n        if (typeof groupingSpec === 'number' || typeof groupingSpec === 'string') {\n            const errStr = typeof groupingSpec === 'number' ? '\"grouping\":' + groupingSpec : '\"grouping\":\"' + groupingSpec.replace(/\\s/g, '') + '\"';\n            status.info = { type: 'error', msg: 'Invalid grouping value.', errSpec: errStr };\n            return true;\n        }\n\n        //check for wrong attributes\n        let hasError = this.checkAttrs(GroupingSpec.attrs, groupingSpec, status);\n        if (hasError) {\n            return true;\n        }\n\n        if (groupingSpec.reference) {\n            if (!Object.keys(TimingSpec.timingRef).includes(TimingSpec.transRef(groupingSpec.reference))) {\n                status.info = { type: 'error', msg: 'The value of the reference has to be one of: start with previous or start after previous.', errSpec: '\"reference\":\"' + groupingSpec.reference.replace(/\\s/g, '') + '\"' };\n                return true;\n            }\n        }\n        if (groupingSpec.sort && typeof groupingSpec.sort === 'object') {\n            let sortHasError = this.checkAttrs(GroupingSpec.sortAttrs, groupingSpec.sort, status);\n            if (sortHasError) {\n                return true;\n            }\n        } else if (typeof groupingSpec.sort === 'number') {\n            status.info = { type: 'error', msg: 'Invalid sort value.', errSpec: '\"sort\":' + groupingSpec.sort };\n            return true;\n        }\n        if (groupingSpec.grouping) {\n            return this.checkGroupingSpec(groupingSpec.grouping, status);\n        }\n        return false;\n    }\n    initPreview(spec, status = {}) {\n        if (JSON.stringify(status) !== '{}') {\n            this.hasError = false;\n            // this.hasError = this.checkSpec(spec, status);\n        } else {\n            this.hasError = false;\n        }\n\n        if (!this.hasError) {\n            Animation.resetAll();\n            GroupingSpec.frames.clear();//clear keyframe record;\n            GroupingSpec.framesMark.clear();//clear keyframe record;\n            if (spec.charts.length === 0) {//no charts specified\n                Animation.domMarks.clear();\n                Animation.allMarks = [];\n                ChartSpec.dataMarkDatum.clear();\n                ChartSpec.nonDataMarkDatum.clear();\n                ChartSpec.chartUnderstanding = { mShape: ['shape'] };\n                Animation.animations.clear();\n                Animation.markClass.clear();\n                ActionSpec.actionTmpls.clear();\n                if (document.getElementById('chartContainer')) {\n                    document.getElementById('chartContainer').innerHTML = '';\n                }\n            } else {\n                //set framerate for jsmovin\n                globalVar.jsMovin.setFrameRate(TimingSpec.FRAME_RATE);\n                const diffChart = this.compareSpec(spec);\n                let chartContainer = document.getElementById('visChart');\n                let canisObj =  this.preprocessChartsPreview(spec, diffChart, status);\n\n                //init user defined variables\n                if (canisObj.constants && typeof canisObj.constants !== 'undefined') {\n                    this.constants = canisObj.constants;\n                }\n                if (canisObj.effectTmpls && typeof canisObj.effectTmpls !== 'undefined') {\n                    ActionSpec.assignActionTmpls(canisObj.effectTmpls, status);\n                }\n                console.log('effect tmpls: ', ActionSpec.actionTmpls);\n\n                //deal with animations\n                this.animations = canisObj.animations;\n                if (Array.isArray(this.animations)) {\n                    let lastAnimation;\n                    for (let aniIdx = 0; aniIdx < this.animations.length; aniIdx++) {\n                        let animationJson = this.animations[aniIdx];\n\n                        // console.time('using dom');\n                        //use the selector in animation to select marks and record dom attrs\n                        // console.time('query dom');\n                        let tmpContainer = document.createElement('div');\n                        document.body.appendChild(tmpContainer);\n                        tmpContainer.innerHTML = ChartSpec.charts[animationJson.chartIdx].outerHTML;\n                        let marks = tmpContainer.querySelectorAll(animationJson.selector);\n                        let tmpAllMarks = [];\n                        [].forEach.call(tmpContainer.querySelectorAll('.mark'), function (tm) {\n                            tmpAllMarks.push(tm.getAttribute('id'));\n                            let mClass = tm.getAttribute('class').split(' ');\n                            let markType = '';\n                            for (let i = 0, len = mClass.length; i < len; i++) {\n                                if (mClass[i] === 'mark') {\n                                    markType = mClass[i + 1];\n                                }\n                            }\n                            Animation.markClass.set(tm.getAttribute('id'), markType);\n                        })\n                        Animation.allMarks = [...new Set([...Animation.allMarks, ...tmpAllMarks])];\n                        if (marks.length === 0) {\n                            if (typeof animationJson.selector === 'number') {\n                                status.info = { type: 'error', msg: 'The selector need to be a CSS selector', errSpec: '\"selector\":' + animationJson.selector };\n                            } else {\n                                status.info = { type: 'error', msg: 'The selector ' + animationJson.selector + ' selects no marks', errSpec: '\"selector\":\"' + animationJson.selector.replace(/\\s/g, '') + '\"' };\n                            }\n                            return;\n                        }\n                        // console.timeEnd('query dom');\n                        animationJson.selector = this.sortSelector(animationJson.selector);\n\n                        let usedChangedAttrs = [];\n                        for (let i = 0; i < ChartSpec.changedAttrs.length; i++) {\n                            usedChangedAttrs.push(ChartSpec.changedAttrs[i]);\n                        }\n\n                        //check whether the animation is existed\n                        //TODO: remove non existed animations in the current spec\n                        let animation;\n                        let markIds = [];\n                        if (marks.length > 0) {\n                            [].forEach.call(marks, function (mark) {\n                                markIds.push(mark.getAttribute('id'));\n                            })\n                        }\n                        let aniKey = animationJson.chartIdx + '_' + animationJson.selector;\n                        if (aniKey === '0_.mark') {\n                            aniKey = `0_#${Animation.allMarks.join(', #')}`;\n                        }\n                        if (typeof Animation.animations.get(aniKey) !== 'undefined') {//already have this animation\n                            animation = Animation.animations.get(aniKey);\n                            animation.translate(animationJson, usedChangedAttrs, true, status);\n                        } else {\n                            animation = new Animation();\n                            animation.translate(animationJson, usedChangedAttrs, false, status);//translate from json obj to Animation obj\n                            Animation.animations.set(aniKey, animation);\n                        }\n                        //auto fill align property for animations except the first one\n                        if (typeof animation.align === 'undefined' && typeof lastAnimation !== 'undefined') {\n                            animation.align = {\n                                target: lastAnimation.id,\n                                type: Animation.alignTarget.withObj\n                            }\n                        }\n                        //replace contant variables\n                        if (this.constants.size > 0) {\n                            animation.replaceConstants(this.constants, status);\n                        }\n\n                        // console.timeEnd('using dom');\n                        // let markIds = [];//record all ids of selected marks\n                        if (marks.length > 0) {\n                            const idxForEachCls = new Map();\n                            [].forEach.call(marks, function (mark) {\n                                if (mark.classList.contains('mark')) {\n                                    let markId = mark.getAttribute('id');\n                                    let markCls = mark.getAttribute('class');\n                                    if (typeof idxForEachCls.get(markCls) === 'undefined') {\n                                        idxForEachCls.set(markCls, 0);\n                                    } else {\n                                        idxForEachCls.set(markCls, idxForEachCls.get(markCls) + 1);\n                                    }\n                                    // markIds.push(markId);\n                                    if (typeof Animation.domMarks.get(markId) === 'undefined') {\n                                        //process path\n                                        if (mark.tagName === 'path') {//consider the linkage shape later\n                                            let markJSON = CanisUtil.toJSON(mark);\n                                            let transformedAttrs = CanisUtil.discretizePath(markJSON);\n\n                                            if (transformedAttrs) {\n                                                if (transformedAttrs.type === 'lines') {\n                                                    for (let i = 0; i < transformedAttrs.data.length; i++) {\n                                                        markJSON.attr['x' + (1 + 2 * i)] = transformedAttrs.data[i][0][0];\n                                                        markJSON.attr['y' + (1 + 2 * i)] = transformedAttrs.data[i][0][1];\n                                                        markJSON.attr['x' + (2 + 2 * i)] = transformedAttrs.data[i][1][0];\n                                                        markJSON.attr['y' + (2 + 2 * i)] = transformedAttrs.data[i][1][1];\n                                                    }\n                                                } else {\n                                                    let tfAttrsDataKeys = Object.keys(transformedAttrs.data);\n\n                                                    for (let i = 0; i < tfAttrsDataKeys.length; i++) {\n                                                        let tAttr = tfAttrsDataKeys[i];\n                                                        if (tAttr === 'radius') {\n                                                            if (transformedAttrs.data[tAttr].length > 1) {\n                                                                markJSON.attr.innerRadius = transformedAttrs.data[tAttr][0].rx + 1;\n                                                                markJSON.attr.outterRadius = transformedAttrs.data[tAttr][1].rx - 1;\n                                                            } else {\n                                                                markJSON.attr.innerRadius = 0;\n                                                                markJSON.attr.outterRadius = transformedAttrs.data[tAttr][0].rx - 1;\n                                                            }\n                                                        } else {\n                                                            markJSON.attr[tAttr] = transformedAttrs.data[tAttr];\n                                                        }\n                                                    }\n                                                }\n                                                mark = CanisUtil.toDOM(markJSON);\n                                            }\n                                        }\n\n                                        let tmpDomAttrObj = {};\n                                        let attrArr = [...mark.attributes];\n                                        for (let i = 0; i < attrArr.length; i++) {\n                                            let attrName = attrArr[i];\n                                            tmpDomAttrObj[attrName.name] = mark.getAttribute(attrName.name);\n                                        }\n                                        let markDom = document.getElementById(markId);\n                                        tmpDomAttrObj['bbWidth'] = markDom.getBBox().width;\n                                        tmpDomAttrObj['bbHeight'] = markDom.getBBox().height;\n                                        tmpDomAttrObj['bbX'] = markDom.getBBox().x;\n                                        tmpDomAttrObj['bbY'] = markDom.getBBox().y;\n                                        tmpDomAttrObj['content'] = mark.textContent;\n                                        tmpDomAttrObj['id'] = markId;\n                                        let dataDatumAttrValue = JSON.parse(mark.getAttribute('data-datum'));\n                                        if (Array.isArray(dataDatumAttrValue)) {\n                                            dataDatumAttrValue = dataDatumAttrValue[0];\n                                        }\n                                        dataDatumAttrValue.clsIdx = `a${idxForEachCls.get(markCls)}`;\n                                        if (typeof ChartSpec.nonDataMarkDatum.get(markId) !== 'undefined') {\n                                            ChartSpec.nonDataMarkDatum.get(markId).clsIdx = `a${idxForEachCls.get(markCls)}`;\n                                        }\n                                        tmpDomAttrObj['data-datum'] = dataDatumAttrValue;\n                                        // CanisSpec.markData.set(markId, dataDatumAttrValue);\n                                        tmpDomAttrObj['tagName'] = mark.tagName;\n                                        if (mark.tagName === 'path' || mark.tagName === 'line') {\n                                            tmpDomAttrObj['stroke-dasharray'] = document.getElementById(markId).getTotalLength();\n                                            tmpDomAttrObj['stroke-dashoffset'] = document.getElementById(markId).getTotalLength();\n                                            if (mark.tagName === 'path') {\n                                                let discD = CanisUtil.discretizeD(mark.getAttribute('d'), '#000');\n                                                \n                                                \n                                                if (typeof discD !== 'undefined' && discD) {\n                                                    console.log('discdtype', discD.type);\n                                                    if (discD.type === 'pies') {\n                                                        tmpDomAttrObj['cx'] = discD.data.cx;\n                                                        tmpDomAttrObj['cy'] = discD.data.cy;\n                                                        tmpDomAttrObj['startAngle'] = (discD.data.clockwise ? discD.data.startAngle : discD.data.endAngle) - 1 / (Math.PI * 2);\n                                                        tmpDomAttrObj['endAngle'] = (!discD.data.clockwise ? discD.data.startAngle : discD.data.endAngle) + Math.PI * 4 + 1 / (Math.PI * 2);\n                                                        if (discD.data.radius.length > 1) {\n                                                            tmpDomAttrObj['innerRadius'] = discD.data.radius[0].rx > discD.data.radius[1].rx ? discD.data.radius[1].rx : discD.data.radius[0].rx;\n                                                            tmpDomAttrObj['outterRadius'] = discD.data.radius[0].rx > discD.data.radius[1].rx ? discD.data.radius[0].rx : discD.data.radius[1].rx;\n                                                            tmpDomAttrObj['outterRadius']++;\n                                                        } else {\n                                                            tmpDomAttrObj['innerRadius'] = 0;\n                                                            tmpDomAttrObj['outterRadius'] = discD.data.radius[0].rx + 1;\n                                                        }\n                                                    }\n                                                }\n                                            }\n                                        }\n                                        Animation.domMarks.set(markId, tmpDomAttrObj);\n                                    }\n\n                                }\n                            })\n                        }\n                        animation.calAniTime(markIds);\n                        Animation.animations.get(aniKey).alignOnData = animation.alignOnData;\n                        lastAnimation = animation;\n                        document.body.removeChild(tmpContainer);\n                    }\n                }\n                document.getElementById('chartContainer').innerHTML = '';\n                document.getElementById('chartContainer').appendChild(chartContainer);\n            }\n        }\n\n    }\n    init(spec, status = {}) {\n        if (JSON.stringify(status) !== '{}') {\n            this.hasError = false;\n            // this.hasError = this.checkSpec(spec, status);\n        } else {\n            this.hasError = false;\n        }\n\n        if (!this.hasError) {\n            Animation.resetAll();\n            GroupingSpec.frames.clear();//clear keyframe record;\n            GroupingSpec.framesMark.clear();//clear keyframe record;\n            if (spec.charts.length === 0) {//no charts specified\n                Animation.domMarks.clear();\n                Animation.allMarks = [];\n                ChartSpec.dataMarkDatum.clear();\n                ChartSpec.nonDataMarkDatum.clear();\n                ChartSpec.chartUnderstanding = { mShape: ['shape'] };\n                Animation.animations.clear();\n                Animation.markClass.clear();\n                ActionSpec.actionTmpls.clear();\n                if (document.getElementById('chartContainer')) {\n                    document.getElementById('chartContainer').innerHTML = '';\n                }\n            } else {\n                //set framerate for jsmovin\n                globalVar.jsMovin.setFrameRate(TimingSpec.FRAME_RATE);\n\n                const diffChart = this.compareSpec(spec);\n                let canisObj =  this.preprocessCharts(spec, diffChart, status);\n\n                //init user defined variables\n                if (canisObj.constants && typeof canisObj.constants !== 'undefined') {\n                    this.constants = canisObj.constants;\n                }\n                if (canisObj.effectTmpls && typeof canisObj.effectTmpls !== 'undefined') {\n                    ActionSpec.assignActionTmpls(canisObj.effectTmpls, status);\n                }\n                console.log('effect tmpls: ', ActionSpec.actionTmpls);\n\n                //deal with animations\n                this.animations = canisObj.animations;\n                if (Array.isArray(this.animations)) {\n                    let lastAnimation;\n                    for (let aniIdx = 0; aniIdx < this.animations.length; aniIdx++) {\n                        let animationJson = this.animations[aniIdx];\n\n                        // console.time('using dom');\n                        //use the selector in animation to select marks and record dom attrs\n                        // console.time('query dom');\n                        let tmpContainer = document.createElement('div');\n                        document.body.appendChild(tmpContainer);\n                        tmpContainer.innerHTML = ChartSpec.charts[animationJson.chartIdx].outerHTML;\n                        let marks = tmpContainer.querySelectorAll(animationJson.selector);\n                        let tmpAllMarks = [];\n                        [].forEach.call(tmpContainer.querySelectorAll('.mark'), function (tm) {\n                            tmpAllMarks.push(tm.getAttribute('id'));\n                            let mClass = tm.getAttribute('class').split(' ');\n                            let markType = '';\n                            for (let i = 0, len = mClass.length; i < len; i++) {\n                                if (mClass[i] === 'mark') {\n                                    markType = mClass[i + 1];\n                                }\n                            }\n                            Animation.markClass.set(tm.getAttribute('id'), markType);\n                        })\n                        Animation.allMarks = [...new Set([...Animation.allMarks, ...tmpAllMarks])];\n                        if (marks.length === 0) {\n                            if (typeof animationJson.selector === 'number') {\n                                status.info = { type: 'error', msg: 'The selector need to be a CSS selector', errSpec: '\"selector\":' + animationJson.selector };\n                            } else {\n                                status.info = { type: 'error', msg: 'The selector ' + animationJson.selector + ' selects no marks', errSpec: '\"selector\":\"' + animationJson.selector.replace(/\\s/g, '') + '\"' };\n                            }\n                            return;\n                        }\n                        // console.timeEnd('query dom');\n                        animationJson.selector = this.sortSelector(animationJson.selector);\n\n                        let usedChangedAttrs = [];\n                        for (let i = 0; i < ChartSpec.changedAttrs.length; i++) {\n                            usedChangedAttrs.push(ChartSpec.changedAttrs[i]);\n                        }\n\n                        //check whether the animation is existed\n                        //TODO: remove non existed animations in the current spec\n                        let animation;\n                        let markIds = [];\n                        if (marks.length > 0) {\n                            [].forEach.call(marks, function (mark) {\n                                markIds.push(mark.getAttribute('id'));\n                            })\n                        }\n                        let aniKey = animationJson.chartIdx + '_' + animationJson.selector;\n                        if (aniKey === '0_.mark') {\n                            aniKey = `0_#${Animation.allMarks.join(', #')}`;\n                        }\n                        if (typeof Animation.animations.get(aniKey) !== 'undefined') {//already have this animation\n                            animation = Animation.animations.get(aniKey);\n                            animation.translate(animationJson, usedChangedAttrs, true, status);\n                        } else {\n                            animation = new Animation();\n                            animation.translate(animationJson, usedChangedAttrs, false, status);//translate from json obj to Animation obj\n                            Animation.animations.set(aniKey, animation);\n                        }\n                        //auto fill align property for animations except the first one\n                        if (typeof animation.align === 'undefined' && typeof lastAnimation !== 'undefined') {\n                            animation.align = {\n                                target: lastAnimation.id,\n                                type: Animation.alignTarget.withObj\n                            }\n                        }\n                        //replace contant variables\n                        if (this.constants.size > 0) {\n                            animation.replaceConstants(this.constants, status);\n                        }\n\n                        // console.timeEnd('using dom');\n                        // let markIds = [];//record all ids of selected marks\n                        if (marks.length > 0) {\n                            const idxForEachCls = new Map();\n                            [].forEach.call(marks, function (mark) {\n                                if (mark.classList.contains('mark')) {\n                                    let markId = mark.getAttribute('id');\n                                    let markCls = mark.getAttribute('class');\n                                    if (typeof idxForEachCls.get(markCls) === 'undefined') {\n                                        idxForEachCls.set(markCls, 0);\n                                    } else {\n                                        idxForEachCls.set(markCls, idxForEachCls.get(markCls) + 1);\n                                    }\n                                    // markIds.push(markId);\n                                    if (typeof Animation.domMarks.get(markId) === 'undefined') {\n                                        //process path\n                                        if (mark.tagName === 'path') {//consider the linkage shape later\n                                            let markJSON = CanisUtil.toJSON(mark);\n                                            let transformedAttrs = CanisUtil.discretizePath(markJSON);\n\n                                            if (transformedAttrs) {\n                                                if (transformedAttrs.type === 'lines') {\n                                                    for (let i = 0; i < transformedAttrs.data.length; i++) {\n                                                        markJSON.attr['x' + (1 + 2 * i)] = transformedAttrs.data[i][0][0];\n                                                        markJSON.attr['y' + (1 + 2 * i)] = transformedAttrs.data[i][0][1];\n                                                        markJSON.attr['x' + (2 + 2 * i)] = transformedAttrs.data[i][1][0];\n                                                        markJSON.attr['y' + (2 + 2 * i)] = transformedAttrs.data[i][1][1];\n                                                    }\n                                                } else {\n                                                    let tfAttrsDataKeys = Object.keys(transformedAttrs.data);\n\n                                                    for (let i = 0; i < tfAttrsDataKeys.length; i++) {\n                                                        let tAttr = tfAttrsDataKeys[i];\n                                                        if (tAttr === 'radius') {\n                                                            if (transformedAttrs.data[tAttr].length > 1) {\n                                                                markJSON.attr.innerRadius = transformedAttrs.data[tAttr][0].rx + 1;\n                                                                markJSON.attr.outterRadius = transformedAttrs.data[tAttr][1].rx - 1;\n                                                            } else {\n                                                                markJSON.attr.innerRadius = 0;\n                                                                markJSON.attr.outterRadius = transformedAttrs.data[tAttr][0].rx - 1;\n                                                            }\n                                                        } else {\n                                                            markJSON.attr[tAttr] = transformedAttrs.data[tAttr];\n                                                        }\n                                                    }\n                                                }\n                                                mark = CanisUtil.toDOM(markJSON);\n                                            }\n                                        }\n\n                                        let tmpDomAttrObj = {};\n                                        let attrArr = [...mark.attributes];\n                                        for (let i = 0; i < attrArr.length; i++) {\n                                            let attrName = attrArr[i];\n                                            tmpDomAttrObj[attrName.name] = mark.getAttribute(attrName.name);\n                                        }\n                                        let markDom = document.getElementById(markId);\n                                        tmpDomAttrObj['bbWidth'] = markDom.getBBox().width;\n                                        tmpDomAttrObj['bbHeight'] = markDom.getBBox().height;\n                                        tmpDomAttrObj['bbX'] = markDom.getBBox().x;\n                                        tmpDomAttrObj['bbY'] = markDom.getBBox().y;\n                                        tmpDomAttrObj['content'] = mark.textContent;\n                                        tmpDomAttrObj['id'] = markId;\n                                        let dataDatumAttrValue = JSON.parse(mark.getAttribute('data-datum'));\n                                        if (Array.isArray(dataDatumAttrValue)) {\n                                            dataDatumAttrValue = dataDatumAttrValue[0];\n                                        }\n                                        dataDatumAttrValue.clsIdx = `a${idxForEachCls.get(markCls)}`;\n                                        if (typeof ChartSpec.nonDataMarkDatum.get(markId) !== 'undefined') {\n                                            ChartSpec.nonDataMarkDatum.get(markId).clsIdx = `a${idxForEachCls.get(markCls)}`;\n                                        }\n                                        tmpDomAttrObj['data-datum'] = dataDatumAttrValue;\n                                        // CanisSpec.markData.set(markId, dataDatumAttrValue);\n                                        tmpDomAttrObj['tagName'] = mark.tagName;\n                                        if (mark.tagName === 'path' || mark.tagName === 'line') {\n                                            tmpDomAttrObj['stroke-dasharray'] = document.getElementById(markId).getTotalLength();\n                                            tmpDomAttrObj['stroke-dashoffset'] = document.getElementById(markId).getTotalLength();\n                                            if (mark.tagName === 'path') {\n                                                let discD = CanisUtil.discretizeD(mark.getAttribute('d'), '#000');\n                                                \n                                                \n                                                if (typeof discD !== 'undefined' && discD) {\n                                                    console.log('discdtype', discD.type);\n                                                    if (discD.type === 'pies') {\n                                                        tmpDomAttrObj['cx'] = discD.data.cx;\n                                                        tmpDomAttrObj['cy'] = discD.data.cy;\n                                                        tmpDomAttrObj['startAngle'] = (discD.data.clockwise ? discD.data.startAngle : discD.data.endAngle) - 1 / (Math.PI * 2);\n                                                        tmpDomAttrObj['endAngle'] = (!discD.data.clockwise ? discD.data.startAngle : discD.data.endAngle) + Math.PI * 4 + 1 / (Math.PI * 2);\n                                                        if (discD.data.radius.length > 1) {\n                                                            tmpDomAttrObj['innerRadius'] = discD.data.radius[0].rx > discD.data.radius[1].rx ? discD.data.radius[1].rx : discD.data.radius[0].rx;\n                                                            tmpDomAttrObj['outterRadius'] = discD.data.radius[0].rx > discD.data.radius[1].rx ? discD.data.radius[0].rx : discD.data.radius[1].rx;\n                                                            tmpDomAttrObj['outterRadius']++;\n                                                        } else {\n                                                            tmpDomAttrObj['innerRadius'] = 0;\n                                                            tmpDomAttrObj['outterRadius'] = discD.data.radius[0].rx + 1;\n                                                        }\n                                                    }\n                                                }\n                                            }\n                                        }\n                                        Animation.domMarks.set(markId, tmpDomAttrObj);\n                                    }\n\n                                }\n                            })\n                        }\n                        animation.calAniTime(markIds);\n                        Animation.animations.get(aniKey).alignOnData = animation.alignOnData;\n                        lastAnimation = animation;\n                        document.body.removeChild(tmpContainer);\n                    }\n                }\n            }\n        }\n\n    }\n\n    sortSelector(selector) {\n        const selectorBlocks = selector.split(', ');//should be in the form #mark1 #mark2 ...\n        if (selectorBlocks.length > 0) {\n            // console.log('before sort selector: ', selectorBlocks);\n            selectorBlocks.sort((a, b) => {\n                const numA = parseInt(a.substring(5));\n                const numB = parseInt(b.substring(5));\n                return numA - numB;\n            })\n            // console.log('after sort seelctor', selectorBlocks);\n            return selectorBlocks.join(', ');\n        }\n        return selector;\n    }\n\n    render(callback, status = {}) {\n        // console.time('rendering');\n        Animation.renderAnimation(status);\n        // Animation.findKeyframes();\n        //map animation keyframes to lottie spec\n        Animation.mapToLottieSpec();\n\n        //export lottie JSON\n        let lottieJSON = globalVar.jsMovin.toJSON();\n        CanisSpec.lottieJSON = lottieJSON;\n        // console.timeEnd('rendering');\n        if (status) {\n            status.info = 'Done rendering.';\n        }\n        callback();\n        return JSON.parse(lottieJSON);\n    }\n}\n\nCanisSpec.lottieJSON = '';\n\nexport default CanisSpec;","import TimingSpec from './TimingSpec';\nimport Animation from './AnimationSpec';\nimport ActionSpec from './ActionSpec';\nimport CanisSpec from './CanisSpec';\nimport ChartSpec from './ChartSpec';\n\nexport default class Canis {\n    constructor() {\n        this.canisObj = {};\n        this.frameRate = TimingSpec.FRAME_RATE;\n    }\n\n    duration() {\n        return Animation.wholeEndTime;\n    }\n    renderSpecPreview(spec, callback) {\n        if (Object.keys(this.canisObj).length === 0) {\n            this.canisObj = new CanisSpec();\n        }\n        //\n        this.canisObj.initPreview(spec);\n        return this.canisObj.render(callback);\n        // return this.canisObj.init(spec).then(() => {\n        //     return this.canisObj.render(callback);\n        // })\n    }\n    renderSpec(spec, callback) {\n        if (Object.keys(this.canisObj).length === 0) {\n            this.canisObj = new CanisSpec();\n        }\n        //\n        this.canisObj.init(spec);\n        return this.canisObj.render(callback);\n        // return this.canisObj.init(spec).then(() => {\n        //     return this.canisObj.render(callback);\n        // })\n    }\n\n    reset() {\n        Animation.resetAll();\n    }\n\n    exportJSON() {\n        return CanisSpec.lottieJSON;\n    }\n\n    test() {\n        console.log('this is a test! ');\n    }\n}\n\nexport { ActionSpec, TimingSpec, ChartSpec, Animation}","// import JSMovin from './jsmovin/jsmovin.bundle.js';\n// import JSMovin from './jsmovin/jsmovin.js';\nimport JSMovin from 'jsmovin';\n\nexport let globalVar = {\n    jsMovin: new JSMovin(),\n    markLayers: new Map()\n    // assets: \n};","import { PathMaker } from 'jsmovin';\nimport { parseSVG } from 'svg-path-parser'\n\nexport class CanisUtil {\n    constructor() { }\n\n    /**\n     * check whether arr2 is contained in arr1\n     * @param {*} arr1 \n     * @param {*} arr2 \n     */\n    static arrIsContained(arr1, arr2) {\n        if (arr2.length > arr1) {\n            return false;\n        }\n        for (let i = 0, len = arr2.length; i < len; i++) {\n            if (!arr1.includes(arr2[i])) {\n                return false;\n            }\n        }\n\n        return true;\n    }\n\n    static checkEquation(string, constants) {\n        // \n        string = string.replace(/\\s/g, '');\n\n        // \n        if (\"\" === string) {\n            // return false;\n        }\n        if (/^[\\x\\\\+\\-\\*\\/]/.test(string)) {\n            // console.error(& amp; quot;  & amp; quot;);\n            return false;\n        }\n\n        //\n        if (/[\\x\\\\+\\-\\*\\/]$/.test(string)) {\n            // console.error(& amp; quot;  & amp; quot;);\n            return false;\n        }\n\n        // ()\n        if (/\\([\\x\\\\+\\-\\*\\/]/.test(string)) {\n            // console.error(& amp; quot; () & amp; quot;);\n            return false;\n        }\n        // \n        if (/[\\x\\\\+\\-\\*\\/]{2,}/.test(string)) {\n            return false;\n        }\n\n        // \n        if (/\\(\\)/.test(string)) {\n            return false;\n        }\n\n        // \n        var stack = [];\n        for (var i = 0, item; i < string.length; i++) {\n            item = string.charAt(i);\n            if ('(' === item) {\n                stack.push('(');\n            } else if (')' === item) {\n                if (stack.length > 0) {\n                    stack.pop();\n                } else {\n                    return false;\n                }\n            }\n        }\n\n        if (0 !== stack.length) {\n            return false;\n        }\n\n        // ( \n        if (/\\([\\x\\\\+\\-\\*\\/]/.test(string)) {\n            return false;\n        }\n\n        // )\n        if (/[\\x\\\\+\\-\\*\\/]\\)/.test(string)) {\n            return false;\n        }\n\n        // (\n        if (/[\\x\\\\+\\-\\*\\/]\\(/.test(string)) {\n            return false;\n        }\n\n        // )\n        if (/\\)[\\x\\\\+\\-\\*\\/]/.test(string)) {\n            return false;\n        }\n\n        // \n        var tmpStr = string.replace(/[\\(\\)\\x\\\\+\\-\\*\\/]{1,}/g, '`');\n        var array = tmpStr.split(',');\n        for (let i = 0, item; i < array.length; i++) {\n            item = array[i];\n            if (/[A-Z]/i.test(item) && 'undefined' == typeof (constants.get(item))) {\n                return false;\n            }\n        }\n        let stringarr = string.split(',');\n        // let objarr = Object.keys(obj);\n        for (let index = 0; index < stringarr.length; index++) {\n            if (typeof constants.get(stringarr[index]) !== 'undefined') {\n                if (stringarr[index + 1] == undefined) {\n                } else if (stringarr[index + 1] !== '+' && stringarr[index + 1] !== '.' && stringarr[index + 1] !== '-' && stringarr[index + 1] !== 'x' && stringarr[index + 1] !== '' && stringarr[index + 1] !== '(' && stringarr[index + 1] !== ')') {\n                    return false\n                }\n            }\n\n        }\n\n        return true;\n    }\n\n    static deepClone(obj) {\n        if (!obj || true == obj) //this also handles boolean as true and false\n            return obj;\n        var objType = typeof (obj);\n        if (\"number\" == objType || \"string\" == objType) // add your immutables here\n            return obj;\n        var result = Array.isArray(obj) ? [] : {};\n        if (obj instanceof Map) {\n            result = new Map();\n            for (let i = 0; i < obj.keys().length; i++) {\n                let key = obj.keys()[i];\n                result.set(key, this.deepClone(obj.get(key)));\n            }\n        }\n        for (var key in obj)\n            if (obj.hasOwnProperty(key))\n                result[key] = this.deepClone(obj[key]);\n        return result;\n    }\n\n    static formatTime(time) {\n        let currentTimeS = parseInt(time / 1000);\n        let currentTimeMS = parseInt(time % 1000 / 10);\n        let currentTimeSStr = currentTimeS < 10 ? '0' + currentTimeS : '' + currentTimeS;\n        let currentTimeMSStr = currentTimeMS < 10 ? '0' + currentTimeMS : '' + currentTimeMS;\n        return currentTimeSStr + ':' + currentTimeMSStr;\n    }\n\n    static color2RGB(color) {\n        if (color) {\n            color = color.toLowerCase();\n            if (Array.from(this.colorNames.keys()).includes(color)) {\n                color = this.colorNames.get(color);\n            }\n            color = color.replace(/\\s/g, '');\n            if (color.indexOf('rgb') >= 0) {\n                let tmpStr = color.substr(color.indexOf('(') + 1);\n                tmpStr = tmpStr.substring(0, tmpStr.indexOf(')'));\n                let rgb = tmpStr.split(',');\n                if (rgb.length === 3) {\n                    rgb[3] = 255;\n                }\n                return [parseInt(rgb[0]), parseInt(rgb[1]), parseInt(rgb[2]), parseInt(rgb[3])];\n            } else if (color.indexOf('#') >= 0) {\n                return this.HEX2RGB(color);\n            }\n        }\n\n        return \"none\";\n    }\n\n    static HEX2RGB(hex) {\n        if (hex.charAt(0) === '#') {\n            hex = hex.substr(1);\n        }\n        if ((hex.length < 2) || (hex.length > 6)) {\n            return false;\n        }\n        let values = hex.split(''),\n            r,\n            g,\n            b,\n            a = 255;\n\n        if (hex.length === 2) {\n            r = parseInt(values[0].toString() + values[1].toString(), 16);\n            g = r;\n            b = r;\n        } else if (hex.length === 3) {\n            r = parseInt(values[0].toString() + values[0].toString(), 16);\n            g = parseInt(values[1].toString() + values[1].toString(), 16);\n            b = parseInt(values[2].toString() + values[2].toString(), 16);\n        } else if (hex.length === 6) {\n            r = parseInt(values[0].toString() + values[1].toString(), 16);\n            g = parseInt(values[2].toString() + values[3].toString(), 16);\n            b = parseInt(values[4].toString() + values[5].toString(), 16);\n        } else {\n            return false;\n        }\n        return [r, g, b, a];\n    }\n\n    static toLottieRGBA(color) {\n        return this.color2RGB(color).map((c) => c / 255);\n    }\n\n    static toJSON(node) {\n        node = node || this;\n        let obj = {\n            nodeType: node.nodeType\n        };\n        if (node.tagName) {\n            obj.tagName = node.tagName.toLowerCase();\n        } else\n            if (node.nodeName) {\n                obj.nodeName = node.nodeName;\n            }\n        if (node.nodeValue) {\n            obj.nodeValue = node.nodeValue;\n        }\n        let attrs = node.attributes;\n        if (attrs) {\n            obj.attr = {};\n            for (let i = 0, attr; i < attrs.length | (attr = attrs[i]); i++) {\n                obj.attr[attr.nodeName] = attr.nodeValue;\n            }\n        }\n\n        return obj;\n    }\n\n\n    static toDOM(obj) {\n        if (typeof obj == 'string') {\n            obj = JSON.parse(obj);\n        }\n        let node, nodeType = obj.nodeType;\n        switch (nodeType) {\n            case 1: //ELEMENT_NODE\n                node = document.createElementNS('http://www.w3.org/2000/svg', obj.tagName);\n                let attributes = obj.attr || {};\n                for (let i = 0, attr; i < Object.keys(attributes).length | (attr = Object.keys(attributes)[i]); i++) {\n                    let attrValue = typeof attributes[attr] === 'object' ? JSON.stringify(attributes[attr], null, 0) : attributes[attr];\n                    node.setAttributeNS(null, attr, attrValue);\n                }\n                break;\n            case 3: //TEXT_NODE\n                node = document.createTextNode(obj.nodeValue);\n                break;\n            case 8: //COMMENT_NODE\n                node = document.createComment(obj.nodeValue);\n                break;\n            case 9: //DOCUMENT_NODE\n                node = document.implementation.createDocument();\n                break;\n            case 10: //DOCUMENT_TYPE_NODE\n                node = document.implementation.createDocumentType(obj.nodeName);\n                break;\n            case 11: //DOCUMENT_FRAGMENT_NODE\n                node = document.createDocumentFragment();\n                break;\n            default:\n                return node;\n        }\n\n        return node;\n    }\n\n    /**\n     * @param {*} obj A parsed svg json object.\n     */\n    static discretizePath(obj) {\n        // normalize attributes\n        if (obj.tagName !== 'path') return null\n        let attr = obj.attr || {}\n        if (!attr.d) return null\n        return this.discretizeD(attr.d, attr.fill);\n    }\n\n    static discretizeD(d, fillColor) {\n        let resultGroup = [],\n            reg = /[MmLlHhVvZzCcSsQqTtAa][^MmLlHhVvZzCcSsQqTtAa]*/gi,\n            group = undefined;\n        while ((group = reg.exec(d))) {\n            let offset = resultGroup.reduce((p, c) => p + c.length, 0);\n            resultGroup.push(d.slice(offset, group.index));\n            resultGroup.push(group[0]);\n        }\n        let result = resultGroup\n            .map(x => {\n                let command = x.slice(0, 1);\n                let parameters = x\n                    .slice(1)\n                    .split(/[ ,]/)\n                    .filter(n => n.trim())\n                    .map(n => parseFloat(n));\n                return command ? {\n                    command,\n                    parameters\n                } : null;\n            }).filter(x => x)\n        // polyline style path\n        if (result.every(x => 'MmLlHhVv'.includes(x.command)) && !CanisUtil.convertColor(fillColor)) {\n            let lines = []\n            let prev = null\n            let valid = true\n            result.forEach(x => {\n                if (!valid) return\n                if (x.command === 'M') {\n                    prev = x.parameters.slice(-2)\n                    return\n                }\n                if (!prev) return valid = false\n                if (x.command === 'm') {\n                    prev = prev.map((v, i) => v + x.parameters[i])\n                    return\n                }\n                let firstPoint = prev,\n                    secondPoint = x.command === x.command.toLowerCase() ? prev.slice() : [0, 0]\n                switch (x.command.toLowerCase()) {\n                    case 'l':\n                        secondPoint = secondPoint.map((v, i) => v + x.parameters[i])\n                        break\n                    case 'h':\n                        secondPoint[0] += x.parameters[0]\n                        secondPoint[1] = firstPoint[1]\n                        break\n                    case 'v':\n                        secondPoint[1] += x.parameters[0]\n                        secondPoint[0] = firstPoint[0]\n                        break\n                }\n                if (secondPoint) {\n                    lines.push([firstPoint, secondPoint])\n                    prev = secondPoint\n                } else {\n                    valid = false\n                }\n            })\n            if (valid) return {\n                type: 'lines',\n                data: lines\n            }\n        }\n        // pie style path\n        if (result.every(x => 'MmLlAaZz'.includes(x.command)) && result.filter(x => x.command.toLowerCase() === 'a').length) {\n            let circles = []\n            let prev = null\n            let valid = true\n            // For each of the commands in the SVG path...\nresult.forEach(x => {\n                // If the path is not valid, skip it.\n                if (!valid) return\n                // If the command is 'M' (move), set the previous point, and skip to the next command.\n                if (x.command.toLowerCase() === 'm') {\n                    prev = x.parameters.slice(-2)\n                    return\n                }\n                // If there is no previous point, skip to the next command.\n                if (!prev) return valid = false\n                // If the command is 'Z' (close), skip to the next command.\n                if (x.command.toLowerCase() === 'z') return\n                // Set the first and second points.\n                let firstPoint = prev,\n                    secondPoint = x.command.toLowerCase() === x.command ? prev.slice() : [0, 0]\n                // If the command is not 'A' (arc), set the second point.\n                if (x.command.toLowerCase() !== 'a') {\n                    return prev = secondPoint.map((v, i) => v + x.parameters[i])\n                }\n                // If the command is 'A' (arc), set the second point based on the arc parameters.\n                secondPoint = secondPoint.map((v, i) => v + x.parameters[i + 5])\n                // Convert the arc parameters to center parameters.\n                let tmp = CanisUtil.svgArcToCenterParam.apply(null, firstPoint.concat(x.parameters.slice(0, 5)).concat(secondPoint));\n                // If the center parameters are not invalid, add them to the list of circles.\n                if (!isNaN(tmp.cx) && !isNaN(tmp.cy)) {\n                    circles.push({\n                        ...tmp,\n                        rx: x.parameters[0],\n                        ry: x.parameters[1],\n                        rotate: x.parameters[2]\n                    })\n                }\n                // Set the previous point to the second point.\n                prev = secondPoint\n            })\n            // check that all the circles have the same center\n            if (circles.length <= 0 || !circles.every(x => ['cx', 'cy'].reduce((p, c) => p + Math.abs(x[c] - circles[0][c]), 0) < 0.2)) valid = false\n            if (valid) {\n                // find the largest circle\n                let c = circles.reduce((p, c) => {\n                    if (!p) return c\n                    if (c.rx + c.ry > p.rx + p.ry) return c\n                    return p\n                }, null)\n                // generate the attrResult\n                let attrResult = {\n                    type: 'pies',\n                    data: {\n                        cx: c.cx,\n                        cy: c.cy,\n                        startAngle: c.startAngle,\n                        endAngle: c.endAngle,\n                        clockwise: c.clockwise,\n                        radius: circles.map(x => {\n                            return {\n                                rx: x.rx,\n                                ry: x.ry,\n                                rotate: x.rotate\n                            }\n                        })\n                    }\n                }\n                return attrResult;\n            }\n        }\n        // other unhandled style path\n        return null\n    }\n\n    static radian(ux, uy, vx, vy) {\n        var dot = ux * vx + uy * vy;\n        var mod = Math.sqrt((ux * ux + uy * uy) * (vx * vx + vy * vy));\n        var rad = Math.acos(dot / mod);\n        if (ux * vy - uy * vx < 0.0) {\n            rad = -rad;\n        }\n        return rad;\n    }\n\n    static svgArcToCenterParam(x1, y1, rx, ry, phi, fA, fS, x2, y2) {\n        var cx, cy, startAngle, deltaAngle, endAngle;\n        var PIx2 = Math.PI * 2.0;\n\n        if (rx < 0) {\n            rx = -rx;\n        }\n        if (ry < 0) {\n            ry = -ry;\n        }\n        // if (rx == 0.0 || ry == 0.0) { // invalid arguments\n        //     throw Error('rx and ry can not be 0');\n        // }\n\n        var s_phi = Math.sin(phi);\n        var c_phi = Math.cos(phi);\n        var hd_x = (x1 - x2) / 2.0; // half diff of x\n        var hd_y = (y1 - y2) / 2.0; // half diff of y\n        var hs_x = (x1 + x2) / 2.0; // half sum of x\n        var hs_y = (y1 + y2) / 2.0; // half sum of y\n\n        // F6.5.1\n        var x1_ = c_phi * hd_x + s_phi * hd_y;\n        var y1_ = c_phi * hd_y - s_phi * hd_x;\n\n        // F.6.6 Correction of out-of-range radii\n        //   Step 3: Ensure radii are large enough\n        var lambda = (x1_ * x1_) / (rx * rx) + (y1_ * y1_) / (ry * ry);\n        if (lambda > 1) {\n            rx = rx * Math.sqrt(lambda);\n            ry = ry * Math.sqrt(lambda);\n        }\n\n        var rxry = rx * ry;\n        var rxy1_ = rx * y1_;\n        var ryx1_ = ry * x1_;\n        var sum_of_sq = rxy1_ * rxy1_ + ryx1_ * ryx1_; // sum of square\n        // if (!sum_of_sq) {\n        //     throw Error('start point can not be same as end point');\n        // }\n        var coe = Math.sqrt(Math.abs((rxry * rxry - sum_of_sq) / sum_of_sq));\n        if (fA == fS) {\n            coe = -coe;\n        }\n\n        // F6.5.2\n        var cx_ = coe * rxy1_ / ry;\n        var cy_ = -coe * ryx1_ / rx;\n\n        // F6.5.3\n        cx = c_phi * cx_ - s_phi * cy_ + hs_x;\n        cy = s_phi * cx_ + c_phi * cy_ + hs_y;\n\n        var xcr1 = (x1_ - cx_) / rx;\n        var xcr2 = (x1_ + cx_) / rx;\n        var ycr1 = (y1_ - cy_) / ry;\n        var ycr2 = (y1_ + cy_) / ry;\n\n        // F6.5.5\n        startAngle = CanisUtil.radian(1.0, 0.0, xcr1, ycr1);\n\n        // F6.5.6\n        deltaAngle = CanisUtil.radian(xcr1, ycr1, -xcr2, -ycr2);\n        while (deltaAngle > PIx2) {\n            deltaAngle -= PIx2;\n        }\n        while (deltaAngle < 0.0) {\n            deltaAngle += PIx2;\n        }\n        if (fS == false || fS == 0) {\n            deltaAngle -= PIx2;\n        }\n        endAngle = startAngle + deltaAngle;\n        while (endAngle > PIx2) {\n            endAngle -= PIx2;\n        }\n        while (endAngle < 0.0) {\n            endAngle += PIx2;\n        }\n\n        var outputObj = {\n            /* cx, cy, startAngle, deltaAngle */\n            cx,\n            cy,\n            startAngle,\n            deltaAngle,\n            endAngle,\n            clockwise: (fS == true || fS == 1)\n        }\n\n        return outputObj;\n    }\n\n    static convertColor(str, fMode, tMode) {\n        if (typeof str !== 'string') return str\n        if (str === 'none') return null\n        str = str.trim()\n        let mr = null\n        if (tMode === undefined) {\n            tMode = fMode\n            if (str.startsWith('#')) {\n                fMode = 'hex'\n            } else if (str.startsWith('rgb')) {\n                fMode = 'rgb'\n            }\n        }\n        // assume user input is valid\n        switch (fMode) {\n            case 'rgb':\n                mr = str.split('(')[1].split(',').map(x => parseFloat(x))\n                break\n            case 'hex':\n                mr = str.slice(1).match(/.{1,2}/g).map(x => parseInt(x, 16))\n            default:\n                return str\n        }\n        mr = mr.slice(0, 3)\n        switch (tMode) {\n            case 'hex':\n                return '#' + mr.map(x => x.toString(16).padStart(2, '0')).join('')\n            case 'rgb':\n                return `rgb(${mr.join(',')})`\n            default:\n                return str\n        }\n    }\n\n    static polarToCartesian(centerX, centerY, radius, angleInRadians) {\n        return {\n            x: Math.round((centerX + (radius * Math.cos(angleInRadians))) * 100) / 100,\n            y: Math.round((centerY + (radius * Math.sin(angleInRadians))) * 100) / 100\n        };\n    };\n\n    static arc(x, y, innerRadius, outterRadius, startAngle, endAngle) {\n        startAngle = startAngle < 0 ? startAngle + 2 * Math.PI : startAngle;\n        endAngle = endAngle < 0 || startAngle > endAngle ? endAngle + 2 * Math.PI : endAngle;\n\n        //to generate cover, make the cover a little bigger\n        innerRadius = innerRadius === 0 ? 0 : innerRadius - 1;\n        outterRadius += 1;\n\n        let largeArcFlag = endAngle - startAngle <= Math.PI ? 0 : 1;\n\n        let start1 = CanisUtil.polarToCartesian(x, y, outterRadius, endAngle);\n        let end1 = CanisUtil.polarToCartesian(x, y, outterRadius, startAngle);\n        let start2 = CanisUtil.polarToCartesian(x, y, innerRadius, endAngle);\n        let end2 = CanisUtil.polarToCartesian(x, y, innerRadius, startAngle);\n\n        let isRing = false;\n        if (start1.x === end1.x && start1.y === end1.y) {//this is a ring\n            end1.y -= 1;\n            end2.y -= 1;\n            isRing = true;\n        }\n\n        let d;\n        if (!isRing) {\n            d = [\n                \"M\" + start1.x, start1.y,\n                \"A\" + outterRadius, outterRadius, 0, largeArcFlag, 0, end1.x, end1.y,\n                \"L\" + end2.x, end2.y,\n                \"A\" + innerRadius, innerRadius, 0, largeArcFlag, 1, start2.x, start2.y,\n                \"L\" + start1.x, start1.y + \"Z\"\n            ].join(\",\");\n        } else {\n            d = [\n                \"M\" + start1.x, start1.y,\n                \"A\" + outterRadius, outterRadius, 0, largeArcFlag, 1, end1.x, end1.y,\n                \"M\" + end2.x, end2.y,\n                \"A\" + innerRadius, innerRadius, 0, largeArcFlag, 0, start2.x, start2.y + \"Z\"\n            ].join(\",\");\n        }\n\n        return d;\n    };\n\n    /**\n     * turn a dom node to string\n     * @param {DOM} domNode \n     */\n    static domNodeToString(domNode) {\n        var element = document.createElement(\"div\");\n        element.appendChild(domNode);\n        return element.innerHTML;\n    }\n\n    /**\n     * turn a string to dom node\n     * @param {string} str \n     */\n    static strToDomNode(str) {\n        let tmpDiv = document.createElement('div');\n        tmpDiv.innerHTML = str.trim();\n        let dom = tmpDiv.firstChild;\n        return dom;\n    }\n\n    static transShape(t, tx, ty) {\n        if (t.tagName !== 'path') {\n            let hasPosi = false;\n            if (t.getAttribute('x') || t.getAttribute('y')) {\n                hasPosi = true;\n                t.setAttribute('x', t.getAttribute('x') ? parseFloat(t.getAttribute('x')) + tx : tx);\n                t.setAttribute('y', t.getAttribute('y') ? parseFloat(t.getAttribute('y')) + ty : ty);\n            }\n            if (t.getAttribute('x1') || t.getAttribute('y1') || t.getAttribute('x2') || t.getAttribute('y2')) {\n                hasPosi = true;\n                t.setAttribute('x1', t.getAttribute('x1') ? parseFloat(t.getAttribute('x1')) + tx : tx);\n                t.setAttribute('x2', t.getAttribute('x2') ? parseFloat(t.getAttribute('x2')) + tx : tx);\n                t.setAttribute('y1', t.getAttribute('y1') ? parseFloat(t.getAttribute('y1')) + ty : ty);\n                t.setAttribute('y2', t.getAttribute('y2') ? parseFloat(t.getAttribute('y2')) + ty : ty);\n            }\n            if (t.getAttribute('cx') || t.getAttribute('cy')) {\n                hasPosi = true;\n                t.setAttribute('cx', t.getAttribute('cx') ? parseFloat(t.getAttribute('cx')) + tx : tx);\n                t.setAttribute('cy', t.getAttribute('cy') ? parseFloat(t.getAttribute('cy')) + ty : ty);\n            }\n            if (!hasPosi) {\n                if (t.tagName === 'circle') {\n                    t.setAttribute('cx', tx);\n                    t.setAttribute('cy', ty);\n                } else {\n                    t.setAttribute('x', tx);\n                    t.setAttribute('y', ty);\n                }\n            }\n        } else {\n            if (t.getAttribute('d')) {\n                let resultCmd = CanisUtil.setPathDValue(t.getAttribute('d'), false, tx, ty);\n                t.setAttribute('d', resultCmd);\n            }\n        }\n    }\n\n    static splitPath(d) {\n        let tmpPath = document.createElementNS('http://www.w3.org/2000/svg', 'path');\n        tmpPath.setAttributeNS(null, 'd', d);\n        let tmpPathLen = tmpPath.getTotalLength();\n        let stepNum = 300, pathStepLen = tmpPathLen / stepNum;\n        let discritPath = '';\n        for (let i = 0; i < stepNum; i++) {\n            let tmpPnt = tmpPath.getPointAtLength(pathStepLen * i);\n            i === 0 ? discritPath += 'M' + tmpPnt.x + ',' + tmpPnt.y : discritPath += 'L' + tmpPnt.x + ',' + tmpPnt.y\n        }\n        discritPath += 'Z';\n        return discritPath;\n    }\n\n    static getPathOffset(d) {\n        // const pathData = d\n        // const pathDataSeries = parseSVG(pathData)\n        const pathMaker = new PathMaker()\n        pathMaker.parse(d)\n        // let pathDataWithType;\n        // pathDataSeries.forEach(pathDataItem => {\n        //     switch (pathDataItem.code) {\n        //         case 'M':\n        //             pathDataWithType = pathDataItem\n        //             pathMaker.moveTo(pathDataWithType.x, pathDataWithType.y)\n        //             break\n        //         case 'L':\n        //             pathDataWithType = pathDataItem\n        //             pathMaker.lineTo(pathDataWithType.x, pathDataWithType.y)\n        //             break\n        //         case 'l':\n        //             pathDataWithType = pathDataItem\n        //             pathMaker.lineToRelative(pathDataWithType.x, pathDataWithType.y)\n        //             break\n        //         case 'H':\n        //             pathDataWithType = pathDataItem\n        //             pathMaker.horizontalTo(pathDataWithType.x)\n        //             break\n        //         case 'h':\n        //             pathDataWithType = pathDataItem\n        //             pathMaker.horizontalToRelative(pathDataWithType.x)\n        //             break\n        //         case 'V':\n        //             pathDataWithType = pathDataItem\n        //             pathMaker.verticalTo(pathDataWithType.y)\n        //             break\n        //         case 'v':\n        //             pathDataWithType = pathDataItem\n        //             pathMaker.verticalToRelative(pathDataWithType.y)\n        //             break\n        //         case 'C':\n        //             pathDataWithType = pathDataItem\n        //             pathMaker.cubicBezierCurveTo(pathDataWithType.x1, pathDataWithType.y1, pathDataWithType.x2, pathDataWithType.y2, pathDataWithType.x, pathDataWithType.y)\n        //             break\n        //         case 'c':\n        //             pathDataWithType = pathDataItem\n        //             pathMaker.cubicBezierCurveToRelative(pathDataWithType.x1, pathDataWithType.y1, pathDataWithType.x2, pathDataWithType.y2, pathDataWithType.x, pathDataWithType.y)\n        //             break\n        //         case 'Q':\n        //             pathDataWithType = pathDataItem\n        //             pathMaker.quadraticBezierCurveTo(pathDataWithType.x1, pathDataWithType.y1, pathDataWithType.x, pathDataWithType.y)\n        //             break\n        //         case 'q':\n        //             pathDataWithType = pathDataItem\n        //             pathMaker.quadraticBezierCurveToRelative(pathDataWithType.x1, pathDataWithType.y1, pathDataWithType.x, pathDataWithType.y)\n        //             break\n        //         case 'T':\n        //             pathDataWithType = pathDataItem;\n\n        //             if(_this2.lastbezier !== 2){\n        //             _this2.nextCVX = _this2.currentX;\n        //             _this2.nextCVY = _this2.currentY;\n        //             }\n\n        //             _this2.quadraticBezierCurveToRelative(_this2.nextCVX, _this2.nextCVY, pathDataWithType.x, pathDataWithType.y);\n\n        //             break;\n\n        //         case 't':\n        //             pathDataWithType = pathDataItem;\n\n        //             if(_this2.lastbezier !== 2){\n        //             _this2.nextCVX = _this2.currentX;\n        //             _this2.nextCVY = _this2.currentY;\n        //             }\n\n        //             _this2.quadraticBezierCurveToRelative(_this2.nextCVX - _this2.currentX, _this2.nextCVY - _this2.currentY, pathDataWithType.x, pathDataWithType.y);\n\n        //             break;\n\n        //         case 'A':\n        //             pathDataWithType = pathDataItem\n        //             pathMaker.arcTo(pathDataWithType.rx, pathDataWithType.ry, pathDataWithType.xAxisRotation, ~~pathDataWithType.largeArc, ~~pathDataWithType.sweep, pathDataWithType.x, pathDataWithType.y)\n        //             break\n        //         case 'a':\n        //             pathDataWithType = pathDataItem\n        //             pathMaker.arcToRelative(pathDataWithType.rx, pathDataWithType.ry, pathDataWithType.xAxisRotation, ~~pathDataWithType.largeArc, ~~pathDataWithType.sweep, pathDataWithType.x, pathDataWithType.y)\n        //             break\n        //         case 'Z':\n        //         case 'z':\n        //             pathMaker.closePath()\n        //             break\n        //         default:\n        //             console.error(pathDataItem)\n        //             throw new Error('No implementation found for this path command.')\n        //     }\n        // })\n        return [pathMaker.offsetX, pathMaker.offsetY];\n    }\n\n    static transDToLottieSpec(d) {\n        let posiOffset = this.getPathOffset(d);\n        let pm = new PathMaker(d);\n        pm.uniform();\n        return [posiOffset, pm];\n    }\n\n    static setPathDValue(d, reset, tx = 0, ty = 0, diffCmds = new Map()) {\n        d = d.replace(/(?<=\\d)\\s(?=[mMlLhHvVcCsSqQtTaAzZ])/g, '').replace(/(?<=[mMlLhHvVcCsSqQtTaA])\\s(?=(\\d|[-+]))/g, '').replace(/\\s/g, ',');\n        let cmdRegExp = new RegExp(/[mMlLhHvVcCsSqQtTaAzZ][^mMlLhHvVcCsSqQtTaAzZ]*/g);\n        let resultCmd = '';\n        let cmds = d.match(cmdRegExp);\n        if (cmds) {\n            //get the position of the first move cmd if there is one\n            let firstCmdName = cmds[0].substring(0, 1);\n            let resetX = '0', resetY = '0';\n            if (firstCmdName === 'm' || firstCmdName === 'M') {\n                let firstCmdValues = cmds[0].substring(1).split(',');\n                resetX = firstCmdValues[0];\n                resetY = firstCmdValues[1];\n            }\n\n            for (let i = 0; i < cmds.length; i++) {\n                let cmdName = cmds[i].substring(0, 1);\n                let cmdValue = cmds[i].substring(1);\n                resultCmd += cmdName;\n                switch (cmdName) {\n                    case 'H':\n                        resultCmd = this.calNumTrans(resultCmd, diffCmds, i, cmdName, cmdValue, reset, resetX, tx);\n                        break;\n                    case 'h':\n                        resultCmd = this.calNumTrans(resultCmd, diffCmds, i, cmdName, cmdValue, reset, '0', 0);\n                        break;\n                    case 'V':\n                        resultCmd = this.calNumTrans(resultCmd, diffCmds, i, cmdName, cmdValue, reset, resetY, ty);\n                        break;\n                    case 'v':\n                        resultCmd = this.calNumTrans(resultCmd, diffCmds, i, cmdName, cmdValue, reset, '0', 0);\n                        break;\n                    case 'M':\n                    case 'L':\n                    case 'T':\n                    case 'C':\n                    case 'S':\n                    case 'Q':\n                        let nums = cmdValue.split(',');\n                        for (let ni = 0; ni < nums.length; ni++) {\n                            if (ni % 2 === 0) {//x\n                                resultCmd = this.calNumTrans(resultCmd, diffCmds, i, cmdName, nums[ni], reset, resetX, tx);\n                            } else {//y\n                                resultCmd = this.calNumTrans(resultCmd, diffCmds, i, cmdName, nums[ni], reset, resetY, ty);\n                            }\n                            if (ni !== nums.length - 1) {\n                                resultCmd += ' ';\n                            }\n                        }\n                        break;\n                    case 'm':\n                    case 'l':\n                    case 't':\n                    case 'c':\n                    case 's':\n                    case 'q':\n                        let nums2 = cmdValue.split(',');\n                        for (let ni = 0; ni < nums2.length; ni++) {\n                            resultCmd = this.calNumTrans(resultCmd, diffCmds, i, cmdName, nums2[ni], reset, '0', 0);\n                            if (ni !== nums2.length - 1 && nums2[ni] !== '') {\n                                resultCmd += ' ';\n                            }\n                        }\n                        break;\n                    case 'A':\n                        let anums = cmdValue.split(',');\n                        for (let ni = 0; ni < anums.length; ni++) {\n                            if (ni === anums.length - 2) {//x\n                                resultCmd = this.calNumTrans(resultCmd, diffCmds, i, cmdName, anums[ni], reset, parseFloat(resetX) + 1, tx);\n                                resultCmd += ' ';\n                            } else if (ni === anums.length - 1) {//y\n                                resultCmd = this.calNumTrans(resultCmd, diffCmds, i, cmdName, anums[ni], reset, parseFloat(resetY) + 1, ty);\n                            } else {\n                                resultCmd += anums[ni] + ' ';\n                            }\n                        }\n                        break;\n                    case 'a':\n                        let anums2 = cmdValue.split(',');\n                        for (let ni = 0; ni < anums2.length; ni++) {\n                            if (ni === anums2.length - 2) {//x\n                                resultCmd = this.calNumTrans(resultCmd, diffCmds, i, cmdName, anums2[ni], reset, '1', 0);\n                                resultCmd += ' ';\n                            } else if (ni === anums2.length - 1) {//y\n                                resultCmd = this.calNumTrans(resultCmd, diffCmds, i, cmdName, anums2[ni], reset, '1', 0);\n                            } else {\n                                resultCmd += anums2[ni] + ' ';\n                            }\n                        }\n                        break;\n                    case 'z':\n                    case 'Z':\n                        break;\n                }\n            }\n            if (d.charAt(d.length - 1) === 'z' || d.charAt(d.length - 1) === 'Z') {\n                resultCmd += 'Z';\n            }\n        }\n        return resultCmd;\n    }\n\n    static calNumTrans(resultCmd, diffCmds, currentCmdIdx, cmdName, cmdValue, reset, resetVal, tVal) {\n        cmdName = cmdName.toLowerCase();\n        if (reset) {\n            if (typeof diffCmds.get(cmdName) !== 'undefined') {\n                let diffCmdIdxs = diffCmds.get(cmdName);\n                let flag = false;\n                for (let j = 0; j < diffCmdIdxs.length; j++) {\n                    if (diffCmdIdxs[j].cmdIdx === currentCmdIdx) {\n                        resultCmd += resetVal;\n                        flag = true;\n                        break;\n                    }\n                }\n                if (!flag) {\n                    resultCmd += cmdValue;\n                }\n            } else {\n                resultCmd += cmdValue;\n            }\n        } else {\n            if (cmdValue.length > 0) {\n                resultCmd += (parseFloat(cmdValue) + tVal);\n            }\n        }\n        return resultCmd;\n    }\n\n    /**\n     * doing transition with path\n     * @param {*} startD \n     * @param {*} endD \n     * @param {*} ratio \n     */\n    static calTransD(startD, endD, ratio, startDisD, endDisD) {\n        startD = startD.replace(/(?<=\\d)\\s(?=[mMlLhHvVcCsSqQtTaAzZ])/g, '').replace(/(?<=[mMlLhHvVcCsSqQtTaA])\\s(?=(\\d|[-+]))/g, '').replace(/\\s/g, ',');\n        endD = endD.replace(/(?<=\\d)\\s(?=[mMlLhHvVcCsSqQtTaAzZ])/g, '').replace(/(?<=[mMlLhHvVcCsSqQtTaA])\\s(?=(\\d|[-+]))/g, '').replace(/\\s/g, ',');\n        let resultCmd = '';\n        if (ratio === 0) {\n            resultCmd = startD;\n        } else if (ratio === 1) {\n            resultCmd = endD;\n        } else {\n            for (let i = 0, len = startDisD.length; i < len; i++) {\n                resultCmd += (i === 0 ? 'M' : 'L') + ((endDisD[i][0] - startDisD[i][0]) * ratio + startDisD[i][0]) + ',' + ((endDisD[i][1] - startDisD[i][1]) * ratio + startDisD[i][1]);\n            }\n        }\n\n        if (startD.charAt(startD.length - 1) === 'z' || startD.charAt(startD.length - 1) === 'Z') {\n            resultCmd += 'Z';\n        }\n        return resultCmd;\n    }\n\n    /** startAngle should smaller than endAngle\n     * @param {number} fromStartAngle start state of start angle\n     * @param {number} fromEndAngle start state of end angle\n     * @param {number} toStartAngle end state of start angle\n     * @param {number} toEndAngle end state of end angle\n     * @param {number} ratio 0-1 float number\n     * @param {Function<number,number,number>} interpolateFn customize interpolate function, input is (start, end, ratio), default is linear\n     * @returns {Array<number>} [startAngle, endAngle] of given ratio\n     */\n    static arcTransition(fromStartAngle, fromEndAngle, toStartAngle, toEndAngle, ratio, interpolateFn) {\n        let validAngle = (s, e) => e < s ? (() => { throw 'startAngle should smaller than endAngle' })() : null\n        validAngle(fromStartAngle, fromEndAngle)\n        validAngle(toStartAngle, toEndAngle)\n        let minimalAngle = (s, e) => e - Math.PI * 2 * Math.floor((e - s) / Math.PI / 2)\n        // uniform angle domain within 2*PI\n        fromEndAngle = minimalAngle(fromStartAngle, fromEndAngle)\n        toStartAngle = minimalAngle(fromStartAngle, toStartAngle)\n        toEndAngle = minimalAngle(toStartAngle, toEndAngle)\n        // find the cloest domain\n        toStartAngle -= Math.abs(toStartAngle - fromStartAngle) + Math.abs(toEndAngle - fromEndAngle) < 2 * Math.PI ? 0 : Math.PI * 2\n        toEndAngle = minimalAngle(toStartAngle, toEndAngle)\n        let interpolate = interpolateFn || ((s, e, r) => r * (e - s) + s)\n        return [interpolate(fromStartAngle, toStartAngle, ratio), interpolate(fromEndAngle, toEndAngle, ratio)]\n    }\n\n    static findDiffCmds(markStatus) {\n        let result = new Map();\n        markStatus.forEach((statusArr, markId) => {\n            let tmpDRecorder = [];\n            for (let i = 0; i < statusArr.length; i++) {\n                if (typeof statusArr[i] !== 'undefined') {\n                    tmpDRecorder.push(!statusArr[i].d ? 'm0,0' : statusArr[i].d);\n                }\n            }\n            if (tmpDRecorder.length > 0) {\n                CanisUtil.compareD(tmpDRecorder, result);\n            }\n        })\n        return result;\n    }\n\n    static compareD(dArr, result) {\n        let cmdRegExp = new RegExp(/[mlhvcsqta][^mlhvcsqtaz]*/g);\n        let firstD = dArr[0];\n        firstD = firstD.toLowerCase();\n        firstD = firstD.replace(/(?<=\\d)\\s(?=[mlhvcsqtaz])/g, '').replace(/(?<=[mlhvcsqta])\\s(?=(\\d|[-+]))/g, '').replace(/\\s/g, ',');\n        let firstDCmds = firstD.match(cmdRegExp);\n        for (let i = 1; i < dArr.length; i++) {\n            let tmpD = dArr[i];\n            tmpD = tmpD.toLowerCase();\n            tmpD = tmpD.replace(/(?<=\\d)\\s(?=[mlhvcsqtaz])/g, '').replace(/(?<=[mlhvcsqta])\\s(?=(\\d|[-+]))/g, '').replace(/\\s/g, ',');\n            let tmpDCmds = tmpD.match(cmdRegExp);\n            for (let j = 0; j < firstDCmds.length; j++) {\n                if (typeof tmpDCmds[j] === 'undefined') {\n                    let cmdName = firstDCmds[j].substring(0, 1);\n                    if (typeof result.get(cmdName) === 'undefined') {\n                        result.set(cmdName, []);\n                    }\n                    let obj = {};\n                    obj.cmdIdx = j;\n                    obj.diffAttrIdxs = [];\n                    let firstDCmdValue = firstDCmds[j].substring(1);\n                    let firstDCmdValues = firstDCmdValue.split(',');\n                    for (let m = 0; m < firstDCmdValues.length; m++) {\n                        obj.diffAttrIdxs.push(m);\n                    }\n                    result.get(cmdName).push(obj);\n                } else {\n                    let cmdName = tmpDCmds[j].substring(0, 1);\n                    let tmpDCmdValue = tmpDCmds[j].substring(1);\n                    let firstDCmdValue = firstDCmds[j].substring(1);\n                    if (tmpDCmdValue !== firstDCmdValue) {\n                        if (typeof result.get(cmdName) === 'undefined') {\n                            result.set(cmdName, []);\n                        }\n                        let obj = {};\n                        obj.cmdIdx = j;\n                        obj.diffAttrIdxs = [];\n                        let tmpDCmdValues = tmpDCmdValue.split(',');\n                        let firstDCmdValues = firstDCmdValue.split(',');\n                        for (let m = 0; m < tmpDCmdValues.length; m++) {\n                            if (Math.floor(parseFloat(tmpDCmdValues[m]) * 1000) !== Math.floor(parseFloat(firstDCmdValues[m]) * 1000)) {\n                                obj.diffAttrIdxs.push(m);\n                            }\n                        }\n                        //check whether have already added this cmd\n                        let hasFlag = false;\n                        for (let m = 0; m < result.get(cmdName).length; m++) {\n                            if (result.get(cmdName)[m].cmdIdx === obj.cmdIdx) {\n                                hasFlag = true;\n                                result.get(cmdName)[m].diffAttrIdxs = [...new Set([...result.get(cmdName)[m].diffAttrIdxs, ...obj.diffAttrIdxs])];\n                                break;\n                            }\n                        }\n                        if (!hasFlag) {\n                            result.get(cmdName).push(obj);\n                        }\n                    }\n                }\n\n            }\n        }\n    }\n\n    static getTransformAttrs(dom) {\n        let tr = dom.getAttribute('transform');\n        if (tr) {\n            tr = tr.replace(/translate|scale|rotate|\\s/g, (m) => {\n                return m === ' ' ? '' : '@' + m;\n            });\n            tr = tr.replace(/(^@*)|(@*$)/g, '').split('@');\n            let scaleStr = '', transStr = '';\n            for (let i = 0; i < tr.length; i++) {\n                if (tr[i].indexOf('translate') >= 0) {\n                    transStr = tr[i];\n                } else if (tr[i].indexOf('scale') >= 0) {\n                    scaleStr = tr[i];\n                }\n            }\n            let transPosiStr = ['0', '0'], scaleNumStr = '1';\n            if (transStr !== '') {\n                transPosiStr = transStr.replace(/translate\\(| |\\)/g, '').split(',');\n            }\n            if (scaleStr !== '') {\n                scaleNumStr = scaleStr.replace(/scale\\(| |\\)/g, '');\n            }\n            return { transNums: [parseFloat(transPosiStr[0]), parseFloat(transPosiStr[1])], scaleNum: parseFloat(scaleNumStr) };\n        }\n        return { transNums: [0.0, 0.0], scaleNum: 1.0 };\n    }\n\n    /**\n     * check if the input prop is a valid property of the input tag\n     * @param {*} tagName \n     * @param {*} propName \n     */\n    static checkValidProp(tagName, propName) {\n        switch (tagName) {\n            case 'circle':\n                return ['opacity', 'cx', 'cy', 'r', 'stroke', 'stroke-width', 'fill'].includes(propName);\n            case 'ellipse':\n                return ['opacity', 'cx', 'cy', 'rx', 'ry', 'stroke', 'stroke-width', 'fill'].includes(propName);\n            case 'image':\n                return ['x', 'y', 'width', 'height', 'href', 'xlink:href', 'preserveAspectRatio'].includes(propName);\n            case 'line':\n                return ['opacity', 'x1', 'x2', 'y1', 'y2', 'stroke', 'stroke-width', 'fill'].includes(propName);\n            case 'path':\n                return ['opacity', 'd', 'stroke', 'stroke-width', 'fill'].includes(propName);\n            case 'polygon':\n            case 'polyline':\n                return ['opacity', 'points', 'stroke', 'stroke-width', 'fill'].includes(propName);\n            case 'rect':\n                return ['opacity', 'x', 'y', 'width', 'height', 'rx', 'ry', 'stroke', 'stroke-width', 'fill'].includes(propName);\n            case 'text':\n                return ['opacity', 'x', 'y', 'dx', 'dy', 'textContent'].includes(propName);\n            default:\n                return false;\n        }\n    }\n\n    /**\n     * check if a string contains html tag\n     */\n    static checkHTML(str) {\n        var reg = /<[^>]+>/g;\n        return reg.test(str);\n    }\n}\n\nCanisUtil.colorNames = new Map([['aliceblue', '#f0f8ff'], ['antiquewhite', '#faebd7'], ['aqua', '#00ffff'], ['aquamarine', '#7fffd4'], ['azure', '#f0ffff'], ['beige', '#f5f5dc'], ['bisque', '#ffe4c4'], ['black', '#000000'], ['blanchedalmond', '#ffebcd'], ['blue', '#0000ff'], ['blueviolet', '#8a2be2'], ['brown', '#a52a2a'], ['burlywood', '#deb887'], ['cadetblue', '#5f9ea0'], ['chartreuse', '#7fff00'], ['chocolate', '#d2691e'], ['coral', '#ff7f50'], ['cornflowerblue', '#6495ed'], ['cornsilk', '#fff8dc'], ['crimson', '#dc143c'], ['cyan', '#00ffff'], ['darkblue', '#00008b'], ['darkcyan', '#008b8b'], ['darkgoldenrod', '#b8860b'], ['darkgray', '#a9a9a9'], ['darkgrey', '#a9a9a9'], ['darkgreen', '#006400'], ['darkkhaki', '#bdb76b'], ['darkmagenta', '#8b008b'], ['darkolivegreen', '#556b2f'], ['darkorange', '#ff8c00'], ['darkorchid', '#9932cc'], ['darkred', '#8b0000'], ['darksalmon', '#e9967a'], ['darkseagreen', '#8fbc8f'], ['darkslateblue', '#483d8b'], ['darkslategray', '#2f4f4f'], ['darkslategrey', '#2f4f4f'], ['darkturquoise', '#00ced1'], ['darkviolet', '#9400d3'], ['deeppink', '#ff1493'], ['deepskyblue', '#00bfff'], ['dimgray', '#696969'], ['dimgrey', '#696969'], ['dodgerblue', '#1e90ff'], ['firebrick', '#b22222'], ['floralwhite', '#fffaf0'], ['forestgreen', '#228b22'], ['fuchsia', '#ff00ff'], ['gainsboro', '#dcdcdc'], ['ghostwhite', '#f8f8ff'], ['gold', '#ffd700'], ['goldenrod', '#daa520'], ['gray', '#808080'], ['grey', '#808080'], ['green', '#008000'], ['greenyellow', '#adff2f'], ['honeydew', '#f0fff0'], ['hotpink', '#ff69b4'], ['indianred ', '#cd5c5c'], ['indigo  ', '#4b0082'], ['ivory', '#fffff0'], ['khaki', '#f0e68c'], ['lavender', '#e6e6fa'], ['lavenderblush', '#fff0f5'], ['lawngreen', '#7cfc00'], ['lemonchiffon', '#fffacd'], ['lightblue', '#add8e6'], ['lightcoral', '#f08080'], ['lightcyan', '#e0ffff'], ['lightgoldenrodyellow', '#fafad2'], ['lightgray', '#d3d3d3'], ['lightgrey', '#d3d3d3'], ['lightgreen', '#90ee90'], ['lightpink', '#ffb6c1'], ['lightsalmon', '#ffa07a'], ['lightseagreen', '#20b2aa'], ['lightskyblue', '#87cefa'], ['lightslategray', '#778899'], ['lightslategrey', '#778899'], ['lightsteelblue', '#b0c4de'], ['lightyellow', '#ffffe0'], ['lime', '#00ff00'], ['limegreen', '#32cd32'], ['linen', '#faf0e6'], ['magenta', '#ff00ff'], ['maroon', '#800000'], ['mediumaquamarine', '#66cdaa'], ['mediumblue', '#0000cd'], ['mediumorchid', '#ba55d3'], ['mediumpurple', '#9370db'], ['mediumseagreen', '#3cb371'], ['mediumslateblue', '#7b68ee'], ['mediumspringgreen', '#00fa9a'], ['mediumturquoise', '#48d1cc'], ['mediumvioletred', '#c71585'], ['midnightblue', '#191970'], ['mintcream', '#f5fffa'], ['mistyrose', '#ffe4e1'], ['moccasin', '#ffe4b5'], ['navajowhite', '#ffdead'], ['navy', '#000080'], ['oldlace', '#fdf5e6'], ['olive', '#808000'], ['olivedrab', '#6b8e23'], ['orange', '#ffa500'], ['orangered', '#ff4500'], ['orchid', '#da70d6'], ['palegoldenrod', '#eee8aa'], ['palegreen', '#98fb98'], ['paleturquoise', '#afeeee'], ['palevioletred', '#db7093'], ['papayawhip', '#ffefd5'], ['peachpuff', '#ffdab9'], ['peru', '#cd853f'], ['pink', '#ffc0cb'], ['plum', '#dda0dd'], ['powderblue', '#b0e0e6'], ['purple', '#800080'], ['rebeccapurple', '#663399'], ['red', '#ff0000'], ['rosybrown', '#bc8f8f'], ['royalblue', '#4169e1'], ['saddlebrown', '#8b4513'], ['salmon', '#fa8072'], ['sandybrown', '#f4a460'], ['seagreen', '#2e8b57'], ['seashell', '#fff5ee'], ['sienna', '#a0522d'], ['silver', '#c0c0c0'], ['skyblue', '#87ceeb'], ['slateblue', '#6a5acd'], ['slategray', '#708090'], ['slategrey', '#708090'], ['snow', '#fffafa'], ['springgreen', '#00ff7f'], ['steelblue', '#4682b4'], ['tan', '#d2b48c'], ['teal', '#008080'], ['thistle', '#d8bfd8'], ['tomato', '#ff6347'], ['turquoise', '#40e0d0'], ['violet', '#ee82ee'], ['wheat', '#f5deb3'], ['white', '#ffffff'], ['whitesmoke', '#f5f5f5'], ['yellow', '#ffff00'], ['yellowgreen', '#9acd32']])\n\nexport class Viewport {\n    constructor() {\n        this.chartWidth = 0;\n        this.chartHeight = 0;\n    }\n    setViewport(w, h) {\n        this.chartWidth = w;\n        this.chartHeight = h;\n    }\n}\n\nexport class AssetTemplate {\n    construcor(tagName, visualProps, animateProps, boundingBox, jsMovinLayerIdx) {\n        //use to compare\n        this.tagName = tagName;\n        this.visualProps = visualProps;\n        this.animateProps = animateProps;\n        //use to calculate offsets and reference\n        this.boundingBox = boundingBox;\n        this.jsMovinLayerIdx = jsMovinLayerIdx;\n    }\n\n    /**\n     * compare the new asset template with the existing tempalte \n     * @param {*} candidateAt : candidate asset template\n     * @param {*} at : asset template\n     */\n    static compareTemplate(candidateAt, at) {\n        if (candidateAt.tagName !== at.tagName) {\n            return false;\n        }\n        if (!this.compareVisualProps(candidateAt.visualProps, at.visualProps)) {\n            return false;\n        }\n    }\n\n    static compareVisualProps(p1, p2) {\n        const safeProps = ['x', 'y', 'width', 'height', 'r', 'opacity', 'd']\n        const allKeys = [...Object.keys(p1), ...Object.keys(p2)];\n        const differentKeys = allKeys.filter((k) => {\n            typeof p1[k] === 'undefined' || typeof p2[k] === 'undefined' || p1[k] !== p2[k];\n        })\n\n        if (differentKeys.includes('d')) {\n            const removeNumRegExp = new RegExp(/[0-9\\.,\\s]/g);\n            return p1['d'].replace(removeNumRegExp, '') === p2['d'].replace(removeNumRegExp, '');\n        }\n\n        return differentKeys.every((k) => safeProps.indexOf(k) >= 0);\n    }\n}","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n","__webpack_require__.amdO = {};","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","var scriptUrl;\nif (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + \"\";\nvar document = __webpack_require__.g.document;\nif (!scriptUrl && document) {\n\tif (document.currentScript)\n\t\tscriptUrl = document.currentScript.src;\n\tif (!scriptUrl) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tif(scripts.length) {\n\t\t\tvar i = scripts.length - 1;\n\t\t\twhile (i > -1 && !scriptUrl) scriptUrl = scripts[i--].src;\n\t\t}\n\t}\n}\n// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration\n// or pass an empty string (\"\") and set the __webpack_public_path__ variable from your code to use your own logic.\nif (!scriptUrl) throw new Error(\"Automatic publicPath is not supported in this browser\");\nscriptUrl = scriptUrl.replace(/#.*$/, \"\").replace(/\\?.*$/, \"\").replace(/\\/[^\\/]+$/, \"/\");\n__webpack_require__.p = scriptUrl;","__webpack_require__.b = document.baseURI || self.location.href;\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = {\n\t143: 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\n// no HMR\n\n// no HMR manifest\n\n// no on chunks loaded\n\n// no jsonp function","__webpack_require__.nc = undefined;","// startup\n// Load entry module and return exports\n// This entry module is referenced by other modules so it can't be inlined\nvar __webpack_exports__ = __webpack_require__(6752);\n"],"names":["___CSS_LOADER_URL_IMPORT_0___","URL","___CSS_LOADER_URL_IMPORT_1___","___CSS_LOADER_URL_IMPORT_2___","___CSS_LOADER_URL_IMPORT_3___","___CSS_LOADER_URL_IMPORT_4___","___CSS_LOADER_URL_IMPORT_5___","___CSS_LOADER_EXPORT___","push","module","id","___CSS_LOADER_URL_REPLACEMENT_0___","___CSS_LOADER_URL_REPLACEMENT_1___","___CSS_LOADER_URL_REPLACEMENT_2___","___CSS_LOADER_URL_REPLACEMENT_3___","___CSS_LOADER_URL_REPLACEMENT_4___","___CSS_LOADER_URL_REPLACEMENT_5___","___CSS_LOADER_URL_IMPORT_6___","___CSS_LOADER_URL_IMPORT_7___","___CSS_LOADER_URL_REPLACEMENT_6___","___CSS_LOADER_URL_REPLACEMENT_7___","___CSS_LOADER_URL_IMPORT_8___","___CSS_LOADER_URL_IMPORT_9___","___CSS_LOADER_URL_IMPORT_10___","___CSS_LOADER_URL_IMPORT_11___","___CSS_LOADER_URL_IMPORT_12___","___CSS_LOADER_URL_IMPORT_13___","___CSS_LOADER_URL_IMPORT_14___","___CSS_LOADER_URL_IMPORT_15___","___CSS_LOADER_URL_REPLACEMENT_8___","___CSS_LOADER_URL_REPLACEMENT_9___","___CSS_LOADER_URL_REPLACEMENT_10___","___CSS_LOADER_URL_REPLACEMENT_11___","___CSS_LOADER_URL_REPLACEMENT_12___","___CSS_LOADER_URL_REPLACEMENT_13___","___CSS_LOADER_URL_REPLACEMENT_14___","___CSS_LOADER_URL_REPLACEMENT_15___","exports","cssWithMappingToString","list","toString","this","map","item","content","needLayer","concat","length","join","i","modules","media","dedupe","supports","layer","undefined","alreadyImportedModules","k","_k","url","options","String","__esModule","default","test","slice","hash","needQuotes","replace","cssMapping","btoa","base64","unescape","encodeURIComponent","JSON","stringify","data","sourceMapping","_defineProperties","target","props","descriptor","enumerable","configurable","writable","Object","defineProperty","key","value","EasingFactory","instance","Constructor","TypeError","_classCallCheck","staticProps","prototype","calculateBaseTransform","dom","root","getScreenCTM","inverse","multiply","greatestCommonDivisor","x","y","Math","abs","t","getBoundingBox","svgRoot","parentElement","SVGGraphicsElement","baseBox","refBBox","getBBox","e","f","width","height","getLeafNodes","master","Array","call","getElementsByTagName","filter","elem","hasChildNodes","childNodes","nodeType","getBaselineHeight","ctx","document","createElement","getContext","fontSettings","getComputedStyle","font","measureText","actualBoundingBoxDescent","encodeLineCap","type","encodeLineJoin","encodeTextAnchor","leastCommonMultiple","get","_layer","LayerFactory","_easing","_path","PathMaker","obj","_v","MaskType","JSMovin","fps","arguments","_defineProperty","fr","w","h","ddd","layers","assets","fonts","ip","op","protoProps","domLayerOrAssetId","hierarchy","ref","splice","maskOrDom","layerRefOrIndex","layerRef","layerIndex","maskLayer","maskType","Alpha","JSMovinLayer","indexOf","tt","Error","layerRefs","_this","forEach","innerIndex","mask","sort","a","b","layerWrapper","refId","maxTime","reduce","p","v","uniform","parse","toJSON","_render","_helper","_slicedToArray","arr","isArray","_arrayWithHoles","Symbol","iterator","_arr","_n","_d","_e","_s","_i","next","done","err","_iterableToArrayLimit","_nonIterableRest","_toConsumableArray","arr2","_arrayWithoutHoles","iter","from","_iterableToArray","_nonIterableSpread","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","sym","getOwnPropertyDescriptor","apply","_createClass","anchor","position","s","o","transform","getDefaultProperty","staticValue","readyToSet","idx","time","easing","wrap","existKeyframe","previousKeyframeCount","shapes","it","find","shape","ty","findPropertyConfig","hasTransform","config","source","getOwnPropertyDescriptors","defineProperties","_objectSpread","groupShapes","base","index","ks","findOrInsertPropertyConfig","max","values","timeRange","updateTimeRange","path","_this$commonPropertyM2","commonPropertyMapping","console","error","doc","d","convertToStaticProperty","startFrame","endFrame","startValue","endValue","linear","startLineCount","endLineCount","min","needCopy","needLength","fill","commonMultiple","upsample","round","_map2","_this$commonPropertyM4","textProp","tmpStartValue","tmpEndValue","convertToAnimatableProperty","addKeyframe","coordinate","r","boundingBox","rect","sr","ao","generateTransform","st","bm","render","left","top","renderPlainGlyph","cx","cy","rx","ry","assetList","fontList","domType","SVGTextElement","SVGImageElement","SVGGElement","domLeaves","precompLayer","preCompAsset","preCompRefId","unshift","_shapeLayer","imageLayer","_renderImage2","renderImage","imageRefId","imageAsset","textLayer","baseLineHeight","textAnchorWeight","textAnchor","parseFloat","fillOpacity","_renderText2","renderText","textData","fName","_svgPathParser","pathData","c","Infinity","currentX","currentY","offsetX","offsetY","p0","p1","p2","p3","sqrt","multi","pow","ratio","result","_len","order0","_key","order1","calculateHighlyOrder","order2","order3","pathReady","lineTo","pathStart","pathChain","moveTo","updateXY","horizontalTo","verticalTo","c1x","c1y","c2x","c2y","calculateBezierMinMax","lastbezier","nextCVX","nextCVY","cubicBezierCurveTo","quadraticBezierCurveTo","xAxisRotation","largeArcFlag","sweepFlag","cSeries","a2c","iovList","arcTo","pathRef","pop","pathDataWithType","_this2","parseSVG","pathDataItem","code","moveToRelative","lineToRelative","horizontalToRelative","verticalToRelative","x1","y1","x2","y2","cubicBezierCurveToRelative","quadraticBezierCurveToRelative","largeArc","sweep","arcToRelative","closePath","_this3","Number","isInteger","copyPath","oArray","iArray","xArray","yArray","stepRatio","xSplitArray","calculateBezierSplit","ySplitArray","_p0x","_p1x","shift","_p3x","_p2x","_p0y","_p1y","_p3y","_p2y","p0x","p1x","p3x","p2x","p0y","p1y","p3y","p2y","angle","large_arc_flag","sweep_flag","recursive","xy","_120","PI","rad","res","rotate","cos","sin","f1","f2","rx2","ry2","asin","df","f2old","x2old","y2old","c1","s1","c2","s2","tan","hx","hy","m1","m2","m3","m4","split","newres","ii","baseDom","items","node","renderGroup","group","hd","postActions","pathMaker","nm","styles","window","stroke","raw","parseInt","strokeOpacity","strokeWidth","lc","strokeLinecap","lj","strokeLinejoin","posX","posY","opacity","baseTransform","baseBBox","sk","sa","addVisualEncodings","SVGCircleElement","svgLength","baseVal","convertToSpecifiedUnits","SVGLength","SVG_LENGTHTYPE_PX","valueInSpecifiedUnits","SVGEllipseElement","_mapKey$map","_mapKey$map2","_pathMaker","SVGLineElement","_mapKey$map3","_mapKey$map4","_pathMaker2","SVGPathElement","getAttribute","SVGPolygonElement","SVGPolylineElement","points","iterablePoints","_offsetX","_offsetY","_pathMaker4","SVGRectElement","_mapKey2$map","_mapKey2$map2","_pathMaker5","renderGlyph","args","computedStyle","fontSize","fontFamily","trim","fontStyle","fontWeight","fontColor","fontName","fontExist","fFamily","fStyle","fWeight","innerHTML","j","tr","ls","fc","m","domHeightVal","domWidthVal","canvas","drawImage","dataUrl","toDataURL","assetExist","asset","factory","navigator","svgNS","locationHref","_useWebWorker","initialDefaultFrame","setWebWorker","flag","getWebWorker","setLocationHref","getLocationHref","createTag","extendPrototype","sources","destination","sourcePrototype","len","attr","hasOwnProperty","getDescriptor","prop","createProxyFunction","ProxyFunction","audioControllerFactory","AudioController","audioFactory","audios","_volume","_isMuted","addAudio","audio","pause","resume","setRate","rateValue","createAudio","assetPath","Howl","src","isPlaying","play","seek","playing","rate","setVolume","setAudioFactory","_updateVolume","mute","unmute","getVolume","volume","createTypedArray","createRegularArray","Uint8ClampedArray","Float32Array","Int16Array","createSizedArray","_typeof$6","constructor","subframeEnabled","expressionsPlugin","idPrefix$1","isSafari","userAgent","_shouldRoundValues","bmPow","bmSqrt","bmFloor","floor","bmMax","bmMin","BMMath","ProjectInterface$1","propertyNames","random","val","absArr","defaultCurveSegments","degToRads","roundCorner","roundValues","bmRnd","styleDiv","element","style","display","transformOrigin","webkitTransformOrigin","backfaceVisibility","webkitBackfaceVisibility","transformStyle","webkitTransformStyle","mozTransformStyle","BMEnterFrameEvent","currentTime","totalTime","frameMultiplier","direction","BMCompleteEvent","BMCompleteLoopEvent","totalLoops","currentLoop","BMSegmentStartEvent","firstFrame","totalFrames","BMDestroyEvent","BMRenderFrameErrorEvent","nativeError","BMConfigErrorEvent","BMAnimationConfigErrorEvent","createElementID","_count","HSVtoRGB","g","q","RGBtoHSV","addSaturationToRGB","color","offset","hsv","addBrightnessToRGB","addHueToRGB","rgbToHex","hex","colorMap","setSubframeEnabled","getSubframeEnabled","setExpressionsPlugin","getExpressionsPlugin","setDefaultCurveSegments","getDefaultCurveSegments","setIdPrefix","getIdPrefix","createNS","createElementNS","_typeof$5","dataManager","workerFn","workerInstance","_counterId","processes","workerProxy","onmessage","postMessage","_workerSelf","setupWorker","fn","Worker","Blob","blob","createObjectURL","createWorker","completeLayers","comps","layerData","jLen","kLen","completed","td","hasMask","maskProps","masksProperties","pt","convertPathsToAbsoluteValues","findCompLayers","completeShapes","comp","findComp","__used","checkVersion","minimum","animVersionString","animVersion","minimumVersion","checkText","iterateLayers","documentData","animationData","checkChars","chars","charData","checkPathProperties","checkColors","iterateShapes","checkShapes","completeClosingShapes","closed","cl","moduleOb","__complete","completeChars","dataFunctionManager","assetLoader","formatResponse","xhr","contentTypeHeader","getResponseHeader","responseType","response","responseText","load","fullPath","callback","errorCallback","XMLHttpRequest","onreadystatechange","readyState","status","open","send","completeData","payload","animation","event","process","onComplete","onError","createProcess","loadAnimation","processId","location","origin","pathname","loadData","completeAnimation","anim","ImagePreloader","proxyImage","fillStyle","fillRect","imageLoaded","loadedAssets","totalImages","loadedFootagesCount","totalFootages","imagesLoadedCb","footageLoaded","getAssetsPath","assetData","assetsPath","originalPath","imagePath","u","testImageLoaded","img","intervalId","setInterval","_imageLoaded","clearInterval","bind","createFootageData","ob","footageData","_footageLoaded","ImagePreloaderFactory","images","loadAssets","cb","_createImageData","setAssetsPath","setPath","loadedImages","loadedFootages","destroy","getAsset","createImgData","crossOrigin","addEventListener","createImageData","setAttributeNS","_elementHelper","append","appendChild","setCacheType","elementHelper","BaseEvent","triggerEvent","eventName","_cbs","callbacks","removeEventListener","markerParser","parsePayloadLines","line","lines","keysCount","_markers","markers","_marker","markerData","tm","duration","dr","cm","_","__","name","ProjectInterface","registerComposition","compositions","_thisProjectFunction","prepareFrame","xt","currentFrame","compInterface","renderers","registerRenderer","getRenderer","_typeof$4","AnimationItem","isLoaded","currentRawFrame","frameRate","frameMult","playSpeed","playDirection","playCount","isPaused","autoplay","loop","renderer","animationID","timeCompleted","segmentPos","isSubframeEnabled","segments","_idle","_completedLoop","projectInterface","imagePreloader","audioController","configAnimation","onSetupError","onSegmentComplete","drawnFrameEvent","setParams","params","wrapper","container","animType","RendererClass","rendererSettings","globalData","defs","setProjectInterface","autoloadSegments","initialSegment","setupAnimation","lastIndexOf","substr","fileName","trigger","setData","wrapperAttributes","attributes","getNamedItem","prerender","includeLayers","newLayers","fontManager","addChars","addFonts","initExpressions","loadNextSegment","segment","segmentPath","loadSegments","imagesLoaded","checkLoaded","preloadImages","animData","searchExtraCompositions","updaFrameModifier","waitForFontsLoaded","triggerConfigError","setTimeout","rendererType","initItems","gotoFrame","resize","updateContainerSize","setSubframe","renderFrame","triggerRenderFrameError","togglePause","stop","setCurrentRawFrameValue","getMarkerData","markerName","marker","goToAndStop","isFrame","numValue","isNaN","frameModifier","goToAndPlay","playSegments","advanceTime","nextValue","_isComplete","checkSegments","adjustSegment","setSpeed","setDirection","setSegment","init","end","pendingFrame","forceFlag","resetSegments","onEnterFrame","onLoopComplete","onSegmentStart","onDestroy","getPath","getAssetData","hide","show","getDuration","updateDocumentData","getElementByPath","animationManager","registeredAnimations","initTime","playingAnimationsNum","_stopped","_isFrozen","removeElement","ev","animItem","subtractPlayingCount","registerAnimation","addPlayingCount","activate","nowTime","elapsedTime","requestAnimationFrame","first","searchAnimations","standalone","animElements","getElementsByClassName","lenAnims","setAttribute","body","innerText","div","freeze","unfreeze","getRegisteredAnimations","animations","BezierFactory","str","beziers","bezEasing","BezierEasing","kSplineTableSize","kSampleStepSize","float32ArraySupported","A","aA1","aA2","B","C","calcBezier","aT","getSlope","_p","_mSampleValues","_precomputed","mX1","mY1","mX2","mY2","_precompute","_getTForX","_calcSampleValues","aX","mSampleValues","intervalStart","currentSample","lastSample","guessForT","initialSlope","aGuessT","currentSlope","newtonRaphsonIterate","aA","aB","currentT","binarySubdivide","pooling","poolFactory","initialLength","_create","_release","_length","_maxLength","pool","newElement","release","bezierLengthPool","addedLength","percents","lengths","segmentsLengthPool","totalLength","bezFunction","math","pointOnLine2D","x3","y3","det1","getBezierLength","pt1","pt2","pt3","pt4","ptCoord","perc","ptDistance","curveSegments","point","lastPoint","lengthData","BezierData","segmentLength","PointData","partial","partialLength","storedData","buildBezierData","bezierName","bezierData","getDistancePerc","initPos","lengthPos","lPerc","dir","bezierSegmentPoints","getSegmentsLength","shapeData","segmentsLength","pathV","pathO","pathI","getNewSegment","startPerc","endPerc","t0","t1","u0","u1","u0u0u0","t0u0u0_3","t0t0u0_3","t0t0t0","u0u0u1","t0u0u1_3","t0t0u1_3","t0t0t1","u0u1u1","t0u1u1_3","t0t1u1_3","t0t1t1","u1u1u1","t1u1u1_3","t1t1u1_3","t1t1t1","getPointInSegment","percent","pointOnLine3D","z1","z2","z3","diffDist","dist1","dist2","dist3","bez","PropertyFactory","initFrame","mathAbs","interpolateValue","frameNum","caching","newValue","offsetTime","propType","pv","keyData","nextKeyData","keyframeMetadata","fnc","iterationIndex","lastIndex","keyframes","keyframesMetadata","out","quat","qx","qy","qz","qw","heading","attitude","bank","nextKeyTime","keyTime","to","ti","ind","__fnct","getBezierEasing","n","segmentPerc","distanceInLine","lastFrame","_lastKeyframeIndex","_lastAddedLength","_lastPoint","outX","outY","inX","inY","keyValue","sh","omega","cosom","sinom","scale0","scale1","ax","ay","az","aw","bx","by","bz","bw","acos","slerp","createQuaternion","atan2","c3","s3","getValueAtCurrentTime","renderedFrame","endTime","_caching","renderResult","setVValue","multipliedValue","mult","_mdf","processEffectsSequence","frameId","effectsSequence","lock","_isFirstFrame","finalValue","kf","addEffect","effectFunction","addDynamicProperty","ValueProperty","vel","getValue","MultiDimensionalProperty","KeyframedValueProperty","KeyframedMultidimensionalProperty","arrLen","getProp","DynamicPropertyContainer","dynamicProperties","_isAnimated","iterateDynamicProperties","initDynamicPropertyContainer","pointPool","ShapePath","setPathData","setLength","doubleArrayLength","setXYAt","pos","setTripleAt","vX","vY","oX","oY","iX","iY","reverse","newPath","vertices","outPoints","inPoints","cnt","shapePool","shapePath","clone","cloned","ShapeCollection","addShape","releaseShapes","shapeCollectionPool","newShapeCollection","shapeCollection","ShapePropertyFactory","interpolateShape","previousValue","keyPropS","keyPropE","isHold","vertexValue","interpolateShapeCurrentTime","resetShape","paths","localShapeCollection","shape1","shape2","shapesEqual","ShapeProperty","reset","KeyframedShapeProperty","EllShapeProperty","cPoint","EllShapePropertyFactory","convertEllToPath","s0","_cw","StarShapeProperty","StarShapePropertyFactory","sy","ir","is","convertToPath","convertStarToPath","convertPolygonToPath","or","os","roundness","perimSegment","numPts","longFlag","longRad","shortRad","longRound","shortRound","longPerimSegment","shortPerimSegment","currentAng","ox","oy","RectShapeProperty","RectShapePropertyFactory","convertRectToPath","v0","v1","Matrix","_cos","_sin","_tan","_rnd","mCos","mSin","_t","rotateX","rotateY","rotateZ","shear","sx","skew","skewFromAxis","scale","sz","setTransform","l","translate","tx","tz","a2","b2","d2","e2","g2","h2","i2","j2","k2","l2","n2","o2","_identityCalculated","a1","b1","d1","e1","g1","h1","i1","j1","k1","l1","n1","o1","isIdentity","_identity","equals","matr","cloneFromProps","applyToPoint","z","applyToX","applyToY","applyToZ","getInverseMatrix","determinant","inverseMatrix","inversePoint","applyToPointArray","inversePoints","pts","retPts","applyToTriplePoints","p4","p5","p12","p13","applyToPointStringified","toCSS","cssValue","roundMatrixProperty","to2dCSS","_typeof$3","lottie","setLocation","href","setSubframeRendering","setPrefix","prefix","setQuality","inBrowser","installPlugin","plugin","getFactory","checkReady","readyStateCheckInterval","getQueryVariable","variable","vars","queryString","pair","decodeURIComponent","useWebWorker","setIDPrefix","__getFactory","version","scripts","myScript","ShapeModifiers","modifiers","registerModifier","getModifier","ShapeModifier","TrimModifier","PuckerAndBloatModifier","initModifierProperties","addShapeToModifier","setAsAnimated","processKeys","sValue","eValue","pathsData","calculateShapeEdges","shapeLength","totalModifierLength","segmentOb","shapeSegments","shapeS","shapeE","releasePathsData","processShapes","shapePaths","totalShapeLength","edges","newShapesData","addShapes","lastShape","addPaths","newPaths","addSegment","newShape","addSegmentFromArray","shapeSegment","currentLengthData","segmentCount","amount","processPath","centerPoint","pathLength","clonedPath","TransformPropertyFactory","defaultVector","TransformProperty","pre","appliedTransformations","px","py","pz","rz","_isDirty","applyToMatrix","mat","forceRender","precalculateMatrix","autoOriented","v2","getValueAtTime","autoOrient","_addDynamicProperty","getTransformProperty","RepeaterModifier","RoundCornersModifier","getFontProperties","fontData","toLowerCase","weight","so","eo","pMatrix","rMatrix","sMatrix","tMatrix","matrix","applyTransforms","inv","scaleX","scaleY","elemsData","_currentCopies","_elements","_groups","resetElements","elements","_processed","cloneElements","newElements","changeGroupRender","renderFlag","itemsTransform","cont","hasReloaded","copies","ceil","ix","reloadShapes","elems","transformData","offsetModulo","roundOffset","pProps","rProps","sProps","iteration","mProps","rd","currentV","currentI","currentO","closerV","distance","newPosPerc","FontManager","emptyChar","size","combinedCharacters","surrogateModifiers","zeroWidthJoiner","setUpNode","family","parentNode","fontVariant","letterSpacing","offsetWidth","familyArray","enabledFamilies","trimFontOptions","parent","createHelper","def","helper","engine","fontProps","tHelper","textContent","fClass","tCanvasHelper","OffscreenCanvas","text","getComputedTextLength","Font","typekitLoaded","_warned","Date","now","setIsLoadedBinded","setIsLoaded","checkLoadedFontsBinded","checkLoadedFonts","isModifier","firstCharCode","secondCharCode","sum","isZeroWidthJoiner","isCombinedCharacter","_char3","fontPrototype","found","ch","cache","fontArr","_pendingFonts","loadedSelector","shouldLoadFont","loaded","monoCase","sansCase","fPath","fOrigin","querySelectorAll","rel","sc","getCharData","_char","charCodeAt","warn","getFontByName","_char2","doubleSize","singleSize","loadedCount","removeChild","RenderableElement","initRenderable","isInRange","hidden","isTransparent","renderableComponents","addRenderableComponent","component","removeRenderableComponent","prepareRenderableFrame","num","checkLayerLimits","checkTransparency","finalTransform","mProp","renderConfig","hideOnTransparent","renderRenderable","sourceRectAtTime","getLayerSize","MaskManagerInterface","MaskInterface","_mask","_data","maskManager","_masksInterfaces","viewData","ExpressionPropertyInterface","defaultUnidimensionalValue","defaultMultidimensionalValue","completeProperty","expressionValue","property","getVelocityAtTime","numKeys","valueProp","assign","valueAtTime","speedAtTime","getSpeedAtTime","velocityAtTime","propertyGroup","defaultGetter","UnidimensionalPropertyInterface","arrValue","MultidimensionalPropertyInterface","TransformExpressionInterface","_thisFunction","rotation","xRotation","yRotation","xPosition","yPosition","zPosition","anchorPoint","_px","_py","_pz","_transformFactory","LayerExpressionInterface","getMatrix","toWorldMat","_elem","toWorldVec","applyPoint","toWorld","fromWorldVec","invertPoint","fromWorld","fromComp","sampleImage","transformInterface","_thisLayerFunction","shapeInterface","effect","textInterface","toComp","anchorPointDescriptor","hasParent","layerInterface","anchor_point","active","startTime","inPoint","outPoint","_name","registerMaskInterface","registerEffectsInterface","effects","propertyGroupFactory","interfaceFunction","parentPropertyGroup","PropertyInterface","propertyName","EffectsExpressionInterface","createGroupInterface","groupInterface","ef","mn","effectElements","_propertyGroup","createValueInterface","numProperties","np","enabled","en","expressionProperty","setGroupProperty","createEffectsInterface","effectsManager","effectsData","CompExpressionInterface","pixelAspect","compSize","frameDuration","displayStartTime","numLayers","ShapePathInterface","view","propertyIndex","ShapeExpressionInterface","iterateElements","groupInterfaceFactory","fillInterfaceFactory","strokeInterfaceFactory","trimInterfaceFactory","ellipseInterfaceFactory","starInterfaceFactory","rectInterfaceFactory","roundedInterfaceFactory","repeaterInterfaceFactory","gradientFillInterfaceFactory","interfaces","transformInterfaceFactory","cix","contentsInterfaceFactory","startPoint","endPoint","_dashPropertyGroup","dashOb","addPropertyToDashOb","dataProps","dash","start","skewAxis","outerRadius","outerRoundness","innerRoundness","innerRadius","radius","_interfaceFunction","TextExpressionInterface","_prevValue","_sourceText","sourceText","textProperty","stringValue","currentData","getBlendMode","blendModeEnums","mode","SliderEffect","AngleEffect","ColorEffect","PointEffect","LayerIndexEffect","MaskIndexEffect","CheckboxEffect","NoValueEffect","EffectsManager","effectItem","GroupEffect","BaseElement","FrameElement","_typeof$2","eff","checkMasks","effectsInterface","shapesData","itemsData","setBlendMode","blendModeValue","baseElement","layerElement","initBaseData","layerId","getType","prepareProperties","isVisible","_isParent","FootageInterface","dataInterfaceFactory","outlineInterface","currentPropertyName","currentProperty","getFootageData","searchProperty","propertyNameIndex","outlineInterfaceFactory","dataInterface","FootageElement","imageLoader","AudioElement","_isPlaying","_canPlay","_currentTime","_volumeMultiplier","_previousVolume","_placeholder","lv","au","BaseRenderer","TransformElement","MaskElement","maskElement","solidPath","expansor","feMorph","properties","count","currentMasks","maskRef","getShapeProp","lastPath","filterID","expan","lastOperator","filterId","lastRadius","createLayerSolidPath","invRect","drawPath","maskedElement","getBaseElement","timeRemapped","totalVolume","volumeValue","checkLayers","buildItem","checkPendingElements","createItem","createImage","createComp","createSolid","createNull","createShape","createText","createCamera","createFootage","buildAllItems","pInterface","progressiveLoad","buildElementParenting","parentName","setAsParent","setHierarchy","addPendingElement","pendingElements","pathValue","setupGlobalData","fontsContainer","animationItem","initTransform","_matMdf","_opMdf","renderTransform","finalMat","globalToLocal","transforms","ptNew","mHelper","getMaskProperty","isFirstFrame","getMaskelement","pathNodes","pathString","pathShapeValue","filtersFactory","filId","skipCoordinates","fil","feColorMatrix","featureSupport","registeredEffects","idPrefix","SVGEffects","filterManager","createFilter","filters","Effect","countsAsEffect","registerEffect","SVGBaseElement","HierarchyElement","RenderableDOMElement","IImageElement","initElement","sourceRect","ProcessedElement","IShapeElement","initRendererElement","createContainerElements","matteElement","transformedElement","_sizeChanged","gg","layerElementParent","masker","createAlphaToLuminanceFilter","maskGroup","maskGrouper","feCTr","feFunc","alphaRect","ln","cp","clipId","cpGroup","renderElement","destroyBaseElement","createRenderableComponents","renderableEffectsManager","setMatte","initHierarchy","checkParenting","createContent","renderInnerContent","innerElem","pr","imagePreserveAspectRatio","addShapeToModifiers","shapeModifiers","isShapeInAnimatedModifiers","isAnimatedWithShape","renderModifiers","searchProcessedElement","processedElements","addProcessedElement","lineCapEnum","lineJoinEnum","SVGShapeData","transformers","level","caches","lStr","lvl","SVGStyleData","pElem","msElem","DashProperty","dashStr","dashArray","dashoffset","SVGStrokeStyleData","styleOb","SVGFillStyleData","SVGNoStyleData","GradientProperty","cLength","_cmdf","_omdf","_collapsable","checkCollapsable","_hasOpacity","SVGGradientFillStyleData","initGradientData","SVGGradientStrokeStyleData","ShapeGroupData","prevViewData","gr","SVGTransformData","comparePoints","stops","setGradientData","setGradientOpacity","pathElement","gradientId","gfill","gf","cst","opacityId","maskId","opFill","ml","of","ms","ost","buildShapeString","_o","shapeString","SVGElementsRenderer","_identityMatrix","_matrixHelper","renderContentTransform","styleData","itemData","renderNoop","renderPath","pathStringTransformed","redraw","iterations","lLen","renderFill","styleElem","renderGradientStroke","renderGradient","renderStroke","hasOpacity","attr1","attr2","cValues","oValues","ang","dist","createRenderFunction","SVGShapeElement","stylesList","animatedContents","LetterProps","sw","TextProperty","_frameId","keysIndex","canResize","minimumFontSize","ascent","boxWidth","defaultBoxWidth","justifyOffset","lh","lineWidths","ps","fillColorAnim","strokeColorAnim","strokeWidthAnim","yOffset","finalSize","finalText","finalLineHeight","copyData","completeTextData","initSecondaryElement","identityMatrix","buildExpressionInterface","searchShapes","filterUniqueShapes","tempShapes","areAnimated","setShapesAsAnimated","createStyleElement","elementData","addToAnimatedContents","createGroupElement","createTransformElement","transformProperty","createShapeElement","ownTransformers","setElementStyles","currentTransform","modifier","processedPos","ownStyles","ownModifiers","renderShape","animatedContent","update","updated","setCurrentData","searchKeyframes","getKeyframeValue","_finalValue","currentValue","currentIndex","textKeys","buildFinalText","charCode","charactersArray","shouldCombine","charAt","newLineFlag","letters","anchorGrouping","currentSize","currentPos","currentLine","lineWidth","maxLineWidth","trackingOffset","currentHeight","boxHeight","lastSpaceIndex","currentChar","uncollapsedSpaces","an","add","anIndexes","animatorJustifyOffset","extra","animatorData","letterData","based","animators","indexes","fh","fs","fb","rn","totalChars","newInd","currentInd","newData","dData","recalculate","canResizeFont","_canResize","setMinimumFontSize","_fontValue","TextSelectorProp","TextSelectorPropFactory","_currentTextLength","finalS","finalE","xe","ne","sm","getMult","easer","tot","smoothness","threshold","newCharsFlag","divisor","getTextSelectorProp","TextAnimatorDataProperty","animatorProps","defaultData","textAnimatorAnimatables","TextAnimatorProperty","renderType","_hasMaskedPath","_textData","_renderType","_animatorsData","_pathData","_moreOptions","alignment","renderedLetters","lettersChangedFlag","ITextElement","searchProperties","getMeasures","xPos","yPos","pathInfo","currentLength","currentPoint","pointInd","segmentInd","prevPoint","tanAngle","matrixHelper","renderedLettersCount","tLength","pi","letterValue","yOff","firstLine","offf","xPathPos","yPathPos","elemOpacity","letterSw","letterSc","letterFc","letterO","initPathPos","initSegmentInd","initPointInd","letterM","letterP","defaultPropsArray","animatorFirstCharOffset","justifyOffsetMult","isNewLine","animatorOffset","rot","atan","textAnimator","buildNewText","createPathShape","shapeStr","_fontSize","applyTextPropertiesToMatrix","lineNumber","buildColor","colorData","emptyProp","emptyShapeData","SVGTextLottieElement","textSpans","ISolidElement","NullElement","SVGRendererBase","ICompElement","SVGCompElement","supports3d","SVGRenderer","svgElement","ariaLabel","title","titleElement","titleId","description","descElement","descId","preserveAspectRatio","contentVisibility","viewBoxOnly","viewBoxSize","className","focusable","filterSize","destroyed","CVContextData","saved","cArrPos","cTr","cO","savedOp","ShapeTransformManager","sequences","sequenceList","transform_key_count","CVEffects","CVMaskElement","hasMasks","CVBaseElement","CVShapeData","transformsManager","styledShapes","styledShape","addTransformSequence","trNodes","CVShapeElement","CVTextElement","currentRender","sWidth","fValue","CVImageElement","CVSolidElement","CanvasRendererBase","clearCanvas","context","dpr","devicePixelRatio","currentGlobalAlpha","contextData","transformMat","CVCompElement","CanvasRenderer","HBaseElement","HSolidElement","HShapeElement","shapesContainer","currentBBox","HTextElement","textPaths","isMasked","HCameraElement","pe","_prevMat","HImageElement","HybridRendererBase","threeDElements","camera","HCompElement","HybridRenderer","singleShape","textContainer","buildTextContents","textArray","textContents","currentTextContent","fromCharCode","buildShapeData","shapeItem","tSpan","usesGlyphs","cachedSpansLength","span","childSpan","glyph","glyphElement","_debug","tElement","justify","textBox","bbox","renderedLetter","textSpan","appendElementInPos","nextElement","insertBefore","setElements","getElements","destroyElements","duplicate","newLength","currentSavedOp","set","sequence","processSequence","processSequences","getNewKey","canvasContext","beginPath","bezierCurveTo","save","clip","createElements","blendMode","globalCompositeOperation","hideElement","showElement","forceRealStack","ctxTransform","ctxOpacity","restore","transformHelper","dashResetter","preTransforms","co","wi","da","addTransformToStyleList","removeTransformFromStyleList","closeStyles","shouldRender","ownTransforms","_shouldRender","renderShapeTransform","parentTransform","groupTransform","drawLayer","nodes","currentStyle","coOp","strokeStyle","grd","lineCap","lineJoin","miterLimit","setLineDash","lineDashOffset","isMain","renderGradientFill","renderStyledShape","shapeNodes","groupTransformMat","createLinearGradient","createRadialGradient","addColorStop","hasFill","hasStroke","commands","pathArr","commandsCounter","lastFill","lastStroke","lastStrokeW","widthCrop","heightCrop","imgW","imgH","imgRel","canvasRel","par","cProps","trProps","globalAlpha","actionFlag","popped","containerStyle","mozTransformOrigin","transformCanvas","isDashed","elementWidth","elementHeight","elementRel","animationRel","offsetHeight","fillType","clearRect","checkBlendMode","tg","transformedElementStyle","matrixValue","webkitTransform","addEffects","backgroundColor","_renderShapeFrame","shapeCont","getTransformedPoint","calculateShapeBoundingBox","vPoint","oPoint","nextIPoint","nextVPoint","checkBounds","getBoundsOfCurve","bounds","shapeBoundingBox","xMax","right","yMax","bottom","tempBoundingBox","b2ac","t2","calculateF","calculateBoundingBox","expandStrokeBoundingBox","widthProperty","kfw","currentBoxContains","box","changed","shapeStyle","shapeTransform","compW","compH","innerElemStyle","textColor","lineHeight","tParent","tCont","children","tContStyle","tContTranslation","tStyle","tSpanTranslation","svgStyle","translation","textPath","margin","svgTransform","setup","perspectiveStyle","perspectiveElem","perspective","webkitPerspective","mTransf","diffVector","mag","lookDir","lookLengthOnXZ","mRotationX","mRotationY","hasMatrixChanged","matValue","Image","imageElem","newDOMElement","addTo3dContainer","nextDOMElement","nextLayer","getThreeDContainerByPos","startPos","endPos","createThreeDContainer","center","threeDContainerData","build3dContainers","lastThreeDContainerData","currentContainer","resizerElem","overflow","svg","cWidth","cHeight","floatingContainer","_createBaseContainerElements","Expressions","stackCount","registers","pushExpression","popExpression","releaseInstances","registerExpressionProperty","expression","_typeof$1","seedRandom","nodecrypto","global","rngname","startdenom","significance","ARC4","keylen","me","S","copy","flatten","depth","typ","mixkey","seed","smear","stringseed","tostring","shortseed","entropy","Uint8Array","crypto","msCrypto","getRandomValues","browser","plugins","screen","autoseed","arc4","prng","int32","quick","pass","is_math_call","state","initialize$2","propTypes","SHAPE","_typeof","ExpressionManager","fetch","frames","$bm_isInstanceOfArray","isNumerable","tOfV","$bm_neg","tOfA","lenA","retArr","easeInBez","easeOutBez","easeInOutBez","tOfB","lenB","sub","mul","mod","$bm_sum","$bm_sub","$bm_mul","$bm_div","$bm_mod","clamp","mm","radiansToDegrees","radians_to_degrees","degreesToRadians","degrees_to_radians","helperLengthArray","arr1","normalize","vec","rgbToHsl","hue2rgb","hslToRgb","tMin","tMax","value1","value2","_tMin","rnd","createPath","inTangents","outTangents","inVertexPoint","outVertexPoint","arrPlaceholder","initiateExpression","needsVelocity","_needsRandom","elemType","$bm_transform","thisProperty","loopIn","loop_in","loopOut","loop_out","smooth","fromCompToSurface","thisLayer","thisComp","scoped_bm_rt","expression_function","eval","wiggle","freq","amp","iWiggle","lenWiggle","addedAmps","periods","loopInDuration","loopOutDuration","velocity","textIndex","textTotal","selectorValue","lookAt","elem1","elem2","fVec","pitch","easeOut","val1","val2","applyEase","easeIn","ease","iKey","lenKey","nearestKey","obKey","framesToTime","timeToFrames","seedrandom","randSeed","substring","posterizeTime","framesPerSecond","executeExpression","_value","frameExpressionId","__preventDeadCodeRemoval","expressionHelpers","searchExpressions","speed","delta","_cachingAtTime","getStaticValueAtTime","addPropertyDecorator","durationFlag","cycleDuration","firstKeyFrame","ret","lastKeyFrame","initV","endV","current","repeats","lastValue","nextLastValue","firstValue","nextFirstValue","samples","sampleValue","sampleFrequency","getTransformValueAtTime","_transformCachingAtTime","rotationZ","rotationY","rotationX","orientation","positionX","positionY","positionZ","getTransformStaticValueAtTime","propertyGetProp","ShapePropertyConstructorFunction","getConstructorFunction","KeyframedShapePropertyConstructorFunction","getKeyframedConstructorFunction","ShapeExpressions","isClosed","pointOnPath","_segmentsLength","accumulatedLength","initIndex","endIndex","vectorOnPath","vectorType","xLength","yLength","magnitude","tangentOnPath","normalOnPath","shapeValue","lastTime","propertyGetShapeProp","trims","initialize$1","addDecorator","getExpressionValue","calculateExpression","isKeyframed","hasExpressions","initialize","SVGComposableEffect","SVGTintFilter","matrixFilter","feMerge","createMergeNode","SVGFillFilter","SVGStrokeEffect","initialized","SVGTritoneFilter","feComponentTransfer","feFuncR","feFuncG","feFuncB","SVGProLevelsFilter","createFeFunc","feFuncA","feFuncRComposed","feFuncGComposed","feFuncBComposed","SVGDropShadowEffect","globalFilterSize","feGaussianBlur","feOffset","feFlood","feComposite","resultId","ins","feMergeNode","colorBlack","colorWhite","groupPath","elemChildren","removeAttribute","pathMasker","dasharrayValue","getTotalLength","lineLength","units","color1","color2","color3","tableR","tableG","tableB","getTableValue","inputBlack","inputWhite","gamma","outputBlack","outputWhite","colorValue","table","outputDelta","inputDelta","col","_svgMatteSymbols","SVGMatte3Effect","filterElem","SVGGaussianBlurEffect","findSymbol","replaceInParent","symbolId","nextChild","useElem","setElementAsMask","symbol","sigma","dimensions","sigmaX","sigmaY","edgeMode","twoProduct","robustSum","robustScale","robustSubtract","orientation_3","prod","m0","orientation_4","orientation_5","orientation3Exact","orientation4Exact","CACHED","det","tol","adx","bdx","cdx","ady","bdy","cdy","adz","bdz","cdz","bdxcdy","cdxbdy","cdxady","adxcdy","adxbdy","bdxady","slowOrient","proc","slow","o0","o3","o4","o5","a0","a3","a4","generateOrientationProc","vs","inside","lim","yi","yj","orient","x0","y0","twoSum","ts","pq","nf","bv","scalarScalar","eptr","fptr","ei","ea","fi","fa","_x","_bv","q0","q1","styleTagTransform","setAttributes","insert","domAPI","insertStyleElement","stylesInDOM","getIndexByIdentifier","identifier","modulesToDom","idCountMap","identifiers","indexByIdentifier","css","sourceMap","references","updater","addElementStyle","byIndex","api","newObj","remove","lastIdentifiers","newList","newLastIdentifiers","_index","memo","styleTarget","querySelector","HTMLIFrameElement","contentDocument","head","getTarget","styleElement","nonce","removeStyleElement","styleSheet","cssText","firstChild","createTextNode","parserFunction","makeAbsolute","subpathStart","prevCmd","cmd","command","relative","toUpperCase","peg$SyntaxError","message","expected","captureStackTrace","child","ctor","peg$subclass","buildMessage","DESCRIBE_EXPECTATION_FNS","literal","expectation","literalEscape","escapedParts","parts","classEscape","inverted","any","other","descriptions","describeExpected","describeFound","SyntaxError","input","peg$result","peg$FAILED","peg$startRuleFunctions","svg_path","peg$parsesvg_path","peg$startRuleFunction","peg$c0","cmds","peg$c1","more","merge","peg$c2","peg$c3","peg$classExpectation","peg$c4","move","peg$c5","peg$c6","peg$c7","peg$c8","peg$c9","peg$c10","peg$c11","peg$c12","peg$c13","peg$c14","peg$c15","peg$c16","peg$c17","peg$c18","peg$c19","peg$c20","peg$c21","peg$c22","peg$c23","peg$c24","peg$c25","peg$c26","peg$c27","peg$c28","peg$c29","peg$c30","xrot","large","peg$c31","peg$c32","peg$c33","peg$c34","peg$c35","peg$c36","bit","peg$c37","peg$c38","peg$c39","peg$literalExpectation","peg$c40","peg$c41","peg$c42","peg$c43","peg$c44","peg$c45","peg$c46","peg$c47","peg$c48","peg$c49","digits","peg$c50","peg$c51","peg$currPos","peg$posDetailsCache","column","peg$maxFailPos","peg$maxFailExpected","peg$silentFails","startRule","ignoreCase","peg$computePosDetails","details","peg$computeLocation","startPosDetails","endPosDetails","peg$fail","s4","peg$parsewsp","s5","peg$parsemoveTo_drawTo_commandGroup","peg$parsemoveTo_drawTo_commandGroups","s6","peg$parsecoordinate_pair","peg$parsecomma_wsp","peg$parselineto_argument_sequence","peg$parsemoveto","peg$parsedrawto_command","peg$parselineto","peg$parsecoordinate_sequence","peg$parsehorizontal_lineto","peg$parsevertical_lineto","peg$parsecurveto_argument","peg$parsecurveto_argument_sequence","peg$parsecurveto","peg$parsesmooth_curveto_argument","peg$parsesmooth_curveto_argument_sequence","peg$parsesmooth_curveto","peg$parsequadratic_bezier_curveto_argument","peg$parsequadratic_bezier_curveto_argument_sequence","peg$parsequadratic_bezier_curveto","peg$parsesmooth_quadratic_bezier_curveto_argument_sequence","peg$parsesmooth_quadratic_bezier_curveto","peg$parseelliptical_arc_argument","peg$parseelliptical_arc_argument_sequence","peg$parseelliptical_arc","peg$parsenumber","s7","s8","s9","s10","s11","peg$parsenonnegative_number","peg$parseflag","peg$parsefloating_point_constant","peg$parsedigit_sequence","peg$parsesign","peg$parsecomma","peg$parsefractional_constant","peg$parseexponent","oncontextmenu","onkeyup","which","keyCode","getElementById","Hint","TIMING_HINT_ID","MarkSelector","emitSelection","player","pauseAnimation","playAnimation","outerWrapper","nav","createNav","navContainer","innerWrapper","createRPanels","verticle","classList","dataView","DATA_VIEW_TITLE","createView","panel1","mainWrapper","chartVideoPanels","chartView","CHART_VIEW_TITLE","videoView","VIDEO_VIEW_TITLE","panel2","kfView","KF_VIEW_TITLE","app","resizeWidgets","onresize","highlightColor","regularColor","createAddPanel","shouldHide","dashBox","plusIcon","icon","fold","padding","recommendList","addHighlight","removeHighlight","AddPanel","fromKfTreeGroup","kfGroup","marks","isFirst","lastDuration","minStartTimeBinding","startTimeBinding","delay","channel","chartManager","numericAttrs","has","calcMean","isFirstNode","grouping","childNode","AnimationTreeNode","fromKfTreeNode","childGroup","AnimationTreeGroup","kfNode","meetMarkTypeConstrains","markTypeSelectors","groupBy","partition","Map","Set","order","sortStrings","isFirstChild","getMinValue","attributeName","vertical","flatMap","nextTime","AnimationTreeItem","calcDurationRatio","effectType","includes","isText","tagName","generateCanisFrame","selector","reference","MARKID","MONTHS","NONDATATYPE","firstMark","markType","fieldNames","fieldType","sortAttribute","sortId","tryToAddMark","mark","loadChart","chart","spec","charts","generateChartSpec","clear","canisSpec","lottieSpec","canis","renderSpec","updateAnimation","markAttributes","attributeMap","numericAttributeMap","loadMarkTables","clearKfTrees","markTables","dataMarks","MarkTable","markTableManager","updatePreviewCanisSpec","renderSpecPreview","updateCanisSpec","ViewContent","VIDEO_VIEW_CONTENT_ID","lottieAnimation","resetPlayer","fieldName","attrs","getAvgValue","ChartManager","chartSpecs","chartType","ChartSpec","CHART_CONTENT","CHART_URL","chartSpec","generateAnimationSpec","validate","tmpAni","removedAni","len2","tmpAni2","align","TimingSpec","timingRef","previousEnd","previousStart","insertIdx","emptyAlignTo","checkAniId","chartIdx","animationSpec","ActionSpec","actionTypes","fade","transition","resetSpec","updateKfDelay","groupingSpec","oriDelay","removeKfDelay","updateKfRef","updateKfRefAndDelay","removeLowestGrouping","updateGroupTiming","groupRef","updateGroupDelay","updateGroupDelayTiming","removeGroupDelay","removeGroupDelayUpdateTiming","mergeGroup","parentGrouping","updateDuration","actionSpec","updateEffectType","updateEffectEasing","updateAniOffset","ani","updateStaticSelector","staticMarks","currentSelectedMarks","Animation","markClass","clsName","mId","updateGrouping","attrComb","attrValueSort","createGrouping","appendGrouping","removeMarksFromSelector","targetMarks","currentMarks","filteredMarks","mSelector","updateMerge","updateGroupingSort","tmpGrouping","LABEL_HEIGHT","LABEL_COLORS","TEXT_COLORS","OMIT_COLOR","lengthToDuration","ITEM_LENGTH","durationToLength","delayToLength","MAX_DELAY_LENGTH","EFFECT_FADE","EFFECT_FADE_OUT","EFFECT_WIPE_LEFT","EFFECT_WIPE_RIGHT","EFFECT_WIPE_TOP","EFFECT_WIPE_BOTTOM","EFFECT_WHEEL","EFFECT_CIRCLE","EFFECT_GROW","EASING_LINEAR","EASING_IN_QUAD","EASING_OUT_QUAD","EASING_IN_CUBIC","EASING_OUT_CUBIC","EASING_INOUT_CUBIC","EFFECTS","EASINGS","snap","size2","originalDelayNode","previousNode","levelFromLeaves","leftDragBarCallback","hideLeftDragBar","delayLength","KfItem","idCounter","kfTrack","activeNodeId","mainContainer","delayWidget","KfDelay","resetCounter","updateDelayLength","deltaL","renderDelay","allowNegtiveDelay","originalNode","getX","getY","renderLeftBar","leftDragBar","onmousedown","downEvent","findRightMostLength","getOriginalHeight","hideRightDragBar","calcLevelFromLeaves","chiactiveChildld","KfGroup","activeChild","KfColume","label","sortable","sortAttrtibutes","originalGrouping","binding","sortAttributes","labelBackground","background","labelText","createOrderBtn","createSortList","sortBtnContainer","sortListContainer","innerContainer","itemHeight","log","sortChannel","sortOrder","itemBackground","itemContainer","ascBtn","onclick","updateSort","dscBtn","itemWidth","buttonContainer","onmouseleave","createBindList","bindBtnContainer","bindListContainer","createList","highlighted","listContainer","option","updateStartTimeBinding","updateDurationBinding","labelContainer","bindBtnBackground","bindBtnIcon","timingLock","KfOmit","diffLessThan","onmousemove","newactualMovementX","newactualMovementY","movementX","movementY","onmouseup","moveForward","moveBackward","childrenOffsetY","sortBtnBackground","sortBtnIcon","maxStrLen","KfRow","numberOmitted","lastNode","circle","delayTime","controlOn","iconPolygon","controlOff","updateElements","dragBar","updateWidth","moveEvent","virtualLength","parentLength","timeToLength","lengthToTime","updateLengthGuide","finishUpdateWidth","upEvent","updateDelay","lengthGuide","textWidth","getBoundingClientRect","lengthGuideBackground","ITEM_GAP","lengthToDelay","button","setActiveNode","thumbnailUrl","durationRatio","rightDragBar","updateDurationBar","thumbnail","thumbnailBackground","createBtnIcon","btnType","createBtn","createDropDownList","menuContainer","background1","itemMask","buttonIcon","createMenu","menuBackgroundColor","menuBackground1","menuWidth","menuBackground2","effectBtn","easingBtn","updateEasing","KfNode","aniScale","panningLock","updateKfTrack","groups","lastGroup","resetActiveNode","activeNodeX","panningX","maxHeight","maxLevel","trackBackground","nonSelectedMarks","calcNonSelectedMarks","suggestFrames","getSuggestFrames","addPanelContainer","suggestPanel","createSuggestPanel","calcSelectedMarks","updatePanning","kfContainer","kfContainerTransX","activeNode","shiftKey","altKey","panningY","deltaY","updateScale","aniPreview","loc","KfTrack","durationBinding","updateFlag","getBinding","childMarkType","updateProperty","deepClone","kfTrees","findUpdateNode","saveHistory","renderKfTree","KfTreeNode","attributeSelectors","getAttributeSelectors","isBindable","findUpdateGroup","assert","KfTreeGroup","expandOptions","history","historyIndex","revert","redo","needNewGroupPreview","kfT","activeGroup","selectByMarkTypeSelectors","getExpandSequence","tryInsert","placeNode","needNewGroup","typeName","meetAttributeConstrains","delete","calcNonSelectedMarksPreview","getLeftMost","leftMostGroup","leftMostNode","previewFrame","nextKf","kfTree","markId","extractAttributeConstrains","needExpandPreview","parentAttributeSelectors","canUpdateSubtree","expandDirections","attributeValues","markSet","animationTree","generatePreviewCanisSpec","addSelection","selection","needExpand","loadingBlock","createLoading","generateCanisSpec","allNextKf","some","identicalArrays","selectableMarks","kfTrackData","generateKfTrack","Loading","removeLoading","disabledMarks","selections","results","results2","allAvailableMarks","allAttributes","constrains","addFrame","frameMarks","enumMarks","selectedAttributes","selectedMarks","allTypes","selectedTypes","allAttributePairs","animationTreeGroup","DOMParser","parseFromString","nextNode","generateKfTrackOfGroup","NaN","kfTreeNode","XMLSerializer","serializeToString","originalParent","numberChildren","colume","isFirstRow","addNewRow","subset","addNewItem","omit","MarkSelectorMode","MarkStatus","updateSelection","selectionSize","unselectMark","selectMark","complete","kfHeight","xMove","selectOption","addSelect","addHide","removeSelect","removeHide","MarkTableManager","selectBySelectors","newSelection","setCompleteData","attributeSelector","addDisable","disable","opacityAttr","notOptional","removeNotOptional","boundingRect","screenToSvgCoords","sizeThreshold","panning","cloneNode","Polygon","getTransformFromChartContent","selectionMask","addHighLightRow","removeDisable","removeHighLightRow","addHoverHighlight","removeHoverHighlight","setSingleSelect","chartContainter","onMouseDown","onMouseWheel","chartDimension","limitTranslate","wheelEvent","scaleFactor","pageX","pageY","updateTranslate","finishTranslate","targetId","moveEvt","pointDist","dragableCanvas","createCanvas","upEvt","finishRectSelection","updateRectSelection","selectStartPoint","clientX","clientY","selectionRect","updateLassoSelection","finishLassoSelection","yBegin","yEnd","xBegin","xEnd","polygon","fromElement","xMin","yMin","elementsUnderMouse","elementsFromPoint","removeSelectedTool","selectedTool","setLassoSelect","LASSO_SELECT","chartContainer","SINGLE_SELECT","dataTableMarks","dataTabelContainer","dataTableMark","dataTable","headerTr","th","thContainer","titleContent","sortBtn","iconCls","ASSCENDING_ORDER","DESCENDING_ORDER","attributesType","lastMouseX","lastMouseY","pointDis","hypot","pointSub","pointDot","pointToLine","pp1","p1p2","pp2","pointCross","mergeTransform","Transform","useBoundingBox","svgWidth","svgHeight","massCenter","isConnected","fp1","fp2","lp1","lp2","parseNumber","defaultValue","parseTransform","transformAttr","transformStrs","centerX","centerY","parseShape","numberSegs","angleInc","parsePath","commandStrs","types","argLists","numberCommands","lastCV","theta","cosTheta","sinTheta","invTransform","chordLen","dis","rotated","sweepAngle","c0","applyTransform","lineIntersect","fromBoundingBox","topLeft","bottomRight","calcLength","svgDomRect","fromVertices","edgeLen","resample","numberPoints","findNextPoint","segLen","svgns","MAPPING","every","kfWidth","preMenuWidth","numShown","SuggestPanel","SHOWN_NUM","removeSuggestPanel","suggestMenu","SuggestMenu","createSuggestMenu","PADDING","bg","itemcontainer","createSuggestItem","popupLayer","itemImg","Itemimg","createItemimg","videoBox","videoPreview","videoPreviewAnimation","onmouseout","markEle","onmouseover","stopAnimation","MENU_WIDTH","numPages","pageIdx","dots","startCoord","parentSuggestPanel","menuHeight","BTN_SIZE","DOT_SIZE","MENU_RX","upArrow","createArrowBtn","UP_DIRECT","downArrow","DOWN_DIRECT","tmpDot","createDot","direct","arrow","arrowClickListener","dot","MENU_ICON_COLOR","MENU_ICON_HIGHLIGHT_COLOR","drawItemBg","drawItemContent","KF_WIDTH","svgClone","startsWith","removeAttributeNS","contains","imgSrc","svg2url","chartThumbnail","RESET_STATE","UPDATE_LOADING_STATUS","LOAD_CHARTS","LOAD_CANIS_SPEC","TOGGLE_SUGGESTION","UPDATE_SELECTION","UPDATE_DATA_TABLE","UPDATE_DATA_SORT","UPDATE_DATA_ORDER","UPDATE_LOTTIE","UPDATE_LOTTIE_SPEC","UPDATE_MOUSE_MOVING","UPDATE_KEYFRAME_TRACKS","UPDATE_STATIC_KEYFRAME","ACTIVATE_PLUS_BTN","UPDATE_KEYFRAME_CONTAINER_SLIDER","UPDATE_SPEC_CHARTS","UPDATE_SPEC_ANIMATIONS","UPDATE_DELAY_BETWEEN_KF","REMOVE_DELAY_BETWEEN_KF","UPDATE_KF_TIMING_REF","UPDATE_TIMING_REF_DELAY_KF","REMOVE_LOWESTGROUP","UPDATE_DELAY_BETWEEN_GROUP","REMOVE_DELAY_BETWEEN_GROUP","MERGE_GROUP","UPDATE_TIMEING_REF_BETWEEN_GROUP","UPDATE_DELAY_TIMING_REF_BETWEEN_GROUP","REMOVE_DELAY_UPDATE_TIMING_REF_GROUP","UPDATE_DURATION","UPDATE_ANI_OFFSET","UPDATE_SUGGESTION_PATH","UPDATE_SPEC_GROUPING","REMOVE_CREATE_MULTI_ANI","SPLIT_CREATE_MULTI_ANI","SPLIT_CREATE_ONE_ANI","APPEND_SPEC_GROUPING","UPDATE_ANI_ALIGN_WITH_ANI","UPDATE_ANI_ALIGN_AFTER_ANI","UPDATE_ANI_ALIGN_AFTER_ANI_WITH_DELAY","UPDATE_ANI_ALIGN_WITH_KF","UPDATE_ANI_ALIGN_AFTER_KF","UPDATE_ALIGN_MERGE","UPDATE_EFFECT_TYPE","UPDATE_EFFECT_EASING","KEYFRAME_ZOOM_LEVEL","UDPATE_GROUPING_SORT","findMergedAlignAnis","alignWithAni","alignToAnis","alignTarget","withEle","fetchGroupingSort","aniId","findAttrWithDiffValue","markIdArr1","markIdArr2","dataEncode","attrDiffValues","dataAttrArr","dataAttrs","nonDataAttrs","filteredDataTable","nonDataTable","aName","attrType","CATEGORICAL_ATTR","removeEmptyCell","firstKfMarks","attrToSec","sameAttrs","diffAttrs","tmpMarkRecord","findSameDiffAttrs","markIdArr","sortAttrs","attrArr","orderedAttrs","EFFECTIVENESS_RANKING","tmpAttrChannel","chartUnderstanding","assignChannelName","channelAttrs","generateAttrCombs","sortedAttrs","visualChannelNum","allCombinations","candidateAttrs","multiPosiAttrs","positionAttrs","channelName","tmpCombRecord","perm","checkConti","oneComb","generateRepeatKfs","valueIdx","lastKfMarks","hasOneMrak","possibleKfs","valuesFirstKf","mShapes","attrValue","sections","sectionIdRecord","timeSecIdx","tmpValueIdx","timeAttrs","asscendingOrder","sectionId","sepSecIdRecord","seperateSecId","tmpValue","attrVal","orderDirect","addAttrValue","diffValueIdx","diffAttr","aComp","bComp","fetchTimeNum","aCompStr","bCompStr","aShapeName","bShapeName","toLocaleLowerCase","firstKfIdx","sectionsBefore","sectionsAfter","checkStr","valComb","correspondingSecId","tmpShape","tmpValExceptShape","valIdx","tmpSecId","tmpValExceptShapeArr","secIdxAndId","secIdToDelete","orderedSectionIds","findNextUniqueKf","allPaths","kfStartIdx","kfMarks","findUniqueKfs","uniqueKfs","uniqueKfIdxs","hasNextUniqueKf","generateSuggestionPath","firstKfInfoInParent","targetKfg","extractClsFromMarks","clsSelMarks","marksThisKf","clsFirstKf","suggestOnFirstKf","arrayContained","Suggest","suggestPaths","marksThisAni","checkNumbericOrder","firstKfMark","firstMarkDatum","fetchNumericAttrs","hasOrder","attrName","orderOfThisAttr","numericAttrOrder","idxOfCurrentMark","sepFirstKfMarks","separateDataAndNonDataMarks","sepLastKfMarks","nonDataMarks","attrWithDiffValues","filteredDiffAttrs","filterAttrs","targetValue","tmpIdx","dataValues","allPossibleKfs","possiblePath","repeatKfs","allSelected","oneMarkFromEachSec","oneMarkEachSecRecorder","numberMostMarksInSec","tmpSecMarks","tmpKfMarks","tmpSelected","judgeSame","samePath","sortedAttrValueComb","hasNumericOrder","numericOrders","ordering","orderedMarks","orderedKfMarks","firstKfNonDataMarks","lastKfNonDataMarks","attrValStr","tmpDatum","isNonDataAttr","mIds","mType","datum","tmpAttrValStr","clsIdx","NUMERIC_CAT_ATTRS","dataMarkDatum","judgeSuggestionType","markIds","allDataEncodedMarks","allNonDataEncodedMarks","containDataMark","containNonDataMark","DATA_SUGGESTION","NON_DATA_SUGGESTION","NO_SUGGESTION","suggestSelection","suggestSelBasedOnData","suggestSelBasedOnChart","compareAttrs","allMarkIds","partitionChart","mostSelectionNumInSec","marksInSec","secId","tmpCount","selAndSug","valueOfSameAttrs","sAttr","blocks","hasSameVal","selAndSugMarks","suggestMarks","hasOneMark","filteredAttrs","typeRecorder","tmpAttrType","tmpDataItem","keyArr","allAttrs","isDataAttr","sameAttr","sameAttrType","firstMarkType","EXCLUDED_DATA_ATTR","dataItem","NUMERIC_CATEGORICAL_ATTR","sortNumeric","markData","extractAttrValueAndDeterminType","dataDatum","NUMERIC_ATTR","sortAttrValues","extractNonDataAttrValue","lastType","typeCount","av","_TYPE","nonDataValues","_TYPE_IDX","judgeTimeAttr","filterDataSort","dataSort","ds","Util","findUpdatedAttrOrder","sda","sortDataAttrs","INDEX_ORDER","sortDataTable","attrOrder","va","vb","compareA","compareB","findFirstKfs","kfg","aniRootToFakeKFGroup","aniunitNode","parentChildIdx","tmpKf","durationIcon","hiddenDurationIcon","delayIcon","allCurrentMarks","allGroupMarks","allKfInfo","newTrack","aniRootToKFGroup","kfGroupRoot","alignId","alignType","refValue","childrenIsGroup","definedById","kfGroupChild","judgeMerge","mergeNode","aniLeafToKF","mergedNode","aniLeaf","leafIdx","parentObj","parentMarks","tmpDuration","marksInOrder","minStartTime","allMarkAni","drawDelay","alignTo","drawDuration","actions","oriActionType","drawHiddenDuration","alignWith","alignWithIds","alignWithKfs","judgeFirstKf","temp","attrCombs","targetAttrs","tmpAttrCombs","combTargetAttrStrs","aValues","TIME_ATTR_VALUE","timeStr","extractAttrValueOrder","sortedValues","valueOrderRecord","valueSort","markArr","clsOfMarks","nonDataCls","clsToAdd","cloneObj","objStr","valueSet","extractNumInStr","firstStr","listen","triger","fns","updateAniAlign","actionType","actionInfo","currentAni","currentAniIdx","targetAni","targetAniIdx","targetAniId","currentAniId","action","alignedOnData","alignOnData","Reducer","suggestBox","removeSuggestBox","isLoading","il","renderLoading","srcDom","zl","zoomLevel","sdaArr","dord","dataOrder","dt","chartContent","State","tmpStateBusket","historyAction","actionVal","currentAction","suggestion","lai","lottieAni","allPlusBtn","allKfItems","allActions","allAniGroups","allAniGroupInfo","rootGroup","keyframeGroups","plusBtnInfo","activatePlusBtn","kfGroupSize","KfContainer","KF_POPUP","tmpSpec","mousemoving","oneLevelGrouping","animationsNeedToUpdate","tmpEffect","ap","shapeAttrIdx","shapeMarkMap","attrValueComb","shapeMarks","newSelector","newAni","newAniSelector","targetDuration","aniIds","effectPropValue","allMarks","nonDataMarkDatum","highlightBox","renderMultiCharts","currentRow","multiChartContainer","createMultiChartContainer","chartItemContainer","renderVideo","Player","PLAY_BTN_ID","click","renderKfContainerSliders","kfgSize","resetContainerTrans","updateKfSlider","renderStaticKf","KF_BG","KF_FG","KF_OMIT","placeHolder","createTrack","renderKeyframeTracks","kfgs","leafLevel","renderKeyframeGroup","updateGroupPosiAndSize","aniTrackMapping","availableInsert","rootGroupBBox","kfgIdx","previousKfg","totalKfgNum","treeLevel","lastChild","allTracksThisAni","allTracks","targetTrackId","kft","trackPosiY","TRACK_HEIGHT","createFakeTrack","trackId","minTrackPosiYThisGroup","plusBtn","addedPlusBtn","tmpKfs","detectAdding","addingPlusBtn","acceptableMarkClasses","KF_W_STEP","KF_HEIGHT","KF_H_STEP","previousAniId","createGroup","plusBtnMapping","fakeKfg","kfOmit","createOmit","KF_GROUP_OMIT","idxInGroup","kfOmits","kfNum","rendered","KF_ALIGN","timing","hasOffset","offsetIcon","hasDuration","se","tmpKfg","omitNum","omitPattern","durationWidth","oWidth","kfItem","targetSize","tmpAlignToKf","alignedKf","kfBg","preOmit","totalWidth","tmpKfGroup","renderDataTable","createTable","renderSelection","renderChartTool","ViewToolBtn","SINGLE","LASSO","DATA","zoomKfContainer","kfTrackScaleContainer","MAX_ZOOM_LEVEL","shownThumbnail","MIN_ZOOM_LEVEL","chartThumbNailZoomLevels","kfZoomLevel","bbox1","bbox2","aniKfGroupAniId","aniKfGroup","zoomGroup","updateAlignGroupKfPosis","renderSelectedMarks","highlightSelectionBox","tmpBBox","mDragArea","renderActivatedPlusBtn","activatedPlusBtn","dropSelOn","_sortDataAttrs","_dataTable","_mousemoving","_zoomLevel","oriAttrs","newAttrs","attrAndOrder","_dataOrder","_charts","cs","_tool","tool","_selection","sel","_suggestion","sug","_kfGroupSize","_lottieAni","_lottieSpec","_keyframeGroups","kfts","_staticMarks","_isLoading","_spec","_activatePlusBtn","_allPaths","insertHistory","stateHistory","stateHistoryIdx","revertHistory","actionAndValues","runRevertHistory","Promise","resolve","reject","then","redoHistory","runRedoHistory","createFloatingWindow","floatingWindow","windowBg","fWindow","windowTitle","closeBtn","closeIcon","windowContent","FloatingWindow","TYPE_EXAMPLE","createExampleList","exampleList","clickableAreaContainer","clickableAreaSubContainerChart","openchartTitle","createClickableArea","CLICKABLE_AREA_CHART","clickableAreaSubContainerProj","projectTitle","CLICKABLE_AREA_PROJECT","sep","chartTitle","exampleItemContainer1","createExampleItem","NIGHTINGALE_CHART","HIRING_CHART","OS_CHART","GANTT_CHART","exampleItemContainer2","GDP_CHART","MUSHROOM_CHART","DESSERT_CHART","DRIVING_CHART","exampleItemContainer3","FRUITSALE_CHART","WEATHER_CHART","STACKED_CHART","PURCHASE_CHART","exampleItemContainer4","USPOPULATION_CHART","CHINAPM_CHART","CO2_CHART","EDUCATION_CHART","exampleItemContainer5","WORLDPOPULATION_CHART","TSCORE_CHART","FLARE_CHART","POLIO_CHART","clickableArea","ondragover","overEvt","preventDefault","ondragenter","ondragleave","ondrop","dropEvt","that","projectFile","dataTransfer","files","FileReader","readAsText","onload","loadExampleChart","clickEvt","onchange","changeEvt","chartFile","uploadIcon","caption","imgWrapper","BOSTON_CHART","captionWrapper","xSliderContainerW","xSliderPercent","ySliderContainerH","ySliderPercent","transDistance","showPopCover","KF_POPCOVER","hidePopCover","createKfContainer","kfWidgetContainer","keyframeTrackSVG","KF_CONTAINER","linearGradient","DURATION_GRADIENT","stop1","stop2","shadowFilter","SHADOW","feMergeNode2","KF_SCALE_ID","kfTrackContainer","KF_LIST_ID","kfBgG","kfFgG","kfOmitG","kfPopCoverG","coverRect","TRACK_WIDTH","kfPopupG","hintG","KF_HINT","menuG","KF_MENU","createYSlider","createXSlider","onmouseenter","enterEvt","stopPropagation","xSlider","getAttributeNS","xSliderBg","xSliderContainer","SLIDER_W","ySlider","ySliderBg","ySliderContainer","leaveEvt","onwheel","wheelEvt","diffY","WHEEL_STEP","currentSliderY","currentSliderH","oriTrans","extractTransNums","diffX","translated","currentSliderX","currentSliderW","kfContainerTransXStep","downEvtX","clickX","transDist","kfContainerTransY","kfContainerTransYStep","downEvtY","clickY","yTransInterval","downEvt","preY","xTransInterval","preX","clientWidth","widthWithExtra","clientHeight","heightWithExtra","logoContainer","logo","logoText","createSeparator","NavBtn","createNavBtn","classNameStr","evtType","OPEN_PROJECT","SAVE_PROJECT","EXPORT","REVERT","REDO","RESET","btn","firstLetterUppercase","openProject","saveProject","createSubMenu","parentBtn","parentBBox","ul","createSubMenuItem","exportLottie","exportVideo","func","createNavFileBtn","inputId","multiple","outputObj","file","msSaveOrOpenBlob","download","revokeObjectURL","targetSVG","EXPORTING","stream","captureStream","recorder","MediaRecorder","mimeType","ondataavailable","onstop","serialized","LOAD_EXAMPLES","_totalTime","createPlayer","renderCurrentTime","renderTotalTime","widget","playBtnWrapper","playCheck","checked","playLabel","slider","MIN_WIDTH","createSlider","callbackFunc","sliderContainer","timeWrapper","currentTimeSpan","CURRENT_TIME_SPAN_ID","formatTime","splitSpan","totalTimeSpan","TOTAL_TIME_SPAN_ID","minNum","secNum","msNum","resizePlayer","cw","containerWidth","updateTimeDomain","updateDomain","animationInterval","moveSlider","nextTimePoint","resizable","createWrapper","createPanel","marginTop","marginLeft","resizer","createResizer","fixed","panel","panelNum","panelId1","panelId2","dragable","resizeBar","wrapperBBox","downPosi","movePosi","disPercent","height1","height2","width1","width2","resizeViewContentSVG","resizePlayerContainer","ResizablePanel","viewTitle","viewTitleContainer","viewTitleText","titleText","ViewWindow","viewContent","createViewContent","createSelectionTools","createPlayerWidget","createKfTools","createConfirmButton","toolContainer","clickEvtType","ZOOM","iconClass","CUSTOM","ZOOM_STEP","separator","HIDDEN_LOTTIE_ID","btnIcon","SUGGEST","ZOOM_IN","zoomIn","ZOOM_OUT","zoomOut","singleSelect","lassoSelect","chartPanel","CHART_VIEW_CONTENT_ID","contentType","createViewContainer","DATA_VIEW_CONTENT_ID","DATA_VIEW_CONTENT_CLS","createDataDashboard","CHART_VIEW_CONTENT_CLS","VIDEO_VIEW_CONTENT_CLS","KF_VIEW_CONTENT_ID","KF_VIEW_CONTENT_CLS","createKeyframeListContainer","VIEW_CONTENT_CLS","keyframePanel","dataTableWrapper","dataTableContainer","createAttrSort","selectInput","select","AttrSort","downCoord","toggle","svgW","svgH","dx","dy","scaleWidth","scaleHeight","addPanelRect","DragableCanvas","hintContent","createHint","mousePosi","removeHint","removeTimingHint","svgHintLayer","hintLayerBBox","hintBg","CHAR_LEN","HINT_HEIGHT","FILL_COLOR","STROKE_COLOR","contentText","createTimingHint","pointingPosi","textBlocks","hintWidth","TIMING_HINT_HEIGHT","fakeBg","TIMING_FILL_COLOR","TIMING_BORDER_COLOR","textWrapper","contentInput","onfocus","onblur","timingValue","pointer","updateTimingHint","containerTrans","hintTag","createLine","alignWithKfId","alignToKfId","alignToKfGroup","fetchAniGroup","IntelliRefLine","allLines","kfLineMapping","theOtherEnd","lineId","updateLine","alignMerge","hideLine","kfId","lineItem","containerBBox","alignKf1","alignKf2","alignWithKfBBox","alignToKfBBox","alignToKfInfo","alignWithKf","alignToKf","calAlignRange","minX","maxX","hintAniPosis","hintLines","aniGroup","showHintLine","firstKf","fetchFirstKf","aniGroupBBox","groupBg","firstKfBBox","tmpHintLine1","hintInsert","tmpHintLine2","tmpHintLine3","hintAlign","tmpHintLine4","zoomHideLine","zoomShowLine","showLine","targetPosi","targetHeight","highlight","TRIGER_STROKE_COLOR","HIGHLIGHT_STROKE_COLOR","showFakeDuration","fakeDuration","removeHintLine","removeFakeDuration","hintDrop","childrenRefValues","kfHasOffset","kfHasDuration","isDragging","alignLines","_renderWhenZooming","_offsetDiff","od","transNodeElements","translateWholeGroup","rwz","renderWhenZooming","showGroupWhenZooming","groupIdx","addEasingTransform","groupTitle","removeEasingTransform","posiY","preAniId","tmpTitle","fullTitle","childrenRef","createBlankKfg","targetGroupAniId","startX","translateContainer","BASIC_GRAY","GRAY_STEP","GROUP_RX","restorePlusBtn","restoreBtn","alignWithGroup","fetchAlignWithGroup","lowestGroupBBox","transY","lowestBranches","fetchLowestSubBranch","TITLE_HEIHGT","lowestGroupInAlignWith","updateTrans","transX","drawOffset","offsetIllus","drawGroupBg","groupMenu","drawGroupMenu","showMenu","updateTitleWidth","sortableSvgTable","toElement","relatedTarget","transHideTitle","menuListContainer","hideMenu","GroupMenu","createAndRenderMenu","updateParentKfHasTiming","groupTitleContent","textBBox","groupTitleBg","groupSortBtn","transShowTitle","oriTransX","removeTable","showTitle","hideTitle","bindTitleHover","unbindTitleHover","addGroupToPopLayerWhenDrag","popKfContainer","popKfContainerBbox","groupsAligned","tmpAniId","tmpContainerBBox","reinsertGroupToItsParent","alignedGroups","useTag","updateUseTagPosi","bindGroupTitleDrag","oriMousePosiRecord","oriMousePosi","updateSpec","preSibling","currentMousePosi","posiDiff","posiDiffToOri","alignedGroup","tmpOriTrans","dragInnerGroup","dragAniGroup","hl","unbindGroupTitleDrag","createGroupTitle","groupTitleWrapper","TITLE_CHAR_WIDTH","TITLE_PADDING","titleBtnBg","btnR","tmpLine","btnBBox","groupTitleCover","bindBgHover","unbindBgHover","sepCurrentAniMarks","currentGBBox","currentGPosi","alignTargetGroup","sepTargetAniMarks","hideOffset","showOffset","currentGroupBBox","preGroupBBox","posiYDiff","posiXRightDiff","posiXLeftDiff","currentKfOffsetW","BASIC_OFFSET_DURATION_W","correctTimingRef","compareXDiff","updateTimingRef","cancelHighlightGroup","minOffset","prepend","highlightGroup","fetchAllKfs","allKfs","showGroupBg","hideGroupBg","rerenderGroupBg","currentOneIncluded","allGroupIds","findAllGroups","allAlignedKfs","lId","refLine","targetTransGroupIds","tmpGroup","tmpGroupId","idArr","findLastKf","lastKf","translateGroup","startTransItem","updateAlignedKfs","updateStartItem","updateStartItemAligned","extraInfo","lastItem","extraWidth","currentTransX","currentIdxInGroup","cameThroughOmit","comingThroughOmit","tmpTrans","tmpIdxInGroup","transOmitsWithItem","translateAlignedGroups","omitWidth","OMIT_WIDTH","updateSize","updateSiblingAndParentSizePosi","translateBtn","cc","tmpKfItem","tmpKfItemInfo","tmpKfItemBBox","extendSize","updateParentTrackInsert","maxBoundry","childHasHiddenDuration","hasHiddenDuration","currentTrans","countingBBox","kfAligned","currentGroupWidth","childHeight","EXTRA_HEIGHT","updateOffset","rightBoundary","kftStart","lastGroupStart","lastGroupWidth","posiX","kfO","updateThumbnail","gHeight","updatePosition","transPosiY","grayColor","alignWithGroupBBox","diffW","checkChildrenOrder","omitRightPosi","omitCount","reorderKfChildren","insertChild","alignRange","kzl","showThumbnail","cId","hidingThisKf","alignTargetKf","checkParentRenderedWhenZooming","zoomItem","correctTrans","maxOmitWidth","fetchLastSubBranch","lowestLevelBranch","groupWidth","omittedNum","tmpOmit","removeOmit","updateNum","preItemTrans","preItem","preKfWidth","oriOmitTrans","oHeight","groupTrans","groupId","menuBg","MENU_BG_COLOR","PADDING_LEFT","effectTypeBtn","createSplit","parentOffset","parentHeight","btnContainer","btnBg","btnContainerBBox","createMenuList","EFFECT_TRANSITION","EASING_INOUT_QUAD","DURATION","splitLine","MENU_ITEM_ICON_COLOR","posi","menuLayer","menuLayerBBox","menuListHeight","menuContent","MENU_LIST_ITEM_HEIGHT","MENU_LIST_WIDTH","EASING_MENU_LIST_WIDTH","listItem","itemBg","tmpAniGroup","translateEasing","isHighlighted","chartThumbnails","_durationDiff","dd","showItemWhenZooming","highlightKfs","selectedCls","cancelHighlightKfs","cancelHighlightKf","createKfInfo","basicInfo","fakeKfIdx","createOptionKfItem","drawKfBg","drawChart","kfInfo","renderItem","showAlignFrame","bindHoverBtn","hoverBtnContainer","unbindHoverBtn","durationIllus","drawHoverBtns","updateAlignPosi","refLineId","oriToKf","oriToKfBottom","alignFrame","itemBBox","FRAME_COLOR","hideAlignFrame","hideDuration","showDuration","kfDragoverKf","cancelKfDragoverKf","currentPosiX","currentKfInfo","alignedKfItem","tmpKfBBox","bgDiffX","posiXForNextKf","currentAlignedKfTransX","alignedKfItemBBox","transXForNextKf","reachTarget","currentKfTrans","omitType","alignTargetKfInfo","alignTargetKfBBox","findNextSibling","bindDragBarHover","dragBtn","unbindDragBarHover","hoverBtnTxt","hoverBtnBg","startTimeThisKf","durationNum","targetMoveItem","hintPosiLine","nextSibling","firstSibling","preKfRight","corresRefLine","checkDragOutOfGroup","currentKfLeft","preKfDurationW","posiXDiff","minDuration","tmpCurrentBBox","renderChartToCanvas","tmpContainer","doEnlarge","enlargeMarks","resetTxtCover","resetMarkSize","shown","highlightKf","transNextKf","startAdjustingTime","dragSelOver","clearDragOver","dragoverKf","dragSelOut","kfo","omitTrans","omitTransX","ct","findOmitPattern","totalHeight","tmpKfId","tmpKfInfo","kfWidthWithWhiteSpace","currentKfIdx","passedOmits","preChild","preChildWidth","preChildTrans","calKfZoomLevel","kfTrans","omitStartY","STATIC_KF_ID","isHidden","OMIT_HEIGHT","omitIdx","startY","preItemIdx","renderOmit","createThumbnail","createDots","hideOmit","createUseTag","kfFgBbox","parentBbox","iconContainer","OMIT_W_UNIT","kfIcon","createThumbnailComb","IconComb","OFFSET_COLOR","DURATION_COLOR","createNum","trackCount","OMIT_SUB_WIDTH","OMIT_SUB_HEIGHT","ommittedKf","trackNum","createSubThumbnail","afterPre","offsetBg","OMIT_SUB_W_UNIT","duraitonBg","frame","lineStartY","targetKf","targetKfTrans","targetKfBBox","currentOmitBbox","showOmit","mouseIsOver","offsetNum","groupRx","bindOffsetHover","timingBBox","unbindOffsetHover","widgetHeight","fake","timingType","KfTimingIllus","TIMING_TYPE_OFFSET","drawArrowIcon","offsetType","stretchBar","createStretchBar","bindDurationHover","durationBg","unbindDurationHover","widgetX","hiddenDuration","TIMING_TYPE_DURATION","hideArrow","showArrow","barHeight","DURATION_STRETCH_COLOR","OFFSET_STRETCH_COLOR","strectchBarBBox","timingWidth","currentTiming","widthToTiming","aInfo","oriPosiX","barX","durationDiff","offsetDiff","durationTime","trans","SCALE_DOWN","SCALE_UP","maxDuration","maxOffset","trackIdx","numExistTracks","TRACK_PADDING_TOP","trackBgContainer","trackBg","splitLineTop","splitLineBottom","loadingWrapper","loadingIcon","paddingTop","allLoadings","LOADING","SUGGESTING","onShow","highlightPlusBtns","pb","acceptableCls","highlightBtn","kfSize","cancelHighlightPlusBtns","cancelHighlightBtn","kfs","kf0Marks","mClassCount","hasDiffAttrValue","datum0","firstKfArrInTargetKfg","parentTrack","PlusBtn","BTN_IDX","BTN_COLOR","removeBtn","BTN_HIGHLIGHT_COLOR","BTN_DRAGOVER_COLOR","dragoverBtn","btnX","renderKfOnPathAndSuggestionBox","startRowIdx","selectedRows","std","rowDataId","targetTr","sortDataAttrArr","mouseDownCell","resetSelection","evt","targetTd","selectRange","ctrlKey","scrollLeft","scrollTop","mouseMoveCell","SelectableTable","mouseUpCell","ghostDiv","dragOverItem","judgeDragOver","renderedUniqueIdx","tmpRowIdx","selectionStartIdx","selectionEndIdx","startIdx","domain","hideSlider","sliderRadius","trackWidth","sliderWidth","sliderHeight","Slider","SLIDER_RADIUS","SLIDER_WIDTH","SLIDER_HEIGHT","created","sliderMargin","containerHeight","reverseScale","_containerWidth","trackPassed","updateSlider","correspondingKfg","renderTable","layerBBox","SortableSvgTable","TABLE_WIDTH","itemList","itemContentList","TABLE_PADDING","CELL_HEIGHT","itemContent","cloneItem","currentItemPosi","tmpMousePosi","diffPosi","tmpRecorder","tmpItemContainer","oriOrder","SuggestBox","createSuggestBox","kfBeforeSuggestBox","allCurrentPaths","uniqueKfIdx","OptionItem","TEXT_PANEL_WIDTH","createOptionKfs","bgLayerBBox","preKfBBox","pathToSpec","allSuggestedPaths","startKf","resetProps","targetPath","clsOfMarksInPath","containsNonDataMarkInPath","clsOfMarksThisAni","createKfOnPath","marksThisStep","preKfInfo","startKfGroup","marksEachStep","selectedMarksEachStep","preKf","preStepIdx","marksEachStepArr","stepIdx","omittedMarksRecord","omitStartX","tmpAllPaths","nextUniqueKfIdx","transStartKf","lastUpdateSuggestionPathActionInfo","uniqueKfRecorder","Array2DItem","optionInfo","kfIdx","optionItem","createaItem","parentSuggestBox","optionKf","currentSelectedMarksEachStep","currentActionInfo","aNameTspan","aValueTspan","createSelectionFrame","createOrigin","originCircle","Lasso","LASSO_ORIGIN_ID","ORIGIN_RADIUS","lassoPath","LASSO_PATH_ID","updatePath","coord","oriPath","CLOSE_DIS","LASSO_CLOSEPATH_ID","updateClosePath","createClosePath","removeClosePath","removeSelectionFrame","framedMarks","markBBox","coord1","coord2","pnt1","pnt2","pnt3","pnt4","pnt5","framed","pnt","selectionFrame","updateSelectionFrame","boundary","rectangularSelect","createSVGPoint","svgCoord1","matrixTransform","svgCoord2","pointInRect","markBoundary","minY","maxY","translateStr","transNums","match","Tool","minute","second","svgString","outerHTML","same","svgContainerId","rectPosiPoint1","initLassoSelection","containerId","lassoSelection","pathCoord","boundaryCheck","initRectangularSelection","rectangularSelection","rectPosi2","tmpX","tmpY","tmpWidth","tmpHeight","clickedItem","clickedMarkId","targetTrans","pbBBox","rootNode","transOffset","isEasingNode","includeCls","oriStrokeWidth","strokeWidthRecord","strokeWidthToScale","txtBBox","txtCover","txt","currentZoomNum","ENLARGE_THRESHOLD","SPLITTER","ahi","alo","bhi","blo","br","ar","byteToHex","buf","bth","rnds8","rnds","rng","bytesToUuid","super","_extend","_type","appear","animationType","easingType","easeLinear","_duration","attribute","tp","alert","es","drtn","initAction","actionJson","tmpAttr","replaceDurationConst","constants","RegExp","info","msg","errSpec","CanisUtil","checkEquation","static","actionTmplJson","actionTmpls","currentTmpl","currentName","extendName","extend","extendTmpl","changedAttrs","dataTrans","replaceActionTmpls","actionJsonArr","changedAttr","fromArr","toArr","transArr","tmpFromItem","tmpToItem","tmpFromPath","tmpToPath","stepNum","fromPathStepLen","toPathStepLen","fromDiscritPath","toDiscritPath","tmpFromPnt","getPointAtLength","tmpToPnt","preObj","actionTargets","custom","targetAnimationType","tmpObj","disappear","fadeOut","grow","degrow","wipeBottom","wipe","wipeOutFromTop","wipeTop","wipeOutFromBottom","wipeLeft","wipeOutFromRight","wipeRight","wipeOutFromLeft","circleOut","wheel","wheelOut","actionArr","durationAttrValues","domMarks","wholeStart","wholeEnd","lastStart","lastEnd","durationWithAttr","tmpStartMap","tmpEndMap","calOffsetTime","mistake","tmpStart","minTmpStart","maxTmpEnd","offsetStart","tmpEnd","tmpResultDuration","resultDurations","minValueEachAttr","tmpExtraDuration","minAttrValue","easingName","easeInQuad","easeOutQuad","easeInOutQuad","easeInCubic","easeOutCubic","easeInOutCubic","zoom","easeOutBounce","GroupingSpec","_groupBy","_reference","_delay","gb","tmpRefStr","dly","replaceDelayConst","initGrouping","groupingJson","field","expr","arrangeOrder","aligning","framesMark","nodeId","generateTree","updateTree","getMarkOrderAndLeaves","groupByRef","sameGrouping","nodesThisLevel","tmpNode","sortNodes","specSort","appendNum","refValueNum","hasSingleMark","orderRef","nodesThisLevelArr","orderType","markId1","markId2","orderRefValue1","orderRefValue2","datum1","datum2","orderTypes","ascending","descending","appendFrame","parentId","nodeIdx","nodesNum","leaves","queue","parentGroupRef","parentGroupRefValue","calTimeWithTree","lastGroupEnd","markAni","totalDuration","tmpMarkId","_offset","offsetRef","tmpOffsetRefStr","transRef","ofst","FRAME_RATE","replaceOffsetConst","calELeOffsetTime","itemsStart","offsetValue","allItemsStart","itemStart","absolute","refStr","dataBindAttrs","FacetSpec","views","_views","facetType","frameViews","range","regend","rangeStartName","rangeEndName","rangeStart","rangeEnd","maxLen","numDiff","row","inputSpecs","hasError","inputSpec","endIdx","tmpBlocks","chartName","facet","nameCharts","nullCharts","defaultWidth","defaultHeight","svgContent","okStatus","protocol","overrideMimeType","tmpDiv","viewBoxNums","facetViews","viewport","setViewport","datumMarkMapping","removeTransitions","mArr","marksWithSameDatum","svgChart","mergeCharts","chartsToCombine","combineCharts","facetNum","resultCharts","oriWidth","oriHeight","widthAfterFacet","heightAfterFacet","tmpCharts","viewBoxW","viewBoxH","chartTransForm","tmpChart","tmpMarks","idNum","chartChildren","tmpDom","transformAttrs","scaleNum","markStatus","markTempletes","attrNames","nullStatus","statusObj","attrNamesCopy","statusArr","compareStatus","diffCmds","markStr","resultD","svgMark","dataTransArr","si","tmpStatus","bBoxes","bBox","parentTrans","dataDatumAttrValueStr","dataDatumAttrValue","shapeName","isNonDataMark","tmpId","pureDatum","mShape","pureDatumStr","tmpDataDatum","scaleStr","transStr","transPosiStr","addLottieMarkLayers","_id","_align","animationStartTime","animationEndTime","allMarksThisAni","anisAligned","aniIdx","replaceConstants","animationJson","usedChangedAttrs","updating","visAttrActionJsonArr","visAttrActionJson","tmpAction","calAniTime","lastAnimation","_grouping","tmpAttrValues","actionsDurations","processedActions","tmpMarksInOrder","leavesOfAnimation","vAttr","visualAttrs","finalStatus","timeDiff","calTimeAsEle","withObj","calTimeAsObj","updateAniStartAndEndTime","tmpActionSpec","actionAttrs","frameTimePoint","currentStartTime","currentEndTime","tmpEndTime","marksInLeaf","leafStart","leafEnd","tmpMAni","leafMapping","marksSameDatum","tmpL","leafNum","ofstTime","currentLeafLastAni","lastleafCurrentAni","currentLeafCurrentAni","alignToId","alignWithId","calOfstTimeForLastAni","alignWithLeaves","updateLastAnimationTiming","calAniOffset","leaf","leafToAlign","tmpOfstTime","mStartTime","mDuration","mEndTime","alignWithAniId","keepUpdating","currentLeafLastAniStart","tmpLeafStart","aniAligned","currentleafAlignedAni","tmpLeaf","tmpAllStart","aniObj","wholeEndTime","targetMark","tmpBbox","setStaticProperty","lottieChannels","translateToLottieChannel","fromValue","toValue","fromPosi","toPosi","setAnimatableProperty","pathOffset","tmpOffsetX","tmpOffsetY","tmpStartAngle","tmpEndAngle","alignStr","frameTime","FIRST_ANI_ID","alignAttrs","CanisSpec","currentSpec","canisObj","_constants","_animations","chartWidth","chartHeight","conArr","aniJson","idxAniJson","chartNum","tmpAniJson","tmpAniIdx","idMapping","tmpIdxAniJson","newId","preprocessCharts","diffChart","preprocessChartsPreview","compareSpec","checkAttrs","legalAttrs","errSpecStr","checkSpec","checkGroupingSpec","errStr","initPreview","effectTmpls","tmpAllMarks","mClass","sortSelector","aniKey","idxForEachCls","markCls","markJSON","transformedAttrs","tfAttrsDataKeys","tAttr","outterRadius","tmpDomAttrObj","markDom","discD","clockwise","startAngle","endAngle","selectorBlocks","lottieJSON","Canis","exportJSON","globalVar","jsMovin","markLayers","string","stack","array","stringarr","objType","currentTimeS","currentTimeMS","colorNames","tmpStr","rgb","HEX2RGB","color2RGB","nodeName","nodeValue","createComment","implementation","createDocument","createDocumentType","createDocumentFragment","discretizeD","fillColor","resultGroup","reg","exec","parameters","convertColor","prev","valid","firstPoint","secondPoint","circles","tmp","svgArcToCenterParam","ux","uy","vx","vy","phi","fA","fS","deltaAngle","PIx2","s_phi","c_phi","hd_x","hd_y","hs_x","hs_y","x1_","y1_","lambda","rxry","rxy1_","ryx1_","sum_of_sq","coe","cx_","cy_","xcr1","xcr2","ycr1","ycr2","radian","fMode","tMode","mr","padStart","angleInRadians","start1","polarToCartesian","end1","start2","end2","isRing","domNode","hasPosi","resultCmd","setPathDValue","tmpPath","pathStepLen","discritPath","tmpPnt","posiOffset","getPathOffset","pm","cmdRegExp","firstCmdName","resetX","resetY","firstCmdValues","cmdName","cmdValue","calNumTrans","nums","ni","nums2","anums","anums2","currentCmdIdx","resetVal","tVal","diffCmdIdxs","cmdIdx","startD","endD","startDisD","endDisD","fromStartAngle","fromEndAngle","toStartAngle","toEndAngle","interpolateFn","validAngle","minimalAngle","interpolate","tmpDRecorder","compareD","dArr","firstD","firstDCmds","tmpD","tmpDCmds","diffAttrIdxs","firstDCmdValues","tmpDCmdValue","firstDCmdValue","tmpDCmdValues","hasFlag","scaleNumStr","propName","Viewport","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","amdO","getter","definition","globalThis","Function","toStringTag","scriptUrl","importScripts","currentScript","baseURI","self","nc","__webpack_exports__"],"sourceRoot":""}